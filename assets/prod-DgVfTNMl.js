const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/srt-parser-tUK0mQyR.js","assets/main-ivqbj34p.js","assets/mui-Du5OpAyb.js","assets/vendor-I5pfZzyJ.js","assets/router-C70wdWFB.js","assets/main-DDo056iP.css","assets/ssa-parser-D5ZYPBTa.js","assets/errors-Bb4TWB9B.js"])))=>i.map(i=>d[i]);
var t=Object.defineProperty,e=(e,i,s)=>((e,i,s)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s)(e,"symbol"!=typeof i?i+"":i,s);import{_ as i}from"./main-ivqbj34p.js";const s={LoadFail:0,BadSignature:1,BadTimestamp:2,BadSettingValue:3,BadFormat:4,UnknownSetting:5};class n extends Error{constructor(t){super(t.reason),e(this,"code"),e(this,"line"),this.code=t.code,this.line=t.line}}const r=/\r?\n|\r/gm;class o{constructor(t){e(this,"writable"),e(this,"readable");const i=new a(t);this.writable=new WritableStream({write(t){i.transform(t)},close(){i.close()}}),this.readable=new ReadableStream({start(t){i.onLine=e=>t.enqueue(e),i.onClose=()=>t.close()}})}}class a{constructor(t){e(this,"a",""),e(this,"b"),e(this,"onLine"),e(this,"onClose"),this.b=new TextDecoder(t)}transform(t){this.a+=this.b.decode(t,{stream:!0});const e=this.a.split(r);this.a=e.pop()||"";for(let i=0;i<e.length;i++)this.onLine(e[i].trim())}close(){this.a&&this.onLine(this.a.trim()),this.a="",this.onClose()}}async function l(t,e){const s=(null==e?void 0:e.type)??"vtt";let n,r;if("string"==typeof s)switch(s){case"srt":n=(await i(async()=>{const{default:t}=await import("./srt-parser-tUK0mQyR.js");return{default:t}},__vite__mapDeps([0,1,2,3,4,5]))).default;break;case"ssa":case"ass":n=(await i(async()=>{const{default:t}=await import("./ssa-parser-D5ZYPBTa.js");return{default:t}},__vite__mapDeps([6,1,2,3,4,5]))).default;break;default:n=(await Promise.resolve().then(function(){return S})).default}else n=s;const o=t.getReader(),a=n(),l=!!(null==e?void 0:e.strict)||!!(null==e?void 0:e.errors);await a.init({strict:!1,...e,errors:l,type:s,cancel(){o.cancel(),r=a.done(!0)}});let h=1;for(;;){const{value:t,done:e}=await o.read();if(e){a.parse("",h),r=a.done(!1);break}a.parse(t,h),h++}return r}async function h(t,{encoding:e="utf-8",...i}={}){return l(t.pipeThrough(new o(e)),i)}class c extends EventTarget{constructor(t,i,s){super(),e(this,"id",""),e(this,"startTime"),e(this,"endTime"),e(this,"text"),e(this,"pauseOnExit",!1),this.startTime=t,this.endTime=i,this.text=s}addEventListener(t,e,i){super.addEventListener(t,e,i)}removeEventListener(t,e,i){super.removeEventListener(t,e,i)}}const u="undefined"==typeof document,d=u?c:window.VTTCue;class f extends d{constructor(){super(...arguments),e(this,"region",null),e(this,"vertical",""),e(this,"snapToLines",!0),e(this,"line","auto"),e(this,"lineAlign","start"),e(this,"position","auto"),e(this,"positionAlign","auto"),e(this,"size",100),e(this,"align","center"),e(this,"style")}}class p{constructor(){e(this,"id",""),e(this,"width",100),e(this,"lines",3),e(this,"regionAnchorX",0),e(this,"regionAnchorY",100),e(this,"viewportAnchorX",0),e(this,"viewportAnchorY",100),e(this,"scroll","")}}function g(t){const e=parseInt(t,10);return Number.isNaN(e)?null:e}function m(t){const e=parseInt(t.replace("%",""),10);return!Number.isNaN(e)&&e>=0&&e<=100?e:null}function b(t){if(!t.includes(","))return null;const[e,i]=t.split(",").map(m);return null!==e&&null!==i?[e,i]:null}function v(t){const e=parseFloat(t);return Number.isNaN(e)?null:e}const y=/[:=]/,w=/^[\s\t]*(region|vertical|line|position|size|align)[:=]/,T=/^REGION:?[\s\t]+/,k=/[\s\t]+/,x=/[\s\t]*-->[\s\t]+/,A=/start|center|end|left|right/,E=/start|center|end/,C=/line-(?:left|right)|center|auto/,_=/^(?:(\d{1,2}):)?(\d{2}):(\d{2})(?:\.(\d{1,3}))?$/;var j=(t=>(t[t.None=0]="None",t[t.Header=1]="Header",t[t.Cue=2]="Cue",t[t.Region=3]="Region",t[t.Note=4]="Note",t))(j||{});class N{constructor(){e(this,"h"),e(this,"e",0),e(this,"i",{}),e(this,"j",{}),e(this,"l",[]),e(this,"c",null),e(this,"d",null),e(this,"m",[]),e(this,"f"),e(this,"n","")}async init(t){this.h=t,t.strict&&(this.e=1),t.errors&&(this.f=(await i(async()=>{const{ParseErrorBuilder:t}=await import("./errors-Bb4TWB9B.js");return{ParseErrorBuilder:t}},__vite__mapDeps([7,1,2,3,4,5]))).ParseErrorBuilder)}parse(t,e){var i,s,n,r,o,a;if(""===t)this.c?(this.l.push(this.c),null==(s=(i=this.h).onCue)||s.call(i,this.c),this.c=null):this.d?(this.j[this.d.id]=this.d,null==(r=(n=this.h).onRegion)||r.call(n,this.d),this.d=null):1===this.e&&(this.k(t,e),null==(a=(o=this.h).onHeaderMetadata)||a.call(o,this.i)),this.e=0;else if(this.e)switch(this.e){case 1:this.k(t,e);break;case 2:if(this.c){const i=this.c.text.length>0;!i&&w.test(t)?this.o(t.split(k),e):this.c.text+=(i?"\n":"")+t}break;case 3:this.p(t.split(k),e)}else if(t.startsWith("NOTE"))this.e=4;else if(t.startsWith("REGION"))this.e=3,this.d=new p,this.p(t.replace(T,"").split(k),e);else if(t.includes("--\x3e")){const i=this.q(t,e);i&&(this.c=new f(i[0],i[1],""),this.c.id=this.n,this.o(i[2],e)),this.e=2}else 1===e&&this.k(t,e);this.n=t}done(){return{metadata:this.i,cues:this.l,regions:Object.values(this.j),errors:this.m}}k(t,e){var i;if(e>1){if(y.test(t)){const[e,i]=t.split(y);e&&(this.i[e]=(i||"").replace(k,""))}}else t.startsWith("WEBVTT")?this.e=1:this.g(null==(i=this.f)?void 0:i.r())}q(t,e){var i,s,n;const[r,o=""]=t.split(x),[a,...l]=o.split(k),h=L(r),c=L(a);if(null!==h&&null!==c&&c>h)return[h,c,l];null===h&&this.g(null==(i=this.f)?void 0:i.s(r,e)),null===c&&this.g(null==(s=this.f)?void 0:s.t(a,e)),null!=h&&null!==c&&c>h&&this.g(null==(n=this.f)?void 0:n.u(h,c,e))}p(t,e){var i,s;let n;for(let r=0;r<t.length;r++)if(y.test(t[r])){n=!1;const[o,a]=t[r].split(y);switch(o){case"id":this.d.id=a;break;case"width":const t=m(a);null!==t?this.d.width=t:n=!0;break;case"lines":const s=g(a);null!==s?this.d.lines=s:n=!0;break;case"regionanchor":const r=b(a);null!==r?(this.d.regionAnchorX=r[0],this.d.regionAnchorY=r[1]):n=!0;break;case"viewportanchor":const l=b(a);null!==l?(this.d.viewportAnchorX=l[0],this.d.viewportAnchorY=l[1]):n=!0;break;case"scroll":"up"===a?this.d.scroll="up":n=!0;break;default:this.g(null==(i=this.f)?void 0:i.v(o,a,e))}n&&this.g(null==(s=this.f)?void 0:s.w(o,a,e))}}o(t,e){var i,s;let n;for(let r=0;r<t.length;r++)if(n=!1,y.test(t[r])){const[o,a]=t[r].split(y);switch(o){case"region":const t=this.j[a];t&&(this.c.region=t);break;case"vertical":"lr"===a||"rl"===a?(this.c.vertical=a,this.c.region=null):n=!0;break;case"line":const[s,r]=a.split(",");if(s.includes("%")){const t=m(s);null!==t?(this.c.line=t,this.c.snapToLines=!1):n=!0}else{const t=v(s);null!==t?this.c.line=t:n=!0}E.test(r)?this.c.lineAlign=r:r&&(n=!0),"auto"!==this.c.line&&(this.c.region=null);break;case"position":const[l,h]=a.split(","),c=m(l);null!==c?this.c.position=c:n=!0,h&&C.test(h)?this.c.positionAlign=h:h&&(n=!0);break;case"size":const u=m(a);null!==u?(this.c.size=u,u<100&&(this.c.region=null)):n=!0;break;case"align":A.test(a)?this.c.align=a:n=!0;break;default:this.g(null==(i=this.f)?void 0:i.x(o,a,e))}n&&this.g(null==(s=this.f)?void 0:s.y(o,a,e))}}g(t){var e,i;if(t){if(this.m.push(t),this.h.strict)throw this.h.cancel(),t;null==(i=(e=this.h).onError)||i.call(e,t)}}}function L(t){const e=t.match(_);if(!e)return null;const i=e[1]?parseInt(e[1],10):0,s=parseInt(e[2],10),n=parseInt(e[3],10),r=e[4]?parseInt(e[4].padEnd(3,"0"),10):0;return i<0||s<0||n<0||r<0||s>59||n>59?null:3600*i+60*s+n+r/1e3}var S=Object.freeze({__proto__:null,VTTBlock:j,VTTParser:N,default:function(){return new N},parseVTTTimestamp:L});const V=/[0-9]/,z=/[\s\t]+/,M={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span",timestamp:"span"},$={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},O=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,P=new Set(["white","lime","cyan","red","yellow","magenta","blue","black"]),B=new Set(Object.keys(M));function R(t){var e,i;let s,n="",r=1,o=[],a=[];for(let u=0;u<t.text.length;u++){const o=t.text[u];switch(r){case 1:"<"===o?(c(),r=2):n+=o;break;case 2:switch(o){case"\n":case"\t":case" ":l(),r=4;break;case".":l(),r=3;break;case"/":r=5;break;case">":l(),r=1;break;default:!n&&V.test(o)&&(r=6),n+=o}break;case 3:switch(o){case"\t":case" ":case"\n":h(),s&&(null==(e=s.class)||e.trim()),r=4;break;case".":h();break;case">":h(),s&&(null==(i=s.class)||i.trim()),r=1;break;default:n+=o}break;case 4:">"===o?(n=n.replace(z," "),"v"===(null==s?void 0:s.type)?s.voice=H(n):"lang"===(null==s?void 0:s.type)&&(s.lang=H(n)),n="",r=1):n+=o;break;case 5:">"===o&&(n="",s=a.pop(),r=1);break;case 6:if(">"===o){const e=L(n);null!==e&&e>=t.startTime&&e<=t.endTime&&(n="timestamp",l(),s.time=e),n="",r=1}else n+=o}}function l(){if(B.has(n)){const e=s;s={tagName:M[t=n],type:t,children:[]},e?(a[a.length-1]!==e&&a.push(e),e.children.push(s)):o.push(s)}var t;n="",r=1}function h(){if(s&&n){const t=n.replace("bg_","");P.has(t)?s[n.startsWith("bg_")?"bgColor":"color"]=t:s.class=s.class?s.class+" "+n:n}n=""}function c(){if(!n)return;const t={type:"text",data:H(n)};s?s.children.push(t):o.push(t),n=""}return 1===r&&c(),o}function H(t){return t.replace(O,t=>$[t]||"'")}function I(t,e,i){t.style.setProperty(`--${e}`,i+"")}function F(t,e,i=!0){t.setAttribute(`data-${e}`,!0===i?"":i+"")}function q(t,e){t.setAttribute("data-part",e)}function W(t,e=0){return D(R(t),e)}function D(t,e=0){let i,s="";for(const n of t)if("text"===n.type)s+=n.data;else{const t="timestamp"===n.type;i={},i.class=n.class,i.title="v"===n.type&&n.voice,i.lang="lang"===n.type&&n.lang,i["data-part"]="v"===n.type&&"voice",t&&(i["data-part"]="timed",i["data-time"]=n.time,i["data-future"]=n.time>e,i["data-past"]=n.time<e),i.style=`${n.color?`color: ${n.color};`:""}${n.bgColor?`background-color: ${n.bgColor};`:""}`;const r=Object.entries(i).filter(t=>t[1]).map(t=>`${t[0]}="${!0===t[1]?"":t[1]}"`).join(" ");s+=`<${n.tagName}${r?" "+r:""}>${D(n.children)}</${n.tagName}>`}return s}function X(t,e){if(!u)for(const i of t.querySelectorAll('[data-part="timed"]')){const t=Number(i.getAttribute("data-time"));Number.isNaN(t)||(t>e?F(i,"future"):i.removeAttribute("data-future"),t<e?F(i,"past"):i.removeAttribute("data-past"))}}const Y=Symbol(0);function G(t){return t instanceof HTMLElement?{top:t.offsetTop,width:t.clientWidth,height:t.clientHeight,left:t.offsetLeft,right:t.offsetLeft+t.clientWidth,bottom:t.offsetTop+t.clientHeight}:{...t}}function J(t,e,i){switch(e){case"+x":t.left+=i,t.right+=i;break;case"-x":t.left-=i,t.right-=i;break;case"+y":t.top+=i,t.bottom+=i;break;case"-y":t.top-=i,t.bottom-=i}}function K(t,e){return t.left<=e.right&&t.right>=e.left&&t.top<=e.bottom&&t.bottom>=e.top}function U(t,e){for(let i=0;i<e.length;i++)if(K(t,e[i]))return e[i];return null}function Q(t,e){return e.top>=0&&e.bottom<=t.height&&e.left>=0&&e.right<=t.width}function Z(t,e,i){switch(i){case"+x":return e.left<0;case"-x":return e.right>t.width;case"+y":return e.top<0;case"-y":return e.bottom>t.height}}function tt(t,e){return Math.max(0,Math.min(t.width,e.right)-Math.max(0,e.left))*Math.max(0,Math.min(t.height,e.bottom)-Math.max(0,e.top))/(t.height*t.width)}function et(t,e){return{top:e.top/t.height,left:e.left/t.width,right:(t.width-e.right)/t.width,bottom:(t.height-e.bottom)/t.height}}function it(t,e){return e.top=e.top*t.height,e.left=e.left*t.width,e.right=t.width-e.right*t.width,e.bottom=t.height-e.bottom*t.height,e}const st=["top","left","right","bottom"];function nt(t,e,i,s){const n=et(e,i);for(const r of st)I(t,`${s}-${r}`,100*n[r]+"%")}function rt(t,e,i,s){let n,r=1,o={...e};for(let a=0;a<s.length;a++){for(;Z(t,e,s[a])||Q(t,e)&&U(e,i);)J(e,s[a],1);if(Q(t,e))return e;const l=tt(t,e);r>l&&(n={...e},r=l),e={...o}}return n||o}const ot=Symbol(0);function at(t,e,i,s){let n,r=i.firstElementChild,o=function(t){if("auto"===t.line)return t.snapToLines?-1:100;return t.line}(e),a=[];if(i[Y]||(i[Y]=function(t,e){const i=G(e),s=function(t){const e={};for(const i of st)e[i]=parseFloat(t.style.getPropertyValue(`--cue-${i}`));return e}(e);e[ot]=!1,s.top&&(i.top=s.top,i.bottom=s.top+i.height,e[ot]="top");if(s.bottom){const n=t.height-s.bottom;i.top=n-i.height,i.bottom=n,e[ot]="bottom"}s.left&&(i.left=s.left);s.right&&(i.right=t.width-s.right);return et(t,i)}(t,i)),n=it(t,{...i[Y]}),i[ot])a=["top"===i[ot]?"+y":"-y","+x","-x"];else if(e.snapToLines){let i;switch(e.vertical){case"":a=["+y","-y"],i="height";break;case"rl":a=["+x","-x"],i="width";break;case"lr":a=["-x","+x"],i="width"}let s=parseFloat(getComputedStyle(r).lineHeight)||0,l=s*Math.round(o),h=t[i]+s,c=a[0];Math.abs(l)>h&&(l=l<0?-1:1,l*=Math.ceil(h/s)*s),o<0&&(l+=""===e.vertical?t.height:t.width,a=a.reverse()),J(n,c,l)}else{const i=""===e.vertical,s=i?"+y":"+x",r=i?n.height:n.width;J(n,s,(i?t.height:t.width)*o/100),J(n,s,"center"===e.lineAlign?r/2:"end"===e.lineAlign?r:0),a=i?["-y","+y","-x","+x"]:["-x","+x","-y","+y"]}return n=rt(t,n,s,a),nt(i,t,n,"cue"),n}const lt=["-y","+y","-x","+x"];function ht(t,e,i,s){let n=Array.from(i.querySelectorAll('[data-part="cue-display"]')),r=0,o=Math.max(0,n.length-e.lines);for(let l=n.length-1;l>=o;l--)r+=n[l].offsetHeight;I(i,"region-height",r+"px"),i[Y]||(i[Y]=et(t,G(i)));let a={...i[Y]};return a=it(t,a),a.width=i.clientWidth,a.height=r,a.right=a.left+a.width,a.bottom=a.top+r,a=rt(t,a,s,lt),nt(i,t,a,"region"),a}const ct=Object.freeze(Object.defineProperty({__proto__:null,CaptionsRenderer:class{constructor(t,i){e(this,"overlay"),e(this,"z"),e(this,"A",0),e(this,"C","ltr"),e(this,"B",[]),e(this,"D",!1),e(this,"E"),e(this,"j",new Map),e(this,"l",new Map),e(this,"K",function(t,e){let i,s=null;function n(){r(),t(...i),i=void 0}function r(){clearTimeout(s),s=null}return function(){i=[].slice.call(arguments),r(),s=setTimeout(n,e)}}(()=>{this.D=!1,this.G();for(const t of this.j.values())t[Y]=null;for(const t of this.l.values())t&&(t[Y]=null);this.H(!0)},50)),this.overlay=t,this.dir=(null==i?void 0:i.dir)??"ltr",t.setAttribute("translate","yes"),t.setAttribute("aria-live","off"),t.setAttribute("aria-atomic","true"),q(t,"captions"),this.G(),this.E=new ResizeObserver(this.I.bind(this)),this.E.observe(t)}get dir(){return this.C}set dir(t){this.C=t,F(this.overlay,"dir",t)}get currentTime(){return this.A}set currentTime(t){this.A=t,this.update()}changeTrack({regions:t,cues:e}){this.reset(),this.J(t);for(const i of e)this.l.set(i,null);this.update()}addCue(t){this.l.set(t,null),this.update()}removeCue(t){this.l.delete(t),this.update()}update(t=!1){this.H(t)}reset(){this.l.clear(),this.j.clear(),this.B=[],this.overlay.textContent=""}destroy(){this.reset(),this.E.disconnect()}I(){this.D=!0,this.K()}G(){this.z=G(this.overlay),I(this.overlay,"overlay-width",this.z.width+"px"),I(this.overlay,"overlay-height",this.z.height+"px")}H(t=!1){if(!this.l.size||this.D)return;let e,i=[...this.l.keys()].filter(t=>this.A>=t.startTime&&this.A<=t.endTime).sort((t,e)=>t.startTime!==e.startTime?t.startTime-e.startTime:t.endTime-e.endTime),s=i.map(t=>t.region);for(let n=0;n<this.B.length;n++){if(e=this.B[n],i[n]===e)continue;if(e.region&&!s.includes(e.region)){const i=this.j.get(e.region.id);i&&(i.removeAttribute("data-active"),t=!0)}const r=this.l.get(e);r&&(r.remove(),t=!0)}for(let n=0;n<i.length;n++){e=i[n];let s=this.l.get(e);s||this.l.set(e,s=this.L(e));const r=this.F(e)&&this.j.get(e.region.id);r&&!r.hasAttribute("data-active")&&(requestAnimationFrame(()=>F(r,"active")),t=!0),s.isConnected||((r||this.overlay).append(s),t=!0)}if(t){const t=[],s=new Set;for(let n=i.length-1;n>=0;n--){if(e=i[n],s.has(e.region||e))continue;const r=this.F(e),o=r?this.j.get(e.region.id):this.l.get(e);r?t.push(ht(this.z,e.region,o,t)):t.push(at(this.z,e,o,t)),s.add(r?e.region:e)}}X(this.overlay,this.A),this.B=i}J(t){if(t)for(const e of t){const t=this.M(e);this.j.set(e.id,t),this.overlay.append(t)}}M(t){const e=document.createElement("div");return q(e,"region"),F(e,"id",t.id),F(e,"scroll",t.scroll),I(e,"region-width",t.width+"%"),I(e,"region-anchor-x",t.regionAnchorX),I(e,"region-anchor-y",t.regionAnchorY),I(e,"region-viewport-anchor-x",t.viewportAnchorX),I(e,"region-viewport-anchor-y",t.viewportAnchorY),I(e,"region-lines",t.lines),e}L(t){var e;const i=document.createElement("div"),s=function(t){if("auto"===t.position)switch(t.align){case"start":case"left":return 0;case"right":case"end":return 100;default:return 50}return t.position}(t),n=function(t,e){if("auto"===t.positionAlign)switch(t.align){case"start":return"ltr"===e?"line-left":"line-right";case"end":return"ltr"===e?"line-right":"line-left";case"center":return"center";default:return`line-${t.align}`}return t.positionAlign}(t,this.C);if(q(i,"cue-display"),""!==t.vertical&&F(i,"vertical"),I(i,"cue-text-align",t.align),t.style)for(const o of Object.keys(t.style))i.style.setProperty(o,t.style[o]);if(this.F(t))I(i,"cue-offset",s-("line-right"===n?100:"center"===n?50:0)+"%");else if(I(i,"cue-writing-mode",""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl"),!(null==(e=t.style)?void 0:e["--cue-width"])){let e=s;"line-left"===n?e=100-s:"center"===n&&s<=50?e=2*s:"center"===n&&s>50&&(e=2*(100-s));const r=t.size<e?t.size:e;""===t.vertical?I(i,"cue-width",r+"%"):I(i,"cue-height",r+"%")}const r=document.createElement("div");return q(r,"cue"),t.id&&F(r,"id",t.id),r.innerHTML=W(t),i.append(r),i}F(t){return t.region&&100===t.size&&""===t.vertical&&"auto"===t.line}},ParseError:n,ParseErrorCode:s,TextCue:c,VTTCue:f,VTTRegion:p,createVTTCueTemplate:function(t){if(u)throw Error("[media-captions] called `createVTTCueTemplate` on the server - use `renderVTTCueString`");const e=document.createElement("template");return e.innerHTML=W(t),{cue:t,content:e.content}},parseByteStream:h,parseResponse:async function(t,e){var i,s;const n=await t;if(!n.ok||!n.body){let t;return{metadata:{},cues:[],regions:[],errors:[t]}}const r=n.headers.get("content-type")||"",o=null==(i=r.match(/text\/(.*?)(?:;|$)/))?void 0:i[1],a=null==(s=r.match(/charset=(.*?)(?:;|$)/))?void 0:s[1];return h(n.body,{type:o,encoding:a,...e})},parseText:async function(t,e){return l(new ReadableStream({start(e){const i=t.split(r);for(const t of i)e.enqueue(t);e.close()}}),e)},parseTextStream:l,parseVTTTimestamp:L,renderVTTCueString:W,renderVTTTokensString:D,tokenizeVTTCue:R,updateTimedVTTCueNodes:X},Symbol.toStringTag,{value:"Module"}));export{n as P,N as V,j as a,f as b,s as c,ct as d,L as p};
