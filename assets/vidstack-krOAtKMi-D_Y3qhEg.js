const t=/(?:https:\/\/)?(?:player\.)?vimeo(?:\.com)?\/(?:video\/)?(\d+)(?:(?:\?hash=|\?h=|\/)(.*))?/,o=new Map,e=new Map;function n(o){const e=o.match(t);return{videoId:null==e?void 0:e[1],hash:null==e?void 0:e[2]}}async function i(t,n,i){if(o.has(t))return o.get(t);if(e.has(t))return e.get(t);let l=`https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${t}`;i&&(l=l.concat(`?h=${i}`));const c=window.fetch(l,{mode:"cors",signal:n.signal}).then(t=>t.json()).then(e=>{var n,i;const l=null==(i=null==(n=null==e?void 0:e.thumbnail_url)?void 0:n.match(/vimeocdn.com\/video\/(.*)?_/))?void 0:i[1],c=l?`https://i.vimeocdn.com/video/${l}_1920x1080.webp`:"",a={title:(null==e?void 0:e.title)??"",duration:(null==e?void 0:e.duration)??0,poster:c,pro:"basic"!==e.account_type};return o.set(t,a),a}).finally(()=>e.delete(t));return e.set(t,c),c}export{i as getVimeoVideoInfo,n as resolveVimeoVideoId};
