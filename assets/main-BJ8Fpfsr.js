const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vidstack-R_ot4AhB-aJlMdFa2.js","assets/vendor-I5pfZzyJ.js","assets/mui-Du5OpAyb.js","assets/router-C70wdWFB.js","assets/vidstack-BN7_0WI--Hvi_FJp9.js","assets/vidstack-BqgQkvb4-Bajr7kVK.js","assets/vidstack-FldwQc2Q-Cfrle6FK.js","assets/vidstack-krOAtKMi-D_Y3qhEg.js","assets/vidstack-DHmfHold-CxlfD1Zn.js","assets/vidstack-Dm1xEU9Q-CvQ_TGZE.js","assets/vidstack-CQQ1xKSy-o1YnGneL.js"])))=>i.map(i=>d[i]);
var __defProp2=Object.defineProperty,__typeError=e=>{throw TypeError(e)},__defNormalProp=(e,t,n)=>t in e?__defProp2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__publicField=(e,t,n)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,n),__accessCheck=(e,t,n)=>t.has(e)||__typeError("Cannot "+n),__privateGet=(e,t,n)=>(__accessCheck(e,t,"read from private field"),n?n.call(e):t.get(e)),__privateAdd=(e,t,n)=>t.has(e)?__typeError("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),__privateSet=(e,t,n,r)=>(__accessCheck(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),__privateMethod=(e,t,n)=>(__accessCheck(e,t,"access private method"),n),__privateWrapper=(e,t,n,r)=>({set _(r){__privateSet(e,t,r,n)},get _(){return __privateGet(e,t,r)}}),_a,_b,_c,_d,_target,_controller,_e,_setupCallbacks,_attachCallbacks,_connectCallbacks,_destroyCallbacks,_Instance_instances,attachAttrs_fn,attachStyles_fn,setAttr_fn,setStyle_fn,_descriptors,_f,_tokens,_tokens2,_tokens3,_ranges,_g,_h,_i,_j,_canLoad,_currentTime,_mode,_metadata,_regions,_cues,_activeCues,_TextTrack_instances,parseContent_fn,load_fn,ready_fn,error_fn,parseJSON_fn,activeCuesChanged_fn,_target2,_player,_prevTrackIndex,_logger,_MediaRemoteControl_instances,dispatchRequest_fn,noPlayerWarning_fn,_data,_k,_display,_video,_track,_tracks,_NativeTextRenderer_instances,attachTrack_fn,createTrackElement_fn,copyCues_fn,onChange_fn,_video2,_textTracks,_renderers,_media,_nativeDisplay,_nativeRenderer,_customRenderer,_TextRenderers_instances,watchControls_fn,addNativeTrack_fn,removeNativeTrack_fn,onAddTrack_fn,onRemoveTrack_fn,update_fn,detach_fn,_l,_canLoad2,_defaults,_storage,_preferredLang,_selectTracks,_pendingRemoval,_onTrackModeChangeBind,_TextTrackList_instances,onTrackModeChange_fn,saveCaptionsTrack_fn,saveLang_fn,_m,_auto,_media2,_MediaKeyboardController_instances,onTargetChange_fn,onKeyUp_fn,onKeyDown_fn,onPreventVideoKeys_fn,getMatchingMethod_fn,_seekTotal,calcSeekAmount_fn,_timeSlider,forwardTimeKeyboardEvent_fn,seeking_fn,_shortcut,_idleTimer,_pausedTracking,_hideOnMouseLeave,_isMouseOutside,_focusedItem,_canIdle,_MediaControls_instances,init_fn,watchMouse_fn,watchPaused_fn,onPlay_fn,onPause_fn,onEnd_fn,onMouseEnter_fn,onMouseLeave_fn,clearIdleTimer_fn,onStopIdle_fn,changeVisibility_fn,onChange_fn2,_listening,_active,_FullscreenController_instances,onDisconnect_fn,onChange_fn3,onError_fn,_type,_locked,_currentLock,_ScreenOrientationController_instances,onDisconnect_fn2,onOrientationChange_fn,assertScreenOrientationAPI_fn,getScreenOrientation_fn,_media3,_onChange,_gainNode,_srcAudioNode,_AudioGain_instances,destroySrcNode_fn,destroyGainNode_fn,_state,_visibility,_safariBeforeUnloadTimeout,_PageVisibility_instances,handlePageEvent_fn,_id,_callback,_RAFLoop_instances,loop_fn,_provider,_ctx,_waiting,_attachedLoadStart,_attachedCanPlay,_timeRAF,_pageVisibility,_events,_HTMLMediaEvents_instances,media_get,onDispose_fn,_lastSeenTime,_seekedTo,onAnimationFrame_fn,attachInitialListeners_fn,attachLoadStartListeners_fn,attachCanPlayListeners_fn,_devHandlers,_handleDevEvent,attachEventListener_fn,onDevEvent_fn,updateCurrentTime_fn,onLoadStart_fn,onAbort_fn,onEmptied_fn,onLoadedData_fn,onLoadedMetadata_fn,getCanPlayDetail_fn,onPlay_fn2,onPause_fn2,onCanPlay_fn,onCanPlayThrough_fn,onPlaying_fn,onStalled_fn,onWaiting_fn,onEnded_fn,attachTimeUpdate_fn,onTimeUpdate_fn,onDurationChange_fn,onVolumeChange_fn,onSeeked_fn,onSeeking_fn,onProgress_fn,onSuspend_fn,onRateChange_fn,onError_fn2,_provider2,_ctx2,_NativeAudioTracks_instances,nativeTracks_get,onAddNativeTrack_fn,onRemoveNativeTrack_fn,onChangeNativeTrack_fn,getEnabledNativeTrack_fn,onChangeTrack_fn,_HTMLMediaProvider_instances,appendMediaFragment_fn,_media4,_ctx3,_state2,_supported,_HTMLRemotePlaybackAdapter_instances,setup_fn,watchSupported_fn,onStateChange_fn,_video3,_ctx4,_NativeHLSTextTracks_instances,onAddTrack_fn2,onDispose_fn2,_video4,_media5,_VideoPictureInPicture_instances,onEnter_fn,onExit_fn,_onChange2,_video5,_media6,_mode2,_VideoPresentation_instances,onModeChange_fn,_presentation,_presentation2,_video6,_ctx5,_instance,_callbacks,_stopLiveSync,_DASHController_instances,createDOMEvent_fn,liveSync_fn,liveSyncPosition_fn,dispatchDASHEvent_fn,_currentTrack,_cueTracker,onTextFragmentLoaded_fn,onTextTracksAdded_fn,onTrackChange_fn,onQualityChange_fn,onManifestLoaded_fn,onError_fn3,onFragmentLoadStart_fn,onFragmentLoadComplete_fn,_retryLoadingTimer,onNetworkError_fn,clearRetryTimer_fn,onFatalError_fn,enableAutoQuality_fn,switchAutoBitrate_fn,onUserQualityChange_fn,onUserAudioChange_fn,reset_fn,_lib,_ctx6,_callback2,_DASHLibLoader_instances,startLoading_fn,onLoadStart_fn2,onLoaded_fn,onLoadError_fn,_ctor,_controller2,_library,_type2,_callback3,_handle,_media7,_MediaPlayerDelegate_instances,attemptAutoplay_fn,_queue,_serving,_pending,_queue2,_RequestQueue_instances,flush_fn,release_fn,_stateMgr,_request,_media8,_fullscreen,_orientation,_$provider,_providerQueue,_MediaRequestManager_instances,attachLoadPlayListener_fn,watchProvider_fn,handleRequest_fn,handleLoadPlayStrategy_fn,_wasPIPActive,getFullscreenAdapter_fn,throwIfPIPNotSupported_fn,watchControlsDelayChange_fn,watchAudioGainSupport_fn,watchAirPlaySupport_fn,watchGoogleCastSupport_fn,watchFullscreenSupport_fn,watchPiPSupport_fn,_googleCastLoader,onFullscreenChange_fn,onFullscreenError_fn,onPictureInPictureError_fn,logError_fn,_request2,_media9,_trackedEvents,_clipEnded,_playedIntervals,_playedInterval,_firingWaiting,_waitingTrigger,_isPlayingOnDisconnect,_MediaStateManager_instances,resumePlaybackOnConnect_fn,pausePlaybackOnDisconnect_fn,resetTracking_fn,satisfyRequest_fn,addTextTrackListeners_fn,addQualityListeners_fn,addAudioTrackListeners_fn,onTextTracksChange_fn,onTextTrackModeChange_fn,onAudioTracksChange_fn,onAudioTrackChange_fn,onQualitiesChange_fn,onQualityChange_fn2,onAutoQualityChange_fn,_stopQualityResizeEffect,watchQualityResize_fn,stopWatchingQualityResize_fn,onCanSetQualityChange_fn,watchCanSetVolume_fn,onSourceQualitiesChange_fn,resetMediaState_fn,onCanPlayDetail_fn,resetPlaybackIfNeeded_fn,updatePlayed_fn,onEndPrecisionChange_fn,saveTime_fn,_fireWaiting,onEnded_fn2,stopWaiting_fn,_MediaStateSync_instances,init_fn2,watchProvidedTypes_fn,watchLogLevel_fn,watchMetadata_fn,watchTitle_fn,watchAutoplay_fn,watchLoop_fn,watchControls_fn2,watchPoster_fn,watchCrossOrigin_fn,watchDuration_fn,watchPlaysInline_fn,watchClipStartTime_fn,watchClipEndTime_fn,watchLive_fn,watchLiveTolerance_fn,watchLiveEdge_fn,_NavigatorMediaSession_instances,onDisconnect_fn3,onMetadataChange_fn,onPlaybackStateChange_fn,handleAction_fn,_focused,_FocusVisibleController_instances,onFocus_fn,onBlur_fn,onPointerEnter_fn,onPointerLeave_fn,_n,_media10,_stateMgr2,_requestMgr,_MediaPlayer_instances,provider_get,props_get,_skipTitleUpdate,watchTitle_fn2,watchOrientation_fn,watchCanPlay_fn,setupMediaAttributes_fn,onFindPlayer_fn,onResize_fn,onPointerChange_fn,watchPaused_fn2,queuePausedUpdate_fn,watchMuted_fn,queueMutedUpdate_fn,watchCurrentTime_fn,queueCurrentTimeUpdate_fn,watchVolume_fn,queueVolumeUpdate_fn,watchPlaybackRate_fn,queuePlaybackRateUpdate_fn,watchPlaysInline_fn2,queuePlaysInlineUpdate_fn,watchStorage_fn,computeMediaId_fn,_initialize,_loaders,_domSources,_media11,_loader,_SourceSelection_instances,onSourcesChange_fn,onSourceChange_fn,findNewSource_fn,notifySourceChange_fn,notifyLoaderChange_fn,onSetup_fn,onLoadSource_fn,onLoadPoster_fn,_domTracks,_media12,_prevTracks,_Tracks_instances,onTracksChange_fn,_o,_media13,_sources,_domSources2,_domTracks2,_loader2,_loadRafId,_MediaProvider_instances,runLoader_fn,destroyProvider_fn,onResize_fn2,onMutation_fn,_delegate,_Popper_instances,watchTrigger_fn,_showTimerId,_hideRafId,_stopAnimationEndListener,cancelShowing_fn,_delegate2,_ToggleButtonController_instances,isARIAPressed_fn,onPressed_fn,onMaybePress_fn,onInteraction_fn,_p,_pressed,_q,_media14,_AirPlayButton_instances,onPress_fn,isPressed_fn,getState_fn,getDefaultLabel_fn,_r,_media15,_PlayButton_instances,onPress_fn2,isPressed_fn2,_s,_media16,_CaptionButton_instances,onPress_fn3,isPressed_fn3,isHidden_fn,_t,_media17,_FullscreenButton_instances,onPress_fn4,isPressed_fn4,isSupported_fn,_u,_media18,_MuteButton_instances,onPress_fn5,isPressed_fn5,getState_fn2,_v,_media19,_PIPButton_instances,onPress_fn6,isPressed_fn6,isSupported_fn2,_w,_media20,_SeekButton_instances,isSupported_fn3,getDefaultLabel_fn2,onPress_fn7,_x,_media21,_LiveButton_instances,onPress_fn8,_init,_observer,_IntersectionObserverController_instances,onDisconnect_fn4,_delegate3,_media22,_observer2,_SliderEventsController_instances,watchSwipeGesture_fn,_provider3,_touch,_touchStartValue,onTouchStart_fn,onTouchMove_fn,attachEventListeners_fn,attachPointerListeners_fn,onFocus_fn2,updateValue_fn,updatePointerValue_fn,getPointerValue_fn,onPointerEnter_fn2,onPointerMove_fn,onPointerLeave_fn2,onPointerDown_fn,onStartDragging_fn,onStopDragging_fn,_lastDownKey,_repeatedKeys,onKeyDown_fn2,onKeyUp_fn2,calcJumpValue_fn,calcNewKeyValue_fn,onDocumentPointerUp_fn,onDocumentTouchMove_fn,_onDocumentPointerMove,_media23,_delegate4,_isVisible,_isIntersecting,_SliderController_instances,onIntersectionChange_fn,watchHidden_fn,watchValue_fn,watchStep_fn,watchDisabled_fn,getARIADisabled_fn,setupAttrs_fn,watchCSSVars_fn,_updateSliderVars,_Slider_instances,getARIAValueNow_fn,getARIAValueText_fn,watchValue_fn2,watchMinMax_fn,_media24,_src,_crossOrigin,_ThumbnailsLoader_instances,onLoadCues_fn,processImages_fn,processStoryboard_fn,processVTTCues_fn,resolveBaseUrl_fn,resolveURL_fn,resolveData_fn,onError_fn4,_loader3,_styleResets,_Thumbnail_instances,watchImg_fn,watchCrossOrigin_fn2,onLoadStart_fn3,onLoaded_fn2,onError_fn5,isLoading_fn,hasError_fn,watchHidden_fn2,onFindActiveThumbnail_fn,resize_fn,style_fn,resetStyles_fn,_slider,_media25,_slider2,_SliderVideo_instances,watchVideo_fn,watchSrc_fn,watchCrossOrigin_fn3,isLoading_fn2,hasError_fn2,watchHidden_fn3,onSrcChange_fn,onCanPlay_fn2,onError_fn6,onUpdateTime_fn,_format,_text,_slider3,_slider4,_updatePlacement,_media26,_VolumeSlider_instances,getARIAValueNow_fn2,getARIAValueText_fn2,getARIAValueMax_fn,isDisabled_fn,watchVolume_fn2,_throttleVolumeChange,onVolumeChange_fn2,onValueChange_fn,onDragValueChange_fn,_media27,_dispatchSeeking,_chapter,_TimeSlider_instances,calcBufferedPercent_fn,hasChapters_fn,watchSeekingThrottle_fn,watchCurrentTime_fn2,watchPreviewing_fn,seeking_fn2,seek_fn,_playingBeforeDragStart,onDragStart_fn,onDragValueChange_fn2,onDragEnd_fn,onValueChange_fn2,getValue_fn,getStep_fn,getKeyStep_fn,roundValue_fn,isDisabled_fn2,getARIAValueNow_fn3,getARIAValueText_fn3,percentToTime_fn,timeToPercent_fn,formatValue_fn,formatTime_fn,_media28,_sliderState,_updateScope,_titleRef,_refs,_$track,_$cues,_activeIndex,_activePointerIndex,_bufferedIndex,_SliderChapters_instances,setTrack_fn,reset_fn2,watch_fn,watchUpdates_fn,watchContainerWidths_fn,watchFillPercent_fn,watchPointerPercent_fn,updateFillPercents_fn,updateFillPercent_fn,findActiveChapterIndex_fn,watchBufferedPercent_fn,_updateBufferedPercent,_bufferedPercent,calcMediaBufferedPercent_fn,getEndTime_fn,calcPercent_fn,fillGaps_fn,watchSource_fn,onTrackChange_fn2,watchMediaDuration_fn,_onCuesChange,onChapterTitleChange_fn,findParentSlider_fn,findChapterTitleRef_fn,_index,_el,_elements,_delegate5,_MenuFocusController_instances,focusAt_fn,findActiveIndex_fn,onFocus_fn3,validateKeyEvent_fn,onKeyUp_fn3,onKeyDown_fn3,nextIndex_fn,getFocusableElements_fn,_y,_media29,_menuId,_menuButtonId,_expanded,_disabled,_trigger,_content,_parentMenu,_submenus,_menuObserver,_popper,_focus,_isSliderActive,_isTriggerDisabled,_transitionCallbacks,_Menu_instances,observeSliders_fn,watchExpanded_fn,attachMenuButton_fn,attachMenuItems_fn,attachObserver_fn,updateMenuItemsHidden_fn,disableMenuButton_fn,_wasKeyboardExpand,onExpandedChange_fn,updateFocus_fn,isExpanded_fn,isDisabled_fn3,disable_fn,onPointerUp_fn,onWindowPointerUp_fn,getCloseTarget_fn,toggleMediaControls_fn,addSubmenu_fn,_removeSubmenuBind,removeSubmenu_fn,_isSubmenuOpen,_onSubmenuOpenBind,onSubmenuOpen_fn,_onSubmenuCloseBind,onSubmenuClose_fn,_onResize,_isTransitionActive,onResizeTransition_fn,_menu,_hintEl,_MenuButton_instances,watchDisabled_fn2,watchHintEl_fn,onMutation_fn2,_menu2,_MenuItems_instances,watchPlacement_fn,hide_fn,getButton_fn,_group,_value,_controller3,_RadioGroupController_instances,addRadio_fn,removeRadio_fn,_onChangeBind,onChange_fn4,findRadio_fn,_controller4,_RadioGroup_instances,watchValue_fn3,onValueChange_fn3,_checked,_controller5,_Radio_instances,onDisconnect_fn5,addToGroup_fn,watchValue_fn4,onPress_fn9,check_fn,onChange_fn5,onSelect_fn,_z,_media30,_provider4,_Gesture_instances,attachListener_fn,_presses,_pressTimerId,acceptEvent_fn,handleEvent_fn,inBounds_fn,isTopLayer_fn,performAction_fn,_track2,_renderer,_events2,_CaptionsTextRenderer_instances,changeTrack_fn,_media31,_Captions_instances,isHidden_fn2,watchViewType_fn,setupAudioView_fn,onTrackChange_fn3,onCueChange_fn,onUpdateTimedNodes_fn,setupVideoView_fn,watchTextDirection_fn,watchMediaTime_fn,listenToFontStyleChanges_fn,onFontStyleChange_fn,showExample_fn,_hideExampleTimer,hideExample_fn,removeExample_fn,createCueDisplayElement_fn,createCueElement_fn,_A,_media32,_Poster_instances,hasError_fn3,onPreconnect_fn,watchHidden_fn4,isLoading_fn3,watchImg_fn2,_prevSrc,watchSrc_fn2,watchAlt_fn,watchCrossOrigin_fn4,onLoadStart_fn4,onLoad_fn,onError_fn7,_B,_media33,_invert,_isVisible2,_isIntersecting2,_Time_instances,onIntersectionChange_fn2,watchHidden_fn5,watchToggle_fn,watchTime_fn,watchRole_fn,getSeconds_fn,shouldInvert_fn,onToggle_fn,_media34,_menu3,_controller6,_AudioGainRadioGroup_instances,watchValue_fn5,watchHintText_fn,watchControllerDisabled_fn,getValue_fn2,onValueChange_fn4;import{j as jsxRuntimeExports,u as utils$2,i as interopRequireDefaultExports,T as TextField,I as InputAdornment,a as IconButton,k as keyframes,s as styled,C as Card,b as CardContent,B as Box,c as Typography,d as Close,W as WbSunny,e as Brightness2,f as Container,P as Paper,A as Alert,g as Button$2,R as Refresh,h as ArrowBack,H as Home$1,l as styled$1,m as useTheme,n as useMediaQuery,o as alpha,S as Stack,p as Chip,q as Tooltip,L as Lock,r as Star$1,D as Dialog,t as DialogTitle,v as DialogContent,w as Avatar,x as Timer,y as LinearProgress,z as CheckCircle,E as Warning,F as DialogActions,G as PlayArrow,J as Stop,K as CircularProgress,O as OpenInNew,M as AttachMoney,N as Tabs,Q as Tab,U as Grid,V as Schedule,X as VideoLibrary,Y as Category,Z as Public,_ as List$1,$ as ListItem,a0 as ListItemText,a1 as Divider,a2 as ViewIcon,a3 as ChevronLeft,a4 as ChevronRight,a5 as CardActionArea,a6 as CardMedia,a7 as FiberManualRecord,a8 as SportsSoccer,a9 as _objectWithoutPropertiesLoose$3,aa as _extends$2,ab as Transition,ac as Skeleton,ad as AccessTime,ae as LiveTv$1,af as TrendingUp,ag as FamilyRestroom,ah as Link$1,ai as PhotoCamera,aj as FormControl,ak as FormLabel,al as RadioGroup$1,am as FormControlLabel,an as Radio$1,ao as ListItemIcon,ap as InputLabel,aq as Select$1,ar as MenuItem$1,as as FilterList,at as Menu$3,au as Slider$1,av as ConfirmationNumber,aw as Event$2,ax as CalendarToday,ay as Add,az as UploadFile,aA as CardActions,aB as Checkbox,aC as Edit,aD as DeleteIcon,aE as toPropertyKey,aF as _setPrototypeOf,aG as _typeof,aH as _assertThisInitialized,aI as jsx,aJ as css,aK as Switch,aL as TableContainer,aM as Table,aN as TableHead,aO as TableRow,aP as TableCell,aQ as TableBody,aR as Settings$1,aS as VisibilityOff,aT as Analytics,aU as ListItemSecondaryAction,aV as PersonRemove,aW as People,aX as MonetizationOn,aY as PlayCircleOutline,aZ as PendingActions,a_ as CancelIcon,a$ as Pagination,b0 as ToggleOn,b1 as CloudUpload,b2 as Save,b3 as Payment,b4 as AccountBalance,b5 as Phone,b6 as Security,b7 as Info,b8 as Accordion,b9 as AccordionSummary,ba as ExpandMore,bb as AccordionDetails,bc as PackageIcon,bd as ChangePackageIcon,be as UnbanUserIcon,bf as BanUserIcon,bg as Campaign,bh as CreditCard,bi as NotificationImportant,bj as Stepper,bk as Step,bl as StepLabel,bm as StepContent,bn as ContentCopy,bo as Speed,bp as Devices,bq as Email,br as LocationOn,bs as Help,bt as Block,bu as BugReport,bv as Error$1,bw as createTheme,bx as ThemeProvider,by as CssBaseline}from"./mui-Du5OpAyb.js";import{c as reactDomExports,r as reactExports,g as getAugmentedNamespace,d as getDefaultExportFromCjs$1,a as React$2,b as ReactDOM,e as commonjsGlobal$1}from"./vendor-I5pfZzyJ.js";import{u as useLocation,a as useNavigate,L as Link,b as useSearchParams,c as useParams,B as BrowserRouter,R as Routes,d as Route,N as Navigate}from"./router-C70wdWFB.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var client={},m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;var withSelector={exports:{}},useSyncExternalStoreWithSelector_production={},React$1=reactExports;function is$2(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var objectIs="function"==typeof Object.is?Object.is:is$2,useSyncExternalStore=React$1.useSyncExternalStore,useRef=React$1.useRef,useEffect=React$1.useEffect,useMemo=React$1.useMemo,useDebugValue=React$1.useDebugValue;useSyncExternalStoreWithSelector_production.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=useRef(null);if(null===s.current){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=useMemo(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&a.hasValue){var t=a.value;if(i(t,e))return o=t}return o=e}if(t=o,objectIs(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(s=e,t):(s=e,o=n)}var s,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]);var o=useSyncExternalStore(e,s[0],s[1]);return useEffect(function(){a.hasValue=!0,a.value=o},[o]),useDebugValue(o),o},withSelector.exports=useSyncExternalStoreWithSelector_production;var withSelectorExports=withSelector.exports;function defaultNoopBatch(e){e()}function createListenerCollection(){let e=null,t=null;return{clear(){e=null,t=null},notify(){defaultNoopBatch(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(e,t){let n,r=nullListeners,i=0,s=!1;function a(){c.onStateChange&&c.onStateChange()}function o(){i++,n||(n=e.subscribe(a),r=createListenerCollection())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=nullListeners)}const c={addNestedSub:function(e){o();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:a,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,o())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return c}var canUseDOM$3=()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),isDOM$1=canUseDOM$3(),isRunningInReactNative$1=()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product,isReactNative$1=isRunningInReactNative$1(),getUseIsomorphicLayoutEffect$1=()=>isDOM$1||isReactNative$1?reactExports.useLayoutEffect:reactExports.useEffect,useIsomorphicLayoutEffect$1=getUseIsomorphicLayoutEffect$1();function is$1(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function shallowEqual$1(e,t){if(is$1(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!is$1(e[n[i]],t[n[i]]))return!1;return!0}var ContextKey=Symbol.for("react-redux-context"),gT="undefined"!=typeof globalThis?globalThis:{};function getContext$1(){if(!reactExports.createContext)return{};const e=gT[ContextKey]??(gT[ContextKey]=new Map);let t=e.get(reactExports.createContext);return t||(t=reactExports.createContext(null),e.set(reactExports.createContext,t)),t}var ReactReduxContext=getContext$1();function Provider$1(e){const{children:t,context:n,serverState:r,store:i}=e,s=reactExports.useMemo(()=>{const e=createSubscription(i);return{store:i,subscription:e,getServerState:r?()=>r:void 0}},[i,r]),a=reactExports.useMemo(()=>i.getState(),[i]);useIsomorphicLayoutEffect$1(()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[s,a]);const o=n||ReactReduxContext;return reactExports.createElement(o.Provider,{value:s},t)}var Provider_default=Provider$1;function createReduxContextHook(e=ReactReduxContext){return function(){return reactExports.useContext(e)}}var useReduxContext=createReduxContextHook();function createStoreHook(e=ReactReduxContext){const t=e===ReactReduxContext?useReduxContext:createReduxContextHook(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var useStore=createStoreHook();function createDispatchHook(e=ReactReduxContext){const t=e===ReactReduxContext?useStore:createStoreHook(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var useDispatch=createDispatchHook(),refEquality=(e,t)=>e===t;function createSelectorHook(e=ReactReduxContext){const t=e===ReactReduxContext?useReduxContext:createReduxContextHook(e),n=(e,n={})=>{const{equalityFn:r=refEquality}="function"==typeof n?{equalityFn:n}:n,i=t(),{store:s,subscription:a,getServerState:o}=i;reactExports.useRef(!0);const l=reactExports.useCallback({[e.name]:t=>e(t)}[e.name],[e]),c=withSelectorExports.useSyncExternalStoreWithSelector(a.addNestedSub,s.getState,o||s.getState,l,r);return reactExports.useDebugValue(c),c};return Object.assign(n,{withTypes:()=>n}),n}var useSelector=createSelectorHook(),batch=defaultNoopBatch;function formatProdErrorMessage$1(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $$observable=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$2(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function createStore(e,t,n){if("function"!=typeof e)throw new Error(formatProdErrorMessage$1(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(formatProdErrorMessage$1(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(formatProdErrorMessage$1(1));return n(createStore)(e,t)}let r=e,i=t,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach((e,t)=>{a.set(t,e)}))}function u(){if(l)throw new Error(formatProdErrorMessage$1(3));return i}function d(e){if("function"!=typeof e)throw new Error(formatProdErrorMessage$1(4));if(l)throw new Error(formatProdErrorMessage$1(5));let t=!0;c();const n=o++;return a.set(n,e),function(){if(t){if(l)throw new Error(formatProdErrorMessage$1(6));t=!1,c(),a.delete(n),s=null}}}function h(e){if(!isPlainObject$2(e))throw new Error(formatProdErrorMessage$1(7));if(void 0===e.type)throw new Error(formatProdErrorMessage$1(8));if("string"!=typeof e.type)throw new Error(formatProdErrorMessage$1(17));if(l)throw new Error(formatProdErrorMessage$1(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=a).forEach(e=>{e()}),e}h({type:actionTypes_default.INIT});return{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(formatProdErrorMessage$1(10));r=e,h({type:actionTypes_default.REPLACE})},[symbol_observable_default]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(formatProdErrorMessage$1(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[symbol_observable_default](){return this}}}}}function assertReducerShape(e){Object.keys(e).forEach(t=>{const n=e[t];if(void 0===n(void 0,{type:actionTypes_default.INIT}))throw new Error(formatProdErrorMessage$1(12));if(void 0===n(void 0,{type:actionTypes_default.PROBE_UNKNOWN_ACTION()}))throw new Error(formatProdErrorMessage$1(13))})}function combineReducers(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const r=t[a];"function"==typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{assertReducerShape(n)}catch(s){i=s}return function(e={},t){if(i)throw i;let s=!1;const a={};for(let i=0;i<r.length;i++){const o=r[i],l=n[o],c=e[o],u=l(c,t);if(void 0===u)throw t&&t.type,new Error(formatProdErrorMessage$1(14));a[o]=u,s=s||u!==c}return s=s||r.length!==Object.keys(e).length,s?a:e}}function compose(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}function applyMiddleware(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(formatProdErrorMessage$1(15))};const a={getState:i.getState,dispatch:(e,...t)=>s(e,...t)},o=e.map(e=>e(a));return s=compose(...o)(i.dispatch),{...i,dispatch:s}}}function isAction(e){return isPlainObject$2(e)&&"type"in e&&"string"==typeof e.type}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf$1=Object.getPrototypeOf;function isDraft(e){return!!e&&!!e[DRAFT_STATE]}function isDraftable(e){var t;return!!e&&(isPlainObject$1(e)||Array.isArray(e)||!!e[DRAFTABLE]||!!(null==(t=e.constructor)?void 0:t[DRAFTABLE])||isMap(e)||isSet(e))}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject$1(e){if(!e||"object"!=typeof e)return!1;const t=getPrototypeOf$1(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===objectCtorString}function original(e){return isDraft(e)||die(15,e),e[DRAFT_STATE].base_}function each(e,t){0===getArchtype(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function getArchtype(e){const t=e[DRAFT_STATE];return t?t.type_:Array.isArray(e)?1:isMap(e)?2:isSet(e)?3:0}function has(e,t){return 2===getArchtype(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function get(e,t){return 2===getArchtype(e)?e.get(t):e[t]}function set(e,t,n){const r=getArchtype(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function is(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function isMap(e){return e instanceof Map}function isSet(e){return e instanceof Set}function latest(e){return e.copy_||e.base_}function shallowCopy(e,t){if(isMap(e))return new Map(e);if(isSet(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=isPlainObject$1(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[DRAFT_STATE];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(getPrototypeOf$1(e),t)}{const t=getPrototypeOf$1(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function freeze(e,t=!1){return isFrozen(e)||isDraft(e)||!isDraftable(e)||(getArchtype(e)>1&&(e.set=e.add=e.clear=e.delete=dontMutateFrozenCollections),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>freeze(t,!0))),e}function dontMutateFrozenCollections(){die(2)}function isFrozen(e){return Object.isFrozen(e)}var plugins={},currentScope$1;function getPlugin(e){const t=plugins[e];return t||die(0,e),t}function loadPlugin(e,t){plugins[e]||(plugins[e]=t)}function getCurrentScope(){return currentScope$1}function createScope$1(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(e,t){t&&(getPlugin("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function revokeScope(e){leaveScope(e),e.drafts_.forEach(revokeDraft),e.drafts_=null}function leaveScope(e){e===currentScope$1&&(currentScope$1=e.parent_)}function enterScope(e){return currentScope$1=createScope$1(currentScope$1,e)}function revokeDraft(e){const t=e[DRAFT_STATE];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function processResult(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[DRAFT_STATE].modified_&&(revokeScope(t),die(4)),isDraftable(e)&&(e=finalize(t,e),t.parent_||maybeFreeze(t,e)),t.patches_&&getPlugin("Patches").generateReplacementPatches_(n[DRAFT_STATE].base_,e,t.patches_,t.inversePatches_)):e=finalize(t,n,[]),revokeScope(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==NOTHING?e:void 0}function finalize(e,t,n){if(isFrozen(t))return t;const r=t[DRAFT_STATE];if(!r)return each(t,(i,s)=>finalizeProperty(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return maybeFreeze(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),each(i,(i,a)=>finalizeProperty(e,r,t,i,a,n,s)),maybeFreeze(e,t,!1),n&&e.patches_&&getPlugin("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function finalizeProperty(e,t,n,r,i,s,a){if(isDraft(i)){const a=finalize(e,i,s&&t&&3!==t.type_&&!has(t.assigned_,r)?s.concat(r):void 0);if(set(n,r,a),!isDraft(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(isDraftable(i)&&!isFrozen(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;finalize(e,i),t&&t.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||maybeFreeze(e,i)}}function maybeFreeze(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&freeze(t,n)}function createProxyProxy(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=objectTraps;n&&(i=[r],s=arrayTraps);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var objectTraps={get(e,t){if(t===DRAFT_STATE)return e;const n=latest(e);if(!has(n,t))return readPropFromProto(e,n,t);const r=n[t];return e.finalized_||!isDraftable(r)?r:r===peek$1(e.base_,t)?(prepareCopy(e),e.copy_[t]=createProxy(r,e)):r},has:(e,t)=>t in latest(e),ownKeys:e=>Reflect.ownKeys(latest(e)),set(e,t,n){const r=getDescriptorFromProto(latest(e),t);if(null==r?void 0:r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=peek$1(latest(e),t),i=null==r?void 0:r[DRAFT_STATE];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(is(n,r)&&(void 0!==n||has(e.base_,t)))return!0;prepareCopy(e),markChanged(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==peek$1(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,prepareCopy(e),markChanged(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=latest(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){die(11)},getPrototypeOf:e=>getPrototypeOf$1(e.base_),setPrototypeOf(){die(12)}},arrayTraps={};function peek$1(e,t){const n=e[DRAFT_STATE];return(n?latest(n):e)[t]}function readPropFromProto(e,t,n){var r;const i=getDescriptorFromProto(t,n);return i?"value"in i?i.value:null==(r=i.get)?void 0:r.call(e.draft_):void 0}function getDescriptorFromProto(e,t){if(!(t in e))return;let n=getPrototypeOf$1(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=getPrototypeOf$1(n)}}function markChanged(e){e.modified_||(e.modified_=!0,e.parent_&&markChanged(e.parent_))}function prepareCopy(e){e.copy_||(e.copy_=shallowCopy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}each(objectTraps,(e,t)=>{arrayTraps[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),arrayTraps.deleteProperty=function(e,t){return arrayTraps.set.call(this,e,t,void 0)},arrayTraps.set=function(e,t,n){return objectTraps.set.call(this,e[0],t,n,e[0])};var Immer2=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...i){return r.produce(e,e=>t.call(this,e,...i))}}let r;if("function"!=typeof t&&die(6),void 0!==n&&"function"!=typeof n&&die(7),isDraftable(e)){const i=enterScope(this),s=createProxy(e,void 0);let a=!0;try{r=t(s),a=!1}finally{a?revokeScope(i):leaveScope(i)}return usePatchesInScope(i,n),processResult(r,i)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===NOTHING&&(r=void 0),this.autoFreeze_&&freeze(r,!0),n){const t=[],i=[];getPlugin("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}die(1,e)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,r;return[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){isDraftable(e)||die(8),isDraft(e)&&(e=current(e));const t=enterScope(this),n=createProxy(e,void 0);return n[DRAFT_STATE].isManual_=!0,leaveScope(t),n}finishDraft(e,t){const n=e&&e[DRAFT_STATE];n&&n.isManual_||die(9);const{scope_:r}=n;return usePatchesInScope(r,t),processResult(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=getPlugin("Patches").applyPatches_;return isDraft(e)?r(e,t):this.produce(e,e=>r(e,t))}};function createProxy(e,t){const n=isMap(e)?getPlugin("MapSet").proxyMap_(e,t):isSet(e)?getPlugin("MapSet").proxySet_(e,t):createProxyProxy(e,t);return(t?t.scope_:getCurrentScope()).drafts_.push(n),n}function current(e){return isDraft(e)||die(10,e),currentImpl(e)}function currentImpl(e){if(!isDraftable(e)||isFrozen(e))return e;const t=e[DRAFT_STATE];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=shallowCopy(e,t.scope_.immer_.useStrictShallowCopy_)}else n=shallowCopy(e,!0);return each(n,(e,t)=>{set(n,e,currentImpl(t))}),t&&(t.finalized_=!1),n}function enablePatches(){const e="replace",t="add",n="remove";function r(e){if(!isDraftable(e))return e;if(Array.isArray(e))return e.map(r);if(isMap(e))return new Map(Array.from(e.entries()).map(([e,t])=>[e,r(t)]));if(isSet(e))return new Set(Array.from(e).map(r));const t=Object.create(getPrototypeOf$1(e));for(const n in e)t[n]=r(e[n]);return has(e,DRAFTABLE)&&(t[DRAFTABLE]=e[DRAFTABLE]),t}function i(e){return isDraft(e)?r(e):e}loadPlugin("Patches",{applyPatches_:function(i,s){return s.forEach(s=>{const{path:a,op:o}=s;let l=i;for(let e=0;e<a.length-1;e++){const t=getArchtype(l);let n=a[e];"string"!=typeof n&&"number"!=typeof n&&(n=""+n),0!==t&&1!==t||"__proto__"!==n&&"constructor"!==n||die(19),"function"==typeof l&&"prototype"===n&&die(19),l=get(l,n),"object"!=typeof l&&die(18,a.join("/"))}const c=getArchtype(l),u=r(s.value),d=a[a.length-1];switch(o){case e:switch(c){case 2:return l.set(d,u);case 3:die(16);default:return l[d]=u}case t:switch(c){case 1:return"-"===d?l.push(u):l.splice(d,0,u);case 2:return l.set(d,u);case 3:return l.add(u);default:return l[d]=u}case n:switch(c){case 1:return l.splice(d,1);case 2:return l.delete(d);case 3:return l.delete(s.value);default:return delete l[d]}default:die(17,o)}}),i},generatePatches_:function(r,s,a,o){switch(r.type_){case 0:case 2:return function(r,s,a,o){const{base_:l,copy_:c}=r;each(r.assigned_,(r,u)=>{const d=get(l,r),h=get(c,r),p=u?has(l,r)?e:t:n;if(d===h&&p===e)return;const m=s.concat(r);a.push(p===n?{op:p,path:m}:{op:p,path:m,value:h}),o.push(p===t?{op:n,path:m}:p===n?{op:t,path:m,value:i(d)}:{op:e,path:m,value:i(d)})})}(r,s,a,o);case 1:return function(r,s,a,o){let{base_:l,assigned_:c}=r,u=r.copy_;u.length<l.length&&([l,u]=[u,l],[a,o]=[o,a]);for(let t=0;t<l.length;t++)if(c[t]&&u[t]!==l[t]){const n=s.concat([t]);a.push({op:e,path:n,value:i(u[t])}),o.push({op:e,path:n,value:i(l[t])})}for(let e=l.length;e<u.length;e++){const n=s.concat([e]);a.push({op:t,path:n,value:i(u[e])})}for(let e=u.length-1;l.length<=e;--e){const t=s.concat([e]);o.push({op:n,path:t})}}(r,s,a,o);case 3:return function(e,r,i,s){let{base_:a,copy_:o}=e,l=0;a.forEach(e=>{if(!o.has(e)){const a=r.concat([l]);i.push({op:n,path:a,value:e}),s.unshift({op:t,path:a,value:e})}l++}),l=0,o.forEach(e=>{if(!a.has(e)){const a=r.concat([l]);i.push({op:t,path:a,value:e}),s.unshift({op:n,path:a,value:e})}l++})}(r,s,a,o)}},generateReplacementPatches_:function(t,n,r,i){r.push({op:e,path:[],value:n===NOTHING?void 0:n}),i.push({op:e,path:[],value:t})}})}var immer=new Immer2,produce=immer.produce,produceWithPatches=immer.produceWithPatches.bind(immer);immer.setAutoFreeze.bind(immer),immer.setUseStrictShallowCopy.bind(immer);var applyPatches=immer.applyPatches.bind(immer);function assertIsFunction(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}function assertIsObject(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}function assertIsArrayOfFunctions(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){const n=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${t}[${n}]`)}}immer.createDraft.bind(immer),immer.finishDraft.bind(immer);var ensureIsArray=e=>Array.isArray(e)?e:[e];function getDependencies(e){const t=Array.isArray(e[0])?e[0]:e;return assertIsArrayOfFunctions(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function collectInputSelectorResults(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var StrongRef=class{constructor(e){this.value=e}deref(){return this.value}},Ref="undefined"!=typeof WeakRef?WeakRef:StrongRef,UNTERMINATED=0,TERMINATED=1;function createCacheNode(){return{s:UNTERMINATED,v:void 0,o:null,p:null}}function weakMapMemoize(e,t={}){let n=createCacheNode();const{resultEqualityCheck:r}=t;let i,s=0;function a(){var t;let a=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const t=arguments[e];if("function"==typeof t||"object"==typeof t&&null!==t){let e=a.o;null===e&&(a.o=e=new WeakMap);const n=e.get(t);void 0===n?(a=createCacheNode(),e.set(t,a)):a=n}else{let e=a.p;null===e&&(a.p=e=new Map);const n=e.get(t);void 0===n?(a=createCacheNode(),e.set(t,a)):a=n}}const l=a;let c;if(a.s===TERMINATED)c=a.v;else if(c=e.apply(null,arguments),s++,r){const e=(null==(t=null==i?void 0:i.deref)?void 0:t.call(i))??i;null!=e&&r(e,c)&&(c=e,0!==s&&s--);i="object"==typeof c&&null!==c||"function"==typeof c?new Ref(c):c}return l.s=TERMINATED,l.v=c,c}return a.clearCache=()=>{n=createCacheNode(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function createSelectorCreator(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r=0,i=0,s={},a=e.pop();"object"==typeof a&&(s=a,a=e.pop()),assertIsFunction(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const o={...n,...s},{memoize:l,memoizeOptions:c=[],argsMemoize:u=weakMapMemoize,argsMemoizeOptions:d=[]}=o,h=ensureIsArray(c),p=ensureIsArray(d),m=getDependencies(e),f=l(function(){return r++,a.apply(null,arguments)},...h),g=u(function(){i++;const e=collectInputSelectorResults(m,arguments);return t=f.apply(null,e),t},...p);return Object.assign(g,{resultFunc:a,memoizedResultFunc:f,dependencies:m,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>t,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:l,argsMemoize:u})};return Object.assign(r,{withTypes:()=>r}),r}var createSelector=createSelectorCreator(weakMapMemoize),createStructuredSelector=Object.assign((e,t=createSelector)=>{assertIsObject(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map(t=>e[t]),(...e)=>e.reduce((e,t,r)=>(e[n[r]]=t,e),{}))},{withTypes:()=>createStructuredSelector});function createThunkMiddleware(e){return({dispatch:t,getState:n})=>r=>i=>"function"==typeof i?i(t,n,e):r(i)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,composeWithDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?compose:compose.apply(null,arguments)},hasMatchFunction=e=>e&&"function"==typeof e.match;function createAction(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(formatProdErrorMessage(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>isAction(t)&&t.type===e,n}var Tuple=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function freezeDraftable(e){return isDraftable(e)?produce(e,()=>{}):e}function getOrInsertComputed(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function isBoolean$2(e){return"boolean"==typeof e}var buildGetDefaultMiddleware=()=>function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=e??{};let s=new Tuple;return t&&(isBoolean$2(t)?s.push(thunk):s.push(withExtraArgument(t.extraArgument))),s},SHOULD_AUTOBATCH="RTK_autoBatch",prepareAutoBatched=()=>e=>({payload:e,meta:{[SHOULD_AUTOBATCH]:!0}}),createQueueWithTimer=e=>t=>{setTimeout(t,e)},autoBatchEnhancer=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,a=!1;const o=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10):"callback"===e.type?e.queueNotification:createQueueWithTimer(e.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach(e=>e()))};return Object.assign({},r,{subscribe(e){const t=r.subscribe(()=>i&&e());return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){var t;try{return i=!(null==(t=null==e?void 0:e.meta)?void 0:t[SHOULD_AUTOBATCH]),s=!i,s&&(a||(a=!0,l(c))),r.dispatch(e)}finally{i=!0}}})},buildGetDefaultEnhancers=e=>function(t){const{autoBatch:n=!0}=t??{};let r=new Tuple(e);return n&&r.push(autoBatchEnhancer("object"==typeof n?n:void 0)),r};function configureStore(e){const t=buildGetDefaultMiddleware(),{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:a}=e||{};let o,l;if("function"==typeof n)o=n;else{if(!isPlainObject$2(n))throw new Error(formatProdErrorMessage(1));o=combineReducers(n)}l="function"==typeof r?r(t):t();let c=compose;i&&(c=composeWithDevTools({trace:!1,..."object"==typeof i&&i}));const u=applyMiddleware(...l),d=buildGetDefaultEnhancers(u);return createStore(o,s,c(..."function"==typeof a?a(d):d()))}function executeReducerBuilderCallback(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"==typeof e?e:e.type;if(!r)throw new Error(formatProdErrorMessage(28));if(r in t)throw new Error(formatProdErrorMessage(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}function isStateFunction(e){return"function"==typeof e}function createReducer(e,t){let n,[r,i,s]=executeReducerBuilderCallback(t);if(isStateFunction(e))n=()=>freezeDraftable(e());else{const t=freezeDraftable(e);n=()=>t}function a(e=n(),t){let a=[r[t.type],...i.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===a.filter(e=>!!e).length&&(a=[s]),a.reduce((e,n)=>{if(n){if(isDraft(e)){const r=n(e,t);return void 0===r?e:r}if(isDraftable(e))return produce(e,e=>n(e,t));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return a.getInitialState=n,a}var matches=(e,t)=>hasMatchFunction(e)?e.match(t):e(t);function isAnyOf(...e){return t=>e.some(e=>matches(e,t))}function isAllOf(...e){return t=>e.every(e=>matches(e,t))}function hasExpectedRequestMetadata(e,t){if(!e||!e.meta)return!1;const n="string"==typeof e.meta.requestId,r=t.indexOf(e.meta.requestStatus)>-1;return n&&r}function isAsyncThunkArray(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function isPending(...e){return 0===e.length?e=>hasExpectedRequestMetadata(e,["pending"]):isAsyncThunkArray(e)?isAnyOf(...e.map(e=>e.pending)):isPending()(e[0])}function isRejected(...e){return 0===e.length?e=>hasExpectedRequestMetadata(e,["rejected"]):isAsyncThunkArray(e)?isAnyOf(...e.map(e=>e.rejected)):isRejected()(e[0])}function isRejectedWithValue(...e){const t=e=>e&&e.meta&&e.meta.rejectedWithValue;return 0===e.length||isAsyncThunkArray(e)?isAllOf(isRejected(...e),t):isRejectedWithValue()(e[0])}function isFulfilled(...e){return 0===e.length?e=>hasExpectedRequestMetadata(e,["fulfilled"]):isAsyncThunkArray(e)?isAnyOf(...e.map(e=>e.fulfilled)):isFulfilled()(e[0])}function isAsyncThunkAction(...e){return 0===e.length?e=>hasExpectedRequestMetadata(e,["pending","fulfilled","rejected"]):isAsyncThunkArray(e)?isAnyOf(...e.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):isAsyncThunkAction()(e[0])}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=(e=21)=>{let t="",n=e;for(;n--;)t+=urlAlphabet[64*Math.random()|0];return t},commonProperties=["name","message","stack","code"],RejectWithValue=class{constructor(e,t){__publicField(this,"_type"),this.payload=e,this.meta=t}},FulfillWithMeta=class{constructor(e,t){__publicField(this,"_type"),this.payload=e,this.meta=t}},miniSerializeError=e=>{if("object"==typeof e&&null!==e){const t={};for(const n of commonProperties)"string"==typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},externalAbortMessage="External signal was aborted",createAsyncThunk=(()=>{function e(e,t,n){const r=createAction(e+"/fulfilled",(e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}})),i=createAction(e+"/pending",(e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}})),s=createAction(e+"/rejected",(e,t,r,i,s)=>({payload:i,error:(n&&n.serializeError||miniSerializeError)(e||"Rejected"),meta:{...s||{},arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)}}));return Object.assign(function(e,{signal:a}={}){return(o,l,c)=>{const u=(null==n?void 0:n.idGenerator)?n.idGenerator(e):nanoid(),d=new AbortController;let h,p;function m(e){p=e,d.abort()}a&&(a.aborted?m(externalAbortMessage):a.addEventListener("abort",()=>m(externalAbortMessage),{once:!0}));const f=async function(){var a,f;let g;try{let s=null==(a=null==n?void 0:n.condition)?void 0:a.call(n,e,{getState:l,extra:c});if(isThenable$1(s)&&(s=await s),!1===s||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const x=new Promise((e,t)=>{h=()=>{t({name:"AbortError",message:p||"Aborted"})},d.signal.addEventListener("abort",h)});o(i(u,e,null==(f=null==n?void 0:n.getPendingMeta)?void 0:f.call(n,{requestId:u,arg:e},{getState:l,extra:c}))),g=await Promise.race([x,Promise.resolve(t(e,{dispatch:o,getState:l,extra:c,requestId:u,signal:d.signal,abort:m,rejectWithValue:(e,t)=>new RejectWithValue(e,t),fulfillWithValue:(e,t)=>new FulfillWithMeta(e,t)})).then(t=>{if(t instanceof RejectWithValue)throw t;return t instanceof FulfillWithMeta?r(t.payload,u,e,t.meta):r(t,u,e)})])}catch(x){g=x instanceof RejectWithValue?s(null,u,e,x.payload,x.meta):s(x,u,e)}finally{h&&d.signal.removeEventListener("abort",h)}return n&&!n.dispatchConditionRejection&&s.match(g)&&g.meta.condition||o(g),g}();return Object.assign(f,{abort:m,requestId:u,arg:e,unwrap:()=>f.then(unwrapResult)})}},{pending:i,rejected:s,fulfilled:r,settled:isAnyOf(s,r),typePrefix:e})}return e.withTypes=()=>e,e})();function unwrapResult(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function isThenable$1(e){return null!==e&&"object"==typeof e&&"function"==typeof e.then}var asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(e,t){return`${e}/${t}`}function buildCreateSlice({creators:e}={}){var t;const n=null==(t=null==e?void 0:e.asyncThunk)?void 0:t[asyncThunkSymbol];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(formatProdErrorMessage(11));const i=("function"==typeof e.reducers?e.reducers(buildReducerCreators()):e.reducers)||{},s=Object.keys(i),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(formatProdErrorMessage(12));if(n in a.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return a.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(a.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],r]="function"==typeof e.extraReducers?executeReducerBuilderCallback(e.extraReducers):[e.extraReducers],i={...t,...a.sliceCaseReducersByType};return createReducer(e.initialState,e=>{for(let t in i)e.addCase(t,i[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)})}s.forEach(r=>{const s=i[r],a={reducerName:r,type:getType(t,r),createNotation:"function"==typeof e.reducers};isAsyncThunkSliceReducerDefinition(s)?handleThunkCaseReducerDefinition(a,s,o,n):handleNormalReducerDefinition(a,s,o)});const c=e=>e,u=new Map,d=new WeakMap;let h;function p(e,t){return h||(h=l()),h(e,t)}function m(){return h||(h=l()),h.getInitialState()}function f(t,n=!1){function r(e){let i=e[t];return void 0===i&&n&&(i=getOrInsertComputed(d,r,m)),i}function i(t=c){const r=getOrInsertComputed(u,n,()=>new WeakMap);return getOrInsertComputed(r,t,()=>{const r={};for(const[i,s]of Object.entries(e.selectors??{}))r[i]=wrapSelector(s,t,()=>getOrInsertComputed(d,t,m),n);return r})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const g={name:t,reducer:p,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:m,...f(r),injectInto(e,{reducerPath:t,...n}={}){const i=t??r;return e.inject({reducerPath:i,reducer:p},n),{...g,...f(i,!0)}}};return g}}function wrapSelector(e,t,n,r){function i(i,...s){let a=t(i);return void 0===a&&r&&(a=n()),e(a,...s)}return i.unwrapped=e,i}var createSlice=buildCreateSlice();function buildReducerCreators(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}function handleNormalReducerDefinition({type:e,reducerName:t,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!isCaseReducerWithPrepareDefinition(r))throw new Error(formatProdErrorMessage(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,a?createAction(e,a):createAction(e))}function isAsyncThunkSliceReducerDefinition(e){return"asyncThunk"===e._reducerDefinitionType}function isCaseReducerWithPrepareDefinition(e){return"reducerWithPrepare"===e._reducerDefinitionType}function handleThunkCaseReducerDefinition({type:e,reducerName:t},n,r,i){if(!i)throw new Error(formatProdErrorMessage(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=n,d=i(e,s,u);r.exposeAction(t,d),a&&r.addCase(d.fulfilled,a),o&&r.addCase(d.pending,o),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(t,{fulfilled:a||noop$4,pending:o||noop$4,rejected:l||noop$4,settled:c||noop$4})}function noop$4(){}function formatProdErrorMessage(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function bind(e,t){return function(){return e.apply(t,arguments)}}const{toString:toString}=Object.prototype,{getPrototypeOf:getPrototypeOf}=Object,{iterator:iterator,toStringTag:toStringTag}=Symbol,kindOf=(e=>t=>{const n=toString.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray:isArray$2}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer(e){return null!==e&&!isUndefined$1(e)&&null!==e.constructor&&!isUndefined$1(e.constructor)&&isFunction$3(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView$1(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString$1=typeOfTest("string"),isFunction$3=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$1=e=>null!==e&&"object"==typeof e,isBoolean$1=e=>!0===e||!1===e,isPlainObject=e=>{if("object"!==kindOf(e))return!1;const t=getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||toStringTag in e||iterator in e)},isEmptyObject=e=>{if(!isObject$1(e)||isBuffer(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject$1(e)&&isFunction$3(e.pipe),isFormData=e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||isFunction$3(e.append)&&("formdata"===(t=kindOf(e))||"object"===t&&isFunction$3(e.toString)&&"[object FormData]"===e.toString()))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,i;if("object"!=typeof e&&(e=[e]),isArray$2(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(isBuffer(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let a;for(r=0;r<s;r++)a=i[r],t.call(null,e[a],a,e)}}function findKey(e,t){if(isBuffer(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const _global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,isContextDefined=e=>!isUndefined$1(e)&&e!==_global;function merge(){const{caseless:e}=isContextDefined(this)&&this||{},t={},n=(n,r)=>{const i=e&&findKey(t,r)||r;isPlainObject(t[i])&&isPlainObject(n)?t[i]=merge(t[i],n):isPlainObject(n)?t[i]=merge({},n):isArray$2(n)?t[i]=n.slice():t[i]=n};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&forEach$1(arguments[r],n);return t}const extend=(e,t,n,{allOwnKeys:r}={})=>(forEach$1(t,(t,r)=>{n&&isFunction$3(t)?e[r]=bind(t,n):e[r]=t},{allOwnKeys:r}),e),stripBOM=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject=(e,t,n,r)=>{let i,s,a;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)a=i[s],r&&!r(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray=e=>{if(!e)return null;if(isArray$2(e))return e;let t=e.length;if(!isNumber$1(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},isTypedArray=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const n=(e&&e[iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll=(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),hasOwnProperty=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};forEach$1(n,(n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)}),Object.defineProperties(e,r)},freezeMethods=e=>{reduceDescriptors(e,(t,n)=>{if(isFunction$3(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];isFunction$3(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet=(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return isArray$2(e)?r(e):r(String(e).split(t)),n},noop$3=()=>{},toFiniteNumber=(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t;function isSpecCompliantForm(e){return!!(e&&isFunction$3(e.append)&&"FormData"===e[toStringTag]&&e[iterator])}const toJSONObject=e=>{const t=new Array(10),n=(e,r)=>{if(isObject$1(e)){if(t.indexOf(e)>=0)return;if(isBuffer(e))return e;if(!("toJSON"in e)){t[r]=e;const i=isArray$2(e)?[]:{};return forEach$1(e,(e,t)=>{const s=n(e,r+1);!isUndefined$1(s)&&(i[t]=s)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject$1(e)||isFunction$3(e))&&isFunction$3(e.then)&&isFunction$3(e.catch),_setImmediate=(setImmediateSupported="function"==typeof setImmediate,postMessageSupported=isFunction$3(_global.postMessage),setImmediateSupported?setImmediate:postMessageSupported?(token=`axios@${Math.random()}`,callbacks=[],_global.addEventListener("message",({source:e,data:t})=>{e===_global&&t===token&&callbacks.length&&callbacks.shift()()},!1),e=>{callbacks.push(e),_global.postMessage(token,"*")}):e=>setTimeout(e));var setImmediateSupported,postMessageSupported,token,callbacks;const asap="undefined"!=typeof queueMicrotask?queueMicrotask.bind(_global):"undefined"!=typeof process&&process.nextTick||_setImmediate,isIterable=e=>null!=e&&isFunction$3(e[iterator]),utils$1={isArray:isArray$2,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView$1,isString:isString$1,isNumber:isNumber$1,isBoolean:isBoolean$1,isObject:isObject$1,isPlainObject:isPlainObject,isEmptyObject:isEmptyObject,isReadableStream:isReadableStream,isRequest:isRequest,isResponse:isResponse,isHeaders:isHeaders,isUndefined:isUndefined$1,isDate:isDate,isFile:isFile,isBlob:isBlob,isRegExp:isRegExp,isFunction:isFunction$3,isStream:isStream,isURLSearchParams:isURLSearchParams,isTypedArray:isTypedArray,isFileList:isFileList,forEach:forEach$1,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM,inherits:inherits,toFlatObject:toFlatObject,kindOf:kindOf,kindOfTest:kindOfTest,endsWith:endsWith,toArray:toArray,forEachEntry:forEachEntry,matchAll:matchAll,isHTMLForm:isHTMLForm,hasOwnProperty:hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors:reduceDescriptors,freezeMethods:freezeMethods,toObjectSet:toObjectSet,toCamelCase:toCamelCase,noop:noop$3,toFiniteNumber:toFiniteNumber,findKey:findKey,global:_global,isContextDefined:isContextDefined,isSpecCompliantForm:isSpecCompliantForm,toJSONObject:toJSONObject,isAsyncFn:isAsyncFn,isThenable:isThenable,setImmediate:_setImmediate,asap:asap,isIterable:isIterable};function AxiosError$1(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}}),Object.defineProperties(AxiosError$1,descriptors),Object.defineProperty(prototype$1,"isAxiosError",{value:!0}),AxiosError$1.from=(e,t,n,r,i,s)=>{const a=Object.create(prototype$1);return utils$1.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),AxiosError$1.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,s&&Object.assign(a,s),a};const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,n){return e?e.concat(t).map(function(e,t){return e=removeBrackets(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$1(e,t,n){if(!utils$1.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=utils$1.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!utils$1.isUndefined(t[e])})).metaTokens,i=n.visitor||c,s=n.dots,a=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(utils$1.isDate(e))return e.toISOString();if(utils$1.isBoolean(e))return e.toString();if(!o&&utils$1.isBlob(e))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(e)||utils$1.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let o=e;if(e&&!i&&"object"==typeof e)if(utils$1.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(utils$1.isArray(e)&&isFlatArray(e)||(utils$1.isFileList(e)||utils$1.endsWith(n,"[]"))&&(o=utils$1.toArray(e)))return n=removeBrackets(n),o.forEach(function(e,r){!utils$1.isUndefined(e)&&null!==e&&t.append(!0===a?renderKey([n],r,s):null===a?n:n+"[]",l(e))}),!1;return!!isVisitable(e)||(t.append(renderKey(i,n,s),l(e)),!1)}const u=[],d=Object.assign(predicates,{defaultVisitor:c,convertValue:l,isVisitable:isVisitable});if(!utils$1.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!utils$1.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),utils$1.forEach(n,function(n,s){!0===(!(utils$1.isUndefined(n)||null===n)&&i.call(t,n,utils$1.isString(s)?s.trim():s,r,d))&&e(n,r?r.concat(s):[s])}),u.pop()}}(e),t}function encode$1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData$1(e,this,t)}const prototype=AxiosURLSearchParams.prototype;function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,t,n){if(!t)return e;const r=n&&n.encode||encode;utils$1.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(s=i?i(t,n):utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}prototype.append=function(e,t){this._pairs.push([e,t])},prototype.toString=function(e){const t=e?function(t){return e.call(this,t,encode$1)}:encode$1;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class InterceptorManager{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$1.forEach(this.handlers,function(t){null!==t&&e(t)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1="undefined"!=typeof URLSearchParams?URLSearchParams:AxiosURLSearchParams,FormData$1="undefined"!=typeof FormData?FormData:null,Blob$1="undefined"!=typeof Blob?Blob:null,platform$2={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv="undefined"!=typeof window&&"undefined"!=typeof document,_navigator="object"==typeof navigator&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hasBrowserEnv,hasStandardBrowserEnv:hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv:hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin:origin},Symbol.toStringTag,{value:"Module"})),platform$1={...utils,...platform$2};function toURLEncodedForm(e,t){return toFormData$1(e,new platform$1.classes.URLSearchParams,{visitor:function(e,t,n,r){return platform$1.isNode&&utils$1.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}function arrayToObject(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function formDataToJSON(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=i>=e.length;if(s=!s&&utils$1.isArray(r)?r.length:s,o)return utils$1.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!a;r[s]&&utils$1.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&utils$1.isArray(r[s])&&(r[s]=arrayToObject(r[s])),!a}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const n={};return utils$1.forEachEntry(e,(e,r)=>{t(parsePropPath(e),r,n,0)}),n}return null}function stringifySafely(e,t,n){if(utils$1.isString(e))try{return(t||JSON.parse)(e),utils$1.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=utils$1.isObject(e);i&&utils$1.isHTMLForm(e)&&(e=new FormData(e));if(utils$1.isFormData(e))return r?JSON.stringify(formDataToJSON(e)):e;if(utils$1.isArrayBuffer(e)||utils$1.isBuffer(e)||utils$1.isStream(e)||utils$1.isFile(e)||utils$1.isBlob(e)||utils$1.isReadableStream(e))return e;if(utils$1.isArrayBufferView(e))return e.buffer;if(utils$1.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((s=utils$1.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return toFormData$1(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const t=this.transitional||defaults$1.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(utils$1.isResponse(e)||utils$1.isReadableStream(e))return e;if(e&&utils$1.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw AxiosError$1.from(i,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults$1.headers[e]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&ignoreDuplicateOf[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return!1===e||null==e?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,n,r,i){return utils$1.isFunction(r)?r.call(this,t,n):(i&&(t=n),utils$1.isString(t)?utils$1.isString(r)?-1!==t.indexOf(r):utils$1.isRegExp(r)?r.test(t):void 0:void 0)}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function buildAccessors(e,t){const n=utils$1.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}let AxiosHeaders$1=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=normalizeHeader(t);if(!i)throw new Error("header name must be a non-empty string");const s=utils$1.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=normalizeValue(e))}const s=(e,t)=>utils$1.forEach(e,(e,n)=>i(e,n,t));if(utils$1.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(utils$1.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))s(parseHeaders(e),t);else if(utils$1.isObject(e)&&utils$1.isIterable(e)){let n,r,i={};for(const t of e){if(!utils$1.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?utils$1.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=normalizeHeader(e)){const n=utils$1.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return parseTokens(e);if(utils$1.isFunction(t))return t.call(this,e,n);if(utils$1.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e)){const n=utils$1.findKey(this,e);return!(!n||void 0===this[n]||t&&!matchHeaderValue(this,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=normalizeHeader(e)){const i=utils$1.findKey(n,e);!i||t&&!matchHeaderValue(n,n[i],i,t)||(delete n[i],r=!0)}}return utils$1.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!matchHeaderValue(this,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return utils$1.forEach(this,(r,i)=>{const s=utils$1.findKey(n,i);if(s)return t[s]=normalizeValue(r),void delete t[i];const a=e?formatHeader(i):String(i).trim();a!==i&&delete t[i],t[a]=normalizeValue(r),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return utils$1.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&utils$1.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[$internals]=this[$internals]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=normalizeHeader(e);t[r]||(buildAccessors(n,e),t[r]=!0)}return utils$1.isArray(e)?e.forEach(r):r(e),this}};function transformData(e,t){const n=this||defaults$1,r=t||n,i=AxiosHeaders$1.from(r.headers);let s=r.data;return utils$1.forEach(e,function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function isCancel$1(e){return!(!e||!e.__CANCEL__)}function CanceledError$1(e,t,n){AxiosError$1.call(this,null==e?"canceled":e,AxiosError$1.ERR_CANCELED,t,n),this.name="CanceledError"}function settle(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new AxiosError$1("Request failed with status code "+n.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[a];i||(i=l),n[s]=o,r[s]=l;let u=a,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}function throttle$1(e,t){let n,r,i=0,s=1e3/t;const a=(t,s=Date.now())=>{i=s,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[(...e)=>{const t=Date.now(),o=t-i;o>=s?a(e,t):(n=e,r||(r=setTimeout(()=>{r=null,a(n)},s-o)))},()=>n&&a(n)]}AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),utils$1.freezeMethods(AxiosHeaders$1),utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});const progressEventReducer=(e,t,n=3)=>{let r=0;const i=speedometer(50,250);return throttle$1(n=>{const s=n.loaded,a=n.lengthComputable?n.total:void 0,o=s-r,l=i(o);r=s;e({loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},progressEventDecorator=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},asyncDecorator=e=>(...t)=>utils$1.asap(()=>e(...t)),isURLSameOrigin=platform$1.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,platform$1.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(platform$1.origin),platform$1.navigator&&/(msie|trident)/i.test(platform$1.navigator.userAgent)):()=>!0,cookies=platform$1.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const a=[e+"="+encodeURIComponent(t)];utils$1.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),utils$1.isString(r)&&a.push("path="+r),utils$1.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t,n){let r=!isAbsoluteURL(t);return e&&(r||0==n)?combineURLs(e,t):t}const headersToObject=e=>e instanceof AxiosHeaders$1?{...e}:e;function mergeConfig$1(e,t){t=t||{};const n={};function r(e,t,n,r){return utils$1.isPlainObject(e)&&utils$1.isPlainObject(t)?utils$1.merge.call({caseless:r},e,t):utils$1.isPlainObject(t)?utils$1.merge({},t):utils$1.isArray(t)?t.slice():t}function i(e,t,n,i){return utils$1.isUndefined(t)?utils$1.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function s(e,t){if(!utils$1.isUndefined(t))return r(void 0,t)}function a(e,t){return utils$1.isUndefined(t)?utils$1.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>i(headersToObject(e),headersToObject(t),0,!0)};return utils$1.forEach(Object.keys({...e,...t}),function(r){const s=l[r]||i,a=s(e[r],t[r],r);utils$1.isUndefined(a)&&s!==o||(n[r]=a)}),n}const resolveConfig=e=>{const t=mergeConfig$1({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=AxiosHeaders$1.from(o),t.url=buildURL(buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),utils$1.isFormData(r))if(platform$1.hasStandardBrowserEnv||platform$1.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(platform$1.hasStandardBrowserEnv&&(i&&utils$1.isFunction(i)&&(i=i(t)),i||!1!==i&&isURLSameOrigin(t.url))){const e=s&&a&&cookies.read(a);e&&o.set(s,e)}return t},isXHRAdapterSupported="undefined"!=typeof XMLHttpRequest,xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(t,n){const r=resolveConfig(e);let i=r.data;const s=AxiosHeaders$1.from(r.headers).normalize();let a,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=r;function m(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let f=new XMLHttpRequest;function g(){if(!f)return;const r=AxiosHeaders$1.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());settle(function(e){t(e),m()},function(e){n(e),m()},{data:d&&"text"!==d&&"json"!==d?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||transitionalDefaults;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new AxiosError$1(t,i.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,f)),f=null},void 0===i&&s.setContentType(null),"setRequestHeader"in f&&utils$1.forEach(s.toJSON(),function(e,t){f.setRequestHeader(t,e)}),utils$1.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),d&&"json"!==d&&(f.responseType=r.responseType),p&&([l,u]=progressEventReducer(p,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=progressEventReducer(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{f&&(n(!t||t.type?new CanceledError$1(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const x=parseProtocol(r.url);x&&-1===platform$1.protocols.indexOf(x)?n(new AxiosError$1("Unsupported protocol "+x+":",AxiosError$1.ERR_BAD_REQUEST,e)):f.send(i||null)})},composeSignals=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof AxiosError$1?t:new CanceledError$1(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,i(new AxiosError$1(`timeout ${t} of ms exceeded`,AxiosError$1.ETIMEDOUT))},t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:o}=r;return o.unsubscribe=()=>utils$1.asap(a),o}},streamChunk=function*(e,t){let n=e.byteLength;if(n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},readBytes=async function*(e,t){for await(const n of readStream(e))yield*streamChunk(n,t)},readStream=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},trackStream=(e,t,n,r)=>{const i=readBytes(e,t);let s,a=0,o=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return o(),void e.close();let s=r.byteLength;if(n){let e=a+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},isFetchSupported="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,isReadableStreamSupported=isFetchSupported&&"function"==typeof ReadableStream,encodeText=isFetchSupported&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),test=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let e=!1;const t=new Request(platform$1.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),DEFAULT_CHUNK_SIZE=65536,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(e=>e.body)};var res;isFetchSupported&&(res=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!resolvers[e]&&(resolvers[e]=utils$1.isFunction(res[e])?t=>t[e]():(t,n)=>{throw new AxiosError$1(`Response type '${e}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,n)})}));const getBodyLength=async e=>{if(null==e)return 0;if(utils$1.isBlob(e))return e.size;if(utils$1.isSpecCompliantForm(e)){const t=new Request(platform$1.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return utils$1.isArrayBufferView(e)||utils$1.isArrayBuffer(e)?e.byteLength:(utils$1.isURLSearchParams(e)&&(e+=""),utils$1.isString(e)?(await encodeText(e)).byteLength:void 0)},resolveBodyLength=async(e,t)=>{const n=utils$1.toFiniteNumber(e.getContentLength());return null==n?getBodyLength(t):n},fetchAdapter=isFetchSupported&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=resolveConfig(e);c=c?(c+"").toLowerCase():"text";let p,m=composeSignals([i,s&&s.toAbortSignal()],a);const f=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let g;try{if(l&&supportsRequestStream&&"get"!==n&&"head"!==n&&0!==(g=await resolveBodyLength(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(utils$1.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=progressEventDecorator(g,progressEventReducer(asyncDecorator(l)));r=trackStream(n.body,DEFAULT_CHUNK_SIZE,e,t)}}utils$1.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,{...h,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let s=await fetch(p,h);const a=supportsResponseStream&&("stream"===c||"response"===c);if(supportsResponseStream&&(o||a&&f)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=s[t]});const t=utils$1.toFiniteNumber(s.headers.get("content-length")),[n,r]=o&&progressEventDecorator(t,progressEventReducer(asyncDecorator(o),!0))||[];s=new Response(trackStream(s.body,DEFAULT_CHUNK_SIZE,n,()=>{r&&r(),f&&f()}),e)}c=c||"text";let x=await resolvers[utils$1.findKey(resolvers,c)||"text"](s,e);return!a&&f&&f(),await new Promise((t,n)=>{settle(t,n,{data:x,headers:AxiosHeaders$1.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:p})})}catch(x){if(f&&f(),x&&"TypeError"===x.name&&/Load failed|fetch/i.test(x.message))throw Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,p),{cause:x.cause||x});throw AxiosError$1.from(x,x&&x.code,e,p)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||null===e||!1===e,adapters={getAdapter:e=>{e=utils$1.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!isResolvedHandle(n)&&(r=knownAdapters[(t=String(n)).toLowerCase()],void 0===r))throw new AxiosError$1(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new AxiosError$1("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(renderReason).join("\n"):" "+renderReason(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return adapters.getAdapter(e.adapter||defaults$1.adapter)(e).then(function(t){return throwIfCancellationRequested(e),t.data=transformData.call(e,e.transformResponse,t),t.headers=AxiosHeaders$1.from(t.headers),t},function(t){return isCancel$1(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData.call(e,e.transformResponse,t.response),t.response.headers=AxiosHeaders$1.from(t.response.headers))),Promise.reject(t)})}const VERSION$1="1.11.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{validators$1[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const deprecatedWarnings={};function assertOptions(e,t,n){if("object"!=typeof e)throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],a=t[s];if(a){const t=e[s],n=void 0===t||a(t,s,e);if(!0!==n)throw new AxiosError$1("option "+s+" must be "+n,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new AxiosError$1("Unknown option "+s,AxiosError$1.ERR_BAD_OPTION)}}validators$1.transitional=function(e,t,n){function r(e,t){return"[Axios v"+VERSION$1+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new AxiosError$1(r(i," has been removed"+(t?" in "+t:"")),AxiosError$1.ERR_DEPRECATED);return t&&!deprecatedWarnings[i]&&(deprecatedWarnings[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},validators$1.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const validator={assertOptions:assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(e){this.defaults=e||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=mergeConfig$1(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),null!=r&&(utils$1.isFunction(r)?t.paramsSerializer={serialize:r}:validator.assertOptions(r,{encode:validators.function,serialize:validators.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),validator.assertOptions(t,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&utils$1.merge(i.common,i[t.method]);i&&utils$1.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=AxiosHeaders$1.concat(s,i);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!o){const e=[dispatchRequest.bind(this),void 0];for(e.unshift(...a),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=dispatchRequest.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return buildURL(buildFullPath((e=mergeConfig$1(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(e){Axios$1.prototype[e]=function(t,n){return this.request(mergeConfig$1(n||{},{method:e,url:t,data:(n||{}).data}))}}),utils$1.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(mergeConfig$1(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Axios$1.prototype[e]=t(),Axios$1.prototype[e+"Form"]=t(!0)});let CancelToken$1=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new CanceledError$1(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}};function spread$1(e){return function(t){return e.apply(null,t)}}function isAxiosError$1(e){return utils$1.isObject(e)&&!0===e.isAxiosError}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};function createInstance(e){const t=new Axios$1(e),n=bind(Axios$1.prototype.request,t);return utils$1.extend(n,Axios$1.prototype,t,{allOwnKeys:!0}),utils$1.extend(n,t,null,{allOwnKeys:!0}),n.create=function(t){return createInstance(mergeConfig$1(e,t))},n}Object.entries(HttpStatusCode$1).forEach(([e,t])=>{HttpStatusCode$1[t]=e});const axios=createInstance(defaults$1);axios.Axios=Axios$1,axios.CanceledError=CanceledError$1,axios.CancelToken=CancelToken$1,axios.isCancel=isCancel$1,axios.VERSION=VERSION$1,axios.toFormData=toFormData$1,axios.AxiosError=AxiosError$1,axios.Cancel=axios.CanceledError,axios.all=function(e){return Promise.all(e)},axios.spread=spread$1,axios.isAxiosError=isAxiosError$1,axios.mergeConfig=mergeConfig$1,axios.AxiosHeaders=AxiosHeaders$1,axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e),axios.getAdapter=adapters.getAdapter,axios.HttpStatusCode=HttpStatusCode$1,axios.default=axios;const{Axios:Axios,AxiosError:AxiosError,CanceledError:CanceledError,isCancel:isCancel,CancelToken:CancelToken,VERSION:VERSION,all:all,Cancel:Cancel,isAxiosError:isAxiosError,spread:spread,toFormData:toFormData,AxiosHeaders:AxiosHeaders,HttpStatusCode:HttpStatusCode,formToJSON:formToJSON,getAdapter:getAdapter,mergeConfig:mergeConfig}=axios,PRODUCTION_CONFIG={API_BASE_URL:"https://bdstream-backend-render.onrender.com/api",APP_NAME:"Bdstream.site",APP_DESCRIPTION:"Free Live TV Streaming for premium experience",APP_URL:"https://bdstream.site",DEBUG_MODE:!0,LOG_LEVEL:"debug",CORS_ORIGIN:"https://bdstream.site",API_TIMEOUT:15e3,MAX_RETRIES:3,ANALYTICS_ID:"",ANALYTICS_ENABLED:!0},getConfig=()=>{{const e=(e=>{let t=e.replace(/\/$/,"");return t=t.replace(/\/api$/i,""),`${t}/api`})(PRODUCTION_CONFIG.API_BASE_URL);return"undefined"!=typeof window&&e!==PRODUCTION_CONFIG.API_BASE_URL&&PRODUCTION_CONFIG.DEBUG_MODE&&console.info("[config] Using normalized production API base:",e),{...PRODUCTION_CONFIG,API_BASE_URL:e}}},config$1=getConfig(),API_BASE_URL=config$1.API_BASE_URL;config$1.DEBUG_MODE&&console.log(" API Configuration:",{VITE_API_URL:void 0,DEV:!1,PROD:!0,finalBaseURL:API_BASE_URL,nodeEnv:"production",config:config$1,isDev:!1,debugMode:config$1.DEBUG_MODE});const api=axios.create({baseURL:API_BASE_URL,headers:{"Content-Type":"application/json"},timeout:1e4});api.interceptors.request.use(e=>{var t;const n=localStorage.getItem("token");return n&&(e.headers.Authorization=`Bearer ${n}`),getConfig().DEBUG_MODE&&console.log(" API Request:",{method:null==(t=e.method)?void 0:t.toUpperCase(),url:e.url,baseURL:e.baseURL,fullURL:`${e.baseURL}${e.url}`,timestamp:(new Date).toISOString(),hasToken:!!n}),e},e=>(console.error(" API Request Error:",e),Promise.reject(e))),api.interceptors.response.use(e=>e,e=>{var t,n,r,i,s,a,o;if(getConfig().DEBUG_MODE?console.error(" API Response Error:",{status:null==(t=e.response)?void 0:t.status,url:null==(n=e.config)?void 0:n.url,baseURL:null==(r=e.config)?void 0:r.baseURL,fullURL:e.config?`${e.config.baseURL}${e.config.url}`:"N/A",message:e.message,data:null==(i=e.response)?void 0:i.data,code:e.code,isNetworkError:!e.response,timestamp:(new Date).toISOString()}):console.error(" API Error:",{status:null==(s=e.response)?void 0:s.status,url:null==(a=e.config)?void 0:a.url,message:e.message,isNetworkError:!e.response}),e.response||(console.error(" Network Error - No backend server running?"),console.error(" Network Error - Check your internet connection or contact support")),401===(null==(o=e.response)?void 0:o.status)){const e=window.location.pathname;["/","/login","/register","/channels","/events"].some(t=>e===t||e.startsWith("/channels/play/"))?console.warn("401 error on public route, not redirecting:",e):(console.warn("401 error on protected route, redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login")}return Promise.reject(e)});const healthCheck=async()=>{var e;try{console.log(" Health check - Testing API connectivity to:",API_BASE_URL);const e=await api.get("/health");return console.log(" Health check successful:",e.status),{success:!0,data:e.data}}catch(t){return console.error(" Health check failed:",{baseURL:API_BASE_URL,error:t.message,status:null==(e=t.response)?void 0:e.status,isNetworkError:!t.response}),t.response?{success:!1,message:`Backend error: ${t.response.status}`,details:{baseURL:API_BASE_URL,status:t.response.status,data:t.response.data}}:{success:!1,message:"No backend server running",details:{baseURL:API_BASE_URL,error:t.message}}}},authAPI={register:e=>api.post("/auth/register",e),login:e=>api.post("/auth/login",e),validate:()=>api.get("/auth/validate"),getProfile:()=>api.get("/auth/profile"),updateProfile:e=>api.put("/auth/profile",e)},channelsAPI={getAll:()=>api.get("/channels"),getById:e=>api.get(`/channels/${e}`),getBySlug:e=>api.get(`/channels/slug/${e}`),getAdminById:e=>api.get(`/channels/${e}/admin`),create:e=>api.post("/channels",e),update:(e,t)=>api.put(`/channels/${e}`,t),delete:e=>api.delete(`/channels/${e}`),play:e=>api.get(`/channels/play/${e}`),topByCategory:(e,t=12)=>api.get(`/channels/top/category/${e}?limit=${t}`),getPopular:(e=12)=>api.get(`/channels/popular?limit=${e}`),getPopularSports:(e=12)=>{const t=`/channels/popular-sports?limit=${e}&_t=${Date.now()}`;return api.get(t)},getStats:e=>api.get(`/channels/stats/channel/${e}`),getOverallStats:()=>api.get("/channels/stats/overall"),resetStats:()=>api.post("/channels/stats/reset"),bulkImport:e=>api.post("/channels/bulk-import",{m3uContent:e},{timeout:3e5}),bulkDelete:e=>api.post("/channels/bulk-delete",{ids:e}),bulkUpdate:(e,t)=>api.post("/channels/bulk-update",{ids:e,update:t})},categoriesAPI={getAll:()=>api.get("/categories"),getById:e=>api.get(`/categories/${e}`),create:e=>api.post("/categories",e),update:(e,t)=>api.put(`/categories/${e}`,t),delete:e=>api.delete(`/categories/${e}`)},regionsAPI={getAll:()=>api.get("/regions"),create:e=>api.post("/regions",e)},settingsAPI={get:()=>api.get("/settings"),update:e=>api.put("/settings",e)},eventsAPI={getAll:()=>api.get("/events"),getById:e=>api.get(`/events/${e}`),create:e=>api.post("/events",e),update:(e,t)=>api.put(`/events/${e}`,t),delete:e=>api.delete(`/events/${e}`),getUpcoming:()=>api.get("/events/upcoming"),getCarousel:()=>api.get("/events/carousel")},uploadAPI={uploadFile:e=>{const t=new FormData;return t.append("file",e),api.post("/upload",t,{headers:{"Content-Type":"multipart/form-data"}})}},packagesAPI={getAll:(e={})=>{const t=new URLSearchParams(e).toString();return api.get(`/packages?${t}`)},get:e=>api.get(`/packages/${e}`),create:e=>api.post("/packages",e),update:(e,t)=>api.put(`/packages/${e}`,t),delete:e=>api.delete(`/packages/${e}`),toggle:e=>api.patch(`/packages/${e}/toggle`),getStats:e=>api.get(`/packages/${e}/stats`)},userPackagesAPI={getUserPackages:(e={})=>{const t=new URLSearchParams(e).toString();return api.get(`/user-packages/my-packages?${t}`)},getMyPackages:(e={})=>{const t=new URLSearchParams(e).toString();return api.get(`/user-packages/my-packages?${t}`)},getAvailable:()=>api.get("/user-packages/available"),purchase:e=>api.post("/user-packages/purchase",{packageId:e}),unlockWithAds:e=>api.post("/user-packages/unlock-with-ads",e),checkAccess:e=>{const t=new URLSearchParams(e).toString();return api.get(`/user-packages/check-access?${t}`)},cancelSubscription:(e,t)=>api.patch(`/user-packages/${e}/cancel`,{reason:t}),cleanupExpired:()=>api.post("/user-packages/cleanup-expired")},adsAPI={getAll:(e={})=>{const t=new URLSearchParams(e).toString();return api.get(`/ads?${t}`)},get:e=>api.get(`/ads/${e}`),create:e=>api.post("/ads",e),update:(e,t)=>api.put(`/ads/${e}`,t),delete:e=>api.delete(`/ads/${e}`),getAvailable:(e={})=>{const t=new URLSearchParams(e).toString();return api.get(`/ads/available?${t}`)},trackView:(e,t)=>api.post(`/ads/${e}/track`,t),getStats:e=>api.get(`/ads/${e}/stats`),toggle:e=>api.patch(`/ads/${e}/toggle`),resetGlobalCooldowns:()=>api.post("/ads/reset-cooldowns/global"),resetUserCooldowns:e=>api.post(`/ads/reset-cooldowns/user/${e}`)},paymentsAPI={submitPayment:e=>api.post("/payments/submit",e),submitBalanceTopUp:e=>api.post("/payments/top-up",e),getMyPayments:(e={})=>{const t=new URLSearchParams(e).toString();return api.get(`/payments/my-payments?${t}`)},getAll:(e={})=>{const t=new URLSearchParams(e).toString();return api.get(`/payments?${t}`)},getStats:()=>api.get("/payments/stats"),getById:e=>api.get(`/payments/${e}`),approve:e=>api.put(`/payments/${e}/approve`),decline:(e,t)=>api.put(`/payments/${e}/decline`,t)},paymentMethodsAPI={getAll:(e={})=>{const t=new URLSearchParams(e).toString();return api.get(`/payment-methods?${t}`)},getAdmin:()=>api.get("/payment-methods/admin"),create:e=>api.post("/payment-methods/admin",e),getById:e=>api.get(`/payment-methods/admin/${e}`),update:(e,t)=>api.put(`/payment-methods/admin/${e}`,t),delete:e=>api.delete(`/payment-methods/admin/${e}`),toggle:e=>api.patch(`/payment-methods/admin/${e}/toggle`),initialize:()=>api.post("/payment-methods/admin/initialize")},debugAPIConfig=()=>{const e={currentBaseURL:API_BASE_URL,environment:"production",isDev:!1,isProd:!0,viteApiUrl:void 0,config:config$1,timestamp:(new Date).toISOString()};return console.log(" API Configuration Debug:",e),e},loadStoredUser=()=>{try{const e=localStorage.getItem("user");if(e)return JSON.parse(e)}catch(e){}return null},initialState$2={user:loadStoredUser(),loading:!1,initializing:!0,error:null},initializeAuth=createAsyncThunk("auth/initialize",async(e,{rejectWithValue:t})=>{var n;try{const e=localStorage.getItem("token"),t=loadStoredUser();if(!e||!t)return{user:null};try{return await authAPI.validate(),{user:t}}catch(r){return 401===(null==(n=r.response)?void 0:n.status)?(localStorage.removeItem("token"),localStorage.removeItem("user"),{user:null}):{user:t}}}catch(i){return t(i.message)}}),loginThunk=createAsyncThunk("auth/login",async({identifier:e,password:t},{rejectWithValue:n})=>{var r,i;try{const n=await authAPI.login({identifier:e,password:t}),{token:r,admin:i,user:s}=n.data||{};if(!r)throw new Error("No token received");const a=i||s;if(!a)throw new Error("No user data in response");return localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(a)),{user:a}}catch(s){return n((null==(i=null==(r=s.response)?void 0:r.data)?void 0:i.message)||s.message)}}),registerThunk=createAsyncThunk("auth/register",async({name:e,email:t,password:n,fullName:r,gender:i,dateOfBirth:s,phoneNumber:a,profilePicture:o},{rejectWithValue:l})=>{var c,u;try{const l={name:e,email:t,password:n};r&&(l.fullName=r),i&&(l.gender=i),s&&(l.dateOfBirth=s),a&&(l.phoneNumber=a),o&&(l.profilePicture=o);const c=await authAPI.register(l),{token:u,user:d,admin:h}=c.data||{};if(!u)throw new Error("No token received");const p=d||h;if(!p)throw new Error("No user data in response");return localStorage.setItem("token",u),localStorage.setItem("user",JSON.stringify(p)),{user:p}}catch(d){return l((null==(u=null==(c=d.response)?void 0:c.data)?void 0:u.message)||d.message)}}),updateProfileThunk=createAsyncThunk("auth/updateProfile",async({name:e,password:t,fullName:n,gender:r,dateOfBirth:i,phoneNumber:s,profilePicture:a},{rejectWithValue:o})=>{var l,c;try{const o={};e&&(o.name=e),t&&(o.password=t),void 0!==n&&(o.fullName=n),r&&(o.gender=r),i&&(o.dateOfBirth=i),void 0!==s&&(o.phoneNumber=s),void 0!==a&&(o.profilePicture=a);const l=await authAPI.updateProfile(o),{token:c,user:u}=l.data||{};if(c&&u)return localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(u)),{user:u};throw new Error("Malformed update profile response")}catch(u){return o((null==(c=null==(l=u.response)?void 0:l.data)?void 0:c.message)||u.message)}}),refreshUserThunk=createAsyncThunk("auth/refreshUser",async(e,{rejectWithValue:t})=>{var n,r,i;try{if(!localStorage.getItem("token"))throw new Error("No token found");const e=await authAPI.getProfile(),{user:t}=e.data||{};if(t)return localStorage.setItem("user",JSON.stringify(t)),{user:t};throw new Error("No user data in response")}catch(s){return 401===(null==(n=s.response)?void 0:n.status)?(localStorage.removeItem("token"),localStorage.removeItem("user"),{user:null}):t((null==(i=null==(r=s.response)?void 0:r.data)?void 0:i.message)||s.message)}}),authSlice=createSlice({name:"auth",initialState:initialState$2,reducers:{logout(e){localStorage.removeItem("token"),localStorage.removeItem("user"),e.user=null,e.error=null},setUser(e,t){e.user=t.payload}},extraReducers:e=>{e.addCase(initializeAuth.pending,e=>{e.initializing=!0}).addCase(initializeAuth.fulfilled,(e,t)=>{e.user=t.payload.user,e.initializing=!1}).addCase(initializeAuth.rejected,(e,t)=>{e.initializing=!1,e.error=t.payload||t.error.message}).addCase(loginThunk.pending,e=>{e.loading=!0,e.error=null}).addCase(loginThunk.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload.user}).addCase(loginThunk.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||t.error.message}).addCase(registerThunk.pending,e=>{e.loading=!0,e.error=null}).addCase(registerThunk.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload.user}).addCase(registerThunk.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||t.error.message}).addCase(updateProfileThunk.pending,e=>{e.loading=!0,e.error=null}).addCase(updateProfileThunk.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload.user}).addCase(updateProfileThunk.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||t.error.message}).addCase(refreshUserThunk.pending,e=>{e.error=null}).addCase(refreshUserThunk.fulfilled,(e,t)=>{e.user=t.payload.user,e.error=null}).addCase(refreshUserThunk.rejected,(e,t)=>{t.payload&&t.payload.includes("401")&&(e.user=null),e.error=t.payload||t.error.message})}}),{logout:logout,setUser:setUser}=authSlice.actions,selectAuth=e=>e.auth,selectIsAdmin=e=>!!(e.auth.user&&["admin","superadmin"].includes(e.auth.user.role)&&e.auth.user.email&&(e.auth.user.id||e.auth.user._id)),authReducer=authSlice.reducer,STORAGE_PREFIX="favorites:",buildKey=e=>`${STORAGE_PREFIX}${(null==e?void 0:e._id)||(null==e?void 0:e.id)||"guest"}`,loadFavorites=e=>{try{const t=localStorage.getItem(buildKey(e));if(!t)return[];const n=JSON.parse(t);return Array.isArray(n)?n:[]}catch{return[]}},persistFavorites=(e,t)=>{try{localStorage.setItem(buildKey(e),JSON.stringify(t))}catch{}},initialState$1={items:[],loadedForUserId:null},favoritesSlice=createSlice({name:"favorites",initialState:initialState$1,reducers:{loadFavoritesForUser(e,t){const n=t.payload;e.items=loadFavorites(n),e.loadedForUserId=(null==n?void 0:n._id)||(null==n?void 0:n.id)||"guest"},addFavorite(e,t){const n=t.payload;if(!n)return;const r=n._id||n.id;if(!r)return;if(e.items.some(e=>e._id===r))return;const i={_id:r,name:n.name,logoUrl:n.logoUrl||n.logo,category:n.category?{_id:n.category._id,name:n.category.name}:null,region:n.region||"",channelNumber:n.channelNumber||""};e.items.push(i)},removeFavorite(e,t){const n=t.payload;e.items=e.items.filter(e=>e._id!==n)},toggleFavorite(e,t){const n=t.payload,r=n._id||n.id;if(!r)return;if(e.items.some(e=>e._id===r))e.items=e.items.filter(e=>e._id!==r);else{const t={_id:r,name:n.name,logoUrl:n.logoUrl||n.logo,category:n.category?{_id:n.category._id,name:n.category.name}:null,region:n.region||"",channelNumber:n.channelNumber||""};e.items.push(t)}},persist(e,t){const n=t.payload;persistFavorites(n,e.items)}}}),{loadFavoritesForUser:loadFavoritesForUser,addFavorite:addFavorite,removeFavorite:removeFavorite,toggleFavorite:toggleFavorite,persist:persist}=favoritesSlice.actions,selectFavorites=e=>e.favorites.items,favoritesReducer=favoritesSlice.reducer,uiSlice=createSlice({name:"ui",initialState:{themeMode:"light",preloader:{isLoading:!0}},reducers:{setThemeMode(e,t){e.themeMode=t.payload},setPreloader(e,t){e.preloader={...e.preloader,...t.payload}}}}),{setThemeMode:setThemeMode,setPreloader:setPreloader}=uiSlice.actions,uiReducer=uiSlice.reducer;var SchemaError=class extends Error{constructor(e){super(e[0].message),__publicField(this,"issues"),this.name="SchemaError",this.issues=e}},QueryStatus=(e=>(e.uninitialized="uninitialized",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected",e))(QueryStatus||{});function getRequestStatusFlags(e){return{status:e,isUninitialized:"uninitialized"===e,isLoading:"pending"===e,isSuccess:"fulfilled"===e,isError:"rejected"===e}}var isPlainObject2=isPlainObject$2;function copyWithStructuralSharing(e,t){if(e===t||!(isPlainObject2(e)&&isPlainObject2(t)||Array.isArray(e)&&Array.isArray(t)))return t;const n=Object.keys(t),r=Object.keys(e);let i=n.length===r.length;const s=Array.isArray(t)?[]:{};for(const a of n)s[a]=copyWithStructuralSharing(e[a],t[a]),i&&(i=e[a]===s[a]);return i?e:s}function countObjectKeys(e){let t=0;for(const n in e)t++;return t}var flatten=e=>[].concat(...e);function isAbsoluteUrl(e){return new RegExp("(^|:)//").test(e)}function isDocumentVisible(){return"undefined"==typeof document||"hidden"!==document.visibilityState}function isNotNullish(e){return null!=e}function isOnline(){return"undefined"==typeof navigator||(void 0===navigator.onLine||navigator.onLine)}var withoutTrailingSlash=e=>e.replace(/\/$/,""),withoutLeadingSlash=e=>e.replace(/^\//,"");function joinUrls(e,t){if(!e)return t;if(!t)return e;if(isAbsoluteUrl(t))return t;const n=e.endsWith("/")||!t.startsWith("?")?"/":"";return`${e=withoutTrailingSlash(e)}${n}${t=withoutLeadingSlash(t)}`}function getOrInsert(e,t,n){return e.has(t)?e.get(t):e.set(t,n).get(t)}var defaultFetchFn=(...e)=>fetch(...e),defaultValidateStatus=e=>e.status>=200&&e.status<=299,defaultIsJsonContentType=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function stripUndefined(e){if(!isPlainObject$2(e))return e;const t={...e};for(const[n,r]of Object.entries(t))void 0===r&&delete t[n];return t}function fetchBaseQuery({baseUrl:e,prepareHeaders:t=e=>e,fetchFn:n=defaultFetchFn,paramsSerializer:r,isJsonContentType:i=defaultIsJsonContentType,jsonContentType:s="application/json",jsonReplacer:a,timeout:o,responseHandler:l,validateStatus:c,...u}={}){return"undefined"==typeof fetch&&n===defaultFetchFn&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(h,p,m)=>{const{getState:f,extra:g,endpoint:x,forced:v,type:y}=p;let _,E,{url:b,headers:C=new Headers(u.headers),params:S,responseHandler:T=l??"json",validateStatus:R=c??defaultValidateStatus,timeout:j=o,...w}="string"==typeof h?{url:h}:h,A=p.signal;j&&(E=new AbortController,p.signal.addEventListener("abort",E.abort),A=E.signal);let I={...u,signal:A,...w};C=new Headers(stripUndefined(C)),I.headers=await t(C,{getState:f,arg:h,extra:g,endpoint:x,forced:v,type:y,extraOptions:m})||C;const k=e=>"object"==typeof e&&(isPlainObject$2(e)||Array.isArray(e)||"function"==typeof e.toJSON);if(!I.headers.has("content-type")&&k(I.body)&&I.headers.set("content-type",s),k(I.body)&&i(I.headers)&&(I.body=JSON.stringify(I.body,a)),S){const e=~b.indexOf("?")?"&":"?";b+=e+(r?r(S):new URLSearchParams(stripUndefined(S)))}b=joinUrls(e,b);const M=new Request(b,I);_={request:new Request(b,I)};let P,L=!1,D=E&&setTimeout(()=>{L=!0,E.abort()},j);try{P=await n(M)}catch(F){return{error:{status:L?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(F)},meta:_}}finally{D&&clearTimeout(D),null==E||E.signal.removeEventListener("abort",E.abort)}const O=P.clone();let $;_.response=O;let N="";try{let e;if(await Promise.all([d(P,T).then(e=>$=e,t=>e=t),O.text().then(e=>N=e,()=>{})]),e)throw e}catch(F){return{error:{status:"PARSING_ERROR",originalStatus:P.status,data:N,error:String(F)},meta:_}}return R(P,$)?{data:$,meta:_}:{error:{status:P.status,data:$},meta:_}};async function d(e,t){if("function"==typeof t)return t(e);if("content-type"===t&&(t=i(e.headers)?"json":"text"),"json"===t){const t=await e.text();return t.length?JSON.parse(t):null}return e.text()}}var HandledError=class{constructor(e,t=void 0){this.value=e,this.meta=t}},onFocus=createAction("__rtkq/focused"),onFocusLost=createAction("__rtkq/unfocused"),onOnline=createAction("__rtkq/online"),onOffline=createAction("__rtkq/offline");function isQueryDefinition$1(e){return"query"===e.type}function isMutationDefinition$1(e){return"mutation"===e.type}function isInfiniteQueryDefinition$1(e){return"infinitequery"===e.type}function isAnyQueryDefinition(e){return isQueryDefinition$1(e)||isInfiniteQueryDefinition$1(e)}function calculateProvidedBy(e,t,n,r,i,s){return isFunction$2(e)?e(t,n,r,i).filter(isNotNullish).map(expandTagDescription).map(s):Array.isArray(e)?e.map(expandTagDescription).map(s):[]}function isFunction$2(e){return"function"==typeof e}function expandTagDescription(e){return"string"==typeof e?{type:e}:e}function asSafePromise(e,t){return e.catch(t)}var forceQueryFnSymbol=Symbol("forceQueryFn"),isUpsertQuery=e=>"function"==typeof e[forceQueryFnSymbol];function buildInitiate({serializeQueryArgs:e,queryThunk:t,infiniteQueryThunk:n,mutationThunk:r,api:i,context:s}){const a=new Map,o=new Map,{unsubscribeQueryResult:l,removeMutationResult:c,updateSubscriptionOptions:u}=i.internalActions;return{buildInitiateQuery:function(e,t){return d(e,t)},buildInitiateInfiniteQuery:function(e,t){return d(e,t)},buildInitiateMutation:function(e){return(t,{track:n=!0,fixedCacheKey:i}={})=>(s,a)=>{const l=r({type:"mutation",endpointName:e,originalArgs:t,track:n,fixedCacheKey:i}),u=s(l),{requestId:d,abort:h,unwrap:p}=u,m=asSafePromise(u.unwrap().then(e=>({data:e})),e=>({error:e})),f=Object.assign(m,{arg:u.arg,requestId:d,abort:h,unwrap:p,reset:()=>{s(c({requestId:d,fixedCacheKey:i}))}}),g=o.get(s)||{};return o.set(s,g),g[d]=f,f.then(()=>{delete g[d],countObjectKeys(g)||o.delete(s)}),i&&(g[i]=f,f.then(()=>{g[i]===f&&(delete g[i],countObjectKeys(g)||o.delete(s))})),f}},getRunningQueryThunk:function(t,n){return r=>{var i;const o=s.endpointDefinitions[t],l=e({queryArgs:n,endpointDefinition:o,endpointName:t});return null==(i=a.get(r))?void 0:i[l]}},getRunningMutationThunk:function(e,t){return e=>{var n;return null==(n=o.get(e))?void 0:n[t]}},getRunningQueriesThunk:function(){return e=>Object.values(a.get(e)||{}).filter(isNotNullish)},getRunningMutationsThunk:function(){return e=>Object.values(o.get(e)||{}).filter(isNotNullish)}};function d(r,s){const o=(c,{subscribe:d=!0,forceRefetch:h,subscriptionOptions:p,[forceQueryFnSymbol]:m,...f}={})=>(g,x)=>{var v;const y=e({queryArgs:c,endpointDefinition:s,endpointName:r});let _;const E={...f,type:"query",subscribe:d,forceRefetch:h,subscriptionOptions:p,endpointName:r,originalArgs:c,queryCacheKey:y,[forceQueryFnSymbol]:m};if(isQueryDefinition$1(s))_=t(E);else{const{direction:e,initialPageParam:t}=f;_=n({...E,direction:e,initialPageParam:t})}const b=i.endpoints[r].select(c),C=g(_),S=b(x()),{requestId:T,abort:R}=C,j=S.requestId!==T,w=null==(v=a.get(g))?void 0:v[y],A=()=>b(x()),I=Object.assign(m?C.then(A):j&&!w?Promise.resolve(S):Promise.all([w,C]).then(A),{arg:c,requestId:T,subscriptionOptions:p,queryCacheKey:y,abort:R,async unwrap(){const e=await I;if(e.isError)throw e.error;return e.data},refetch:()=>g(o(c,{subscribe:!1,forceRefetch:!0})),unsubscribe(){d&&g(l({queryCacheKey:y,requestId:T}))},updateSubscriptionOptions(e){I.subscriptionOptions=e,g(u({endpointName:r,requestId:T,queryCacheKey:y,options:e}))}});if(!w&&!j&&!m){const e=getOrInsert(a,g,{});e[y]=I,I.then(()=>{delete e[y],countObjectKeys(e)||a.delete(g)})}return I};return o}}var NamedSchemaError=class extends SchemaError{constructor(e,t,n,r){super(e),this.value=t,this.schemaName=n,this._bqMeta=r}};async function parseWithSchema(e,t,n,r){const i=await e["~standard"].validate(t);if(i.issues)throw new NamedSchemaError(i.issues,t,n,r);return i.value}function defaultTransformResponse(e){return e}var addShouldAutoBatch=(e={})=>({...e,[SHOULD_AUTOBATCH]:!0});function buildThunks({reducerPath:e,baseQuery:t,context:{endpointDefinitions:n},serializeQueryArgs:r,api:i,assertTagType:s,selectors:a,onSchemaFailure:o,catchSchemaFailure:l,skipSchemaValidation:c}){function u(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}function d(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}const h=(e,t)=>e.query&&e[t]?e[t]:defaultTransformResponse,p=async(e,{signal:r,abort:i,rejectWithValue:s,fulfillWithValue:p,dispatch:f,getState:g,extra:x})=>{var v,y;const _=n[e.endpointName],{metaSchema:E,skipSchemaValidation:b=c}=_;try{let T=h(_,"transformResponse");const R={signal:r,abort:i,dispatch:f,getState:g,extra:x,endpoint:e.endpointName,type:e.type,forced:"query"===e.type?m(e,g()):void 0,queryCacheKey:"query"===e.type?e.queryCacheKey:void 0},j="query"===e.type?e[forceQueryFnSymbol]:void 0;let w;const A=async(t,n,r,i)=>{if(null==n&&t.pages.length)return Promise.resolve({data:t});const s={queryArg:e.originalArgs,pageParam:n},a=await I(s),o=i?u:d;return{data:{pages:o(t.pages,a.data,r),pageParams:o(t.pageParams,n,r)},meta:a.meta}};async function I(e){let n;const{extraOptions:r,argSchema:i,rawResponseSchema:s,responseSchema:a}=_;if(i&&!b&&(e=await parseWithSchema(i,e,"argSchema",{})),n=j?j():_.query?await t(_.query(e),R,r):await _.queryFn(e,R,r,e=>t(e,R,r)),n.error)throw new HandledError(n.error,n.meta);let{data:o}=n;s&&!b&&(o=await parseWithSchema(s,n.data,"rawResponseSchema",n.meta));let l=await T(o,n.meta,e);return a&&!b&&(l=await parseWithSchema(a,l,"responseSchema",n.meta)),{...n,data:l}}if("query"===e.type&&"infiniteQueryOptions"in _){const{infiniteQueryOptions:k}=_,{maxPages:M=1/0}=k;let P;const L={pages:[],pageParams:[]},D=null==(v=a.selectQueryEntry(g(),e.queryCacheKey))?void 0:v.data,O=m(e,g())&&!e.direction||!D?L:D;if("direction"in e&&e.direction&&O.pages.length){const $="backward"===e.direction,N=($?getPreviousPageParam:getNextPageParam)(k,O,e.originalArgs);P=await A(O,N,M,$)}else{const{initialPageParam:F=k.initialPageParam}=e,B=(null==D?void 0:D.pageParams)??[],U=B[0]??F,G=B.length;P=await A(O,U,M),j&&(P={data:P.data.pages[0]});for(let V=1;V<G;V++){const H=getNextPageParam(k,P.data,e.originalArgs);P=await A(P.data,H,M)}}w=P}else w=await I(e.originalArgs);return E&&!b&&w.meta&&(w.meta=await parseWithSchema(E,w.meta,"metaSchema",w.meta)),p(w.data,addShouldAutoBatch({fulfilledTimeStamp:Date.now(),baseQueryMeta:w.meta}))}catch(C){let W=C;if(W instanceof HandledError){let q=h(_,"transformErrorResponse");const{rawErrorResponseSchema:z,errorResponseSchema:K}=_;let{value:Y,meta:Q}=W;try{z&&!b&&(Y=await parseWithSchema(z,Y,"rawErrorResponseSchema",Q)),E&&!b&&(Q=await parseWithSchema(E,Q,"metaSchema",Q));let X=await q(Y,Q,e.originalArgs);return K&&!b&&(X=await parseWithSchema(K,X,"errorResponseSchema",Q)),s(X,addShouldAutoBatch({baseQueryMeta:Q}))}catch(S){W=S}}try{if(W instanceof NamedSchemaError){const Z={endpoint:e.endpointName,arg:e.originalArgs,type:e.type,queryCacheKey:"query"===e.type?e.queryCacheKey:void 0};null==(y=_.onSchemaFailure)||y.call(_,W,Z),null==o||o(W,Z);const{catchSchemaFailure:J=l}=_;if(J)return s(J(W,Z),addShouldAutoBatch({baseQueryMeta:W._bqMeta}))}}catch(S){W=S}throw console.error(W),W}};function m(e,t){const n=a.selectQueryEntry(t,e.queryCacheKey),r=a.selectConfig(t).refetchOnMountOrArgChange,i=null==n?void 0:n.fulfilledTimeStamp,s=e.forceRefetch??(e.subscribe&&r);return!!s&&(!0===s||(Number(new Date)-Number(i))/1e3>=s)}const f=()=>createAsyncThunk(`${e}/executeQuery`,p,{getPendingMeta({arg:e}){const t=n[e.endpointName];return addShouldAutoBatch({startedTimeStamp:Date.now(),...isInfiniteQueryDefinition$1(t)?{direction:e.direction}:{}})},condition(e,{getState:t}){var r;const i=t(),s=a.selectQueryEntry(i,e.queryCacheKey),o=null==s?void 0:s.fulfilledTimeStamp,l=e.originalArgs,c=null==s?void 0:s.originalArgs,u=n[e.endpointName],d=e.direction;return!!isUpsertQuery(e)||"pending"!==(null==s?void 0:s.status)&&(!!m(e,i)||(!(!isQueryDefinition$1(u)||!(null==(r=null==u?void 0:u.forceRefetch)?void 0:r.call(u,{currentArg:l,previousArg:c,endpointState:s,state:i})))||!(o&&!d)))},dispatchConditionRejection:!0}),g=f(),x=f(),v=createAsyncThunk(`${e}/executeMutation`,p,{getPendingMeta:()=>addShouldAutoBatch({startedTimeStamp:Date.now()})});function y(e){return t=>{var n,r;return(null==(r=null==(n=null==t?void 0:t.meta)?void 0:n.arg)?void 0:r.endpointName)===e}}return{queryThunk:g,mutationThunk:v,infiniteQueryThunk:x,prefetch:(e,t,n)=>(r,s)=>{const a=(e=>"force"in e)(n)&&n.force,o=(e=>"ifOlderThan"in e)(n)&&n.ifOlderThan,l=(n=!0)=>{const r={forceRefetch:n,isPrefetch:!0};return i.endpoints[e].initiate(t,r)},c=i.endpoints[e].select(t)(s());if(a)r(l());else if(o){const e=null==c?void 0:c.fulfilledTimeStamp;if(!e)return void r(l());(Number(new Date)-Number(new Date(e)))/1e3>=o&&r(l())}else r(l(!1))},updateQueryData:(e,t,n,r=!0)=>(s,a)=>{const o=i.endpoints[e].select(t)(a()),l={patches:[],inversePatches:[],undo:()=>s(i.util.patchQueryData(e,t,l.inversePatches,r))};if("uninitialized"===o.status)return l;let c;if("data"in o)if(isDraftable(o.data)){const[e,t,r]=produceWithPatches(o.data,n);l.patches.push(...t),l.inversePatches.push(...r),c=e}else c=n(o.data),l.patches.push({op:"replace",path:[],value:c}),l.inversePatches.push({op:"replace",path:[],value:o.data});return 0===l.patches.length||s(i.util.patchQueryData(e,t,l.patches,r)),l},upsertQueryData:(e,t,n)=>r=>r(i.endpoints[e].initiate(t,{subscribe:!1,forceRefetch:!0,[forceQueryFnSymbol]:()=>({data:n})})),patchQueryData:(e,t,a,o)=>(l,c)=>{const u=n[e],d=r({queryArgs:t,endpointDefinition:u,endpointName:e});if(l(i.internalActions.queryResultPatched({queryCacheKey:d,patches:a})),!o)return;const h=i.endpoints[e].select(t)(c()),p=calculateProvidedBy(u.providesTags,h.data,void 0,t,{},s);l(i.internalActions.updateProvidedBy([{queryCacheKey:d,providedTags:p}]))},buildMatchThunkActions:function(e,t){return{matchPending:isAllOf(isPending(e),y(t)),matchFulfilled:isAllOf(isFulfilled(e),y(t)),matchRejected:isAllOf(isRejected(e),y(t))}}}}function getNextPageParam(e,{pages:t,pageParams:n},r){const i=t.length-1;return e.getNextPageParam(t[i],t,n[i],n,r)}function getPreviousPageParam(e,{pages:t,pageParams:n},r){var i;return null==(i=e.getPreviousPageParam)?void 0:i.call(e,t[0],t,n[0],n,r)}function calculateProvidedByThunk(e,t,n,r){return calculateProvidedBy(n[e.meta.arg.endpointName][t],isFulfilled(e)?e.payload:void 0,isRejectedWithValue(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,r)}function updateQuerySubstateIfExists(e,t,n){const r=e[t];r&&n(r)}function getMutationCacheKey(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function updateMutationSubstateIfExists(e,t,n){const r=e[getMutationCacheKey(t)];r&&n(r)}var initialState={};function buildSlice({reducerPath:e,queryThunk:t,mutationThunk:n,serializeQueryArgs:r,context:{endpointDefinitions:i,apiUid:s,extractRehydrationInfo:a,hasRehydrationInfo:o},assertTagType:l,config:c}){const u=createAction(`${e}/resetApiState`);function d(e,t,n,r){var s;e[s=t.queryCacheKey]??(e[s]={status:"uninitialized",endpointName:t.endpointName}),updateQuerySubstateIfExists(e,t.queryCacheKey,e=>{e.status="pending",e.requestId=n&&e.requestId?e.requestId:r.requestId,void 0!==t.originalArgs&&(e.originalArgs=t.originalArgs),e.startedTimeStamp=r.startedTimeStamp;isInfiniteQueryDefinition$1(i[r.arg.endpointName])&&"direction"in t&&(e.direction=t.direction)})}function h(e,t,n,r){updateQuerySubstateIfExists(e,t.arg.queryCacheKey,e=>{if(e.requestId!==t.requestId&&!r)return;const{merge:s}=i[t.arg.endpointName];if(e.status="fulfilled",s)if(void 0!==e.data){const{fulfilledTimeStamp:r,arg:i,baseQueryMeta:a,requestId:o}=t;let l=produce(e.data,e=>s(e,n,{arg:i.originalArgs,baseQueryMeta:a,fulfilledTimeStamp:r,requestId:o}));e.data=l}else e.data=n;else e.data=i[t.arg.endpointName].structuralSharing??1?copyWithStructuralSharing(isDraft(e.data)?original(e.data):e.data,n):n;delete e.error,e.fulfilledTimeStamp=t.fulfilledTimeStamp})}const p=createSlice({name:`${e}/queries`,initialState:initialState,reducers:{removeQueryResult:{reducer(e,{payload:{queryCacheKey:t}}){delete e[t]},prepare:prepareAutoBatched()},cacheEntriesUpserted:{reducer(e,t){for(const n of t.payload){const{queryDescription:r,value:i}=n;d(e,r,!0,{arg:r,requestId:t.meta.requestId,startedTimeStamp:t.meta.timestamp}),h(e,{arg:r,requestId:t.meta.requestId,fulfilledTimeStamp:t.meta.timestamp,baseQueryMeta:{}},i,!0)}},prepare:e=>({payload:e.map(e=>{const{endpointName:t,arg:n,value:s}=e,a=i[t];return{queryDescription:{type:"query",endpointName:t,originalArgs:e.arg,queryCacheKey:r({queryArgs:n,endpointDefinition:a,endpointName:t})},value:s}}),meta:{[SHOULD_AUTOBATCH]:!0,requestId:nanoid(),timestamp:Date.now()}})},queryResultPatched:{reducer(e,{payload:{queryCacheKey:t,patches:n}}){updateQuerySubstateIfExists(e,t,e=>{e.data=applyPatches(e.data,n.concat())})},prepare:prepareAutoBatched()}},extraReducers(e){e.addCase(t.pending,(e,{meta:t,meta:{arg:n}})=>{d(e,n,isUpsertQuery(n),t)}).addCase(t.fulfilled,(e,{meta:t,payload:n})=>{h(e,t,n,isUpsertQuery(t.arg))}).addCase(t.rejected,(e,{meta:{condition:t,arg:n,requestId:r},error:i,payload:s})=>{updateQuerySubstateIfExists(e,n.queryCacheKey,e=>{if(t);else{if(e.requestId!==r)return;e.status="rejected",e.error=s??i}})}).addMatcher(o,(e,t)=>{const{queries:n}=a(t);for(const[r,i]of Object.entries(n))"fulfilled"!==(null==i?void 0:i.status)&&"rejected"!==(null==i?void 0:i.status)||(e[r]=i)})}}),m=createSlice({name:`${e}/mutations`,initialState:initialState,reducers:{removeMutationResult:{reducer(e,{payload:t}){const n=getMutationCacheKey(t);n in e&&delete e[n]},prepare:prepareAutoBatched()}},extraReducers(e){e.addCase(n.pending,(e,{meta:t,meta:{requestId:n,arg:r,startedTimeStamp:i}})=>{r.track&&(e[getMutationCacheKey(t)]={requestId:n,status:"pending",endpointName:r.endpointName,startedTimeStamp:i})}).addCase(n.fulfilled,(e,{payload:t,meta:n})=>{n.arg.track&&updateMutationSubstateIfExists(e,n,e=>{e.requestId===n.requestId&&(e.status="fulfilled",e.data=t,e.fulfilledTimeStamp=n.fulfilledTimeStamp)})}).addCase(n.rejected,(e,{payload:t,error:n,meta:r})=>{r.arg.track&&updateMutationSubstateIfExists(e,r,e=>{e.requestId===r.requestId&&(e.status="rejected",e.error=t??n)})}).addMatcher(o,(e,t)=>{const{mutations:n}=a(t);for(const[r,i]of Object.entries(n))"fulfilled"!==(null==i?void 0:i.status)&&"rejected"!==(null==i?void 0:i.status)||r===(null==i?void 0:i.requestId)||(e[r]=i)})}}),f=createSlice({name:`${e}/invalidation`,initialState:{tags:{},keys:{}},reducers:{updateProvidedBy:{reducer(e,t){var n,r,i;for(const{queryCacheKey:s,providedTags:a}of t.payload){g(e,s);for(const{type:t,id:o}of a){const a=(r=(n=e.tags)[t]??(n[t]={}))[i=o||"__internal_without_id"]??(r[i]=[]);a.includes(s)||a.push(s)}e.keys[s]=a}},prepare:prepareAutoBatched()}},extraReducers(e){e.addCase(p.actions.removeQueryResult,(e,{payload:{queryCacheKey:t}})=>{g(e,t)}).addMatcher(o,(e,t)=>{var n,r,i;const{provided:s}=a(t);for(const[a,o]of Object.entries(s))for(const[t,s]of Object.entries(o)){const o=(r=(n=e.tags)[a]??(n[a]={}))[i=t||"__internal_without_id"]??(r[i]=[]);for(const e of s){o.includes(e)||o.push(e)}}}).addMatcher(isAnyOf(isFulfilled(t),isRejectedWithValue(t)),(e,t)=>{x(e,[t])}).addMatcher(p.actions.cacheEntriesUpserted.match,(e,t)=>{x(e,t.payload.map(({queryDescription:e,value:t})=>({type:"UNKNOWN",payload:t,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:e}})))})}});function g(e,t){var n;const r=e.keys[t]??[];for(const i of r){const r=i.type,s=i.id??"__internal_without_id",a=null==(n=e.tags[r])?void 0:n[s];a&&(e.tags[r][s]=a.filter(e=>e!==t))}delete e.keys[t]}function x(e,t){const n=t.map(e=>{const t=calculateProvidedByThunk(e,"providesTags",i,l),{queryCacheKey:n}=e.meta.arg;return{queryCacheKey:n,providedTags:t}});f.caseReducers.updateProvidedBy(e,f.actions.updateProvidedBy(n))}const v=createSlice({name:`${e}/subscriptions`,initialState:initialState,reducers:{updateSubscriptionOptions(e,t){},unsubscribeQueryResult(e,t){},internal_getRTKQSubscriptions(){}}}),y=createSlice({name:`${e}/internalSubscriptions`,initialState:initialState,reducers:{subscriptionsUpdated:{reducer:(e,t)=>applyPatches(e,t.payload),prepare:prepareAutoBatched()}}}),_=createSlice({name:`${e}/config`,initialState:{online:isOnline(),focused:isDocumentVisible(),middlewareRegistered:!1,...c},reducers:{middlewareRegistered(e,{payload:t}){e.middlewareRegistered="conflict"!==e.middlewareRegistered&&s===t||"conflict"}},extraReducers:e=>{e.addCase(onOnline,e=>{e.online=!0}).addCase(onOffline,e=>{e.online=!1}).addCase(onFocus,e=>{e.focused=!0}).addCase(onFocusLost,e=>{e.focused=!1}).addMatcher(o,e=>({...e}))}}),E=combineReducers({queries:p.reducer,mutations:m.reducer,provided:f.reducer,subscriptions:y.reducer,config:_.reducer});return{reducer:(e,t)=>E(u.match(t)?void 0:e,t),actions:{..._.actions,...p.actions,...v.actions,...y.actions,...m.actions,...f.actions,resetApiState:u}}}var skipToken=Symbol.for("RTKQ/skipToken"),initialSubState={status:"uninitialized"},defaultQuerySubState=produce(initialSubState,()=>{}),defaultMutationSubState=produce(initialSubState,()=>{});function buildSelectors({serializeQueryArgs:e,reducerPath:t,createSelector:n}){const r=e=>defaultQuerySubState,i=e=>defaultMutationSubState;return{buildQuerySelector:function(e,t){return c(e,t,s)},buildInfiniteQuerySelector:function(e,t){const{infiniteQueryOptions:n}=t;return c(e,t,function(e){const t={...e,...getRequestStatusFlags(e.status)},{isLoading:r,isError:i,direction:s}=t,a="forward"===s,o="backward"===s;return{...t,hasNextPage:u(n,t.data,t.originalArgs),hasPreviousPage:d(n,t.data,t.originalArgs),isFetchingNextPage:r&&a,isFetchingPreviousPage:r&&o,isFetchNextPageError:i&&a,isFetchPreviousPageError:i&&o}})},buildMutationSelector:function(){return e=>{let t;t="object"==typeof e?getMutationCacheKey(e)??skipToken:e;return n(t===skipToken?i:e=>{var n,r;return(null==(r=null==(n=a(e))?void 0:n.mutations)?void 0:r[t])??defaultMutationSubState},s)}},selectInvalidatedBy:function(e,n){const r=e[t],i=new Set;for(const t of n.filter(isNotNullish).map(expandTagDescription)){const e=r.provided.tags[t.type];if(!e)continue;let n=(void 0!==t.id?e[t.id]:flatten(Object.values(e)))??[];for(const t of n)i.add(t)}return flatten(Array.from(i.values()).map(e=>{const t=r.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]}))},selectCachedArgsForQuery:function(e,t){return Object.values(o(e)).filter(e=>(null==e?void 0:e.endpointName)===t&&"uninitialized"!==e.status).map(e=>e.originalArgs)},selectApiState:a,selectQueries:o,selectMutations:function(e){var t;return null==(t=a(e))?void 0:t.mutations},selectQueryEntry:l,selectConfig:function(e){var t;return null==(t=a(e))?void 0:t.config}};function s(e){return{...e,...getRequestStatusFlags(e.status)}}function a(e){return e[t]}function o(e){var t;return null==(t=a(e))?void 0:t.queries}function l(e,t){var n;return null==(n=o(e))?void 0:n[t]}function c(t,i,s){return a=>{if(a===skipToken)return n(r,s);const o=e({queryArgs:a,endpointDefinition:i,endpointName:t});return n(e=>l(e,o)??defaultQuerySubState,s)}}function u(e,t,n){return!!t&&null!=getNextPageParam(e,t,n)}function d(e,t,n){return!(!t||!e.getPreviousPageParam)&&null!=getPreviousPageParam(e,t,n)}}var cache$1=WeakMap?new WeakMap:void 0,defaultSerializeQueryArgs=({endpointName:e,queryArgs:t})=>{let n="";const r=null==cache$1?void 0:cache$1.get(t);if("string"==typeof r)n=r;else{const e=JSON.stringify(t,(e,t)=>t=isPlainObject$2(t="bigint"==typeof t?{$bigint:t.toString()}:t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t);isPlainObject$2(t)&&(null==cache$1||cache$1.set(t,e)),n=e}return`${e}(${n})`};function buildCreateApi(...e){return function(t){const n=weakMapMemoize(e=>{var n;return null==(n=t.extractRehydrationInfo)?void 0:n.call(t,e,{reducerPath:t.reducerPath??"api"})}),r={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...t,extractRehydrationInfo:n,serializeQueryArgs(e){let n=defaultSerializeQueryArgs;if("serializeQueryArgs"in e.endpointDefinition){const t=e.endpointDefinition.serializeQueryArgs;n=e=>{const n=t(e);return"string"==typeof n?n:defaultSerializeQueryArgs({...e,queryArgs:n})}}else t.serializeQueryArgs&&(n=t.serializeQueryArgs);return n(e)},tagTypes:[...t.tagTypes||[]]},i={endpointDefinitions:{},batch(e){e()},apiUid:nanoid(),extractRehydrationInfo:n,hasRehydrationInfo:weakMapMemoize(e=>null!=n(e))},s={injectEndpoints:function(e){const t=e.endpoints({query:e=>({...e,type:"query"}),mutation:e=>({...e,type:"mutation"}),infiniteQuery:e=>({...e,type:"infinitequery"})});for(const[n,r]of Object.entries(t))if(!0!==e.overrideExisting&&n in i.endpointDefinitions){if("throw"===e.overrideExisting)throw new Error(formatProdErrorMessage(39))}else{i.endpointDefinitions[n]=r;for(const e of a)e.injectEndpoint(n,r)}return s},enhanceEndpoints({addTagTypes:e,endpoints:t}){if(e)for(const n of e)r.tagTypes.includes(n)||r.tagTypes.push(n);if(t)for(const[n,r]of Object.entries(t))"function"==typeof r?r(i.endpointDefinitions[n]):Object.assign(i.endpointDefinitions[n]||{},r);return s}},a=e.map(e=>e.init(s,r,i));return s.injectEndpoints({endpoints:t.endpoints})}}function safeAssign$1(e,...t){return Object.assign(e,...t)}var buildBatchedActionsHandler=({api:e,queryThunk:t,internalState:n})=>{const r=`${e.reducerPath}/subscriptions`;let i=null,s=null;const{updateSubscriptionOptions:a,unsubscribeQueryResult:o}=e.internalActions,l=()=>n.currentSubscriptions,c={getSubscriptions:l,getSubscriptionCount:e=>countObjectKeys(l()[e]??{}),isRequestSubscribed:(e,t)=>{var n;const r=l();return!!(null==(n=null==r?void 0:r[e])?void 0:n[t])}};return(l,u)=>{if(i||(i=JSON.parse(JSON.stringify(n.currentSubscriptions))),e.util.resetApiState.match(l))return i=n.currentSubscriptions={},s=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(l))return[!1,c];const d=((n,r)=>{var i,s,l;if(a.match(r)){const{queryCacheKey:e,requestId:t,options:s}=r.payload;return(null==(i=null==n?void 0:n[e])?void 0:i[t])&&(n[e][t]=s),!0}if(o.match(r)){const{queryCacheKey:e,requestId:t}=r.payload;return n[e]&&delete n[e][t],!0}if(e.internalActions.removeQueryResult.match(r))return delete n[r.payload.queryCacheKey],!0;if(t.pending.match(r)){const{meta:{arg:e,requestId:t}}=r,i=n[s=e.queryCacheKey]??(n[s]={});return i[`${t}_running`]={},e.subscribe&&(i[t]=e.subscriptionOptions??i[t]??{}),!0}let c=!1;if(t.fulfilled.match(r)||t.rejected.match(r)){const e=n[r.meta.arg.queryCacheKey]||{},t=`${r.meta.requestId}_running`;c||(c=!!e[t]),delete e[t]}if(t.rejected.match(r)){const{meta:{condition:e,arg:t,requestId:i}}=r;if(e&&t.subscribe){const e=n[l=t.queryCacheKey]??(n[l]={});e[i]=t.subscriptionOptions??e[i]??{},c=!0}}return c})(n.currentSubscriptions,l);let h=!0;if(d){s||(s=setTimeout(()=>{const t=JSON.parse(JSON.stringify(n.currentSubscriptions)),[,r]=produceWithPatches(i,()=>t);u.next(e.internalActions.subscriptionsUpdated(r)),i=t,s=null},500));const a="string"==typeof l.type&&!!l.type.startsWith(r),o=t.rejected.match(l)&&l.meta.condition&&!!l.meta.arg.subscribe;h=!a&&!o}return[h,!1]}};function isObjectEmpty(e){for(const t in e)return!1;return!0}var THIRTY_TWO_BIT_MAX_TIMER_SECONDS=2147482.647,buildCacheCollectionHandler=({reducerPath:e,api:t,queryThunk:n,context:r,internalState:i,selectors:{selectQueryEntry:s,selectConfig:a}})=>{const{removeQueryResult:o,unsubscribeQueryResult:l,cacheEntriesUpserted:c}=t.internalActions,u=isAnyOf(l.match,n.fulfilled,n.rejected,c.match);function d(e){const t=i.currentSubscriptions[e];return!!t&&!isObjectEmpty(t)}const h={};function p(e,t,n){const r=t.getState();for(const i of e){const e=s(r,i);m(i,null==e?void 0:e.endpointName,t,n)}}function m(e,t,n,i){const s=r.endpointDefinitions[t],a=(null==s?void 0:s.keepUnusedDataFor)??i.keepUnusedDataFor;if(a===1/0)return;const l=Math.max(0,Math.min(a,THIRTY_TWO_BIT_MAX_TIMER_SECONDS));if(!d(e)){const t=h[e];t&&clearTimeout(t),h[e]=setTimeout(()=>{d(e)||n.dispatch(o({queryCacheKey:e})),delete h[e]},1e3*l)}}return(e,n,i)=>{const s=n.getState(),o=a(s);if(u(e)){let t;if(c.match(e))t=e.payload.map(e=>e.queryDescription.queryCacheKey);else{const{queryCacheKey:n}=l.match(e)?e.payload:e.meta.arg;t=[n]}p(t,n,o)}if(t.util.resetApiState.match(e))for(const[t,r]of Object.entries(h))r&&clearTimeout(r),delete h[t];if(r.hasRehydrationInfo(e)){const{queries:t}=r.extractRehydrationInfo(e);p(Object.keys(t),n,o)}}},neverResolvedError=new Error("Promise never resolved before cacheEntryRemoved."),buildCacheLifecycleHandler=({api:e,reducerPath:t,context:n,queryThunk:r,mutationThunk:i,internalState:s,selectors:{selectQueryEntry:a,selectApiState:o}})=>{const l=isAsyncThunkAction(r),c=isAsyncThunkAction(i),u=isFulfilled(r,i),d={};function h(e,t,n){const r=d[e];(null==r?void 0:r.valueResolved)&&(r.valueResolved({data:t,meta:n}),delete r.valueResolved)}function p(e){const t=d[e];t&&(delete d[e],t.cacheEntryRemoved())}function m(t,r,i,s,a){const o=n.endpointDefinitions[t],l=null==o?void 0:o.onCacheEntryAdded;if(!l)return;const c={},u=new Promise(e=>{c.cacheEntryRemoved=e}),h=Promise.race([new Promise(e=>{c.valueResolved=e}),u.then(()=>{throw neverResolvedError})]);h.catch(()=>{}),d[i]=c;const p=e.endpoints[t].select(isAnyQueryDefinition(o)?r:i),m=s.dispatch((e,t,n)=>n),f={...s,getCacheEntry:()=>p(s.getState()),requestId:a,extra:m,updateCachedData:isAnyQueryDefinition(o)?n=>s.dispatch(e.util.updateQueryData(t,r,n)):void 0,cacheDataLoaded:h,cacheEntryRemoved:u},g=l(r,f);Promise.resolve(g).catch(e=>{if(e!==neverResolvedError)throw e})}return(n,s,o)=>{const f=function(t){if(l(t))return t.meta.arg.queryCacheKey;if(c(t))return t.meta.arg.fixedCacheKey??t.meta.requestId;return e.internalActions.removeQueryResult.match(t)?t.payload.queryCacheKey:e.internalActions.removeMutationResult.match(t)?getMutationCacheKey(t.payload):""}(n);function g(e,t,n,r){const i=a(o,t),l=a(s.getState(),t);!i&&l&&m(e,r,t,s,n)}if(r.pending.match(n))g(n.meta.arg.endpointName,f,n.meta.requestId,n.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(n))for(const{queryDescription:e,value:t}of n.payload){const{endpointName:r,originalArgs:i,queryCacheKey:s}=e;g(r,s,n.meta.requestId,i),h(s,t,{})}else if(i.pending.match(n)){s.getState()[t].mutations[f]&&m(n.meta.arg.endpointName,n.meta.arg.originalArgs,f,s,n.meta.requestId)}else if(u(n))h(f,n.payload,n.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(n)||e.internalActions.removeMutationResult.match(n))p(f);else if(e.util.resetApiState.match(n))for(const e of Object.keys(d))p(e)}},buildDevCheckHandler=({api:e,context:{apiUid:t},reducerPath:n})=>(n,r)=>{e.util.resetApiState.match(n)&&r.dispatch(e.internalActions.middlewareRegistered(t))},buildInvalidationByTagsHandler=({reducerPath:e,context:t,context:{endpointDefinitions:n},mutationThunk:r,queryThunk:i,api:s,assertTagType:a,refetchQuery:o,internalState:l})=>{const{removeQueryResult:c}=s.internalActions,u=isAnyOf(isFulfilled(r),isRejectedWithValue(r)),d=isAnyOf(isFulfilled(r,i),isRejected(r,i));let h=[];function p(n,r){const i=r.getState(),a=i[e];if(h.push(...n),"delayed"===a.config.invalidationBehavior&&function(e){var t;const{queries:n,mutations:r}=e;for(const i of[n,r])for(const e in i)if("pending"===(null==(t=i[e])?void 0:t.status))return!0;return!1}(a))return;const u=h;if(h=[],0===u.length)return;const d=s.util.selectInvalidatedBy(i,u);t.batch(()=>{const e=Array.from(d.values());for(const{queryCacheKey:t}of e){const e=a.queries[t],n=l.currentSubscriptions[t]??{};e&&(0===countObjectKeys(n)?r.dispatch(c({queryCacheKey:t})):"uninitialized"!==e.status&&r.dispatch(o(e)))}})}return(e,t)=>{u(e)?p(calculateProvidedByThunk(e,"invalidatesTags",n,a),t):d(e)?p([],t):s.util.invalidateTags.match(e)&&p(calculateProvidedBy(e.payload,void 0,void 0,void 0,void 0,a),t)}},buildPollingHandler=({reducerPath:e,queryThunk:t,api:n,refetchQuery:r,internalState:i})=>{const s={};function a({queryCacheKey:t},n){const o=n.getState()[e],l=o.queries[t],u=i.currentSubscriptions[t];if(!l||"uninitialized"===l.status)return;const{lowestPollingInterval:d,skipPollingIfUnfocused:h}=c(u);if(!Number.isFinite(d))return;const p=s[t];(null==p?void 0:p.timeout)&&(clearTimeout(p.timeout),p.timeout=void 0);const m=Date.now()+d;s[t]={nextPollTimestamp:m,pollingInterval:d,timeout:setTimeout(()=>{!o.config.focused&&h||n.dispatch(r(l)),a({queryCacheKey:t},n)},d)}}function o({queryCacheKey:t},n){const r=n.getState()[e].queries[t],o=i.currentSubscriptions[t];if(!r||"uninitialized"===r.status)return;const{lowestPollingInterval:u}=c(o);if(!Number.isFinite(u))return void l(t);const d=s[t],h=Date.now()+u;(!d||h<d.nextPollTimestamp)&&a({queryCacheKey:t},n)}function l(e){const t=s[e];(null==t?void 0:t.timeout)&&clearTimeout(t.timeout),delete s[e]}function c(e={}){let t=!1,n=Number.POSITIVE_INFINITY;for(let r in e)e[r].pollingInterval&&(n=Math.min(e[r].pollingInterval,n),t=e[r].skipPollingIfUnfocused||t);return{lowestPollingInterval:n,skipPollingIfUnfocused:t}}return(e,r)=>{(n.internalActions.updateSubscriptionOptions.match(e)||n.internalActions.unsubscribeQueryResult.match(e))&&o(e.payload,r),(t.pending.match(e)||t.rejected.match(e)&&e.meta.condition)&&o(e.meta.arg,r),(t.fulfilled.match(e)||t.rejected.match(e)&&!e.meta.condition)&&a(e.meta.arg,r),n.util.resetApiState.match(e)&&function(){for(const e of Object.keys(s))l(e)}()}},buildQueryLifecycleHandler=({api:e,context:t,queryThunk:n,mutationThunk:r})=>{const i=isPending(n,r),s=isRejected(n,r),a=isFulfilled(n,r),o={};return(n,r)=>{var l,c;if(i(n)){const{requestId:i,arg:{endpointName:s,originalArgs:a}}=n.meta,l=t.endpointDefinitions[s],c=null==l?void 0:l.onQueryStarted;if(c){const t={},n=new Promise((e,n)=>{t.resolve=e,t.reject=n});n.catch(()=>{}),o[i]=t;const u=e.endpoints[s].select(isAnyQueryDefinition(l)?a:i),d=r.dispatch((e,t,n)=>n),h={...r,getCacheEntry:()=>u(r.getState()),requestId:i,extra:d,updateCachedData:isAnyQueryDefinition(l)?t=>r.dispatch(e.util.updateQueryData(s,a,t)):void 0,queryFulfilled:n};c(a,h)}}else if(a(n)){const{requestId:e,baseQueryMeta:t}=n.meta;null==(l=o[e])||l.resolve({data:n.payload,meta:t}),delete o[e]}else if(s(n)){const{requestId:e,rejectedWithValue:t,baseQueryMeta:r}=n.meta;null==(c=o[e])||c.reject({error:n.payload??n.error,isUnhandledError:!t,meta:r}),delete o[e]}}},buildWindowEventHandler=({reducerPath:e,context:t,api:n,refetchQuery:r,internalState:i})=>{const{removeQueryResult:s}=n.internalActions;function a(n,a){const o=n.getState()[e],l=o.queries,c=i.currentSubscriptions;t.batch(()=>{for(const e of Object.keys(c)){const t=l[e],i=c[e];if(!i||!t)continue;(Object.values(i).some(e=>!0===e[a])||Object.values(i).every(e=>void 0===e[a])&&o.config[a])&&(0===countObjectKeys(i)?n.dispatch(s({queryCacheKey:e})):"uninitialized"!==t.status&&n.dispatch(r(t)))}})}return(e,t)=>{onFocus.match(e)&&a(t,"refetchOnFocus"),onOnline.match(e)&&a(t,"refetchOnReconnect")}};function buildMiddleware(e){const{reducerPath:t,queryThunk:n,api:r,context:i}=e,{apiUid:s}=i,a={invalidateTags:createAction(`${t}/invalidateTags`)},o=e=>e.type.startsWith(`${t}/`),l=[buildDevCheckHandler,buildCacheCollectionHandler,buildInvalidationByTagsHandler,buildPollingHandler,buildCacheLifecycleHandler,buildQueryLifecycleHandler];return{middleware:n=>{let a=!1;const u={...e,internalState:{currentSubscriptions:{}},refetchQuery:c,isThisApiSliceAction:o},d=l.map(e=>e(u)),h=buildBatchedActionsHandler(u),p=buildWindowEventHandler(u);return e=>l=>{if(!isAction(l))return e(l);a||(a=!0,n.dispatch(r.internalActions.middlewareRegistered(s)));const c={...n,next:e},u=n.getState(),[m,f]=h(l,c,u);let g;if(g=m?e(l):f,n.getState()[t]&&(p(l,c,u),o(l)||i.hasRehydrationInfo(l)))for(const e of d)e(l,c,u);return g}},actions:a};function c(t){return e.api.endpoints[t.endpointName].initiate(t.originalArgs,{subscribe:!1,forceRefetch:!0})}}var coreModuleName=Symbol(),coreModule=({createSelector:e=createSelector}={})=>({name:coreModuleName,init(t,{baseQuery:n,tagTypes:r,reducerPath:i,serializeQueryArgs:s,keepUnusedDataFor:a,refetchOnMountOrArgChange:o,refetchOnFocus:l,refetchOnReconnect:c,invalidationBehavior:u,onSchemaFailure:d,catchSchemaFailure:h,skipSchemaValidation:p},m){enablePatches();const f=e=>e;Object.assign(t,{reducerPath:i,endpoints:{},internalActions:{onOnline:onOnline,onOffline:onOffline,onFocus:onFocus,onFocusLost:onFocusLost},util:{}});const g=buildSelectors({serializeQueryArgs:s,reducerPath:i,createSelector:e}),{selectInvalidatedBy:x,selectCachedArgsForQuery:v,buildQuerySelector:y,buildInfiniteQuerySelector:_,buildMutationSelector:E}=g;safeAssign$1(t.util,{selectInvalidatedBy:x,selectCachedArgsForQuery:v});const{queryThunk:b,infiniteQueryThunk:C,mutationThunk:S,patchQueryData:T,updateQueryData:R,upsertQueryData:j,prefetch:w,buildMatchThunkActions:A}=buildThunks({baseQuery:n,reducerPath:i,context:m,api:t,serializeQueryArgs:s,assertTagType:f,selectors:g,onSchemaFailure:d,catchSchemaFailure:h,skipSchemaValidation:p}),{reducer:I,actions:k}=buildSlice({context:m,queryThunk:b,mutationThunk:S,serializeQueryArgs:s,reducerPath:i,assertTagType:f,config:{refetchOnFocus:l,refetchOnReconnect:c,refetchOnMountOrArgChange:o,keepUnusedDataFor:a,reducerPath:i,invalidationBehavior:u}});safeAssign$1(t.util,{patchQueryData:T,updateQueryData:R,upsertQueryData:j,prefetch:w,resetApiState:k.resetApiState,upsertQueryEntries:k.cacheEntriesUpserted}),safeAssign$1(t.internalActions,k);const{middleware:M,actions:P}=buildMiddleware({reducerPath:i,context:m,queryThunk:b,mutationThunk:S,infiniteQueryThunk:C,api:t,assertTagType:f,selectors:g});safeAssign$1(t.util,P),safeAssign$1(t,{reducer:I,middleware:M});const{buildInitiateQuery:L,buildInitiateInfiniteQuery:D,buildInitiateMutation:O,getRunningMutationThunk:$,getRunningMutationsThunk:N,getRunningQueriesThunk:F,getRunningQueryThunk:B}=buildInitiate({queryThunk:b,mutationThunk:S,infiniteQueryThunk:C,api:t,serializeQueryArgs:s,context:m});return safeAssign$1(t.util,{getRunningMutationThunk:$,getRunningMutationsThunk:N,getRunningQueryThunk:B,getRunningQueriesThunk:F}),{name:coreModuleName,injectEndpoint(e,n){var r;const i=(r=t.endpoints)[e]??(r[e]={});isQueryDefinition$1(n)&&safeAssign$1(i,{name:e,select:y(e,n),initiate:L(e,n)},A(b,e)),isMutationDefinition$1(n)&&safeAssign$1(i,{name:e,select:E(),initiate:O(e)},A(S,e)),isInfiniteQueryDefinition$1(n)&&safeAssign$1(i,{name:e,select:_(e,n),initiate:D(e,n)},A(b,e))}}}});function capitalize(e){return e.replace(e[0],e[0].toUpperCase())}function isQueryDefinition(e){return"query"===e.type}function isMutationDefinition(e){return"mutation"===e.type}function isInfiniteQueryDefinition(e){return"infinitequery"===e.type}function safeAssign(e,...t){return Object.assign(e,...t)}coreModule();var UNINITIALIZED_VALUE=Symbol();function useStableQueryArgs(e,t,n,r){const i=reactExports.useMemo(()=>({queryArgs:e,serialized:"object"==typeof e?t({queryArgs:e,endpointDefinition:n,endpointName:r}):e}),[e,t,n,r]),s=reactExports.useRef(i);return reactExports.useEffect(()=>{s.current.serialized!==i.serialized&&(s.current=i)},[i]),s.current.serialized===i.serialized?s.current.queryArgs:e}function useShallowStableValue(e){const t=reactExports.useRef(e);return reactExports.useEffect(()=>{shallowEqual$1(t.current,e)||(t.current=e)},[e]),shallowEqual$1(t.current,e)?t.current:e}var canUseDOM$2=()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),isDOM=canUseDOM$2(),isRunningInReactNative=()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product,isReactNative=isRunningInReactNative(),getUseIsomorphicLayoutEffect=()=>isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,useIsomorphicLayoutEffect=getUseIsomorphicLayoutEffect(),noPendingQueryStateSelector=e=>e.isUninitialized?{...e,isUninitialized:!1,isFetching:!0,isLoading:void 0===e.data,status:QueryStatus.pending}:e;function pick(e,...t){const n={};return t.forEach(t=>{n[t]=e[t]}),n}var COMMON_HOOK_DEBUG_FIELDS=["data","status","isLoading","isSuccess","isError","error"];function buildHooks({api:e,moduleOptions:{batch:t,hooks:{useDispatch:n,useSelector:r,useStore:i},unstable__sideEffectsInRender:s,createSelector:a},serializeQueryArgs:o,context:l}){const c=s?e=>e():reactExports.useEffect;return{buildQueryHooks:function(r){const i=(e,t={})=>{const[n]=h(r,e,t);return m(n),reactExports.useMemo(()=>({refetch:()=>f(n)}),[n])},s=({refetchOnReconnect:i,refetchOnFocus:s,pollingInterval:a=0,skipPollingIfUnfocused:o=!1}={})=>{const{initiate:l}=e.endpoints[r],u=n(),[d,h]=reactExports.useState(UNINITIALIZED_VALUE),p=reactExports.useRef(void 0),m=useShallowStableValue({refetchOnReconnect:i,refetchOnFocus:s,pollingInterval:a,skipPollingIfUnfocused:o});c(()=>{var e,t;const n=null==(e=p.current)?void 0:e.subscriptionOptions;m!==n&&(null==(t=p.current)||t.updateSubscriptionOptions(m))},[m]);const f=reactExports.useRef(m);c(()=>{f.current=m},[m]);const g=reactExports.useCallback(function(e,n=!1){let r;return t(()=>{var t;null==(t=p.current)||t.unsubscribe(),p.current=r=u(l(e,{subscriptionOptions:f.current,forceRefetch:!n})),h(e)}),r},[u,l]),x=reactExports.useCallback(()=>{var t,n;(null==(t=p.current)?void 0:t.queryCacheKey)&&u(e.internalActions.removeQueryResult({queryCacheKey:null==(n=p.current)?void 0:n.queryCacheKey}))},[u]);return reactExports.useEffect(()=>()=>{var e;null==(e=null==p?void 0:p.current)||e.unsubscribe()},[]),reactExports.useEffect(()=>{d===UNINITIALIZED_VALUE||p.current||g(d,!0)},[d,g]),reactExports.useMemo(()=>[g,d,{reset:x}],[g,d,x])},a=p(r,u);return{useQueryState:a,useQuerySubscription:i,useLazyQuerySubscription:s,useLazyQuery(e){const[t,n,{reset:r}]=s(e),i=a(n,{...e,skip:n===UNINITIALIZED_VALUE}),o=reactExports.useMemo(()=>({lastArg:n}),[n]);return reactExports.useMemo(()=>[t,{...i,reset:r},o],[t,i,r,o])},useQuery(e,t){const n=i(e,t),r=a(e,{selectFromResult:e===skipToken||(null==t?void 0:t.skip)?void 0:noPendingQueryStateSelector,...t}),s=pick(r,...COMMON_HOOK_DEBUG_FIELDS);return reactExports.useDebugValue(s),reactExports.useMemo(()=>({...r,...n}),[r,n])}}},buildInfiniteQueryHooks:function(e){const n=(n,r={})=>{const[i,s,a,o]=h(e,n,r),u=reactExports.useRef(o);c(()=>{u.current=o},[o]);const d=reactExports.useCallback(function(e,n){let r;return t(()=>{var t;null==(t=i.current)||t.unsubscribe(),i.current=r=s(a(e,{subscriptionOptions:u.current,direction:n}))}),r},[i,s,a]);m(i);const p=useStableQueryArgs(r.skip?skipToken:n,defaultSerializeQueryArgs,l.endpointDefinitions[e],e),g=reactExports.useCallback(()=>f(i),[i]);return reactExports.useMemo(()=>({trigger:d,refetch:g,fetchNextPage:()=>d(p,"forward"),fetchPreviousPage:()=>d(p,"backward")}),[g,d,p])},r=p(e,d);return{useInfiniteQueryState:r,useInfiniteQuerySubscription:n,useInfiniteQuery(e,t){const{refetch:i,fetchNextPage:s,fetchPreviousPage:a}=n(e,t),o=r(e,{selectFromResult:e===skipToken||(null==t?void 0:t.skip)?void 0:noPendingQueryStateSelector,...t}),l=pick(o,...COMMON_HOOK_DEBUG_FIELDS,"hasNextPage","hasPreviousPage");return reactExports.useDebugValue(l),reactExports.useMemo(()=>({...o,fetchNextPage:s,fetchPreviousPage:a,refetch:i}),[o,s,a,i])}}},buildMutationHook:function(i){return({selectFromResult:s,fixedCacheKey:o}={})=>{const{select:l,initiate:c}=e.endpoints[i],u=n(),[d,h]=reactExports.useState();reactExports.useEffect(()=>()=>{(null==d?void 0:d.arg.fixedCacheKey)||null==d||d.reset()},[d]);const p=reactExports.useCallback(function(e){const t=u(c(e,{fixedCacheKey:o}));return h(t),t},[u,c,o]),{requestId:m}=d||{},f=reactExports.useMemo(()=>l({fixedCacheKey:o,requestId:null==d?void 0:d.requestId}),[o,d,l]),g=reactExports.useMemo(()=>s?a([f],s):f,[s,f]),x=r(g,shallowEqual$1),v=null==o?null==d?void 0:d.arg.originalArgs:void 0,y=reactExports.useCallback(()=>{t(()=>{d&&h(void 0),o&&u(e.internalActions.removeMutationResult({requestId:m,fixedCacheKey:o}))})},[u,o,d,m]),_=pick(x,...COMMON_HOOK_DEBUG_FIELDS,"endpointName");reactExports.useDebugValue(_);const E=reactExports.useMemo(()=>({...x,originalArgs:v,reset:y}),[x,v,y]);return reactExports.useMemo(()=>[p,E],[p,E])}},usePrefetch:function(t,r){const i=n(),s=useShallowStableValue(r);return reactExports.useCallback((n,r)=>i(e.util.prefetch(t,n,{...s,...r})),[t,i,s])}};function u(e,t,n){if((null==t?void 0:t.endpointName)&&e.isUninitialized){const{endpointName:e}=t,r=l.endpointDefinitions[e];n!==skipToken&&o({queryArgs:t.originalArgs,endpointDefinition:r,endpointName:e})===o({queryArgs:n,endpointDefinition:r,endpointName:e})&&(t=void 0)}let r=e.isSuccess?e.data:null==t?void 0:t.data;void 0===r&&(r=e.data);const i=void 0!==r,s=e.isLoading,a=(!t||t.isLoading||t.isUninitialized)&&!i&&s,c=e.isSuccess||i&&(s&&!(null==t?void 0:t.isError)||e.isUninitialized);return{...e,data:r,currentData:e.data,isFetching:s,isLoading:a,isSuccess:c}}function d(e,t,n){if((null==t?void 0:t.endpointName)&&e.isUninitialized){const{endpointName:e}=t,r=l.endpointDefinitions[e];n!==skipToken&&o({queryArgs:t.originalArgs,endpointDefinition:r,endpointName:e})===o({queryArgs:n,endpointDefinition:r,endpointName:e})&&(t=void 0)}let r=e.isSuccess?e.data:null==t?void 0:t.data;void 0===r&&(r=e.data);const i=void 0!==r,s=e.isLoading,a=(!t||t.isLoading||t.isUninitialized)&&!i&&s,c=e.isSuccess||s&&i;return{...e,data:r,currentData:e.data,isFetching:s,isLoading:a,isSuccess:c}}function h(t,r,{refetchOnReconnect:i,refetchOnFocus:s,refetchOnMountOrArgChange:a,skip:o=!1,pollingInterval:u=0,skipPollingIfUnfocused:d=!1,...h}={}){const{initiate:p}=e.endpoints[t],m=n(),f=reactExports.useRef(void 0);if(!f.current){const t=m(e.internalActions.internal_getRTKQSubscriptions());f.current=t}const g=useStableQueryArgs(o?skipToken:r,defaultSerializeQueryArgs,l.endpointDefinitions[t],t),x=useShallowStableValue({refetchOnReconnect:i,refetchOnFocus:s,pollingInterval:u,skipPollingIfUnfocused:d}),v=useShallowStableValue(h.initialPageParam),y=reactExports.useRef(void 0);let{queryCacheKey:_,requestId:E}=y.current||{},b=!1;_&&E&&(b=f.current.isRequestSubscribed(_,E));const C=!b&&void 0!==y.current;return c(()=>{C&&(y.current=void 0)},[C]),c(()=>{var e;const n=y.current;if(g===skipToken)return null==n||n.unsubscribe(),void(y.current=void 0);const r=null==(e=y.current)?void 0:e.subscriptionOptions;if(n&&n.arg===g)x!==r&&n.updateSubscriptionOptions(x);else{null==n||n.unsubscribe();const e=m(p(g,{subscriptionOptions:x,forceRefetch:a,...isInfiniteQueryDefinition(l.endpointDefinitions[t])?{initialPageParam:v}:{}}));y.current=e}},[m,p,a,g,x,C,v,t]),[y,m,p,x]}function p(t,n){return(s,{skip:c=!1,selectFromResult:u}={})=>{const{select:d}=e.endpoints[t],h=useStableQueryArgs(c?skipToken:s,o,l.endpointDefinitions[t],t),p=reactExports.useRef(void 0),m=reactExports.useMemo(()=>a([d(h),(e,t)=>t,e=>h],n,{memoizeOptions:{resultEqualityCheck:shallowEqual$1}}),[d,h]),f=reactExports.useMemo(()=>u?a([m],u,{devModeChecks:{identityFunctionCheck:"never"}}):m,[m,u]),g=r(e=>f(e,p.current),shallowEqual$1),x=i(),v=m(x.getState(),p.current);return useIsomorphicLayoutEffect(()=>{p.current=v},[v]),g}}function m(e){reactExports.useEffect(()=>()=>{var t,n;null==(n=null==(t=e.current)?void 0:t.unsubscribe)||n.call(t),e.current=void 0},[e])}function f(e){if(!e.current)throw new Error(formatProdErrorMessage(38));return e.current.refetch()}}var reactHooksModuleName=Symbol(),reactHooksModule=({batch:e=batch,hooks:t={useDispatch:useDispatch,useSelector:useSelector,useStore:useStore},createSelector:n=createSelector,unstable__sideEffectsInRender:r=!1,...i}={})=>({name:reactHooksModuleName,init(i,{serializeQueryArgs:s},a){const o=i,{buildQueryHooks:l,buildInfiniteQueryHooks:c,buildMutationHook:u,usePrefetch:d}=buildHooks({api:i,moduleOptions:{batch:e,hooks:t,unstable__sideEffectsInRender:r,createSelector:n},serializeQueryArgs:s,context:a});return safeAssign(o,{usePrefetch:d}),safeAssign(a,{batch:e}),{injectEndpoint(e,t){if(isQueryDefinition(t)){const{useQuery:t,useLazyQuery:n,useLazyQuerySubscription:r,useQueryState:s,useQuerySubscription:a}=l(e);safeAssign(o.endpoints[e],{useQuery:t,useLazyQuery:n,useLazyQuerySubscription:r,useQueryState:s,useQuerySubscription:a}),i[`use${capitalize(e)}Query`]=t,i[`useLazy${capitalize(e)}Query`]=n}if(isMutationDefinition(t)){const t=u(e);safeAssign(o.endpoints[e],{useMutation:t}),i[`use${capitalize(e)}Mutation`]=t}else if(isInfiniteQueryDefinition(t)){const{useInfiniteQuery:t,useInfiniteQuerySubscription:n,useInfiniteQueryState:r}=c(e);safeAssign(o.endpoints[e],{useInfiniteQuery:t,useInfiniteQuerySubscription:n,useInfiniteQueryState:r}),i[`use${capitalize(e)}InfiniteQuery`]=t}}}}}),createApi=buildCreateApi(coreModule(),reactHooksModule());const config=getConfig(),baseUrl=config.API_BASE_URL,primaryBaseQuery=fetchBaseQuery({baseUrl:baseUrl,prepareHeaders:e=>{const t=localStorage.getItem("token");return t&&e.set("authorization",`Bearer ${t}`),e}}),fallbackBaseQuery=fetchBaseQuery({baseUrl:"/api",prepareHeaders:e=>{const t=localStorage.getItem("token");return t&&e.set("authorization",`Bearer ${t}`),e}}),resilientBaseQuery=async(e,t,n)=>{const r=async(r,i)=>await r(e,t,n);let i=await r(primaryBaseQuery);return i.error&&"FETCH_ERROR"===i.error.status&&baseUrl.startsWith("http")&&("undefined"!=typeof window&&window.location.search.includes("debug=settings")&&console.warn("[api] Primary base resulted in FETCH_ERROR. Retrying with relative /api base."),i=await r(fallbackBaseQuery)),i},iptvApi=createApi({reducerPath:"iptvApi",baseQuery:resilientBaseQuery,tagTypes:["Channel","Channels","Event","Events","Settings"],endpoints:e=>({getSettings:e.query({query:()=>"/settings",providesTags:[{type:"Settings",id:"SINGLE"}]}),updateSettings:e.mutation({query:e=>({url:"/settings",method:"PUT",body:e}),invalidatesTags:[{type:"Settings",id:"SINGLE"}]}),getChannels:e.query({query:()=>"/channels",providesTags:e=>e?[...e.map(e=>({type:"Channel",id:e._id})),{type:"Channels",id:"LIST"}]:[{type:"Channels",id:"LIST"}]}),getChannelById:e.query({query:e=>`/channels/${e}`,providesTags:(e,t,n)=>[{type:"Channel",id:n}]}),getChannelBySlug:e.query({query:e=>`/channels/slug/${e}`,providesTags:e=>e?[{type:"Channel",id:e._id}]:[]}),getPopularChannels:e.query({query:(e=12)=>`/channels/popular?limit=${e}`,providesTags:[{type:"Channels",id:"POPULAR"}]}),getPopularSportsChannels:e.query({query:(e=12)=>`/channels/popular-sports?limit=${e}&_t=${Date.now()}`,keepUnusedDataFor:30,providesTags:[{type:"Channels",id:"POPULAR_SPORTS"}],refetchOnFocus:!0,refetchOnReconnect:!0}),createChannel:e.mutation({query:e=>({url:"/channels",method:"POST",body:e}),invalidatesTags:[{type:"Channels",id:"LIST"},{type:"Channels",id:"POPULAR"},{type:"Channels",id:"POPULAR_SPORTS"}],async onQueryStarted(e,{dispatch:t,queryFulfilled:n}){const r=`temp-${Date.now()}`,i={_id:r,...e};let s;try{s=t(iptvApi.util.updateQueryData("getChannels",void 0,e=>{e.push(i)}))}catch(a){}try{const{data:e}=await n;s&&t(iptvApi.util.updateQueryData("getChannels",void 0,t=>{const n=t.findIndex(e=>e._id===r);-1!==n?t[n]=e:t.push(e)}))}catch(o){s&&s.undo()}}}),updateChannel:e.mutation({query:({id:e,...t})=>({url:`/channels/${e}`,method:"PUT",body:t}),invalidatesTags:(e,t,{id:n})=>[{type:"Channel",id:n},{type:"Channels",id:"POPULAR"},{type:"Channels",id:"POPULAR_SPORTS"}],async onQueryStarted({id:e,...t},{dispatch:n,queryFulfilled:r}){const i=[],s=(e,t,r)=>{try{i.push(n(iptvApi.util.updateQueryData(e,t,r)))}catch{}};s("getChannels",void 0,n=>{const r=n.findIndex(t=>t._id===e);-1!==r&&Object.assign(n[r],t)}),s("getChannelById",e,e=>{e&&Object.assign(e,t)}),s("getPopularChannels",void 0,n=>{var r;const i=null==(r=null==n?void 0:n.findIndex)?void 0:r.call(n,t=>t._id===e);-1!==i&&Object.assign(n[i],t)}),s("getPopularSportsChannels",void 0,n=>{var r;const i=null==(r=null==n?void 0:n.findIndex)?void 0:r.call(n,t=>t._id===e);-1!==i&&Object.assign(n[i],t)});try{await r}catch(a){i.forEach(e=>e.undo&&e.undo())}}}),deleteChannel:e.mutation({query:e=>({url:`/channels/${e}`,method:"DELETE"}),invalidatesTags:(e,t,n)=>[{type:"Channel",id:n},{type:"Channels",id:"LIST"},{type:"Channels",id:"POPULAR"},{type:"Channels",id:"POPULAR_SPORTS"}],async onQueryStarted(e,{dispatch:t,queryFulfilled:n}){const r=[],i=(e,n,i)=>{try{r.push(t(iptvApi.util.updateQueryData(e,n,i)))}catch{}};i("getChannels",void 0,t=>{const n=t.findIndex(t=>t._id===e);-1!==n&&t.splice(n,1)}),i("getPopularChannels",void 0,t=>{var n;const r=null==(n=null==t?void 0:t.findIndex)?void 0:n.call(t,t=>t._id===e);-1!==r&&t.splice(r,1)}),i("getPopularSportsChannels",void 0,t=>{var n;const r=null==(n=null==t?void 0:t.findIndex)?void 0:n.call(t,t=>t._id===e);-1!==r&&t.splice(r,1)});try{await n}catch(s){r.forEach(e=>e.undo&&e.undo())}}}),resetChannelStats:e.mutation({query:()=>({url:"/channels/stats/reset",method:"POST"}),invalidatesTags:[{type:"Channels",id:"LIST"}]}),bulkDeleteChannels:e.mutation({query:e=>({url:"/channels/bulk-delete",method:"POST",body:{ids:e}}),invalidatesTags:[{type:"Channels",id:"LIST"}],async onQueryStarted(e,{dispatch:t,queryFulfilled:n}){let r;try{r=t(iptvApi.util.updateQueryData("getChannels",void 0,t=>e.forEach(e=>{const n=t.findIndex(t=>t._id===e);-1!==n&&t.splice(n,1)})))}catch{}try{await n}catch(i){r&&r.undo()}}}),bulkUpdateChannels:e.mutation({query:({ids:e,update:t})=>({url:"/channels/bulk-update",method:"POST",body:{ids:e,update:t}}),invalidatesTags:[{type:"Channels",id:"LIST"}],async onQueryStarted({ids:e,update:t},{dispatch:n,queryFulfilled:r}){let i;try{i=n(iptvApi.util.updateQueryData("getChannels",void 0,n=>{e.forEach(e=>{const r=n.findIndex(t=>t._id===e);-1!==r&&Object.assign(n[r],t)})}))}catch{}try{await r}catch(s){i&&i.undo()}}}),getEvents:e.query({query:()=>"/events",providesTags:e=>e?[...e.map(e=>({type:"Event",id:e._id})),{type:"Events",id:"LIST"}]:[{type:"Events",id:"LIST"}]}),getEventById:e.query({query:e=>`/events/${e}`,providesTags:(e,t,n)=>[{type:"Event",id:n}]}),getUpcomingEvents:e.query({query:()=>"/events/upcoming",keepUnusedDataFor:20,providesTags:[{type:"Events",id:"UPCOMING"}],refetchOnFocus:!0,refetchOnReconnect:!0}),getCarouselEvents:e.query({query:()=>"/events/carousel",keepUnusedDataFor:45,providesTags:[{type:"Events",id:"CAROUSEL"}],refetchOnFocus:!0,refetchOnReconnect:!0}),createEvent:e.mutation({query:e=>({url:"/events",method:"POST",body:e}),invalidatesTags:[{type:"Events",id:"LIST"},{type:"Events",id:"UPCOMING"},{type:"Events",id:"CAROUSEL"}],async onQueryStarted(e,{dispatch:t,queryFulfilled:n}){const r=`temp-${Date.now()}`,i={_id:r,...e};let s=[];const a=(e,n,r)=>{try{s.push(t(iptvApi.util.updateQueryData(e,n,r)))}catch{}};a("getEvents",void 0,e=>{e.unshift(i)}),a("getUpcomingEvents",void 0,e=>{var t;null==(t=null==e?void 0:e.unshift)||t.call(e,i)}),a("getCarouselEvents",void 0,e=>{var t;null==(t=null==e?void 0:e.unshift)||t.call(e,i)});try{const{data:e}=await n;["getEvents","getUpcomingEvents","getCarouselEvents"].forEach(n=>{try{t(iptvApi.util.updateQueryData(n,void 0,t=>{if(!t)return;const n=t.findIndex(e=>e._id===r);-1!==n&&(t[n]=e)}))}catch{}})}catch(o){s.forEach(e=>e.undo&&e.undo())}}}),updateEvent:e.mutation({query:({id:e,...t})=>({url:`/events/${e}`,method:"PUT",body:t}),invalidatesTags:(e,t,{id:n})=>[{type:"Event",id:n},{type:"Events",id:"LIST"},{type:"Events",id:"UPCOMING"},{type:"Events",id:"CAROUSEL"}],async onQueryStarted({id:e,...t},{dispatch:n,queryFulfilled:r}){const i=[],s=(e,t,r)=>{try{i.push(n(iptvApi.util.updateQueryData(e,t,r)))}catch{}};s("getEvents",void 0,n=>{const r=n.findIndex(t=>t._id===e);-1!==r&&Object.assign(n[r],t)}),s("getEventById",e,e=>{e&&Object.assign(e,t)}),s("getUpcomingEvents",void 0,n=>{var r;const i=null==(r=null==n?void 0:n.findIndex)?void 0:r.call(n,t=>t._id===e);-1!==i&&Object.assign(n[i],t)}),s("getCarouselEvents",void 0,n=>{var r;const i=null==(r=null==n?void 0:n.findIndex)?void 0:r.call(n,t=>t._id===e);-1!==i&&Object.assign(n[i],t)});try{await r}catch{i.forEach(e=>e.undo&&e.undo())}}}),deleteEvent:e.mutation({query:e=>({url:`/events/${e}`,method:"DELETE"}),invalidatesTags:(e,t,n)=>[{type:"Event",id:n},{type:"Events",id:"LIST"},{type:"Events",id:"UPCOMING"},{type:"Events",id:"CAROUSEL"}],async onQueryStarted(e,{dispatch:t,queryFulfilled:n}){const r=[];["getEvents","getUpcomingEvents","getCarouselEvents"].forEach(n=>{((e,n,i)=>{try{r.push(t(iptvApi.util.updateQueryData(e,n,i)))}catch{}})(n,void 0,t=>{var n;const r=null==(n=null==t?void 0:t.findIndex)?void 0:n.call(t,t=>t._id===e);-1!==r&&t.splice(r,1)})});try{await n}catch{r.forEach(e=>e.undo&&e.undo())}}})})}),selectChannelsResult=e=>e.iptvApi.queries["getChannels(undefined)"],selectEventsResult=e=>e.iptvApi.queries["getEvents(undefined)"],selectFavoritesArr=e=>e.favorites.items,selectSettingsData=e=>e.settings.data,selectAllChannels=createSelector([selectChannelsResult],e=>(null==e?void 0:e.data)||[]),selectAllEvents=createSelector([selectEventsResult],e=>(null==e?void 0:e.data)||[]);createSelector([selectAllChannels],e=>{var t;const n={};for(const r of e){const e=(null==(t=r.category)?void 0:t._id)||"uncategorized";n[e]||(n[e]={category:r.category||{_id:"uncategorized",name:"Uncategorized"},channels:[]}),n[e].channels.push(r)}return n}),createSelector([selectAllChannels],e=>e.filter(e=>{var t;return/sport/i.test((null==(t=e.category)?void 0:t.name)||"")||/sport/i.test(e.name)}));const selectFavoritesCount=createSelector([selectFavoritesArr],e=>e.length);createSelector([selectFavoritesArr],e=>{const t=new Map;return e.forEach(e=>t.set(e._id,e)),t}),createSelector([selectSettingsData],e=>{if(!e)return"light";const t=(new Date).getHours();return e.forceDarkLogo?"dark":e.forceLightLogo?"light":t>=19||t<6?"dark":"light"}),createSelector([selectAllChannels,selectFavoritesCount,selectAllEvents],(e,t,n)=>({totalChannels:e.length,totalFavorites:t,upcomingEvents:n.filter(e=>new Date(e.startTime)>new Date).length}));const store=configureStore({reducer:{auth:authReducer,favorites:favoritesReducer,ui:uiReducer,[iptvApi.reducerPath]:iptvApi.reducer},middleware:e=>e({serializableCheck:!1}).concat(iptvApi.middleware),devTools:!1}),AuthContext=reactExports.createContext(),useAuth=()=>{const e=reactExports.useContext(AuthContext);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},AuthProvider=({children:e})=>{const t=useDispatch(),{user:n,loading:r,initializing:i,error:s}=useSelector(selectAuth),a=useSelector(selectIsAdmin);reactExports.useEffect(()=>{t(initializeAuth())},[t]);const o=()=>a,l={user:n,loading:r||i,login:async(e,n)=>{const r=await t(loginThunk({identifier:e,password:n}));return loginThunk.rejected.match(r)?{success:!1,message:r.payload||r.error.message}:{success:!0,user:r.payload.user}},register:async e=>{const n=await t(registerThunk(e));return registerThunk.rejected.match(n)?{success:!1,message:n.payload||n.error.message}:{success:!0,user:n.payload.user}},logout:()=>t(logout()),refreshUser:()=>t(refreshUserThunk()),isAdmin:o,requireAdmin:()=>{if(!o())throw new Error("Admin privileges required");return!0},error:s};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:l,children:e})},scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=assetsURL(e))in seen)return;seen[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":scriptRel,t||(i.as="script"),i.crossOrigin="",i.href=e,n&&i.setAttribute("nonce",n),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},SEO_CONFIG={siteName:"BDStream",siteUrl:"https://bdstream.site",siteDescription:"Watch All Bangladeshi TV Channels Live for Free | Live TV BD",defaultImage:"https://bdstream.site/logo.png",twitterHandle:"@bdstreamsite",facebookPage:"https://facebook.com/bdstreamsite",instagramPage:"https://instagram.com/bdstreamsite"},BENGALI_KEYWORDS={liveTV:" ",liveCricket:"  ",banglaNews:" ",somoyTV:" ",gaziTV:" ",liveStreaming:" ",freeTV:" ",bangladeshTV:" "};Object.values(BENGALI_KEYWORDS);const generateVideoObjectSchema=e=>{const t=(new Date).toISOString();return{"@context":"https://schema.org","@type":"VideoObject",name:`Watch ${e.name} Live Streaming`,description:`Watch ${e.name} live online for free. Enjoy ${e.category||"entertainment"} content in high quality HD streaming.`,thumbnailUrl:e.logo||`${SEO_CONFIG.siteUrl}/logo.png`,uploadDate:t,publication:{"@type":"BroadcastEvent",isLiveBroadcast:!0,name:`${e.name} Live Broadcast`,startDate:t,endDate:null},contentUrl:e.stream_url||`${SEO_CONFIG.siteUrl}/live/${e.slug}`,embedUrl:`${SEO_CONFIG.siteUrl}/live/${e.slug}`,duration:"PT0S",interactionStatistic:{"@type":"InteractionCounter",interactionType:"https://schema.org/WatchAction",userInteractionCount:1e3},publisher:{"@type":"Organization",name:SEO_CONFIG.siteName,url:SEO_CONFIG.siteUrl,logo:{"@type":"ImageObject",url:SEO_CONFIG.defaultImage}}}},generateLiveBroadcastSchema=e=>({"@context":"https://schema.org","@type":"BroadcastEvent",name:`${e.title} Live`,description:`Watch ${e.title} live streaming on ${SEO_CONFIG.siteName}. ${e.description||""}`,startDate:e.startTime||(new Date).toISOString(),endDate:e.endTime||null,isLiveBroadcast:!0,inLanguage:"bn",broadcastOfEvent:{"@type":"SportsEvent",name:e.title,description:e.description},broadcastDisplayName:e.title,videoFormat:"HD",broadcastServiceTier:"Free"}),generateWebsiteSchema=()=>({"@context":"https://schema.org","@type":"WebSite",name:SEO_CONFIG.siteName,alternateName:"BDStream",url:SEO_CONFIG.siteUrl,description:SEO_CONFIG.siteDescription,potentialAction:{"@type":"SearchAction",target:`${SEO_CONFIG.siteUrl}/search?q={search_term_string}`,"query-input":"required name=search_term_string"},publisher:{"@type":"Organization",name:SEO_CONFIG.siteName,logo:{"@type":"ImageObject",url:SEO_CONFIG.defaultImage,width:512,height:512},sameAs:[SEO_CONFIG.facebookPage,SEO_CONFIG.instagramPage,`https://twitter.com/${SEO_CONFIG.twitterHandle.replace("@","")}`]},offers:{"@type":"Offer",price:"0",priceCurrency:"BDT",availability:"https://schema.org/InStock"},foundingDate:"2024",areaServed:"BD",serviceType:"Live TV Streaming",category:"Entertainment"}),generateOrganizationSchema=()=>({"@context":"https://schema.org","@type":"Organization",name:SEO_CONFIG.siteName,url:SEO_CONFIG.siteUrl,logo:SEO_CONFIG.defaultImage,description:"Free live TV streaming for premium experience",foundingDate:"2024",contactPoint:{"@type":"ContactPoint",contactType:"customer service",availableLanguage:["English","Bengali"],areaServed:"BD"},sameAs:[SEO_CONFIG.facebookPage,SEO_CONFIG.instagramPage,`https://twitter.com/${SEO_CONFIG.twitterHandle.replace("@","")}`],address:{"@type":"PostalAddress",addressCountry:"BD"},knowsAbout:["Live TV Streaming","Bangladeshi Television","Online Entertainment","Free Streaming Services"]}),generateBreadcrumbSchema=e=>({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:e.map((e,t)=>({"@type":"ListItem",position:t+1,name:e.name,item:e.url}))}),generatePageStructuredData=(e,t={})=>{const n=[];switch(n.push(generateWebsiteSchema()),n.push(generateOrganizationSchema()),e){case"homepage":break;case"channel":n.push(generateVideoObjectSchema(t)),n.push(generateLiveBroadcastSchema(t)),t.category&&n.push(generateBreadcrumbSchema([{name:"Home",url:SEO_CONFIG.siteUrl},{name:t.category,url:`${SEO_CONFIG.siteUrl}/category/${t.category}`},{name:t.name,url:`${SEO_CONFIG.siteUrl}/live/${t.slug}`}]))}return n},renderStructuredData=e=>Array.isArray(e)?e.map((e,t)=>jsxRuntimeExports.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}},t)):jsxRuntimeExports.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}}),generateSlug=e=>e?e.toString().toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""):"",generateChannelUrl=(e,t)=>{if(console.log("Generating channel URL:",{channelId:e,channelName:t}),!e)return console.log("No channel ID provided, returning /channels"),"/channels";const n=generateSlug(t),r=`/channels/play/${e}${n?`/${n}`:""}`;return console.log("Generated URL:",r),r},parseChannelIdFromUrl=e=>{console.log("Parsing channel ID from URL:",e);const t=e.match(/\/channels\/play\/([^\/]+)(?:\/.*)?$/),n=t?t[1]:null;return console.log("Parsed channel ID:",n),n},cleanChannelName=e=>e?e.replace(/[^\w\s-]/g,"").replace(/\s+/g," ").trim():"",generateChannelStructuredData=e=>generatePageStructuredData("channel",e),generateHomepageStructuredData=()=>generatePageStructuredData("homepage"),renderChannelStructuredData=e=>renderStructuredData(generateChannelStructuredData(e)),renderHomepageStructuredData=()=>renderStructuredData(generateHomepageStructuredData());let adminSettings=null;const setAdminSettings=e=>{adminSettings=e},resolveSiteTitle=(e,t="BDStream")=>e?(e.websiteTitle||e.websiteName||e.title||t).toString().trim():t,generateChannelMetaTags=(e,t=null)=>{var n,r,i;const s=t||adminSettings,a=resolveSiteTitle(s),o=((null==s?void 0:s.siteUrl)||SEO_CONFIG.siteUrl).replace(/\/$/,""),l=e.logoUrl||e.logo||(null==s?void 0:s.logoUrl)||SEO_CONFIG.defaultImage,c=cleanChannelName(e.name),u=(null==(n=e.category)?void 0:n.name)||e.category||"",d=e.region||"";let h=null==(r=null==s?void 0:s.metaDescription)?void 0:r.trim();if(!h){const e=null==(i=null==s?void 0:s.defaultMetaDescription)?void 0:i.trim();e&&(h=e)}h||(h=`Watch ${c} live streaming online${u?` in ${u} category`:""}${d?` from ${d}`:""}. ${c} is a high-quality live TV channel with HD streaming. Free online TV, no registration required. Live TV channels, free online streaming, watch television online.`),h=h.replace(/\{channelName\}/g,c);const p=[...(null==s?void 0:s.defaultMetaKeywords)||[],...(null==s?void 0:s.metaKeywords)||[]],m=[c,`${c} Live`,`${c} Live TV`,`${c} Online`,`${c} Streaming`,`${c} Channel`,`${c} TV`,`${c} Live Streaming`,`${c} Free TV`,u,d,"Live TV channels","free online streaming","watch television online","BDStream Live","live TV streaming","watch TV shows online","streaming channels","Live TV","Live Television","Free Streaming","Online TV","HD Streaming","Free Live TV","Watch TV Online","Live TV Channels","BDStream","Bangladesh TV","Free TV Online","Live Sports TV","Live News TV","Live Entertainment TV","Free TV Streaming","Online Television","Live Channel Streaming","Free Live Television","Watch Live TV","Stream TV Online","Live TV App","Free TV App","Live Streaming App"].filter(Boolean),f=`${c} Live TV Channel${u?` | ${u}`:""} | ${a}`;return{title:f,description:h,keywords:[...new Set([...p,...m])].join(", "),ogTitle:f,ogDescription:h,ogImage:l,ogUrl:`${o}/channels/play/${e._id}/${generateSlug(e.name)}`,twitterTitle:f,twitterDescription:h,twitterImage:l,siteTitle:a,siteLogo:l,siteUrl:o}},generateHomepageMetaTags=(e=null)=>{var t,n;const r=e||adminSettings,i=resolveSiteTitle(r),s=((null==r?void 0:r.siteUrl)||SEO_CONFIG.siteUrl).replace(/\/$/,""),a=(null==r?void 0:r.logoUrl)||SEO_CONFIG.defaultImage;let o=null==(t=null==r?void 0:r.metaDescription)?void 0:t.trim();if(!o){const e=null==(n=null==r?void 0:r.defaultMetaDescription)?void 0:n.trim();e&&(o=e)}o||(o="Watch free live TV channels online. Stream Bangladeshi TV channels, sports, news, entertainment, and more. High-quality HD streaming with no registration required. Live TV channels, free online streaming, watch television online, BDStream Live, live TV streaming, watch TV shows online, streaming channels."),o=o.replace(/\{channelName\}/g,i);const l=[...(null==r?void 0:r.defaultMetaKeywords)||[],...(null==r?void 0:r.metaKeywords)||[]],c=`${i} - Free Live TV Streaming | Watch Bangladeshi TV Channels Online`;return{title:c,description:o,keywords:[...new Set([...l,"Live TV channels","free online streaming","watch television online","BDStream Live","live TV streaming","watch TV shows online","streaming channels","Live TV","Free Live TV","Bangladeshi TV Channels","BD Live TV","Live TV Streaming","Free TV Online","Bangladesh TV Live","Watch TV Online","Live Television","Free Streaming","Sports TV","News TV","Entertainment TV","HD Streaming","Online Television","Free TV Channels","Live TV Online","Streaming TV","Bangladesh Television","Free Live Streaming","Live Sports TV","Live News TV","Live Entertainment TV","Free TV Streaming","Online Television","Live Channel Streaming","Free Live Television","Watch Live TV","Stream TV Online","Live TV App","Free TV App","Live Streaming App"])].join(", "),ogTitle:c,ogDescription:o,ogImage:a,ogUrl:s||SEO_CONFIG.siteUrl,twitterTitle:c,twitterDescription:o,twitterImage:a,siteTitle:i,siteLogo:a,siteUrl:s}},generateChannelsPageMetaTags=(e=null)=>{var t,n;const r=e||adminSettings,i=resolveSiteTitle(r),s=((null==r?void 0:r.siteUrl)||SEO_CONFIG.siteUrl).replace(/\/$/,""),a=(null==r?void 0:r.logoUrl)||SEO_CONFIG.defaultImage;let o=null==(t=null==r?void 0:r.metaDescription)?void 0:t.trim();if(!o){const e=null==(n=null==r?void 0:r.defaultMetaDescription)?void 0:n.trim();e&&(o=e)}o||(o="Browse and watch free live TV channels online. Discover Bangladeshi TV channels, sports, news, entertainment, and more. High-quality HD streaming with no registration required. Live TV channels, free online streaming, watch television online, BDStream Live, live TV streaming, watch TV shows online, streaming channels."),o=o.replace(/\{channelName\}/g,i);const l=[...(null==r?void 0:r.defaultMetaKeywords)||[],...(null==r?void 0:r.metaKeywords)||[]],c=`Live TV Channels - Free Streaming | ${i}`;return{title:c,description:o,keywords:[...new Set([...l,"Live TV channels","free online streaming","watch television online","BDStream Live","live TV streaming","watch TV shows online","streaming channels","Live TV","Free Live TV","Bangladeshi TV Channels","BD Live TV","Live TV Streaming","Free TV Online","Bangladesh TV Live","Watch TV Online","Live Television","Free Streaming","Sports TV","News TV","Entertainment TV","HD Streaming","Online Television","Free TV Channels","Live TV Online","Streaming TV","Bangladesh Television","Free Live Streaming","Live Sports TV","Live News TV","Live Entertainment TV","Free TV Streaming","Online Television","Live Channel Streaming","Free Live Television","Watch Live TV","Stream TV Online","Live TV App","Free TV App","Live Streaming App","Browse TV Channels","Channel List","TV Channel Directory"])].join(", "),ogTitle:c,ogDescription:o,ogImage:a,ogUrl:`${s}/channels`,twitterTitle:c,twitterDescription:o,twitterImage:a,siteTitle:i,siteLogo:a,siteUrl:s}},generateEventsPageMetaTags=(e=null)=>{var t,n;const r=e||adminSettings;let i=null==(t=null==r?void 0:r.metaDescription)?void 0:t.trim();if(!i){const e=null==(n=null==r?void 0:r.defaultMetaDescription)?void 0:n.trim();e&&(i=e)}i||(i="Watch upcoming and past live TV events including sports, special broadcasts and shows. Free HD streaming. No registration required.");const s=resolveSiteTitle(r);i=i.replace(/\{channelName\}/g,s);const a=[...(null==r?void 0:r.defaultMetaKeywords)||[],...(null==r?void 0:r.metaKeywords)||[]],o=`${s} Live Events | Upcoming & Past Streaming`;return{title:o,description:i,keywords:[...new Set([...a,"Live TV events","Live sports events","Streaming events","HD live events","BDStream events"])].join(", "),ogTitle:o,ogDescription:i,ogImage:SEO_CONFIG.defaultImage,ogUrl:`${SEO_CONFIG.siteUrl}/events`,twitterTitle:o,twitterDescription:i,twitterImage:SEO_CONFIG.defaultImage}},generateGenericPageMetaTags=(e,t=null)=>{var n,r;const i=t||adminSettings,s=resolveSiteTitle(i),a={about:"About {siteTitle}: Live TV streaming platform offering sports, news, and entertainment channels with HD quality.",contact:"Contact {siteTitle} support team. Get help, ask questions, or provide feedback about our live TV streaming service.",privacy:"Privacy Policy of {siteTitle}. Learn how we collect, use and protect your data while you enjoy live TV streaming.",terms:"Terms of Service for {siteTitle}. Understand the rules and conditions for using our live TV streaming platform.",disclaimer:"Disclaimer for {siteTitle} live TV streaming platform including content, technical and legal limitations.",login:"Login to your {siteTitle} account to access personalized live TV streaming features.",register:"Create a free {siteTitle} account to enjoy personalized live TV streaming experience.",default:"{siteTitle} live TV streaming information page."},o=a[e]||a.default;let l=(null==(n=null==i?void 0:i.metaDescription)?void 0:n.trim())||(null==(r=null==i?void 0:i.defaultMetaDescription)?void 0:r.trim());l?l===(null==i?void 0:i.metaDescription)&&(l=`${l.replace(/\{channelName\}/g,s)} ${o.replace("{siteTitle}",s)}`.slice(0,300)):l=o,l=l.replace(/\{siteTitle\}/g,s);const c=[...(null==i?void 0:i.defaultMetaKeywords)||[],...(null==i?void 0:i.metaKeywords)||[]],u=[...new Set([...c,...["Live TV Streaming","Free Live TV",s],...{about:["about","platform info"],contact:["contact","support"],privacy:["privacy policy","data protection"],terms:["terms of service","user agreement"],disclaimer:["disclaimer","legal"],login:["login","account access"],register:["register","create account"]}[e]||[]])],d={about:`About ${s}`,contact:`Contact ${s}`,privacy:`Privacy Policy | ${s}`,terms:`Terms of Service | ${s}`,disclaimer:`Disclaimer | ${s}`,login:`Login | ${s}`,register:`Register | ${s}`}[e]||`${s}`,h={about:"/about",contact:"/contact",privacy:"/privacy",terms:"/terms",disclaimer:"/disclaimer",login:"/login",register:"/register"}[e]||"/",p=`${((null==i?void 0:i.siteUrl)||SEO_CONFIG.siteUrl).replace(/\/$/,"")}${h}`;return{title:d,description:l,keywords:u.join(", "),ogTitle:d,ogDescription:l,ogImage:SEO_CONFIG.defaultImage,ogUrl:p,twitterTitle:d,twitterDescription:l,twitterImage:SEO_CONFIG.defaultImage}},generateGlobalHeadTags=(e=null)=>{var t,n,r,i,s,a,o,l,c;const u=e||adminSettings;return{googleAnalyticsId:(null==(n=null==(t=null==u?void 0:u.googleAnalyticsId)?void 0:t.trim)?void 0:n.call(t))||(null==(i=null==(r=null==u?void 0:u.googleAnalyticsKey)?void 0:r.trim)?void 0:i.call(r))||"",googleSearchConsoleId:(null==(a=null==(s=null==u?void 0:u.googleSearchConsoleId)?void 0:s.trim)?void 0:a.call(s))||(null==(l=null==(o=null==u?void 0:u.googleSearchConsoleKey)?void 0:o.trim)?void 0:l.call(o))||"",bingWebmasterId:(null==(c=null==u?void 0:u.bingWebmasterId)?void 0:c.trim())||""}},seoUtils=Object.freeze(Object.defineProperty({__proto__:null,cleanChannelName:cleanChannelName,generateChannelMetaTags:generateChannelMetaTags,generateChannelStructuredData:generateChannelStructuredData,generateChannelUrl:generateChannelUrl,generateChannelsPageMetaTags:generateChannelsPageMetaTags,generateEventsPageMetaTags:generateEventsPageMetaTags,generateGenericPageMetaTags:generateGenericPageMetaTags,generateGlobalHeadTags:generateGlobalHeadTags,generateHomepageMetaTags:generateHomepageMetaTags,generateHomepageStructuredData:generateHomepageStructuredData,generateSlug:generateSlug,parseChannelIdFromUrl:parseChannelIdFromUrl,renderChannelStructuredData:renderChannelStructuredData,renderHomepageStructuredData:renderHomepageStructuredData,resolveSiteTitle:resolveSiteTitle,setAdminSettings:setAdminSettings},Symbol.toStringTag,{value:"Module"})),SettingsContext=reactExports.createContext(),useSettings=()=>{const e=reactExports.useContext(SettingsContext);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e},SettingsProvider=({children:e})=>{const t=getConfig(),[n,r]=reactExports.useState(null),[i,s]=reactExports.useState(!0),[a,o]=reactExports.useState(!1),[l,c]=reactExports.useState(null),[u,d]=reactExports.useState(!1),[h,p]=reactExports.useState(null),m=reactExports.useMemo(()=>"undefined"!=typeof window&&window.location.search.includes("debug=settings"),[]),f=reactExports.useCallback(async()=>{var e,t;try{s(!0),o(!1),c(null);const e=await settingsAPI.get();r(e.data),p(Date.now())}catch(n){console.error("Error fetching settings:",n),o(!0),c((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Error loading settings")}finally{s(!1)}},[]);reactExports.useEffect(()=>{f()},[f]),reactExports.useEffect(()=>{n&&(async()=>{try{const{setAdminSettings:e}=await __vitePreload(async()=>{const{setAdminSettings:e}=await Promise.resolve().then(()=>seoUtils);return{setAdminSettings:e}},void 0);e(n)}catch(e){}})()},[n]),reactExports.useEffect(()=>{m&&a&&l&&console.error("[Settings] Load failed",{baseUrl:t.API_BASE_URL,errorRaw:l,location:"undefined"!=typeof window?window.location.href:"n/a"})},[m,a,l,t.API_BASE_URL]);const g=reactExports.useCallback(async e=>{var t,n;try{d(!0);const t=await settingsAPI.update(e);return r(t.data),p(Date.now()),t.data}catch(i){throw new Error((null==(n=null==(t=null==i?void 0:i.response)?void 0:t.data)?void 0:n.message)||"Failed to update settings")}finally{d(!1)}},[]),x=reactExports.useMemo(()=>a?l||"Failed to load settings (unknown error)":null,[a,l]),v={settings:n,siteTitle:resolveSiteTitle(n),loading:i||u,error:x,fetchSettings:f,updateSettings:g,refreshSettings:()=>f(),getLogoUrl:(e=!1)=>{if(!n)return e?"/logo-dark.png":"/logo.png";const t=e&&n.darkLogoUrl||n.logoUrl;if(!t)return e?"/logo-dark.png":"/logo.png";if(t.startsWith("/uploads/")){return`${""}${t}?t=${h}`}return t},lastUpdated:h,isCached:!1,__debug:m?{baseUrl:t.API_BASE_URL,error:l}:void 0};return jsxRuntimeExports.jsx(SettingsContext.Provider,{value:v,children:e})},FavoritesContext=reactExports.createContext(),useFavorites=()=>{const e=reactExports.useContext(FavoritesContext);if(!e)throw new Error("useFavorites must be used within FavoritesProvider");return e},FavoritesProvider=({children:e})=>{const{user:t}=useAuth(),n=useDispatch(),r=useSelector(selectFavorites);reactExports.useEffect(()=>{n(loadFavoritesForUser(t))},[n,t]),reactExports.useEffect(()=>{n(persist(t))},[r,t,n]);const i=reactExports.useCallback(e=>!!e&&r.some(t=>t._id===e||t._id===String(e)||t.id===e),[r]),s=reactExports.useCallback(e=>n(addFavorite(e)),[n]),a=reactExports.useCallback(e=>n(removeFavorite(e)),[n]),o=reactExports.useCallback(e=>n(toggleFavorite(e)),[n]);return jsxRuntimeExports.jsx(FavoritesContext.Provider,{value:{favorites:r,addFavorite:s,removeFavorite:a,toggleFavorite:o,isFavorite:i,loaded:!0},children:e})};var Search={},createSvgIcon={};const require$$0=getAugmentedNamespace(utils$2);var hasRequiredCreateSvgIcon;function requireCreateSvgIcon(){return hasRequiredCreateSvgIcon||(hasRequiredCreateSvgIcon=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=require$$0}(createSvgIcon)),createSvgIcon}var _interopRequireDefault$c=interopRequireDefaultExports;Object.defineProperty(Search,"__esModule",{value:!0});var default_1$c=Search.default=void 0,_createSvgIcon$c=_interopRequireDefault$c(requireCreateSvgIcon()),_jsxRuntime$c=jsxRuntimeExports;default_1$c=Search.default=(0,_createSvgIcon$c.default)((0,_jsxRuntime$c.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var WorkspacePremium={},_interopRequireDefault$b=interopRequireDefaultExports;Object.defineProperty(WorkspacePremium,"__esModule",{value:!0});var default_1$b=WorkspacePremium.default=void 0,_createSvgIcon$b=_interopRequireDefault$b(requireCreateSvgIcon()),_jsxRuntime$b=jsxRuntimeExports;default_1$b=WorkspacePremium.default=(0,_createSvgIcon$b.default)((0,_jsxRuntime$b.jsx)("path",{d:"M9.68 13.69 12 11.93l2.31 1.76-.88-2.85L15.75 9h-2.84L12 6.19 11.09 9H8.25l2.31 1.84zM20 10c0-4.42-3.58-8-8-8s-8 3.58-8 8c0 2.03.76 3.87 2 5.28V23l6-2 6 2v-7.72c1.24-1.41 2-3.25 2-5.28m-8-6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6"}),"WorkspacePremium");var Brightness4={},_interopRequireDefault$a=interopRequireDefaultExports;Object.defineProperty(Brightness4,"__esModule",{value:!0});var default_1$a=Brightness4.default=void 0,_createSvgIcon$a=_interopRequireDefault$a(requireCreateSvgIcon()),_jsxRuntime$a=jsxRuntimeExports;default_1$a=Brightness4.default=(0,_createSvgIcon$a.default)((0,_jsxRuntime$a.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness4");var Brightness7={},_interopRequireDefault$9=interopRequireDefaultExports;Object.defineProperty(Brightness7,"__esModule",{value:!0});var default_1$9=Brightness7.default=void 0,_createSvgIcon$9=_interopRequireDefault$9(requireCreateSvgIcon()),_jsxRuntime$9=jsxRuntimeExports;default_1$9=Brightness7.default=(0,_createSvgIcon$9.default)((0,_jsxRuntime$9.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"Brightness7");const ColorModeContext=reactExports.createContext({mode:"light",setMode:()=>{}}),useColorMode=()=>reactExports.useContext(ColorModeContext);var Star={},_interopRequireDefault$8=interopRequireDefaultExports;Object.defineProperty(Star,"__esModule",{value:!0});var default_1$8=Star.default=void 0,_createSvgIcon$8=_interopRequireDefault$8(requireCreateSvgIcon()),_jsxRuntime$8=jsxRuntimeExports;default_1$8=Star.default=(0,_createSvgIcon$8.default)((0,_jsxRuntime$8.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");const logoConfig={logos:{light:"/logo.png",dark:"/logo-dark.png",fallback:"/logo.png"},transition:{duration:300}},getLogoUrl=e=>logoConfig.logos[e]||logoConfig.logos.fallback,useThemeLogo=e=>{const[t,n]=reactExports.useState(""),[r,i]=reactExports.useState(!1);return reactExports.useEffect(()=>{const r=getLogoUrl(e);r!==t&&(i(!0),setTimeout(()=>{n(r),i(!1)},logoConfig.transition.duration/2))},[e,t]),{logoUrl:t,isTransitioning:r,getLogoUrl:getLogoUrl}},Header=()=>{const{user:e,logout:t,isAdmin:n}=useAuth(),r=useLocation(),{settings:i,getLogoUrl:s}=useSettings(),a=useNavigate(),[o,l]=reactExports.useState(!1);reactExports.useEffect(()=>(o?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),()=>document.body.classList.remove("no-scroll")),[o]),s();const{mode:c,setMode:u}=useColorMode(),{favorites:d}=useFavorites(),[h,p]=reactExports.useState(""),{logoUrl:m,isTransitioning:f}=useThemeLogo(c),g=()=>{const e=(h||"").trim();a(e?`/channels?q=${encodeURIComponent(e)}`:"/channels"),l(!1)},x={padding:"12px 16px",minHeight:"44px",display:"flex",alignItems:"center",position:"relative"},v=e=>(e=>"/"===e?"/"===r.pathname:r.pathname.startsWith(e))(e)?{color:"dark"===c?"#90caf9":"#1976d2",fontWeight:600,background:"dark"===c?"rgba(144, 202, 249, 0.08)":"rgba(25, 118, 210, 0.04)",borderRadius:"8px"}:{};return jsxRuntimeExports.jsxs("header",{className:"glass-nav",children:[o&&jsxRuntimeExports.jsx("div",{className:"mobile-nav-backdrop",onClick:()=>l(!1),"aria-hidden":"true"}),jsxRuntimeExports.jsxs("div",{className:"container-xl nav-inner",style:{height:{xs:"56px",sm:"64px"},padding:{xs:"0 8px",sm:"0 16px"}},children:[jsxRuntimeExports.jsxs("button",{className:"nav-toggle",onClick:()=>l(e=>!e),"aria-label":"Toggle Menu",style:{padding:"8px",minWidth:"44px",minHeight:"44px"},children:[jsxRuntimeExports.jsx("span",{}),jsxRuntimeExports.jsx("span",{}),jsxRuntimeExports.jsx("span",{})]}),jsxRuntimeExports.jsxs(Link,{to:"/",className:"brand",children:[jsxRuntimeExports.jsx("img",{src:m,alt:"Logo",className:"theme-logo "+(f?"logo-transitioning":""),onError:e=>{"/logo.png"!==e.currentTarget.src?e.currentTarget.src="/logo.png":e.currentTarget.style.display="none"},onLoad:()=>{console.log("Theme logo loaded successfully:",m)}}),jsxRuntimeExports.jsx("span",{children:(null==i?void 0:i.websiteName)||(null==i?void 0:i.websiteTitle)||(null==i?void 0:i.title)||"Live TV"})]}),jsxRuntimeExports.jsxs("nav",{className:"nav-links "+(o?"open":""),children:[jsxRuntimeExports.jsx(Link,{to:"/channels",onClick:()=>l(!1),style:{...x,...v("/channels")},children:"Channels"}),e&&jsxRuntimeExports.jsx(Link,{to:"/dashboard",onClick:()=>l(!1),style:{...x,...v("/dashboard")},children:"Dashboard"}),jsxRuntimeExports.jsx(Link,{to:"/favorites",onClick:()=>l(!1),style:{...x,...v("/favorites")},children:jsxRuntimeExports.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[jsxRuntimeExports.jsx(default_1$8,{fontSize:"small",style:{color:d.length?"#ffb300":"var(--text-secondary)"}}),"Favourites"]})}),jsxRuntimeExports.jsx(Link,{to:"/events",onClick:()=>l(!1),style:{...x,...v("/events")},children:"Events"}),jsxRuntimeExports.jsx("div",{className:"nav-search",children:jsxRuntimeExports.jsx(TextField,{value:h,onChange:e=>p(e.target.value),placeholder:"Search channels...",size:"small",fullWidth:!0,sx:{"& .MuiInputBase-root":{height:{xs:"40px",sm:"36px"},fontSize:{xs:"0.875rem",sm:"1rem"}}},InputProps:{endAdornment:jsxRuntimeExports.jsx(InputAdornment,{position:"end",children:jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:g,"aria-label":"Search",sx:{minWidth:{xs:"44px",sm:"32px"},minHeight:{xs:"44px",sm:"32px"}},children:jsxRuntimeExports.jsx(default_1$c,{fontSize:"small"})})})},onKeyDown:e=>{"Enter"===e.key&&g()}})}),jsxRuntimeExports.jsx("button",{className:"icon-btn",title:"Toggle theme",onClick:()=>u("dark"===c?"light":"dark"),style:{minWidth:"44px",minHeight:"44px",padding:"8px"},children:"dark"===c?jsxRuntimeExports.jsx(default_1$9,{fontSize:"small"}):jsxRuntimeExports.jsx(default_1$a,{fontSize:"small"})}),n()&&["admin","superadmin"].includes(null==e?void 0:e.role)&&jsxRuntimeExports.jsx(Link,{to:"/admin",className:"icon-btn",title:"Admin",onClick:()=>l(!1),style:{minWidth:"44px",minHeight:"44px",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx(default_1$b,{fontSize:"small"})}),e?jsxRuntimeExports.jsx("button",{className:"btn-ghost",onClick:()=>{t(),l(!1),a("/")},style:{minHeight:"44px",padding:"12px 16px",fontSize:"0.875rem"},children:"Logout"}):jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[jsxRuntimeExports.jsx(Link,{to:"/login",onClick:()=>l(!1),style:{...x,...v("/login"),fontSize:"0.875rem"},children:"Login"}),jsxRuntimeExports.jsx(Link,{to:"/register",onClick:()=>l(!1),style:{...x,...v("/register"),fontSize:"0.875rem"},children:"Register"})]})]})]})]})},Footer=()=>{const{settings:e}=useSettings(),{isAdmin:t,user:n}=useAuth(),{mode:r}=useColorMode(),{logoUrl:i,isTransitioning:s}=useThemeLogo(r);return jsxRuntimeExports.jsxs("footer",{className:"glass-footer",children:[jsxRuntimeExports.jsxs("div",{className:"container-xl footer-inner",children:[jsxRuntimeExports.jsxs("div",{className:"footer-brand",children:[jsxRuntimeExports.jsx("img",{src:i,alt:"BDStream Logo",className:"footer-logo theme-logo "+(s?"logo-transitioning":""),onError:e=>{"/logo.png"!==e.currentTarget.src?e.currentTarget.src="/logo.png":e.currentTarget.style.display="none"},onLoad:()=>{console.log("Footer logo loaded successfully:",i)}}),jsxRuntimeExports.jsxs("div",{className:"footer-brand-text",children:[jsxRuntimeExports.jsx("h3",{children:"BDStream"}),jsxRuntimeExports.jsx("p",{children:"Your Premier Live TV Streaming Platform"}),jsxRuntimeExports.jsx("p",{className:"footer-domain",children:"bdstream.site"})]})]}),jsxRuntimeExports.jsxs("div",{className:"footer-links",children:[jsxRuntimeExports.jsxs("div",{className:"footer-section",children:[jsxRuntimeExports.jsx("h4",{children:"Quick Links"}),jsxRuntimeExports.jsx(Link,{to:"/channels",children:"Live Channels"}),jsxRuntimeExports.jsx(Link,{to:"/events",children:"Live Events"}),jsxRuntimeExports.jsx(Link,{to:"/about",children:"About Us"})]}),jsxRuntimeExports.jsxs("div",{className:"footer-section",children:[jsxRuntimeExports.jsx("h4",{children:"Legal"}),jsxRuntimeExports.jsx(Link,{to:"/privacy-policy",children:"Privacy Policy"}),jsxRuntimeExports.jsx(Link,{to:"/disclaimer",children:"Disclaimer"}),jsxRuntimeExports.jsx(Link,{to:"/terms",children:"Terms of Service"})]}),jsxRuntimeExports.jsxs("div",{className:"footer-section",children:[jsxRuntimeExports.jsx("h4",{children:"Support"}),jsxRuntimeExports.jsx(Link,{to:"/contact",children:"Contact Us"}),jsxRuntimeExports.jsx(Link,{to:"/faq",children:"FAQ"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"footer-bottom",children:jsxRuntimeExports.jsx("div",{className:"container-xl",children:jsxRuntimeExports.jsxs("p",{children:[" ",(new Date).getFullYear()," BDStream  All rights reserved. | bdstream.site"]})})})]})},fadeIn=keyframes`
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,Overlay=styled("div")(({theme:e})=>({position:"fixed",inset:0,zIndex:1300,display:"flex",alignItems:"center",justifyContent:"center",background:"dark"===e.palette.mode?"rgba(0,0,0,0.5)":"rgba(0,0,0,0.35)",backdropFilter:"blur(6px)",animation:`${fadeIn} 0.35s ease`})),StyledCard=styled(Card)(({theme:e})=>({width:"90%",maxWidth:420,borderRadius:16,background:"dark"===e.palette.mode?"linear-gradient(135deg, rgba(40,40,40,0.92), rgba(22,22,22,0.92))":"linear-gradient(135deg, rgba(255,255,255,0.95), rgba(245,247,250,0.95))",boxShadow:"dark"===e.palette.mode?"0 20px 60px rgba(0,0,0,0.45)":"0 20px 60px rgba(0,0,0,0.20)"})),ThemeHintCard=()=>{const[e,t]=reactExports.useState(!1),n=useLocation();reactExports.useEffect(()=>{const e=localStorage.getItem("theme_hint_shown"),r="/"===n.pathname;!e&&r&&t(!0)},[n.pathname]);const r=()=>{localStorage.setItem("theme_hint_shown","true"),t(!1)};return reactExports.useEffect(()=>{if(!e)return;const t=setTimeout(()=>{r()},1e4);return()=>clearTimeout(t)},[e]),e?jsxRuntimeExports.jsx(Overlay,{children:jsxRuntimeExports.jsx(StyledCard,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",component:"div",sx:{fontWeight:"bold"},children:"Theme Options"}),jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:r,"aria-label":"Close",children:jsxRuntimeExports.jsx(Close,{fontSize:"small"})})]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",sx:{mt:1.5},children:["You can switch between ",jsxRuntimeExports.jsx(WbSunny,{fontSize:"small",sx:{verticalAlign:"middle"}})," Light and ",jsxRuntimeExports.jsx(Brightness2,{fontSize:"small",sx:{verticalAlign:"middle"}})," Dark modes anytime using the theme icon in the header."]}),jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:2},children:"This message will close automatically in 10 seconds."})]})})}):null};var hasElementType="undefined"!=typeof Element,hasMap="function"==typeof Map,hasSet="function"==typeof Set,hasArrayBuffer="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function equal(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,r,i,s;if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!equal(e[r],t[r]))return!1;return!0}if(hasMap&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;for(s=e.entries();!(r=s.next()).done;)if(!equal(r.value[1],t.get(r.value[0])))return!1;return!0}if(hasSet&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(hasElementType&&e instanceof Element)return!1;for(r=n;0!==r--;)if(("_owner"!==i[r]&&"__v"!==i[r]&&"__o"!==i[r]||!e.$$typeof)&&!equal(e[i[r]],t[i[r]]))return!1;return!0}return e!=e&&t!=t}var reactFastCompare=function(e,t){try{return equal(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const fastCompare=getDefaultExportFromCjs$1(reactFastCompare);var invariant=function(e,t,n,r,i,s,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,a,o],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}},browser=invariant;const invariant$1=getDefaultExportFromCjs$1(browser);var shallowequal=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var c=s[l];if(!o(c))return!1;var u=e[c],d=t[c];if(!1===(i=n?n.call(r,u,d,c):void 0)||void 0===i&&u!==d)return!1}return!0};const shallowEqual=getDefaultExportFromCjs$1(shallowequal);var TAG_NAMES=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(TAG_NAMES||{}),SEO_PRIORITY_TAGS={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},VALID_TAG_NAMES=Object.values(TAG_NAMES),REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},HTML_TAG_MAP=Object.entries(REACT_TAG_MAP).reduce((e,[t,n])=>(e[n]=t,e),{}),HELMET_ATTRIBUTE="data-rh",HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},getInnermostProperty=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},getTitleFromPropsList=e=>{let t=getInnermostProperty(e,"title");const n=getInnermostProperty(e,HELMET_PROPS.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,()=>t);const r=getInnermostProperty(e,HELMET_PROPS.DEFAULT_TITLE);return t||r||void 0},getOnChangeClientState=e=>getInnermostProperty(e,HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||(()=>{}),getAttributesFromPropsList=(e,t)=>t.filter(t=>void 0!==t[e]).map(t=>t[e]).reduce((e,t)=>({...e,...t}),{}),getBaseTagFromPropsList=(e,t)=>t.filter(e=>void 0!==e.base).map(e=>e.base).reverse().reduce((t,n)=>{if(!t.length){const r=Object.keys(n);for(let i=0;i<r.length;i+=1){const s=r[i].toLowerCase();if(-1!==e.indexOf(s)&&n[s])return t.concat(n)}}return t},[]),warn=e=>console&&"function"==typeof console.warn&&console.warn(e),getTagsFromPropsList=(e,t,n)=>{const r={};return n.filter(t=>!!Array.isArray(t[e])||(void 0!==t[e]&&warn(`Helmet: ${e} should be of type "Array". Instead found type "${typeof t[e]}"`),!1)).map(t=>t[e]).reverse().reduce((e,n)=>{const i={};n.filter(e=>{let n;const s=Object.keys(e);for(let r=0;r<s.length;r+=1){const i=s[r],a=i.toLowerCase();-1===t.indexOf(a)||"rel"===n&&"canonical"===e[n].toLowerCase()||"rel"===a&&"stylesheet"===e[a].toLowerCase()||(n=a),-1===t.indexOf(i)||"innerHTML"!==i&&"cssText"!==i&&"itemprop"!==i||(n=i)}if(!n||!e[n])return!1;const a=e[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][a]&&(i[n][a]=!0,!0)}).reverse().forEach(t=>e.push(t));const s=Object.keys(i);for(let t=0;t<s.length;t+=1){const e=s[t],n={...r[e],...i[e]};r[e]=n}return e},[]).reverse()},getAnyTrueFromPropsList=(e,t)=>{if(Array.isArray(e)&&e.length)for(let n=0;n<e.length;n+=1){if(e[n][t])return!0}return!1},reducePropsToState=e=>({baseTag:getBaseTagFromPropsList(["href"],e),bodyAttributes:getAttributesFromPropsList("bodyAttributes",e),defer:getInnermostProperty(e,HELMET_PROPS.DEFER),encode:getInnermostProperty(e,HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:getAttributesFromPropsList("htmlAttributes",e),linkTags:getTagsFromPropsList("link",["rel","href"],e),metaTags:getTagsFromPropsList("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:getTagsFromPropsList("noscript",["innerHTML"],e),onChangeClientState:getOnChangeClientState(e),scriptTags:getTagsFromPropsList("script",["src","innerHTML"],e),styleTags:getTagsFromPropsList("style",["cssText"],e),title:getTitleFromPropsList(e),titleAttributes:getAttributesFromPropsList("titleAttributes",e),prioritizeSeoTags:getAnyTrueFromPropsList(e,HELMET_PROPS.PRIORITIZE_SEO_TAGS)}),flattenArray=e=>Array.isArray(e)?e.join(""):e,checkIfPropsMatch=(e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r+=1)if(t[n[r]]&&t[n[r]].includes(e[n[r]]))return!0;return!1},prioritizer=(e,t)=>Array.isArray(e)?e.reduce((e,n)=>(checkIfPropsMatch(n,t)?e.priority.push(n):e.default.push(n),e),{priority:[],default:[]}):{default:e,priority:[]},without=(e,t)=>({...e,[t]:void 0}),SELF_CLOSING_TAGS=["noscript","script","style"],encodeSpecialCharacters=(e,t=!0)=>!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),generateElementAttributesAsString=e=>Object.keys(e).reduce((t,n)=>{const r=void 0!==e[n]?`${n}="${e[n]}"`:`${n}`;return t?`${t} ${r}`:r},""),generateTitleAsString=(e,t,n,r)=>{const i=generateElementAttributesAsString(n),s=flattenArray(t);return i?`<${e} ${HELMET_ATTRIBUTE}="true" ${i}>${encodeSpecialCharacters(s,r)}</${e}>`:`<${e} ${HELMET_ATTRIBUTE}="true">${encodeSpecialCharacters(s,r)}</${e}>`},generateTagsAsString=(e,t,n=!0)=>t.reduce((t,r)=>{const i=r,s=Object.keys(i).filter(e=>!("innerHTML"===e||"cssText"===e)).reduce((e,t)=>{const r=void 0===i[t]?t:`${t}="${encodeSpecialCharacters(i[t],n)}"`;return e?`${e} ${r}`:r},""),a=i.innerHTML||i.cssText||"",o=-1===SELF_CLOSING_TAGS.indexOf(e);return`${t}<${e} ${HELMET_ATTRIBUTE}="true" ${s}${o?"/>":`>${a}</${e}>`}`},""),convertElementAttributesToReactProps=(e,t={})=>Object.keys(e).reduce((t,n)=>(t[REACT_TAG_MAP[n]||n]=e[n],t),t),generateTitleAsReactComponent=(e,t,n)=>{const r=convertElementAttributesToReactProps(n,{key:t,[HELMET_ATTRIBUTE]:!0});return[React$2.createElement("title",r,t)]},generateTagsAsReactComponent=(e,t)=>t.map((t,n)=>{const r={key:n,[HELMET_ATTRIBUTE]:!0};return Object.keys(t).forEach(e=>{const n=REACT_TAG_MAP[e]||e;if("innerHTML"===n||"cssText"===n){const e=t.innerHTML||t.cssText;r.dangerouslySetInnerHTML={__html:e}}else r[n]=t[e]}),React$2.createElement(e,r)}),getMethodsForTag=(e,t,n=!0)=>{switch(e){case"title":return{toComponent:()=>generateTitleAsReactComponent(e,t.title,t.titleAttributes),toString:()=>generateTitleAsString(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>convertElementAttributesToReactProps(t),toString:()=>generateElementAttributesAsString(t)};default:return{toComponent:()=>generateTagsAsReactComponent(e,t),toString:()=>generateTagsAsString(e,t,n)}}},getPriorityMethods=({metaTags:e,linkTags:t,scriptTags:n,encode:r})=>{const i=prioritizer(e,SEO_PRIORITY_TAGS.meta),s=prioritizer(t,SEO_PRIORITY_TAGS.link),a=prioritizer(n,SEO_PRIORITY_TAGS.script);return{priorityMethods:{toComponent:()=>[...generateTagsAsReactComponent("meta",i.priority),...generateTagsAsReactComponent("link",s.priority),...generateTagsAsReactComponent("script",a.priority)],toString:()=>`${getMethodsForTag("meta",i.priority,r)} ${getMethodsForTag("link",s.priority,r)} ${getMethodsForTag("script",a.priority,r)}`},metaTags:i.default,linkTags:s.default,scriptTags:a.default}},mapStateOnServer=e=>{const{baseTag:t,bodyAttributes:n,encode:r=!0,htmlAttributes:i,noscriptTags:s,styleTags:a,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:u,metaTags:d,scriptTags:h}=e,p={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:p,linkTags:u,metaTags:d,scriptTags:h}=getPriorityMethods(e)),{priority:p,base:getMethodsForTag("base",t,r),bodyAttributes:getMethodsForTag("bodyAttributes",n,r),htmlAttributes:getMethodsForTag("htmlAttributes",i,r),link:getMethodsForTag("link",u,r),meta:getMethodsForTag("meta",d,r),noscript:getMethodsForTag("noscript",s,r),script:getMethodsForTag("script",h,r),style:getMethodsForTag("style",a,r),title:getMethodsForTag("title",{title:o,titleAttributes:l},r)}},server_default=mapStateOnServer,instances=[],isDocument=!("undefined"==typeof window||!window.document||!window.document.createElement),HelmetData=class{constructor(e,t){__publicField(this,"instances",[]),__publicField(this,"canUseDOM",isDocument),__publicField(this,"context"),__publicField(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?instances:this.instances,add:e=>{(this.canUseDOM?instances:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?instances:this.instances).indexOf(e);(this.canUseDOM?instances:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=server_default({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},defaultValue={},Context=React$2.createContext(defaultValue),HelmetProvider=(_a=class extends reactExports.Component{constructor(e){super(e),__publicField(this,"helmetData"),this.helmetData=new HelmetData(this.props.context||{},_a.canUseDOM)}render(){return React$2.createElement(Context.Provider,{value:this.helmetData.value},this.props.children)}},__publicField(_a,"canUseDOM",isDocument),_a),updateTags=(e,t)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${e}[${HELMET_ATTRIBUTE}]`),i=[].slice.call(r),s=[];let a;return t&&t.length&&t.forEach(t=>{const n=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)n.innerHTML=t.innerHTML;else if("cssText"===e)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{const r=e,i=void 0===t[r]?"":t[r];n.setAttribute(e,i)}n.setAttribute(HELMET_ATTRIBUTE,"true"),i.some((e,t)=>(a=t,n.isEqualNode(e)))?i.splice(a,1):s.push(n)}),i.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),s.forEach(e=>n.appendChild(e)),{oldTags:i,newTags:s}},updateAttributes=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const r=n.getAttribute(HELMET_ATTRIBUTE),i=r?r.split(","):[],s=[...i],a=Object.keys(t);for(const o of a){const e=t[o]||"";n.getAttribute(o)!==e&&n.setAttribute(o,e),-1===i.indexOf(o)&&i.push(o);const r=s.indexOf(o);-1!==r&&s.splice(r,1)}for(let o=s.length-1;o>=0;o-=1)n.removeAttribute(s[o]);i.length===s.length?n.removeAttribute(HELMET_ATTRIBUTE):n.getAttribute(HELMET_ATTRIBUTE)!==a.join(",")&&n.setAttribute(HELMET_ATTRIBUTE,a.join(","))},updateTitle=(e,t)=>{void 0!==e&&document.title!==e&&(document.title=flattenArray(e)),updateAttributes("title",t)},commitTagChanges=(e,t)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:i,linkTags:s,metaTags:a,noscriptTags:o,onChangeClientState:l,scriptTags:c,styleTags:u,title:d,titleAttributes:h}=e;updateAttributes("body",r),updateAttributes("html",i),updateTitle(d,h);const p={baseTag:updateTags("base",n),linkTags:updateTags("link",s),metaTags:updateTags("meta",a),noscriptTags:updateTags("noscript",o),scriptTags:updateTags("script",c),styleTags:updateTags("style",u)},m={},f={};Object.keys(p).forEach(e=>{const{newTags:t,oldTags:n}=p[e];t.length&&(m[e]=t),n.length&&(f[e]=p[e].oldTags)}),t&&t(),l(e,m,f)},_helmetCallback=null,handleStateChangeOnClient=e=>{_helmetCallback&&cancelAnimationFrame(_helmetCallback),e.defer?_helmetCallback=requestAnimationFrame(()=>{commitTagChanges(e,()=>{_helmetCallback=null})}):(commitTagChanges(e),_helmetCallback=null)},client_default=handleStateChangeOnClient,HelmetDispatcher=class extends reactExports.Component{constructor(){super(...arguments),__publicField(this,"rendered",!1)}shouldComponentUpdate(e){return!shallowEqual(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let n=null;const r=reducePropsToState(e.get().map(e=>{const t={...e.props};return delete t.context,t}));HelmetProvider.canUseDOM?client_default(r):server_default&&(n=server_default(r)),t(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Helmet=(_b=class extends reactExports.Component{shouldComponentUpdate(e){return!fastCompare(without(this.props,"helmetData"),without(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,r){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,n,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach(t=>{n={...n,[t]:e[t]}}),n}warnOnInvalidChildren(e,t){return invariant$1(VALID_TAG_NAMES.some(t=>e.type===t),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${VALID_TAG_NAMES.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),invariant$1(!t||"string"==typeof t||Array.isArray(t)&&!t.some(e=>"string"!=typeof e),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return React$2.Children.forEach(e,e=>{if(!e||!e.props)return;const{children:r,...i}=e.props,s=Object.keys(i).reduce((e,t)=>(e[HTML_TAG_MAP[t]||t]=i[t],e),{});let{type:a}=e;switch("symbol"==typeof a?a=a.toString():this.warnOnInvalidChildren(e,r),a){case"Symbol(react.fragment)":t=this.mapChildrenToProps(r,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(e,n,s,r);break;default:t=this.mapObjectTypeChildren(e,t,s,r)}}),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:r}=t;if(e&&(n=this.mapChildrenToProps(e,n)),r&&!(r instanceof HelmetData)){r=new HelmetData(r.context,!0),delete n.helmetData}return r?React$2.createElement(HelmetDispatcher,{...n,context:r.value}):React$2.createElement(Context.Consumer,null,e=>React$2.createElement(HelmetDispatcher,{...n,context:e}))}},__publicField(_b,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),_b);const useAnalytics=e=>{const t=useLocation(),n=reactExports.useRef(null),{settings:r}=useSettings();reactExports.useEffect(()=>{if(!e||"undefined"==typeof window||!window.gtag)return;const i=t.pathname+t.search;n.current!==i&&(n.current=i,window.gtag("config",e,{page_path:i,page_title:document.title,site_variant:(null==r?void 0:r.websiteTitle)||(null==r?void 0:r.websiteName)||"default"}))},[e,t,r])},useVideoAnalytics=()=>{const{settings:e}=useSettings(),t=(null==e?void 0:e.websiteTitle)||(null==e?void 0:e.websiteName)||"Site",n=(e,n={})=>{"undefined"!=typeof window&&window.gtag&&window.gtag("event",e,{site:t,...n})};return{trackVideoStart:e=>n("video_start",e),trackVideoPause:e=>n("video_pause",e),trackVideoResume:e=>n("video_resume",e),trackVideoEnd:e=>n("video_end",e),trackVideoError:(e,t)=>n("video_error",{...e,error:t}),trackVideoBuffer:e=>n("video_buffer",e)}},useChannelAnalytics=()=>{const{settings:e}=useSettings(),t=(null==e?void 0:e.websiteTitle)||(null==e?void 0:e.websiteName)||"Site",n=(e,n={})=>{"undefined"!=typeof window&&window.gtag&&window.gtag("event",e,{site:t,...n})};return{trackChannelView:(e,t)=>n("channel_view",{channelName:e,category:t}),trackChannelClick:(e,t)=>n("channel_click",{channelName:e,category:t})}},Layout=({children:e})=>{const t=useLocation(),n=t.pathname.startsWith("/admin"),{settings:r}=useSettings(),i=generateGlobalHeadTags(r),s=reactExports.useMemo(()=>{var e;if("undefined"==typeof window)return"";return((null==(e=null==r?void 0:r.siteUrl)?void 0:e.replace(/\/$/,""))||window.location.origin)+t.pathname+t.search},[t,null==r?void 0:r.siteUrl]);useAnalytics(i.googleAnalyticsId);const a="/"===t.pathname;return jsxRuntimeExports.jsxs("div",{className:"site-wrap",children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:(null==r?void 0:r.websiteTitle)||(null==r?void 0:r.websiteName)||"Live TV Streaming"}),s&&jsxRuntimeExports.jsx("link",{rel:"canonical",href:s}),i.googleSearchConsoleId&&jsxRuntimeExports.jsx("meta",{name:"google-site-verification",content:i.googleSearchConsoleId}),i.bingWebmasterId&&jsxRuntimeExports.jsx("meta",{name:"msvalidate.01",content:i.bingWebmasterId}),i.googleAnalyticsId&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("script",{async:!0,src:`https://www.googletagmanager.com/gtag/js?id=${i.googleAnalyticsId}`}),jsxRuntimeExports.jsx("script",{children:`window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', '${i.googleAnalyticsId}', { send_page_view: true });`})]}),a&&renderHomepageStructuredData()]}),jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx("main",{className:"site-main",children:jsxRuntimeExports.jsxs("div",{className:"container-xl",style:{paddingTop:n?"16px":"8px",paddingBottom:n?"16px":"8px"},children:[jsxRuntimeExports.jsx(ThemeHintCard,{}),e]})}),!n&&jsxRuntimeExports.jsx(Footer,{})]})};class ErrorBoundary extends React$2.Component{constructor(e){super(e),__publicField(this,"handleRefresh",()=>{window.location.reload()}),__publicField(this,"handleGoHome",()=>{window.location.href="/"}),__publicField(this,"handleGoBack",()=>{window.history.back()}),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?jsxRuntimeExports.jsx(Container,{maxWidth:"md",sx:{py:4},children:jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:4,textAlign:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",gutterBottom:!0,color:"error",children:"Oops! Something went wrong"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{mb:3,color:"text.secondary"},children:"We encountered an unexpected error. This might be due to a network issue, player loading problem, or temporary server issue."}),jsxRuntimeExports.jsxs(Alert,{severity:"info",sx:{mb:3,textAlign:"left"},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",children:jsxRuntimeExports.jsx("strong",{children:"What you can try:"})}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",component:"ul",sx:{mt:1,mb:0},children:[jsxRuntimeExports.jsx("li",{children:"Refresh the page"}),jsxRuntimeExports.jsx("li",{children:"Check your internet connection"}),jsxRuntimeExports.jsx("li",{children:"Try again in a few moments"}),jsxRuntimeExports.jsx("li",{children:"Go back to the previous page"})]})]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[jsxRuntimeExports.jsx(Button$2,{variant:"contained",startIcon:jsxRuntimeExports.jsx(Refresh,{}),onClick:this.handleRefresh,sx:{minWidth:120},children:"Refresh Page"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",startIcon:jsxRuntimeExports.jsx(ArrowBack,{}),onClick:this.handleGoBack,sx:{minWidth:120},children:"Go Back"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",startIcon:jsxRuntimeExports.jsx(Home$1,{}),onClick:this.handleGoHome,sx:{minWidth:120},children:"Go Home"})]}),!1]})}):this.props.children}}const AdBlocker=({children:e})=>{const t=useLocation().pathname.startsWith("/admin");return reactExports.useEffect(()=>{if(t){document.querySelectorAll('script[src*="googlesyndication"], script[src*="googleadservices"], script[src*="doubleclick"], script[src*="adsystem"], script[src*="adsterra"], script[src*="popads"], script[src*="adclick"], script[src*="profitableratecpm"], script[src*="highperformanceformat"], script[src*="monetag"], script[src*="madurird"]').forEach(e=>e.remove());document.querySelectorAll('iframe[src*="googlesyndication"], iframe[src*="googleadservices"], iframe[src*="doubleclick"], iframe[src*="adsystem"], iframe[src*="adsterra"], iframe[src*="popads"], iframe[src*="adclick"], iframe[src*="profitableratecpm"], iframe[src*="highperformanceformat"], iframe[src*="monetag"], iframe[src*="madurird"]').forEach(e=>e.remove());document.querySelectorAll('div[id*="google_ads"], div[id*="ad-"], div[class*="ad-"], div[id*="ads-"], div[class*="ads-"], div[id*="atOptions"]').forEach(e=>e.remove());document.querySelectorAll('style[data-ad], link[href*="ads"]').forEach(e=>e.remove());document.querySelectorAll('[class*="ad-"], [id*="ad-"], [class*="ads-"], [id*="ads-"]').forEach(e=>e.remove()),console.log("Ad blocker activated for admin route")}},[t]),t?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("meta",{name:"robots",content:"noindex, nofollow"}),jsxRuntimeExports.jsx("meta",{name:"googlebot",content:"noindex, nofollow"}),jsxRuntimeExports.jsx("script",{type:"text/javascript",children:"\n              // Disable ad scripts on admin pages\n              window.adBlockEnabled = true;\n              window.google_ad_client = null;\n              window.google_ad_slot = null;\n              window.google_ad_width = null;\n              window.google_ad_height = null;\n              window.atOptions = null;\n              \n              // Override ad-related functions\n              window.googletag = window.googletag || {};\n              window.googletag.cmd = window.googletag.cmd || [];\n              window.googletag.cmd.push = function() { return; };\n              window.googletag.defineSlot = function() { return null; };\n              window.googletag.enableServices = function() { return; };\n              window.googletag.display = function() { return; };\n              \n              // Block ad-related global functions\n              window._ywthqpjd = function() { return; };\n              window._ktbwwra = function() { return; };\n              \n              // Override any ad-related global variables\n              if (typeof window.atOptions !== 'undefined') {\n                window.atOptions = null;\n              }\n            "})]}),e]}):e},AdBlockerDetector=({children:children})=>{const[isAdBlockerDetected,setIsAdBlockerDetected]=reactExports.useState(!1),[isChecking,setIsChecking]=reactExports.useState(!0),navigate=useNavigate(),location=useLocation();return reactExports.useEffect(()=>{if(location.pathname.startsWith("/admin")||"/adblocker-warning"===location.pathname)return void setIsChecking(!1);const bypassFlag=localStorage.getItem("adblocker_bypass");if("true"===bypassFlag)return void setIsChecking(!1);const detectAdBlocker=async()=>{try{const testAdScript=document.createElement("script");testAdScript.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",testAdScript.async=!0;let adBlockerDetected=!1;const scriptTimeout=setTimeout(()=>{adBlockerDetected=!0},2e3);testAdScript.onload=()=>{clearTimeout(scriptTimeout),adBlockerDetected=!1},testAdScript.onerror=()=>{clearTimeout(scriptTimeout),adBlockerDetected=!0},document.head.appendChild(testAdScript);const adBlockerIndicators=["window.adblock","window.adBlock","window.adblocker","window._adblock","window._adblocker","window.adblockerDetected","window.adBlockerDetected"];for(const indicator of adBlockerIndicators)try{if(eval(indicator)){adBlockerDetected=!0;break}}catch(e2){}const testAdElement=document.createElement("div");testAdElement.className="adsbox",testAdElement.style.position="absolute",testAdElement.style.left="-9999px",testAdElement.style.top="-9999px",testAdElement.innerHTML="&nbsp;",document.body.appendChild(testAdElement),setTimeout(()=>{(0===testAdElement.offsetHeight||0===testAdElement.offsetWidth||"none"===testAdElement.style.display||"hidden"===testAdElement.style.visibility)&&(adBlockerDetected=!0),document.body.removeChild(testAdElement)},100);const testAdImage=new Image;testAdImage.onload=()=>{adBlockerDetected=!1},testAdImage.onerror=()=>{adBlockerDetected=!0},testAdImage.src="https://pagead2.googlesyndication.com/pagead/imgad?id=CICAgKCNjL6R1AEQARgBMgYIABABGAAyBggCEAEYADIGCAQQARgA",setTimeout(()=>{setIsAdBlockerDetected(adBlockerDetected),setIsChecking(!1),adBlockerDetected&&"/adblocker-warning"!==location.pathname&&navigate("/adblocker-warning",{replace:!0})},2500)}catch(error){console.error("Ad blocker detection error:",error),setIsChecking(!1)}};detectAdBlocker()},[navigate,location.pathname]),isChecking||isAdBlockerDetected&&"/adblocker-warning"!==location.pathname?null:children},SecurityProtector=()=>(reactExports.useEffect(()=>{const isTestingMode="true"===localStorage.getItem("security_testing_mode"),disableConsole=()=>{const e=["log","info","warn","error","debug","trace","dir","dirxml","group","groupCollapsed","groupEnd","time","timeEnd","timeLog","profile","profileEnd","count","countReset","clear","table","assert","markTimeline","timeline","timelineEnd"];e.forEach(e=>{console[e]=()=>{}});const t=window.console;window.console=new Proxy(t,{get:function(t,n){return e.includes(n)?()=>{}:t[n]}})},disableDebugger=()=>{window.debugger=()=>{},setInterval(()=>{try{eval("debugger")}catch(e2){}},100)},disableRightClick=()=>{document.addEventListener("contextmenu",e=>(e.preventDefault(),!1))},disableKeyboardShortcuts=()=>{const e=["F12","F5","F11","Ctrl+Shift+I","Ctrl+Shift+J","Ctrl+Shift+C","Ctrl+U","Ctrl+Shift+U","Ctrl+S","Ctrl+P","Ctrl+Shift+P","F1","F2","F3","F4","F6","F7","F8","F9","F10"];document.addEventListener("keydown",t=>{const n=t.key,r=t.ctrlKey,i=t.shiftKey;if(e.some(e=>e.includes("Ctrl+")&&r?e.includes("Shift+")?i&&n===e.split("+")[2]:n===e.split("+")[1]:n===e))return t.preventDefault(),t.stopPropagation(),!1})},disableTextSelection=()=>{document.addEventListener("selectstart",e=>(e.preventDefault(),!1)),document.addEventListener("dragstart",e=>(e.preventDefault(),!1))},disableViewSource=()=>{const e=document.write;document.write=function(...t){const n=(new Error).stack;if(!n||!n.includes("view-source:"))return e.apply(this,t)}},disableNetworkInspection=()=>{const e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,n,...r){const i=n.includes("?")?"&":"?";return n=`${n}${i}${`_t=${Date.now()}_${Math.random()}`}`,e.call(this,t,n,...r)};const t=window.fetch;window.fetch=function(e,n){const r=e.includes("?")?"&":"?";return e=`${e}${r}${`_t=${Date.now()}_${Math.random()}`}`,t.call(this,e,n)}},disablePerformanceMonitoring=()=>{window.performance&&(window.performance.getEntries=()=>[],window.performance.getEntriesByType=()=>[],window.performance.getEntriesByName=()=>[],window.performance.mark=()=>{},window.performance.measure=()=>{},window.performance.clearMarks=()=>{},window.performance.clearMeasures=()=>{})},disableSourceMaps=()=>{document.querySelectorAll("script").forEach(e=>{e.src&&e.src.includes(".map")&&e.remove()})},initSecurity=()=>{disableConsole(),disableDebugger(),disableRightClick(),disableKeyboardShortcuts(),disableTextSelection(),disableViewSource(),disableNetworkInspection(),disablePerformanceMonitoring(),disableSourceMaps()};if(initSecurity(),setInterval(initSecurity,5e3),isTestingMode){console.log(" Security Testing Mode: Active");const e=document.createElement("div");e.style.cssText="\n        position: fixed;\n        top: 10px;\n        right: 10px;\n        background: #ff4444;\n        color: white;\n        padding: 5px 10px;\n        border-radius: 5px;\n        font-size: 12px;\n        z-index: 9999;\n        font-family: Arial, sans-serif;\n      ",e.textContent=" Security Testing Mode",document.body.appendChild(e)}},[]),null),PreloaderContainer=styled$1(({isVisible:e,...t})=>jsxRuntimeExports.jsx(Box,{...t}))(({theme:e,isVisible:t})=>({position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"dark"===e.palette.mode?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999,opacity:t?1:0,visibility:t?"visible":"hidden",transition:"opacity 0.5s ease-in-out, visibility 0.5s ease-in-out",backdropFilter:"blur(10px)"})),TVFrame=styled$1(Box)(({theme:e})=>({position:"relative",width:"200px",height:"120px",border:"4px solid "+("dark"===e.palette.mode?"#4a90e2":"#1976d2"),borderRadius:"15px",backgroundColor:"dark"===e.palette.mode?"#1a1a1a":"#f5f5f5",boxShadow:"dark"===e.palette.mode?"0 0 30px rgba(74, 144, 226, 0.3), inset 0 0 20px rgba(0, 0, 0, 0.5)":"0 0 30px rgba(25, 118, 210, 0.2), inset 0 0 20px rgba(255, 255, 255, 0.8)",overflow:"hidden","&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"180px",height:"100px",backgroundColor:"dark"===e.palette.mode?"#000":"#fff",borderRadius:"8px",border:"2px solid "+("dark"===e.palette.mode?"#333":"#e0e0e0")},"&::after":{content:'""',position:"absolute",bottom:"-20px",left:"50%",transform:"translateX(-50%)",width:"60px",height:"20px",backgroundColor:"dark"===e.palette.mode?"#4a90e2":"#1976d2",borderRadius:"0 0 10px 10px"}})),Screen=styled$1(Box)(({theme:e})=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"160px",height:"90px",backgroundColor:"dark"===e.palette.mode?"#000":"#fff",borderRadius:"4px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"})),SignalBars=styled$1(Box)(({theme:e})=>({display:"flex",alignItems:"flex-end",gap:"3px",height:"30px","& .bar":{width:"4px",backgroundColor:"dark"===e.palette.mode?"#4a90e2":"#1976d2",borderRadius:"2px",animation:"signalPulse 1.5s ease-in-out infinite","&:nth-of-type(1)":{height:"8px",animationDelay:"0s"},"&:nth-of-type(2)":{height:"12px",animationDelay:"0.2s"},"&:nth-of-type(3)":{height:"16px",animationDelay:"0.4s"},"&:nth-of-type(4)":{height:"20px",animationDelay:"0.6s"},"&:nth-of-type(5)":{height:"24px",animationDelay:"0.8s"}},"@keyframes signalPulse":{"0%, 100%":{opacity:.3,transform:"scaleY(0.8)"},"50%":{opacity:1,transform:"scaleY(1)"}}})),LoadingText=styled$1(Box)(({theme:e})=>({marginTop:"30px",fontSize:"18px",fontWeight:600,color:"dark"===e.palette.mode?"#4a90e2":"#1976d2",textAlign:"center",letterSpacing:"1px",animation:"textGlow 2s ease-in-out infinite","@keyframes textGlow":{"0%, 100%":{textShadow:"dark"===e.palette.mode?"0 0 5px rgba(74, 144, 226, 0.5)":"0 0 5px rgba(25, 118, 210, 0.3)"},"50%":{textShadow:"dark"===e.palette.mode?"0 0 20px rgba(74, 144, 226, 0.8)":"0 0 15px rgba(25, 118, 210, 0.6)"}}})),ProgressBar=styled$1(Box)(({theme:e,progress:t})=>({width:"300px",height:"4px",backgroundColor:"dark"===e.palette.mode?"#333":"#e0e0e0",borderRadius:"2px",marginTop:"20px",overflow:"hidden",position:"relative","&::after":{content:'""',position:"absolute",top:0,left:0,height:"100%",width:`${t}%`,background:`linear-gradient(90deg, \n      ${"dark"===e.palette.mode?"#4a90e2":"#1976d2"} 0%, \n      ${"dark"===e.palette.mode?"#64b5f6":"#42a5f5"} 50%, \n      ${"dark"===e.palette.mode?"#4a90e2":"#1976d2"} 100%)`,borderRadius:"2px",transition:"width 0.3s ease-in-out",animation:"progressShimmer 2s ease-in-out infinite"},"@keyframes progressShimmer":{"0%":{backgroundPosition:"-200px 0"},"100%":{backgroundPosition:"calc(200px + 100%) 0"}}})),LoadingDots=styled$1(Box)(({theme:e})=>({display:"flex",gap:"8px",marginTop:"15px","& .dot":{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"dark"===e.palette.mode?"#4a90e2":"#1976d2",animation:"dotPulse 1.4s ease-in-out infinite both","&:nth-of-type(1)":{animationDelay:"0s"},"&:nth-of-type(2)":{animationDelay:"0.2s"},"&:nth-of-type(3)":{animationDelay:"0.4s"}},"@keyframes dotPulse":{"0%, 80%, 100%":{transform:"scale(0.8)",opacity:.5},"40%":{transform:"scale(1)",opacity:1}}})),ChannelInfo=styled$1(Box)(({theme:e})=>({position:"absolute",top:"10px",left:"10px",fontSize:"10px",color:"dark"===e.palette.mode?"#666":"#999",fontFamily:"monospace","& .channel-number":{color:"dark"===e.palette.mode?"#4a90e2":"#1976d2",fontWeight:"bold"}})),Preloader=({isLoading:e=!0,onComplete:t})=>{useTheme();const[n,r]=reactExports.useState(0),[i,s]=reactExports.useState("Initializing..."),[a,o]=reactExports.useState(!0);return reactExports.useEffect(()=>{if(!e)return o(!1),void setTimeout(()=>{null==t||t()},500);const n=[{progress:20,text:"Initializing..."},{progress:40,text:"Loading Channels..."},{progress:60,text:"Connecting to Server..."},{progress:80,text:"Preparing Streams..."},{progress:95,text:"Almost Ready..."},{progress:100,text:"Welcome to IPTV!"}];let i=0;const a=setInterval(()=>{if(i<n.length){const e=n[i];r(e.progress),s(e.text),i++}else clearInterval(a),setTimeout(()=>{o(!1),setTimeout(()=>{null==t||t()},500)},1e3)},800);return()=>clearInterval(a)},[e,t]),a?jsxRuntimeExports.jsxs(PreloaderContainer,{isVisible:a,children:[jsxRuntimeExports.jsxs(TVFrame,{children:[jsxRuntimeExports.jsxs(ChannelInfo,{children:[jsxRuntimeExports.jsx("div",{className:"channel-number",children:"CH 001"}),jsxRuntimeExports.jsx("div",{children:"IPTV LOADING"})]}),jsxRuntimeExports.jsx(Screen,{children:jsxRuntimeExports.jsxs(SignalBars,{children:[jsxRuntimeExports.jsx("div",{className:"bar"}),jsxRuntimeExports.jsx("div",{className:"bar"}),jsxRuntimeExports.jsx("div",{className:"bar"}),jsxRuntimeExports.jsx("div",{className:"bar"}),jsxRuntimeExports.jsx("div",{className:"bar"})]})})]}),jsxRuntimeExports.jsx(LoadingText,{children:i}),jsxRuntimeExports.jsx(ProgressBar,{progress:n}),jsxRuntimeExports.jsxs(LoadingDots,{children:[jsxRuntimeExports.jsx("div",{className:"dot"}),jsxRuntimeExports.jsx("div",{className:"dot"}),jsxRuntimeExports.jsx("div",{className:"dot"})]})]}):null};var LiveTv={},_interopRequireDefault$7=interopRequireDefaultExports;Object.defineProperty(LiveTv,"__esModule",{value:!0});var default_1$7=LiveTv.default=void 0,_createSvgIcon$7=_interopRequireDefault$7(requireCreateSvgIcon()),_jsxRuntime$7=jsxRuntimeExports;default_1$7=LiveTv.default=(0,_createSvgIcon$7.default)((0,_jsxRuntime$7.jsx)("path",{d:"M21 6h-7.59l3.29-3.29L16 2l-4 4-4-4-.71.71L10.59 6H3c-1.1 0-2 .89-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.11-.9-2-2-2m0 14H3V8h18zM9 10v8l7-4z"}),"LiveTv");var Whatshot={},_interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(Whatshot,"__esModule",{value:!0});var default_1$6=Whatshot.default=void 0,_createSvgIcon$6=_interopRequireDefault$6(requireCreateSvgIcon()),_jsxRuntime$6=jsxRuntimeExports;default_1$6=Whatshot.default=(0,_createSvgIcon$6.default)((0,_jsxRuntime$6.jsx)("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67M11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8"}),"Whatshot");var Favorite={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(Favorite,"__esModule",{value:!0});var default_1$5=Favorite.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$5=Favorite.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite");var Event$1={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(Event$1,"__esModule",{value:!0});var default_1$4=Event$1.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$4=Event$1.default=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"M17 12h-5v5h5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1zm3 18H5V8h14z"}),"Event");var ArrowForward={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(ArrowForward,"__esModule",{value:!0});var default_1$3=ArrowForward.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=ArrowForward.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");const HeroLanding=({siteTitle:e="Streaming Portal",tagline:t="Watch live channels, events & sports  instantly",categories:n=[],channelsCount:r=0,eventsCount:i=0,favouritesCount:s=0,popularCount:a=0})=>{const o=useTheme(),l=useMediaQuery("(prefers-reduced-motion: reduce)"),c=useNavigate(),[u,d]=reactExports.useState(""),h=reactExports.useCallback(()=>{const e=u.trim();c(e?`/channels?q=${encodeURIComponent(e)}`:"/channels")},[u,c]),p=n.slice(0,6);return jsxRuntimeExports.jsxs(Box,{className:"fade-in hero-root",sx:{position:"relative",pt:{xs:8,md:12},pb:{xs:8,md:14},overflow:"hidden",transition:"background-color 420ms var(--ds-transition-medium), color 420ms var(--ds-transition-medium)","&:before":{content:'""',position:"absolute",inset:0,background:"dark"===o.palette.mode?"radial-gradient(circle at 20% 35%, rgba(124,77,255,0.18), transparent 55%), radial-gradient(circle at 80% 40%, rgba(0,188,212,0.18), transparent 55%)":"radial-gradient(circle at 15% 30%, rgba(0,188,212,0.12), transparent 55%), radial-gradient(circle at 85% 35%, rgba(124,77,255,0.12), transparent 55%)",opacity:1,pointerEvents:"none",transition:"opacity 600ms ease"},"&:after":{content:'""',position:"absolute",inset:0,background:"dark"===o.palette.mode?"linear-gradient(180deg, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0) 60%)":"linear-gradient(180deg, rgba(255,255,255,0.65) 0%, rgba(255,255,255,0) 55%)",pointerEvents:"none"}},children:[jsxRuntimeExports.jsxs(Box,{"aria-hidden":"true",sx:{position:"absolute",inset:0,pointerEvents:"none"},children:[!l&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Box,{className:"hero-animated-layer",sx:{position:"absolute",inset:0,mixBlendMode:"dark"===o.palette.mode?"screen":"multiply",background:`radial-gradient(circle at 18% 32%, ${alpha(o.palette.primary.main,"dark"===o.palette.mode?.28:.2)} 0%, transparent 55%)`}}),jsxRuntimeExports.jsx(Box,{className:"hero-animated-layer alt",sx:{position:"absolute",inset:0,mixBlendMode:"dark"===o.palette.mode?"screen":"multiply",background:`radial-gradient(circle at 82% 42%, ${alpha(o.palette.secondary.main,"dark"===o.palette.mode?.28:.2)} 0%, transparent 55%)`}})]}),jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",inset:0,background:"dark"===o.palette.mode?"repeating-linear-gradient(135deg, rgba(255,255,255,0.04) 0 2px, transparent 2px 6px)":"repeating-linear-gradient(135deg, rgba(0,0,0,0.045) 0 2px, transparent 2px 6px)",opacity:"dark"===o.palette.mode?.25:.15,mixBlendMode:"dark"===o.palette.mode?"overlay":"multiply",transition:"opacity 420ms ease"}}),jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",inset:0,backgroundImage:"url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/></filter><rect width='160' height='160' filter='url(%23n)' opacity='0.18'/></svg>\")",backgroundSize:"200px 200px",mixBlendMode:"dark"===o.palette.mode?"overlay":"multiply",opacity:"dark"===o.palette.mode?.2:.1,pointerEvents:"none"}})]}),jsxRuntimeExports.jsxs(Stack,{spacing:4,sx:{position:"relative",zIndex:1,px:{xs:2,md:4},maxWidth:1200,mx:"auto"},children:[jsxRuntimeExports.jsxs(Stack,{spacing:2,children:[jsxRuntimeExports.jsx(Typography,{variant:"h1",sx:{fontSize:{xs:"2.25rem",md:"3.25rem"},background:"var(--accent-gradient)",WebkitBackgroundClip:"text",color:"transparent",letterSpacing:".5px"},children:e}),jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{maxWidth:780,color:"text.secondary",fontWeight:500},children:t})]}),jsxRuntimeExports.jsxs(Stack,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:{sm:"center"},children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,placeholder:"Search channels or events...",value:u,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&h()},size:"medium",InputProps:{startAdornment:jsxRuntimeExports.jsx(default_1$c,{fontSize:"small",sx:{mr:1,opacity:.65}})}}),jsxRuntimeExports.jsx(Button$2,{onClick:h,variant:"contained",color:"primary",endIcon:jsxRuntimeExports.jsx(default_1$3,{}),sx:{px:4,py:1.5,fontSize:"1rem"},children:"Search"})]}),p.length>0&&jsxRuntimeExports.jsx(Stack,{direction:"row",spacing:1.5,flexWrap:"wrap",rowGap:1.5,children:p.map(e=>jsxRuntimeExports.jsx(Chip,{label:e.name,onClick:()=>c(`/channels?category=${encodeURIComponent(e.slug||e.name)}`),className:"scale-hover",sx:{background:"rgba(255,255,255,0.08)",backdropFilter:"blur(10px)",border:"1px solid var(--glass-border)",color:"var(--text-primary)",fontWeight:500}},e._id||e.name))}),jsxRuntimeExports.jsxs(Stack,{direction:{xs:"column",sm:"row"},spacing:3,flexWrap:"wrap",rowGap:2,children:[jsxRuntimeExports.jsx(StatPill,{icon:jsxRuntimeExports.jsx(default_1$7,{fontSize:"small"}),label:"Channels",value:r}),jsxRuntimeExports.jsx(StatPill,{icon:jsxRuntimeExports.jsx(default_1$4,{fontSize:"small"}),label:"Events",value:i}),jsxRuntimeExports.jsx(StatPill,{icon:jsxRuntimeExports.jsx(default_1$6,{fontSize:"small"}),label:"Popular",value:a}),jsxRuntimeExports.jsx(StatPill,{icon:jsxRuntimeExports.jsx(default_1$5,{fontSize:"small"}),label:"Favourites",value:s})]}),jsxRuntimeExports.jsxs(Stack,{direction:{xs:"column",sm:"row"},spacing:2,children:[jsxRuntimeExports.jsx(Button$2,{variant:"contained",size:"large",startIcon:jsxRuntimeExports.jsx(default_1$7,{}),onClick:()=>c("/channels"),sx:{minWidth:200,transition:"background 400ms ease, transform 240ms var(--ds-transition-medium)","&:hover":{transform:"translateY(-2px)"}},children:"Browse Channels"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"large",startIcon:jsxRuntimeExports.jsx(default_1$4,{}),onClick:()=>c("/events"),sx:{minWidth:200,backdropFilter:"blur(10px)",transition:"border-color 400ms ease, color 400ms ease, background-color 400ms ease, transform 240ms var(--ds-transition-medium)","&:hover":{transform:"translateY(-2px)",backgroundColor:"dark"===o.palette.mode?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.04)"}},children:"Live Events"})]})]})]})},StatPill=({icon:e,label:t,value:n})=>jsxRuntimeExports.jsxs(Box,{className:"glow-border hover-lift",sx:e=>({position:"relative",px:2.5,py:1.25,borderRadius:999,display:"flex",alignItems:"center",gap:1,fontSize:".85rem",background:"dark"===e.palette.mode?"linear-gradient(135deg, rgba(255,255,255,0.14) 0%, rgba(255,255,255,0.04) 100%)":"linear-gradient(135deg, rgba(0,0,0,0.06) 0%, rgba(0,0,0,0.02) 100%)",border:"dark"===e.palette.mode?"1px solid rgba(255,255,255,0.15)":"1px solid rgba(0,0,0,0.12)",backdropFilter:"blur(10px) saturate(150%)",transition:"background 400ms ease, border-color 400ms ease","& svg":{color:"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,filter:"dark"===e.palette.mode?"drop-shadow(0 2px 4px rgba(0,0,0,0.6))":"none"}}),children:[e,jsxRuntimeExports.jsx(Typography,{component:"span",sx:{fontWeight:600},children:n}),jsxRuntimeExports.jsx(Typography,{component:"span",sx:{opacity:.7},children:t})]});styled$1(Button$2)(({theme:e})=>({"--btn-grad":"dark"===e.palette.mode?"linear-gradient(135deg, var(--cyan) 0%, var(--violet) 100%)":"linear-gradient(135deg, #00bcd4 0%, #7c4dff 100%)",backgroundImage:"var(--btn-grad)",backgroundSize:"140% 140%",backgroundPosition:"0% 50%",color:"#fff",border:0,boxShadow:"0 8px 24px -6px rgba(0,188,212,0.45), 0 4px 12px -4px rgba(124,77,255,0.4)",textTransform:"none",fontWeight:600,letterSpacing:".4px",position:"relative",overflow:"hidden",transition:"background-position 1400ms ease, filter 160ms ease, transform 160ms ease, box-shadow 240ms ease","&:before":{content:'""',position:"absolute",inset:0,background:"linear-gradient(120deg, rgba(255,255,255,0.35), rgba(255,255,255,0))",mixBlendMode:"overlay",opacity:0,transition:"opacity 400ms ease"},"&:after":{content:'""',position:"absolute",top:0,left:"-120%",width:"120%",height:"100%",background:"linear-gradient(120deg, transparent 0%, rgba(255,255,255,0.55) 50%, transparent 100%)",transform:"skewX(-20deg)",opacity:0},"&:hover":{filter:"brightness(1.07)",transform:"translateY(-2px)",backgroundPosition:"100% 50%",boxShadow:"0 12px 32px -6px rgba(0,188,212,0.55), 0 6px 16px -4px rgba(124,77,255,0.45)","&:before":{opacity:1},"&:after":{animation:"btn-sheen 950ms ease"}},"&:active":{transform:"translateY(0) scale(.97)"},"&:focus-visible":{boxShadow:"var(--ds-focus-ring)"},"@media (prefers-reduced-motion: reduce)":{transition:"filter 160ms ease, transform 160ms ease",backgroundSize:"100% 100%","&:hover":{backgroundPosition:"0% 50%"},"&:after":{display:"none"}},"@keyframes btn-sheen":{"0%":{left:"-120%",opacity:0},"15%":{opacity:1},"50%":{left:"0%",opacity:.9},"100%":{left:"120%",opacity:0}}})),styled$1(Card)(({theme:e})=>({position:"relative",borderRadius:24,background:"dark"===e.palette.mode?"linear-gradient(165deg, rgba(255,255,255,0.10) 0%, rgba(255,255,255,0.04) 100%)":"linear-gradient(165deg, rgba(0,0,0,0.04) 0%, rgba(0,0,0,0.02) 100%)",border:"dark"===e.palette.mode?"1px solid rgba(255,255,255,0.15)":"1px solid rgba(0,0,0,0.08)",backdropFilter:"blur(14px) saturate(150%)",boxShadow:"0 16px 40px -14px rgba(0,0,0,0.55), 0 4px 16px -6px rgba(0,0,0,0.35)",display:"flex",flexDirection:"column",overflow:"hidden",transition:"transform 420ms cubic-bezier(.25,.65,.3,1), border-color 300ms, box-shadow 300ms, background 600ms ease",isolation:"isolate",".card-glow":{position:"absolute",inset:0,pointerEvents:"none",background:"radial-gradient(circle at 30% 20%, rgba(255,255,255,0.3), transparent 60%), radial-gradient(circle at 70% 80%, rgba(255,255,255,0.18), transparent 70%)",opacity:0,transition:"opacity 500ms ease",mixBlendMode:"overlay"},"&:hover":{transform:"translateY(-6px) scale(1.02)",borderColor:"dark"===e.palette.mode?"rgba(255,255,255,0.35)":"rgba(0,0,0,0.25)",boxShadow:"dark"===e.palette.mode?"0 22px 60px -14px rgba(0,0,0,0.65), 0 6px 20px -6px rgba(0,0,0,0.45)":"0 18px 48px -12px rgba(0,0,0,0.25), 0 4px 14px -4px rgba(0,0,0,0.18)",".card-glow":{opacity:.9}},"&:active":{transform:"translateY(-2px) scale(1.005)"},"@media (prefers-reduced-motion: reduce)":{transition:"border-color 300ms, box-shadow 300ms","&:hover":{transform:"none"},"&:active":{transform:"none"}}})),styled$1("span")(({theme:e,gradient:t})=>({width:46,height:6,borderRadius:6,display:"inline-block",background:t||("dark"===e.palette.mode?"linear-gradient(135deg, var(--cyan), var(--violet))":"linear-gradient(135deg, #00bcd4, #7c4dff)"),boxShadow:"0 4px 14px -2px rgba(0,188,212,0.6)",marginBottom:16})),styled$1(Box)(({theme:e})=>({position:"relative",paddingTop:8,paddingBottom:32,"@media (min-width: 900px)":{paddingBottom:40}})),styled$1("div")(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",gap:16,marginBottom:16}));const usePremiumAccess=()=>{const{user:e}=useAuth(),[t,n]=reactExports.useState([]),[r,i]=reactExports.useState(!1);reactExports.useEffect(()=>{e&&s()},[e]);const s=async()=>{try{i(!0);const e=await userPackagesAPI.getMyPackages({status:"active"});n(e.data||[])}catch(e){console.error("Failed to fetch user packages:",e),n([])}finally{i(!1)}};return{userPackages:t,loading:r,checkChannelAccess:async t=>{if(!e||!t)return{hasAccess:!1,reason:"Not authenticated"};try{return(await userPackagesAPI.checkAccess({channelId:t})).data}catch(n){return console.error("Failed to check channel access:",n),{hasAccess:!1,reason:"Access check failed"}}},checkCategoryAccess:async t=>{if(!e||!t)return{hasAccess:!1,reason:"Not authenticated"};try{return(await userPackagesAPI.checkAccess({categoryId:t})).data}catch(n){return console.error("Failed to check category access:",n),{hasAccess:!1,reason:"Access check failed"}}},checkRegionAccess:async t=>{if(!e||!t)return{hasAccess:!1,reason:"Not authenticated"};try{return(await userPackagesAPI.checkAccess({regionId:t})).data}catch(n){return console.error("Failed to check region access:",n),{hasAccess:!1,reason:"Access check failed"}}},hasAnyActivePackage:()=>t.length>0,getActivePackages:()=>t.map(e=>e.package),refreshPackages:s}},premiumContentCache=new Map,CACHE_EXPIRY=3e5,isPremiumContent=async(e,t="channel")=>{if(!e)return!1;const n=`${t}_${e}`,r=premiumContentCache.get(n);if(r&&Date.now()-r.timestamp<CACHE_EXPIRY)return r.isPremium;try{const r=await packagesAPI.getAll({populate:!0}),i=(r.data||[]).some(n=>{switch(t){case"channel":return n.channels&&n.channels.some(t=>("string"==typeof t?t:t._id)===e);case"category":return n.categories&&n.categories.some(t=>("string"==typeof t?t:t._id)===e);case"region":return n.regions&&n.regions.some(t=>("string"==typeof t?t:t._id)===e);default:return!1}});return premiumContentCache.set(n,{isPremium:i,timestamp:Date.now()}),i}catch(i){return console.error("Failed to check if content is premium:",i),!1}},bulkCheckPremiumChannels=async e=>{if(!e||0===e.length)return new Map;try{const t=(await packagesAPI.getAll({populate:!0})).data||[],n=new Map;return e.forEach(e=>{const r=t.some(t=>t.channels&&t.channels.some(t=>("string"==typeof t?t:t._id)===e._id));n.set(e._id,r)}),n}catch(t){return console.error("Failed to bulk check premium channels:",t),new Map}},isContentPremium=async(e,t)=>{try{return await isPremiumContent(t,e)}catch(n){return console.error(`Error checking premium status for ${e} ${t}:`,n),!1}},PremiumBadge=({isPremium:e=!1,variant:t="chip",size:n="small",sx:r={},showTooltip:i=!0})=>{if(!e)return null;const s=()=>({label:"Premium",icon:jsxRuntimeExports.jsx(Star$1,{sx:{fontSize:"16px"}}),size:n,sx:{backgroundColor:"#FFD700",color:"#000",fontWeight:"bold",fontSize:"small"===n?"0.75rem":"0.875rem","& .MuiChip-icon":{color:"#000"},...r}}),a=(()=>{switch(t){case"chip":default:return jsxRuntimeExports.jsx(Chip,{...s()});case"icon":return jsxRuntimeExports.jsx(Star$1,{sx:{color:"#FFD700",fontSize:"small"===n?"18px":"medium"===n?"24px":"32px",...r}});case"overlay":return jsxRuntimeExports.jsxs("div",{sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(255, 215, 0, 0.9)",color:"#000",borderRadius:"4px",padding:"2px 6px",fontSize:"0.75rem",fontWeight:"bold",display:"flex",alignItems:"center",gap:.5,zIndex:1,...r},children:[jsxRuntimeExports.jsx(Lock,{sx:{fontSize:"12px"}}),"Premium"]})}})();return i&&"overlay"!==t?jsxRuntimeExports.jsx(Tooltip,{title:"Premium Content - Subscription Required",arrow:!0,children:a}):a},AdViewer=({open:e,onClose:t,ad:n,packageId:r,onSuccess:i,onError:s})=>{const[a,o]=reactExports.useState(null),[l,c]=reactExports.useState(0),[u,d]=reactExports.useState(!1),[h,p]=reactExports.useState(!1),[m,f]=reactExports.useState(""),[g,x]=reactExports.useState(!1),v=(null==n?void 0:n.minimumViewTime)||30;reactExports.useEffect(()=>{let e;return u&&a&&!a.closed&&(e=setInterval(()=>{c(e=>{const t=e+1;return t>=v&&!h&&(p(!0),y(t)),t})},1e3)),()=>{e&&clearInterval(e)}},[u,a,v,h]),reactExports.useEffect(()=>{let e;return a&&u&&(e=setInterval(()=>{a.closed&&l<v&&(d(!1),f("Ad was closed before minimum view time was reached"),o(null))},1e3)),()=>{e&&clearInterval(e)}},[a,u,l,v]);const y=reactExports.useCallback(async(e=l)=>{var o,c;if(!g&&n&&r)try{x(!0),console.log(" Tracking complete with view time:",e),await adsAPI.trackView(n._id,{viewDuration:e}),await userPackagesAPI.unlockWithAds({packageId:r,adId:n._id,viewDuration:e}),i&&i(),a&&!a.closed&&a.close(),t()}catch(u){const e=(null==(c=null==(o=u.response)?void 0:o.data)?void 0:c.message)||u.message||"Failed to unlock package";f(e),s&&s(e)}finally{x(!1)}},[n,r,a,i,s,t,g]),_=()=>{d(!1),a&&!a.closed&&a.close(),o(null),c(0),p(!1)},E=()=>{_(),t()},b=Math.min(l/v*100,100),C=Math.max(v-l,0);return n?jsxRuntimeExports.jsxs(Dialog,{open:e,onClose:E,maxWidth:"sm",fullWidth:!0,children:[jsxRuntimeExports.jsxs(DialogTitle,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",children:"Watch Advertisement"}),jsxRuntimeExports.jsx(IconButton,{onClick:E,size:"small",children:jsxRuntimeExports.jsx(Close,{})})]}),jsxRuntimeExports.jsxs(DialogContent,{children:[m&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},onClose:()=>f(""),children:m}),jsxRuntimeExports.jsx(Card,{sx:{mb:3},children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:2,mb:2,children:[n.imageUrl&&jsxRuntimeExports.jsx(Avatar,{src:n.imageUrl,alt:n.title,sx:{width:60,height:60},variant:"rounded"}),jsxRuntimeExports.jsxs(Box,{flexGrow:1,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",fontWeight:"bold",children:n.title}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:n.description})]})]}),jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,flexWrap:"wrap",children:[jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(Timer,{}),label:`${v}s minimum`,size:"small",color:"primary"}),n.tags.map((e,t)=>jsxRuntimeExports.jsx(Chip,{label:e,size:"small",variant:"outlined"},t))]})]})}),jsxRuntimeExports.jsx(Card,{sx:{mb:3},children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Viewing Progress"}),!u&&!h&&jsxRuntimeExports.jsx(Alert,{severity:"info",sx:{mb:2},children:'Click "Start Watching" to open the advertisement and begin tracking your view time.'}),u&&jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[jsxRuntimeExports.jsxs(Typography,{variant:"body2",children:["Time viewed: ",l,"s / ",v,"s"]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:C>0?"text.secondary":"success.main",children:C>0?`${C}s remaining`:"Complete!"})]}),jsxRuntimeExports.jsx(LinearProgress,{variant:"determinate",value:b,color:h?"success":"primary",sx:{height:8,borderRadius:4,mb:2}}),jsxRuntimeExports.jsx(Alert,{severity:h?"success":"warning",icon:h?jsxRuntimeExports.jsx(CheckCircle,{}):jsxRuntimeExports.jsx(Warning,{}),children:h?g?"Processing your unlock...":"View time complete! Processing unlock...":"Keep the ad window open until the timer completes"})]}),h&&!g&&jsxRuntimeExports.jsxs(Alert,{severity:"success",sx:{mt:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",fontWeight:"bold",children:"Package unlocked successfully!"}),jsxRuntimeExports.jsx(Typography,{variant:"caption",children:"You can now access premium content."})]})]})}),jsxRuntimeExports.jsxs(Alert,{severity:"info",children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",fontWeight:"bold",gutterBottom:!0,children:"How it works:"}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",component:"div",children:['1. Click "Start Watching" to open the advertisement',jsxRuntimeExports.jsx("br",{}),"2. Keep the ad window open for at least ",v," seconds",jsxRuntimeExports.jsx("br",{}),"3. Your package will be automatically unlocked when complete"]})]})]}),jsxRuntimeExports.jsxs(DialogActions,{sx:{p:3,gap:1},children:[jsxRuntimeExports.jsx(Button$2,{onClick:E,disabled:g,color:"inherit",children:"Cancel"}),!u&&!h&&jsxRuntimeExports.jsx(Button$2,{variant:"contained",startIcon:jsxRuntimeExports.jsx(PlayArrow,{}),onClick:()=>{if(n){f(""),c(0),p(!1);try{const e=window.open(n.adUrl,"_blank","width=1024,height=768,scrollbars=yes,resizable=yes");e?(o(e),d(!0),e.focus()):f("Failed to open ad. Please allow popups for this site.")}catch(e){f("Failed to open advertisement")}}},color:"primary",children:"Start Watching"}),u&&!h&&jsxRuntimeExports.jsx(Button$2,{variant:"outlined",startIcon:jsxRuntimeExports.jsx(Stop,{}),onClick:_,color:"error",children:"Stop Viewing"}),h&&jsxRuntimeExports.jsx(Button$2,{variant:"contained",disabled:g,startIcon:g?jsxRuntimeExports.jsx(CircularProgress,{size:16}):jsxRuntimeExports.jsx(CheckCircle,{}),color:"success",children:g?"Processing...":"Complete!"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",startIcon:jsxRuntimeExports.jsx(OpenInNew,{}),onClick:()=>window.open(n.adUrl,"_blank"),disabled:g,size:"small",children:"Open Ad Directly"})]})]}):null};function TabPanel({children:e,value:t,index:n,...r}){return jsxRuntimeExports.jsx("div",{role:"tabpanel",hidden:t!==n,id:`purchase-tabpanel-${n}`,"aria-labelledby":`purchase-tab-${n}`,...r,children:t===n&&jsxRuntimeExports.jsx(Box,{sx:{pt:2},children:e})})}const PurchasePackage=({open:e,onClose:t,redirectToChannel:n=null,onUnlockSuccess:r=null})=>{const{user:i,refreshUser:s}=useAuth(),a=useNavigate(),[o,l]=reactExports.useState([]),[c,u]=reactExports.useState([]),[d,h]=reactExports.useState(!0),[p,m]=reactExports.useState(!1),[f,g]=reactExports.useState(0),[x,v]=reactExports.useState(""),[y,_]=reactExports.useState(""),[E,b]=reactExports.useState(!1),[C,S]=reactExports.useState(null),[T,R]=reactExports.useState(null);reactExports.useEffect(()=>{e&&j()},[e]);const j=async()=>{var e,t;try{h(!0);const[e,t]=await Promise.all([userPackagesAPI.getAvailable(),adsAPI.getAvailable()]);l(e.data||[]),u(t.data||[])}catch(n){v((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to load packages")}finally{h(!1)}},w=()=>{b(!1),s(),r&&r(),n?(t(),a(`/channels/${n}`)):(_("Package unlocked successfully!"),setTimeout(()=>{_(""),t()},2e3))},A=(e,t=!1)=>jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative"},children:[e.isOwned&&jsxRuntimeExports.jsx(Chip,{label:"Owned",color:"success",size:"small",sx:{position:"absolute",top:8,right:8,zIndex:1}}),jsxRuntimeExports.jsxs(CardContent,{sx:{flexGrow:1,pb:1},children:[jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",fontWeight:"bold",children:e.name}),jsxRuntimeExports.jsx(Chip,{label:e.packageType,color:"primary",variant:"outlined",size:"small"})]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:e.description}),jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:2,my:2,children:[jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(AttachMoney,{fontSize:"small",color:"primary"}),jsxRuntimeExports.jsxs(Typography,{variant:"h5",color:"primary.main",fontWeight:700,children:["",e.price]})]}),jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(Schedule,{fontSize:"small"}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",children:[e.duration," ",e.durationUnit||"days"]})]})]}),jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,mb:2,flexWrap:"wrap",children:[jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(VideoLibrary,{}),label:`${e.channelCount} Channels`,size:"small"}),jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(Category,{}),label:`${e.categoryCount} Categories`,size:"small"}),jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(Public,{}),label:`${e.regionCount} Regions`,size:"small"})]}),e.features&&e.features.length>0&&jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"Features:"}),jsxRuntimeExports.jsx(List$1,{dense:!0,sx:{py:0},children:e.features.slice(0,3).map((e,t)=>jsxRuntimeExports.jsxs(ListItem,{sx:{py:0,px:0},children:[jsxRuntimeExports.jsx(Star$1,{fontSize:"small",color:"primary",sx:{mr:1,fontSize:16}}),jsxRuntimeExports.jsx(ListItemText,{primary:e,primaryTypographyProps:{variant:"body2"}})]},t))}),e.features.length>3&&jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"text.secondary",children:["+",e.features.length-3," more features"]})]})]}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsx(Box,{sx:{p:2},children:t?e.canUnlockWithAds?jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"text.secondary",gutterBottom:!0,display:"block",children:["Watch ",e.requiredAdsToUnlock," ad(s) to unlock for ",e.adUnlockDuration," ",e.adUnlockDurationUnit||"days"]}),c.filter(t=>t.targetPackages.some(t=>t._id===e._id)).slice(0,1).map(t=>jsxRuntimeExports.jsx(Button$2,{fullWidth:!0,variant:"outlined",color:"secondary",onClick:()=>((e,t)=>{S(e),R(t),b(!0)})(t,e._id),disabled:p||e.isOwned,startIcon:jsxRuntimeExports.jsx(ViewIcon,{}),sx:{mt:1},children:p?"Processing...":"Watch Ad to Unlock"},t._id)),0===c.filter(t=>t.targetPackages.some(t=>t._id===e._id)).length&&jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",textAlign:"center",children:"No ads available"})]}):jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",textAlign:"center",children:"Ad unlock not available for this package"}):jsxRuntimeExports.jsx(Button$2,{fullWidth:!0,variant:"contained",onClick:()=>(async(e,t)=>{var n,r;if(!i||i.balance<t)v("Insufficient balance");else try{m(!0),await userPackagesAPI.purchase(e),_("Package purchased successfully!"),await s(),w()}catch(a){v((null==(r=null==(n=a.response)?void 0:n.data)?void 0:r.message)||"Purchase failed")}finally{m(!1)}})(e._id,e.price),disabled:p||e.isOwned||i&&i.balance<e.price,startIcon:p?jsxRuntimeExports.jsx(CircularProgress,{size:16}):jsxRuntimeExports.jsx(AttachMoney,{}),children:e.isOwned?"Owned":p?"Purchasing...":i&&i.balance<e.price?"Insufficient Balance":`Buy for ${e.price}`})})]},e._id);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Dialog,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,children:[jsxRuntimeExports.jsxs(DialogTitle,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",fontWeight:"bold",children:"Purchase Premium Packages"}),jsxRuntimeExports.jsx(IconButton,{onClick:t,children:jsxRuntimeExports.jsx(Close,{})})]}),jsxRuntimeExports.jsxs(DialogContent,{children:[x&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},onClose:()=>v(""),children:x}),y&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},onClose:()=>_(""),children:y}),i&&jsxRuntimeExports.jsxs(Box,{sx:{mb:3,p:2,bgcolor:"primary.50",borderRadius:2},children:[jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[jsxRuntimeExports.jsxs(Typography,{variant:"h6",color:"primary.main",children:["Your Balance: ",i.balance||"0.00"]}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"small",onClick:()=>{t(),a("/payment",{state:{isTopUp:!0}})},startIcon:jsxRuntimeExports.jsx(AttachMoney,{}),children:"Add Balance"})]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Purchase packages with your balance or unlock them by watching ads"})]}),jsxRuntimeExports.jsxs(Tabs,{value:f,onChange:(e,t)=>g(t),sx:{mb:3},children:[jsxRuntimeExports.jsx(Tab,{label:"Purchase with Balance"}),jsxRuntimeExports.jsx(Tab,{label:"Unlock with Ads"})]}),d?jsxRuntimeExports.jsx(Box,{display:"flex",justifyContent:"center",py:4,children:jsxRuntimeExports.jsx(CircularProgress,{})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(TabPanel,{value:f,index:0,children:[jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:o.map(e=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:A(e,!1)},e._id))}),0===o.length&&jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",textAlign:"center",py:4,children:"No packages available for purchase"})]}),jsxRuntimeExports.jsxs(TabPanel,{value:f,index:1,children:[jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:o.filter(e=>e.canUnlockWithAds).map(e=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:A(e,!0)},e._id))}),0===o.filter(e=>e.canUnlockWithAds).length&&jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",textAlign:"center",py:4,children:"No packages available for ad unlock"})]})]})]}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button$2,{onClick:t,color:"primary",children:"Close"})})]}),jsxRuntimeExports.jsx(AdViewer,{open:E,onClose:()=>b(!1),ad:C,packageId:T,onSuccess:w})]})},RelatedChannelsCarousel=({channels:e,title:t="Related Channels",onChannelClick:n})=>{const[r,i]=reactExports.useState(0),[s,a]=reactExports.useState(!1),[o,l]=reactExports.useState(0),[c,u]=reactExports.useState(0),d=reactExports.useRef(null),h=useTheme(),p=useMediaQuery(h.breakpoints.down("md")),m=useNavigate(),{user:f}=useAuth(),{checkChannelAccess:g}=usePremiumAccess(),[x,v]=reactExports.useState(new Set),[y,_]=reactExports.useState(!1),E=e.slice(0,4),b=e.slice(4),C=Math.max(0,b.length-2),S=e=>{if(!e)return"";if(e.startsWith("http"))return e;return`https://api.bdstream.site${e}`};reactExports.useEffect(()=>{(async()=>{if(e&&e.length>0){const t=await bulkCheckPremiumChannels(e),n=new Set;t.forEach((e,t)=>{e&&n.add(t)}),v(n)}})()},[e]);if(reactExports.useEffect(()=>{if(d.current&&b.length>0){const e=d.current.offsetWidth/2;d.current.scrollTo({left:r*e,behavior:"smooth"})}},[r,2,b.length]),!e||0===e.length)return null;const T=({channel:e,isGrid:t=!1})=>{const r=async t=>{if(t.preventDefault(),t.stopPropagation(),x.has(e._id)){if(!f){const t=generateChannelUrl(e._id,e.name);return void(window.location.href="/login?redirect="+encodeURIComponent(t))}if(!(await g(e._id)).hasAccess)return void _(!0)}if(n)n(e);else{const t=generateChannelUrl(e._id,e.name);m(t)}};return jsxRuntimeExports.jsx(Card,{className:"channel-card",sx:{borderRadius:3,overflow:"hidden",background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.12)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",height:t?p?140:160:p?200:240,display:"flex",flexDirection:"column","&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:"0 20px 60px rgba(0,0,0,0.25)",borderColor:"rgba(124, 77, 255, 0.3)"},...h.breakpoints.up("md")&&{borderRadius:4,"&:hover":{transform:"translateY(-12px) scale(1.03)",boxShadow:"0 25px 80px rgba(0,0,0,0.3)",borderColor:"rgba(124, 77, 255, 0.4)"}}},children:jsxRuntimeExports.jsxs(CardActionArea,{component:"div",onClick:r,onTouchEnd:t?void 0:e=>{if(!t&&!s){setTimeout(()=>{s||r(e)},p?300:150)}},onTouchStart:t?void 0:e=>{e.stopPropagation()},sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",cursor:"pointer",touchAction:"pan-y"},children:[jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.02) 100%)",overflow:"hidden",padding:2},children:[jsxRuntimeExports.jsx(CardMedia,{component:"img",image:S(e.logoUrl),alt:e.name,sx:{objectFit:"contain",maxHeight:"70%",maxWidth:"80%",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}},onError:t=>{console.error("Failed to load logo for channel:",e.name),t.target.style.display="none"}}),x.has(e._id)&&jsxRuntimeExports.jsx(PremiumBadge,{isPremium:!0,variant:"chip",size:"small",sx:{position:"absolute",top:8,left:8,transform:"scale(0.8)",zIndex:2}}),jsxRuntimeExports.jsxs(Box,{sx:{position:"absolute",top:8,right:8,display:"flex",alignItems:"center",gap:.5,px:1,py:.5,borderRadius:"12px",background:"linear-gradient(135deg, #ff4757 0%, #ff3742 100%)",color:"white",fontSize:"0.7rem",fontWeight:600,boxShadow:"0 2px 8px rgba(255, 71, 87, 0.3)"},children:[jsxRuntimeExports.jsx(FiberManualRecord,{sx:{fontSize:8}}),"LIVE"]}),jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:0,transition:"opacity 0.3s ease",".MuiCard-root:hover &":{opacity:1}},children:jsxRuntimeExports.jsx(Avatar,{sx:{width:48,height:48,background:"linear-gradient(135deg, #00d4aa 0%, #00b894 100%)",boxShadow:"0 8px 24px rgba(0, 212, 170, 0.4)"},children:jsxRuntimeExports.jsx(PlayArrow,{sx:{fontSize:28}})})})]}),jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",padding:1.5,textAlign:"center"},children:jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{color:"white",fontWeight:600,fontSize:"0.85rem",textShadow:"0 1px 2px rgba(0,0,0,0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name})})]})})},R=(()=>{const e="dark"===h.palette.mode;return{backgroundColor:e?"rgba(255,255,255,0.15)":"rgba(255,255,255,0.95)",color:e?"#ffffff":"#333333",hoverBackground:e?"rgba(255,255,255,0.25)":"rgba(255,255,255,1)",shadow:e?"0 4px 20px rgba(0,0,0,0.3)":"0 4px 20px rgba(0,0,0,0.15)",hoverShadow:e?"0 6px 25px rgba(0,0,0,0.4)":"0 6px 25px rgba(0,0,0,0.2)"}})();return jsxRuntimeExports.jsxs(Box,{sx:{mb:4},children:[jsxRuntimeExports.jsxs(Box,{sx:{mb:3},children:[jsxRuntimeExports.jsx(Typography,{component:"h2",variant:"h6",sx:{fontWeight:700,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:{xs:"1.1rem",md:"1.3rem"},mb:1},children:t}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{color:"text.secondary",fontSize:{xs:"0.85rem",md:"0.9rem"},fontWeight:400},children:"Discover more channels you might like. Browse through our curated selection of related content."})]}),E.length>0&&jsxRuntimeExports.jsx("div",{className:"row g-2 g-md-3 mb-3",children:E.map(e=>jsxRuntimeExports.jsx("div",{className:"col-6",children:jsxRuntimeExports.jsx(T,{channel:e,isGrid:!0})},e._id))}),b.length>0&&jsxRuntimeExports.jsxs(Box,{sx:{mt:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",sx:{fontWeight:600,color:"text.secondary",fontSize:{xs:"1rem",md:"1.1rem"},mb:2},children:"More Related Channels"}),jsxRuntimeExports.jsxs(Box,{sx:{position:"relative"},children:[r>0&&jsxRuntimeExports.jsx(IconButton,{onClick:()=>{r>0&&i(e=>Math.max(0,e-1))},sx:{position:"absolute",left:{xs:-10,md:-20},top:"50%",transform:"translateY(-50%)",zIndex:10,backgroundColor:R.backgroundColor,color:R.color,backdropFilter:"blur(10px)",boxShadow:R.shadow,"&:hover":{backgroundColor:R.hoverBackground,transform:"translateY(-50%) scale(1.1)",boxShadow:R.hoverShadow},"&:active":{transform:"translateY(-50%) scale(0.95)"},transition:"all 0.2s ease",width:{xs:36,md:44},height:{xs:36,md:44},display:"flex",border:"1px solid "+("dark"===h.palette.mode?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)")},children:jsxRuntimeExports.jsx(ChevronLeft,{sx:{fontSize:{xs:20,md:26}}})}),r<C&&jsxRuntimeExports.jsx(IconButton,{onClick:()=>{r<C&&i(e=>Math.min(C,e+1))},sx:{position:"absolute",right:{xs:-10,md:-20},top:"50%",transform:"translateY(-50%)",zIndex:10,backgroundColor:R.backgroundColor,color:R.color,backdropFilter:"blur(10px)",boxShadow:R.shadow,"&:hover":{backgroundColor:R.hoverBackground,transform:"translateY(-50%) scale(1.1)",boxShadow:R.hoverShadow},"&:active":{transform:"translateY(-50%) scale(0.95)"},transition:"all 0.2s ease",width:{xs:36,md:44},height:{xs:36,md:44},display:"flex",border:"1px solid "+("dark"===h.palette.mode?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)")},children:jsxRuntimeExports.jsx(ChevronRight,{sx:{fontSize:{xs:20,md:26}}})}),jsxRuntimeExports.jsx(Box,{ref:d,className:"mobile-carousel "+(s?"carousel-dragging":""),sx:{display:"flex",gap:{xs:2,sm:2,md:3},overflow:"hidden",scrollBehavior:"smooth",cursor:s?"grabbing":"grab","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",msOverflowStyle:"none",width:"100%",maxWidth:"100%",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",scrollSnapType:"x mandatory","& > *":{scrollSnapAlign:"start"},userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"pan-x",...h.breakpoints.up("md")&&{maxWidth:"100%",overflowX:"auto"},...h.breakpoints.down("md")&&{touchAction:"pan-x",WebkitOverflowScrolling:"touch",scrollSnapType:"x mandatory","& > *":{scrollSnapAlign:"start",flexShrink:0},"&.carousel-dragging":{cursor:"grabbing","& *":{pointerEvents:"none"}}}},onMouseDown:e=>{e.target.closest(".channel-card")||(a(!0),l(e.pageX-d.current.offsetLeft),u(d.current.scrollLeft))},onMouseLeave:()=>{a(!1)},onMouseUp:()=>{a(!1)},onMouseMove:e=>{if(!s)return;e.preventDefault();const t=2*(e.pageX-d.current.offsetLeft-o);d.current.scrollLeft=c-t},onTouchStart:e=>{e.target.closest(".channel-card")||(a(!0),l(e.touches[0].pageX-d.current.offsetLeft),u(d.current.scrollLeft))},onTouchMove:e=>{if(!s)return;e.preventDefault();const t=2*(e.touches[0].pageX-d.current.offsetLeft-o);d.current.scrollLeft=c-t},onTouchEnd:e=>{setTimeout(()=>{a(!1)},p?200:100)},children:b.map(e=>jsxRuntimeExports.jsx(Box,{sx:{flexShrink:0,...h.breakpoints.up("md")&&{width:"calc(50% - 12px)",minWidth:"calc(50% - 12px)",maxWidth:"calc(50% - 12px)"},...h.breakpoints.down("md")&&{width:"calc(50% - 8px)",minWidth:"calc(50% - 8px)",maxWidth:"calc(50% - 8px)"}},children:jsxRuntimeExports.jsx(T,{channel:e})},e._id))}),C>0&&jsxRuntimeExports.jsx(Box,{sx:{display:"flex",justifyContent:"center",gap:{xs:.5,md:1},mt:{xs:1.5,md:2},px:2},children:Array.from({length:C+1},(e,t)=>jsxRuntimeExports.jsx(Box,{sx:{width:{xs:6,md:8},height:{xs:6,md:8},borderRadius:"50%",backgroundColor:r===t?"primary.main":"rgba(0,0,0,0.2)",cursor:"pointer",transition:"all 0.3s ease","&:hover":{backgroundColor:r===t?"primary.main":"rgba(0,0,0,0.4)"},"&:active":{transform:"scale(0.9)"}},onClick:()=>i(t)},t))})]})]}),jsxRuntimeExports.jsx(PurchasePackage,{open:y,onClose:()=>_(!1)})]})},styles$1="\n  .mobile-carousel {\n    -webkit-overflow-scrolling: touch;\n    scroll-behavior: smooth;\n  }\n  \n  .mobile-carousel.carousel-dragging {\n    cursor: grabbing !important;\n  }\n  \n  .mobile-carousel.carousel-dragging * {\n    pointer-events: none !important;\n    user-select: none !important;\n    -webkit-user-select: none !important;\n    -moz-user-select: none !important;\n    -ms-user-select: none !important;\n  }\n  \n  .channel-card {\n    touch-action: pan-y;\n  }\n  \n  @media (max-width: 768px) {\n    .mobile-carousel {\n      scroll-snap-type: x mandatory;\n    }\n    \n    .mobile-carousel > * {\n      scroll-snap-align: start;\n      flex-shrink: 0;\n    }\n  }\n";if("undefined"!=typeof document){const e=document.createElement("style");e.textContent=styles$1,document.head.appendChild(e)}const PopularSportsCarousel=({channels:e,title:t="Popular Sports Channels"})=>{const[n,r]=reactExports.useState(0),[i,s]=reactExports.useState(!1),[a,o]=reactExports.useState(0),[l,c]=reactExports.useState(0),u=reactExports.useRef(null),d=useTheme(),h=useMediaQuery(d.breakpoints.down("md")),p=useNavigate(),m=h?2:d.breakpoints.down("lg")?3:4,f=Math.max(0,e.length-m),g=e=>{if(!e)return"";if(e.startsWith("http"))return e;return`https://ipapi.bdstream.site${e}`};if(reactExports.useEffect(()=>{if(u.current&&e.length>0){const e=u.current.offsetWidth/m;u.current.scrollTo({left:n*e,behavior:"smooth"})}},[n,m,e.length]),!e||0===e.length)return null;const x=({channel:e})=>{const t=t=>{t.preventDefault(),t.stopPropagation();const n=generateChannelUrl(e._id,e.name);p(n)};return jsxRuntimeExports.jsx(Card,{className:"sports-channel-card",sx:{borderRadius:3,overflow:"hidden",background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.12)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",height:h?200:240,display:"flex",flexDirection:"column","&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:"0 20px 60px rgba(0,0,0,0.25)",borderColor:"rgba(255, 87, 34, 0.3)"},...d.breakpoints.up("md")&&{borderRadius:4,"&:hover":{transform:"translateY(-12px) scale(1.03)",boxShadow:"0 25px 80px rgba(0,0,0,0.3)",borderColor:"rgba(255, 87, 34, 0.4)"}}},children:jsxRuntimeExports.jsxs(CardActionArea,{onClick:t,onTouchEnd:e=>{if(!i){setTimeout(()=>{i||t(e)},h?200:100)}},onTouchStart:e=>{e.stopPropagation()},sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",cursor:"pointer",touchAction:"pan-y"},children:[jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, rgba(255,87,34,0.05) 0%, rgba(255,87,34,0.02) 100%)",overflow:"hidden",padding:2},children:[jsxRuntimeExports.jsx(CardMedia,{component:"img",image:g(e.logoUrl),alt:e.name,sx:{objectFit:"contain",maxHeight:"70%",maxWidth:"80%",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}},onError:t=>{console.error("Failed to load logo for sports channel:",e.name),t.target.style.display="none"}}),jsxRuntimeExports.jsxs(Box,{sx:{position:"absolute",top:8,left:8,display:"flex",alignItems:"center",gap:.5,px:1,py:.5,borderRadius:"12px",background:"linear-gradient(135deg, #ff5722 0%, #f4511e 100%)",color:"white",fontSize:"0.7rem",fontWeight:600,boxShadow:"0 2px 8px rgba(255, 87, 34, 0.3)"},children:[jsxRuntimeExports.jsx(SportsSoccer,{sx:{fontSize:12}}),"SPORTS"]}),jsxRuntimeExports.jsxs(Box,{sx:{position:"absolute",top:8,right:8,display:"flex",alignItems:"center",gap:.5,px:1,py:.5,borderRadius:"12px",background:"linear-gradient(135deg, #ff4757 0%, #ff3742 100%)",color:"white",fontSize:"0.7rem",fontWeight:600,boxShadow:"0 2px 8px rgba(255, 71, 87, 0.3)"},children:[jsxRuntimeExports.jsx(FiberManualRecord,{sx:{fontSize:8}}),"LIVE"]}),jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:0,transition:"opacity 0.3s ease",".MuiCard-root:hover &":{opacity:1}},children:jsxRuntimeExports.jsx(Avatar,{sx:{width:48,height:48,background:"linear-gradient(135deg, #ff5722 0%, #f4511e 100%)",boxShadow:"0 8px 24px rgba(255, 87, 34, 0.4)"},children:jsxRuntimeExports.jsx(PlayArrow,{sx:{fontSize:28}})})})]}),jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",padding:1.5,textAlign:"center"},children:jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{color:"white",fontWeight:600,fontSize:"0.85rem",textShadow:"0 1px 2px rgba(0,0,0,0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name})})]})})},v=(()=>{const e="dark"===d.palette.mode;return{backgroundColor:e?"rgba(255,255,255,0.15)":"rgba(255,255,255,0.95)",color:e?"#ffffff":"#333333",hoverBackground:e?"rgba(255,255,255,0.25)":"rgba(255,255,255,1)",shadow:e?"0 4px 20px rgba(0,0,0,0.3)":"0 4px 20px rgba(0,0,0,0.15)",hoverShadow:e?"0 6px 25px rgba(0,0,0,0.4)":"0 6px 25px rgba(0,0,0,0.2)"}})();return jsxRuntimeExports.jsxs(Box,{sx:{mb:4},children:[jsxRuntimeExports.jsxs(Box,{sx:{mb:3,textAlign:"center",background:"dark"===d.palette.mode?"linear-gradient(135deg, rgba(255,87,34,0.1) 0%, rgba(255,87,34,0.05) 100%)":"linear-gradient(135deg, rgba(255,87,34,0.05) 0%, rgba(255,87,34,0.02) 100%)",borderRadius:3,padding:3,border:"1px solid "+("dark"===d.palette.mode?"rgba(255,87,34,0.2)":"rgba(255,87,34,0.1)")},children:[jsxRuntimeExports.jsxs(Typography,{component:"h2",variant:"h4",sx:{fontWeight:800,background:"linear-gradient(135deg, #ff5722 0%, #f4511e 50%, #e64a19 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:{xs:"1.75rem",sm:"2.25rem",md:"2.5rem"},display:"flex",alignItems:"center",justifyContent:"center",gap:1,mb:2,textShadow:"dark"===d.palette.mode?"0 2px 4px rgba(255,87,34,0.3)":"none"},children:[jsxRuntimeExports.jsx(SportsSoccer,{sx:{fontSize:{xs:28,sm:36,md:40},color:"#ff5722",filter:"dark"===d.palette.mode?"drop-shadow(0 2px 4px rgba(255,87,34,0.3))":"none"}}),t]}),jsxRuntimeExports.jsx(Typography,{variant:"h6",component:"p",sx:{color:"text.secondary",fontSize:{xs:"1rem",sm:"1.1rem",md:"1.2rem"},fontWeight:400,maxWidth:"800px",mx:"auto",px:{xs:2,sm:0},lineHeight:1.6},children:"Watch live sports channels with high-quality streaming. Enjoy football, cricket, tennis, and more sports content."})]}),jsxRuntimeExports.jsxs(Box,{sx:{position:"relative"},children:[n>0&&jsxRuntimeExports.jsx(IconButton,{onClick:()=>{if(n>0){const e=Math.max(0,n-1);r(e)}},sx:{position:"absolute",left:{xs:-10,md:-20},top:"50%",transform:"translateY(-50%)",zIndex:10,backgroundColor:v.backgroundColor,color:v.color,backdropFilter:"blur(10px)",boxShadow:v.shadow,"&:hover":{backgroundColor:v.hoverBackground,transform:"translateY(-50%) scale(1.1)",boxShadow:v.hoverShadow},"&:active":{transform:"translateY(-50%) scale(0.95)"},transition:"all 0.2s ease",width:{xs:40,md:48},height:{xs:40,md:48},display:"flex",border:"1px solid "+("dark"===d.palette.mode?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)")},children:jsxRuntimeExports.jsx(ChevronLeft,{sx:{fontSize:{xs:24,md:28}}})}),n<f&&jsxRuntimeExports.jsx(IconButton,{onClick:()=>{if(n<f){const e=Math.min(f,n+1);r(e)}},sx:{position:"absolute",right:{xs:-10,md:-20},top:"50%",transform:"translateY(-50%)",zIndex:10,backgroundColor:v.backgroundColor,color:v.color,backdropFilter:"blur(10px)",boxShadow:v.shadow,"&:hover":{backgroundColor:v.hoverBackground,transform:"translateY(-50%) scale(1.1)",boxShadow:v.hoverShadow},"&:active":{transform:"translateY(-50%) scale(0.95)"},transition:"all 0.2s ease",width:{xs:40,md:48},height:{xs:40,md:48},display:"flex",border:"1px solid "+("dark"===d.palette.mode?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)")},children:jsxRuntimeExports.jsx(ChevronRight,{sx:{fontSize:{xs:24,md:28}}})}),jsxRuntimeExports.jsx(Box,{ref:u,className:"sports-carousel "+(i?"carousel-dragging":""),sx:{display:"flex",gap:{xs:2,sm:2,md:3},overflow:"hidden",scrollBehavior:"smooth",cursor:i?"grabbing":"grab","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",msOverflowStyle:"none",width:"100%",maxWidth:"100%",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",scrollSnapType:"x mandatory","& > *":{scrollSnapAlign:"start"},userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"pan-x",...d.breakpoints.up("md")&&{maxWidth:"100%",overflowX:"auto"},...d.breakpoints.down("md")&&{touchAction:"pan-x",WebkitOverflowScrolling:"touch",scrollSnapType:"x mandatory","& > *":{scrollSnapAlign:"start",flexShrink:0}}},onMouseDown:e=>{e.target.closest(".sports-channel-card")||(s(!0),o(e.pageX-u.current.offsetLeft),c(u.current.scrollLeft))},onMouseLeave:()=>{s(!1)},onMouseUp:()=>{s(!1)},onMouseMove:e=>{if(!i)return;e.preventDefault();const t=2*(e.pageX-u.current.offsetLeft-a);u.current.scrollLeft=l-t},onTouchStart:e=>{e.target.closest(".sports-channel-card")||(s(!0),o(e.touches[0].pageX-u.current.offsetLeft),c(u.current.scrollLeft))},onTouchMove:e=>{if(!i)return;e.preventDefault();const t=2*(e.touches[0].pageX-u.current.offsetLeft-a);u.current.scrollLeft=l-t},onTouchEnd:e=>{setTimeout(()=>{s(!1)},h?150:50)},children:e.map(e=>jsxRuntimeExports.jsx(Box,{sx:{flexShrink:0,...d.breakpoints.up("lg")&&{width:"calc(25% - 18px)",minWidth:"calc(25% - 18px)",maxWidth:"calc(25% - 18px)"},...d.breakpoints.between("md","lg")&&{width:"calc(33.333% - 16px)",minWidth:"calc(33.333% - 16px)",maxWidth:"calc(33.333% - 16px)"},...d.breakpoints.down("md")&&{width:"calc(50% - 8px)",minWidth:"calc(50% - 8px)",maxWidth:"calc(50% - 8px)"}},children:jsxRuntimeExports.jsx(x,{channel:e})},e._id))}),f>0&&jsxRuntimeExports.jsx(Box,{sx:{display:"flex",justifyContent:"center",gap:{xs:.5,md:1},mt:{xs:1.5,md:2},px:2},children:Array.from({length:f+1},(e,t)=>jsxRuntimeExports.jsx(Box,{sx:{width:{xs:6,md:8},height:{xs:6,md:8},borderRadius:"50%",backgroundColor:n===t?"#ff5722":"rgba(0,0,0,0.2)",cursor:"pointer",transition:"all 0.3s ease","&:hover":{backgroundColor:n===t?"#ff5722":"rgba(0,0,0,0.4)"},"&:active":{transform:"scale(0.9)"}},onClick:()=>r(t)},t))})]})]})},styles="\n  .sports-carousel {\n    -webkit-overflow-scrolling: touch;\n    scroll-behavior: smooth;\n  }\n  \n  .sports-carousel.carousel-dragging {\n    cursor: grabbing !important;\n  }\n  \n  .sports-carousel.carousel-dragging * {\n    pointer-events: none !important;\n    user-select: none !important;\n    -webkit-user-select: none !important;\n    -moz-user-select: none !important;\n    -ms-user-select: none !important;\n  }\n  \n  .sports-channel-card {\n    touch-action: pan-y;\n  }\n  \n  @media (max-width: 768px) {\n    .sports-carousel {\n      scroll-snap-type: x mandatory;\n    }\n    \n    .sports-carousel > * {\n      scroll-snap-align: start;\n      flex-shrink: 0;\n    }\n  }\n";if("undefined"!=typeof document){const e=document.createElement("style");e.textContent=styles,document.head.appendChild(e)}const DesktopBannerAd=()=>{const e=reactExports.useRef(null),t=useLocation().pathname.startsWith("/admin");return reactExports.useEffect(()=>{if(t)return;if(window.innerWidth<768)return;const n=document.createElement("script");n.type="text/javascript",n.innerHTML="\n      atOptions = {\n        'key' : '6215f7abe7525722d1fe1eb03f1b5566',\n        'format' : 'iframe',\n        'height' : 90,\n        'width' : 728,\n        'params' : {}\n      };\n    ";const r=document.createElement("script");return r.type="text/javascript",r.src="//www.highperformanceformat.com/6215f7abe7525722d1fe1eb03f1b5566/invoke.js",e.current&&(e.current.appendChild(n),e.current.appendChild(r)),()=>{e.current&&(e.current.innerHTML="")}},[t]),t?null:jsxRuntimeExports.jsx(Box,{ref:e,sx:{display:{xs:"none",md:"flex"},justifyContent:"center",alignItems:"center",width:"100%",minHeight:"90px",my:2,overflow:"hidden"}})};var classnames={exports:{}},module;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/module=classnames,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=r(e,n(i)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var i="";for(var s in n)e.call(n,s)&&n[s]&&(i=r(i,s));return i}function r(e,t){return t?e?e+" "+t:e+t:e}module.exports?(t.default=t,module.exports=t):window.classNames=t}();var classnamesExports=classnames.exports;const classNames$1=getDefaultExportFromCjs$1(classnamesExports);function defaultKey(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive$1(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function useUncontrolledProp(e,t,n){var r=reactExports.useRef(void 0!==e),i=reactExports.useState(t),s=i[0],a=i[1],o=void 0!==e,l=r.current;return r.current=o,!o&&l&&s!==t&&a(t),[o?e:s,reactExports.useCallback(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),a(e)},[n])]}function useUncontrolled(e,t){return Object.keys(t).reduce(function(n,r){var i,s=n,a=s[defaultKey(r)],o=s[r],l=_objectWithoutPropertiesLoose$3(s,[defaultKey(r),r].map(_toPropertyKey$1)),c=t[r],u=useUncontrolledProp(o,a,e[c]),d=u[0],h=u[1];return _extends$2({},l,((i={})[r]=d,i[c]=h,i))},e)}const DEFAULT_BREAKPOINTS=["xxl","xl","lg","md","sm","xs"],DEFAULT_MIN_BREAKPOINT="xs",ThemeContext=reactExports.createContext({prefixes:{},breakpoints:DEFAULT_BREAKPOINTS,minBreakpoint:DEFAULT_MIN_BREAKPOINT}),{Consumer:Consumer,Provider:Provider}=ThemeContext;function useBootstrapPrefix(e,t){const{prefixes:n}=reactExports.useContext(ThemeContext);return e||n[t]||t}function useIsRTL(){const{dir:e}=reactExports.useContext(ThemeContext);return"rtl"===e}function ownerDocument(e){return e&&e.ownerDocument||document}function ownerWindow(e){var t=ownerDocument(e);return t&&t.defaultView||window}function getComputedStyle$2(e,t){return ownerWindow(e).getComputedStyle(e,t)}var rUpper=/([A-Z])/g;function hyphenate(e){return e.replace(rUpper,"-$1").toLowerCase()}var msPattern=/^ms-/;function hyphenateStyleName(e){return hyphenate(e).replace(msPattern,"-ms-")}var supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function isTransform(e){return!(!e||!supportedTransforms.test(e))}function style(e,t){var n="",r="";if("string"==typeof t)return e.style.getPropertyValue(hyphenateStyleName(t))||getComputedStyle$2(e).getPropertyValue(hyphenateStyleName(t));Object.keys(t).forEach(function(i){var s=t[i];s||0===s?isTransform(i)?r+=i+"("+s+") ":n+=hyphenateStyleName(i)+": "+s+";":e.style.removeProperty(hyphenateStyleName(i))}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}const canUseDOM$1=!("undefined"==typeof window||!window.document||!window.document.createElement);var optionsSupported=!1,onceSupported=!1;try{var options$1={get passive(){return optionsSupported=!0},get once(){return onceSupported=optionsSupported=!0}};canUseDOM$1&&(window.addEventListener("test",options$1,options$1),window.removeEventListener("test",options$1,!0))}catch(e2){}function addEventListener$1(e,t,n,r){if(r&&"boolean"!=typeof r&&!onceSupported){var i=r.once,s=r.capture,a=n;!onceSupported&&i&&(a=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=a),e.addEventListener(t,a,optionsSupported?r:s)}e.addEventListener(t,n,r)}function removeEventListener$1(e,t,n,r){var i=r&&"boolean"!=typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)}function listen(e,t,n,r){return addEventListener$1(e,t,n,r),function(){removeEventListener$1(e,t,n,r)}}function triggerEvent(e,t,n,r){if(void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}function parseDuration$1(e){var t=style(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}function emulateTransitionEnd(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout(function(){r||triggerEvent(e,"transitionend",!0)},t+n),s=listen(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function transitionEnd(e,t,n,r){null==n&&(n=parseDuration$1(e)||0);var i=emulateTransitionEnd(e,n,r),s=listen(e,"transitionend",t);return function(){i(),s()}}function parseDuration(e,t){const n=style(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function transitionEndListener(e,t){const n=parseDuration(e,"transitionDuration"),r=parseDuration(e,"transitionDelay"),i=transitionEnd(e,n=>{n.target===e&&(i(),t(n))},n+r)}function triggerBrowserReflow(e){e.offsetHeight}const toFnRef=e=>e&&"function"!=typeof e?t=>{e.current=t}:e;function mergeRefs(e,t){const n=toFnRef(e),r=toFnRef(t);return e=>{n&&n(e),r&&r(e)}}function useMergedRefs(e,t){return reactExports.useMemo(()=>mergeRefs(e,t),[e,t])}function safeFindDOMNode(e){return e&&"setState"in e?ReactDOM.findDOMNode(e):null!=e?e:null}const TransitionWrapper=React$2.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:a,children:o,childRef:l,...c},u)=>{const d=reactExports.useRef(null),h=useMergedRefs(d,l),p=e=>{h(safeFindDOMNode(e))},m=e=>t=>{e&&d.current&&e(d.current,t)},f=reactExports.useCallback(m(e),[e]),g=reactExports.useCallback(m(t),[t]),x=reactExports.useCallback(m(n),[n]),v=reactExports.useCallback(m(r),[r]),y=reactExports.useCallback(m(i),[i]),_=reactExports.useCallback(m(s),[s]),E=reactExports.useCallback(m(a),[a]);return jsxRuntimeExports.jsx(Transition,{ref:u,...c,onEnter:f,onEntered:x,onEntering:g,onExit:v,onExited:_,onExiting:y,addEndListener:E,nodeRef:d,children:"function"==typeof o?(e,t)=>o(e,{...t,ref:p}):React$2.cloneElement(o,{ref:p})})});function useCommittedRef$1(e){const t=reactExports.useRef(e);return reactExports.useEffect(()=>{t.current=e},[e]),t}function useEventCallback$1(e){const t=useCommittedRef$1(e);return reactExports.useCallback(function(...e){return t.current&&t.current(...e)},[t])}function useCommittedRef(e){const t=reactExports.useRef(e);return reactExports.useEffect(()=>{t.current=e},[e]),t}function useEventCallback(e){const t=useCommittedRef(e);return reactExports.useCallback(function(...e){return t.current&&t.current(...e)},[t])}TransitionWrapper.displayName="TransitionWrapper";const _excluded$9=["as","disabled"];function _objectWithoutPropertiesLoose$2(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function isTrivialHref$1(e){return!e||"#"===e.trim()}function useButtonProps({tagName:e,disabled:t,href:n,target:r,rel:i,role:s,onClick:a,tabIndex:o=0,type:l}){e||(e=null!=n||null!=r||null!=i?"a":"button");const c={tagName:e};if("button"===e)return[{type:l||"button",disabled:t},c];const u=r=>{(t||"a"===e&&isTrivialHref$1(n))&&r.preventDefault(),t?r.stopPropagation():null==a||a(r)};return"a"===e&&(n||(n="#"),t&&(n=void 0)),[{role:null!=s?s:"button",disabled:void 0,tabIndex:t?void 0:o,href:n,target:"a"===e?r:void 0,"aria-disabled":t||void 0,rel:"a"===e?i:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},c]}const Button$1=reactExports.forwardRef((e,t)=>{let{as:n,disabled:r}=e,i=_objectWithoutPropertiesLoose$2(e,_excluded$9);const[s,{tagName:a}]=useButtonProps(Object.assign({tagName:n,disabled:r},i));return jsxRuntimeExports.jsx(a,Object.assign({},i,s,{ref:t}))});Button$1.displayName="Button";const _excluded$8=["onKeyDown"];function _objectWithoutPropertiesLoose$1(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function isTrivialHref(e){return!e||"#"===e.trim()}const Anchor=reactExports.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=_objectWithoutPropertiesLoose$1(e,_excluded$8);const[i]=useButtonProps(Object.assign({tagName:"a"},r)),s=useEventCallback(e=>{i.onKeyDown(e),null==n||n(e)});return isTrivialHref(r.href)||"button"===r.role?jsxRuntimeExports.jsx("a",Object.assign({ref:t},r,i,{onKeyDown:s})):jsxRuntimeExports.jsx("a",Object.assign({ref:t},r,{onKeyDown:n}))});function useUpdateEffect(e,t){const n=reactExports.useRef(!0);reactExports.useEffect(()=>{if(!n.current)return e();n.current=!1},t)}function useMounted(){const e=reactExports.useRef(!0),t=reactExports.useRef(()=>e.current);return reactExports.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function useUpdatedRef(e){const t=reactExports.useRef(e);return t.current=e,t}function useWillUnmount(e){const t=useUpdatedRef(e);reactExports.useEffect(()=>()=>t.current(),[])}Anchor.displayName="Anchor";const MAX_DELAY_MS=2**31-1;function setChainedTimeout(e,t,n){const r=n-Date.now();e.current=r<=MAX_DELAY_MS?setTimeout(t,r):setTimeout(()=>setChainedTimeout(e,t,n),MAX_DELAY_MS)}function useTimeout(){const e=useMounted(),t=reactExports.useRef();return useWillUnmount(()=>clearTimeout(t.current)),reactExports.useMemo(()=>{const n=()=>clearTimeout(t.current);return{set:function(r,i=0){e()&&(n(),i<=MAX_DELAY_MS?t.current=setTimeout(r,i):setChainedTimeout(t,r,Date.now()+i))},clear:n,handleRef:t}},[])}const CarouselCaption=reactExports.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=useBootstrapPrefix(t,"carousel-caption"),jsxRuntimeExports.jsx(n,{ref:i,className:classNames$1(e,t),...r})));CarouselCaption.displayName="CarouselCaption";const CarouselItem=reactExports.forwardRef(({as:e="div",bsPrefix:t,className:n,...r},i)=>{const s=classNames$1(n,useBootstrapPrefix(t,"carousel-item"));return jsxRuntimeExports.jsx(e,{ref:i,...r,className:s})});function map(e,t){let n=0;return reactExports.Children.map(e,e=>reactExports.isValidElement(e)?t(e,n++):e)}function forEach(e,t){let n=0;reactExports.Children.forEach(e,e=>{reactExports.isValidElement(e)&&t(e,n++)})}CarouselItem.displayName="CarouselItem";const SWIPE_THRESHOLD=40;function isVisible(e){if(!(e&&e.style&&e.parentNode&&e.parentNode.style))return!1;const t=getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"none"!==getComputedStyle(e.parentNode).display}const Carousel=reactExports.forwardRef(({defaultActiveIndex:e=0,...t},n)=>{const{as:r="div",bsPrefix:i,slide:s=!0,fade:a=!1,controls:o=!0,indicators:l=!0,indicatorLabels:c=[],activeIndex:u,onSelect:d,onSlide:h,onSlid:p,interval:m=5e3,keyboard:f=!0,onKeyDown:g,pause:x="hover",onMouseOver:v,onMouseOut:y,wrap:_=!0,touch:E=!0,onTouchStart:b,onTouchMove:C,onTouchEnd:S,prevIcon:T=jsxRuntimeExports.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:R="Previous",nextIcon:j=jsxRuntimeExports.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:w="Next",variant:A,className:I,children:k,...M}=useUncontrolled({defaultActiveIndex:e,...t},{activeIndex:"onSelect"}),P=useBootstrapPrefix(i,"carousel"),L=useIsRTL(),D=reactExports.useRef(null),[O,$]=reactExports.useState("next"),[N,F]=reactExports.useState(!1),[B,U]=reactExports.useState(!1),[G,V]=reactExports.useState(u||0);reactExports.useEffect(()=>{B||u===G||(D.current?$(D.current):$((u||0)>G?"next":"prev"),s&&U(!0),V(u||0))},[u,B,G,s]),reactExports.useEffect(()=>{D.current&&(D.current=null)});let H,W=0;forEach(k,(e,t)=>{++W,t===u&&(H=e.props.interval)});const q=useCommittedRef$1(H),z=reactExports.useCallback(e=>{if(B)return;let t=G-1;if(t<0){if(!_)return;t=W-1}D.current="prev",null==d||d(t,e)},[B,G,d,_,W]),K=useEventCallback$1(e=>{if(B)return;let t=G+1;if(t>=W){if(!_)return;t=0}D.current="next",null==d||d(t,e)}),Y=reactExports.useRef();reactExports.useImperativeHandle(n,()=>({element:Y.current,prev:z,next:K}));const Q=useEventCallback$1(()=>{!document.hidden&&isVisible(Y.current)&&(L?z():K())}),X="next"===O?"start":"end";useUpdateEffect(()=>{s||(null==h||h(G,X),null==p||p(G,X))},[G]);const Z=`${P}-item-${O}`,J=`${P}-item-${X}`,ee=reactExports.useCallback(e=>{triggerBrowserReflow(e),null==h||h(G,X)},[h,G,X]),te=reactExports.useCallback(()=>{U(!1),null==p||p(G,X)},[p,G,X]),ne=reactExports.useCallback(e=>{if(f&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":return e.preventDefault(),void(L?K(e):z(e));case"ArrowRight":return e.preventDefault(),void(L?z(e):K(e))}null==g||g(e)},[f,g,z,K,L]),re=reactExports.useCallback(e=>{"hover"===x&&F(!0),null==v||v(e)},[x,v]),ie=reactExports.useCallback(e=>{F(!1),null==y||y(e)},[y]),se=reactExports.useRef(0),ae=reactExports.useRef(0),oe=useTimeout(),le=reactExports.useCallback(e=>{se.current=e.touches[0].clientX,ae.current=0,"hover"===x&&F(!0),null==b||b(e)},[x,b]),ce=reactExports.useCallback(e=>{e.touches&&e.touches.length>1?ae.current=0:ae.current=e.touches[0].clientX-se.current,null==C||C(e)},[C]),ue=reactExports.useCallback(e=>{if(E){const t=ae.current;Math.abs(t)>SWIPE_THRESHOLD&&(t>0?z(e):K(e))}"hover"===x&&oe.set(()=>{F(!1)},m||void 0),null==S||S(e)},[E,x,z,K,oe,m,S]),de=null!=m&&!N&&!B,he=reactExports.useRef();reactExports.useEffect(()=>{var e,t;if(!de)return;const n=L?z:K;return he.current=window.setInterval(document.visibilityState?Q:n,null!=(e=null!=(t=q.current)?t:m)?e:void 0),()=>{null!==he.current&&clearInterval(he.current)}},[de,z,K,q,m,Q,L]);const pe=reactExports.useMemo(()=>l&&Array.from({length:W},(e,t)=>e=>{null==d||d(t,e)}),[l,W,d]);return jsxRuntimeExports.jsxs(r,{ref:Y,...M,onKeyDown:ne,onMouseOver:re,onMouseOut:ie,onTouchStart:le,onTouchMove:ce,onTouchEnd:ue,className:classNames$1(I,P,s&&"slide",a&&`${P}-fade`,A&&`${P}-${A}`),children:[l&&jsxRuntimeExports.jsx("div",{className:`${P}-indicators`,children:map(k,(e,t)=>jsxRuntimeExports.jsx("button",{type:"button","data-bs-target":"","aria-label":null!=c&&c.length?c[t]:`Slide ${t+1}`,className:t===G?"active":void 0,onClick:pe?pe[t]:void 0,"aria-current":t===G},t))}),jsxRuntimeExports.jsx("div",{className:`${P}-inner`,children:map(k,(e,t)=>{const n=t===G;return s?jsxRuntimeExports.jsx(TransitionWrapper,{in:n,onEnter:n?ee:void 0,onEntered:n?te:void 0,addEndListener:transitionEndListener,children:(t,r)=>reactExports.cloneElement(e,{...r,className:classNames$1(e.props.className,n&&"entered"!==t&&Z,("entered"===t||"exiting"===t)&&"active",("entering"===t||"exiting"===t)&&J)})}):reactExports.cloneElement(e,{className:classNames$1(e.props.className,n&&"active")})})}),o&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[(_||0!==u)&&jsxRuntimeExports.jsxs(Anchor,{className:`${P}-control-prev`,onClick:z,children:[T,R&&jsxRuntimeExports.jsx("span",{className:"visually-hidden",children:R})]}),(_||u!==W-1)&&jsxRuntimeExports.jsxs(Anchor,{className:`${P}-control-next`,onClick:K,children:[j,w&&jsxRuntimeExports.jsx("span",{className:"visually-hidden",children:w})]})]})]})});Carousel.displayName="Carousel";const Carousel$1=Object.assign(Carousel,{Caption:CarouselCaption,Item:CarouselItem});var ArrowForwardIos={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(ArrowForwardIos,"__esModule",{value:!0});var default_1$2=ArrowForwardIos.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=ArrowForwardIos.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");var FavoriteBorder={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(FavoriteBorder,"__esModule",{value:!0});var default_1$1=FavoriteBorder.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=FavoriteBorder.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder");const FavouriteChannelsStrip=reactExports.memo(({favorites:e=[],maxDesktop:t=12,isMobile:n})=>{const r=e.slice(0,n?10:t),{user:i}=useAuth(),{checkChannelAccess:s}=usePremiumAccess(),[a,o]=reactExports.useState(new Set),[l,c]=reactExports.useState(!1);reactExports.useEffect(()=>{r.length>0&&(async()=>{const e=new Set;for(const t of r)await isContentPremium("channel",t._id)&&e.add(t._id);o(e)})()},[r]);return jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",py:{xs:3,md:5},px:{xs:1,md:2}},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,px:{xs:1,md:1}},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",fontWeight:800,sx:{display:"flex",alignItems:"center",gap:1,letterSpacing:".5px"},children:jsxRuntimeExports.jsx("span",{className:"fav-gradient-text",children:"Favourite Channels"})}),jsxRuntimeExports.jsx(Tooltip,{title:"View all favourites",arrow:!0,children:jsxRuntimeExports.jsx(IconButton,{component:Link,to:"/favorites",size:"small",sx:{background:"linear-gradient(135deg, var(--cyan) 0%, var(--violet) 100%)",color:"#fff",boxShadow:"0 4px 16px -4px rgba(0,0,0,.4)","&:hover":{opacity:.9}},children:jsxRuntimeExports.jsx(default_1$2,{sx:{fontSize:16}})})})]}),jsxRuntimeExports.jsx(Box,{className:"fav-strip",sx:{display:"grid",gap:{xs:1.5,sm:2,md:2.5},gridTemplateColumns:{xs:`repeat(${r.length}, minmax(120px, 140px))`,sm:"repeat(auto-fill, minmax(140px, 1fr))"},overflowX:{xs:"auto",sm:"visible"},pb:{xs:1,sm:0},scrollSnapType:{xs:"x mandatory",sm:"none"}},children:r.map(e=>{var t;const n=e.logoUrl?e.logoUrl.startsWith("http")?e.logoUrl:`undefined${e.logoUrl}`:null;return jsxRuntimeExports.jsx("div",{className:"fav-card",style:{textDecoration:"none",cursor:"pointer"},onClick:t=>(async(e,t)=>{if(e.preventDefault(),a.has(t._id)){if(!i)return void(window.location.href="/login?redirect="+encodeURIComponent(generateChannelUrl(t._id,t.name)));if(!(await s(t._id)).hasAccess)return void c(!0)}window.location.href=generateChannelUrl(t._id,t.name)})(t,e),children:jsxRuntimeExports.jsxs("div",{className:"fav-card-inner",children:[jsxRuntimeExports.jsx("div",{className:"fav-card-glow"}),jsxRuntimeExports.jsxs("div",{className:"fav-thumb-wrap",children:[n?jsxRuntimeExports.jsx("img",{src:n,alt:e.name,loading:"lazy",onError:e=>{e.currentTarget.style.visibility="hidden"}}):jsxRuntimeExports.jsx("div",{className:"fav-thumb-fallback",children:(null==(t=e.name)?void 0:t[0])||"?"}),a.has(e._id)&&jsxRuntimeExports.jsx(PremiumBadge,{isPremium:!0,variant:"chip",size:"small",sx:{position:"absolute",top:4,left:4,transform:"scale(0.8)"}})]}),jsxRuntimeExports.jsxs("div",{className:"fav-meta",children:[jsxRuntimeExports.jsx("h3",{title:e.name,children:e.name}),jsxRuntimeExports.jsxs("span",{className:"fav-channel-number",children:["CH ",e.channelNumber||"-"]})]})]})},e._id)})}),jsxRuntimeExports.jsx(PurchasePackage,{open:l,onClose:()=>c(!1)})]})}),Home=()=>{const e=useTheme(),t=useMediaQuery(e.breakpoints.down("md"));useMediaQuery(e.breakpoints.down("lg"));const{settings:n}=useSettings(),{favorites:r}=useFavorites(),[i,s]=reactExports.useState([]),[a,o]=reactExports.useState([]),[l,c]=reactExports.useState([]),[u,d]=reactExports.useState([]),[h,p]=reactExports.useState([]),[m,f]=reactExports.useState(!0),[g,x]=reactExports.useState(new Set);reactExports.useEffect(()=>{Array.isArray(u)||(console.warn("popularChannels is not an array, resetting to empty array"),d([]))},[u]),reactExports.useEffect(()=>{},[h]),reactExports.useEffect(()=>{(async()=>{try{0;const e=async(e,t=[],n="Unknown API")=>{var r,i,s,a;try{0;0;const n=(await e()).data;return Array.isArray(n)?n:t}catch(o){return console.error(` ${n} failed:`,{message:o.message,status:null==(r=o.response)?void 0:r.status,data:null==(i=o.response)?void 0:i.data,baseURL:null==(s=o.config)?void 0:s.baseURL,url:null==(a=o.config)?void 0:a.url}),t}},[t,n,r,i,a]=await Promise.all([e(channelsAPI.getAll,[],"Channels API"),e(categoriesAPI.getAll,[],"Categories API"),e(eventsAPI.getCarousel,[],"Events API"),e(()=>channelsAPI.getPopular(15),[],"Popular Channels API"),e(()=>channelsAPI.getPopularSports(12),[],"Popular Sports Channels API")]);0;let l=i;i&&!Array.isArray(i)&&i&&"object"==typeof i&&i.data&&(l=i.data),s(Array.isArray(t)?t:[]),o(Array.isArray(n)?n:[]),c(Array.isArray(r)?r:[]),d(Array.isArray(l)?l:[]),p(Array.isArray(a)?a:[]),r&&r.length}catch(e){console.error("Error fetching homepage data:",e),s([]),o([]),c([]),d([]),p([]),console.error("Setting fallback empty arrays due to error")}finally{f(!1)}})()},[]);const v=(e,t="")=>{const n=new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"});return t?`${n} at ${t}`:n},y=e=>{if(!e)return"";if(e.startsWith("http"))return e;return`undefined${e}`},_=e=>{if(!e)return"";if(e.startsWith("http"))return e;return`undefined${e}`},E=e=>{const t=new Date,n=new Date(e.startDate),r=new Date(e.endDate);return t>=n&&t<=r};if(m)return jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",height:300});if(!(Array.isArray(u)&&Array.isArray(l)&&Array.isArray(i)&&Array.isArray(a)&&Array.isArray(h)))return console.error("State validation failed:",{popularChannels:Array.isArray(u),events:Array.isArray(l),channels:Array.isArray(i),categories:Array.isArray(a),popularSportsChannels:Array.isArray(h)}),Array.isArray(u)||d([]),Array.isArray(l)||c([]),Array.isArray(i)||s([]),Array.isArray(a)||o([]),Array.isArray(h)||p([]),jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",height:300});const b=generateHomepageMetaTags(n),C=b.siteTitle||(null==n?void 0:n.websiteTitle)||(null==n?void 0:n.websiteName)||(null==n?void 0:n.title)||"BDStream",S=renderHomepageStructuredData();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:b.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:b.description}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:b.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:b.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:b.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:b.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:b.ogImage}),jsxRuntimeExports.jsx("meta",{property:"og:site_name",content:C}),jsxRuntimeExports.jsx("meta",{property:"og:locale",content:"en_US"}),jsxRuntimeExports.jsx("meta",{property:"og:locale:alternate",content:"bn_BD"}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:b.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:b.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:b.twitterImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:site",content:"@bdstreamsite"}),jsxRuntimeExports.jsx("meta",{name:"twitter:creator",content:"@bdstreamsite"}),jsxRuntimeExports.jsx("meta",{name:"robots",content:"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"}),jsxRuntimeExports.jsx("meta",{name:"author",content:C}),jsxRuntimeExports.jsx("meta",{name:"language",content:"English"}),jsxRuntimeExports.jsx("meta",{name:"revisit-after",content:"1 days"}),jsxRuntimeExports.jsx("meta",{name:"distribution",content:"global"}),jsxRuntimeExports.jsx("meta",{name:"rating",content:"general"}),jsxRuntimeExports.jsx("meta",{name:"classification",content:"Entertainment"}),jsxRuntimeExports.jsx("meta",{name:"category",content:"Streaming Service"}),jsxRuntimeExports.jsx("meta",{name:"coverage",content:"Worldwide"}),jsxRuntimeExports.jsx("meta",{name:"target",content:"all"}),jsxRuntimeExports.jsx("meta",{name:"HandheldFriendly",content:"true"}),jsxRuntimeExports.jsx("meta",{name:"format-detection",content:"telephone=no"}),jsxRuntimeExports.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),jsxRuntimeExports.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),jsxRuntimeExports.jsx("meta",{name:"apple-mobile-web-app-title",content:C}),jsxRuntimeExports.jsx("meta",{name:"application-name",content:C}),jsxRuntimeExports.jsx("meta",{name:"theme-color",content:"#1976d2"}),jsxRuntimeExports.jsx("meta",{name:"msapplication-TileColor",content:"#1976d2"}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:b.ogUrl}),S]}),jsxRuntimeExports.jsx(HeroLanding,{siteTitle:C,tagline:(null==n?void 0:n.homepageTagline)||"Stream live TV, sports & events instantly",categories:a,channelsCount:i.length,eventsCount:l.length,favouritesCount:r.length,popularCount:u.length}),jsxRuntimeExports.jsxs(Box,{className:"container-fluid",sx:{minHeight:"100vh",backgroundColor:"background.default",color:"text.primary",padding:0,margin:0,maxWidth:"100%",overflow:"hidden"},children:[l.length>0&&jsxRuntimeExports.jsx(Box,{sx:{position:"relative",height:{xs:"50vh",sm:"60vh",md:"70vh"},overflow:"hidden",backgroundColor:"background.paper"},children:jsxRuntimeExports.jsx(Carousel$1,{interval:5e3,pause:"hover",indicators:l.length>1,controls:l.length>1,className:"vibrant-slider",fade:!0,children:Array.isArray(l)&&l.length>0?l.map((t,n)=>{var r,i,s,a,o,l,c;return jsxRuntimeExports.jsxs(Carousel$1.Item,{children:[jsxRuntimeExports.jsx("div",{className:"slider-background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:t.imageUrl&&!g.has(t._id)?`linear-gradient(135deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.4) 100%), url(${_(t.imageUrl)})`:(e.palette.mode,"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:t.imageUrl&&jsxRuntimeExports.jsx("img",{src:_(t.imageUrl),alt:"",style:{display:"none"},onError:()=>x(e=>new Set([...e,t._id]))})}),jsxRuntimeExports.jsx("div",{className:"animated-pattern"}),jsxRuntimeExports.jsx("div",{className:"slider-content",children:jsxRuntimeExports.jsx(Container,{maxWidth:"xl",children:jsxRuntimeExports.jsxs("div",{className:"content-wrapper",children:[jsxRuntimeExports.jsxs("div",{className:"content-left",children:[jsxRuntimeExports.jsxs("div",{className:"status-badge "+(E(t)?"live":"upcoming"),children:[jsxRuntimeExports.jsx("div",{className:"badge-icon",children:E(t)?"":""}),jsxRuntimeExports.jsx("span",{className:"badge-text",children:E(t)?"LIVE NOW":"UPCOMING EVENT"}),E(t)&&jsxRuntimeExports.jsx("div",{className:"pulse-ring"})]}),jsxRuntimeExports.jsx("h1",{className:"event-heading",children:t.title}),t.description&&jsxRuntimeExports.jsx("p",{className:"event-summary",children:t.description}),jsxRuntimeExports.jsx("div",{className:"event-details",children:jsxRuntimeExports.jsxs("div",{className:"time-info",children:[jsxRuntimeExports.jsx(AccessTime,{className:"time-icon"}),jsxRuntimeExports.jsxs("span",{children:[v(t.startDate,t.startTime)," - ",v(t.endDate,t.endTime)]})]})}),jsxRuntimeExports.jsxs("div",{className:"action-group",children:[jsxRuntimeExports.jsx(Button$2,{component:Link,to:generateChannelUrl(null==(r=t.linkedChannel)?void 0:r._id,null==(i=t.linkedChannel)?void 0:i.name),variant:"contained",size:"large",startIcon:jsxRuntimeExports.jsx(PlayArrow,{}),className:"primary-action "+(E(t)?"live-action":"watch-action"),children:E(t)?" Watch Live":" Watch Now"}),jsxRuntimeExports.jsx(Button$2,{component:Link,to:"/channels",variant:"outlined",size:"large",startIcon:jsxRuntimeExports.jsx(LiveTv$1,{}),className:"secondary-action",children:"Browse All Channels"})]})]}),jsxRuntimeExports.jsx("div",{className:"content-right",children:jsxRuntimeExports.jsx("div",{className:"channel-info-card",children:jsxRuntimeExports.jsxs("div",{className:"channel-header",children:[jsxRuntimeExports.jsx("div",{className:"channel-logo-container",children:jsxRuntimeExports.jsx("img",{src:(null==(s=t.linkedChannel)?void 0:s.logoUrl)?y(t.linkedChannel.logoUrl):"/logo.png",alt:(null==(a=t.linkedChannel)?void 0:a.name)||"Channel Logo",onError:e=>{e.target.src="/logo.png"},className:"channel-logo"})}),jsxRuntimeExports.jsxs("div",{className:"channel-details",children:[jsxRuntimeExports.jsx("h3",{className:"channel-title",children:(null==(o=t.linkedChannel)?void 0:o.name)||"Unknown Channel"}),jsxRuntimeExports.jsxs("p",{className:"channel-subtitle",children:["Channel ",(null==(l=t.linkedChannel)?void 0:l.channelNumber)||"N/A"]}),(null==(c=t.linkedChannel)?void 0:c.region)&&jsxRuntimeExports.jsx("span",{className:"channel-tag",children:t.linkedChannel.region})]})]})})})]})})})]},t._id)}):jsxRuntimeExports.jsx(Box,{sx:{textAlign:"center",py:8,color:"text.secondary"},children:jsxRuntimeExports.jsx(Typography,{variant:"h6",children:"No events available at the moment."})})})}),r&&r.length>0&&jsxRuntimeExports.jsx(FavouriteChannelsStrip,{favorites:r,isMobile:t}),Array.isArray(l)&&l.length>0&&jsxRuntimeExports.jsxs(Box,{sx:{background:"dark"===e.palette.mode?"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f1419 100%)":"linear-gradient(135deg, #00bcd4 0%, #0097a7 50%, #006064 100%)",py:{xs:6,md:10},position:"relative",overflow:"hidden"},children:[jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"dark"===e.palette.mode?"radial-gradient(circle at 25% 25%, rgba(255,255,255,0.05) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(255,255,255,0.05) 0%, transparent 50%)":"radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(255,255,255,0.1) 0%, transparent 50%)",pointerEvents:"none"}}),jsxRuntimeExports.jsx(Container,{maxWidth:"lg",children:jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",position:"relative",zIndex:1},children:[jsxRuntimeExports.jsx(Box,{sx:{width:100,height:100,borderRadius:"50%",background:"dark"===e.palette.mode?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:4,backdropFilter:"blur(10px)",border:"dark"===e.palette.mode?"2px solid rgba(255,255,255,0.2)":"2px solid rgba(255,255,255,0.3)"},children:jsxRuntimeExports.jsx(PlayArrow,{sx:{fontSize:50,color:"white"}})}),jsxRuntimeExports.jsx(Typography,{variant:"h2",component:"h2",fontWeight:"bold",sx:{mb:3,color:"white",textShadow:"dark"===e.palette.mode?"0 2px 4px rgba(0,0,0,0.5)":"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"2.5rem",md:"3.5rem"}},children:"Ready to Start Watching?"}),jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mb:5,color:"dark"===e.palette.mode?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.9)",textShadow:"dark"===e.palette.mode?"0 1px 2px rgba(0,0,0,0.3)":"0 1px 2px rgba(0,0,0,0.2)",maxWidth:600,mx:"auto",lineHeight:1.4},children:"Discover thousands of live TV channels and start streaming your favorite content instantly"}),jsxRuntimeExports.jsx(Button$2,{component:Link,to:"/channels",variant:"contained",size:"large",startIcon:jsxRuntimeExports.jsx(LiveTv$1,{sx:{fontSize:28}}),sx:{backgroundColor:"dark"===e.palette.mode?"#ffffff":"white",color:"dark"===e.palette.mode?"#1a1a2e":"#00bcd4",fontSize:{xs:"1.1rem",md:"1.3rem"},fontWeight:700,px:{xs:4,md:6},py:{xs:2,md:2.5},borderRadius:"50px",boxShadow:"dark"===e.palette.mode?"0 8px 32px rgba(0,0,0,0.5)":"0 8px 32px rgba(0,0,0,0.3)",textTransform:"none","&:hover":{backgroundColor:(e.palette.mode,"rgba(255,255,255,0.9)"),transform:"translateY(-2px)",boxShadow:"dark"===e.palette.mode?"0 12px 40px rgba(0,0,0,0.6)":"0 12px 40px rgba(0,0,0,0.4)",transition:"all 0.3s ease"},transition:"all 0.3s ease"},children:"Start Enjoying TV Channels"}),jsxRuntimeExports.jsxs(Box,{sx:{mt:4,display:"flex",justifyContent:"center",gap:{xs:2,md:4},flexWrap:"wrap"},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(CheckCircle,{sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)",fontSize:20}}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)"},children:"Free to Watch"})]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(CheckCircle,{sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)",fontSize:20}}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)"},children:"HD Quality"})]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(CheckCircle,{sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)",fontSize:20}}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)"},children:"No Registration"})]})]})]})})]}),0===l.length&&jsxRuntimeExports.jsxs(Box,{sx:{background:"dark"===e.palette.mode?"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f1419 100%)":"linear-gradient(135deg, #00bcd4 0%, #0097a7 50%, #006064 100%)",py:{xs:6,md:10},position:"relative",overflow:"hidden"},children:[jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"dark"===e.palette.mode?"radial-gradient(circle at 25% 25%, rgba(255,255,255,0.05) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(255,255,255,0.05) 0%, transparent 50%)":"radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(255,255,255,0.1) 0%, transparent 50%)",pointerEvents:"none"}}),jsxRuntimeExports.jsx(Container,{maxWidth:"lg",children:jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",position:"relative",zIndex:1},children:[jsxRuntimeExports.jsx(Box,{sx:{width:100,height:100,borderRadius:"50%",background:"dark"===e.palette.mode?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:4,backdropFilter:"blur(10px)",border:"dark"===e.palette.mode?"2px solid rgba(255,255,255,0.2)":"2px solid rgba(255,255,255,0.3)"},children:jsxRuntimeExports.jsx(PlayArrow,{sx:{fontSize:50,color:"white"}})}),jsxRuntimeExports.jsx(Typography,{variant:"h2",component:"h2",fontWeight:"bold",sx:{mb:3,color:"white",textShadow:"dark"===e.palette.mode?"0 2px 4px rgba(0,0,0,0.5)":"0 2px 4px rgba(0,0,0,0.3)",fontSize:{xs:"2.5rem",md:"3.5rem"}},children:"Ready to Start Watching?"}),jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mb:5,color:"dark"===e.palette.mode?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.9)",textShadow:"dark"===e.palette.mode?"0 1px 2px rgba(0,0,0,0.3)":"0 1px 2px rgba(0,0,0,0.2)",maxWidth:600,mx:"auto",lineHeight:1.4},children:"Discover thousands of live TV channels and start streaming your favorite content instantly"}),jsxRuntimeExports.jsx(Button$2,{component:Link,to:"/channels",variant:"contained",size:"large",startIcon:jsxRuntimeExports.jsx(LiveTv$1,{sx:{fontSize:28}}),sx:{backgroundColor:"dark"===e.palette.mode?"#ffffff":"white",color:"dark"===e.palette.mode?"#1a1a2e":"#00bcd4",fontSize:{xs:"1.1rem",md:"1.3rem"},fontWeight:700,px:{xs:4,md:6},py:{xs:2,md:2.5},borderRadius:"50px",boxShadow:"dark"===e.palette.mode?"0 8px 32px rgba(0,0,0,0.5)":"0 8px 32px rgba(0,0,0,0.3)",textTransform:"none","&:hover":{backgroundColor:(e.palette.mode,"rgba(255,255,255,0.9)"),transform:"translateY(-2px)",boxShadow:"dark"===e.palette.mode?"0 12px 40px rgba(0,0,0,0.6)":"0 12px 40px rgba(0,0,0,0.4)",transition:"all 0.3s ease"},transition:"all 0.3s ease"},children:"Start Enjoying TV Channels"}),jsxRuntimeExports.jsxs(Box,{sx:{mt:4,display:"flex",justifyContent:"center",gap:{xs:2,md:4},flexWrap:"wrap"},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(CheckCircle,{sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)",fontSize:20}}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)"},children:"Free to Watch"})]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(CheckCircle,{sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)",fontSize:20}}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)"},children:"HD Quality"})]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(CheckCircle,{sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)",fontSize:20}}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{color:"dark"===e.palette.mode?"rgba(255,255,255,0.7)":"rgba(255,255,255,0.8)"},children:"No Registration"})]})]})]})})]}),jsxRuntimeExports.jsx(Box,{sx:{backgroundColor:"dark"===e.palette.mode?"rgba(255,87,34,0.05)":"rgba(255,87,34,0.02)",py:{xs:3,sm:4,md:8}},children:jsxRuntimeExports.jsx("div",{className:"container-fluid",children:h.length>0?jsxRuntimeExports.jsx(PopularSportsCarousel,{channels:h}):jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",py:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"text.secondary",children:" Popular Sports Channels Section"}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Loading sports channels... (API returned ",(null==h?void 0:h.length)||0," channels)"]}),!1]})})}),jsxRuntimeExports.jsx(Box,{sx:{backgroundColor:"dark"===e.palette.mode?"rgba(255,255,255,0.04)":"#f5f5f5",py:{xs:3,sm:4,md:8}},children:jsxRuntimeExports.jsxs("div",{className:"container-fluid",children:[jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mb:{xs:3,sm:4,md:6}},children:[jsxRuntimeExports.jsx(Typography,{variant:"h3",component:"h2",fontWeight:"bold",sx:{mb:2,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:{xs:"1.75rem",sm:"2.25rem",md:"3rem"},px:{xs:1,sm:0}},children:"Popular Channels"}),jsxRuntimeExports.jsx(Typography,{variant:"h6",component:"p",sx:{color:"text.secondary",fontSize:{xs:"1rem",sm:"1.1rem",md:"1.2rem"},fontWeight:400,maxWidth:"800px",mx:"auto",px:{xs:2,sm:0}},children:"Watch the most popular live TV channels online. High-quality streaming with no registration required."})]}),jsxRuntimeExports.jsx(Box,{className:"channels-grid",sx:{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(3, 1fr)",md:"repeat(4, 1fr)",lg:"repeat(4, 1fr)",xl:"repeat(5, 1fr)"},gap:{xs:2,sm:3,md:3,lg:4},mb:4},children:Array.isArray(u)&&u.length>0?u.map(e=>jsxRuntimeExports.jsx(Card,{className:"modern-tv-card",sx:{borderRadius:3,overflow:"hidden",background:"var(--glass-bg)",backdropFilter:"blur(12px)",border:"1px solid var(--glass-border)",boxShadow:"0 8px 32px rgba(0,0,0,0.12)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",height:"100%",display:"flex",flexDirection:"column","&:hover":{transform:"translateY(-8px)",boxShadow:"0 20px 60px rgba(0,0,0,0.25)",borderColor:"rgba(124, 77, 255, 0.3)"}},children:jsxRuntimeExports.jsxs(CardActionArea,{component:Link,to:generateChannelUrl(e._id,e.name),sx:{position:"relative",height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch"},children:[jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",height:{xs:100,sm:120,md:140},display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.05) 100%)",overflow:"hidden"},children:[jsxRuntimeExports.jsx(CardMedia,{component:"img",image:y(e.logoUrl),alt:e.name,sx:{objectFit:"contain",maxHeight:"80%",maxWidth:"80%",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}},onError:t=>{console.error("Failed to load logo for channel:",e.name,"URL:",y(e.logoUrl)),t.target.style.display="none"}}),jsxRuntimeExports.jsxs(Box,{sx:{position:"absolute",top:8,right:8,display:"flex",alignItems:"center",gap:.5,px:1,py:.5,borderRadius:"12px",background:"linear-gradient(135deg, #ff4757 0%, #ff3742 100%)",color:"white",fontSize:"0.7rem",fontWeight:600,boxShadow:"0 2px 8px rgba(255, 71, 87, 0.3)"},children:[jsxRuntimeExports.jsx(Box,{sx:{width:6,height:6,borderRadius:"50%",background:"white",animation:"pulse 2s infinite"}}),"LIVE"]}),jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:0,transition:"opacity 0.3s ease",".modern-tv-card:hover &":{opacity:1}},children:jsxRuntimeExports.jsx(Avatar,{sx:{width:48,height:48,background:"linear-gradient(135deg, var(--cyan) 0%, var(--violet) 100%)",boxShadow:"0 8px 24px rgba(0, 188, 212, 0.4)"},children:jsxRuntimeExports.jsx(PlayArrow,{sx:{fontSize:28}})})})]}),jsxRuntimeExports.jsxs(CardContent,{sx:{p:2,flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",background:"linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.02) 100%)"},children:[jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle1",sx:{fontWeight:700,fontSize:{xs:"0.875rem",sm:"1rem"},lineHeight:1.3,mb:1,color:"var(--text-primary)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:e.name}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",sx:{color:"var(--text-secondary)",fontWeight:500,fontSize:"0.75rem",display:"flex",alignItems:"center",gap:.5},children:[jsxRuntimeExports.jsx(LiveTv$1,{sx:{fontSize:14}}),"CH ",e.channelNumber]})]}),jsxRuntimeExports.jsxs(Box,{sx:{mt:1.5,display:"flex",flexWrap:"wrap",gap:.5},children:[e.category&&jsxRuntimeExports.jsx(Chip,{label:e.category.name,size:"small",sx:{fontSize:"0.65rem",height:20,background:"rgba(124, 77, 255, 0.1)",color:"var(--violet)",border:"1px solid rgba(124, 77, 255, 0.2)"}}),e.region&&jsxRuntimeExports.jsx(Chip,{label:e.region,size:"small",sx:{fontSize:"0.65rem",height:20,background:"rgba(0, 188, 212, 0.1)",color:"var(--cyan)",border:"1px solid rgba(0, 188, 212, 0.2)"}})]})]})]})},e._id)):jsxRuntimeExports.jsx(Box,{sx:{gridColumn:"1 / -1",textAlign:"center",py:4,color:"text.secondary"},children:jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"No popular channels available at the moment."})})})]})}),jsxRuntimeExports.jsxs("div",{className:"container-fluid",style:{padding:"2rem 0"},children:[jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mb:{xs:3,sm:4,md:8}},children:[jsxRuntimeExports.jsx(Typography,{variant:"h2",component:"h2",fontWeight:"bold",sx:{mb:2,color:"text.primary",fontSize:{xs:"1.75rem",sm:"2.25rem",md:"3rem"},background:"linear-gradient(135deg, #2196f3, #1976d2)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",px:{xs:1,sm:0}},children:"Why Choose Our Live TV Streaming?"}),jsxRuntimeExports.jsx(Typography,{variant:"h6",sx:{color:"text.secondary",maxWidth:"600px",mx:"auto",fontSize:{xs:"1rem",md:"1.25rem"}},children:"Experience the future of television with our cutting-edge streaming platform"})]}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:{xs:3,md:4},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",textAlign:"center",p:{xs:3,md:4},background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",color:"text.primary",border:"1px solid #e0e0e0",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",borderRadius:3,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #2196f3, #64b5f6)"},"&:hover":{transform:"translateY(-12px)",transition:"all 0.4s ease",boxShadow:"0 12px 40px rgba(33, 150, 243, 0.25)",border:"1px solid #2196f3"}},children:[jsxRuntimeExports.jsx(Box,{sx:{width:80,height:80,borderRadius:"50%",background:"linear-gradient(135deg, #e3f2fd, #bbdefb)",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:3},children:jsxRuntimeExports.jsx(LiveTv$1,{sx:{fontSize:40,color:"#2196f3"}})}),jsxRuntimeExports.jsx(Typography,{variant:"h5",fontWeight:"bold",sx:{mb:2,color:"text.primary"},children:"HD Quality"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{color:"text.secondary",lineHeight:1.6},children:"Crystal clear HD streaming with superior video quality and minimal buffering"})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",textAlign:"center",p:{xs:3,md:4},background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",color:"text.primary",border:"1px solid #e0e0e0",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",borderRadius:3,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #4caf50, #81c784)"},"&:hover":{transform:"translateY(-12px)",transition:"all 0.4s ease",boxShadow:"0 12px 40px rgba(76, 175, 80, 0.25)",border:"1px solid #4caf50"}},children:[jsxRuntimeExports.jsx(Box,{sx:{width:80,height:80,borderRadius:"50%",background:"linear-gradient(135deg, #e8f5e8, #c8e6c9)",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:3},children:jsxRuntimeExports.jsx(TrendingUp,{sx:{fontSize:40,color:"#4caf50"}})}),jsxRuntimeExports.jsx(Typography,{variant:"h5",fontWeight:"bold",sx:{mb:2,color:"text.primary"},children:"Live Updates"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{color:"text.secondary",lineHeight:1.6},children:"Real-time content updates and live streaming with instant notifications"})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",textAlign:"center",p:{xs:3,md:4},background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",color:"text.primary",border:"1px solid #e0e0e0",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",borderRadius:3,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #ffc107, #ffd54f)"},"&:hover":{transform:"translateY(-12px)",transition:"all 0.4s ease",boxShadow:"0 12px 40px rgba(255, 193, 7, 0.25)",border:"1px solid #ffc107"}},children:[jsxRuntimeExports.jsx(Box,{sx:{width:80,height:80,borderRadius:"50%",background:"linear-gradient(135deg, #fff8e1, #ffecb3)",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:3},children:jsxRuntimeExports.jsx(Star$1,{sx:{fontSize:40,color:"#ffc107"}})}),jsxRuntimeExports.jsx(Typography,{variant:"h5",fontWeight:"bold",sx:{mb:2,color:"text.primary"},children:"Premium Content"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{color:"text.secondary",lineHeight:1.6},children:"Access free live tv channels and exclusive content from around the world"})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",textAlign:"center",p:{xs:3,md:4},background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",color:"text.primary",border:"1px solid #e0e0e0",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",borderRadius:3,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #9c27b0, #ba68c8)"},"&:hover":{transform:"translateY(-12px)",transition:"all 0.4s ease",boxShadow:"0 12px 40px rgba(156, 39, 176, 0.25)",border:"1px solid #9c27b0"}},children:[jsxRuntimeExports.jsx(Box,{sx:{width:80,height:80,borderRadius:"50%",background:"linear-gradient(135deg, #f3e5f5, #e1bee7)",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:3},children:jsxRuntimeExports.jsx(FamilyRestroom,{sx:{fontSize:40,color:"#9c27b0"}})}),jsxRuntimeExports.jsx(Typography,{variant:"h5",fontWeight:"bold",sx:{mb:2,color:"text.primary"},children:"Family Friendly"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{color:"text.secondary",lineHeight:1.6},children:"Safe content for the whole family with parental controls and filtering"})]})})]})]}),jsxRuntimeExports.jsx(Box,{sx:{background:"dark"===e.palette.mode?"linear-gradient(135deg, #0a0f14 0%, #101827 100%)":"linear-gradient(135deg, #00bcd4 0%, #7c4dff 100%)",py:{xs:4,md:8},textAlign:"center",color:"white"},children:jsxRuntimeExports.jsxs("div",{className:"container-fluid",children:[jsxRuntimeExports.jsx(Typography,{variant:"h3",component:"h2",fontWeight:"bold",sx:{mb:3,color:"white"},children:"Ready to Start Streaming?"}),jsxRuntimeExports.jsx(Typography,{variant:"h6",sx:{mb:4,opacity:.9,color:"#e3f2fd"},children:"Join thousands of users enjoying live TV streaming right now"}),jsxRuntimeExports.jsx(Button$2,{component:Link,to:"/channels",variant:"contained",size:"large",startIcon:jsxRuntimeExports.jsx(PlayArrow,{}),className:"cta-contrast",children:"Start Free Streaming Now"})]})}),jsxRuntimeExports.jsx("style",{children:"\n        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800;900&display=swap');\n        \n        @keyframes pulse {\n          0% { opacity: 1; transform: scale(1); }\n          50% { opacity: 0.7; transform: scale(1.05); }\n          100% { opacity: 1; transform: scale(1); }\n        }\n        \n        @keyframes fadeInUp {\n          from {\n            opacity: 0;\n            transform: translateY(40px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        \n        @keyframes float {\n          0%, 100% { transform: translateY(0px); }\n          50% { transform: translateY(-10px); }\n        }\n        \n        @keyframes gradientShift {\n          0% { background-position: 0% 50%; }\n          50% { background-position: 100% 50%; }\n          100% { background-position: 0% 50%; }\n        }\n        \n        @keyframes shimmer {\n          0% { transform: translateX(-100%); }\n          100% { transform: translateX(100%); }\n        }\n        \n        /* Vibrant Slider Styles */\n        .vibrant-slider {\n          height: 100% !important;\n          font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        }\n        \n        .vibrant-slider .carousel-inner {\n          height: 100% !important;\n        }\n        \n        .vibrant-slider .carousel-item {\n          height: 100% !important;\n        }\n        \n        .slider-background {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background-size: cover !important;\n          background-position: center !important;\n          background-repeat: no-repeat !important;\n          animation: gradientShift 8s ease infinite;\n        }\n        \n        .animated-pattern {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: \n            radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),\n            radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),\n            radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);\n          pointer-events: none;\n          animation: float 6s ease-in-out infinite;\n        }\n        \n        .slider-content {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          display: flex;\n          align-items: center;\n          z-index: 3;\n          padding: 2rem 0;\n          width: 100%;\n          max-width: 100%;\n          box-sizing: border-box;\n          overflow: hidden;\n        }\n        \n        .content-wrapper {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          width: 100%;\n          gap: 3rem;\n          max-width: 1400px;\n          margin: 0 auto;\n          padding: 0 2rem;\n          box-sizing: border-box;\n          overflow: hidden;\n        }\n        \n        /* Bootstrap-style responsive utilities */\n        .container-fluid {\n          width: 100%;\n          padding-right: 15px;\n          padding-left: 15px;\n          margin-right: auto;\n          margin-left: auto;\n          box-sizing: border-box;\n        }\n        \n        .row {\n          display: flex;\n          flex-wrap: wrap;\n          margin-right: -15px;\n          margin-left: -15px;\n          box-sizing: border-box;\n        }\n        \n        .col {\n          flex: 1 0 0%;\n          padding-right: 15px;\n          padding-left: 15px;\n          box-sizing: border-box;\n        }\n        \n        .col-12 {\n          flex: 0 0 100%;\n          max-width: 100%;\n          padding-right: 15px;\n          padding-left: 15px;\n          box-sizing: border-box;\n        }\n        \n        .content-left {\n          flex: 1;\n          max-width: 600px;\n          animation: fadeInUp 0.8s ease-out;\n        }\n        \n        .content-right {\n          flex-shrink: 0;\n          animation: fadeInUp 0.8s ease-out 0.2s both;\n        }\n        \n        /* Status Badge */\n        .status-badge {\n          display: inline-flex;\n          align-items: center;\n          gap: 0.75rem;\n          padding: 0.75rem 1.5rem;\n          border-radius: 50px;\n          font-weight: 600;\n          font-size: 0.875rem;\n          letter-spacing: 0.5px;\n          text-transform: uppercase;\n          margin-bottom: 2rem;\n          position: relative;\n          backdrop-filter: blur(20px);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n        }\n        \n        .status-badge.live {\n          background: linear-gradient(135deg, #ff6b6b, #ee5a24);\n          color: white;\n        }\n        \n        .status-badge.upcoming {\n          background: linear-gradient(135deg, #667eea, #764ba2);\n          color: white;\n        }\n        \n        .badge-icon {\n          font-size: 1.25rem;\n          animation: pulse 2s infinite;\n        }\n        \n        .badge-text {\n          font-weight: 700;\n          letter-spacing: 1px;\n        }\n        \n        .pulse-ring {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: 100%;\n          height: 100%;\n          border: 2px solid rgba(255, 255, 255, 0.3);\n          border-radius: 50px;\n          animation: pulse 2s infinite;\n        }\n        \n        /* Event Heading */\n        .event-heading {\n          font-family: 'Poppins', sans-serif;\n          font-size: clamp(2.5rem, 6vw, 4rem);\n          font-weight: 800;\n          line-height: 1.1;\n          margin-bottom: 1.5rem;\n          color: white;\n          text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n          background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 50%, #e3f2fd 100%);\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n          background-clip: text;\n          letter-spacing: -0.02em;\n        }\n        \n        /* Event Summary */\n        .event-summary {\n          font-size: 1.125rem;\n          line-height: 1.6;\n          margin-bottom: 2rem;\n          color: rgba(255, 255, 255, 0.9);\n          text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n          font-weight: 400;\n          max-width: 500px;\n        }\n        \n        /* Event Details */\n        .event-details {\n          margin-bottom: 2.5rem;\n        }\n        \n        .time-info {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n          color: rgba(255, 255, 255, 0.8);\n          font-weight: 500;\n          font-size: 1rem;\n        }\n        \n        .time-icon {\n          font-size: 1.5rem !important;\n          color: #667eea;\n        }\n        \n        /* Action Group */\n        .action-group {\n          display: flex;\n          flex-direction: column;\n          gap: 1rem;\n          align-items: flex-start;\n        }\n        \n        .primary-action {\n          background: linear-gradient(135deg, #667eea, #764ba2) !important;\n          color: white !important;\n          border: none !important;\n          padding: 1rem 2rem !important;\n          border-radius: 50px !important;\n          font-weight: 600 !important;\n          text-transform: none !important;\n          font-size: 1rem !important;\n          letter-spacing: 0.5px !important;\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n          box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4) !important;\n          position: relative;\n          overflow: hidden;\n        }\n        \n        .primary-action::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: -100%;\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n          transition: left 0.5s;\n        }\n        \n        .primary-action:hover::before {\n          left: 100%;\n        }\n        \n        .primary-action:hover {\n          transform: translateY(-3px) !important;\n          box-shadow: 0 12px 35px rgba(102, 126, 234, 0.6) !important;\n          background: linear-gradient(135deg, #764ba2, #667eea) !important;\n        }\n        \n        .live-action {\n          background: linear-gradient(135deg, #ff6b6b, #ee5a24) !important;\n          box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4) !important;\n        }\n        \n        .live-action:hover {\n          box-shadow: 0 12px 35px rgba(255, 107, 107, 0.6) !important;\n          background: linear-gradient(135deg, #ee5a24, #ff6b6b) !important;\n        }\n        \n        .secondary-action {\n          color: white !important;\n          border: 2px solid rgba(255, 255, 255, 0.3) !important;\n          background: rgba(255, 255, 255, 0.1) !important;\n          padding: 1rem 2rem !important;\n          border-radius: 50px !important;\n          font-weight: 600 !important;\n          text-transform: none !important;\n          font-size: 1rem !important;\n          letter-spacing: 0.5px !important;\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n          backdrop-filter: blur(20px) !important;\n        }\n        \n        .secondary-action:hover {\n          background: rgba(255, 255, 255, 0.2) !important;\n          border-color: rgba(255, 255, 255, 0.5) !important;\n          transform: translateY(-3px) !important;\n          box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2) !important;\n        }\n        \n        /* Channel Info Card */\n        .channel-info-card {\n          background: rgba(255, 255, 255, 0.95);\n          backdrop-filter: blur(30px);\n          border: 1px solid rgba(255, 255, 255, 0.3);\n          border-radius: 1.5rem;\n          padding: 2rem;\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);\n          transition: all 0.3s ease;\n          min-width: 280px;\n        }\n        \n        .channel-info-card:hover {\n          transform: translateY(-5px);\n          box-shadow: 0 30px 80px rgba(0, 0, 0, 0.2);\n        }\n        \n        .channel-header {\n          text-align: center;\n        }\n        \n        .channel-logo-container {\n          margin-bottom: 1.5rem;\n        }\n        \n        .channel-logo {\n          width: 80px;\n          height: 80px;\n          object-fit: contain;\n          border-radius: 1rem;\n          background: linear-gradient(135deg, #f8f9ff, #e3f2fd);\n          padding: 1rem;\n          box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2);\n          transition: all 0.3s ease;\n        }\n        \n        .channel-logo:hover {\n          transform: scale(1.05);\n          box-shadow: 0 12px 35px rgba(102, 126, 234, 0.3);\n        }\n        \n        .channel-title {\n          font-family: 'Poppins', sans-serif;\n          font-size: 1.5rem;\n          font-weight: 700;\n          margin-bottom: 0.5rem;\n          color: #2d3748;\n          letter-spacing: -0.01em;\n        }\n        \n        .channel-subtitle {\n          font-size: 1rem;\n          color: #718096;\n          margin-bottom: 1rem;\n          font-weight: 500;\n        }\n        \n        .channel-tag {\n          background: linear-gradient(135deg, #667eea, #764ba2);\n          color: white;\n          padding: 0.5rem 1rem;\n          border-radius: 25px;\n          font-size: 0.875rem;\n          font-weight: 600;\n          letter-spacing: 0.5px;\n        }\n        \n        /* Carousel Controls */\n        .vibrant-slider .carousel-control-prev,\n        .vibrant-slider .carousel-control-next {\n          width: 60px !important;\n          height: 60px !important;\n          background: rgba(255, 255, 255, 0.15) !important;\n          border-radius: 50% !important;\n          top: 50% !important;\n          transform: translateY(-50%) !important;\n          margin: 0 2rem !important;\n          backdrop-filter: blur(20px) !important;\n          border: 1px solid rgba(255, 255, 255, 0.2) !important;\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n        }\n        \n        .vibrant-slider .carousel-control-prev:hover,\n        .vibrant-slider .carousel-control-next:hover {\n          background: rgba(255, 255, 255, 0.25) !important;\n          transform: translateY(-50%) scale(1.1) !important;\n          box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2) !important;\n        }\n        \n        .vibrant-slider .carousel-indicators {\n          bottom: 3rem !important;\n        }\n        \n        .vibrant-slider .carousel-indicators button {\n          width: 16px !important;\n          height: 16px !important;\n          border-radius: 50% !important;\n          margin: 0 0.5rem !important;\n          background-color: rgba(255, 255, 255, 0.4) !important;\n          border: 2px solid transparent !important;\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n        }\n        \n        .vibrant-slider .carousel-indicators button.active {\n          background: linear-gradient(135deg, #667eea, #764ba2) !important;\n          border-color: white !important;\n          transform: scale(1.3) !important;\n          box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4) !important;\n        }\n        \n        .vibrant-slider .carousel-indicators button:hover {\n          background-color: rgba(255, 255, 255, 0.8) !important;\n          transform: scale(1.2) !important;\n        }\n        \n        /* Responsive Design */\n        @media (max-width: 1024px) {\n          .content-wrapper {\n            gap: 2rem;\n            padding: 0 1.5rem;\n          }\n          \n          .event-heading {\n            font-size: clamp(2rem, 5vw, 3rem);\n          }\n          \n          .channel-info-card {\n            min-width: 250px;\n            padding: 1.5rem;\n          }\n        }\n        \n        @media (max-width: 768px) {\n          .vibrant-slider {\n            height: 60vh !important;\n          }\n          \n          .slider-content {\n            padding: 1rem 0;\n          }\n          \n          .content-wrapper {\n            flex-direction: column;\n            text-align: center;\n            gap: 1.5rem;\n            padding: 0 1rem;\n            max-width: 100%;\n            width: 100%;\n            box-sizing: border-box;\n            overflow: hidden;\n          }\n          \n          /* Bootstrap responsive utilities for mobile */\n          .container-fluid {\n            padding-right: 10px;\n            padding-left: 10px;\n          }\n          \n          .row {\n            margin-right: -10px;\n            margin-left: -10px;\n          }\n          \n          .col, .col-12 {\n            padding-right: 10px;\n            padding-left: 10px;\n          }\n          \n          .content-left {\n            max-width: 100%;\n            order: 1;\n          }\n          \n          .content-right {\n            order: 2;\n            width: 100%;\n          }\n          \n          .action-group {\n            align-items: center;\n            gap: 0.75rem;\n          }\n          \n          .event-heading {\n            font-size: clamp(1.5rem, 4vw, 2rem);\n            margin-bottom: 1rem;\n            line-height: 1.2;\n          }\n          \n          .event-summary {\n            font-size: 0.9rem;\n            margin-bottom: 1rem;\n            line-height: 1.4;\n          }\n          \n          .status-badge {\n            margin-bottom: 1rem;\n            padding: 0.5rem 1rem;\n            font-size: 0.75rem;\n            gap: 0.5rem;\n          }\n          \n          .badge-icon {\n            font-size: 1rem;\n          }\n          \n          .channel-info-card {\n            min-width: auto;\n            width: 100%;\n            max-width: 300px;\n            margin: 0 auto;\n            padding: 1.5rem;\n          }\n          \n          .channel-logo {\n            width: 60px;\n            height: 60px;\n            padding: 0.75rem;\n          }\n          \n          .channel-title {\n            font-size: 1.1rem;\n            margin-bottom: 0.25rem;\n          }\n          \n          .channel-subtitle {\n            font-size: 0.9rem;\n            margin-bottom: 0.75rem;\n          }\n          \n          .channel-tag {\n            padding: 0.4rem 0.8rem;\n            font-size: 0.8rem;\n          }\n          \n          .time-info {\n            font-size: 0.9rem;\n            gap: 0.5rem;\n            margin-bottom: 1.5rem;\n          }\n          \n          .time-icon {\n            font-size: 1.25rem !important;\n          }\n          \n          .primary-action,\n          .secondary-action {\n            padding: 0.75rem 1.5rem !important;\n            font-size: 0.9rem !important;\n            width: 100%;\n            max-width: 280px;\n          }\n          \n          .vibrant-slider .carousel-control-prev,\n          .vibrant-slider .carousel-control-next {\n            width: 45px !important;\n            height: 45px !important;\n            margin: 0 1rem !important;\n          }\n          \n          .vibrant-slider .carousel-indicators {\n            bottom: 1.5rem !important;\n          }\n          \n          .vibrant-slider .carousel-indicators button {\n            width: 12px !important;\n            height: 12px !important;\n            margin: 0 0.25rem !important;\n          }\n        }\n        \n        @media (max-width: 480px) {\n          .vibrant-slider {\n            height: 50vh !important;\n          }\n          \n          .slider-content {\n            padding: 0.5rem 0;\n          }\n          \n          .content-wrapper {\n            padding: 0 0.5rem;\n            gap: 1rem;\n            width: 100%;\n            box-sizing: border-box;\n            overflow: hidden;\n          }\n          \n          /* Bootstrap responsive utilities for small mobile */\n          .container-fluid {\n            padding-right: 8px;\n            padding-left: 8px;\n          }\n          \n          .row {\n            margin-right: -8px;\n            margin-left: -8px;\n          }\n          \n          .col, .col-12 {\n            padding-right: 8px;\n            padding-left: 8px;\n          }\n          \n          .event-heading {\n            font-size: clamp(1.25rem, 3.5vw, 1.75rem);\n            margin-bottom: 0.75rem;\n          }\n          \n          .event-summary {\n            font-size: 0.8rem;\n            margin-bottom: 0.75rem;\n            line-height: 1.3;\n          }\n          \n          .status-badge {\n            margin-bottom: 0.75rem;\n            padding: 0.4rem 0.8rem;\n            font-size: 0.7rem;\n          }\n          \n          .badge-icon {\n            font-size: 0.9rem;\n          }\n          \n          .channel-info-card {\n            padding: 1rem;\n            max-width: 280px;\n          }\n          \n          .channel-logo {\n            width: 50px;\n            height: 50px;\n            padding: 0.5rem;\n          }\n          \n          .channel-title {\n            font-size: 1rem;\n          }\n          \n          .channel-subtitle {\n            font-size: 0.8rem;\n            margin-bottom: 0.5rem;\n          }\n          \n          .channel-tag {\n            padding: 0.3rem 0.6rem;\n            font-size: 0.7rem;\n          }\n          \n          .time-info {\n            font-size: 0.8rem;\n            margin-bottom: 1rem;\n          }\n          \n          .time-icon {\n            font-size: 1.1rem !important;\n          }\n          \n          .action-group {\n            gap: 0.5rem;\n          }\n          \n          .primary-action,\n          .secondary-action {\n            padding: 0.6rem 1.2rem !important;\n            font-size: 0.8rem !important;\n            max-width: 250px;\n          }\n          \n          .vibrant-slider .carousel-control-prev,\n          .vibrant-slider .carousel-control-next {\n            width: 40px !important;\n            height: 40px !important;\n            margin: 0 0.5rem !important;\n          }\n          \n          .vibrant-slider .carousel-indicators {\n            bottom: 1rem !important;\n          }\n          \n          .vibrant-slider .carousel-indicators button {\n            width: 10px !important;\n            height: 10px !important;\n            margin: 0 0.2rem !important;\n          }\n        }\n        \n        @media (max-width: 360px) {\n          .vibrant-slider {\n            height: 45vh !important;\n          }\n          \n          .content-wrapper {\n            padding: 0 0.25rem;\n            gap: 0.75rem;\n            width: 100%;\n            box-sizing: border-box;\n          }\n          \n          .event-heading {\n            font-size: clamp(1.1rem, 3vw, 1.5rem);\n          }\n          \n          .event-summary {\n            font-size: 0.75rem;\n          }\n          \n          .status-badge {\n            padding: 0.3rem 0.6rem;\n            font-size: 0.65rem;\n          }\n          \n          .channel-info-card {\n            padding: 0.75rem;\n            max-width: 260px;\n          }\n          \n          .channel-logo {\n            width: 45px;\n            height: 45px;\n            padding: 0.4rem;\n          }\n          \n          .primary-action,\n          .secondary-action {\n            padding: 0.5rem 1rem !important;\n            font-size: 0.75rem !important;\n            max-width: 220px;\n          }\n        }\n        \n        /* Dark Theme Adjustments */\n        [data-mui-color-scheme=\"dark\"] .channel-info-card {\n          background: rgba(255, 255, 255, 0.1);\n          border-color: rgba(255, 255, 255, 0.1);\n        }\n        \n        [data-mui-color-scheme=\"dark\"] .channel-title {\n          color: white;\n        }\n        \n        [data-mui-color-scheme=\"dark\"] .channel-subtitle {\n          color: rgba(255, 255, 255, 0.7);\n        }\n        \n        [data-mui-color-scheme=\"dark\"] .channel-logo {\n          background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));\n        }\n      "})]})]})},Login=()=>{const[e,t]=reactExports.useState({identifier:"",password:""}),[n,r]=reactExports.useState(""),[i,s]=reactExports.useState(""),[a,o]=reactExports.useState(!1),{login:l,isAdmin:c}=useAuth(),u=useNavigate(),[d]=useSearchParams(),{settings:h}=useSettings(),p=generateGenericPageMetaTags("login",h),m=n=>{t({...e,[n.target.name]:n.target.value})};return jsxRuntimeExports.jsxs(Container,{maxWidth:"sm",children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:p.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:p.description}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:p.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:p.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:p.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:p.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:p.ogImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:p.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:p.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:p.twitterImage}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:p.ogUrl})]}),jsxRuntimeExports.jsx(Box,{sx:{mt:8,mb:4},children:jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",align:"center",gutterBottom:!0,children:"Login"}),n&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},children:n}),i&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},children:i}),jsxRuntimeExports.jsxs(Box,{component:"form",onSubmit:async t=>{var n;t.preventDefault(),r(""),s(""),o(!0);try{const t=e.identifier.includes("@");if(!t){const t=e.identifier.replace(/\D/g,"");if(!/^[0-9]{10,11}$/.test(t))return r("Please enter a valid phone number (10-11 digits) or email address"),void o(!1);e.identifier=t}console.log(" Attempting login with:",{identifier:e.identifier,isEmail:t,identifierLength:e.identifier.length});const i=await l(e.identifier,e.password);if(console.log(" Login result:",i),i.success&&i.user){s("Login successful! Redirecting..."),console.log(" Login successful:",i.user),console.log(" User role:",null==(n=i.user)?void 0:n.role),setTimeout(()=>{const e=d.get("redirect");e?(console.log(" Redirecting to requested URL:",e),u(e)):i.user&&["admin","superadmin"].includes(i.user.role)?(console.log(" Redirecting to admin panel"),u("/admin")):(console.log(" Redirecting to dashboard"),u("/dashboard"))},1500);const e=i.user&&["admin","superadmin"].includes(i.user.role)?"admin panel":"dashboard";s(`Login successful! Redirecting to ${e}...`)}else{const e=i.message||"Login failed. Please check your credentials.";console.error(" Login failed:",e),r(e)}}catch(i){console.error(" Login error:",i),i.response?404===i.response.status?r("Authentication service not available. Please contact support."):i.response.status>=500?r("Server error. Please try again later."):r("An unexpected error occurred. Please try again."):r("Unable to connect to server. Please check your internet connection or contact support.")}finally{o(!1)}},sx:{mt:3},children:[jsxRuntimeExports.jsx(TextField,{margin:"normal",required:!0,fullWidth:!0,id:"identifier",label:"Email or Phone Number",name:"identifier",autoComplete:"username",autoFocus:!0,value:e.identifier,onChange:m,helperText:"You can login with your email address or phone number"}),jsxRuntimeExports.jsx(TextField,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:e.password,onChange:m}),jsxRuntimeExports.jsx(Button$2,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:a,children:a?"Signing In...":"Sign In"}),jsxRuntimeExports.jsx(Box,{sx:{textAlign:"center"},children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",children:["Don't have an account?"," ",jsxRuntimeExports.jsx(Link$1,{component:Link,to:"/register",variant:"body2",children:"Sign up"})]})})]})]})})]})},Register=()=>{const[e,t]=reactExports.useState({name:"",email:"",password:"",confirmPassword:"",fullName:"",gender:"",dateOfBirth:"",phoneNumber:""}),[n,r]=reactExports.useState(null),[i,s]=reactExports.useState(""),[a,o]=reactExports.useState(""),[l,c]=reactExports.useState(""),[u,d]=reactExports.useState(!1),{register:h}=useAuth(),p=useNavigate(),m=n=>{t({...e,[n.target.name]:n.target.value})},{settings:f}=useSettings(),g=generateGenericPageMetaTags("register",f);return jsxRuntimeExports.jsxs(Container,{maxWidth:"sm",children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:g.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:g.description}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:g.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:g.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:g.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:g.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:g.ogImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:g.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:g.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:g.twitterImage}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:g.ogUrl})]}),jsxRuntimeExports.jsx(Box,{sx:{mt:8,mb:4},children:jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",align:"center",gutterBottom:!0,children:"Register"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",align:"center",color:"text.secondary",sx:{mb:3},children:"Create a new user account for BdStream"}),a&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},children:a}),l&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},children:l}),jsxRuntimeExports.jsxs(Box,{component:"form",onSubmit:async t=>{if(t.preventDefault(),o(""),c(""),!e.phoneNumber.trim())return void o("Phone number is required");if(/^[0-9]{10,11}$/.test(e.phoneNumber.trim()))if(e.password===e.confirmPassword)if(e.password.length<6)o("Password must be at least 6 characters long");else{d(!0);try{console.log(" Attempting registration...");const t={name:e.name,email:e.email,password:e.password};t.phoneNumber=e.phoneNumber.trim(),e.fullName.trim()&&(t.fullName=e.fullName.trim()),e.gender&&(t.gender=e.gender),e.dateOfBirth&&(t.dateOfBirth=e.dateOfBirth);const n=await h(t);if(console.log(" Registration result:",n),n.success&&n.user)c("Registration successful! Redirecting to your dashboard..."),console.log(" Registration successful, redirecting to login page"),setTimeout(()=>{p("/dashboard")},1500);else{const e=n.message||"Registration failed. Please try again.";console.error(" Registration failed:",e),o(e)}}catch(n){console.error(" Registration error:",n),n.response?404===n.response.status?o("Registration service not available. Please contact support."):n.response.status>=500?o("Server error. Please try again later."):o("An unexpected error occurred. Please try again."):o("Unable to connect to server. Please check your internet connection or contact support.")}finally{d(!1)}}else o("Passwords do not match");else o("Please enter a valid phone number (10-11 digits)")},sx:{mt:3},children:[jsxRuntimeExports.jsx(Box,{sx:{display:"flex",justifyContent:"center",mb:3},children:jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",display:"inline-flex"},children:[jsxRuntimeExports.jsx(Avatar,{src:i,sx:{width:100,height:100,bgcolor:"grey.300"},children:!i&&jsxRuntimeExports.jsx(PhotoCamera,{sx:{fontSize:40,color:"grey.500"}})}),jsxRuntimeExports.jsxs(IconButton,{component:"label",sx:{position:"absolute",bottom:-5,right:-5,bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},width:35,height:35},children:[jsxRuntimeExports.jsx(PhotoCamera,{sx:{fontSize:20}}),jsxRuntimeExports.jsx("input",{hidden:!0,accept:"image/*",type:"file",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void o("Profile picture must be less than 25MB");if(!t.type.startsWith("image/"))return void o("Please select a valid image file");r(t);const e=new FileReader;e.onloadend=()=>{s(e.result)},e.readAsDataURL(t)}}})]})]})}),jsxRuntimeExports.jsx(Typography,{variant:"caption",display:"block",textAlign:"center",color:"text.secondary",sx:{mb:2},children:"Profile picture is optional (max 25MB)"}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Display Name",name:"name",autoComplete:"name",autoFocus:!0,value:e.name,onChange:m,helperText:"This will be shown publicly"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{margin:"normal",fullWidth:!0,id:"fullName",label:"Full Name",name:"fullName",autoComplete:"name",value:e.fullName,onChange:m,helperText:"Your complete name (optional)"})})]}),jsxRuntimeExports.jsx(TextField,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:e.email,onChange:m,type:"email"}),jsxRuntimeExports.jsx(TextField,{margin:"normal",required:!0,fullWidth:!0,id:"phoneNumber",label:"Phone Number",name:"phoneNumber",autoComplete:"tel",value:e.phoneNumber,onChange:m,helperText:"Required - You can use phone number to login later",InputProps:{startAdornment:jsxRuntimeExports.jsx(InputAdornment,{position:"start",children:"+880"})}}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,sx:{mt:1},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(FormLabel,{component:"legend",children:"Gender"}),jsxRuntimeExports.jsxs(RadioGroup$1,{row:!0,name:"gender",value:e.gender,onChange:m,children:[jsxRuntimeExports.jsx(FormControlLabel,{value:"male",control:jsxRuntimeExports.jsx(Radio$1,{}),label:"Male"}),jsxRuntimeExports.jsx(FormControlLabel,{value:"female",control:jsxRuntimeExports.jsx(Radio$1,{}),label:"Female"}),jsxRuntimeExports.jsx(FormControlLabel,{value:"other",control:jsxRuntimeExports.jsx(Radio$1,{}),label:"Other"})]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{margin:"normal",fullWidth:!0,id:"dateOfBirth",label:"Date of Birth",name:"dateOfBirth",type:"date",value:e.dateOfBirth,onChange:m,InputLabelProps:{shrink:!0}})})]}),jsxRuntimeExports.jsx(TextField,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:e.password,onChange:m}),jsxRuntimeExports.jsx(TextField,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",autoComplete:"new-password",value:e.confirmPassword,onChange:m}),jsxRuntimeExports.jsx(Button$2,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:u,children:u?"Creating Account...":"Create Account"}),jsxRuntimeExports.jsx(Box,{sx:{textAlign:"center"},children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",children:["Already have an account?"," ",jsxRuntimeExports.jsx(Link$1,{component:Link,to:"/login",variant:"body2",children:"Sign in"})]})})]})]})})]})},PremiumGate=({children:e,channelId:t=null,categoryId:n=null,regionId:r=null,showUpgradePrompt:i=!0,fallbackComponent:s=null})=>{const{checkChannelAccess:a,checkCategoryAccess:o,checkRegionAccess:l}=usePremiumAccess(),[c,u]=reactExports.useState({hasAccess:null,loading:!0}),[d,h]=reactExports.useState(!1),[p,m]=reactExports.useState(!1),[f,g]=reactExports.useState([]),[x,v]=reactExports.useState([]),[y,_]=reactExports.useState(!1);reactExports.useEffect(()=>{E()},[t,n,r]);const E=async()=>{u({hasAccess:null,loading:!0});try{let e;e=t?await a(t):n?await o(n):r?await l(r):{hasAccess:!0},u({hasAccess:e.hasAccess,loading:!1,reason:e.reason,accessiblePackages:e.accessiblePackages}),!e.hasAccess&&i&&b()}catch(e){console.error("Access check failed:",e),u({hasAccess:!1,loading:!1,reason:"Access check failed"})}},b=async()=>{try{_(!0);const[e,n]=await Promise.all([userPackagesAPI.getAvailable(),adsAPI.getAvailable(t?{packageId:t}:{})]);g(e.data||[]),v(n.data||[])}catch(e){console.error("Failed to load upgrade options:",e)}finally{_(!1)}},C=()=>{h(!0)},S=()=>{m(!0)};return c.loading?jsxRuntimeExports.jsx(Box,{display:"flex",justifyContent:"center",alignItems:"center",py:4,children:jsxRuntimeExports.jsx(CircularProgress,{})}):c.hasAccess?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[i?jsxRuntimeExports.jsx(Card,{sx:{maxWidth:400,mx:"auto",mt:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{textAlign:"center",p:3},children:[jsxRuntimeExports.jsx(Avatar,{sx:{bgcolor:"primary.main",mx:"auto",mb:2,width:60,height:60},children:jsxRuntimeExports.jsx(Lock,{sx:{fontSize:30}})}),jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"Premium Content"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:c.reason||"This content requires an active premium package to access."}),jsxRuntimeExports.jsx(Box,{display:"flex",gap:1,justifyContent:"center",mb:2,children:jsxRuntimeExports.jsx(Button$2,{variant:"contained",startIcon:jsxRuntimeExports.jsx(Star$1,{}),onClick:C,fullWidth:!0,children:"View Packages"})}),jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",children:"Unlock premium channels, HD quality, and ad-free experience"})]})}):s||null,jsxRuntimeExports.jsxs(Dialog,{open:d,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,children:[jsxRuntimeExports.jsxs(DialogTitle,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",children:"Upgrade Required"}),jsxRuntimeExports.jsx(Button$2,{onClick:()=>h(!1),size:"small",children:jsxRuntimeExports.jsx(Close,{})})]}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(Alert,{severity:"info",sx:{mb:3},children:"To access this content, you need an active premium package."}),y?jsxRuntimeExports.jsx(Box,{display:"flex",justifyContent:"center",py:4,children:jsxRuntimeExports.jsx(CircularProgress,{})}):jsxRuntimeExports.jsxs(Box,{children:[f.length>0&&jsxRuntimeExports.jsxs(Box,{mb:3,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Available Packages"}),jsxRuntimeExports.jsx(List$1,{children:f.slice(0,3).map(e=>jsxRuntimeExports.jsxs(ListItem,{divider:!0,children:[jsxRuntimeExports.jsx(ListItemIcon,{children:jsxRuntimeExports.jsx(Star$1,{color:"primary"})}),jsxRuntimeExports.jsx(ListItemText,{primary:e.name,secondary:jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(AttachMoney,{}),label:`${e.price}`,size:"small",color:"primary"}),jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(Schedule,{}),label:`${e.duration} ${e.durationUnit||"days"}`,size:"small"})]})})]},e._id))})]}),x.length>0&&jsxRuntimeExports.jsxs(Box,{mb:3,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Watch Ads to Unlock"}),jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},children:"Watch a short advertisement to get temporary access!"}),x.slice(0,2).map(e=>jsxRuntimeExports.jsx(Card,{sx:{mb:2,cursor:"pointer"},onClick:()=>{return t=e.adUrl,window.open(t,"_blank"),void h(!1);var t},children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:2,children:[jsxRuntimeExports.jsx(PlayArrow,{color:"primary"}),jsxRuntimeExports.jsxs(Box,{flexGrow:1,children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",fontWeight:"bold",children:e.title}),jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",children:e.description})]}),jsxRuntimeExports.jsx(Box,{textAlign:"right",children:jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(ViewIcon,{}),label:`${e.minimumViewTime}s`,size:"small",color:"secondary"})})]})})},e._id))]})]})]}),jsxRuntimeExports.jsxs(DialogActions,{sx:{flexDirection:"column",gap:1,p:3},children:[jsxRuntimeExports.jsx(Button$2,{variant:"contained",fullWidth:!0,onClick:S,startIcon:jsxRuntimeExports.jsx(Star$1,{}),children:"View All Packages"}),jsxRuntimeExports.jsx(Button$2,{variant:"text",fullWidth:!0,onClick:()=>h(!1),children:"Maybe Later"})]})]}),jsxRuntimeExports.jsx(PurchasePackage,{open:p,onClose:()=>{m(!1),h(!1)}})]})},Channels=()=>{const[e,t]=reactExports.useState([]),[n,r]=reactExports.useState(!0),[i,s]=reactExports.useState([]),[a,o]=useSearchParams(),[l,c]=reactExports.useState(a.get("q")||""),[u,d]=reactExports.useState(""),[h,p]=reactExports.useState(""),[m,f]=reactExports.useState(null),[g,x]=reactExports.useState("newest"),[v,y]=reactExports.useState(1),{user:_}=useAuth(),{checkChannelAccess:E}=usePremiumAccess(),[b,C]=reactExports.useState(new Set),[S,T]=reactExports.useState(!1),[R,j]=reactExports.useState(null),{settings:w}=useSettings(),A=generateChannelsPageMetaTags(w),I=A.siteTitle||(null==w?void 0:w.websiteTitle)||(null==w?void 0:w.websiteName)||(null==w?void 0:w.title)||"BDStream";reactExports.useEffect(()=>{(async()=>{var e,n;try{const[r,i]=await Promise.all([channelsAPI.getAll(),categoriesAPI.getAll()]);console.log("Channels API response:",{data:r.data,isArray:Array.isArray(r.data),type:typeof r.data,length:null==(e=r.data)?void 0:e.length}),console.log("Categories API response:",{data:i.data,isArray:Array.isArray(i.data),type:typeof i.data,length:null==(n=i.data)?void 0:n.length});const a=Array.isArray(r.data)?r.data:[];if(t(a),s(Array.isArray(i.data)?i.data:[]),a.length>0){const e=await bulkCheckPremiumChannels(a),t=new Set;e.forEach((e,n)=>{e&&t.add(n)}),C(t)}}catch(i){console.error("Error fetching data:",i),t([]),s([])}finally{r(!1)}})()},[]);const k=e=>{if(!e)return"";if(e.startsWith("http"))return e;const t=void 0,n=`undefined${e}`;return console.log("Logo URL construction:",{original:e,baseUrl:t,fullUrl:n}),n},M=reactExports.useMemo(()=>{if(!Array.isArray(i)||0===i.length)return[];const e=i.find(e=>e.name.toLowerCase().includes("sport")),t=i.filter(e=>!e.name.toLowerCase().includes("sport"));return e?[e,...t]:i},[i]),P=reactExports.useMemo(()=>{if(!Array.isArray(e)||0===e.length)return[];const t=new Set;return e.forEach(e=>{e.region&&t.add(e.region)}),Array.from(t).sort()},[e]),L=reactExports.useMemo(()=>{if(!Array.isArray(e)||0===e.length)return[];let t=[...e.filter(e=>{var t;return e.name.toLowerCase().includes(l.toLowerCase())&&(""===u||e.region===u)&&(""===h||(null==(t=e.category)?void 0:t._id)===h)})];"newest"===g?t.sort((e,t)=>new Date(t.createdAt||0)-new Date(e.createdAt||0)):"oldest"===g?t.sort((e,t)=>new Date(e.createdAt||0)-new Date(t.createdAt||0)):"atoz"===g?t.sort((e,t)=>e.name.localeCompare(t.name)):"random"===g&&t.sort(()=>Math.random()-.5);return!l&&!u&&!h&&(t=t.sort((e,t)=>{const n=(e.region||"").toLowerCase(),r=(t.region||"").toLowerCase(),i=n.includes("bangladesh")||n.includes("bangladeshi"),s=r.includes("bangladesh")||r.includes("bangladeshi");return i&&!s?-1:!i&&s?1:0})),t},[e,l,u,h,g]),D=Math.max(1,Math.ceil((Array.isArray(L)?L.length:0)/18)),O=Array.isArray(L)?L.slice(18*(v-1),18*v):[],$=()=>f(null),N=e=>{x(e),$()};return reactExports.useEffect(()=>{const e=a.get("q")||"";e!==l&&(c(e),y(1))},[a]),reactExports.useEffect(()=>{const e=(l||"").trim(),t={};e&&(t.q=e),o(t,{replace:!0})},[l,o]),n?jsxRuntimeExports.jsx(Container,{maxWidth:"xl",children:jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",gutterBottom:!0,children:"Loading channels..."})}):Array.isArray(e)&&Array.isArray(i)?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:A.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:A.description}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:A.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:A.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:A.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:A.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:A.ogImage}),jsxRuntimeExports.jsx("meta",{property:"og:site_name",content:I}),jsxRuntimeExports.jsx("meta",{property:"og:locale",content:"en_US"}),jsxRuntimeExports.jsx("meta",{property:"og:locale:alternate",content:"bn_BD"}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:A.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:A.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:A.twitterImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:site",content:"@bdstreamsite"}),jsxRuntimeExports.jsx("meta",{name:"twitter:creator",content:"@bdstreamsite"}),jsxRuntimeExports.jsx("meta",{name:"robots",content:"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"}),jsxRuntimeExports.jsx("meta",{name:"author",content:I}),jsxRuntimeExports.jsx("meta",{name:"language",content:"English"}),jsxRuntimeExports.jsx("meta",{name:"revisit-after",content:"1 days"}),jsxRuntimeExports.jsx("meta",{name:"distribution",content:"global"}),jsxRuntimeExports.jsx("meta",{name:"rating",content:"general"}),jsxRuntimeExports.jsx("meta",{name:"classification",content:"Entertainment"}),jsxRuntimeExports.jsx("meta",{name:"category",content:"Streaming Service"}),jsxRuntimeExports.jsx("meta",{name:"coverage",content:"Worldwide"}),jsxRuntimeExports.jsx("meta",{name:"target",content:"all"}),jsxRuntimeExports.jsx("meta",{name:"HandheldFriendly",content:"true"}),jsxRuntimeExports.jsx("meta",{name:"format-detection",content:"telephone=no"}),jsxRuntimeExports.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),jsxRuntimeExports.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),jsxRuntimeExports.jsx("meta",{name:"apple-mobile-web-app-title",content:I}),jsxRuntimeExports.jsx("meta",{name:"application-name",content:I}),jsxRuntimeExports.jsx("meta",{name:"theme-color",content:"#1976d2"}),jsxRuntimeExports.jsx("meta",{name:"msapplication-TileColor",content:"#1976d2"}),jsxRuntimeExports.jsx("meta",{name:"geo.region",content:"BD"}),jsxRuntimeExports.jsx("meta",{name:"geo.placename",content:"Bangladesh"}),jsxRuntimeExports.jsx("meta",{name:"geo.position",content:"23.6850;90.3563"}),jsxRuntimeExports.jsx("meta",{name:"ICBM",content:"23.6850, 90.3563"}),jsxRuntimeExports.jsx("meta",{name:"DC.title",content:A.title}),jsxRuntimeExports.jsx("meta",{name:"DC.description",content:A.description}),jsxRuntimeExports.jsx("meta",{name:"DC.subject",content:A.keywords}),jsxRuntimeExports.jsx("meta",{name:"DC.creator",content:I}),jsxRuntimeExports.jsx("meta",{name:"DC.publisher",content:I}),jsxRuntimeExports.jsx("meta",{name:"DC.contributor",content:I}),jsxRuntimeExports.jsx("meta",{name:"DC.date",content:(new Date).toISOString()}),jsxRuntimeExports.jsx("meta",{name:"DC.type",content:"InteractiveResource"}),jsxRuntimeExports.jsx("meta",{name:"DC.format",content:"text/html"}),jsxRuntimeExports.jsx("meta",{name:"DC.identifier",content:A.ogUrl}),jsxRuntimeExports.jsx("meta",{name:"DC.language",content:"en"}),jsxRuntimeExports.jsx("meta",{name:"DC.coverage",content:"Worldwide"}),jsxRuntimeExports.jsx("meta",{name:"DC.rights",content:`Copyright ${(new Date).getFullYear()} ${I}`}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:A.ogUrl})]}),jsxRuntimeExports.jsxs("div",{className:"container-fluid",style:{padding:"1rem 0"},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},alignItems:{xs:"stretch",lg:"center"},justifyContent:"space-between",mb:4,gap:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",sx:{fontWeight:800},children:"Live TV"}),jsxRuntimeExports.jsxs(Box,{className:"channels-toolbar",sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},gap:2,width:{xs:"100%",lg:"auto"},alignItems:{xs:"stretch",lg:"center"}},children:[jsxRuntimeExports.jsx(TextField,{size:"small",placeholder:"Search channels...",value:l,onChange:e=>{c(e.target.value),y(1)},sx:{minWidth:{xs:"100%",lg:"200px"},maxWidth:{lg:"250px"}}}),jsxRuntimeExports.jsxs(FormControl,{size:"small",sx:{minWidth:{xs:"100%",lg:"180px"}},children:[jsxRuntimeExports.jsx(InputLabel,{children:"Category"}),jsxRuntimeExports.jsxs(Select$1,{value:h,label:"Category",onChange:e=>{p(e.target.value),y(1)},children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"",children:"All Categories"}),Array.isArray(M)&&M.map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e._id,children:e.name},e._id))]})]}),jsxRuntimeExports.jsxs(FormControl,{size:"small",sx:{minWidth:{xs:"100%",lg:"180px"}},children:[jsxRuntimeExports.jsx(InputLabel,{children:"Region"}),jsxRuntimeExports.jsxs(Select$1,{value:u,label:"Region",onChange:e=>{d(e.target.value),y(1)},children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"",children:"All Regions"}),Array.isArray(P)&&P.map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e,children:e},e))]})]}),jsxRuntimeExports.jsx(IconButton,{onClick:e=>f(e.currentTarget),className:"pill",sx:{borderRadius:"12px",alignSelf:{xs:"flex-start",lg:"center"},minWidth:"48px",height:"40px"},children:jsxRuntimeExports.jsx(FilterList,{fontSize:"small"})}),jsxRuntimeExports.jsxs(Menu$3,{anchorEl:m,open:Boolean(m),onClose:$,children:[jsxRuntimeExports.jsx(MenuItem$1,{selected:"newest"===g,onClick:()=>N("newest"),children:"Newest"}),jsxRuntimeExports.jsx(MenuItem$1,{selected:"oldest"===g,onClick:()=>N("oldest"),children:"Oldest"}),jsxRuntimeExports.jsx(MenuItem$1,{selected:"atoz"===g,onClick:()=>N("atoz"),children:"A to Z"}),jsxRuntimeExports.jsx(MenuItem$1,{selected:"random"===g,onClick:()=>N("random"),children:"Random"})]})]})]}),Array.isArray(L)&&0===L.length&&!n&&jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mt:5,textAlign:"center"},children:"No channels found matching your criteria."}),jsxRuntimeExports.jsx(Box,{className:"channels-grid container-fluid",sx:{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(3, 1fr)",md:"repeat(4, 1fr)",lg:"repeat(4, 1fr)",xl:"repeat(5, 1fr)"},gap:{xs:2,sm:3,md:3,lg:4},mb:4,width:"100%",maxWidth:"100%",boxSizing:"border-box",overflow:"hidden"},children:Array.isArray(O)&&O.map(e=>jsxRuntimeExports.jsx(Card,{className:"modern-tv-card",sx:{borderRadius:3,overflow:"hidden",background:"var(--glass-bg)",backdropFilter:"blur(12px)",border:"1px solid var(--glass-border)",boxShadow:"0 8px 32px rgba(0,0,0,0.12)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",height:"100%",display:"flex",flexDirection:"column","&:hover":{transform:"translateY(-8px)",boxShadow:"0 20px 60px rgba(0,0,0,0.25)",borderColor:"rgba(124, 77, 255, 0.3)"}},children:jsxRuntimeExports.jsxs(CardActionArea,{onClick:t=>(async(e,t)=>{if(e.preventDefault(),b.has(t._id)){if(!_)return console.log(`Redirecting to login for premium channel: ${t.name}`),void(window.location.href="/login?redirect="+encodeURIComponent(generateChannelUrl(t._id,t.name)));const e=await E(t._id);if(console.log(`Access check for channel ${t.name}:`,e),!e.hasAccess)return console.log(`Blocking access to premium channel ${t.name}: ${e.reason}`),j(t),void T(!0)}window.location.href=generateChannelUrl(t._id,t.name)})(t,e),sx:{position:"relative",height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch"},children:[jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",height:{xs:100,sm:120,md:140},display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.05) 100%)",overflow:"hidden"},children:[jsxRuntimeExports.jsx(CardMedia,{component:"img",image:k(e.logoUrl),alt:e.name,sx:{objectFit:"contain",maxHeight:"80%",maxWidth:"80%",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}},onError:t=>{console.error("Failed to load logo for channel:",e.name,"URL:",k(e.logoUrl)),t.target.style.display="none"},onLoad:()=>{console.log("Logo loaded successfully for channel:",e.name,"URL:",k(e.logoUrl))}}),b.has(e._id)&&jsxRuntimeExports.jsx(PremiumBadge,{isPremium:!0,variant:"chip",size:"small",sx:{position:"absolute",top:8,left:8}}),jsxRuntimeExports.jsxs(Box,{sx:{position:"absolute",top:8,right:8,display:"flex",alignItems:"center",gap:.5,px:1,py:.5,borderRadius:"12px",background:"linear-gradient(135deg, #ff4757 0%, #ff3742 100%)",color:"white",fontSize:"0.7rem",fontWeight:600,boxShadow:"0 2px 8px rgba(255, 71, 87, 0.3)"},children:[jsxRuntimeExports.jsx(Box,{sx:{width:6,height:6,borderRadius:"50%",background:"white",animation:"pulse 2s infinite"}}),"LIVE"]}),jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:0,transition:"opacity 0.3s ease",".modern-tv-card:hover &":{opacity:1}},children:jsxRuntimeExports.jsx(Avatar,{sx:{width:48,height:48,background:"linear-gradient(135deg, var(--cyan) 0%, var(--violet) 100%)",boxShadow:"0 8px 24px rgba(0, 188, 212, 0.4)"},children:jsxRuntimeExports.jsx(PlayArrow,{sx:{fontSize:28}})})})]}),jsxRuntimeExports.jsxs(CardContent,{sx:{p:2,flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",background:"linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.02) 100%)"},children:[jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Box,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:1},children:jsxRuntimeExports.jsx(Typography,{variant:"subtitle1",sx:{fontWeight:700,fontSize:{xs:"0.875rem",sm:"1rem"},lineHeight:1.3,color:"var(--text-primary)",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",flex:1,mr:1},children:e.name})}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",sx:{color:"var(--text-secondary)",fontWeight:500,fontSize:"0.75rem",display:"flex",alignItems:"center",gap:.5},children:[jsxRuntimeExports.jsx(LiveTv$1,{sx:{fontSize:14}}),"CH ",e.channelNumber]})]}),jsxRuntimeExports.jsxs(Box,{sx:{mt:1.5,display:"flex",flexWrap:"wrap",gap:.5},children:[e.category&&jsxRuntimeExports.jsx(Chip,{label:e.category.name,size:"small",sx:{fontSize:"0.65rem",height:20,background:"rgba(124, 77, 255, 0.1)",color:"var(--violet)",border:"1px solid rgba(124, 77, 255, 0.2)"}}),e.region&&jsxRuntimeExports.jsx(Chip,{label:e.region,size:"small",sx:{fontSize:"0.65rem",height:20,background:"rgba(0, 188, 212, 0.1)",color:"var(--cyan)",border:"1px solid rgba(0, 188, 212, 0.2)"}})]})]})]})},e._id))}),D>1&&jsxRuntimeExports.jsxs("div",{className:"pagination",children:[jsxRuntimeExports.jsx("button",{className:"page-dot",onClick:()=>y(e=>Math.max(1,e-1)),"aria-label":"Previous",children:""}),Array.from({length:D}).map((e,t)=>jsxRuntimeExports.jsx("button",{className:"page-dot "+(v===t+1?"active":""),onClick:()=>y(t+1),children:t+1},t)),jsxRuntimeExports.jsx("button",{className:"page-dot",onClick:()=>y(e=>Math.min(D,e+1)),"aria-label":"Next",children:""})]}),jsxRuntimeExports.jsx(DesktopBannerAd,{})]}),jsxRuntimeExports.jsx(PurchasePackage,{open:S,onClose:()=>{T(!1),j(null)},redirectToChannel:null==R?void 0:R._id,onUnlockSuccess:()=>{console.log("Package unlocked successfully, redirecting to channel:",null==R?void 0:R.name)}})]}):(console.error("State validation failed:",{channels:Array.isArray(e),categories:Array.isArray(i)}),Array.isArray(e)||t([]),Array.isArray(i)||s([]),jsxRuntimeExports.jsx(Container,{maxWidth:"xl",children:jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",gutterBottom:!0,children:"Error loading data. Please refresh the page."})}))};var Icon$0$1='<path fill-rule="evenodd" clip-rule="evenodd" d="M15.0007 28.7923C15.0007 29.0152 14.9774 29.096 14.9339 29.1775C14.8903 29.259 14.8263 29.323 14.7449 29.3665C14.6634 29.4101 14.5826 29.4333 14.3597 29.4333H12.575C12.3521 29.4333 12.2713 29.4101 12.1898 29.3665C12.1083 29.323 12.0443 29.259 12.0008 29.1775C11.9572 29.096 11.934 29.0152 11.934 28.7923V12.2993L5.97496 12.3C5.75208 12.3 5.67125 12.2768 5.58977 12.2332C5.50829 12.1896 5.44434 12.1257 5.40077 12.0442C5.35719 11.9627 5.33398 11.8819 5.33398 11.659V9.87429C5.33398 9.65141 5.35719 9.57059 5.40077 9.48911C5.44434 9.40762 5.50829 9.34368 5.58977 9.3001C5.67125 9.25652 5.75208 9.23332 5.97496 9.23332H26.0263C26.2492 9.23332 26.33 9.25652 26.4115 9.3001C26.493 9.34368 26.557 9.40762 26.6005 9.48911C26.6441 9.57059 26.6673 9.65141 26.6673 9.87429V11.659C26.6673 11.8819 26.6441 11.9627 26.6005 12.0442C26.557 12.1257 26.493 12.1896 26.4115 12.2332C26.33 12.2768 26.2492 12.3 26.0263 12.3L20.067 12.2993L20.0673 28.7923C20.0673 29.0152 20.0441 29.096 20.0005 29.1775C19.957 29.259 19.893 29.323 19.8115 29.3665C19.73 29.4101 19.6492 29.4333 19.4263 29.4333H17.6416C17.4187 29.4333 17.3379 29.4101 17.2564 29.3665C17.175 29.323 17.111 29.259 17.0674 29.1775C17.0239 29.096 17.0007 29.0152 17.0007 28.7923L17 22.7663H15L15.0007 28.7923Z" fill="currentColor"/> <path d="M16.0007 7.89998C17.4734 7.89998 18.6673 6.70608 18.6673 5.23332C18.6673 3.76056 17.4734 2.56665 16.0007 2.56665C14.5279 2.56665 13.334 3.76056 13.334 5.23332C13.334 6.70608 14.5279 7.89998 16.0007 7.89998Z" fill="currentColor"/>',Icon$1='<path d="M7.33332 6.66669C6.96513 6.66669 6.66666 6.96516 6.66666 7.33335V9.33335C6.66666 9.70154 6.96513 10 7.33332 10H20.6667C21.0348 10 21.3333 9.70154 21.3333 9.33335V7.33335C21.3333 6.96516 21.0348 6.66669 20.6667 6.66669H7.33332Z" fill="currentColor"/> <path d="M19.4404 21.8188C19.3882 21.9307 19.3681 22.0549 19.3824 22.1776L19.6028 24.0711C19.6602 24.5641 20.217 24.8238 20.6316 24.5508L22.2238 23.5026C22.327 23.4347 22.4092 23.3394 22.4614 23.2275L27.7186 11.9534C27.8742 11.6197 27.7298 11.2231 27.3962 11.0675L25.5835 10.2222C25.2498 10.0666 24.8532 10.211 24.6976 10.5447L19.4404 21.8188Z" fill="currentColor"/> <path d="M7.33332 21.3334C6.96513 21.3334 6.66666 21.6318 6.66666 22V24C6.66666 24.3682 6.96513 24.6667 7.33332 24.6667H15.3333C15.7015 24.6667 16 24.3682 16 24V22C16 21.6318 15.7015 21.3334 15.3333 21.3334H7.33332Z" fill="currentColor"/> <path d="M6.66666 14.6667C6.66666 14.2985 6.96513 14 7.33332 14H18C18.3682 14 18.6667 14.2985 18.6667 14.6667V16.6667C18.6667 17.0349 18.3682 17.3334 18 17.3334H7.33332C6.96513 17.3334 6.66666 17.0349 6.66666 16.6667V14.6667Z" fill="currentColor"/>',Icon$2='<path d="M7.33335 6.66667C6.96516 6.66667 6.66669 6.96515 6.66669 7.33334V9.33334C6.66669 9.70153 6.96516 10 7.33335 10H24.6667C25.0349 10 25.3334 9.70153 25.3334 9.33334V7.33334C25.3334 6.96515 25.0349 6.66667 24.6667 6.66667H7.33335Z" fill="currentColor"/> <path d="M6.66669 14.6667C6.66669 14.2985 6.96516 14 7.33335 14H18.6654C19.0336 14 19.3321 14.2985 19.3321 14.6667V16.6667C19.3321 17.0349 19.0336 17.3333 18.6654 17.3333H7.33335C6.96516 17.3333 6.66669 17.0349 6.66669 16.6667V14.6667Z" fill="currentColor"/> <path d="M25.3321 26.0039C25.3321 26.3721 25.0336 26.6706 24.6654 26.6706H23.3321C22.9639 26.6706 22.6654 26.3721 22.6654 26.0039V23.4706C22.6654 23.3969 22.6057 23.3372 22.5321 23.3372H19.9987C19.6305 23.3372 19.3321 23.0388 19.3321 22.6706V21.3372C19.3321 20.9691 19.6305 20.6706 19.9987 20.6706H22.5321C22.6057 20.6706 22.6654 20.6109 22.6654 20.5372V18.0039C22.6654 17.6357 22.9639 17.3372 23.3321 17.3372H24.6654C25.0336 17.3372 25.3321 17.6357 25.3321 18.0039V20.5372C25.3321 20.6109 25.3917 20.6706 25.4654 20.6706H27.9987C28.3669 20.6706 28.6654 20.9691 28.6654 21.3372V22.6706C28.6654 23.0388 28.3669 23.3372 27.9987 23.3372H25.4654C25.3917 23.3372 25.3321 23.3969 25.3321 23.4706V26.0039Z" fill="currentColor"/> <path d="M7.33335 21.3333C6.96516 21.3333 6.66669 21.6318 6.66669 22V24C6.66669 24.3682 6.96516 24.6667 7.33335 24.6667H15.3334C15.7015 24.6667 16 24.3682 16 24V22C16 21.6318 15.7015 21.3333 15.3334 21.3333H7.33335Z" fill="currentColor"/>',Icon$3='<path d="M20.6667 10.6666C20.6667 13.6122 18.2789 16 15.3333 16C12.3878 16 10 13.6122 10 10.6666C10 7.72113 12.3878 5.33331 15.3333 5.33331C18.2789 5.33331 20.6667 7.72113 20.6667 10.6666Z" fill="currentColor"/> <path d="M10.6667 18C7.72115 18 5.33334 20.3878 5.33334 23.3333V26.5333C5.33334 26.607 5.39303 26.6666 5.46667 26.6666H8.53334C8.60697 26.6666 8.66667 26.607 8.66667 26.5333V24C8.66667 22.5272 9.86058 21.3333 11.3333 21.3333H17.2C17.2736 21.3333 17.3333 21.2736 17.3333 21.2V18.1333C17.3333 18.0597 17.2736 18 17.2 18H10.6667Z" fill="currentColor"/> <path d="M26 26.6666C26.3682 26.6666 26.6667 26.3682 26.6667 26V24.6666C26.6667 24.2985 26.3682 24 26 24H23.4667C23.393 24 23.3333 23.9403 23.3333 23.8666V21.3333C23.3333 20.9651 23.0349 20.6666 22.6667 20.6666H21.3333C20.9651 20.6666 20.6667 20.9651 20.6667 21.3333V23.8666C20.6667 23.9403 20.607 24 20.5333 24H18C17.6318 24 17.3333 24.2985 17.3333 24.6666V26C17.3333 26.3682 17.6318 26.6666 18 26.6666H20.5333C20.607 26.6666 20.6667 26.7263 20.6667 26.8V29.3333C20.6667 29.7015 20.9651 30 21.3333 30H22.6667C23.0349 30 23.3333 29.7015 23.3333 29.3333V26.8C23.3333 26.7263 23.393 26.6666 23.4667 26.6666H26Z" fill="currentColor"/>',Icon$4='<path d="M17.1336 24.6659C17.5018 24.6659 17.8003 24.3675 17.8003 23.9993V17.9324C17.8003 17.8588 17.86 17.7991 17.9336 17.7991H23.9999C24.3681 17.7991 24.6666 17.5006 24.6666 17.1324V14.8657C24.6666 14.4976 24.3681 14.1991 23.9999 14.1991L17.9336 14.1991C17.86 14.1991 17.8003 14.1394 17.8003 14.0657V7.99928C17.8003 7.63109 17.5018 7.33261 17.1336 7.33261H14.867C14.4988 7.33261 14.2003 7.63109 14.2003 7.99928V14.0657C14.2003 14.1394 14.1406 14.1991 14.067 14.1991L7.99992 14.1991C7.63173 14.1991 7.33325 14.4976 7.33325 14.8658V17.1324C7.33325 17.5006 7.63173 17.7991 7.99992 17.7991L14.067 17.7991C14.1406 17.7991 14.2003 17.8588 14.2003 17.9324V23.9993C14.2003 24.3675 14.4988 24.6659 14.867 24.6659H17.1336Z" fill="currentColor"/>',Icon$5$1='<path d="M5.33334 6.00001C5.33334 5.63182 5.63181 5.33334 6 5.33334H26C26.3682 5.33334 26.6667 5.63182 26.6667 6.00001V20.6667C26.6667 21.0349 26.3682 21.3333 26 21.3333H23.7072C23.4956 21.3333 23.2966 21.233 23.171 21.0628L22.1859 19.7295C21.8607 19.2894 22.1749 18.6667 22.7221 18.6667H23.3333C23.7015 18.6667 24 18.3682 24 18V8.66668C24 8.29849 23.7015 8.00001 23.3333 8.00001H8.66667C8.29848 8.00001 8 8.29849 8 8.66668V18C8 18.3682 8.29848 18.6667 8.66667 18.6667H9.29357C9.84072 18.6667 10.1549 19.2894 9.82976 19.7295L8.84467 21.0628C8.71898 21.233 8.52 21.3333 8.30848 21.3333H6C5.63181 21.3333 5.33334 21.0349 5.33334 20.6667V6.00001Z" fill="currentColor"/> <path d="M8.78528 25.6038C8.46013 26.0439 8.77431 26.6667 9.32147 26.6667L22.6785 26.6667C23.2256 26.6667 23.5398 26.0439 23.2146 25.6038L16.5358 16.5653C16.2693 16.2046 15.73 16.2047 15.4635 16.5653L8.78528 25.6038Z" fill="currentColor"/>',Icon$6='<path d="M23.2629 22.1274C23.5232 22.3878 23.9453 22.3878 24.2057 22.1274L25.4313 20.9018C25.6917 20.6414 25.6917 20.2193 25.4313 19.959L23.2322 17.7598C23.1482 17.6758 23.2077 17.5322 23.3265 17.5322H28.8488C29.217 17.5322 29.5155 17.2337 29.5155 16.8655V15.1322C29.5155 14.764 29.217 14.4655 28.8488 14.4655H23.3261C23.2073 14.4655 23.1478 14.3219 23.2318 14.2379L25.4308 12.0389C25.6912 11.7785 25.6912 11.3564 25.4308 11.0961L24.2052 9.87043C23.9448 9.61008 23.5227 9.61008 23.2624 9.87043L17.6055 15.5273C17.3452 15.7876 17.3452 16.2097 17.6055 16.4701L23.2629 22.1274Z" fill="currentColor"/> <path d="M13.1681 14.3022L8.73714 9.87124C8.47679 9.61089 8.05468 9.61089 7.79433 9.87124L6.56868 11.0969C6.30833 11.3572 6.30833 11.7794 6.56868 12.0397L8.76784 14.2389C8.85184 14.3229 8.79235 14.4665 8.67356 14.4665L3.15118 14.4665C2.78299 14.4665 2.48451 14.765 2.48451 15.1331V16.8665C2.48451 17.2347 2.78299 17.5331 3.15118 17.5331L8.67393 17.5331C8.79272 17.5331 8.8522 17.6768 8.76821 17.7608L6.56918 19.9598C6.30883 20.2201 6.30883 20.6423 6.56917 20.9026L7.79483 22.1283C8.05518 22.3886 8.47729 22.3886 8.73764 22.1283L14.3945 16.4714C14.6548 16.211 14.6548 15.7889 14.3945 15.5286L13.1681 14.3022Z" fill="currentColor"/>',Icon$7='<path d="M12.0904 14.3331C11.9716 14.3331 11.9122 14.1895 11.9962 14.1055L15.7588 10.3428C16.0192 10.0824 16.0192 9.66032 15.7588 9.39997L14.3446 7.98576C14.0843 7.72541 13.6622 7.72541 13.4018 7.98576L5.85934 15.5282C5.59899 15.7886 5.59899 16.2107 5.85934 16.471L7.27356 17.8853C7.27327 17.885 7.27384 17.8855 7.27356 17.8853L13.4021 24.0138C13.6624 24.2741 14.0845 24.2741 14.3449 24.0138L15.7591 22.5995C16.0194 22.3392 16.0194 21.9171 15.7591 21.6567L11.9964 17.894C11.9124 17.81 11.9719 17.6664 12.0907 17.6664H19.6667C20.0349 17.6664 20.3334 17.3679 20.3334 16.9997V14.9997C20.3334 14.6316 20.0349 14.3331 19.6667 14.3331H12.0904Z" fill="currentColor"/> <path d="M25 7.9831C24.6318 7.9831 24.3334 8.28158 24.3334 8.64977V23.3164C24.3334 23.6846 24.6318 23.9831 25 23.9831H27C27.3682 23.9831 27.6667 23.6846 27.6667 23.3164V8.64977C27.6667 8.28158 27.3682 7.9831 27 7.9831H25Z" fill="currentColor"/>',Icon$8$1='<path d="M17.4853 18.9093C17.4853 19.0281 17.6289 19.0875 17.7129 19.0035L22.4185 14.2979C22.6788 14.0376 23.1009 14.0376 23.3613 14.2979L24.7755 15.7122C25.0359 15.9725 25.0359 16.3946 24.7755 16.655L16.2902 25.1403C16.0299 25.4006 15.6078 25.4006 15.3474 25.1403L13.9332 23.726L13.9319 23.7247L6.86189 16.6547C6.60154 16.3944 6.60154 15.9723 6.86189 15.7119L8.2761 14.2977C8.53645 14.0373 8.95856 14.0373 9.21891 14.2977L13.9243 19.0031C14.0083 19.0871 14.1519 19.0276 14.1519 18.9088L14.1519 6.00004C14.1519 5.63185 14.4504 5.33337 14.8186 5.33337L16.8186 5.33337C17.1868 5.33337 17.4853 5.63185 17.4853 6.00004L17.4853 18.9093Z" fill="currentColor"/>',Icon$9='<path d="M30.577 15.5268L24.9201 9.86998C24.6597 9.60963 24.2376 9.60963 23.9773 9.86998L22.7516 11.0956C22.4913 11.356 22.4913 11.7781 22.7516 12.0384L24.9508 14.2376C25.0348 14.3216 24.9753 14.4652 24.8565 14.4652L19.3341 14.4652C18.9659 14.4652 18.6675 14.7637 18.6675 15.1319V16.8652C18.6675 17.2334 18.9659 17.5319 19.3341 17.5319L24.8569 17.5319C24.9757 17.5319 25.0352 17.6755 24.9512 17.7595L22.7521 19.9585C22.4918 20.2189 22.4918 20.641 22.7521 20.9013L23.9778 22.127C24.2381 22.3873 24.6602 22.3873 24.9206 22.127L30.5774 16.4701C30.8378 16.2098 30.8373 15.7872 30.577 15.5268Z" fill="currentColor"/> <path d="M2.64825 17.6971C2.64808 17.6969 2.64843 17.6973 2.64825 17.6971L1.42309 16.4719C1.16274 16.2116 1.16225 15.789 1.4226 15.5286L7.07945 9.87177C7.3398 9.61142 7.76191 9.61142 8.02226 9.87177L9.24792 11.0974C9.50827 11.3578 9.50826 11.7799 9.24792 12.0402L7.04888 14.2393C6.96489 14.3233 7.02437 14.4669 7.14316 14.4669H12.6659C13.0341 14.4669 13.3326 14.7654 13.3326 15.1335V16.8669C13.3326 17.2351 13.0341 17.5335 12.6659 17.5335H7.14353C7.02474 17.5335 6.96525 17.6772 7.04925 17.7612L9.24841 19.9603C9.50876 20.2207 9.50876 20.6428 9.24841 20.9031L8.02276 22.1288C7.76241 22.3891 7.3403 22.3891 7.07995 22.1288L2.64825 17.6971Z" fill="currentColor"/>',Icon$10='<path d="M17.2412 10.3428L21.0042 14.1058C21.0882 14.1897 21.0287 14.3334 20.9099 14.3334H13.3333C12.9651 14.3334 12.6667 14.6318 12.6667 15L12.6667 17C12.6667 17.3682 12.9651 17.6667 13.3333 17.6667L20.9091 17.6667C21.0279 17.6667 21.0874 17.8103 21.0034 17.8943L17.2409 21.6567C16.9806 21.9171 16.9806 22.3392 17.2409 22.5995L18.6552 24.0138C18.9155 24.2741 19.3376 24.2741 19.598 24.0138L27.1404 16.4713C27.4008 16.2109 27.401 15.7886 27.1407 15.5282L19.5982 7.98576C19.3379 7.72541 18.9158 7.72541 18.6554 7.98576L17.2412 9.39997C16.9808 9.66032 16.9808 10.0824 17.2412 10.3428Z" fill="currentColor"/> <path d="M8 7.9831C8.36819 7.9831 8.66667 8.28158 8.66667 8.64977V23.3164C8.66667 23.6846 8.36819 23.9831 8 23.9831H6C5.63181 23.9831 5.33334 23.6846 5.33334 23.3164V8.64977C5.33334 8.28158 5.63181 7.9831 6 7.9831H8Z" fill="currentColor"/>',Icon$11$1='<path d="M13.0908 14.3334C12.972 14.3334 12.9125 14.1898 12.9965 14.1058L17.7021 9.40022C17.9625 9.13987 17.9625 8.71776 17.7021 8.45741L16.2879 7.04319C16.0275 6.78284 15.6054 6.78284 15.3451 7.04319L6.8598 15.5285C6.59945 15.7888 6.59945 16.2109 6.8598 16.4713L8.27401 17.8855L8.27536 17.8868L15.3453 24.9568C15.6057 25.2172 16.0278 25.2172 16.2881 24.9568L17.7024 23.5426C17.9627 23.2822 17.9627 22.8601 17.7024 22.5998L12.9969 17.8944C12.9129 17.8104 12.9724 17.6668 13.0912 17.6668L26 17.6668C26.3682 17.6668 26.6667 17.3683 26.6667 17.0001V15.0001C26.6667 14.6319 26.3682 14.3334 26 14.3334L13.0908 14.3334Z" fill="currentColor"/>',Icon$12='<path d="M18.9071 14.3335C19.0259 14.3335 19.0853 14.1898 19.0013 14.1058L14.2958 9.40025C14.0354 9.1399 14.0354 8.71779 14.2958 8.45744L15.71 7.04322C15.9703 6.78287 16.3924 6.78287 16.6528 7.04322L25.1381 15.5285C25.3984 15.7889 25.3984 16.211 25.1381 16.4713L23.7238 17.8855L23.7225 17.8869L16.6525 24.9568C16.3922 25.2172 15.9701 25.2172 15.7097 24.9568L14.2955 23.5426C14.0352 23.2823 14.0352 22.8602 14.2955 22.5998L19.0009 17.8944C19.0849 17.8104 19.0254 17.6668 18.9066 17.6668L5.99784 17.6668C5.62965 17.6668 5.33118 17.3683 5.33118 17.0001V15.0001C5.33118 14.6319 5.62965 14.3335 5.99784 14.3335L18.9071 14.3335Z" fill="currentColor"/>',Icon$13$1='<path d="M14.1521 13.0929C14.1521 12.9741 14.0085 12.9147 13.9245 12.9987L9.21891 17.7043C8.95856 17.9646 8.53645 17.9646 8.2761 17.7043L6.86189 16.29C6.60154 16.0297 6.60154 15.6076 6.86189 15.3472L15.3472 6.86195C15.6075 6.6016 16.0296 6.6016 16.29 6.86195L17.7042 8.27616L17.7055 8.27751L24.7755 15.3475C25.0359 15.6078 25.0359 16.0299 24.7755 16.2903L23.3613 17.7045C23.1009 17.9649 22.6788 17.9649 22.4185 17.7045L17.7131 12.9991C17.6291 12.9151 17.4855 12.9746 17.4855 13.0934V26.0022C17.4855 26.3704 17.187 26.6688 16.8188 26.6688H14.8188C14.4506 26.6688 14.1521 26.3704 14.1521 26.0022L14.1521 13.0929Z" fill="currentColor"/>',Icon$14='<path fill-rule="evenodd" clip-rule="evenodd" d="M15.9339 22.7045C15.9749 22.681 16.0252 22.681 16.0662 22.7045L24.3359 27.43C24.7804 27.684 25.3334 27.3631 25.3334 26.8512V4.66667C25.3334 4.29848 25.0349 4 24.6667 4H7.33335C6.96516 4 6.66669 4.29848 6.66669 4.66667V26.8512C6.66669 27.3631 7.21967 27.684 7.66411 27.43L15.9339 22.7045ZM16.0662 19.1724C16.0252 19.149 15.9749 19.149 15.9339 19.1724L9.93284 22.6016C9.84395 22.6524 9.73335 22.5882 9.73335 22.4858V7.2C9.73335 7.12636 9.79305 7.06667 9.86669 7.06667H22.1334C22.207 7.06667 22.2667 7.12636 22.2667 7.2V22.4858C22.2667 22.5882 22.1561 22.6524 22.0672 22.6016L16.0662 19.1724Z" fill="currentColor"/>',Icon$15='<path d="M16 20.5338C17.6568 20.5338 19 19.1907 19 17.5338C19 15.877 17.6568 14.5338 16 14.5338C14.3431 14.5338 13 15.877 13 17.5338C13 19.1907 14.3431 20.5338 16 20.5338Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M10.8372 6.66666C10.5752 6.66666 10.3375 6.82016 10.2296 7.05899L9.23821 9.25486C9.21665 9.30262 9.1691 9.33332 9.11669 9.33332H5.99998C5.63179 9.33332 5.33331 9.6318 5.33331 9.99999V26C5.33331 26.3682 5.63179 26.6667 5.99998 26.6667H26C26.3682 26.6667 26.6666 26.3682 26.6666 26V9.99999C26.6666 9.6318 26.3682 9.33332 26 9.33332H22.8858C22.8334 9.33332 22.7858 9.30259 22.7643 9.25479L21.7746 7.05935C21.6669 6.82033 21.429 6.66666 21.1668 6.66666H10.8372ZM12.6493 9.33332C12.4146 9.33332 12.1971 9.45676 12.0768 9.6583L10.7179 11.935C10.6938 11.9753 10.6503 12 10.6034 12H8.66665C8.29846 12 7.99998 12.2985 7.99998 12.6667V23.3333C7.99998 23.7015 8.29846 24 8.66665 24H23.3333C23.7015 24 24 23.7015 24 23.3333V12.6667C24 12.2985 23.7015 12 23.3333 12H21.3956C21.3486 12 21.3051 11.9753 21.2811 11.9349L19.9245 9.65869C19.8043 9.45693 19.5867 9.33332 19.3518 9.33332H12.6493Z" fill="currentColor"/>',Icon$16$1='<path d="M16.6927 25.3346C16.3245 25.3346 16.026 25.0361 16.026 24.6679L16.026 7.3346C16.026 6.96641 16.3245 6.66794 16.6927 6.66794L18.6927 6.66794C19.0609 6.66794 19.3594 6.96642 19.3594 7.3346L19.3594 24.6679C19.3594 25.0361 19.0609 25.3346 18.6927 25.3346H16.6927Z" fill="currentColor"/> <path d="M24.026 25.3346C23.6578 25.3346 23.3594 25.0361 23.3594 24.6679L23.3594 7.3346C23.3594 6.96641 23.6578 6.66794 24.026 6.66794L26.026 6.66794C26.3942 6.66794 26.6927 6.96642 26.6927 7.3346V24.6679C26.6927 25.0361 26.3942 25.3346 26.026 25.3346H24.026Z" fill="currentColor"/> <path d="M5.48113 23.9407C5.38584 24.2963 5.59689 24.6619 5.95254 24.7572L7.88439 25.2748C8.24003 25.3701 8.60559 25.159 8.70089 24.8034L13.1871 8.06067C13.2824 7.70503 13.0713 7.33947 12.7157 7.24417L10.7838 6.72654C10.4282 6.63124 10.0626 6.8423 9.96733 7.19794L5.48113 23.9407Z" fill="currentColor"/>',Icon$17='<path fill-rule="evenodd" clip-rule="evenodd" d="M28.016 23.4605L26.8102 24.8975C26.7629 24.9539 26.6788 24.9612 26.6224 24.9139L26.2632 24.6127C26.2631 24.6127 26.2633 24.6127 26.2632 24.6127L8.23326 9.49343C8.2332 9.49349 8.23333 9.49338 8.23326 9.49343L5.37612 7.09787C5.37609 7.09795 5.37615 7.09778 5.37612 7.09787L5.37151 7.09399C5.31524 7.04662 5.30795 6.96262 5.35523 6.90627L6.56109 5.46917C6.79776 5.18712 7.21832 5.15026 7.50045 5.38684L8.98949 6.6355C9.0135 6.65563 9.04383 6.66667 9.07517 6.66667H26C26.3682 6.66667 26.6667 6.96514 26.6667 7.33333V21.3967C26.6667 21.4362 26.6841 21.4736 26.7143 21.4989L27.9337 22.5214C28.2158 22.758 28.2527 23.1784 28.016 23.4605ZM23.781 19.0391C23.8678 19.1119 24 19.0502 24 18.937V10C24 9.63181 23.7015 9.33333 23.3333 9.33333H12.5732C12.4487 9.33333 12.3921 9.48884 12.4875 9.56883L23.781 19.0391Z" fill="currentColor"/> <path d="M18.9485 22C18.9798 22 19.0102 22.011 19.0342 22.0312L21.8962 24.4312C21.9916 24.5112 21.935 24.6667 21.8105 24.6667H18.8957C18.8534 24.6667 18.8136 24.6867 18.7885 24.7208L16.5364 27.7688C16.2699 28.1295 15.7305 28.1295 15.464 27.7688L13.2117 24.7208C13.1866 24.6867 13.1468 24.6667 13.1045 24.6667H6.00001C5.63182 24.6667 5.33335 24.3682 5.33335 24V10.828C5.33335 10.7147 5.46558 10.6531 5.55235 10.7258L7.95235 12.7384C7.98256 12.7637 8.00001 12.8011 8.00001 12.8405V21.3333C8.00001 21.7015 8.29849 22 8.66668 22H18.9485Z" fill="currentColor"/>',Icon$18='<path d="M17.3333 15C17.3333 14.6318 17.6318 14.3334 18 14.3334H20.6667C21.0349 14.3334 21.3333 14.6318 21.3333 15V16.3334C21.3333 16.7015 21.0349 17 20.6667 17H18C17.6318 17 17.3333 16.7015 17.3333 16.3334V15Z" fill="currentColor"/> <path d="M11.3333 14.3334C10.9652 14.3334 10.6667 14.6318 10.6667 15V16.3334C10.6667 16.7015 10.9652 17 11.3333 17H14C14.3682 17 14.6667 16.7015 14.6667 16.3334V15C14.6667 14.6318 14.3682 14.3334 14 14.3334H11.3333Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M5.33334 7.33335C5.33334 6.96516 5.63182 6.66669 6.00001 6.66669H26C26.3682 6.66669 26.6667 6.96516 26.6667 7.33335V24C26.6667 24.3682 26.3682 24.6667 26 24.6667H18.8676C18.8253 24.6667 18.7855 24.6868 18.7603 24.7208L16.5364 27.7307C16.2699 28.0914 15.7305 28.0914 15.464 27.7308L13.2399 24.7208C13.2147 24.6868 13.1749 24.6667 13.1326 24.6667H6.00001C5.63182 24.6667 5.33334 24.3682 5.33334 24V7.33335ZM8.66668 9.33335C8.29849 9.33335 8.00001 9.63183 8.00001 10V21.3334C8.00001 21.7015 8.29849 22 8.66668 22H23.3333C23.7015 22 24 21.7015 24 21.3334V10C24 9.63183 23.7015 9.33335 23.3333 9.33335H8.66668Z" fill="currentColor"/>',Icon$19$1='<path fill-rule="evenodd" clip-rule="evenodd" d="M24.9266 7.57992C25.015 7.60672 25.0886 7.64746 25.2462 7.80506L26.956 9.51488C27.1136 9.67248 27.1543 9.74604 27.1811 9.83447C27.2079 9.9229 27.2079 10.0133 27.1811 10.1018C27.1543 10.1902 27.1136 10.2638 26.956 10.4214L13.1822 24.1951C13.0246 24.3527 12.951 24.3935 12.8626 24.4203C12.797 24.4402 12.7304 24.4453 12.6642 24.4357L12.7319 24.4203C12.6435 24.4471 12.553 24.4471 12.4646 24.4203C12.3762 24.3935 12.3026 24.3527 12.145 24.1951L5.04407 17.0942C4.88647 16.9366 4.84573 16.863 4.81893 16.7746C4.79213 16.6862 4.79213 16.5957 4.81893 16.5073C4.84573 16.4189 4.88647 16.3453 5.04407 16.1877L6.7539 14.4779C6.9115 14.3203 6.98506 14.2796 7.07349 14.2528C7.16191 14.226 7.25235 14.226 7.34078 14.2528C7.42921 14.2796 7.50277 14.3203 7.66037 14.4779L12.6628 19.4808L24.3397 7.80506C24.4973 7.64746 24.5709 7.60672 24.6593 7.57992C24.7477 7.55311 24.8382 7.55311 24.9266 7.57992Z" fill="currentColor"/>',Icon$20='<path d="M15.905 17.4809C15.9571 17.533 16.0415 17.533 16.0936 17.4809L22.4111 11.1635C22.6714 10.9031 23.0935 10.9031 23.3539 11.1635L24.9567 12.7662C25.217 13.0266 25.217 13.4487 24.9567 13.709L18.1028 20.5629C18.0937 20.5732 18.0842 20.5833 18.0744 20.5931L16.4716 22.1959C16.2113 22.4562 15.7892 22.4562 15.5288 22.1959L7.04353 13.7106C6.78318 13.4503 6.78318 13.0281 7.04353 12.7678L8.6463 11.165C8.90665 10.9047 9.32876 10.9047 9.58911 11.165L15.905 17.4809Z" fill="currentColor"/>',Icon$21='<path d="M14.8206 15.9049C14.7685 15.9569 14.7685 16.0413 14.8206 16.0934L21.1381 22.4109C21.3984 22.6712 21.3984 23.0934 21.1381 23.3537L19.5353 24.9565C19.275 25.2168 18.8529 25.2168 18.5925 24.9565L11.7386 18.1026C11.7283 18.0935 11.7183 18.084 11.7084 18.0742L10.1057 16.4714C9.84531 16.2111 9.84531 15.789 10.1057 15.5286L18.5909 7.04335C18.8513 6.783 19.2734 6.783 19.5338 7.04335L21.1365 8.64612C21.3969 8.90647 21.3969 9.32858 21.1365 9.58893L14.8206 15.9049Z" fill="currentColor"/>',Icon$22$1='<path d="M17.947 16.095C17.999 16.043 17.999 15.9585 17.947 15.9065L11.6295 9.58899C11.3691 9.32864 11.3691 8.90653 11.6295 8.64618L13.2323 7.04341C13.4926 6.78306 13.9147 6.78306 14.1751 7.04341L21.0289 13.8973C21.0392 13.9064 21.0493 13.9158 21.0591 13.9257L22.6619 15.5285C22.9223 15.7888 22.9223 16.2109 22.6619 16.4713L14.1766 24.9565C13.9163 25.2169 13.4942 25.2169 13.2338 24.9565L11.631 23.3538C11.3707 23.0934 11.3707 22.6713 11.631 22.411L17.947 16.095Z" fill="currentColor"/>',Icon$23='<path d="M15.905 14.8206C15.9571 14.7685 16.0415 14.7685 16.0936 14.8206L22.4111 21.1381C22.6714 21.3984 23.0935 21.3984 23.3539 21.1381L24.9567 19.5353C25.217 19.2749 25.217 18.8528 24.9567 18.5925L18.1028 11.7386C18.0937 11.7283 18.0842 11.7182 18.0744 11.7084L16.4716 10.1056C16.2113 9.84528 15.7892 9.84528 15.5288 10.1056L7.04353 18.5909C6.78318 18.8513 6.78318 19.2734 7.04353 19.5337L8.6463 21.1365C8.90665 21.3968 9.32876 21.3968 9.58911 21.1365L15.905 14.8206Z" fill="currentColor"/>',Icon$24$1='<path fill-rule="evenodd" clip-rule="evenodd" d="M6 7C5.63181 7 5.33333 7.29848 5.33333 7.66667V14.8667C5.33333 14.9403 5.39361 14.9999 5.46724 15.0009C10.8844 15.0719 15.2614 19.449 15.3325 24.8661C15.3334 24.9397 15.393 25 15.4667 25H26C26.3682 25 26.6667 24.7015 26.6667 24.3333V7.66667C26.6667 7.29848 26.3682 7 26 7H6ZM17.0119 22.2294C17.0263 22.29 17.0802 22.3333 17.1425 22.3333H23.3333C23.7015 22.3333 24 22.0349 24 21.6667V10.3333C24 9.96514 23.7015 9.66667 23.3333 9.66667H8.66667C8.29848 9.66667 8 9.96514 8 10.3333V13.1909C8 13.2531 8.04332 13.3071 8.10392 13.3214C12.5063 14.3618 15.9715 17.827 17.0119 22.2294Z" fill="currentColor"/> <path d="M13.2 25C13.2736 25 13.3334 24.9398 13.3322 24.8661C13.2615 20.5544 9.77889 17.0718 5.46718 17.0011C5.39356 16.9999 5.33333 17.0597 5.33333 17.1333V18.8667C5.33333 18.9403 5.39348 18.9999 5.4671 19.0015C8.67465 19.0716 11.2617 21.6587 11.3319 24.8662C11.3335 24.9399 11.393 25 11.4667 25H13.2Z" fill="currentColor"/> <path d="M5.33333 21.1333C5.33333 21.0597 5.39332 20.9998 5.46692 21.0022C7.57033 21.0712 9.26217 22.763 9.33114 24.8664C9.33356 24.94 9.27364 25 9.2 25H6C5.63181 25 5.33333 24.7015 5.33333 24.3333V21.1333Z" fill="currentColor"/>',Icon$25='<path d="M20.144 3.294C19.7884 3.38929 19.5773 3.75485 19.6726 4.1105L20.1902 6.04235C20.2855 6.39799 20.6511 6.60905 21.0067 6.51375L22.9386 5.99611C23.2942 5.90082 23.5053 5.53526 23.41 5.17962L22.8923 3.24777C22.797 2.89212 22.4315 2.68107 22.0758 2.77636L20.144 3.294Z" fill="currentColor"/> <path d="M13.4909 5.76687C13.3956 5.41123 13.6067 5.04567 13.9623 4.95037L15.8942 4.43274C16.2498 4.33744 16.6154 4.5485 16.7107 4.90414L17.2283 6.83599C17.3236 7.19164 17.1125 7.55719 16.7569 7.65249L14.8251 8.17013C14.4694 8.26542 14.1039 8.05437 14.0086 7.69872L13.4909 5.76687Z" fill="currentColor"/> <path d="M7.78065 6.60675C7.425 6.70204 7.21395 7.0676 7.30924 7.42324L7.82688 9.3551C7.92218 9.71074 8.28773 9.9218 8.64338 9.8265L10.5752 9.30886C10.9309 9.21357 11.1419 8.84801 11.0466 8.49237L10.529 6.56051C10.4337 6.20487 10.0681 5.99382 9.7125 6.08911L7.78065 6.60675Z" fill="currentColor"/> <path d="M7.33331 12C7.7015 12 7.99998 12.2985 7.99998 12.6667V23.3333C7.99998 23.7015 8.29846 24 8.66665 24H23.3333C23.7015 24 24 23.7015 24 23.3333V12.6667C24 12.2985 24.2985 12 24.6666 12H26C26.3682 12 26.6666 12.2985 26.6666 12.6667V26C26.6666 26.3682 26.3682 26.6667 26 26.6667H5.99998C5.63179 26.6667 5.33331 26.3682 5.33331 26V12.6667C5.33331 12.2985 5.63179 12 5.99998 12H7.33331Z" fill="currentColor"/> <path d="M11.7995 12C11.4313 12 11.1328 12.2985 11.1328 12.6667V14.6667C11.1328 15.0349 11.4313 15.3333 11.7995 15.3333H13.7995C14.1676 15.3333 14.4661 15.0349 14.4661 14.6667V12.6667C14.4661 12.2985 14.1676 12 13.7995 12H11.7995Z" fill="currentColor"/> <path d="M17.5325 12.6667C17.5325 12.2985 17.831 12 18.1992 12H20.1992C20.5674 12 20.8659 12.2985 20.8659 12.6667V14.6667C20.8659 15.0349 20.5674 15.3333 20.1992 15.3333H18.1992C17.831 15.3333 17.5325 15.0349 17.5325 14.6667V12.6667Z" fill="currentColor"/>',Icon$26$1='<path d="M8 28.0003C8 27.6321 8.29848 27.3336 8.66667 27.3336H23.3333C23.7015 27.3336 24 27.6321 24 28.0003V29.3336C24 29.7018 23.7015 30.0003 23.3333 30.0003H8.66667C8.29848 30.0003 8 29.7018 8 29.3336V28.0003Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M4.66602 6.66699C4.29783 6.66699 3.99935 6.96547 3.99935 7.33366V24.667C3.99935 25.0352 4.29783 25.3337 4.66602 25.3337H27.3327C27.7009 25.3337 27.9994 25.0352 27.9994 24.667V7.33366C27.9994 6.96547 27.7009 6.66699 27.3327 6.66699H4.66602ZM8.66659 21.3333C8.2984 21.3333 7.99992 21.0349 7.99992 20.6667V11.3333C7.99992 10.9651 8.2984 10.6667 8.66659 10.6667H13.9999C14.3681 10.6667 14.6666 10.9651 14.6666 11.3333V12.6667C14.6666 13.0349 14.3681 13.3333 13.9999 13.3333H10.7999C10.7263 13.3333 10.6666 13.393 10.6666 13.4667V18.5333C10.6666 18.607 10.7263 18.6667 10.7999 18.6667H13.9999C14.3681 18.6667 14.6666 18.9651 14.6666 19.3333V20.6667C14.6666 21.0349 14.3681 21.3333 13.9999 21.3333H8.66659ZM17.9999 21.3333C17.6317 21.3333 17.3333 21.0349 17.3333 20.6667V11.3333C17.3333 10.9651 17.6317 10.6667 17.9999 10.6667H23.3333C23.7014 10.6667 23.9999 10.9651 23.9999 11.3333V12.6667C23.9999 13.0349 23.7014 13.3333 23.3333 13.3333H20.1333C20.0596 13.3333 19.9999 13.393 19.9999 13.4667V18.5333C19.9999 18.607 20.0596 18.6667 20.1333 18.6667H23.3333C23.7014 18.6667 23.9999 18.9651 23.9999 19.3333V20.6667C23.9999 21.0349 23.7014 21.3333 23.3333 21.3333H17.9999Z" fill="currentColor"/>',Icon$27$1='<path fill-rule="evenodd" clip-rule="evenodd" d="M4.6661 6.66699C4.29791 6.66699 3.99943 6.96547 3.99943 7.33366V24.667C3.99943 25.0352 4.29791 25.3337 4.6661 25.3337H27.3328C27.701 25.3337 27.9994 25.0352 27.9994 24.667V7.33366C27.9994 6.96547 27.701 6.66699 27.3328 6.66699H4.6661ZM8.66667 21.3333C8.29848 21.3333 8 21.0349 8 20.6667V11.3333C8 10.9651 8.29848 10.6667 8.66667 10.6667H14C14.3682 10.6667 14.6667 10.9651 14.6667 11.3333V12.6667C14.6667 13.0349 14.3682 13.3333 14 13.3333H10.8C10.7264 13.3333 10.6667 13.393 10.6667 13.4667V18.5333C10.6667 18.607 10.7264 18.6667 10.8 18.6667H14C14.3682 18.6667 14.6667 18.9651 14.6667 19.3333V20.6667C14.6667 21.0349 14.3682 21.3333 14 21.3333H8.66667ZM18 21.3333C17.6318 21.3333 17.3333 21.0349 17.3333 20.6667V11.3333C17.3333 10.9651 17.6318 10.6667 18 10.6667H23.3333C23.7015 10.6667 24 10.9651 24 11.3333V12.6667C24 13.0349 23.7015 13.3333 23.3333 13.3333H20.1333C20.0597 13.3333 20 13.393 20 13.4667V18.5333C20 18.607 20.0597 18.6667 20.1333 18.6667H23.3333C23.7015 18.6667 24 18.9651 24 19.3333V20.6667C24 21.0349 23.7015 21.3333 23.3333 21.3333H18Z" fill="currentColor"/>',Icon$28='<path d="M17.6667 15C17.6667 14.6318 17.9651 14.3333 18.3333 14.3333H20.3333C20.7015 14.3333 21 14.6318 21 15V17C21 17.3682 20.7015 17.6666 20.3333 17.6666H18.3333C17.9651 17.6666 17.6667 17.3682 17.6667 17V15Z" fill="currentColor"/> <path d="M11.6667 14.3333C11.2985 14.3333 11 14.6318 11 15V17C11 17.3682 11.2985 17.6666 11.6667 17.6666H13.6667C14.0349 17.6666 14.3333 17.3682 14.3333 17V15C14.3333 14.6318 14.0349 14.3333 13.6667 14.3333H11.6667Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M14.125 5.33331C8.53312 5.33331 4 9.86643 4 15.4583C4 21.0502 8.53312 25.5833 14.125 25.5833C16.5135 25.5833 18.6402 26.8064 20.6365 28.1176C23.0275 29.688 23.4552 27.5864 23.8755 25.5208C24.103 24.4027 24.3284 23.2951 24.8619 22.7863C26.7953 20.9423 28 18.341 28 15.4583C28 9.86643 23.4669 5.33331 17.875 5.33331H14.125ZM17.875 7.99998H14.125C10.0059 7.99998 6.66667 11.3392 6.66667 15.4583C6.66667 19.5774 10.0059 22.9166 14.125 22.9166C16.877 22.9166 19.2468 24.1025 21.1133 25.2567C21.1541 25.2819 21.2072 25.2588 21.2169 25.2119L21.2588 25.0064C21.3246 24.6827 21.4008 24.3082 21.4843 23.9558C21.5867 23.5238 21.7252 23.0127 21.9287 22.5174C22.1248 22.04 22.4512 21.4005 23.0214 20.8566C24.4491 19.4949 25.3333 17.5821 25.3333 15.4583C25.3333 11.3392 21.9941 7.99998 17.875 7.99998Z" fill="currentColor"/>',Icon$29='<path fill-rule="evenodd" clip-rule="evenodd" d="M5.33334 6.00001C5.33334 5.63182 5.63182 5.33334 6.00001 5.33334H26C26.3682 5.33334 26.6667 5.63182 26.6667 6.00001V20.6667C26.6667 21.0349 26.3682 21.3333 26 21.3333H6.00001C5.63182 21.3333 5.33334 21.0349 5.33334 20.6667V6.00001ZM8.40008 9.06634C8.40008 8.69815 8.69855 8.39967 9.06674 8.39967H22.9339C23.3021 8.39967 23.6006 8.69815 23.6006 9.06634V17.6002C23.6006 17.9684 23.3021 18.2669 22.9339 18.2669H9.06674C8.69855 18.2669 8.40008 17.9684 8.40008 17.6002V9.06634Z" fill="currentColor"/> <path d="M6.00001 23.9999C5.63182 23.9999 5.33334 24.2984 5.33334 24.6666V25.9999C5.33334 26.3681 5.63182 26.6666 6.00001 26.6666H26C26.3682 26.6666 26.6667 26.3681 26.6667 25.9999V24.6666C26.6667 24.2984 26.3682 23.9999 26 23.9999H6.00001Z" fill="currentColor"/>',Icon$30='<path d="M4 4.66667C4 4.29848 4.29848 4 4.66667 4H18.5714C18.9396 4 19.2381 4.29848 19.2381 4.66667V9.19992C19.2381 9.27356 19.1784 9.33325 19.1048 9.33325H16.7067C16.633 9.33325 16.5733 9.27356 16.5733 9.19992V7.33333C16.5733 6.96514 16.2749 6.66667 15.9067 6.66667H7.33333C6.96514 6.66667 6.66667 6.96514 6.66667 7.33333V14C6.66667 14.3682 6.96514 14.6667 7.33333 14.6667H13.2C13.2736 14.6667 13.3333 14.7264 13.3333 14.8V17.2C13.3333 17.2736 13.2736 17.3333 13.2 17.3333H4.66667C4.29848 17.3333 4 17.0349 4 16.6667V4.66667Z" fill="currentColor"/> <path d="M13.2 22.6666C13.2736 22.6666 13.3333 22.6069 13.3333 22.5333V20.1333C13.3333 20.0596 13.2736 19.9999 13.2 19.9999H4.66667C4.29848 19.9999 4 20.2984 4 20.6666V21.9999C4 22.3681 4.29848 22.6666 4.66667 22.6666H13.2Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M16 12.6666C16 12.2984 16.2985 11.9999 16.6667 11.9999H27.3333C27.7015 11.9999 28 12.2984 28 12.6666V27.3333C28 27.7014 27.7015 27.9999 27.3333 27.9999H16.6667C16.2985 27.9999 16 27.7014 16 27.3333V12.6666ZM18.6667 15.3333C18.6667 14.9651 18.9651 14.6666 19.3333 14.6666H24.6667C25.0349 14.6666 25.3333 14.9651 25.3333 15.3333V24.6666C25.3333 25.0348 25.0349 25.3333 24.6667 25.3333H19.3333C18.9651 25.3333 18.6667 25.0348 18.6667 24.6666V15.3333Z" fill="currentColor"/>',Icon$31$1='<path d="M14.2225 13.7867C14.3065 13.8706 14.4501 13.8112 14.4501 13.6924V5.99955C14.4501 5.63136 14.7486 5.33289 15.1167 5.33289H16.8501C17.2183 5.33289 17.5167 5.63136 17.5167 5.99955V13.6916C17.5167 13.8104 17.6604 13.8699 17.7444 13.7859L19.9433 11.5869C20.2037 11.3266 20.6258 11.3266 20.8861 11.5869L22.1118 12.8126C22.3722 13.0729 22.3722 13.4951 22.1118 13.7554L16.4549 19.4123C16.1946 19.6726 15.772 19.6731 15.5116 19.4128L9.85479 13.7559C9.59444 13.4956 9.59444 13.0734 9.85479 12.8131L11.0804 11.5874C11.3408 11.3271 11.7629 11.3271 12.0233 11.5874L14.2225 13.7867Z" fill="currentColor"/> <path d="M5.99998 20.267C5.63179 20.267 5.33331 20.5654 5.33331 20.9336V25.9997C5.33331 26.3678 5.63179 26.6663 5.99998 26.6663H26C26.3682 26.6663 26.6666 26.3678 26.6666 25.9997V20.9336C26.6666 20.5654 26.3682 20.267 26 20.267H24.2666C23.8985 20.267 23.6 20.5654 23.6 20.9336V22.9333C23.6 23.3014 23.3015 23.5999 22.9333 23.5999H9.06638C8.69819 23.5999 8.39972 23.3014 8.39972 22.9333V20.9336C8.39972 20.5654 8.10124 20.267 7.73305 20.267H5.99998Z" fill="currentColor"/>',Icon$32='<path d="M24 19.3328V9.46667C24 9.39303 23.9403 9.33334 23.8667 9.33334L11.3333 9.33334C10.9652 9.33334 10.6667 9.03486 10.6667 8.66667V7.33334C10.6667 6.96515 10.9652 6.66667 11.3333 6.66667H26C26.3682 6.66667 26.6667 6.96515 26.6667 7.33334V19.3328C26.6667 19.701 26.3682 19.9994 26 19.9994H24.6667C24.2985 19.9994 24 19.701 24 19.3328Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M6.00001 12C5.63182 12 5.33334 12.2985 5.33334 12.6667V24.6667C5.33334 25.0349 5.63182 25.3333 6.00001 25.3333H20.6672C21.0354 25.3333 21.3338 25.0349 21.3338 24.6667V12.6667C21.3338 12.2985 21.0354 12 20.6672 12H6.00001ZM8.66668 14.6667C8.29849 14.6667 8.00001 14.9651 8.00001 15.3333V22C8.00001 22.3682 8.29849 22.6667 8.66668 22.6667H18C18.3682 22.6667 18.6667 22.3682 18.6667 22V15.3333C18.6667 14.9651 18.3682 14.6667 18 14.6667H8.66668Z" fill="currentColor"/>',Icon$33$1='<path d="M16 20C18.2091 20 20 18.2092 20 16C20 13.7909 18.2091 12 16 12C13.7909 12 12 13.7909 12 16C12 18.2092 13.7909 20 16 20Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M28 16.0058C28 18.671 23.5 25.3334 16 25.3334C8.5 25.3334 4 18.6762 4 16.0058C4 13.3354 8.50447 6.66669 16 6.66669C23.4955 6.66669 28 13.3406 28 16.0058ZM25.3318 15.9934C25.3328 16.0017 25.3328 16.0099 25.3318 16.0182C25.3274 16.0571 25.3108 16.1728 25.2485 16.3708C25.1691 16.6229 25.0352 16.9462 24.8327 17.3216C24.4264 18.0749 23.7969 18.9398 22.9567 19.754C21.2791 21.3798 18.9148 22.6667 16 22.6667C13.0845 22.6667 10.7202 21.3805 9.04298 19.7557C8.20295 18.9419 7.57362 18.0773 7.16745 17.3241C6.96499 16.9486 6.83114 16.6252 6.75172 16.3729C6.67942 16.1431 6.66856 16.0243 6.66695 16.0066L6.66695 16.005C6.66859 15.9871 6.67951 15.8682 6.75188 15.6383C6.83145 15.3854 6.96554 15.0614 7.16831 14.6853C7.57507 13.9306 8.20514 13.0644 9.04577 12.249C10.7245 10.6208 13.0886 9.33335 16 9.33335C18.9108 9.33335 21.2748 10.6215 22.9539 12.2507C23.7947 13.0664 24.4249 13.933 24.8318 14.6877C25.0346 15.0639 25.1688 15.3878 25.2483 15.6404C25.3107 15.8386 25.3274 15.9545 25.3318 15.9934Z" fill="currentColor"/>',Icon$34$1='<path d="M15.8747 8.11857C16.3148 7.79342 16.9375 8.10759 16.9375 8.65476V14.2575C16.9375 14.3669 17.0621 14.4297 17.1501 14.3647L25.6038 8.11857C26.0439 7.79342 26.6667 8.10759 26.6667 8.65476V23.3451C26.6667 23.8923 26.0439 24.2064 25.6038 23.8813L17.1501 17.6346C17.0621 17.5695 16.9375 17.6324 16.9375 17.7418L16.9375 23.3451C16.9375 23.8923 16.3147 24.2064 15.8747 23.8813L5.93387 16.5358C5.57322 16.2693 5.57323 15.7299 5.93389 15.4634L15.8747 8.11857Z" fill="currentColor"/>',Icon$35$1='<path d="M16.1253 8.11866C15.6852 7.7935 15.0625 8.10768 15.0625 8.65484V14.2576C15.0625 14.367 14.9379 14.4298 14.8499 14.3648L6.39615 8.11866C5.95607 7.7935 5.33331 8.10768 5.33331 8.65484V23.3452C5.33331 23.8923 5.9561 24.2065 6.39617 23.8813L14.8499 17.6347C14.9379 17.5696 15.0625 17.6325 15.0625 17.7419L15.0625 23.3452C15.0625 23.8923 15.6853 24.2065 16.1253 23.8813L26.0661 16.5358C26.4268 16.2694 26.4268 15.73 26.0661 15.4635L16.1253 8.11866Z" fill="currentColor"/>',Icon$36='<path fill-rule="evenodd" clip-rule="evenodd" d="M8.39995 18.8C8.39995 18.7264 8.45964 18.6667 8.53328 18.6667H17.2C17.2736 18.6667 17.3333 18.7264 17.3333 18.8V20.6667C17.3333 21.0349 17.6318 21.3333 18 21.3333H26C26.3682 21.3333 26.6666 21.0349 26.6666 20.6667V8.66668C26.6666 8.29849 26.3682 8.00001 26 8.00001H17.4666C17.393 8.00001 17.3333 7.94031 17.3333 7.86668V6.00001C17.3333 5.63182 17.0348 5.33334 16.6666 5.33334H5.99997C5.63178 5.33334 5.33328 5.63182 5.33328 6.00001V26C5.33328 26.3682 5.63176 26.6667 5.99995 26.6667H7.73328C8.10147 26.6667 8.39995 26.3682 8.39995 26V18.8ZM8.53328 16C8.45964 16 8.39995 15.9403 8.39995 15.8667V8.13334C8.39995 8.05971 8.45964 8.00001 8.53328 8.00001H14.5333C14.6069 8.00001 14.6666 8.05971 14.6666 8.13334V10.5333C14.6666 10.607 14.7263 10.6667 14.8 10.6667H23.8666C23.9403 10.6667 24 10.7264 24 10.8V18.5333C24 18.607 23.9403 18.6667 23.8666 18.6667H20.1333C20.0597 18.6667 20 18.607 20 18.5333V16.1333C20 16.0597 19.9403 16 19.8666 16H8.53328Z" fill="currentColor"/>',Icon$37='<path d="M19.913 6.45826V9.56817C19.913 9.68695 20.0566 9.74644 20.1406 9.66245L24.0458 5.75727C24.3061 5.49692 24.7283 5.49692 24.9886 5.75727L26.2143 6.98293C26.4746 7.24328 26.4746 7.66539 26.2143 7.92573L22.3093 11.8306C22.2253 11.9146 22.2848 12.0583 22.4036 12.0583H25.5137C25.8819 12.0583 26.1804 12.3567 26.1804 12.7249V14.4583C26.1804 14.8265 25.8819 15.1249 25.5137 15.1249L19.2468 15.1249C19.2466 15.1249 19.2469 15.1249 19.2468 15.1249H17.5137C17.1455 15.1249 16.8463 14.8265 16.8463 14.4583V6.45826C16.8463 6.09007 17.1448 5.7916 17.513 5.7916H19.2463C19.6145 5.7916 19.913 6.09007 19.913 6.45826Z" fill="currentColor"/> <path d="M9.73054 19.9416C9.84933 19.9416 9.90882 20.0852 9.82482 20.1692L5.91991 24.0741C5.65956 24.3345 5.65956 24.7566 5.91991 25.0169L7.14556 26.2426C7.40591 26.5029 7.82802 26.5029 8.08837 26.2426L11.9935 22.3374C12.0775 22.2534 12.2212 22.3129 12.2212 22.4317V25.5416C12.2212 25.9098 12.5196 26.2083 12.8878 26.2083H14.6212C14.9893 26.2083 15.2878 25.9098 15.2878 25.5416L15.2878 17.5416C15.2878 17.1734 14.9893 16.8749 14.6212 16.8749H6.62046C6.25227 16.8749 5.9538 17.1734 5.9538 17.5416V19.2749C5.9538 19.6431 6.25227 19.9416 6.62046 19.9416H9.73054Z" fill="currentColor"/>',Icon$38='<path d="M17.3183 12.4856L21.2231 8.58073C21.3071 8.49674 21.2476 8.35312 21.1288 8.35312H18.0189C17.6507 8.35312 17.3522 8.05464 17.3522 7.68645V5.95312C17.3522 5.58493 17.6507 5.28645 18.0189 5.28645H26.0189C26.387 5.28645 26.6862 5.58493 26.6862 5.95312V13.9531C26.6862 14.3213 26.3877 14.6198 26.0196 14.6198H24.2862C23.918 14.6198 23.6196 14.3213 23.6196 13.9531V10.8431C23.6196 10.7243 23.4759 10.6648 23.3919 10.7488L19.4867 14.6541C19.2264 14.9144 18.8043 14.9144 18.5439 14.6541L17.3183 13.4284C17.0579 13.1681 17.0579 12.7459 17.3183 12.4856Z" fill="currentColor"/> <path d="M6.1153 26.7135H14.1153C14.4835 26.7135 14.782 26.4151 14.782 26.0469V24.3135C14.782 23.9453 14.4835 23.6469 14.1153 23.6469H11.0053C10.8865 23.6469 10.827 23.5033 10.911 23.4193L14.8159 19.5144C15.0763 19.254 15.0763 18.8319 14.8159 18.5716L13.5903 17.3459C13.3299 17.0856 12.9078 17.0856 12.6474 17.3459L8.74222 21.2512C8.65822 21.3351 8.5146 21.2757 8.5146 21.1569L8.51461 18.0469C8.51461 17.6787 8.21613 17.3802 7.84794 17.3802H6.11461C5.74642 17.3802 5.44794 17.6787 5.44794 18.0469V26.0469C5.44794 26.4151 5.74711 26.7135 6.1153 26.7135Z" fill="currentColor"/>',Icon$39$1='<path d="M19.3334 13.3333C18.9652 13.3333 18.6667 13.0349 18.6667 12.6667L18.6667 7.33333C18.6667 6.96514 18.9652 6.66666 19.3334 6.66666H21.3334C21.7015 6.66666 22 6.96514 22 7.33333V9.86666C22 9.9403 22.0597 10 22.1334 10L24.6667 10C25.0349 10 25.3334 10.2985 25.3334 10.6667V12.6667C25.3334 13.0349 25.0349 13.3333 24.6667 13.3333L19.3334 13.3333Z" fill="currentColor"/> <path d="M13.3334 19.3333C13.3334 18.9651 13.0349 18.6667 12.6667 18.6667H7.33335C6.96516 18.6667 6.66669 18.9651 6.66669 19.3333V21.3333C6.66669 21.7015 6.96516 22 7.33335 22H9.86669C9.94032 22 10 22.0597 10 22.1333L10 24.6667C10 25.0349 10.2985 25.3333 10.6667 25.3333H12.6667C13.0349 25.3333 13.3334 25.0349 13.3334 24.6667L13.3334 19.3333Z" fill="currentColor"/> <path d="M18.6667 24.6667C18.6667 25.0349 18.9652 25.3333 19.3334 25.3333H21.3334C21.7015 25.3333 22 25.0349 22 24.6667V22.1333C22 22.0597 22.0597 22 22.1334 22H24.6667C25.0349 22 25.3334 21.7015 25.3334 21.3333V19.3333C25.3334 18.9651 25.0349 18.6667 24.6667 18.6667L19.3334 18.6667C18.9652 18.6667 18.6667 18.9651 18.6667 19.3333L18.6667 24.6667Z" fill="currentColor"/> <path d="M10.6667 13.3333H12.6667C13.0349 13.3333 13.3334 13.0349 13.3334 12.6667L13.3334 10.6667V7.33333C13.3334 6.96514 13.0349 6.66666 12.6667 6.66666H10.6667C10.2985 6.66666 10 6.96514 10 7.33333L10 9.86666C10 9.9403 9.94033 10 9.86669 10L7.33335 10C6.96516 10 6.66669 10.2985 6.66669 10.6667V12.6667C6.66669 13.0349 6.96516 13.3333 7.33335 13.3333L10.6667 13.3333Z" fill="currentColor"/>',Icon$40$1='<path d="M25.3299 7.26517C25.2958 6.929 25.0119 6.66666 24.6667 6.66666H19.3334C18.9652 6.66666 18.6667 6.96514 18.6667 7.33333V9.33333C18.6667 9.70152 18.9652 10 19.3334 10L21.8667 10C21.9403 10 22 10.0597 22 10.1333V12.6667C22 13.0349 22.2985 13.3333 22.6667 13.3333H24.6667C25.0349 13.3333 25.3334 13.0349 25.3334 12.6667V7.33333C25.3334 7.31032 25.3322 7.28758 25.3299 7.26517Z" fill="currentColor"/> <path d="M22 21.8667C22 21.9403 21.9403 22 21.8667 22L19.3334 22C18.9652 22 18.6667 22.2985 18.6667 22.6667V24.6667C18.6667 25.0349 18.9652 25.3333 19.3334 25.3333L24.6667 25.3333C25.0349 25.3333 25.3334 25.0349 25.3334 24.6667V19.3333C25.3334 18.9651 25.0349 18.6667 24.6667 18.6667H22.6667C22.2985 18.6667 22 18.9651 22 19.3333V21.8667Z" fill="currentColor"/> <path d="M12.6667 22H10.1334C10.0597 22 10 21.9403 10 21.8667V19.3333C10 18.9651 9.70154 18.6667 9.33335 18.6667H7.33335C6.96516 18.6667 6.66669 18.9651 6.66669 19.3333V24.6667C6.66669 25.0349 6.96516 25.3333 7.33335 25.3333H12.6667C13.0349 25.3333 13.3334 25.0349 13.3334 24.6667V22.6667C13.3334 22.2985 13.0349 22 12.6667 22Z" fill="currentColor"/> <path d="M10 12.6667V10.1333C10 10.0597 10.0597 10 10.1334 10L12.6667 10C13.0349 10 13.3334 9.70152 13.3334 9.33333V7.33333C13.3334 6.96514 13.0349 6.66666 12.6667 6.66666H7.33335C6.96516 6.66666 6.66669 6.96514 6.66669 7.33333V12.6667C6.66669 13.0349 6.96516 13.3333 7.33335 13.3333H9.33335C9.70154 13.3333 10 13.0349 10 12.6667Z" fill="currentColor"/>',Icon$41='<path fill-rule="evenodd" clip-rule="evenodd" d="M25.3554 17.3032L26.037 16.6363C28.6231 14.0503 28.6231 9.85896 26.037 7.27287C23.4528 4.68864 19.2596 4.68864 16.6754 7.27287L16.0953 7.85295C16.0433 7.90497 15.959 7.90503 15.9069 7.85308L15.3251 7.27287C12.739 4.68679 8.5477 4.68679 5.96161 7.27287C3.37738 9.85711 3.37738 14.0503 5.96161 16.6345L15.8995 26.5723C15.9515 26.6244 16.036 26.6244 16.088 26.5723L20.6099 22.0486C20.6321 22.0283 20.6524 22.008 20.6746 21.9858L25.3554 17.3032ZM13.1566 9.44134L15.9098 12.187C15.9619 12.239 16.0463 12.2389 16.0983 12.1869L18.8438 9.44134C20.2305 8.05471 22.4819 8.05471 23.8685 9.44134C25.2537 10.8264 25.257 13.0685 23.8786 14.4578L23.1986 15.1231L18.5107 19.8128L18.4884 19.8333L16.0876 22.235C16.0355 22.2871 15.9511 22.2871 15.899 22.235L8.13007 14.466C6.74345 13.0794 6.74345 10.828 8.13007 9.44134C9.51855 8.05286 11.7681 8.05286 13.1566 9.44134Z" fill="currentColor"/>',Icon$42='<path d="M17.534 10.6674C17.534 11.5143 16.8475 12.2008 16.0006 12.2008C15.1538 12.2008 14.4673 11.5143 14.4673 10.6674C14.4673 9.82061 15.1538 9.13411 16.0006 9.13411C16.8475 9.13411 17.534 9.82061 17.534 10.6674Z" fill="currentColor"/> <path d="M14.6678 14.2005C14.6678 13.8323 14.9663 13.5339 15.3345 13.5339H16.6678C17.036 13.5339 17.3345 13.8323 17.3345 14.2005V22.2005C17.3345 22.5687 17.036 22.8672 16.6678 22.8672H15.3345C14.9663 22.8672 14.6678 22.5687 14.6678 22.2005V14.2005Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M28 16C28 22.6274 22.6274 28 16 28C9.37258 28 4 22.6274 4 16C4 9.37258 9.37258 4 16 4C22.6274 4 28 9.37258 28 16ZM24.9333 16C24.9333 20.9337 20.9337 24.9333 16 24.9333C11.0663 24.9333 7.06667 20.9337 7.06667 16C7.06667 11.0663 11.0663 7.06667 16 7.06667C20.9337 7.06667 24.9333 11.0663 24.9333 16Z" fill="currentColor"/>',Icon$43='<path d="M4 7.38854C4 7.3149 4.0597 7.2552 4.13333 7.2552H10.1792C10.2528 7.2552 10.3125 7.19551 10.3125 7.12187V5.46666C10.3125 5.39302 10.3722 5.33333 10.4458 5.33333H12.726C12.7997 5.33333 12.8594 5.39302 12.8594 5.46666V7.12187C12.8594 7.19551 12.9191 7.2552 12.9927 7.2552H19.0333C19.107 7.2552 19.1667 7.3149 19.1667 7.38854V9.66354C19.1667 9.73717 19.107 9.79687 19.0333 9.79687H16.7106C16.6533 9.79687 16.6021 9.83433 16.5838 9.88869C15.4447 13.2641 14.1144 15.1953 13.5156 16.0573C13.4808 16.113 15.1333 17.5629 15.4974 17.8813C15.5402 17.9187 15.5534 17.9781 15.5321 18.0308L14.6529 20.2077C14.622 20.2843 14.5295 20.3146 14.4597 20.2703C13.5546 19.6951 12.8558 19.0727 11.9724 18.1584C11.9193 18.1036 11.8302 18.1049 11.7777 18.1603C9.69726 20.3578 8.60797 21.1142 6.80933 22.179C6.7475 22.2156 6.66731 22.1967 6.62871 22.1361L5.43696 20.2647C5.39711 20.2021 5.41633 20.1189 5.47911 20.0794C7.36746 18.8903 8.68502 17.6997 10.1302 16.1862C10.1752 16.139 10.1792 16.0655 10.14 16.0134C8.91005 14.3765 8.20369 13.2435 7.313 11.3664C7.28331 11.3039 7.30645 11.2285 7.36636 11.1938L9.32729 10.0573C9.39495 10.0181 9.48168 10.0453 9.51522 10.116C10.2082 11.5756 10.9182 12.7663 11.7071 13.8661C11.7622 13.9428 11.8775 13.9384 11.9269 13.8579C12.7208 12.5654 13.2411 11.5051 13.8451 9.97878C13.8797 9.89149 13.8153 9.79687 13.7214 9.79687H4V7.38854Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M16.8316 26.6665C17.1181 26.6665 17.3726 26.4835 17.4637 26.2119L18.4836 23.1708C18.5018 23.1165 18.5527 23.0799 18.61 23.0799H23.8867C23.9439 23.0799 23.9948 23.1165 24.0131 23.1708L25.035 26.2122C25.1262 26.4837 25.3805 26.6665 25.6669 26.6665H27.0582C27.5181 26.6665 27.8398 26.2119 27.687 25.7782L23.0292 12.5661C22.9352 12.2994 22.6832 12.1211 22.4004 12.1211H20.0915C19.8087 12.1211 19.5566 12.2996 19.4627 12.5664L14.8113 25.7785C14.6587 26.2122 14.9804 26.6665 15.4402 26.6665H16.8316ZM23.0859 20.9634C23.1771 20.9634 23.2414 20.874 23.2123 20.7876L21.3208 15.1579C21.31 15.1257 21.2798 15.104 21.2459 15.104C21.2119 15.104 21.1818 15.1257 21.171 15.1579L19.2829 20.7877C19.2539 20.8741 19.3182 20.9634 19.4093 20.9634H23.0859Z" fill="currentColor"/>',Icon$44='<path d="M25.4288 6.57197C22.825 3.9682 18.6044 3.9682 16.0007 6.57197L13.1722 9.4004C12.9119 9.66075 12.9119 10.0829 13.1722 10.3432L14.1151 11.286C14.3754 11.5464 14.7975 11.5464 15.0579 11.286L17.8863 8.45759C19.4487 6.89514 21.9807 6.89514 23.5431 8.45759C25.1056 10.02 25.1056 12.552 23.5431 14.1144L20.7147 16.9429C20.4544 17.2032 20.4544 17.6253 20.7147 17.8857L21.6575 18.8285C21.9179 19.0888 22.34 19.0888 22.6003 18.8285L25.4288 16.0001C28.0325 13.3963 28.0325 9.17574 25.4288 6.57197Z" fill="currentColor"/> <path d="M9.40009 13.1726C9.66044 12.9122 10.0825 12.9122 10.3429 13.1726L11.2857 14.1154C11.5461 14.3757 11.5461 14.7978 11.2857 15.0582L8.4582 17.8857C6.89575 19.4481 6.89575 21.9801 8.4582 23.5425C10.0206 25.105 12.5526 25.105 14.1151 23.5425L16.9426 20.715C17.2029 20.4547 17.625 20.4547 17.8854 20.715L18.8282 21.6578C19.0885 21.9182 19.0885 22.3403 18.8282 22.6006L16.0007 25.4282C13.3969 28.0319 9.17635 28.0319 6.57258 25.4282C3.96881 22.8244 3.96881 18.6038 6.57258 16.0001L9.40009 13.1726Z" fill="currentColor"/> <path d="M19.159 11.616C18.8987 11.3556 18.4766 11.3556 18.2162 11.616L11.6165 18.2156C11.3562 18.476 11.3562 18.8981 11.6165 19.1584L12.8422 20.3841C13.1026 20.6444 13.5247 20.6444 13.785 20.3841L20.3847 13.7844C20.645 13.5241 20.645 13.102 20.3847 12.8416L19.159 11.616Z" fill="currentColor"/>',Icon$45='<path fill-rule="evenodd" clip-rule="evenodd" d="M16 4C19.6372 4 22.5941 6.91273 22.6653 10.5329C22.6668 10.6065 22.7264 10.6667 22.8 10.6667H24.6667C25.0348 10.6667 25.3333 10.9651 25.3333 11.3333V26C25.3333 26.3682 25.0348 26.6667 24.6667 26.6667H7.33332C6.96513 26.6667 6.66666 26.3682 6.66666 26V11.3333C6.66666 10.9651 6.96513 10.6667 7.33332 10.6667H9.19999C9.27363 10.6667 9.33319 10.6065 9.33464 10.5329C9.40591 6.91273 12.3628 4 16 4ZM12.0022 10.5331C11.9998 10.6067 12.0597 10.6667 12.1333 10.6667H19.8667C19.9403 10.6667 20.0002 10.6067 19.9978 10.5331C19.9273 8.38578 18.1644 6.66667 16 6.66667C13.8356 6.66667 12.0726 8.38578 12.0022 10.5331ZM9.33332 14C9.33332 13.6318 9.6318 13.3333 9.99999 13.3333H22C22.3682 13.3333 22.6667 13.6318 22.6667 14V23.3333C22.6667 23.7015 22.3682 24 22 24H9.99999C9.6318 24 9.33332 23.7015 9.33332 23.3333V14Z" fill="currentColor"/>',Icon$46='<path fill-rule="evenodd" clip-rule="evenodd" d="M20.3553 6.58214C20.6472 6.33698 20.6763 5.89459 20.3892 5.64378C19.2173 4.6201 17.6841 4 16.0052 4C12.3676 4 9.4111 6.91235 9.33985 10.5329C9.3384 10.6065 9.27884 10.6667 9.2052 10.6667H7.33332C6.96513 10.6667 6.66666 10.9651 6.66666 11.3333V26C6.66666 26.3682 6.96513 26.6667 7.33332 26.6667H24.6667C25.0348 26.6667 25.3333 26.3682 25.3333 26V11.3333C25.3333 10.9651 25.0348 10.6667 24.6667 10.6667H12.1385C12.0649 10.6667 12.005 10.6067 12.0074 10.5331C12.0778 8.38532 13.8403 6.66667 16.0052 6.66667C16.4349 6.66667 16.8489 6.73438 17.237 6.85938C17.6523 6.99402 18.038 7.19469 18.3814 7.44892C18.6602 7.6553 19.0494 7.67862 19.3151 7.45556L20.3553 6.58214ZM9.33332 14C9.33332 13.6318 9.6318 13.3333 9.99999 13.3333H22C22.3682 13.3333 22.6667 13.6318 22.6667 14V23.3333C22.6667 23.7015 22.3682 24 22 24H9.99999C9.6318 24 9.33332 23.7015 9.33332 23.3333V14Z" fill="currentColor"/>',Icon$47='<path d="M8 13.3333C6.52724 13.3333 5.33334 14.5273 5.33334 16C5.33334 17.4728 6.52724 18.6667 8 18.6667C9.47276 18.6667 10.6667 17.4728 10.6667 16C10.6667 14.5273 9.47276 13.3333 8 13.3333Z" fill="currentColor"/> <path d="M13.3333 16C13.3333 14.5273 14.5272 13.3333 16 13.3333C17.4728 13.3333 18.6667 14.5273 18.6667 16C18.6667 17.4728 17.4728 18.6667 16 18.6667C14.5272 18.6667 13.3333 17.4728 13.3333 16Z" fill="currentColor"/> <path d="M21.3333 16C21.3333 14.5273 22.5272 13.3333 24 13.3333C25.4728 13.3333 26.6667 14.5273 26.6667 16C26.6667 17.4728 25.4728 18.6667 24 18.6667C22.5272 18.6667 21.3333 17.4728 21.3333 16Z" fill="currentColor"/>',Icon$48='<path d="M13.3333 8.00001C13.3333 9.47277 14.5272 10.6667 16 10.6667C17.4728 10.6667 18.6667 9.47277 18.6667 8.00001C18.6667 6.52725 17.4728 5.33334 16 5.33334C14.5272 5.33334 13.3333 6.52725 13.3333 8.00001Z" fill="currentColor"/> <path d="M16 18.6667C14.5272 18.6667 13.3333 17.4728 13.3333 16C13.3333 14.5273 14.5272 13.3333 16 13.3333C17.4728 13.3333 18.6667 14.5273 18.6667 16C18.6667 17.4728 17.4728 18.6667 16 18.6667Z" fill="currentColor"/> <path d="M16 26.6667C14.5272 26.6667 13.3333 25.4728 13.3333 24C13.3333 22.5273 14.5272 21.3333 16 21.3333C17.4728 21.3333 18.6667 22.5273 18.6667 24C18.6667 25.4728 17.4728 26.6667 16 26.6667Z" fill="currentColor"/>',Icon$49='<path d="M22.3257 15.8354C22.1263 15.8695 21.9256 15.7966 21.7826 15.6536L16.347 10.218C16.2039 10.0749 16.1311 9.87422 16.1652 9.67483C16.3448 8.62476 16.84 7.61813 17.6506 6.80752C19.7334 4.72472 23.1103 4.72472 25.193 6.80752C27.2758 8.89032 27.2758 12.2672 25.193 14.35C24.3824 15.1606 23.3758 15.6557 22.3257 15.8354Z" fill="currentColor"/> <path d="M15.3386 12.9809C15.0613 12.7036 14.6058 12.7244 14.3549 13.0257L5.78725 23.3142C5.56666 23.5791 5.58439 23.9685 5.82814 24.2122L7.79205 26.1761C8.03586 26.42 8.42536 26.4376 8.69024 26.2169L18.9754 17.6459C19.2766 17.3949 19.2972 16.9395 19.02 16.6623L15.3386 12.9809Z" fill="currentColor"/>',Icon$50='<path fill-rule="evenodd" clip-rule="evenodd" d="M8.66667 5.33334C8.29848 5.33334 8 5.63182 8 6.00001V26C8 26.3682 8.29848 26.6667 8.66667 26.6667H23.3333C23.7015 26.6667 24 26.3682 24 26V6.00001C24 5.63182 23.7015 5.33334 23.3333 5.33334H8.66667ZM11.7334 8.39967C11.3652 8.39967 11.0667 8.69815 11.0667 9.06634V22.9335C11.0667 23.3017 11.3652 23.6002 11.7334 23.6002H20.2673C20.6354 23.6002 20.9339 23.3017 20.9339 22.9335V9.06633C20.9339 8.69814 20.6354 8.39967 20.2673 8.39967H11.7334Z" fill="currentColor"/>',Icon$51='<path d="M11.3793 8.06476C7.08494 11.0717 6.04129 16.9905 9.04821 21.2848C12.0551 25.5791 17.9739 26.6228 22.2683 23.6159C23.1791 22.9781 23.9437 22.2093 24.5544 21.3529C24.8954 20.8746 24.4241 20.2717 23.8397 20.3315C20.7636 20.6467 17.6125 19.331 15.713 16.6181C13.8134 13.9052 13.6547 10.4942 15.003 7.71137C15.2591 7.18276 14.8537 6.53361 14.2877 6.69049C13.274 6.97145 12.2901 7.427 11.3793 8.06476Z" fill="currentColor"/>',Icon$52='<path d="M26.6667 5.99662C26.6667 5.62843 26.3682 5.32996 26 5.32996L11.3333 5.32996C10.9651 5.32996 10.6667 5.62843 10.6667 5.99662L10.6667 7.10189C10.6667 7.13727 10.6807 7.1712 10.7057 7.19621L13.1058 9.59459C13.1898 9.67854 13.3333 9.61904 13.3333 9.50028L13.3333 8.66329C13.3333 8.2951 13.6318 7.99662 14 7.99662L23.3333 7.99662C23.7015 7.99662 24 8.2951 24 8.66329V14.9014C24 14.9994 23.8978 15.0642 23.8075 15.0262C23.2516 14.7925 22.6409 14.6633 22 14.6633C20.9812 14.6633 20.0386 14.9898 19.2712 15.5438C19.206 15.5909 19.2001 15.6849 19.257 15.7417L21.0042 17.4878C21.0455 17.529 21.1085 17.5382 21.1614 17.5137C21.4165 17.3958 21.7005 17.33 22 17.33C23.1046 17.33 24 18.2254 24 19.33C24 19.6289 23.9344 19.9126 23.8168 20.1673C23.7924 20.2202 23.8016 20.2833 23.8429 20.3245L25.5901 22.0705C25.647 22.1274 25.7409 22.1214 25.788 22.0562C26.3409 21.2893 26.6667 20.3476 26.6667 19.33L26.6667 5.99662Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M25.1158 25.5424C25.1678 25.4903 25.1678 25.4059 25.1157 25.3538L6.63661 6.88715C6.58454 6.83511 6.50014 6.83512 6.44808 6.88718L5.12799 8.20727C4.86764 8.46762 4.86771 8.88966 5.12815 9.14992L10.6276 14.6456C10.6526 14.6707 10.6667 14.7046 10.6667 14.74V17.5681C10.6667 17.666 10.5644 17.7309 10.4741 17.6929C9.91823 17.4591 9.30753 17.33 8.66667 17.33C6.08934 17.33 4 19.4193 4 21.9966C4 24.5739 6.08934 26.6633 8.66667 26.6633C11.244 26.6633 13.3333 24.5739 13.3333 21.9966L13.3333 17.6713C13.3333 17.5526 13.4769 17.4931 13.5609 17.577L22.8528 26.8626C23.1132 27.1229 23.5354 27.1228 23.7957 26.8624L25.1158 25.5424ZM8.66667 23.9966C9.77123 23.9966 10.6667 23.1012 10.6667 21.9966C10.6667 20.8921 9.77124 19.9966 8.66667 19.9966C7.5621 19.9966 6.66667 20.892 6.66667 21.9966C6.66667 23.1012 7.5621 23.9966 8.66667 23.9966Z" fill="currentColor"/>',Icon$53$1='<path fill-rule="evenodd" clip-rule="evenodd" d="M26.6667 5.99998C26.6667 5.63179 26.3682 5.33331 26 5.33331H11.3333C10.9651 5.33331 10.6667 5.63179 10.6667 5.99998V17.5714C10.6667 17.6694 10.5644 17.7342 10.4741 17.6962C9.91823 17.4625 9.30754 17.3333 8.66667 17.3333C6.08934 17.3333 4 19.4226 4 22C4 24.5773 6.08934 26.6666 8.66667 26.6666C11.244 26.6666 13.3333 24.5773 13.3333 22V8.66665C13.3333 8.29846 13.6318 7.99998 14 7.99998L23.3333 7.99998C23.7015 7.99998 24 8.29846 24 8.66665V14.9048C24 15.0027 23.8978 15.0675 23.8075 15.0296C23.2516 14.7958 22.6409 14.6666 22 14.6666C19.4227 14.6666 17.3333 16.756 17.3333 19.3333C17.3333 21.9106 19.4227 24 22 24C24.5773 24 26.6667 21.9106 26.6667 19.3333V5.99998ZM22 21.3333C23.1046 21.3333 24 20.4379 24 19.3333C24 18.2287 23.1046 17.3333 22 17.3333C20.8954 17.3333 20 18.2287 20 19.3333C20 20.4379 20.8954 21.3333 22 21.3333ZM8.66667 24C9.77124 24 10.6667 23.1045 10.6667 22C10.6667 20.8954 9.77124 20 8.66667 20C7.5621 20 6.66667 20.8954 6.66667 22C6.66667 23.1045 7.5621 24 8.66667 24Z" fill="currentColor"/>',Icon$54$1='<path d="M17.5091 24.6594C17.5091 25.2066 16.8864 25.5208 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9991 9.36923 19.9991H4.66667C4.29848 19.9991 4 19.7006 4 19.3325V12.6658C4 12.2976 4.29848 11.9991 4.66667 11.9991H9.37115C9.39967 11.9991 9.42745 11.99 9.45039 11.973L16.4463 6.8036C16.8863 6.47842 17.5091 6.79259 17.5091 7.33977L17.5091 24.6594Z" fill="currentColor"/> <path d="M28.8621 13.6422C29.1225 13.3818 29.1225 12.9597 28.8621 12.6994L27.9193 11.7566C27.659 11.4962 27.2368 11.4962 26.9765 11.7566L24.7134 14.0197C24.6613 14.0717 24.5769 14.0717 24.5248 14.0197L22.262 11.7568C22.0016 11.4964 21.5795 11.4964 21.3191 11.7568L20.3763 12.6996C20.116 12.9599 20.116 13.382 20.3763 13.6424L22.6392 15.9053C22.6913 15.9573 22.6913 16.0418 22.6392 16.0938L20.3768 18.3562C20.1165 18.6166 20.1165 19.0387 20.3768 19.299L21.3196 20.2419C21.58 20.5022 22.0021 20.5022 22.2624 20.2418L24.5248 17.9795C24.5769 17.9274 24.6613 17.9274 24.7134 17.9795L26.976 20.2421C27.2363 20.5024 27.6585 20.5024 27.9188 20.2421L28.8616 19.2992C29.122 19.0389 29.122 18.6168 28.8616 18.3564L26.599 16.0938C26.547 16.0418 26.547 15.9573 26.599 15.9053L28.8621 13.6422Z" fill="currentColor"/>',Icon$55='<path d="M6.39617 6.78532C5.9561 6.46017 5.33334 6.77434 5.33334 7.32151V24.6785C5.33334 25.2257 5.95612 25.5398 6.39619 25.2147L18.1415 16.5358C18.5021 16.2693 18.5021 15.7299 18.1415 15.4634L6.39617 6.78532Z" fill="currentColor"/> <path d="M23.5339 6.6667C23.1657 6.6667 22.8672 6.96518 22.8672 7.33337V24.6667C22.8672 25.0349 23.1657 25.3334 23.5339 25.3334H25.5339C25.902 25.3334 26.2005 25.0349 26.2005 24.6667V7.33337C26.2005 6.96518 25.902 6.6667 25.5339 6.6667H23.5339Z" fill="currentColor"/>',Icon$56$1='<path d="M26.6009 16.0725C26.6009 16.424 26.4302 17.1125 25.9409 18.0213C25.4676 18.8976 24.7542 19.8715 23.8182 20.7783C21.9489 22.5905 19.2662 24.0667 15.9342 24.0667C12.6009 24.0667 9.91958 22.5915 8.04891 20.78C7.11424 19.8736 6.40091 18.9 5.92758 18.0236C5.43824 17.1149 5.26758 16.4257 5.26758 16.0725C5.26758 15.7193 5.43824 15.0293 5.92891 14.1193C6.40224 13.2416 7.11558 12.2665 8.05158 11.3587C9.92224 9.54398 12.6049 8.06665 15.9342 8.06665C19.2636 8.06665 21.9449 9.54505 23.8169 11.3604C24.7529 12.2687 25.4662 13.2441 25.9396 14.1216C26.4302 15.0317 26.6009 15.7209 26.6009 16.0725Z" stroke="currentColor" stroke-width="3"/> <path d="M15.9336 20.0667C18.1427 20.0667 19.9336 18.2758 19.9336 16.0667C19.9336 13.8575 18.1427 12.0667 15.9336 12.0667C13.7245 12.0667 11.9336 13.8575 11.9336 16.0667C11.9336 18.2758 13.7245 20.0667 15.9336 20.0667Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M27.2323 25.0624L6.93878 4.76886C6.78118 4.61126 6.70762 4.57052 6.61919 4.54372C6.53077 4.51692 6.44033 4.51691 6.3519 4.54372C6.26347 4.57052 6.18991 4.61126 6.03231 4.76886L4.77032 6.03085C4.61272 6.18845 4.57198 6.26201 4.54518 6.35044C4.51838 6.43887 4.51838 6.5293 4.54518 6.61773C4.57198 6.70616 4.61272 6.77972 4.77032 6.93732L25.0639 27.2308C25.2215 27.3884 25.295 27.4292 25.3834 27.456C25.4719 27.4828 25.5623 27.4828 25.6507 27.456C25.7392 27.4292 25.8127 27.3885 25.9703 27.2309L27.2323 25.9689C27.3899 25.8113 27.4307 25.7377 27.4575 25.6493C27.4843 25.5608 27.4843 25.4704 27.4575 25.382C27.4307 25.2935 27.3899 25.22 27.2323 25.0624Z" fill="currentColor"/>',Icon$57='<path fill-rule="evenodd" clip-rule="evenodd" d="M24.0873 13.6471C24.4011 8.96745 20.6901 5 16 5C11.3099 5 7.599 8.96745 7.9115 13.6471L8.12463 16.8194C8.13258 16.9377 8.10886 17.0559 8.05592 17.1619L5.95553 21.3689C5.73423 21.8121 6.05657 22.3333 6.55199 22.3333H11.2001C11.2737 22.3333 11.3332 22.3934 11.3353 22.467C11.406 24.9825 13.4674 27 16.0001 27C18.5327 27 20.5941 24.9825 20.6649 22.467C20.6669 22.3934 20.7264 22.3333 20.8001 22.3333H25.4481C25.9435 22.3333 26.2659 21.8121 26.0446 21.3689L23.9441 17.1618C23.8912 17.0558 23.8675 16.9377 23.8754 16.8196L24.0873 13.6471ZM17.9957 22.4667C18.0005 22.3932 17.9404 22.3333 17.8667 22.3333H14.1334C14.0598 22.3333 13.9996 22.3932 14.0044 22.4667C14.0731 23.5091 14.9403 24.3333 16.0001 24.3333C17.0598 24.3333 17.9271 23.5091 17.9957 22.4667ZM21.9986 19.6667C22.0976 19.6667 22.1621 19.5624 22.1179 19.4738L21.5583 18.353C21.2938 17.8232 21.1752 17.2326 21.2146 16.6418L21.4266 13.4687C21.6371 10.3288 19.1474 7.66667 16 7.66667C12.8532 7.66667 10.3632 10.3293 10.5722 13.4695L10.7853 16.6407C10.825 17.2319 10.7064 17.823 10.4418 18.3531L9.88224 19.4738C9.83798 19.5624 9.90245 19.6667 10.0015 19.6667H21.9986Z" fill="currentColor"/>',Icon$58='<path d="M25.14 25.1089C25.0171 25.2532 24.8356 25.3333 24.646 25.3333H22.8124C22.1084 25.3333 21.7734 24.1872 22.2745 23.6927C23.9161 22.0729 24.9336 19.822 24.9336 17.3333C24.9336 12.3997 20.9336 8.39973 16 8.39973C11.0664 8.39973 7.06641 12.3997 7.06641 17.3333C7.06641 19.822 8.08389 22.0729 9.72555 23.6927C10.2266 24.1872 9.89155 25.3333 9.18762 25.3333H7.35398C7.16436 25.3333 6.98294 25.2532 6.86001 25.1089C5.07703 23.015 4 20.2991 4 17.3333C4 10.7057 9.3724 5.33333 16 5.33333C22.6276 5.33333 28 10.7057 28 17.3333C28 20.2991 26.923 23.015 25.14 25.1089Z" fill="currentColor"/> <path d="M21.1992 14.3399C21.4595 14.0796 21.4595 13.6575 21.1992 13.3971L20.2564 12.4543C19.996 12.194 19.5739 12.194 19.3136 12.4543L16.4492 15.3187C16.4185 15.3493 16.3749 15.3629 16.332 15.3568C16.2236 15.3414 16.1127 15.3334 16 15.3334C14.7113 15.3334 13.6667 16.378 13.6667 17.6667C13.6667 18.9554 14.7113 20 16 20C17.2887 20 18.3333 18.9554 18.3333 17.6667C18.3333 17.5464 18.3242 17.4283 18.3067 17.313C18.3001 17.2696 18.3136 17.2255 18.3446 17.1945L21.1992 14.3399Z" fill="currentColor"/>',Icon$59$1='<path d="M8.66667 6.66667C8.29848 6.66667 8 6.96514 8 7.33333V24.6667C8 25.0349 8.29848 25.3333 8.66667 25.3333H12.6667C13.0349 25.3333 13.3333 25.0349 13.3333 24.6667V7.33333C13.3333 6.96514 13.0349 6.66667 12.6667 6.66667H8.66667Z" fill="currentColor"/> <path d="M19.3333 6.66667C18.9651 6.66667 18.6667 6.96514 18.6667 7.33333V24.6667C18.6667 25.0349 18.9651 25.3333 19.3333 25.3333H23.3333C23.7015 25.3333 24 25.0349 24 24.6667V7.33333C24 6.96514 23.7015 6.66667 23.3333 6.66667H19.3333Z" fill="currentColor"/>',Icon$60$1='<path d="M5.33334 26V19.4667C5.33334 19.393 5.39304 19.3333 5.46668 19.3333H7.86668C7.94031 19.3333 8.00001 19.393 8.00001 19.4667V23.3333C8.00001 23.7015 8.29849 24 8.66668 24H23.3333C23.7015 24 24 23.7015 24 23.3333V8.66666C24 8.29847 23.7015 7.99999 23.3333 7.99999H19.4667C19.393 7.99999 19.3333 7.9403 19.3333 7.86666V5.46666C19.3333 5.39302 19.393 5.33333 19.4667 5.33333H26C26.3682 5.33333 26.6667 5.63181 26.6667 5.99999V26C26.6667 26.3682 26.3682 26.6667 26 26.6667H6.00001C5.63182 26.6667 5.33334 26.3682 5.33334 26Z" fill="currentColor"/> <path d="M14.0098 8.42359H10.806C10.6872 8.42359 10.6277 8.56721 10.7117 8.6512L16.5491 14.4886C16.8094 14.7489 16.8094 15.171 16.5491 15.4314L15.3234 16.657C15.0631 16.9174 14.641 16.9174 14.3806 16.657L8.63739 10.9138C8.55339 10.8298 8.40978 10.8893 8.40978 11.0081V14.0236C8.40978 14.3918 8.1113 14.6903 7.74311 14.6903H6.00978C5.64159 14.6903 5.34311 14.3918 5.34311 14.0236L5.34311 6.02359C5.34311 5.6554 5.64159 5.35692 6.00978 5.35692L14.0098 5.35692C14.378 5.35692 14.6764 5.6554 14.6764 6.02359V7.75692C14.6764 8.12511 14.378 8.42359 14.0098 8.42359Z" fill="currentColor"/>',Icon$61$1='<path d="M16 15.3333C15.6318 15.3333 15.3333 15.6318 15.3333 16V20C15.3333 20.3682 15.6318 20.6667 16 20.6667H21.3333C21.7015 20.6667 22 20.3682 22 20V16C22 15.6318 21.7015 15.3333 21.3333 15.3333H16Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M5.33333 7.33334C5.33333 6.96515 5.63181 6.66667 5.99999 6.66667H26C26.3682 6.66667 26.6667 6.96515 26.6667 7.33334V24.6667C26.6667 25.0349 26.3682 25.3333 26 25.3333H5.99999C5.63181 25.3333 5.33333 25.0349 5.33333 24.6667V7.33334ZM7.99999 10C7.99999 9.63182 8.29847 9.33334 8.66666 9.33334H23.3333C23.7015 9.33334 24 9.63182 24 10V22C24 22.3682 23.7015 22.6667 23.3333 22.6667H8.66666C8.29847 22.6667 7.99999 22.3682 7.99999 22V10Z" fill="currentColor"/>',Icon$62$1='<path d="M10.6667 6.6548C10.6667 6.10764 11.2894 5.79346 11.7295 6.11862L24.377 15.4634C24.7377 15.7298 24.7377 16.2692 24.3771 16.5357L11.7295 25.8813C11.2895 26.2065 10.6667 25.8923 10.6667 25.3451L10.6667 6.6548Z" fill="currentColor"/>',Icon$63$1='<path d="M13.9213 5.53573C14.3146 5.45804 14.6666 5.76987 14.6666 6.17079V7.57215C14.6666 7.89777 14.4305 8.17277 14.114 8.24925C12.5981 8.61559 11.2506 9.41368 10.2091 10.506C9.98474 10.7414 9.62903 10.8079 9.34742 10.6453L8.14112 9.94885C7.79394 9.7484 7.69985 9.28777 7.96359 8.98585C9.48505 7.24409 11.5636 6.00143 13.9213 5.53573Z" fill="currentColor"/> <path d="M5.88974 12.5908C6.01805 12.2101 6.46491 12.0603 6.81279 12.2611L8.01201 12.9535C8.29379 13.1162 8.41396 13.4577 8.32238 13.7699C8.11252 14.4854 7.99998 15.2424 7.99998 16.0257C7.99998 16.809 8.11252 17.566 8.32238 18.2814C8.41396 18.5936 8.29378 18.9352 8.01201 19.0979L6.82742 19.7818C6.48051 19.9821 6.03488 19.8337 5.90521 19.4547C5.5345 18.3712 5.33331 17.2091 5.33331 16C5.33331 14.8078 5.5289 13.6613 5.88974 12.5908Z" fill="currentColor"/> <path d="M8.17106 22.0852C7.82291 22.2862 7.72949 22.7486 7.99532 23.0502C9.51387 24.773 11.5799 26.0017 13.9213 26.4642C14.3146 26.5419 14.6666 26.2301 14.6666 25.8291V24.4792C14.6666 24.1536 14.4305 23.8786 14.114 23.8021C12.5981 23.4358 11.2506 22.6377 10.2091 21.5453C9.98474 21.31 9.62903 21.2435 9.34742 21.4061L8.17106 22.0852Z" fill="currentColor"/> <path d="M17.3333 25.8291C17.3333 26.2301 17.6857 26.5418 18.079 26.4641C22.9748 25.4969 26.6666 21.1796 26.6666 16C26.6666 10.8204 22.9748 6.50302 18.079 5.5358C17.6857 5.4581 17.3333 5.76987 17.3333 6.17079V7.57215C17.3333 7.89777 17.5697 8.17282 17.8862 8.24932C21.3942 9.09721 24 12.2572 24 16.0257C24 19.7942 21.3942 22.9542 17.8862 23.802C17.5697 23.8785 17.3333 24.1536 17.3333 24.4792V25.8291Z" fill="currentColor"/> <path d="M14.3961 10.4163C13.9561 10.0911 13.3333 10.4053 13.3333 10.9525L13.3333 21.0474C13.3333 21.5946 13.9561 21.9087 14.3962 21.5836L21.2273 16.5359C21.5879 16.2694 21.5879 15.73 21.2273 15.4635L14.3961 10.4163Z" fill="currentColor"/>',Icon$64='<path d="M12 7.66667C12 7.29848 12.2985 7 12.6666 7H26C26.3682 7 26.6666 7.29848 26.6666 7.66667V9.66667C26.6666 10.0349 26.3682 10.3333 26 10.3333H12.6666C12.2985 10.3333 12 10.0349 12 9.66667V7.66667Z" fill="currentColor"/> <path d="M12 15C12 14.6318 12.2985 14.3333 12.6666 14.3333H26C26.3682 14.3333 26.6666 14.6318 26.6666 15V17C26.6666 17.3682 26.3682 17.6667 26 17.6667H12.6666C12.2985 17.6667 12 17.3682 12 17V15Z" fill="currentColor"/> <path d="M5.99998 21.6667C5.63179 21.6667 5.33331 21.9651 5.33331 22.3333V24.3333C5.33331 24.7015 5.63179 25 5.99998 25H7.99998C8.36817 25 8.66665 24.7015 8.66665 24.3333V22.3333C8.66665 21.9651 8.36817 21.6667 7.99998 21.6667H5.99998Z" fill="currentColor"/> <path d="M12.6666 21.6667C12.2985 21.6667 12 21.9651 12 22.3333V24.3333C12 24.7015 12.2985 25 12.6666 25H26C26.3682 25 26.6666 24.7015 26.6666 24.3333V22.3333C26.6666 21.9651 26.3682 21.6667 26 21.6667H12.6666Z" fill="currentColor"/> <path d="M5.99998 14.3333C5.63179 14.3333 5.33331 14.6318 5.33331 15V17C5.33331 17.3682 5.63179 17.6667 5.99998 17.6667H7.99998C8.36817 17.6667 8.66665 17.3682 8.66665 17V15C8.66665 14.6318 8.36817 14.3333 7.99998 14.3333H5.99998Z" fill="currentColor"/> <path d="M5.99998 7C5.63179 7 5.33331 7.29848 5.33331 7.66667V9.66667C5.33331 10.0349 5.63179 10.3333 5.99998 10.3333H7.99998C8.36817 10.3333 8.66665 10.0349 8.66665 9.66667V7.66667C8.66665 7.29848 8.36817 7 7.99998 7H5.99998Z" fill="currentColor"/>',Icon$65='<path d="M25.1377 6.78532C25.5778 6.46017 26.2005 6.77434 26.2005 7.32151V24.6785C26.2005 25.2257 25.5777 25.5398 25.1377 25.2147L13.3924 16.5358C13.0317 16.2693 13.0317 15.7299 13.3924 15.4634L25.1377 6.78532Z" fill="currentColor"/> <path d="M8 6.6667C8.36819 6.6667 8.66667 6.96518 8.66667 7.33337V24.6667C8.66667 25.0349 8.36819 25.3334 8 25.3334H6C5.63181 25.3334 5.33333 25.0349 5.33333 24.6667V7.33337C5.33333 6.96518 5.63181 6.6667 6 6.6667H8Z" fill="currentColor"/>',Icon$66='<path d="M13.5178 19.8304C13.5178 20.021 13.6724 20.1756 13.863 20.1756H17.0203C17.2109 20.1756 17.3654 20.021 17.3654 19.8304C17.3722 19.1671 17.4568 18.6088 17.6193 18.1553C17.7885 17.7019 18.0422 17.3025 18.3806 16.9574C18.7258 16.6122 19.1657 16.2806 19.7004 15.9625C20.3366 15.5835 20.8882 15.1605 21.3552 14.6935C21.8222 14.2197 22.1843 13.6783 22.4414 13.0692C22.7054 12.4533 22.8374 11.7494 22.8374 10.9575C22.8374 9.77315 22.543 8.76133 21.9542 7.9221C21.3653 7.08287 20.5532 6.44329 19.5177 6.00338C18.4822 5.55669 17.291 5.33334 15.9442 5.33334C14.7192 5.33334 13.5991 5.5533 12.5839 5.99322C11.5687 6.42638 10.7531 7.08626 10.1372 7.97286C9.62803 8.70029 9.31776 9.58964 9.20642 10.6409C9.16696 11.0135 9.47146 11.323 9.84618 11.323H12.6619C13.0206 11.323 13.3043 11.0356 13.3876 10.6867C13.4552 10.4034 13.5629 10.1519 13.7107 9.9322C13.9611 9.55319 14.2826 9.26893 14.6752 9.07943C15.0677 8.88316 15.4839 8.78502 15.9239 8.78502C16.3773 8.78502 16.7902 8.87977 17.1624 9.06928C17.5414 9.25878 17.8426 9.5295 18.0659 9.88144C18.2893 10.2334 18.401 10.6428 18.401 11.1098C18.401 11.5497 18.3028 11.9491 18.1065 12.3078C17.9103 12.6597 17.6463 12.9812 17.3147 13.2722C16.9831 13.5632 16.6074 13.8441 16.1878 14.1148C15.6261 14.4668 15.1455 14.8593 14.7462 15.2925C14.3469 15.7256 14.0424 16.2941 13.8326 16.998C13.6295 17.7019 13.5246 18.646 13.5178 19.8304Z" fill="currentColor"/> <path d="M13.7919 25.9622C14.2725 26.436 14.8511 26.6728 15.5279 26.6728C15.9611 26.6728 16.3604 26.5646 16.7259 26.348C17.0913 26.1246 17.3858 25.8302 17.6091 25.4648C17.8392 25.0925 17.9577 24.683 17.9644 24.2364C17.9577 23.5731 17.7106 23.0046 17.2233 22.5308C16.736 22.0571 16.1709 21.8202 15.5279 21.8202C14.8511 21.8202 14.2725 22.0571 13.7919 22.5308C13.3182 23.0046 13.0847 23.5731 13.0915 24.2364C13.0847 24.9064 13.3182 25.4817 13.7919 25.9622Z" fill="currentColor"/>',Icon$67='<path fill-rule="evenodd" clip-rule="evenodd" d="M7.33335 6C6.96516 6 6.66669 6.29848 6.66669 6.66667V13.3333C6.66669 13.7015 6.96516 14 7.33335 14H24.6667C25.0349 14 25.3334 13.7015 25.3334 13.3333V6.66667C25.3334 6.29848 25.0349 6 24.6667 6H7.33335ZM9.46669 8.66667C9.39305 8.66667 9.33335 8.72636 9.33335 8.8V11.2C9.33335 11.2736 9.39305 11.3333 9.46669 11.3333H22.5334C22.607 11.3333 22.6667 11.2736 22.6667 11.2V8.8C22.6667 8.72636 22.607 8.66667 22.5334 8.66667H9.46669Z" fill="currentColor"/> <path d="M6.66669 18C6.66669 17.6318 6.96516 17.3333 7.33335 17.3333H24.6667C25.0349 17.3333 25.3334 17.6318 25.3334 18V19.3333C25.3334 19.7015 25.0349 20 24.6667 20H7.33335C6.96516 20 6.66669 19.7015 6.66669 19.3333V18Z" fill="currentColor"/> <path d="M6.66669 24C6.66669 23.6318 6.96516 23.3333 7.33335 23.3333H24.6667C25.0349 23.3333 25.3334 23.6318 25.3334 24V25.3333C25.3334 25.7015 25.0349 26 24.6667 26H7.33335C6.96516 26 6.66669 25.7015 6.66669 25.3333V24Z" fill="currentColor"/>',Icon$68='<path d="M16 20.6667C18.5773 20.6667 20.6666 18.5773 20.6666 16C20.6666 13.4227 18.5773 11.3333 16 11.3333C13.4227 11.3333 11.3333 13.4227 11.3333 16C11.3333 18.5773 13.4227 20.6667 16 20.6667Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M26.6666 16C26.6666 21.891 21.891 26.6667 16 26.6667C10.1089 26.6667 5.33331 21.891 5.33331 16C5.33331 10.109 10.1089 5.33334 16 5.33334C21.891 5.33334 26.6666 10.109 26.6666 16ZM24 16C24 20.4183 20.4183 24 16 24C11.5817 24 7.99998 20.4183 7.99998 16C7.99998 11.5817 11.5817 8.00001 16 8.00001C20.4183 8.00001 24 11.5817 24 16Z" fill="currentColor"/>',Icon$69='<path fill-rule="evenodd" clip-rule="evenodd" d="M16 26.6667C21.891 26.6667 26.6666 21.891 26.6666 16C26.6666 10.109 21.891 5.33334 16 5.33334C10.1089 5.33334 5.33331 10.109 5.33331 16C5.33331 21.891 10.1089 26.6667 16 26.6667ZM16 23.3333C20.0501 23.3333 23.3333 20.0501 23.3333 16C23.3333 11.9499 20.0501 8.66668 16 8.66668C11.9499 8.66668 8.66665 11.9499 8.66665 16C8.66665 20.0501 11.9499 23.3333 16 23.3333Z" fill="currentColor"/>',Icon$70='<path d="M22.1969 4.98846C21.7569 4.66331 21.1341 4.97748 21.1341 5.52465V7.20266C21.1341 7.27629 21.0744 7.33599 21.0008 7.33599H11.1341C8.18859 7.33599 5.80078 9.72381 5.80078 12.6693V14.6693C5.80078 15.0375 6.09925 15.336 6.46744 15.336H8.20078C8.56897 15.336 8.86744 15.0375 8.86744 14.6693V13.0691C8.86744 11.5963 10.0613 10.4024 11.5341 10.4024H21.0008C21.0744 10.4024 21.1341 10.4621 21.1341 10.5357V12.215C21.1341 12.7621 21.7569 13.0763 22.197 12.7511L26.7242 9.40583C27.0849 9.13934 27.0849 8.59995 26.7242 8.33347L22.1969 4.98846Z" fill="currentColor"/> <path d="M16 18.0001C17.1046 18.0001 18 17.1046 18 16.0001C18 14.8955 17.1046 14.0001 16 14.0001C14.8954 14.0001 14 14.8955 14 16.0001C14 17.1046 14.8954 18.0001 16 18.0001Z" fill="currentColor"/> <path d="M20.8652 24.6641H10.9986C10.9249 24.6641 10.8652 24.7238 10.8652 24.7975V26.4755C10.8652 27.0226 10.2425 27.3368 9.80241 27.0116L5.27514 23.6666C4.91448 23.4002 4.91447 22.8608 5.27512 22.5943L9.80239 19.249C10.2425 18.9238 10.8652 19.238 10.8652 19.7851V21.4644C10.8652 21.538 10.9249 21.5977 10.9986 21.5977H20.4652C21.938 21.5977 23.1319 20.4038 23.1319 18.931V17.3308C23.1319 16.9626 23.4304 16.6641 23.7986 16.6641H25.5319C25.9001 16.6641 26.1986 16.9626 26.1986 17.3308V19.3308C26.1986 22.2763 23.8108 24.6641 20.8652 24.6641Z" fill="currentColor"/>',Icon$71='<path d="M5.33333 12C5.33333 9.05447 7.72115 6.66666 10.6667 6.66666H21.3333C24.2788 6.66666 26.6667 9.05447 26.6667 12V20C26.6667 22.9455 24.2788 25.3333 21.3333 25.3333H21.2922C21.2185 25.3333 21.1589 25.393 21.1589 25.4667V27.1447C21.1589 27.6918 20.5361 28.006 20.096 27.6809L15.5687 24.3358C15.2081 24.0694 15.2081 23.53 15.5687 23.2635L20.096 19.9182C20.5361 19.593 21.1589 19.9072 21.1589 20.4543V22.1126C21.1589 22.1906 21.2257 22.2522 21.303 22.2415C22.6009 22.0617 23.6003 20.9477 23.6003 19.6003V12.3997C23.6003 10.927 22.4063 9.73306 20.9336 9.73306H11.0664C9.59365 9.73306 8.39974 10.927 8.39974 12.3997V19.6003C8.39974 21.073 9.59365 22.2669 11.0664 22.2669H11.5091C11.8773 22.2669 12.1758 22.5654 12.1758 22.9336V24.6667C12.1758 25.0348 11.8773 25.3333 11.5091 25.3333H10.6667C7.72115 25.3333 5.33333 22.9455 5.33333 20V12Z" fill="currentColor"/> <path d="M16 18C17.1046 18 18 17.1046 18 16C18 14.8954 17.1046 14 16 14C14.8954 14 14 14.8954 14 16C14 17.1046 14.8954 18 16 18Z" fill="currentColor"/>',Icon$72='<path d="M10.6666 6.66666C7.72113 6.66666 5.33331 9.05447 5.33331 12V20C5.33331 22.9455 7.72113 25.3333 10.6666 25.3333H11.5091C11.8773 25.3333 12.1758 25.0348 12.1758 24.6667V22.9336C12.1758 22.5654 11.8773 22.2669 11.5091 22.2669H11.0664C9.59363 22.2669 8.39972 21.073 8.39972 19.6003V12.3997C8.39972 10.927 9.59363 9.73306 11.0664 9.73306H20.9336C22.4063 9.73306 23.6002 10.927 23.6002 12.3997V19.6003C23.6002 20.9477 22.6009 22.0617 21.303 22.2415C21.2257 22.2522 21.1588 22.1906 21.1588 22.1126V20.4543C21.1588 19.9072 20.536 19.593 20.096 19.9182L15.5687 23.2635C15.2081 23.53 15.2081 24.0694 15.5687 24.3358L20.096 27.6809C20.5361 28.006 21.1588 27.6918 21.1588 27.1447V25.4667C21.1588 25.393 21.2185 25.3333 21.2922 25.3333H21.3333C24.2788 25.3333 26.6666 22.9455 26.6666 20V12C26.6666 9.05447 24.2788 6.66666 21.3333 6.66666H10.6666Z" fill="currentColor"/>',Icon$73='<path d="M22.1969 4.98846C21.7569 4.66331 21.1341 4.97748 21.1341 5.52465V7.20266C21.1341 7.27629 21.0744 7.33599 21.0008 7.33599H11.1341C8.18859 7.33599 5.80078 9.72381 5.80078 12.6693V14.6693C5.80078 15.0375 6.09925 15.336 6.46744 15.336H8.20078C8.56897 15.336 8.86744 15.0375 8.86744 14.6693V13.0691C8.86744 11.5963 10.0613 10.4024 11.5341 10.4024H21.0008C21.0744 10.4024 21.1341 10.4621 21.1341 10.5357V12.215C21.1341 12.7621 21.7569 13.0763 22.197 12.7511L26.7242 9.40583C27.0849 9.13934 27.0849 8.59995 26.7242 8.33347L22.1969 4.98846Z" fill="currentColor"/> <path d="M10.8652 24.7975C10.8652 24.7238 10.9249 24.6641 10.9986 24.6641H20.8652C23.8108 24.6641 26.1986 22.2763 26.1986 19.3308V17.3308C26.1986 16.9626 25.9001 16.6641 25.5319 16.6641H23.7986C23.4304 16.6641 23.1319 16.9626 23.1319 17.3308V18.931C23.1319 20.4038 21.938 21.5977 20.4652 21.5977H10.9986C10.9249 21.5977 10.8652 21.538 10.8652 21.4644V19.7851C10.8652 19.238 10.2425 18.9238 9.80239 19.249L5.27512 22.5943C4.91447 22.8608 4.91448 23.4002 5.27514 23.6666L9.80241 27.0116C10.2425 27.3368 10.8652 27.0226 10.8652 26.4755V24.7975Z" fill="currentColor"/>',Icon$74$1='<path d="M15.6038 12.2147C16.0439 12.5399 16.6667 12.2257 16.6667 11.6786V10.1789C16.6667 10.1001 16.7351 10.0384 16.8134 10.0479C20.1116 10.4494 22.6667 13.2593 22.6667 16.6659C22.6667 20.3481 19.6817 23.3332 15.9995 23.3332C12.542 23.3332 9.69927 20.7014 9.36509 17.332C9.32875 16.9655 9.03371 16.6662 8.66548 16.6662L6.66655 16.6666C6.29841 16.6666 5.99769 16.966 6.02187 17.3334C6.36494 22.5454 10.7012 26.6667 16 26.6667C21.5228 26.6667 26 22.1895 26 16.6667C26 11.4103 21.9444 7.10112 16.7916 6.69757C16.7216 6.69209 16.6667 6.63396 16.6667 6.56372V4.98824C16.6667 4.44106 16.0439 4.12689 15.6038 4.45206L11.0765 7.79738C10.7159 8.06387 10.7159 8.60326 11.0766 8.86973L15.6038 12.2147Z" fill="currentColor"/>',Icon$75='<path d="M24.1559 5.23019C24.5428 4.84328 25.2053 5.06149 25.2866 5.60258L26.1226 11.1691C26.1892 11.6126 25.8078 11.994 25.3643 11.9274L19.7976 11.0916C19.2564 11.0104 19.0382 10.3479 19.4251 9.96096L20.726 8.66015C20.7811 8.60502 20.7771 8.51422 20.7167 8.46489C17.5744 5.89762 12.9359 6.07926 10.0054 9.00981C9.65698 9.35822 9.34743 9.73077 9.07673 10.1221C8.94598 10.3111 8.73407 10.4307 8.50425 10.4307H6.88409C6.40459 10.4307 6.08461 9.9401 6.31609 9.52018C6.78985 8.66079 7.39107 7.85289 8.11977 7.12419C12.0969 3.14702 18.4334 2.96713 22.6241 6.5845C22.6774 6.63054 22.7577 6.62845 22.8075 6.57864L24.1559 5.23019Z" fill="currentColor"/> <path d="M10.8151 15.5287C10.5548 15.2683 10.5548 14.8462 10.8151 14.5859L14.5864 10.8147C14.8467 10.5543 15.2688 10.5543 15.5292 10.8147L21.186 16.4715C21.4464 16.7319 21.4464 17.154 21.186 17.4143L17.4148 21.1856C17.1544 21.4459 16.7323 21.4459 16.472 21.1856L10.8151 15.5287Z" fill="currentColor"/> <path d="M6.71333 26.3974C6.79459 26.9385 7.4571 27.1567 7.844 26.7698L9.19245 25.4214C9.24227 25.3715 9.32254 25.3695 9.37587 25.4155C13.5665 29.0329 19.903 28.853 23.8801 24.8758C24.6088 24.1471 25.2101 23.3392 25.6838 22.4798C25.9153 22.0599 25.5953 21.5693 25.1158 21.5693H23.4957C23.2658 21.5693 23.0539 21.6889 22.9232 21.8779C22.6525 22.2692 22.3429 22.6418 21.9945 22.9902C19.064 25.9207 14.4255 26.1024 11.2832 23.5351C11.2228 23.4858 11.2188 23.395 11.274 23.3399L12.5748 22.039C12.9617 21.6521 12.7435 20.9896 12.2024 20.9084L6.6356 20.0726C6.19214 20.006 5.81075 20.3874 5.87734 20.8309L6.71333 26.3974Z" fill="currentColor"/>',Icon$76='<path fill-rule="evenodd" clip-rule="evenodd" d="M20.1724 22.3417C20.1263 22.2956 20.0536 22.2897 20.0001 22.327C18.4883 23.3815 16.6497 24 14.6666 24C9.51199 24 5.33331 19.8213 5.33331 14.6667C5.33331 9.51202 9.51199 5.33334 14.6666 5.33334C19.8213 5.33334 24 9.51202 24 14.6667C24 16.6502 23.3813 18.4891 22.3263 20.0011C22.289 20.0546 22.2949 20.1273 22.341 20.1734L26.195 24.0274C26.4554 24.2878 26.4554 24.7099 26.195 24.9702L24.9694 26.1959C24.709 26.4562 24.2869 26.4562 24.0266 26.1959L20.1724 22.3417ZM20.9336 14.6667C20.9336 18.1278 18.1278 20.9336 14.6666 20.9336C11.2055 20.9336 8.39972 18.1278 8.39972 14.6667C8.39972 11.2055 11.2055 8.39975 14.6666 8.39975C18.1278 8.39975 20.9336 11.2055 20.9336 14.6667Z" fill="currentColor"/>',Icon$77$1='<path d="M16.6667 10.3452C16.6667 10.8924 16.0439 11.2066 15.6038 10.8814L11.0766 7.5364C10.7159 7.26993 10.7159 6.73054 11.0766 6.46405L15.6038 3.11873C16.0439 2.79356 16.6667 3.10773 16.6667 3.6549V5.22682C16.6667 5.29746 16.7223 5.35579 16.7927 5.36066C22.6821 5.76757 27.3333 10.674 27.3333 16.6667C27.3333 22.9259 22.2592 28 16 28C9.96483 28 5.03145 23.2827 4.68601 17.3341C4.66466 16.9665 4.96518 16.6673 5.33339 16.6673H7.3334C7.70157 16.6673 7.99714 16.9668 8.02743 17.3337C8.36638 21.4399 11.8064 24.6667 16 24.6667C20.4183 24.6667 24 21.085 24 16.6667C24 12.5225 20.8483 9.11428 16.8113 8.70739C16.7337 8.69957 16.6667 8.76096 16.6667 8.83893V10.3452Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M17.0879 19.679C17.4553 19.9195 17.8928 20.0398 18.4004 20.0398C18.9099 20.0398 19.3474 19.9205 19.7129 19.6818C20.0803 19.4413 20.3635 19.0938 20.5623 18.6392C20.7612 18.1847 20.8606 17.6373 20.8606 16.9972C20.8625 16.3608 20.764 15.8192 20.5652 15.3722C20.3663 14.9252 20.0822 14.5853 19.7129 14.3523C19.3455 14.1175 18.908 14 18.4004 14C17.8928 14 17.4553 14.1175 17.0879 14.3523C16.7224 14.5853 16.4402 14.9252 16.2413 15.3722C16.0443 15.8173 15.9449 16.3589 15.943 16.9972C15.9411 17.6354 16.0396 18.1818 16.2385 18.6364C16.4373 19.089 16.7205 19.4366 17.0879 19.679ZM19.1362 18.4262C18.9487 18.7349 18.7034 18.8892 18.4004 18.8892C18.1996 18.8892 18.0226 18.8211 17.8691 18.6847C17.7157 18.5464 17.5964 18.3372 17.5112 18.0568C17.4279 17.7765 17.3871 17.4233 17.389 16.9972C17.3909 16.3684 17.4847 15.9025 17.6703 15.5995C17.8559 15.2945 18.0993 15.1421 18.4004 15.1421C18.603 15.1421 18.7801 15.2093 18.9316 15.3438C19.0832 15.4782 19.2015 15.6828 19.2868 15.9574C19.372 16.2301 19.4146 16.5767 19.4146 16.9972C19.4165 17.6392 19.3237 18.1156 19.1362 18.4262Z" fill="currentColor"/> <path d="M13.7746 19.8978C13.8482 19.8978 13.9079 19.8381 13.9079 19.7644V14.2129C13.9079 14.1393 13.8482 14.0796 13.7746 14.0796H12.642C12.6171 14.0796 12.5927 14.0865 12.5716 14.0997L11.2322 14.9325C11.1931 14.9568 11.1693 14.9996 11.1693 15.0457V15.9497C11.1693 16.0539 11.2833 16.1178 11.3722 16.0635L12.464 15.396C12.4682 15.3934 12.473 15.3921 12.4779 15.3921C12.4926 15.3921 12.5045 15.404 12.5045 15.4187V19.7644C12.5045 19.8381 12.5642 19.8978 12.6378 19.8978H13.7746Z" fill="currentColor"/>',Icon$78='<path d="M16.6667 10.3452C16.6667 10.8924 16.0439 11.2066 15.6038 10.8814L11.0766 7.5364C10.7159 7.26993 10.7159 6.73054 11.0766 6.46405L15.6038 3.11873C16.0439 2.79356 16.6667 3.10773 16.6667 3.6549V5.22682C16.6667 5.29746 16.7223 5.35579 16.7927 5.36066C22.6821 5.76757 27.3333 10.674 27.3333 16.6667C27.3333 22.9259 22.2592 28 16 28C9.96483 28 5.03145 23.2827 4.68601 17.3341C4.66466 16.9665 4.96518 16.6673 5.33339 16.6673H7.3334C7.70157 16.6673 7.99714 16.9668 8.02743 17.3337C8.36638 21.4399 11.8064 24.6667 16 24.6667C20.4183 24.6667 24 21.085 24 16.6667C24 12.5225 20.8483 9.11428 16.8113 8.70739C16.7337 8.69957 16.6667 8.76096 16.6667 8.83893V10.3452Z" fill="currentColor"/> <path d="M13.9647 19.8182C14.0383 19.8182 14.098 19.7585 14.098 19.6849V14.1334C14.098 14.0597 14.0383 14 13.9647 14H12.8321C12.8072 14 12.7829 14.007 12.7617 14.0201L11.4223 14.8529C11.3832 14.8773 11.3594 14.9201 11.3594 14.9662V15.8702C11.3594 15.9743 11.4734 16.0383 11.5623 15.984L12.6541 15.3164C12.6583 15.3139 12.6631 15.3125 12.668 15.3125C12.6827 15.3125 12.6946 15.3244 12.6946 15.3391V19.6849C12.6946 19.7585 12.7543 19.8182 12.828 19.8182H13.9647Z" fill="currentColor"/> <path d="M17.2808 19.6676C17.6104 19.8211 17.9873 19.8978 18.4115 19.8978C18.8642 19.8978 19.2591 19.8106 19.5962 19.6364C19.9352 19.4603 20.1985 19.2178 20.386 18.9091C20.5753 18.6004 20.67 18.2462 20.67 17.8466C20.67 17.4773 20.5905 17.1497 20.4314 16.8637C20.2742 16.5777 20.0583 16.3542 19.7837 16.1932C19.511 16.0303 19.2003 15.9489 18.8519 15.9489C18.5772 15.9489 18.332 16.0019 18.1161 16.108C17.9064 16.21 17.7531 16.3393 17.6562 16.4958C17.6524 16.5019 17.6458 16.5057 17.6386 16.5057C17.6265 16.5057 17.6171 16.4953 17.6182 16.4833L17.7379 15.254C17.7445 15.1857 17.8019 15.1336 17.8706 15.1336H20.193C20.2666 15.1336 20.3263 15.0739 20.3263 15.0002V14.1334C20.3263 14.0597 20.2666 14 20.193 14H16.7164C16.6469 14 16.589 14.0534 16.5835 14.1226L16.3501 17.0168C16.3447 17.0848 16.3914 17.1459 16.4585 17.1585L17.4904 17.3522C17.5454 17.3625 17.6001 17.3366 17.6344 17.2923C17.7078 17.1974 17.804 17.1199 17.9229 17.0597C18.0744 16.9839 18.2344 16.947 18.403 16.9489C18.581 16.9489 18.7382 16.9887 18.8746 17.0682C19.0128 17.1459 19.1208 17.2548 19.1985 17.3949C19.278 17.5351 19.3168 17.6989 19.3149 17.8864C19.3168 18.0701 19.2789 18.233 19.2013 18.375C19.1236 18.5152 19.0166 18.6241 18.8803 18.7017C18.7439 18.7794 18.5877 18.8182 18.4115 18.8182C18.1861 18.8182 17.992 18.7538 17.8291 18.625C17.6993 18.5209 17.6177 18.3903 17.5841 18.2333C17.5693 18.1639 17.5122 18.108 17.4413 18.108H16.3404C16.2656 18.108 16.2049 18.1696 16.2119 18.244C16.2393 18.5373 16.3352 18.8007 16.4996 19.0341C16.6909 19.3031 16.9513 19.5142 17.2808 19.6676Z" fill="currentColor"/>',Icon$79='<path d="M16.6667 10.3452C16.6667 10.8924 16.0439 11.2066 15.6038 10.8814L11.0766 7.5364C10.7159 7.26993 10.7159 6.73054 11.0766 6.46405L15.6038 3.11873C16.0439 2.79356 16.6667 3.10773 16.6667 3.6549V5.22682C16.6667 5.29746 16.7223 5.35579 16.7927 5.36066C22.6821 5.76757 27.3333 10.674 27.3333 16.6667C27.3333 22.9259 22.2592 28 16 28C9.96483 28 5.03145 23.2827 4.68601 17.3341C4.66466 16.9665 4.96518 16.6673 5.33339 16.6673H7.3334C7.70157 16.6673 7.99714 16.9668 8.02743 17.3337C8.36638 21.4399 11.8064 24.6667 16 24.6667C20.4183 24.6667 24 21.085 24 16.6667C24 12.5225 20.8483 9.11428 16.8113 8.70739C16.7337 8.69957 16.6667 8.76096 16.6667 8.83893V10.3452Z" fill="currentColor"/> <path d="M11.5845 19.75C11.9273 19.9015 12.3203 19.9773 12.7635 19.9773C13.2181 19.9773 13.6205 19.9034 13.9709 19.7557C14.3232 19.6061 14.5978 19.4015 14.7948 19.1421C14.9936 18.8807 15.0931 18.5815 15.0931 18.2443C15.0949 17.8864 14.9804 17.5881 14.7493 17.3495C14.524 17.1149 14.1917 16.97 13.7524 16.9148C13.7393 16.9131 13.7294 16.9021 13.7294 16.8889C13.7294 16.876 13.7389 16.8651 13.7516 16.8631C14.0786 16.8115 14.3468 16.6819 14.5561 16.4745C14.772 16.2623 14.879 15.9925 14.8771 15.6648C14.8771 15.3485 14.7891 15.0654 14.6129 14.8154C14.4368 14.5635 14.1906 14.3646 13.8743 14.2188C13.558 14.0729 13.1915 14 12.7749 14C12.3563 14 11.9832 14.0748 11.6556 14.2245C11.3298 14.3741 11.0722 14.5815 10.8828 14.8466C10.7184 15.0752 10.6239 15.3353 10.5994 15.6268C10.5932 15.7007 10.6536 15.7614 10.7279 15.7614H11.8072C11.8794 15.7614 11.9367 15.7034 11.9525 15.633C11.9707 15.5522 12.0043 15.4785 12.0533 15.412C12.1271 15.3116 12.2266 15.2339 12.3516 15.179C12.4785 15.1241 12.6196 15.0966 12.7749 15.0966C12.9226 15.0966 13.0523 15.1241 13.1641 15.179C13.2777 15.2339 13.3658 15.3116 13.4283 15.412C13.4927 15.5104 13.5239 15.625 13.522 15.7557C13.5239 15.8902 13.4879 16.0095 13.4141 16.1137C13.3402 16.2159 13.237 16.2955 13.1044 16.3523C12.9737 16.4091 12.8222 16.4375 12.6499 16.4375H12.2179C12.1442 16.4375 12.0845 16.4972 12.0845 16.5709V17.3042C12.0845 17.3778 12.1442 17.4375 12.2179 17.4375H12.6499C12.8468 17.4375 13.0173 17.4669 13.1612 17.5256C13.3071 17.5843 13.4198 17.6667 13.4993 17.7728C13.5789 17.8788 13.6177 18 13.6158 18.1364C13.6177 18.2728 13.5826 18.394 13.5107 18.5C13.4387 18.6042 13.3383 18.6866 13.2095 18.7472C13.0826 18.8059 12.9359 18.8353 12.7692 18.8353C12.6025 18.8353 12.4539 18.8078 12.3232 18.7529C12.1925 18.6979 12.0893 18.6222 12.0135 18.5256C11.9638 18.461 11.9292 18.3903 11.9097 18.3135C11.8921 18.2444 11.8352 18.1875 11.7639 18.1875H10.6114C10.5372 18.1875 10.4767 18.2482 10.483 18.3221C10.5081 18.6178 10.6064 18.8825 10.7777 19.1165C10.9747 19.3854 11.2436 19.5966 11.5845 19.75Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M17.7801 19.679C18.1476 19.9195 18.5851 20.0398 19.0926 20.0398C19.6021 20.0398 20.0396 19.9205 20.4051 19.6818C20.7726 19.4413 21.0557 19.0938 21.2546 18.6392C21.4534 18.1847 21.5529 17.6373 21.5529 16.9972C21.5548 16.3608 21.4563 15.8192 21.2574 15.3722C21.0585 14.9252 20.7744 14.5853 20.4051 14.3523C20.0377 14.1175 19.6002 14 19.0926 14C18.5851 14 18.1476 14.1175 17.7801 14.3523C17.4146 14.5853 17.1324 14.9252 16.9335 15.3722C16.7366 15.8173 16.6371 16.3589 16.6352 16.9972C16.6333 17.6354 16.7318 18.1818 16.9307 18.6364C17.1296 19.089 17.4127 19.4366 17.7801 19.679ZM19.8284 18.4262C19.6409 18.7349 19.3957 18.8892 19.0926 18.8892C18.8919 18.8892 18.7148 18.8211 18.5614 18.6847C18.408 18.5464 18.2887 18.3372 18.2034 18.0568C18.1201 17.7765 18.0794 17.4233 18.0813 16.9972C18.0832 16.3684 18.1769 15.9025 18.3625 15.5995C18.5481 15.2945 18.7915 15.1421 19.0926 15.1421C19.2953 15.1421 19.4724 15.2093 19.6239 15.3438C19.7754 15.4782 19.8938 15.6828 19.979 15.9574C20.0642 16.2301 20.1068 16.5767 20.1068 16.9972C20.1087 17.6392 20.0159 18.1156 19.8284 18.4262Z" fill="currentColor"/>',Icon$80='<path d="M15.6038 12.2148C16.0439 12.5399 16.6667 12.2257 16.6667 11.6786V10.1789C16.6667 10.1001 16.7351 10.0384 16.8134 10.0479C20.1116 10.4494 22.6667 13.2593 22.6667 16.6659C22.6667 20.3481 19.6817 23.3332 15.9995 23.3332C12.542 23.3332 9.69927 20.7015 9.36509 17.332C9.32875 16.9655 9.03371 16.6662 8.66548 16.6662L6.66655 16.6666C6.29841 16.6666 5.99769 16.966 6.02187 17.3334C6.36494 22.5454 10.7012 26.6667 16 26.6667C21.5228 26.6667 26 22.1895 26 16.6667C26 11.4103 21.9444 7.10112 16.7916 6.69758C16.7216 6.69209 16.6667 6.63396 16.6667 6.56372V4.98824C16.6667 4.44106 16.0439 4.12689 15.6038 4.45207L11.0765 7.79738C10.7159 8.06387 10.7159 8.60327 11.0766 8.86974L15.6038 12.2148Z" fill="currentColor"/>',Icon$81$1='<path d="M15.3333 10.3452C15.3333 10.8924 15.9561 11.2066 16.3962 10.8814L20.9234 7.5364C21.2841 7.26993 21.2841 6.73054 20.9235 6.46405L16.3962 3.11873C15.9561 2.79356 15.3333 3.10773 15.3333 3.6549V5.22682C15.3333 5.29746 15.2778 5.35579 15.2073 5.36066C9.31791 5.76757 4.66667 10.674 4.66667 16.6667C4.66667 22.9259 9.74078 28 16 28C22.0352 28 26.9686 23.2827 27.314 17.3341C27.3354 16.9665 27.0348 16.6673 26.6666 16.6673H24.6666C24.2984 16.6673 24.0029 16.9668 23.9726 17.3337C23.6336 21.4399 20.1937 24.6667 16 24.6667C11.5817 24.6667 8 21.085 8 16.6667C8 12.5225 11.1517 9.11428 15.1887 8.70739C15.2663 8.69957 15.3333 8.76096 15.3333 8.83893V10.3452Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M17.0879 19.679C17.4553 19.9195 17.8928 20.0398 18.4004 20.0398C18.9099 20.0398 19.3474 19.9205 19.7129 19.6818C20.0803 19.4413 20.3635 19.0938 20.5623 18.6392C20.7612 18.1847 20.8606 17.6373 20.8606 16.9972C20.8625 16.3608 20.764 15.8192 20.5652 15.3722C20.3663 14.9252 20.0822 14.5853 19.7129 14.3523C19.3455 14.1175 18.908 14 18.4004 14C17.8928 14 17.4553 14.1175 17.0879 14.3523C16.7224 14.5853 16.4402 14.9252 16.2413 15.3722C16.0443 15.8173 15.9449 16.3589 15.943 16.9972C15.9411 17.6354 16.0396 18.1818 16.2385 18.6364C16.4373 19.089 16.7205 19.4366 17.0879 19.679ZM19.1362 18.4262C18.9487 18.7349 18.7034 18.8892 18.4004 18.8892C18.1996 18.8892 18.0225 18.8211 17.8691 18.6847C17.7157 18.5464 17.5964 18.3372 17.5112 18.0568C17.4278 17.7765 17.3871 17.4233 17.389 16.9972C17.3909 16.3684 17.4847 15.9025 17.6703 15.5995C17.8559 15.2945 18.0992 15.1421 18.4004 15.1421C18.603 15.1421 18.7801 15.2093 18.9316 15.3438C19.0831 15.4782 19.2015 15.6828 19.2867 15.9574C19.372 16.2301 19.4146 16.5767 19.4146 16.9972C19.4165 17.6392 19.3237 18.1156 19.1362 18.4262Z" fill="currentColor"/> <path d="M13.7746 19.8978C13.8482 19.8978 13.9079 19.8381 13.9079 19.7644V14.2129C13.9079 14.1393 13.8482 14.0796 13.7746 14.0796H12.642C12.6171 14.0796 12.5927 14.0865 12.5716 14.0997L11.2322 14.9325C11.1931 14.9568 11.1693 14.9996 11.1693 15.0457V15.9497C11.1693 16.0539 11.2833 16.1178 11.3722 16.0635L12.464 15.396C12.4682 15.3934 12.473 15.3921 12.4779 15.3921C12.4926 15.3921 12.5045 15.404 12.5045 15.4187V19.7644C12.5045 19.8381 12.5642 19.8978 12.6378 19.8978H13.7746Z" fill="currentColor"/>',Icon$82='<path d="M15.3333 10.3452C15.3333 10.8924 15.9561 11.2066 16.3962 10.8814L20.9234 7.5364C21.2841 7.26993 21.2841 6.73054 20.9234 6.46405L16.3962 3.11873C15.9561 2.79356 15.3333 3.10773 15.3333 3.6549V5.22682C15.3333 5.29746 15.2777 5.35579 15.2073 5.36066C9.3179 5.76757 4.66666 10.674 4.66666 16.6667C4.66666 22.9259 9.74076 28 16 28C22.0352 28 26.9686 23.2827 27.314 17.3341C27.3353 16.9665 27.0348 16.6673 26.6666 16.6673H24.6666C24.2984 16.6673 24.0029 16.9668 23.9726 17.3337C23.6336 21.4399 20.1936 24.6667 16 24.6667C11.5817 24.6667 7.99999 21.085 7.99999 16.6667C7.99999 12.5225 11.1517 9.11428 15.1887 8.70739C15.2663 8.69957 15.3333 8.76096 15.3333 8.83893V10.3452Z" fill="currentColor"/> <path d="M13.9647 19.8182C14.0383 19.8182 14.098 19.7585 14.098 19.6849V14.1334C14.098 14.0597 14.0383 14 13.9647 14H12.8321C12.8072 14 12.7828 14.007 12.7617 14.0201L11.4223 14.8529C11.3832 14.8773 11.3594 14.9201 11.3594 14.9662V15.8702C11.3594 15.9743 11.4734 16.0383 11.5622 15.984L12.6541 15.3164C12.6583 15.3139 12.6631 15.3125 12.668 15.3125C12.6827 15.3125 12.6946 15.3244 12.6946 15.3391V19.6849C12.6946 19.7585 12.7543 19.8182 12.8279 19.8182H13.9647Z" fill="currentColor"/> <path d="M17.2808 19.6676C17.6104 19.8211 17.9873 19.8978 18.4115 19.8978C18.8641 19.8978 19.259 19.8106 19.5962 19.6364C19.9352 19.4603 20.1984 19.2178 20.3859 18.9091C20.5753 18.6004 20.67 18.2462 20.67 17.8466C20.67 17.4773 20.5905 17.1497 20.4314 16.8637C20.2742 16.5777 20.0583 16.3542 19.7837 16.1932C19.5109 16.0303 19.2003 15.9489 18.8518 15.9489C18.5772 15.9489 18.3319 16.0019 18.116 16.108C17.9064 16.21 17.7531 16.3393 17.6562 16.4958C17.6524 16.5019 17.6457 16.5057 17.6386 16.5057C17.6265 16.5057 17.6171 16.4953 17.6182 16.4833L17.7378 15.254C17.7445 15.1857 17.8019 15.1336 17.8706 15.1336H20.1929C20.2666 15.1336 20.3263 15.0739 20.3263 15.0002V14.1334C20.3263 14.0597 20.2666 14 20.1929 14H16.7163C16.6468 14 16.589 14.0534 16.5834 14.1226L16.3501 17.0168C16.3446 17.0848 16.3914 17.1459 16.4584 17.1585L17.4903 17.3522C17.5454 17.3625 17.6001 17.3366 17.6343 17.2923C17.7078 17.1974 17.804 17.1199 17.9229 17.0597C18.0744 16.9839 18.2344 16.947 18.403 16.9489C18.581 16.9489 18.7382 16.9887 18.8746 17.0682C19.0128 17.1459 19.1208 17.2548 19.1984 17.3949C19.278 17.5351 19.3168 17.6989 19.3149 17.8864C19.3168 18.0701 19.2789 18.233 19.2013 18.375C19.1236 18.5152 19.0166 18.6241 18.8802 18.7017C18.7439 18.7794 18.5876 18.8182 18.4115 18.8182C18.1861 18.8182 17.992 18.7538 17.8291 18.625C17.6993 18.5209 17.6176 18.3903 17.5841 18.2333C17.5692 18.1639 17.5122 18.108 17.4413 18.108H16.3404C16.2656 18.108 16.2049 18.1696 16.2119 18.244C16.2393 18.5373 16.3352 18.8007 16.4996 19.0341C16.6909 19.3031 16.9513 19.5142 17.2808 19.6676Z" fill="currentColor"/>',Icon$83='<path d="M15.3334 10.3452C15.3334 10.8924 15.9561 11.2066 16.3962 10.8814L20.9235 7.5364C21.2841 7.26993 21.2841 6.73054 20.9235 6.46405L16.3962 3.11873C15.9561 2.79356 15.3334 3.10773 15.3334 3.6549V5.22682C15.3334 5.29746 15.2778 5.35579 15.2073 5.36066C9.31793 5.76757 4.66669 10.674 4.66669 16.6667C4.66669 22.9259 9.74079 28 16 28C22.0352 28 26.9686 23.2827 27.314 17.3341C27.3354 16.9665 27.0349 16.6673 26.6667 16.6673H24.6666C24.2985 16.6673 24.0029 16.9668 23.9726 17.3337C23.6337 21.4399 20.1937 24.6667 16 24.6667C11.5817 24.6667 8.00002 21.085 8.00002 16.6667C8.00002 12.5225 11.1517 9.11428 15.1887 8.70739C15.2663 8.69957 15.3334 8.76096 15.3334 8.83893V10.3452Z" fill="currentColor"/> <path d="M11.5845 19.75C11.9273 19.9015 12.3203 19.9773 12.7635 19.9773C13.2181 19.9773 13.6205 19.9034 13.9709 19.7557C14.3232 19.6061 14.5978 19.4015 14.7948 19.1421C14.9936 18.8807 15.0931 18.5815 15.0931 18.2443C15.095 17.8864 14.9804 17.5881 14.7493 17.3495C14.524 17.1149 14.1917 16.97 13.7524 16.9148C13.7393 16.9131 13.7294 16.9021 13.7294 16.8889C13.7294 16.876 13.7389 16.8651 13.7516 16.8631C14.0787 16.8115 14.3468 16.6819 14.5561 16.4745C14.772 16.2623 14.879 15.9925 14.8772 15.6648C14.8772 15.3485 14.7891 15.0654 14.6129 14.8154C14.4368 14.5635 14.1906 14.3646 13.8743 14.2188C13.558 14.0729 13.1915 14 12.7749 14C12.3563 14 11.9832 14.0748 11.6556 14.2245C11.3298 14.3741 11.0722 14.5815 10.8828 14.8466C10.7184 15.0752 10.6239 15.3353 10.5994 15.6268C10.5932 15.7007 10.6537 15.7614 10.7279 15.7614H11.8072C11.8794 15.7614 11.9367 15.7034 11.9525 15.633C11.9707 15.5522 12.0043 15.4785 12.0533 15.412C12.1272 15.3116 12.2266 15.2339 12.3516 15.179C12.4785 15.1241 12.6196 15.0966 12.7749 15.0966C12.9226 15.0966 13.0523 15.1241 13.1641 15.179C13.2777 15.2339 13.3658 15.3116 13.4283 15.412C13.4927 15.5104 13.5239 15.625 13.522 15.7557C13.5239 15.8902 13.4879 16.0095 13.4141 16.1137C13.3402 16.2159 13.237 16.2955 13.1044 16.3523C12.9737 16.4091 12.8222 16.4375 12.6499 16.4375H12.2179C12.1442 16.4375 12.0845 16.4972 12.0845 16.5709V17.3042C12.0845 17.3778 12.1442 17.4375 12.2179 17.4375H12.6499C12.8468 17.4375 13.0173 17.4669 13.1612 17.5256C13.3071 17.5843 13.4198 17.6667 13.4993 17.7728C13.5789 17.8788 13.6177 18 13.6158 18.1364C13.6177 18.2728 13.5826 18.394 13.5107 18.5C13.4387 18.6042 13.3383 18.6866 13.2095 18.7472C13.0826 18.8059 12.9359 18.8353 12.7692 18.8353C12.6025 18.8353 12.4539 18.8078 12.3232 18.7529C12.1925 18.6979 12.0893 18.6222 12.0135 18.5256C11.9638 18.461 11.9292 18.3903 11.9097 18.3135C11.8921 18.2444 11.8352 18.1875 11.7639 18.1875H10.6114C10.5372 18.1875 10.4767 18.2482 10.483 18.3221C10.5081 18.6178 10.6064 18.8825 10.7777 19.1165C10.9747 19.3854 11.2436 19.5966 11.5845 19.75Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M17.7801 19.679C18.1476 19.9195 18.5851 20.0398 19.0926 20.0398C19.6021 20.0398 20.0396 19.9205 20.4051 19.6818C20.7726 19.4413 21.0557 19.0938 21.2546 18.6392C21.4534 18.1847 21.5529 17.6373 21.5529 16.9972C21.5548 16.3608 21.4563 15.8192 21.2574 15.3722C21.0585 14.9252 20.7745 14.5853 20.4051 14.3523C20.0377 14.1175 19.6002 14 19.0926 14C18.5851 14 18.1476 14.1175 17.7801 14.3523C17.4146 14.5853 17.1324 14.9252 16.9335 15.3722C16.7366 15.8173 16.6371 16.3589 16.6352 16.9972C16.6334 17.6354 16.7318 18.1818 16.9307 18.6364C17.1296 19.089 17.4127 19.4366 17.7801 19.679ZM19.8284 18.4262C19.6409 18.7349 19.3957 18.8892 19.0926 18.8892C18.8919 18.8892 18.7148 18.8211 18.5614 18.6847C18.408 18.5464 18.2887 18.3372 18.2034 18.0568C18.1201 17.7765 18.0794 17.4233 18.0813 16.9972C18.0832 16.3684 18.1769 15.9025 18.3625 15.5995C18.5481 15.2945 18.7915 15.1421 19.0926 15.1421C19.2953 15.1421 19.4724 15.2093 19.6239 15.3438C19.7754 15.4782 19.8938 15.6828 19.979 15.9574C20.0642 16.2301 20.1068 16.5767 20.1068 16.9972C20.1087 17.6392 20.0159 18.1156 19.8284 18.4262Z" fill="currentColor"/>',Icon$84='<path d="M16.4167 12.2148C15.9766 12.5399 15.3538 12.2257 15.3538 11.6786V10.1789C15.3538 10.1001 15.2854 10.0384 15.2072 10.0479C11.9089 10.4494 9.35384 13.2593 9.35384 16.6659C9.35384 20.3481 12.3389 23.3332 16.0211 23.3332C19.4785 23.3332 22.3212 20.7015 22.6554 17.332C22.6918 16.9655 22.9868 16.6662 23.355 16.6662L25.354 16.6666C25.7221 16.6666 26.0228 16.966 25.9986 17.3334C25.6556 22.5454 21.3193 26.6667 16.0205 26.6667C10.4977 26.6667 6.02051 22.1895 6.02051 16.6667C6.02051 11.4103 10.0761 7.10112 15.2289 6.69758C15.2989 6.69209 15.3538 6.63396 15.3538 6.56372V4.98824C15.3538 4.44106 15.9766 4.12689 16.4167 4.45207L20.944 7.79738C21.3046 8.06387 21.3046 8.60327 20.9439 8.86974L16.4167 12.2148Z" fill="currentColor"/>',Icon$85='<path d="M26.269 16.5634C26.7996 16.3313 26.7996 15.6688 26.269 15.4367L6.37817 6.73581C5.76274 6.4666 5.10768 7.03376 5.40897 7.57494L8.74776 13.5721C8.76512 13.6033 8.79425 13.6262 8.82864 13.6357L16.8708 15.8653C17.001 15.9014 17.0011 16.086 16.8709 16.1222L8.83101 18.3599C8.79668 18.3694 8.7676 18.3923 8.75026 18.4235L5.40897 24.4251C5.10768 24.9663 5.76274 25.5334 6.37817 25.2642L26.269 16.5634Z" fill="currentColor"/>',Icon$86='<path d="M18.6669 10.4001C18.6669 10.7683 18.3684 11.0667 18.0002 11.0667H16.2668C15.8987 11.0667 15.6002 10.7683 15.6002 10.4001V9.86674C15.6002 9.7931 15.5405 9.73341 15.4669 9.73341H5.99998C5.63179 9.73341 5.33331 9.43493 5.33331 9.06674V7.33341C5.33331 6.96522 5.63179 6.66674 5.99998 6.66674H15.4669C15.5405 6.66674 15.6002 6.60704 15.6002 6.53341V6.00007C15.6002 5.63188 15.8987 5.3334 16.2668 5.3334H18.0002C18.3684 5.3334 18.6669 5.63188 18.6669 6.00007V10.4001Z" fill="currentColor"/> <path d="M11.3334 18.8668C11.7016 18.8668 12.0001 18.5683 12.0001 18.2001V13.8001C12.0001 13.4319 11.7016 13.1335 11.3334 13.1335H9.60006C9.23187 13.1335 8.93339 13.4319 8.93339 13.8001V14.3335C8.93339 14.4071 8.8737 14.4668 8.80006 14.4668H6.00006C5.63187 14.4668 5.33339 14.7653 5.33339 15.1335V16.8668C5.33339 17.235 5.63187 17.5335 6.00006 17.5335H8.80006C8.8737 17.5335 8.93339 17.5932 8.93339 17.6668V18.2001C8.93339 18.5683 9.23187 18.8668 9.60006 18.8668H11.3334Z" fill="currentColor"/> <path d="M18.6667 26.0001C18.6667 26.3683 18.3682 26.6668 18 26.6668H16.2667C15.8985 26.6668 15.6 26.3683 15.6 26.0001V25.4668C15.6 25.3931 15.5403 25.3334 15.4667 25.3334H6.00014C5.63195 25.3334 5.33348 25.0349 5.33348 24.6668V22.9334C5.33348 22.5652 5.63195 22.2668 6.00014 22.2668H15.4667C15.5403 22.2668 15.6 22.2071 15.6 22.1334V21.6001C15.6 21.2319 15.8985 20.9334 16.2667 20.9334H18C18.3682 20.9334 18.6667 21.2319 18.6667 21.6001V26.0001Z" fill="currentColor"/> <path d="M22 24.6668C22 25.0349 22.2985 25.3334 22.6667 25.3334H26.0001C26.3683 25.3334 26.6668 25.0349 26.6668 24.6668V22.9334C26.6668 22.5652 26.3683 22.2668 26.0001 22.2668H22.6667C22.2985 22.2668 22 22.5652 22 22.9334V24.6668Z" fill="currentColor"/> <path d="M16.0001 17.5335C15.6319 17.5335 15.3334 17.235 15.3334 16.8668V15.1335C15.3334 14.7653 15.6319 14.4668 16.0001 14.4668H26.0001C26.3683 14.4668 26.6667 14.7653 26.6667 15.1335V16.8668C26.6667 17.235 26.3683 17.5335 26.0001 17.5335H16.0001Z" fill="currentColor"/> <path d="M22.0002 9.06674C22.0002 9.43493 22.2987 9.73341 22.6669 9.73341H26C26.3682 9.73341 26.6666 9.43493 26.6666 9.06674V7.3334C26.6666 6.96521 26.3682 6.66674 26 6.66674H22.6669C22.2987 6.66674 22.0002 6.96522 22.0002 7.33341V9.06674Z" fill="currentColor"/>',Icon$87='<path fill-rule="evenodd" clip-rule="evenodd" d="M9.99998 5.33333C7.42265 5.33333 5.33331 7.42267 5.33331 9.99999C5.33331 12.5773 7.42265 14.6667 9.99998 14.6667L22 14.6667C24.5773 14.6667 26.6666 12.5774 26.6666 10.0001C26.6666 7.42275 24.5773 5.33341 22 5.33341L10.0278 5.33341L9.99998 5.33333ZM14.2387 12.4C14.135 12.4 14.0704 12.2865 14.1192 12.195C14.4686 11.5407 14.6666 10.7935 14.6666 9.99999C14.6666 9.20651 14.4686 8.45929 14.1193 7.80504C14.0704 7.71359 14.135 7.60006 14.2387 7.60006L22 7.60006C23.3255 7.60006 24.4 8.67458 24.4 10.0001C24.4 11.3255 23.3255 12.4001 22 12.4001L14.2387 12.4ZM12.4 9.99993C12.4 11.3254 11.3255 12.3999 10 12.3999C8.67451 12.3999 7.6 11.3254 7.6 9.99993C7.6 8.67445 8.67451 7.59993 10 7.59993C11.3255 7.59993 12.4 8.67445 12.4 9.99993Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M5.33331 22C5.33331 24.5773 7.42265 26.6667 9.99998 26.6667L22 26.6667C24.5773 26.6667 26.6666 24.5773 26.6666 22C26.6666 19.4227 24.5773 17.3333 22 17.3333H9.99998C7.42265 17.3333 5.33331 19.4227 5.33331 22ZM24.4 22C24.4 23.3255 23.3255 24.4 22 24.4C20.6745 24.4 19.6 23.3255 19.6 22C19.6 20.6745 20.6745 19.6 22 19.6C23.3255 19.6 24.4 20.6745 24.4 22Z" fill="currentColor"/>',Icon$88$1='<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5722 5.33333C13.2429 5.33333 12.9629 5.57382 12.9132 5.89938L12.4063 9.21916C12.4 9.26058 12.3746 9.29655 12.3378 9.31672C12.2387 9.37118 12.1409 9.42779 12.0444 9.48648C12.0086 9.5083 11.9646 9.51242 11.9255 9.49718L8.79572 8.27692C8.48896 8.15732 8.14083 8.27958 7.9762 8.56472L5.5491 12.7686C5.38444 13.0538 5.45271 13.4165 5.70981 13.6223L8.33308 15.7225C8.3658 15.7487 8.38422 15.7887 8.38331 15.8306C8.38209 15.8867 8.38148 15.9429 8.38148 15.9993C8.38148 16.0558 8.3821 16.1121 8.38332 16.1684C8.38423 16.2102 8.36582 16.2503 8.33313 16.2765L5.7103 18.3778C5.45334 18.5836 5.38515 18.9462 5.54978 19.2314L7.97688 23.4352C8.14155 23.7205 8.48981 23.8427 8.79661 23.723L11.926 22.5016C11.9651 22.4864 12.009 22.4905 12.0449 22.5123C12.1412 22.5709 12.2388 22.6274 12.3378 22.6818C12.3745 22.7019 12.4 22.7379 12.4063 22.7793L12.9132 26.0993C12.9629 26.4249 13.2429 26.6654 13.5722 26.6654H18.4264C18.7556 26.6654 19.0356 26.425 19.0854 26.0995L19.5933 22.7801C19.5997 22.7386 19.6252 22.7027 19.6619 22.6825C19.7614 22.6279 19.8596 22.5711 19.9564 22.5121C19.9923 22.4903 20.0362 22.4862 20.0754 22.5015L23.2035 23.7223C23.5103 23.842 23.8585 23.7198 24.0232 23.4346L26.4503 19.2307C26.6149 18.9456 26.5467 18.583 26.2898 18.3771L23.6679 16.2766C23.6352 16.2504 23.6168 16.2104 23.6177 16.1685C23.619 16.1122 23.6196 16.0558 23.6196 15.9993C23.6196 15.9429 23.619 15.8866 23.6177 15.8305C23.6168 15.7886 23.6353 15.7486 23.668 15.7224L26.2903 13.623C26.5474 13.4172 26.6156 13.0544 26.451 12.7692L24.0239 8.56537C23.8592 8.28023 23.5111 8.15797 23.2043 8.27757L20.0758 9.49734C20.0367 9.51258 19.9927 9.50846 19.9569 9.48664C19.8599 9.42762 19.7616 9.37071 19.6618 9.31596C19.6251 9.2958 19.5997 9.25984 19.5933 9.21843L19.0854 5.89915C19.0356 5.57369 18.7556 5.33333 18.4264 5.33333H13.5722ZM16.0001 20.2854C18.3672 20.2854 20.2862 18.3664 20.2862 15.9993C20.2862 13.6322 18.3672 11.7132 16.0001 11.7132C13.6329 11.7132 11.714 13.6322 11.714 15.9993C11.714 18.3664 13.6329 20.2854 16.0001 20.2854Z" fill="currentColor"/>',Icon$89='<path d="M18.236 8.78524C17.7959 8.46009 17.1732 8.77427 17.1732 9.32143V12.3798C17.1732 12.4506 17.118 12.5089 17.0474 12.5135C15.5617 12.6091 14.0334 12.9224 12.5206 13.473C6.93931 15.5045 3.27299 20.1452 3.12081 24.7693C3.11654 24.899 3.28271 24.9521 3.36094 24.8486C5.63689 21.8364 9.7882 19.751 14.6002 19.5178C14.606 19.5175 14.6106 19.5127 14.6106 19.5069C14.6106 19.5009 14.6155 19.496 14.6215 19.496H17.0398C17.1135 19.496 17.1732 19.5557 17.1732 19.6293V22.6784C17.1732 23.2256 17.796 23.5398 18.236 23.2146L27.2746 16.5358C27.6352 16.2693 27.6352 15.7299 27.2745 15.4634L18.236 8.78524Z" fill="currentColor"/>',Icon$90='<path d="M21.2204 11.3458C21.2666 11.3212 21.3229 11.3262 21.3652 11.3572C21.9167 11.7613 22.5972 12 23.3333 12C25.1743 12 26.6666 10.5076 26.6666 8.66665C26.6666 6.8257 25.1743 5.33331 23.3333 5.33331C21.4924 5.33331 20 6.8257 20 8.66665C20 8.73806 20.0022 8.80896 20.0066 8.87926C20.01 8.93275 19.9826 8.98379 19.9353 9.00895L10.6918 13.9238C10.6468 13.9477 10.5924 13.9438 10.5504 13.915C10.0145 13.5472 9.36571 13.332 8.66665 13.332C6.8257 13.332 5.33331 14.8244 5.33331 16.6653C5.33331 18.5063 6.8257 19.9987 8.66665 19.9987C9.41311 19.9987 10.1023 19.7533 10.6579 19.3388C10.6974 19.3093 10.7498 19.3026 10.7949 19.3227L19.9243 23.3873C19.9712 23.4083 20.0017 23.4545 20.0044 23.5059C20.0942 25.2666 21.5502 26.6666 23.3333 26.6666C25.1743 26.6666 26.6666 25.1743 26.6666 23.3333C26.6666 21.4924 25.1743 20 23.3333 20C22.4593 20 21.6639 20.3363 21.0695 20.8866C21.0294 20.9237 20.9711 20.9344 20.9212 20.9122L12.0754 16.9738C12.0238 16.9508 11.9925 16.8977 11.9954 16.8412C11.9984 16.783 12 16.7243 12 16.6653C12 16.5598 11.9951 16.4553 11.9855 16.3522C11.9804 16.2974 12.0078 16.2442 12.0565 16.2184L21.2204 11.3458Z" fill="currentColor"/>',Icon$91='<path d="M22.6666 6.18871C22.6666 5.64155 23.2894 5.32737 23.7295 5.65252L28.2567 8.99753C28.6174 9.26401 28.6174 9.8034 28.2568 10.0699L23.7295 13.4152C23.2894 13.7404 22.6666 13.4262 22.6666 12.879V11.1998C22.6666 11.1262 22.607 11.0665 22.5333 11.0665H21.3333C18.6094 11.0665 16.3997 13.2748 16.3997 16.0001C16.3997 18.7253 18.6094 20.9336 21.3333 20.9336H22.5333C22.607 20.9336 22.6666 20.874 22.6666 20.8003V19.121C22.6666 18.5738 23.2894 18.2597 23.7295 18.5848L28.2567 21.9298C28.6174 22.1963 28.6174 22.7357 28.2568 23.0022L23.7295 26.3475C23.2894 26.6727 22.6666 26.3585 22.6666 25.8113V24.1334C22.6666 24.0597 22.607 24.0001 22.5333 24.0001H21.3333C18.6227 24.0001 16.2268 22.6517 14.7798 20.5891C14.725 20.5111 14.6082 20.5111 14.5535 20.5891C13.1065 22.6517 10.7106 24.0001 7.99998 24.0001H5.99998C5.63179 24.0001 5.33331 23.7016 5.33331 23.3334V21.6003C5.33331 21.2321 5.63179 20.9336 5.99998 20.9336H7.99998C10.7239 20.9336 12.9336 18.7253 12.9336 16.0001C12.9336 13.2748 10.7239 11.0665 7.99998 11.0665H5.99998C5.63179 11.0665 5.33331 10.768 5.33331 10.3998V8.66672C5.33331 8.29853 5.63179 8.00005 5.99998 8.00005H7.99998C10.7106 8.00005 13.1065 9.34843 14.5535 11.411C14.6082 11.489 14.725 11.489 14.7798 11.411C16.2268 9.34843 18.6227 8.00005 21.3333 8.00005H22.5333C22.607 8.00005 22.6666 7.94036 22.6666 7.86672V6.18871Z" fill="currentColor"/> <path d="M28.6666 18.0001C29.7712 18.0001 30.6666 17.1046 30.6666 16.0001C30.6666 14.8955 29.7712 14.0001 28.6666 14.0001C27.5621 14.0001 26.6666 14.8955 26.6666 16.0001C26.6666 17.1046 27.5621 18.0001 28.6666 18.0001Z" fill="currentColor"/>',Icon$92='<path d="M23.7295 5.65252C23.2894 5.32737 22.6667 5.64155 22.6667 6.18871V7.86672C22.6667 7.94036 22.607 8.00005 22.5333 8.00005H21.3333C18.6228 8.00005 16.2268 9.34843 14.7798 11.411C14.7251 11.489 14.6083 11.489 14.5536 11.411C13.1065 9.34843 10.7106 8.00005 8.00001 8.00005H6.00001C5.63182 8.00005 5.33334 8.29853 5.33334 8.66672V10.3998C5.33334 10.768 5.63182 11.0665 6.00001 11.0665H8.00001C10.724 11.0665 12.9336 13.2748 12.9336 16.0001C12.9336 18.7253 10.724 20.9336 8.00001 20.9336H6.00001C5.63182 20.9336 5.33334 21.2321 5.33334 21.6003V23.3334C5.33334 23.7016 5.63182 24.0001 6.00001 24.0001H8.00001C10.7106 24.0001 13.1065 22.6517 14.5536 20.5891C14.6083 20.5111 14.7251 20.5111 14.7798 20.5891C16.2268 22.6517 18.6228 24.0001 21.3333 24.0001H22.5333C22.607 24.0001 22.6667 24.0597 22.6667 24.1334V25.8113C22.6667 26.3585 23.2895 26.6727 23.7295 26.3475L28.2568 23.0022C28.6175 22.7357 28.6174 22.1963 28.2568 21.9298L23.7295 18.5848C23.2894 18.2597 22.6667 18.5738 22.6667 19.121V20.8003C22.6667 20.874 22.607 20.9336 22.5333 20.9336H21.3333C18.6094 20.9336 16.3997 18.7253 16.3997 16.0001C16.3997 13.2748 18.6094 11.0665 21.3333 11.0665H22.5333C22.607 11.0665 22.6667 11.1262 22.6667 11.1998V12.879C22.6667 13.4262 23.2895 13.7404 23.7295 13.4152L28.2568 10.0699C28.6175 9.8034 28.6174 9.26401 28.2568 8.99753L23.7295 5.65252Z" fill="currentColor"/>',Icon$93='<path d="M8.66667 8C8.29848 8 8 8.29848 8 8.66667V23.3333C8 23.7015 8.29848 24 8.66667 24H23.3333C23.7015 24 24 23.7015 24 23.3333V8.66667C24 8.29848 23.7015 8 23.3333 8H8.66667Z" fill="currentColor"/>',Icon$94='<path d="M14.6667 17.3333C14.6667 16.9651 14.9652 16.6667 15.3333 16.6667H20.6667C21.0349 16.6667 21.3333 16.9651 21.3333 17.3333V18.6667C21.3333 19.0349 21.0349 19.3333 20.6667 19.3333H15.3333C14.9652 19.3333 14.6667 19.0349 14.6667 18.6667V17.3333Z" fill="currentColor"/> <path d="M11.3333 12C10.9652 12 10.6667 12.2985 10.6667 12.6667V14C10.6667 14.3682 10.9652 14.6667 11.3333 14.6667H16.6667C17.0349 14.6667 17.3333 14.3682 17.3333 14V12.6667C17.3333 12.2985 17.0349 12 16.6667 12H11.3333Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M5.33334 7.33334C5.33334 6.96515 5.63182 6.66667 6.00001 6.66667H26C26.3682 6.66667 26.6667 6.96515 26.6667 7.33334V24C26.6667 24.3682 26.3682 24.6667 26 24.6667H24.1333C24.0597 24.6667 24 24.7264 24 24.8V27.3452C24 27.8924 23.3772 28.2065 22.9372 27.8814L18.6216 24.6928C18.5986 24.6758 18.5709 24.6667 18.5423 24.6667H6.00001C5.63182 24.6667 5.33334 24.3682 5.33334 24V7.33334ZM8.66668 9.33334C8.29849 9.33334 8.00001 9.63181 8.00001 10V21.3333C8.00001 21.7015 8.29849 22 8.66668 22H23.3333C23.7015 22 24 21.7015 24 21.3333V10C24 9.63182 23.7015 9.33334 23.3333 9.33334H8.66668Z" fill="currentColor"/>',Icon$95='<path d="M15.332 7.33333C14.9639 7.33333 14.6654 7.03486 14.6654 6.66667V4.66667C14.6654 4.29848 14.9639 4 15.332 4H16.6654C17.0336 4 17.332 4.29848 17.332 4.66667V6.66667C17.332 7.03486 17.0336 7.33333 16.6654 7.33333H15.332Z" fill="currentColor"/> <path d="M15.332 28C14.9639 28 14.6654 27.7015 14.6654 27.3333V25.3333C14.6654 24.9651 14.9639 24.6667 15.332 24.6667H16.6654C17.0336 24.6667 17.332 24.9651 17.332 25.3333V27.3333C17.332 27.7015 17.0336 28 16.6654 28H15.332Z" fill="currentColor"/> <path d="M7.24952 12.4883C7.56838 12.6724 7.97611 12.5631 8.1602 12.2443L8.82687 11.0896C9.01096 10.7707 8.90171 10.363 8.58285 10.1789L6.8508 9.17888C6.53194 8.99479 6.12421 9.10404 5.94012 9.4229L5.27345 10.5776C5.08935 10.8965 5.1986 11.3042 5.51747 11.4883L7.24952 12.4883Z" fill="currentColor"/> <path d="M26.0581 22.5776C25.874 22.8965 25.4662 23.0057 25.1474 22.8216L23.4153 21.8216C23.0965 21.6375 22.9872 21.2298 23.1713 20.9109L23.838 19.7562C24.0221 19.4374 24.4298 19.3281 24.7487 19.5122L26.4807 20.5122C26.7996 20.6963 26.9088 21.104 26.7247 21.4229L26.0581 22.5776Z" fill="currentColor"/> <path d="M8.58285 21.8216C8.90171 21.6375 9.01096 21.2298 8.82687 20.9109L8.1602 19.7562C7.9761 19.4374 7.56838 19.3281 7.24952 19.5122L5.51747 20.5122C5.1986 20.6963 5.08935 21.104 5.27345 21.4229L5.94012 22.5776C6.12421 22.8965 6.53194 23.0057 6.8508 22.8216L8.58285 21.8216Z" fill="currentColor"/> <path d="M26.7247 10.5776C26.9088 10.8965 26.7996 11.3042 26.4807 11.4883L24.7487 12.4883C24.4298 12.6724 24.0221 12.5631 23.838 12.2443L23.1713 11.0896C22.9872 10.7707 23.0965 10.363 23.4153 10.1789L25.1474 9.17888C25.4662 8.99478 25.874 9.10403 26.0581 9.4229L26.7247 10.5776Z" fill="currentColor"/> <path d="M16 10C12.6863 10 10 12.6863 10 16C10 19.3137 12.6863 22 16 22C19.3137 22 22 19.3137 22 16C22 12.6863 19.3137 10 16 10Z" fill="currentColor"/>',Icon$96='<path fill-rule="evenodd" clip-rule="evenodd" d="M5.33333 7.33334C5.33333 6.96515 5.63181 6.66667 5.99999 6.66667H26C26.3682 6.66667 26.6667 6.96515 26.6667 7.33334V24.6667C26.6667 25.0349 26.3682 25.3333 26 25.3333H5.99999C5.63181 25.3333 5.33333 25.0349 5.33333 24.6667V7.33334ZM7.99999 10C7.99999 9.63182 8.29847 9.33334 8.66666 9.33334H19.8667C19.9403 9.33334 20 9.39303 20 9.46667V22.5333C20 22.607 19.9403 22.6667 19.8667 22.6667H8.66666C8.29847 22.6667 7.99999 22.3682 7.99999 22V10Z" fill="currentColor"/>',Icon$97='<path fill-rule="evenodd" clip-rule="evenodd" d="M5.33334 7.33334C5.33334 6.96515 5.63181 6.66667 6 6.66667H26C26.3682 6.66667 26.6667 6.96515 26.6667 7.33334V24.6667C26.6667 25.0349 26.3682 25.3333 26 25.3333H6C5.63181 25.3333 5.33334 25.0349 5.33334 24.6667V7.33334ZM8 10C8 9.63182 8.29848 9.33334 8.66667 9.33334H17.2C17.2736 9.33334 17.3333 9.39303 17.3333 9.46667V22.5333C17.3333 22.607 17.2736 22.6667 17.2 22.6667H8.66667C8.29848 22.6667 8 22.3682 8 22V10ZM20 22.5333C20 22.607 20.0597 22.6667 20.1333 22.6667H23.3333C23.7015 22.6667 24 22.3682 24 22V10C24 9.63182 23.7015 9.33334 23.3333 9.33334H20.1333C20.0597 9.33334 20 9.39303 20 9.46667V22.5333Z" fill="currentColor"/>',Icon$98='<path fill-rule="evenodd" clip-rule="evenodd" d="M21.0774 7.34581V20.8132C21.1029 21.0075 21.0461 21.2113 20.907 21.3638C20.865 21.4114 20.8166 21.4529 20.763 21.4869L12.4613 27.7302C11.4972 28.4553 10.1559 27.618 10.3539 26.4147L11.1225 21.7442C11.1358 21.663 11.0732 21.5892 10.9909 21.5892H5.33411C4.50479 21.5892 3.87666 20.8269 4.02118 19.9958L6.1438 7.78785C6.2565 7.13969 6.80998 6.6673 7.45673 6.6673L20.4108 6.6673C20.779 6.6673 21.0774 6.97108 21.0774 7.34581ZM14.2638 19.0776C14.2772 18.9964 14.2145 18.9226 14.1323 18.9226H7.07297C6.9902 18.9226 6.92743 18.8479 6.9416 18.7664L8.56244 9.44446C8.57354 9.38059 8.62897 9.33396 8.6938 9.33396L18.2774 9.33397C18.3511 9.33397 18.4108 9.39366 18.4108 9.4673V19.8527C18.4108 19.8946 18.3911 19.9341 18.3576 19.9593L13.7857 23.3976C13.6896 23.4699 13.5545 23.388 13.574 23.2694L14.2638 19.0776Z" fill="currentColor"/> <path d="M23.3333 20.6621C23.3333 21.0303 23.6318 21.3288 24 21.3288H26C26.3682 21.3288 26.6667 21.0303 26.6667 20.6621V7.33398C26.6667 6.96579 26.3682 6.66732 26 6.66732H24C23.6318 6.66732 23.3333 6.96579 23.3333 7.33398V20.6621Z" fill="currentColor"/>',Icon$99='<path fill-rule="evenodd" clip-rule="evenodd" d="M10.9226 24.6542V11.1868C10.8971 10.9925 10.954 10.7887 11.093 10.6362C11.135 10.5886 11.1834 10.5471 11.237 10.5131L19.5387 4.26976C20.5028 3.54469 21.8441 4.38199 21.6461 5.5853L20.8775 10.2558C20.8642 10.337 20.9268 10.4108 21.0091 10.4108H26.6659C27.4952 10.4108 28.1233 11.1731 27.9788 12.0042L25.8562 24.2121C25.7435 24.8603 25.19 25.3327 24.5433 25.3327L11.5892 25.3327C11.221 25.3327 10.9226 25.0289 10.9226 24.6542ZM17.7362 12.9224C17.7228 13.0036 17.7855 13.0774 17.8677 13.0774H24.927C25.0098 13.0774 25.0726 13.1521 25.0584 13.2336L23.4376 22.5555C23.4265 22.6194 23.371 22.666 23.3062 22.666L13.7226 22.666C13.6489 22.666 13.5892 22.6063 13.5892 22.5327V12.1473C13.5892 12.1054 13.6089 12.0659 13.6424 12.0407L18.2143 8.60242C18.3104 8.53015 18.4455 8.61198 18.426 8.73063L17.7362 12.9224Z" fill="currentColor"/> <path d="M8.66666 11.3379C8.66666 10.9697 8.36818 10.6712 7.99999 10.6712H5.99999C5.63181 10.6712 5.33333 10.9697 5.33333 11.3379V24.666C5.33333 25.0342 5.6318 25.3327 5.99999 25.3327H7.99999C8.36818 25.3327 8.66666 25.0342 8.66666 24.666L8.66666 11.3379Z" fill="currentColor"/>',Icon$100='<path d="M14.6666 16.6667C14.6666 17.0349 14.9651 17.3334 15.3333 17.3334H16.6666C17.0348 17.3334 17.3333 17.0349 17.3333 16.6667V11.3334C17.3333 10.9652 17.0348 10.6667 16.6666 10.6667H15.3333C14.9651 10.6667 14.6666 10.9652 14.6666 11.3334V16.6667Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.99969C11.6318 1.99969 11.3333 2.29817 11.3333 2.66636V3.99969C11.3333 4.36788 11.6318 4.66636 12 4.66636H14.5333C14.6069 4.66636 14.6666 4.72606 14.6666 4.79969V5.29814C14.6666 5.3654 14.6162 5.42208 14.5495 5.43114C9.3446 6.13878 5.33331 10.601 5.33331 16C5.33331 21.8911 10.1089 26.6667 16 26.6667C21.891 26.6667 26.6666 21.8911 26.6666 16C26.6666 10.601 22.6554 6.13878 17.4504 5.43114C17.3838 5.42208 17.3333 5.3654 17.3333 5.29814V4.7997C17.3333 4.72606 17.393 4.66636 17.4666 4.66636H20C20.3682 4.66636 20.6666 4.36788 20.6666 3.99969V2.66636C20.6666 2.29817 20.3682 1.99969 20 1.99969H12ZM24 16C24 20.4183 20.4183 24 16 24C11.5817 24 7.99998 20.4183 7.99998 16C7.99998 11.5817 11.5817 8.00002 16 8.00002C20.4183 8.00002 24 11.5817 24 16Z" fill="currentColor"/>',Icon$101='<path d="M12 14C12 13.6318 12.2985 13.3333 12.6667 13.3333H15.3333C15.7015 13.3333 16 13.6318 16 14V15.3333C16 15.7015 15.7015 16 15.3333 16H12.6667C12.2985 16 12 15.7015 12 15.3333V14Z" fill="currentColor"/> <path d="M12 19.3333C12 18.9651 12.2985 18.6667 12.6667 18.6667H19.3333C19.7015 18.6667 20 18.9651 20 19.3333V20.6667C20 21.0349 19.7015 21.3333 19.3333 21.3333H12.6667C12.2985 21.3333 12 21.0349 12 20.6667V19.3333Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M7.33332 5.33333C6.96513 5.33333 6.66666 5.63181 6.66666 5.99999V26C6.66666 26.3682 6.96513 26.6667 7.33332 26.6667H24.6667C25.0348 26.6667 25.3333 26.3682 25.3333 26V13.3892C25.3333 13.3539 25.3193 13.32 25.2943 13.295L17.3724 5.37238C17.3474 5.34738 17.3135 5.33333 17.2781 5.33333H7.33332ZM9.99999 7.99999H17.2C17.2736 7.99999 17.3333 8.05969 17.3333 8.13333V12.6667C17.3333 13.0349 17.6318 13.3333 18 13.3333H22.5333C22.607 13.3333 22.6667 13.393 22.6667 13.4667V23.3333C22.6667 23.7015 22.3682 24 22 24H9.99999C9.6318 24 9.33332 23.7015 9.33332 23.3333V8.66666C9.33332 8.29847 9.6318 7.99999 9.99999 7.99999Z" fill="currentColor"/>',Icon$102='<path fill-rule="evenodd" clip-rule="evenodd" d="M5.33334 6.00001C5.33334 5.63182 5.63182 5.33334 6.00001 5.33334H26C26.3682 5.33334 26.6667 5.63182 26.6667 6.00001V20.6667C26.6667 21.0349 26.3682 21.3333 26 21.3333H6.00001C5.63182 21.3333 5.33334 21.0349 5.33334 20.6667V6.00001ZM8.40008 9.06634C8.40008 8.69815 8.69855 8.39967 9.06674 8.39967H22.9339C23.3021 8.39967 23.6006 8.69815 23.6006 9.06634V17.6002C23.6006 17.9684 23.3021 18.2669 22.9339 18.2669H9.06674C8.69855 18.2669 8.40008 17.9684 8.40008 17.6002V9.06634Z" fill="currentColor"/> <path d="M11.3333 23.9999C10.9652 23.9999 10.6667 24.2984 10.6667 24.6666V25.9999C10.6667 26.3681 10.9652 26.6666 11.3333 26.6666H20.6667C21.0349 26.6666 21.3333 26.3681 21.3333 25.9999V24.6666C21.3333 24.2984 21.0349 23.9999 20.6667 23.9999H11.3333Z" fill="currentColor"/>',Icon$103='<path d="M16 16C18.9455 16 21.3333 13.6122 21.3333 10.6666C21.3333 7.72113 18.9455 5.33331 16 5.33331C13.0545 5.33331 10.6667 7.72113 10.6667 10.6666C10.6667 13.6122 13.0545 16 16 16Z" fill="currentColor"/> <path d="M11.3333 18C8.38781 18 6 20.3878 6 23.3333V26.5333C6 26.607 6.0597 26.6666 6.13333 26.6666H9.2C9.27364 26.6666 9.33333 26.607 9.33333 26.5333V24C9.33333 22.5272 10.5272 21.3333 12 21.3333H20C21.4728 21.3333 22.6667 22.5272 22.6667 24V26.5333C22.6667 26.607 22.7264 26.6666 22.8 26.6666H25.8664C25.94 26.6666 25.9997 26.607 25.9997 26.5333L26 23.3333C26 20.3878 23.6122 18 20.6667 18H11.3333Z" fill="currentColor"/>',Icon$104$1='<path d="M17.5091 24.6595C17.5091 25.2066 16.8864 25.5208 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9992 9.36923 19.9992H4.66667C4.29848 19.9992 4 19.7007 4 19.3325V12.6658C4 12.2976 4.29848 11.9992 4.66667 11.9992H9.37115C9.39967 11.9992 9.42745 11.99 9.45039 11.9731L16.4463 6.80363C16.8863 6.47845 17.5091 6.79262 17.5091 7.3398L17.5091 24.6595Z" fill="currentColor"/> <path d="M27.5091 9.33336C27.8773 9.33336 28.1758 9.63184 28.1758 10V22C28.1758 22.3682 27.8773 22.6667 27.5091 22.6667H26.1758C25.8076 22.6667 25.5091 22.3682 25.5091 22V10C25.5091 9.63184 25.8076 9.33336 26.1758 9.33336L27.5091 9.33336Z" fill="currentColor"/> <path d="M22.1758 12C22.544 12 22.8424 12.2985 22.8424 12.6667V19.3334C22.8424 19.7016 22.544 20 22.1758 20H20.8424C20.4743 20 20.1758 19.7016 20.1758 19.3334V12.6667C20.1758 12.2985 20.4743 12 20.8424 12H22.1758Z" fill="currentColor"/>',Icon$105$1='<path d="M17.5091 24.6594C17.5091 25.2066 16.8864 25.5207 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9991 9.36923 19.9991H4.66667C4.29848 19.9991 4 19.7006 4 19.3324V12.6658C4 12.2976 4.29848 11.9991 4.66667 11.9991H9.37115C9.39967 11.9991 9.42745 11.99 9.45039 11.973L16.4463 6.80358C16.8863 6.4784 17.5091 6.79258 17.5091 7.33975L17.5091 24.6594Z" fill="currentColor"/> <path d="M22.8424 12.6667C22.8424 12.2985 22.544 12 22.1758 12H20.8424C20.4743 12 20.1758 12.2985 20.1758 12.6667V19.3333C20.1758 19.7015 20.4743 20 20.8424 20H22.1758C22.544 20 22.8424 19.7015 22.8424 19.3333V12.6667Z" fill="currentColor"/>',Icon$106='<path d="M10.2017 23.401C10.462 23.6613 10.8841 23.6613 11.1445 23.401L15.9057 18.6398C15.9577 18.5877 16.0422 18.5877 16.0942 18.6398L20.8555 23.401C21.1158 23.6613 21.5379 23.6613 21.7983 23.401L23.401 21.7982C23.6614 21.5378 23.6614 21.1157 23.401 20.8554L18.6398 16.0942C18.5878 16.0421 18.5878 15.9577 18.6398 15.9056L23.401 11.1444C23.6613 10.8841 23.6613 10.462 23.401 10.2016L21.7982 8.59886C21.5379 8.33851 21.1158 8.33851 20.8554 8.59886L16.0942 13.36C16.0422 13.4121 15.9577 13.4121 15.9057 13.36L11.1445 8.59887C10.8842 8.33852 10.4621 8.33852 10.2017 8.59887L8.59894 10.2016C8.33859 10.462 8.33859 10.8841 8.59894 11.1445L13.3601 15.9056C13.4122 15.9577 13.4122 16.0421 13.3601 16.0942L8.59889 20.8554C8.33854 21.1157 8.33854 21.5378 8.59889 21.7982L10.2017 23.401Z" fill="currentColor"/>';const Icon=reactExports.forwardRef((e,t)=>{const{width:n,height:r,size:i=null,paths:s,...a}=e;return reactExports.createElement("svg",{viewBox:"0 0 32 32",...a,width:n??i,height:r??i,fill:"none","aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",ref:t,dangerouslySetInnerHTML:{__html:s}})});Icon.displayName="VidstackIcon";const cn=e=>e?`${e} vds-icon`:"vds-icon",AccessibilityIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$0$1}));AccessibilityIcon.displayName="VidstackAccessibilityIcon";const AddNoteIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$1}));AddNoteIcon.displayName="VidstackAddNoteIcon";const AddPlaylistIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$2}));AddPlaylistIcon.displayName="VidstackAddPlaylistIcon";const AddUserIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$3}));AddUserIcon.displayName="VidstackAddUserIcon";const AddIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$4}));AddIcon.displayName="VidstackAddIcon";const AirPlayIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$5$1}));AirPlayIcon.displayName="VidstackAirPlayIcon";const ArrowCollapseInIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$6}));ArrowCollapseInIcon.displayName="VidstackArrowCollapseInIcon";const ArrowCollapseIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$7}));ArrowCollapseIcon.displayName="VidstackArrowCollapseIcon";const ArrowDownIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$8$1}));ArrowDownIcon.displayName="VidstackArrowDownIcon";const ArrowExpandOutIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$9}));ArrowExpandOutIcon.displayName="VidstackArrowExpandOutIcon";const ArrowExpandIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$10}));ArrowExpandIcon.displayName="VidstackArrowExpandIcon";const ArrowLeftIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$11$1}));ArrowLeftIcon.displayName="VidstackArrowLeftIcon";const ArrowRightIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$12}));ArrowRightIcon.displayName="VidstackArrowRightIcon";const ArrowUpIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$13$1}));ArrowUpIcon.displayName="VidstackArrowUpIcon";const BookmarkIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$14}));BookmarkIcon.displayName="VidstackBookmarkIcon";const CameraIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$15}));CameraIcon.displayName="VidstackCameraIcon";const ChaptersIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$16$1}));ChaptersIcon.displayName="VidstackChaptersIcon";const ChatCollapseIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$17}));ChatCollapseIcon.displayName="VidstackChatCollapseIcon";const ChatIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$18}));ChatIcon.displayName="VidstackChatIcon";const CheckIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$19$1}));CheckIcon.displayName="VidstackCheckIcon";const ChevronDownIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$20}));ChevronDownIcon.displayName="VidstackChevronDownIcon";const ChevronLeftIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$21}));ChevronLeftIcon.displayName="VidstackChevronLeftIcon";const ChevronRightIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$22$1}));ChevronRightIcon.displayName="VidstackChevronRightIcon";const ChevronUpIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$23}));ChevronUpIcon.displayName="VidstackChevronUpIcon";const ChromecastIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$24$1}));ChromecastIcon.displayName="VidstackChromecastIcon";const ClipIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$25}));ClipIcon.displayName="VidstackClipIcon";const ClosedCaptionsOnIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$26$1}));ClosedCaptionsOnIcon.displayName="VidstackClosedCaptionsOnIcon";const ClosedCaptionsIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$27$1}));ClosedCaptionsIcon.displayName="VidstackClosedCaptionsIcon";const CommentIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$28}));CommentIcon.displayName="VidstackCommentIcon";const ComputerIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$29}));ComputerIcon.displayName="VidstackComputerIcon";const DeviceIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$30}));DeviceIcon.displayName="VidstackDeviceIcon";const DownloadIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$31$1}));DownloadIcon.displayName="VidstackDownloadIcon";const EpisodesIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$32}));EpisodesIcon.displayName="VidstackEpisodesIcon";const EyeIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$33$1}));EyeIcon.displayName="VidstackEyeIcon";const FastBackwardIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$34$1}));FastBackwardIcon.displayName="VidstackFastBackwardIcon";const FastForwardIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$35$1}));FastForwardIcon.displayName="VidstackFastForwardIcon";const FlagIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$36}));FlagIcon.displayName="VidstackFlagIcon";const FullscreenArrowExitIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$37}));FullscreenArrowExitIcon.displayName="VidstackFullscreenArrowExitIcon";const FullscreenArrowIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$38}));FullscreenArrowIcon.displayName="VidstackFullscreenArrowIcon";const FullscreenExitIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$39$1}));FullscreenExitIcon.displayName="VidstackFullscreenExitIcon";const FullscreenIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$40$1}));FullscreenIcon.displayName="VidstackFullscreenIcon";const HeartIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$41}));HeartIcon.displayName="VidstackHeartIcon";const InfoIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$42}));InfoIcon.displayName="VidstackInfoIcon";const LanguageIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$43}));LanguageIcon.displayName="VidstackLanguageIcon";const LinkIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$44}));LinkIcon.displayName="VidstackLinkIcon";const LockClosedIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$45}));LockClosedIcon.displayName="VidstackLockClosedIcon";const LockOpenIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$46}));LockOpenIcon.displayName="VidstackLockOpenIcon";const MenuHorizontalIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$47}));MenuHorizontalIcon.displayName="VidstackMenuHorizontalIcon";const MenuVerticalIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$48}));MenuVerticalIcon.displayName="VidstackMenuVerticalIcon";const MicrophoneIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$49}));MicrophoneIcon.displayName="VidstackMicrophoneIcon";const MobileIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$50}));MobileIcon.displayName="VidstackMobileIcon";const MoonIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$51}));MoonIcon.displayName="VidstackMoonIcon";const MusicOffIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$52}));MusicOffIcon.displayName="VidstackMusicOffIcon";const MusicIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$53$1}));MusicIcon.displayName="VidstackMusicIcon";const MuteIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$54$1}));MuteIcon.displayName="VidstackMuteIcon";const NextIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$55}));NextIcon.displayName="VidstackNextIcon";const NoEyeIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$56$1}));NoEyeIcon.displayName="VidstackNoEyeIcon";const NotificationIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$57}));NotificationIcon.displayName="VidstackNotificationIcon";const OdometerIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$58}));OdometerIcon.displayName="VidstackOdometerIcon";const PauseIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$59$1}));PauseIcon.displayName="VidstackPauseIcon";const PictureInPictureExitIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$60$1}));PictureInPictureExitIcon.displayName="VidstackPictureInPictureExitIcon";const PictureInPictureIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$61$1}));PictureInPictureIcon.displayName="VidstackPictureInPictureIcon";const PlayIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$62$1}));PlayIcon.displayName="VidstackPlayIcon";const PlaybackSpeedCircleIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$63$1}));PlaybackSpeedCircleIcon.displayName="VidstackPlaybackSpeedCircleIcon";const PlaylistIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$64}));PlaylistIcon.displayName="VidstackPlaylistIcon";const PreviousIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$65}));PreviousIcon.displayName="VidstackPreviousIcon";const QuestionMarkIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$66}));QuestionMarkIcon.displayName="VidstackQuestionMarkIcon";const QueueListIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$67}));QueueListIcon.displayName="VidstackQueueListIcon";const RadioButtonSelectedIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$68}));RadioButtonSelectedIcon.displayName="VidstackRadioButtonSelectedIcon";const RadioButtonIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$69}));RadioButtonIcon.displayName="VidstackRadioButtonIcon";const RepeatOnIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$70}));RepeatOnIcon.displayName="VidstackRepeatOnIcon";const RepeatSquareOnIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$71}));RepeatSquareOnIcon.displayName="VidstackRepeatSquareOnIcon";const RepeatSquareIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$72}));RepeatSquareIcon.displayName="VidstackRepeatSquareIcon";const RepeatIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$73}));RepeatIcon.displayName="VidstackRepeatIcon";const ReplayIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$74$1}));ReplayIcon.displayName="VidstackReplayIcon";const RotateIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$75}));RotateIcon.displayName="VidstackRotateIcon";const SearchIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$76}));SearchIcon.displayName="VidstackSearchIcon";const SeekBackward10Icon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$77$1}));SeekBackward10Icon.displayName="VidstackSeekBackward10Icon";const SeekBackward15Icon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$78}));SeekBackward15Icon.displayName="VidstackSeekBackward15Icon";const SeekBackward30Icon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$79}));SeekBackward30Icon.displayName="VidstackSeekBackward30Icon";const SeekBackwardIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$80}));SeekBackwardIcon.displayName="VidstackSeekBackwardIcon";const SeekForward10Icon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$81$1}));SeekForward10Icon.displayName="VidstackSeekForward10Icon";const SeekForward15Icon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$82}));SeekForward15Icon.displayName="VidstackSeekForward15Icon";const SeekForward30Icon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$83}));SeekForward30Icon.displayName="VidstackSeekForward30Icon";const SeekForwardIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$84}));SeekForwardIcon.displayName="VidstackSeekForwardIcon";const SendIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$85}));SendIcon.displayName="VidstackSendIcon";const SettingsMenuIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$86}));SettingsMenuIcon.displayName="VidstackSettingsMenuIcon";const SettingsSwitchIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$87}));SettingsSwitchIcon.displayName="VidstackSettingsSwitchIcon";const SettingsIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$88$1}));SettingsIcon.displayName="VidstackSettingsIcon";const ShareArrowIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$89}));ShareArrowIcon.displayName="VidstackShareArrowIcon";const ShareIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$90}));ShareIcon.displayName="VidstackShareIcon";const ShuffleOnIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$91}));ShuffleOnIcon.displayName="VidstackShuffleOnIcon";const ShuffleIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$92}));ShuffleIcon.displayName="VidstackShuffleIcon";const StopIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$93}));StopIcon.displayName="VidstackStopIcon";const SubtitlesIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$94}));SubtitlesIcon.displayName="VidstackSubtitlesIcon";const SunIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$95}));SunIcon.displayName="VidstackSunIcon";const TheatreModeExitIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$96}));TheatreModeExitIcon.displayName="VidstackTheatreModeExitIcon";const TheatreModeIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$97}));TheatreModeIcon.displayName="VidstackTheatreModeIcon";const ThumbsDownIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$98}));ThumbsDownIcon.displayName="VidstackThumbsDownIcon";const ThumbsUpIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$99}));ThumbsUpIcon.displayName="VidstackThumbsUpIcon";const TimerIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$100}));TimerIcon.displayName="VidstackTimerIcon";const TranscriptIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$101}));TranscriptIcon.displayName="VidstackTranscriptIcon";const TvIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$102}));TvIcon.displayName="VidstackTvIcon";const UserIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$103}));UserIcon.displayName="VidstackUserIcon";const VolumeHighIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$104$1}));VolumeHighIcon.displayName="VidstackVolumeHighIcon";const VolumeLowIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$105$1}));VolumeLowIcon.displayName="VidstackVolumeLowIcon";const XMarkIcon=reactExports.forwardRef((e,t)=>reactExports.createElement(Icon,{...e,className:cn(e.className),ref:t,paths:Icon$106}));XMarkIcon.displayName="VidstackXMarkIcon";const IS_SERVER$1="undefined"==typeof document,SCOPE=Symbol(0);let scheduledEffects=!1,runningEffects=!1,currentScope=null,currentObserver=null,currentObservers=null,currentObserversIndex=0,effects=[],defaultContext={};const NOOP=()=>{},STATE_CLEAN=0,STATE_CHECK=1,STATE_DIRTY=2,STATE_DISPOSED=3;function flushEffects(){scheduledEffects=!0,queueMicrotask(runEffects)}function runEffects(){if(effects.length){runningEffects=!0;for(let e=0;e<effects.length;e++)effects[e].$st!==STATE_CLEAN&&runTop(effects[e]);effects=[],scheduledEffects=!1,runningEffects=!1}else scheduledEffects=!1}function runTop(e){let t=[e];for(;e=e[SCOPE];)e.$e&&e.$st!==STATE_CLEAN&&t.push(e);for(let n=t.length-1;n>=0;n--)updateCheck(t[n])}function root(e){const t=createScope();return compute(t,e.length?e.bind(null,dispose.bind(t)):e,null)}function peek(e){return compute(currentScope,e,null)}function untrack(e){return compute(null,e,null)}function tick(){runningEffects||runEffects()}function getScope(){return currentScope}function scoped(e,t){try{return compute(t,e,null)}catch(n){return void handleError(t,n)}}function getContext(e,t=currentScope){return null==t?void 0:t.$cx[e]}function setContext(e,t,n=currentScope){n&&(n.$cx={...n.$cx,[e]:t})}function onDispose(e){if(!e||!currentScope)return e||NOOP;const t=currentScope;return t.$d?Array.isArray(t.$d)?t.$d.push(e):t.$d=[t.$d,e]:t.$d=e,function(){t.$st!==STATE_DISPOSED&&(e.call(null),isFunction$1(t.$d)?t.$d=null:Array.isArray(t.$d)&&t.$d.splice(t.$d.indexOf(e),1))}}function dispose(e=!0){if(this.$st!==STATE_DISPOSED){if(this.$h)if(Array.isArray(this.$h))for(let e=this.$h.length-1;e>=0;e--)dispose.call(this.$h[e]);else dispose.call(this.$h);if(e){const e=this[SCOPE];e&&(Array.isArray(e.$h)?e.$h.splice(e.$h.indexOf(this),1):e.$h=null),disposeNode(this)}}}function disposeNode(e){e.$st=STATE_DISPOSED,e.$d&&emptyDisposal(e),e.$s&&removeSourceObservers(e,0),e[SCOPE]=null,e.$s=null,e.$o=null,e.$h=null,e.$cx=defaultContext,e.$eh=null}function emptyDisposal(e){try{if(Array.isArray(e.$d))for(let t=e.$d.length-1;t>=0;t--){const n=e.$d[t];n.call(n)}else e.$d.call(e.$d);e.$d=null}catch(t){handleError(e,t)}}function compute(e,t,n){const r=currentScope,i=currentObserver;currentScope=e,currentObserver=n;try{return t.call(e)}finally{currentScope=r,currentObserver=i}}function handleError(e,t){if(!e||!e.$eh)throw t;let n=0,r=e.$eh.length,i=t;for(n=0;n<r;n++)try{e.$eh[n](i);break}catch(s){i=s}if(n===r)throw i}function read(){return this.$st===STATE_DISPOSED||(currentObserver&&!this.$e&&(!currentObservers&&currentObserver.$s&&currentObserver.$s[currentObserversIndex]==this?currentObserversIndex++:currentObservers?currentObservers.push(this):currentObservers=[this]),this.$c&&updateCheck(this)),this.$v}function write(e){const t=isFunction$1(e)?e(this.$v):e;if(this.$ch(this.$v,t)&&(this.$v=t,this.$o))for(let n=0;n<this.$o.length;n++)notify(this.$o[n],STATE_DIRTY);return this.$v}const ScopeNode=function(){this[SCOPE]=null,this.$h=null,currentScope&&currentScope.append(this)},ScopeProto=ScopeNode.prototype;function createScope(){return new ScopeNode}ScopeProto.$cx=defaultContext,ScopeProto.$eh=null,ScopeProto.$c=null,ScopeProto.$d=null,ScopeProto.append=function(e){e[SCOPE]=this,this.$h?Array.isArray(this.$h)?this.$h.push(e):this.$h=[this.$h,e]:this.$h=e,e.$cx=e.$cx===defaultContext?this.$cx:{...this.$cx,...e.$cx},this.$eh&&(e.$eh=e.$eh?[...e.$eh,...this.$eh]:this.$eh)},ScopeProto.dispose=function(){dispose.call(this)};const ComputeNode=function(e,t,n){ScopeNode.call(this),this.$st=t?STATE_DIRTY:STATE_CLEAN,this.$i=!1,this.$e=!1,this.$s=null,this.$o=null,this.$v=e,t&&(this.$c=t),n&&n.dirty&&(this.$ch=n.dirty)},ComputeProto=ComputeNode.prototype;function createComputation(e,t,n){return new ComputeNode(e,t,n)}function isNotEqual(e,t){return e!==t}function isFunction$1(e){return"function"==typeof e}function updateCheck(e){if(e.$st===STATE_CHECK)for(let t=0;t<e.$s.length&&(updateCheck(e.$s[t]),e.$st!==STATE_DIRTY);t++);e.$st===STATE_DIRTY?update(e):e.$st=STATE_CLEAN}function cleanup(e){e.$h&&dispose.call(e,!1),e.$d&&emptyDisposal(e),e.$eh=e[SCOPE]?e[SCOPE].$eh:null}function update(e){let t=currentObservers,n=currentObserversIndex;currentObservers=null,currentObserversIndex=0;try{cleanup(e);const t=compute(e,e.$c,e);updateObservers(e),!e.$e&&e.$i?write.call(e,t):(e.$v=t,e.$i=!0)}catch(r){updateObservers(e),handleError(e,r)}finally{currentObservers=t,currentObserversIndex=n,e.$st=STATE_CLEAN}}function updateObservers(e){if(currentObservers){if(e.$s&&removeSourceObservers(e,currentObserversIndex),e.$s&&currentObserversIndex>0){e.$s.length=currentObserversIndex+currentObservers.length;for(let t=0;t<currentObservers.length;t++)e.$s[currentObserversIndex+t]=currentObservers[t]}else e.$s=currentObservers;let t;for(let n=currentObserversIndex;n<e.$s.length;n++)t=e.$s[n],t.$o?t.$o.push(e):t.$o=[e]}else e.$s&&currentObserversIndex<e.$s.length&&(removeSourceObservers(e,currentObserversIndex),e.$s.length=currentObserversIndex)}function notify(e,t){if(!(e.$st>=t)&&(e.$e&&e.$st===STATE_CLEAN&&(effects.push(e),scheduledEffects||flushEffects()),e.$st=t,e.$o))for(let n=0;n<e.$o.length;n++)notify(e.$o[n],STATE_CHECK)}function removeSourceObservers(e,t){let n,r;for(let i=t;i<e.$s.length;i++)n=e.$s[i],n.$o&&(r=n.$o.indexOf(e),n.$o[r]=n.$o[n.$o.length-1],n.$o.pop())}function signal(e,t){const n=createComputation(e,null,t),r=read.bind(n);return r[SCOPE]=!0,r.set=write.bind(n),r}function isReadSignal(e){return isFunction$1(e)&&SCOPE in e}function computed(e,t){const n=createComputation(null==t?void 0:t.initial,e,t),r=read.bind(n);return r[SCOPE]=!0,r}function effect$1(e,t){const n=createComputation(null,function(){let t=e();return isFunction$1(t)&&onDispose(t),null},void 0);return n.$e=!0,update(n),dispose.bind(n,!0)}function isWriteSignal(e){return isReadSignal(e)&&"set"in e}function noop$2(...e){}function isNull(e){return null===e}function isUndefined(e){return void 0===e}function isNil(e){return isNull(e)||isUndefined(e)}function isObject(e){return(null==e?void 0:e.constructor)===Object}function isNumber(e){return"number"==typeof e&&!Number.isNaN(e)}function isString(e){return"string"==typeof e}function isBoolean(e){return"boolean"==typeof e}function isFunction(e){return"function"==typeof e}function isArray$1(e){return Array.isArray(e)}Object.setPrototypeOf(ComputeProto,ScopeProto),ComputeProto.$ch=isNotEqual,ComputeProto.call=read;const effect=IS_SERVER$1?serverEffect:effect$1;function serverEffect(e,t){return noop$2}const EVENT=IS_SERVER$1?class{}:Event,DOM_EVENT=Symbol("DOM_EVENT");class DOMEvent extends(_d=EVENT,_c=DOM_EVENT,_d){constructor(e,...t){var n,r;super(e,t[0]),__publicField(this,_c,!0),__publicField(this,"detail"),__publicField(this,"triggers",new EventTriggers),this.detail=null==(n=t[0])?void 0:n.detail;const i=null==(r=t[0])?void 0:r.trigger;i&&this.triggers.add(i)}get trigger(){return this.triggers.source}get originEvent(){return this.triggers.origin}get isOriginTrusted(){var e;return(null==(e=this.triggers.origin)?void 0:e.isTrusted)??!1}}class EventTriggers{constructor(){__publicField(this,"chain",[])}get source(){return this.chain[0]}get origin(){return this.chain[this.chain.length-1]}add(e){this.chain.push(e),isDOMEvent(e)&&this.chain.push(...e.triggers)}remove(e){return this.chain.splice(this.chain.indexOf(e),1)[0]}has(e){return this.chain.some(t=>t===e)}hasType(e){return!!this.findType(e)}findType(e){return this.chain.find(t=>t.type===e)}walk(e){for(const t of this.chain){const n=e(t);if(n)return[t,n]}}[Symbol.iterator](){return this.chain.values()}}function isDOMEvent(e){return!!(null==e?void 0:e[DOM_EVENT])}function walkTriggerEventChain(e,t){if(isDOMEvent(e))return e.triggers.walk(t)}function findTriggerEvent(e,t){return isDOMEvent(e)?e.triggers.findType(t):void 0}function hasTriggerEvent(e,t){return!!findTriggerEvent(e,t)}function appendTriggerEvent(e,t){t&&e.triggers.add(t)}class EventsTarget extends EventTarget{constructor(){super(...arguments),__publicField(this,"$ts__events")}addEventListener(e,t,n){return super.addEventListener(e,t,n)}removeEventListener(e,t,n){return super.removeEventListener(e,t,n)}}function listenEvent(e,t,n,r){return IS_SERVER$1?noop$2:(e.addEventListener(t,n,r),onDispose(()=>e.removeEventListener(t,n,r)))}class EventsController{constructor(e){__privateAdd(this,_target),__privateAdd(this,_controller),__privateSet(this,_target,e),__privateSet(this,_controller,new AbortController),onDispose(this.abort.bind(this))}get signal(){return __privateGet(this,_controller).signal}add(e,t,n){if(this.signal.aborted)throw Error("aborted");return __privateGet(this,_target).addEventListener(e,t,{...n,signal:(null==n?void 0:n.signal)?anySignal(this.signal,n.signal):this.signal}),this}remove(e,t){return __privateGet(this,_target).removeEventListener(e,t),this}abort(e){__privateGet(this,_controller).abort(e)}}function anySignal(...e){const t=new AbortController,n={signal:t.signal};function r(e){t.abort(e.target.reason)}for(const i of e){if(i.aborted){t.abort(i.reason);break}i.addEventListener("abort",r,n)}return t.signal}function isPointerEvent(e){return!!(null==e?void 0:e.type.startsWith("pointer"))}function isTouchEvent(e){return!!(null==e?void 0:e.type.startsWith("touch"))}function isMouseEvent(e){return/^(click|mouse)/.test((null==e?void 0:e.type)??"")}function isKeyboardEvent(e){return!!(null==e?void 0:e.type.startsWith("key"))}function wasEnterKeyPressed(e){return isKeyboardEvent(e)&&"Enter"===e.key}function isKeyboardClick(e){return isKeyboardEvent(e)&&("Enter"===e.key||" "===e.key)}function isDOMNode(e){return e instanceof Node}function setAttribute(e,t,n){if(e)if(n||""===n||0===n){const r=!0===n?"":n+"";e.getAttribute(t)!==r&&e.setAttribute(t,r)}else e.removeAttribute(t)}function setStyle(e,t,n){e&&(n||0===n?e.style.setProperty(t,n+""):e.style.removeProperty(t))}function toggleClass(e,t,n){e.classList[n?"add":"remove"](t)}function unwrapDeep(e){let t=e;for(;"function"==typeof t;)t=t.call(this);return t}function createContext(e){return{id:Symbol(),provide:e}}function provideContext(e,t,n=getScope()){var r;const i=!isUndefined(t);setContext(e.id,i?t:null==(r=e.provide)?void 0:r.call(e),n)}function useContext(e){return getContext(e.id)}function hasProvidedContext(e){return!isUndefined(getContext(e.id))}_target=new WeakMap,_controller=new WeakMap;const PROPS=Symbol(0),METHODS=Symbol(0),ON_DISPATCH=Symbol(0),EMPTY_PROPS={};_e=ON_DISPATCH;class Instance{constructor(e,t,n){var r;__privateAdd(this,_Instance_instances),__publicField(this,"$ts__events"),__publicField(this,"$ts__vars"),__publicField(this,_e,null),__publicField(this,"$el",signal(null)),__publicField(this,"el",null),__publicField(this,"scope",null),__publicField(this,"attachScope",null),__publicField(this,"connectScope",null),__publicField(this,"component",null),__publicField(this,"destroyed",!1),__publicField(this,"props",EMPTY_PROPS),__publicField(this,"attrs",null),__publicField(this,"styles",null),__publicField(this,"state"),__publicField(this,"$state"),__privateAdd(this,_setupCallbacks,[]),__privateAdd(this,_attachCallbacks,[]),__privateAdd(this,_connectCallbacks,[]),__privateAdd(this,_destroyCallbacks,[]),this.scope=t,(null==n?void 0:n.scope)&&n.scope.append(t);let i=e.state,s=e.props;if(i&&(this.$state=i.create(),this.state=new Proxy(this.$state,{get:(e,t)=>this.$state[t]()}),provideContext(i,this.$state)),s&&(this.props=createInstanceProps(s),null==n?void 0:n.props))for(const a of Object.keys(n.props))null==(r=this.props[a])||r.set(n.props[a]);onDispose(this.destroy.bind(this))}setup(){scoped(()=>{for(const e of __privateGet(this,_setupCallbacks))e()},this.scope)}attach(e){this.el||(this.el=e,this.$el.set(e),scoped(()=>{this.attachScope=createScope(),scoped(()=>{for(const e of __privateGet(this,_attachCallbacks))e(this.el);__privateMethod(this,_Instance_instances,attachAttrs_fn).call(this),__privateMethod(this,_Instance_instances,attachStyles_fn).call(this)},this.attachScope)},this.scope),e.dispatchEvent(new Event("attached")))}detach(){var e;null==(e=this.attachScope)||e.dispose(),this.attachScope=null,this.connectScope=null,this.el=null,this.$el.set(null)}connect(){this.el&&this.attachScope&&__privateGet(this,_connectCallbacks).length&&scoped(()=>{this.connectScope=createScope(),scoped(()=>{for(const e of __privateGet(this,_connectCallbacks))e(this.el)},this.connectScope)},this.attachScope)}disconnect(){var e;null==(e=this.connectScope)||e.dispose(),this.connectScope=null}destroy(){if(this.destroyed)return;this.destroyed=!0,scoped(()=>{for(const e of __privateGet(this,_destroyCallbacks))e(this.el)},this.scope);const e=this.el;this.detach(),this.scope.dispose(),__privateGet(this,_setupCallbacks).length=0,__privateGet(this,_attachCallbacks).length=0,__privateGet(this,_connectCallbacks).length=0,__privateGet(this,_destroyCallbacks).length=0,this.component=null,this.attrs=null,this.styles=null,this.props=EMPTY_PROPS,this.scope=null,this.state=EMPTY_PROPS,this.$state=null,e&&delete e.$}addHooks(e){e.onSetup&&__privateGet(this,_setupCallbacks).push(e.onSetup.bind(e)),e.onAttach&&__privateGet(this,_attachCallbacks).push(e.onAttach.bind(e)),e.onConnect&&__privateGet(this,_connectCallbacks).push(e.onConnect.bind(e)),e.onDestroy&&__privateGet(this,_destroyCallbacks).push(e.onDestroy.bind(e))}}function createInstanceProps(e){const t={};for(const n of Object.keys(e)){const r=e[n];t[n]=signal(r,r)}return t}_setupCallbacks=new WeakMap,_attachCallbacks=new WeakMap,_connectCallbacks=new WeakMap,_destroyCallbacks=new WeakMap,_Instance_instances=new WeakSet,attachAttrs_fn=function(){if(this.attrs)for(const e of Object.keys(this.attrs))IS_SERVER$1?setAttribute(this.el,e,unwrapDeep.call(this.component,this.attrs[e])):isFunction(this.attrs[e])?effect(__privateMethod(this,_Instance_instances,setAttr_fn).bind(this,e)):setAttribute(this.el,e,this.attrs[e])},attachStyles_fn=function(){if(this.styles)for(const e of Object.keys(this.styles))IS_SERVER$1?setStyle(this.el,e,unwrapDeep.call(this.component,this.styles[e])):isFunction(this.styles[e])?effect(__privateMethod(this,_Instance_instances,setStyle_fn).bind(this,e)):setStyle(this.el,e,this.styles[e])},setAttr_fn=function(e){setAttribute(this.el,e,this.attrs[e].call(this.component))},setStyle_fn=function(e){setStyle(this.el,e,this.styles[e].call(this.component))};let currentInstance={$$:null};function createComponent(e,t){return root(()=>{currentInstance.$$=new Instance(e,getScope(),t);const n=new e;return currentInstance.$$.component=n,currentInstance.$$=null,n})}class ViewController extends EventTarget{constructor(){super(),__publicField(this,"$$"),currentInstance.$$&&this.attach(currentInstance)}get el(){return this.$$.el}get $el(){return this.$$.$el()}get scope(){return this.$$.scope}get attachScope(){return this.$$.attachScope}get connectScope(){return this.$$.connectScope}get $props(){return this.$$.props}get $state(){return this.$$.$state}get state(){return this.$$.state}attach({$$:e}){return this.$$=e,e.addHooks(this),this}addEventListener(e,t,n){this.listen(e,t,n)}removeEventListener(e,t,n){var r;null==(r=this.el)||r.removeEventListener(e,t,n)}setAttributes(e){this.$$.attrs||(this.$$.attrs={}),Object.assign(this.$$.attrs,e)}setStyles(e){this.$$.styles||(this.$$.styles={}),Object.assign(this.$$.styles,e)}setCSSVars(e){this.setStyles(e)}createEvent(e,...t){return new DOMEvent(e,t[0])}dispatch(e,...t){if(IS_SERVER$1||!this.el)return!1;const n=e instanceof Event?e:new DOMEvent(e,t[0]);return Object.defineProperty(n,"target",{get:()=>this.$$.component}),untrack(()=>{var e,t;return null==(t=(e=this.$$)[ON_DISPATCH])||t.call(e,n),this.el.dispatchEvent(n)})}dispatchEvent(e){return this.dispatch(e)}listen(e,t,n){return IS_SERVER$1||!this.el?noop$2:listenEvent(this.el,e,t,n)}}class Component extends ViewController{subscribe(e){return scoped(()=>effect(()=>e(this.state)),this.$$.scope)}destroy(){this.$$.destroy()}}function prop(e,t,n){e[PROPS]||(e[PROPS]=new Set),e[PROPS].add(t)}function method(e,t,n){e[METHODS]||(e[METHODS]=new Set),e[METHODS].add(t)}let State$1=(_f=class{constructor(e){__publicField(this,"id",Symbol(0)),__publicField(this,"record"),__privateAdd(this,_descriptors),this.record=e,__privateSet(this,_descriptors,Object.getOwnPropertyDescriptors(e))}create(){const e={},t=new Proxy(e,{get:(t,n)=>e[n]()});for(const n of Object.keys(this.record)){const r=__privateGet(this,_descriptors)[n].get;e[n]=r?computed(r.bind(t)):signal(this.record[n])}return e}reset(e,t){for(const n of Object.keys(e))__privateGet(this,_descriptors)[n].get||t&&!t(n)||e[n].set(this.record[n])}},_descriptors=new WeakMap,_f);function useState(e){return useContext(e)}function camelToKebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function kebabToCamelCase(e){return e.replace(/-./g,e=>e[1].toUpperCase())}function kebabToPascalCase(e){return kebabToTitleCase(e).replace(/\s/g,"")}function kebabToTitleCase(e){return uppercaseFirstChar(e.replace(/-./g,e=>" "+e[1].toUpperCase()))}function uppercaseFirstChar(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ReactScopeContext=reactExports.createContext({current:null});function WithScope(e,...t){return reactExports.createElement(ReactScopeContext.Provider,{value:e},...t)}function useReactScope(){return reactExports.useContext(ReactScopeContext).current}function useReactContext(e){const t=useReactScope();return reactExports.useMemo(()=>getContext(e.id,t),[t])}function setRef(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function composeRefs(...e){return t=>e.forEach(e=>setRef(e,t))}function createClientComponent(e,t){const n=reactExports.forwardRef((n,r)=>{var i,s,a,o,l,c,u,d;let h=reactExports.useContext(ReactScopeContext),p=reactExports.useRef(null),m=reactExports.useRef();if(!m.current){const t=createInternalState(),r=initComponent(e,t,n,h.current);t.component=r,m.current=t,p.current=r.scope}reactExports.useEffect(()=>{const e=m.current;return window.cancelAnimationFrame(e.destroyId),e.destroyId=-1,function(){isFunction(n.children)&&(window.cancelAnimationFrame(e.refChangeId),e.refChangeId=-1,window.cancelAnimationFrame(e.connectId),e.connectId=-1,window.cancelAnimationFrame(e.destroyId),e.destroyId=window.requestAnimationFrame(()=>{e.destroyId=-1,detachFromHost(e),e.component.$$.destroy(),e.component.$$[ON_DISPATCH]=null,e.callbacks={},e.domCallbacks={},p.current=null}))}},[]),reactExports.useEffect(tick);let f=m.current,{children:g,...x}=n,v={},y=f.prevProps,_=Object.keys(x);f.callbacks={};for(const E of[...y,..._])if(t.props.has(E))f.component.$props[E].set(isUndefined(x[E])?null==(i=e.props)?void 0:i[E]:x[E]);else if((null==(s=t.events)?void 0:s.has(E))||(null==(a=t.eventsRE)?void 0:a.test(E)))f.callbacks[E]=x[E];else if((null==(o=t.domEvents)?void 0:o.has(E))||(null==(l=t.domEventsRE)?void 0:l.test(E))){let e=camelToKebabCase(E.slice(2));f.domCallbacks[e]=x[E],_.includes(E)?f.el&&!(null==(d=f.listening)?void 0:d.has(e))&&(f.listening||(f.listening=new Set),f.listening.add(e),f.el.addEventListener(e,f.onDOMEvent)):(null==(c=f.el)||c.removeEventListener(e,f.onDOMEvent),null==(u=f.listening)||u.delete(e))}else v[E]=x[E];return f.prevProps=_,WithScope(p,reactExports.createElement(AttachEffect,{effect:function(){let t=m.current,i=h.current;if(window.cancelAnimationFrame(t.destroyId),t.destroyId=-1,t.component.$$.destroyed){const r=initComponent(e,t,n,i);t.component=r,t.attached=!1,t.forwardRef=!1,p.current=r.scope}return t.el&&attachToHost(t,t.el),t.forwardRef||(setRef(r,t.component),t.forwardRef=!0),()=>detachFromHost(t)}}),isFunction(g)?null==g?void 0:g({...v,suppressHydrationWarning:!0,ref:function(e){const t=m.current;t.forwardRef?(window.cancelAnimationFrame(t.refChangeId),t.refChangeId=window.requestAnimationFrame(()=>{const t=m.current;t.refChangeId=-1,t.el!==e&&(detachFromHost(t),e&&attachToHost(t,e),t.el=e)})):t.el=e}},f.component):g)});return n.displayName=e.name+"Bridge",n}function AttachEffect({effect:e}){return reactExports.useEffect(e,[]),null}ReactScopeContext.displayName="Scope";const eventTypeToCallbackName=new Map;function createInternalState(){const e={el:null,prevProps:[],callbacks:{},domCallbacks:{},refChangeId:-1,connectId:-1,destroyId:-1,attached:!1,forwardRef:!1,listening:null,onDOMEvent(t){var n,r;const i=isUndefined(t.detail)?[t]:[t.detail,t];null==(r=(n=e.domCallbacks)[t.type])||r.call(n,...i)}};return e}function attachToHost(e,t){if(e.el!==t||!e.attached){if(e.attached&&detachFromHost(e),e.domCallbacks){e.listening||(e.listening=new Set);for(const n of Object.keys(e.domCallbacks))e.listening.has(n)||(t.addEventListener(n,e.onDOMEvent),e.listening.add(n))}e.component.$$.attach(t),e.connectId=window.requestAnimationFrame(()=>{e.component.$$.connect(),e.connectId=-1}),e.attached=!0}}function detachFromHost(e){if(e.attached&&(window.cancelAnimationFrame(e.connectId),e.connectId=-1,e.component.$$.detach(),e.attached=!1,e.el&&e.listening)){for(const t of e.listening)e.el.removeEventListener(t,e.onDOMEvent);e.listening.clear()}}function onDispatch(e){var t,n;let r=eventTypeToCallbackName.get(e.type),i=isUndefined(e.detail)?[e]:[e.detail,e];r||eventTypeToCallbackName.set(e.type,r=`on${kebabToPascalCase(e.type)}`),null==(n=(t=this.callbacks)[r])||n.call(t,...i)}function initComponent(e,t,n,r){const i=createComponent(e,{props:n,scope:r});return i.$$[ON_DISPATCH]=onDispatch.bind(t),i.$$.setup(),i}function escape(e,t=!1){const n=typeof e;if("string"!==n)return t||"function"!==n?t&&"boolean"===n?e+"":e:escape(e());const r=t?'"':"<",i=t?"&quot;":"&lt;";let s=e.indexOf(r),a=e.indexOf("&");if(s<0&&a<0)return e;let o=0,l="";for(;s>=0&&a>=0;)s<a?(o<s&&(l+=e.substring(o,s)),l+=i,o=s+1,s=e.indexOf(r,o)):(o<a&&(l+=e.substring(o,a)),l+="&amp;",o=a+1,a=e.indexOf("&",o));if(s>=0)do{o<s&&(l+=e.substring(o,s)),l+=i,o=s+1,s=e.indexOf(r,o)}while(s>=0);else for(;a>=0;)o<a&&(l+=e.substring(o,a)),l+="&amp;",o=a+1,a=e.indexOf("&",o);return o<e.length?l+e.substring(o):l}const SETUP=Symbol(0),classSplitRE=/\s+/;function parseClassAttr(e,t){const n=t.trim().split(classSplitRE);for(const r of n)e.add(r)}const styleSplitRE=/\s*:\s*/,stylesDelimeterRE=/\s*;\s*/;function parseStyleAttr(e,t){const n=t.trim().split(stylesDelimeterRE);for(let r=0;r<n.length;r++){if(""===n[r])continue;const[t,i]=n[r].split(styleSplitRE);e.set(t,i)}}class MaverickServerElement{constructor(e){__publicField(this,"keepAlive",!1),__publicField(this,"forwardKeepAlive",!0),__publicField(this,"$"),__publicField(this,"attributes",new ServerAttributes),__publicField(this,"style",new ServerStyle),__publicField(this,"classList",new ServerClassList),this.$=e}get $props(){return this.$.$$.props}get $state(){return this.$.$$.$state}get state(){return this.$.state}setup(){const e=this.$.$$;scoped(()=>{this.hasAttribute("class")&&parseClassAttr(this.classList.tokens,this.getAttribute("class")),this.hasAttribute("style")&&parseStyleAttr(this.style.tokens,this.getAttribute("style")),e.setup(),e.attach(this),this.classList.length>0&&this.setAttribute("class",this.classList.toString()),this.style.length>0&&this.setAttribute("style",this.style.toString()),this.keepAlive&&this.setAttribute("keep-alive","")},e.scope)}getAttribute(e){return this.attributes.getAttribute(e)}setAttribute(e,t){this.attributes.setAttribute(e,t)}hasAttribute(e){return this.attributes.hasAttribute(e)}removeAttribute(e){return this.attributes.removeAttribute(e)}[SETUP](){}addEventListener(){}removeEventListener(){}dispatchEvent(){return!1}subscribe(){return noop$2}destroy(){this.$.destroy()}}class ServerAttributes{constructor(){__privateAdd(this,_tokens,new Map)}get length(){return __privateGet(this,_tokens).size}get tokens(){return __privateGet(this,_tokens)}getAttribute(e){return __privateGet(this,_tokens).get(e)??null}hasAttribute(e){return __privateGet(this,_tokens).has(e)}setAttribute(e,t){__privateGet(this,_tokens).set(e,t+"")}removeAttribute(e){__privateGet(this,_tokens).delete(e)}toString(){if(0===__privateGet(this,_tokens).size)return"";let e="";for(const[t,n]of __privateGet(this,_tokens))e+=` ${t}="${escape(n,!0)}"`;return e}}_tokens=new WeakMap;class ServerStyle{constructor(){__privateAdd(this,_tokens2,new Map)}get length(){return __privateGet(this,_tokens2).size}get tokens(){return __privateGet(this,_tokens2)}getPropertyValue(e){return __privateGet(this,_tokens2).get(e)??""}setProperty(e,t){__privateGet(this,_tokens2).set(e,t??"")}removeProperty(e){const t=__privateGet(this,_tokens2).get(e);return __privateGet(this,_tokens2).delete(e),t??""}toString(){if(0===__privateGet(this,_tokens2).size)return"";let e="";for(const[t,n]of __privateGet(this,_tokens2))e+=`${t}: ${n};`;return e}}_tokens2=new WeakMap;class ServerClassList{constructor(){__privateAdd(this,_tokens3,new Set)}get length(){return __privateGet(this,_tokens3).size}get tokens(){return __privateGet(this,_tokens3)}add(...e){for(const t of e)__privateGet(this,_tokens3).add(t)}contains(e){return __privateGet(this,_tokens3).has(e)}remove(e){__privateGet(this,_tokens3).delete(e)}replace(e,t){return!!__privateGet(this,_tokens3).has(e)&&(__privateGet(this,_tokens3).delete(e),__privateGet(this,_tokens3).add(t),!0)}toggle(e,t){return!0===t||!__privateGet(this,_tokens3).has(e)&&!1!==t?(__privateGet(this,_tokens3).add(e),!0):(__privateGet(this,_tokens3).delete(e),!1)}toString(){return Array.from(__privateGet(this,_tokens3)).join(" ")}}_tokens3=new WeakMap;const attrsToProps={acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",allowfullscreen:"allowFullScreen",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",class:"className",classid:"classID",classname:"className",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",controlslist:"controlsList",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",datetime:"dateTime",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",enctype:"encType",enterkeyhint:"enterKeyHint",fetchpriority:"fetchPriority",for:"htmlFor",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",marginwidth:"marginWidth",marginheight:"marginHeight",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",nomodule:"noModule",novalidate:"noValidate",playsinline:"playsInline",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap"};function createServerComponent(e,t){function n(n){let r=reactExports.useContext(ReactScopeContext),i=createComponent(e,{props:n,scope:r.current}),s=new MaverickServerElement(i),a={},{style:o={},children:l,forwardRef:c,...u}=n;if(t.props.size)for(const e of Object.keys(u))t.props.has(e)||(a[e]=u[e]);else a=u;if(s.setup(),s.hasAttribute("style")){for(const[e,t]of s.style.tokens)o[e.startsWith("--")?e:kebabToCamelCase(e)]=t;s.removeAttribute("style")}for(const[e,t]of s.attributes.tokens){const n=attrsToProps[e];n&&(n in a||(a[n]=t),s.removeAttribute(e))}return WithScope({current:i.$$.scope},isFunction(l)?null==l?void 0:l({...Object.fromEntries(s.attributes.tokens),...a,style:o},i):l,reactExports.createElement(()=>(s.destroy(),null)))}return n.displayName=e.name+"Bridge",n}function useStateContext(e){return useReactContext(e)}function useSignal(e,t){const[,n]=reactExports.useState();return reactExports.useEffect(()=>effect$1(()=>{e(),n({})}),[t??e]),e()}function ariaBool$1(e){return e?"true":"false"}function createDisposalBin(){const e=new Set;return{add(...t){for(const n of t)e.add(n)},empty(){for(const t of e)t();e.clear()}}}function keysOf(e){return Object.keys(e)}function deferredPromise(){let e,t;const n=new Promise((n,r)=>{e=n,t=r});return{promise:n,resolve:e,reject:t}}function waitTimeout(e){return new Promise(t=>setTimeout(t,e))}function animationFrameThrottle(e){if(IS_SERVER$1)return noop$2;let t,n=-1;return function(...r){t=r,n>=0||(n=window.requestAnimationFrame(()=>{e.apply(this,t),n=-1,t=void 0}))}}const requestIdleCallback=IS_SERVER$1?noop$2:"undefined"!=typeof window?"requestIdleCallback"in window?window.requestIdleCallback:e=>window.setTimeout(e,1):noop$2;function waitIdlePeriod(e,t){return IS_SERVER$1?Promise.resolve():new Promise(n=>{requestIdleCallback(t=>{null==e||e(t),n()},t)})}function useSignalRecord(e){const[,t]=reactExports.useState(),n=reactExports.useRef(null);return null==n.current&&(n.current={state:{},$update:signal({}),props:new Set}),reactExports.useEffect(()=>{let{state:r,$update:i,props:s}=n.current;return effect(()=>{for(const t of s){const n=e[t]();r[t]=isArray$1(n)?[...n]:n}i(),t({})})},[e]),reactExports.useMemo(()=>{let{state:t,$update:r,props:i}=n.current,s=!1;return i.clear(),new Proxy(t,{get(n,a){if(!i.has(a)&&a in e){i.add(a);const n=e[a]();t[a]=isArray$1(n)?[...n]:n,s||(r.set({}),s=!0,queueMicrotask(()=>s=!1))}return t[a]},set:(n,r,i)=>(r in e||(t[r]=i),!0)})},[e])}function createReactComponent(e,t){return IS_SERVER$1?createServerComponent(e,{props:new Set(Object.keys(e.props||{}))}):createClientComponent(e,{props:new Set(Object.keys(e.props||{})),events:new Set(null==t?void 0:t.events),eventsRE:null==t?void 0:t.eventsRegex,domEvents:null==t?void 0:t.domEvents,domEventsRE:null==t?void 0:t.domEventsRegex})}var key={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},webkit=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],moz=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],ms=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],document$1="undefined"!=typeof window&&void 0!==window.document?window.document:{},vendor="fullscreenEnabled"in document$1&&Object.keys(key)||webkit[0]in document$1&&webkit||moz[0]in document$1&&moz||ms[0]in document$1&&ms||[],fscreen={requestFullscreen:function(e){return e[vendor[key.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[vendor[key.requestFullscreen]]},get exitFullscreen(){return document$1[vendor[key.exitFullscreen]].bind(document$1)},get fullscreenPseudoClass(){return":"+vendor[key.fullscreen]},addEventListener:function(e,t,n){return document$1.addEventListener(vendor[key[e]],t,n)},removeEventListener:function(e,t,n){return document$1.removeEventListener(vendor[key[e]],t,n)},get fullscreenEnabled(){return Boolean(document$1[vendor[key.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return document$1[vendor[key.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return document$1[("on"+vendor[key.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return document$1[("on"+vendor[key.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return document$1[("on"+vendor[key.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return document$1[("on"+vendor[key.fullscreenerror]).toLowerCase()]=e}},functionThrottle=throttle;function throttle(e,t,n){var r=null,i=null,s=n&&n.leading,a=n&&n.trailing;null==s&&(s=!0),null==a&&(a=!s),1==s&&(a=!1);var o=function(){r&&(clearTimeout(r),r=null)},l=function(){var n=s&&!r,o=this,l=arguments;if(i=function(){return e.apply(o,l)},r||(r=setTimeout(function(){if(r=null,a)return i()},t)),n)return n=!1,i()};return l.cancel=o,l.flush=function(){var e=i;o(),e&&e()},l}var functionDebounce=debounce;function debounce(e,t,n){var r=null,i=null,s=function(){r&&(clearTimeout(r),i=null,r=null)},a=function(){if(!t)return e.apply(this,arguments);var a=this,o=arguments,l=n&&!r;return s(),i=function(){e.apply(a,o)},r=setTimeout(function(){if(r=null,!l){var e=i;return i=null,e()}},t),l?i():void 0};return a.cancel=s,a.flush=function(){var e=i;s(),e&&e()},a}const t=e=>"object"==typeof e&&null!=e&&1===e.nodeType,e=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,n=(t,n)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const r=getComputedStyle(t,null);return e(r.overflowY,n)||e(r.overflowX,n)||(e=>{const t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(t){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(t)}return!1},o=(e,t,n,r,i,s,a,o)=>s<e&&a>t||s>e&&a<t?0:s<=e&&o<=n||a>=t&&o>=n?s-e-r:a>t&&o<n||s<e&&o>n?a-t+i:0,l=e=>{const t=e.parentElement;return null==t?e.getRootNode().host||null:t},r=(e,r)=>{var i,s,a,c;if("undefined"==typeof document)return[];const{scrollMode:u,block:d,inline:h,boundary:p,skipOverflowHiddenElements:m}=r,f="function"==typeof p?p:e=>e!==p;if(!t(e))throw new TypeError("Invalid target");const g=document.scrollingElement||document.documentElement,x=[];let v=e;for(;t(v)&&f(v);){if(v=l(v),v===g){x.push(v);break}null!=v&&v===document.body&&n(v)&&!n(document.documentElement)||null!=v&&n(v,m)&&x.push(v)}const y=null!=(s=null==(i=window.visualViewport)?void 0:i.width)?s:innerWidth,_=null!=(c=null==(a=window.visualViewport)?void 0:a.height)?c:innerHeight,{scrollX:E,scrollY:b}=window,{height:C,width:S,top:T,right:R,bottom:j,left:w}=e.getBoundingClientRect(),{top:A,right:I,bottom:k,left:M}=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);let P="start"===d||"nearest"===d?T-A:"end"===d?j+k:T+C/2-A+k,L="center"===h?w+S/2-M+I:"end"===h?R+I:w-M;const D=[];for(let t=0;t<x.length;t++){const e=x[t],{height:r,width:i,top:s,right:a,bottom:l,left:c}=e.getBoundingClientRect();if("if-needed"===u&&T>=0&&w>=0&&j<=_&&R<=y&&(e===g&&!n(e)||T>=s&&j<=l&&w>=c&&R<=a))return D;const p=getComputedStyle(e),m=parseInt(p.borderLeftWidth,10),f=parseInt(p.borderTopWidth,10),v=parseInt(p.borderRightWidth,10),A=parseInt(p.borderBottomWidth,10);let I=0,k=0;const M="offsetWidth"in e?e.offsetWidth-e.clientWidth-m-v:0,O="offsetHeight"in e?e.offsetHeight-e.clientHeight-f-A:0,$="offsetWidth"in e?0===e.offsetWidth?0:i/e.offsetWidth:0,N="offsetHeight"in e?0===e.offsetHeight?0:r/e.offsetHeight:0;if(g===e)I="start"===d?P:"end"===d?P-_:"nearest"===d?o(b,b+_,_,f,A,b+P,b+P+C,C):P-_/2,k="start"===h?L:"center"===h?L-y/2:"end"===h?L-y:o(E,E+y,y,m,v,E+L,E+L+S,S),I=Math.max(0,I+b),k=Math.max(0,k+E);else{I="start"===d?P-s-f:"end"===d?P-l+A+O:"nearest"===d?o(s,l,r,f,A+O,P,P+C,C):P-(s+r/2)+O/2,k="start"===h?L-c-m:"center"===h?L-(c+i/2)+M/2:"end"===h?L-a+v+M:o(c,a,i,m,v+M,L,L+S,S);const{scrollLeft:t,scrollTop:n}=e;I=0===N?0:Math.max(0,Math.min(n+I/N,e.scrollHeight-r/N+O)),k=0===$?0:Math.max(0,Math.min(t+k/$,e.scrollWidth-i/$+M)),P+=n-I,L+=t-k}D.push({el:e,top:I,left:k})}return D};var Icon$0='<path fill-rule="evenodd" clip-rule="evenodd" d="M15.0007 28.7923C15.0007 29.0152 14.9774 29.096 14.9339 29.1775C14.8903 29.259 14.8263 29.323 14.7449 29.3665C14.6634 29.4101 14.5826 29.4333 14.3597 29.4333H12.575C12.3521 29.4333 12.2713 29.4101 12.1898 29.3665C12.1083 29.323 12.0443 29.259 12.0008 29.1775C11.9572 29.096 11.934 29.0152 11.934 28.7923V12.2993L5.97496 12.3C5.75208 12.3 5.67125 12.2768 5.58977 12.2332C5.50829 12.1896 5.44434 12.1257 5.40077 12.0442C5.35719 11.9627 5.33398 11.8819 5.33398 11.659V9.87429C5.33398 9.65141 5.35719 9.57059 5.40077 9.48911C5.44434 9.40762 5.50829 9.34368 5.58977 9.3001C5.67125 9.25652 5.75208 9.23332 5.97496 9.23332H26.0263C26.2492 9.23332 26.33 9.25652 26.4115 9.3001C26.493 9.34368 26.557 9.40762 26.6005 9.48911C26.6441 9.57059 26.6673 9.65141 26.6673 9.87429V11.659C26.6673 11.8819 26.6441 11.9627 26.6005 12.0442C26.557 12.1257 26.493 12.1896 26.4115 12.2332C26.33 12.2768 26.2492 12.3 26.0263 12.3L20.067 12.2993L20.0673 28.7923C20.0673 29.0152 20.0441 29.096 20.0005 29.1775C19.957 29.259 19.893 29.323 19.8115 29.3665C19.73 29.4101 19.6492 29.4333 19.4263 29.4333H17.6416C17.4187 29.4333 17.3379 29.4101 17.2564 29.3665C17.175 29.323 17.111 29.259 17.0674 29.1775C17.0239 29.096 17.0007 29.0152 17.0007 28.7923L17 22.7663H15L15.0007 28.7923Z" fill="currentColor"/> <path d="M16.0007 7.89998C17.4734 7.89998 18.6673 6.70608 18.6673 5.23332C18.6673 3.76056 17.4734 2.56665 16.0007 2.56665C14.5279 2.56665 13.334 3.76056 13.334 5.23332C13.334 6.70608 14.5279 7.89998 16.0007 7.89998Z" fill="currentColor"/>',Icon$5='<path d="M5.33334 6.00001C5.33334 5.63182 5.63181 5.33334 6 5.33334H26C26.3682 5.33334 26.6667 5.63182 26.6667 6.00001V20.6667C26.6667 21.0349 26.3682 21.3333 26 21.3333H23.7072C23.4956 21.3333 23.2966 21.233 23.171 21.0628L22.1859 19.7295C21.8607 19.2894 22.1749 18.6667 22.7221 18.6667H23.3333C23.7015 18.6667 24 18.3682 24 18V8.66668C24 8.29849 23.7015 8.00001 23.3333 8.00001H8.66667C8.29848 8.00001 8 8.29849 8 8.66668V18C8 18.3682 8.29848 18.6667 8.66667 18.6667H9.29357C9.84072 18.6667 10.1549 19.2894 9.82976 19.7295L8.84467 21.0628C8.71898 21.233 8.52 21.3333 8.30848 21.3333H6C5.63181 21.3333 5.33334 21.0349 5.33334 20.6667V6.00001Z" fill="currentColor"/> <path d="M8.78528 25.6038C8.46013 26.0439 8.77431 26.6667 9.32147 26.6667L22.6785 26.6667C23.2256 26.6667 23.5398 26.0439 23.2146 25.6038L16.5358 16.5653C16.2693 16.2046 15.73 16.2047 15.4635 16.5653L8.78528 25.6038Z" fill="currentColor"/>',Icon$8='<path d="M17.4853 18.9093C17.4853 19.0281 17.6289 19.0875 17.7129 19.0035L22.4185 14.2979C22.6788 14.0376 23.1009 14.0376 23.3613 14.2979L24.7755 15.7122C25.0359 15.9725 25.0359 16.3946 24.7755 16.655L16.2902 25.1403C16.0299 25.4006 15.6078 25.4006 15.3474 25.1403L13.9332 23.726L13.9319 23.7247L6.86189 16.6547C6.60154 16.3944 6.60154 15.9723 6.86189 15.7119L8.2761 14.2977C8.53645 14.0373 8.95856 14.0373 9.21891 14.2977L13.9243 19.0031C14.0083 19.0871 14.1519 19.0276 14.1519 18.9088L14.1519 6.00004C14.1519 5.63185 14.4504 5.33337 14.8186 5.33337L16.8186 5.33337C17.1868 5.33337 17.4853 5.63185 17.4853 6.00004L17.4853 18.9093Z" fill="currentColor"/>',Icon$11='<path d="M13.0908 14.3334C12.972 14.3334 12.9125 14.1898 12.9965 14.1058L17.7021 9.40022C17.9625 9.13987 17.9625 8.71776 17.7021 8.45741L16.2879 7.04319C16.0275 6.78284 15.6054 6.78284 15.3451 7.04319L6.8598 15.5285C6.59945 15.7888 6.59945 16.2109 6.8598 16.4713L8.27401 17.8855L8.27536 17.8868L15.3453 24.9568C15.6057 25.2172 16.0278 25.2172 16.2881 24.9568L17.7024 23.5426C17.9627 23.2822 17.9627 22.8601 17.7024 22.5998L12.9969 17.8944C12.9129 17.8104 12.9724 17.6668 13.0912 17.6668L26 17.6668C26.3682 17.6668 26.6667 17.3683 26.6667 17.0001V15.0001C26.6667 14.6319 26.3682 14.3334 26 14.3334L13.0908 14.3334Z" fill="currentColor"/>',Icon$13='<path d="M14.1521 13.0929C14.1521 12.9741 14.0085 12.9147 13.9245 12.9987L9.21891 17.7043C8.95856 17.9646 8.53645 17.9646 8.2761 17.7043L6.86189 16.29C6.60154 16.0297 6.60154 15.6076 6.86189 15.3472L15.3472 6.86195C15.6075 6.6016 16.0296 6.6016 16.29 6.86195L17.7042 8.27616L17.7055 8.27751L24.7755 15.3475C25.0359 15.6078 25.0359 16.0299 24.7755 16.2903L23.3613 17.7045C23.1009 17.9649 22.6788 17.9649 22.4185 17.7045L17.7131 12.9991C17.6291 12.9151 17.4855 12.9746 17.4855 13.0934V26.0022C17.4855 26.3704 17.187 26.6688 16.8188 26.6688H14.8188C14.4506 26.6688 14.1521 26.3704 14.1521 26.0022L14.1521 13.0929Z" fill="currentColor"/>',Icon$16='<path d="M16.6927 25.3346C16.3245 25.3346 16.026 25.0361 16.026 24.6679L16.026 7.3346C16.026 6.96641 16.3245 6.66794 16.6927 6.66794L18.6927 6.66794C19.0609 6.66794 19.3594 6.96642 19.3594 7.3346L19.3594 24.6679C19.3594 25.0361 19.0609 25.3346 18.6927 25.3346H16.6927Z" fill="currentColor"/> <path d="M24.026 25.3346C23.6578 25.3346 23.3594 25.0361 23.3594 24.6679L23.3594 7.3346C23.3594 6.96641 23.6578 6.66794 24.026 6.66794L26.026 6.66794C26.3942 6.66794 26.6927 6.96642 26.6927 7.3346V24.6679C26.6927 25.0361 26.3942 25.3346 26.026 25.3346H24.026Z" fill="currentColor"/> <path d="M5.48113 23.9407C5.38584 24.2963 5.59689 24.6619 5.95254 24.7572L7.88439 25.2748C8.24003 25.3701 8.60559 25.159 8.70089 24.8034L13.1871 8.06067C13.2824 7.70503 13.0713 7.33947 12.7157 7.24417L10.7838 6.72654C10.4282 6.63124 10.0626 6.8423 9.96733 7.19794L5.48113 23.9407Z" fill="currentColor"/>',Icon$19='<path fill-rule="evenodd" clip-rule="evenodd" d="M24.9266 7.57992C25.015 7.60672 25.0886 7.64746 25.2462 7.80506L26.956 9.51488C27.1136 9.67248 27.1543 9.74604 27.1811 9.83447C27.2079 9.9229 27.2079 10.0133 27.1811 10.1018C27.1543 10.1902 27.1136 10.2638 26.956 10.4214L13.1822 24.1951C13.0246 24.3527 12.951 24.3935 12.8626 24.4203C12.797 24.4402 12.7304 24.4453 12.6642 24.4357L12.7319 24.4203C12.6435 24.4471 12.553 24.4471 12.4646 24.4203C12.3762 24.3935 12.3026 24.3527 12.145 24.1951L5.04407 17.0942C4.88647 16.9366 4.84573 16.863 4.81893 16.7746C4.79213 16.6862 4.79213 16.5957 4.81893 16.5073C4.84573 16.4189 4.88647 16.3453 5.04407 16.1877L6.7539 14.4779C6.9115 14.3203 6.98506 14.2796 7.07349 14.2528C7.16191 14.226 7.25235 14.226 7.34078 14.2528C7.42921 14.2796 7.50277 14.3203 7.66037 14.4779L12.6628 19.4808L24.3397 7.80506C24.4973 7.64746 24.5709 7.60672 24.6593 7.57992C24.7477 7.55311 24.8382 7.55311 24.9266 7.57992Z" fill="currentColor"/>',Icon$22='<path d="M17.947 16.095C17.999 16.043 17.999 15.9585 17.947 15.9065L11.6295 9.58899C11.3691 9.32864 11.3691 8.90653 11.6295 8.64618L13.2323 7.04341C13.4926 6.78306 13.9147 6.78306 14.1751 7.04341L21.0289 13.8973C21.0392 13.9064 21.0493 13.9158 21.0591 13.9257L22.6619 15.5285C22.9223 15.7888 22.9223 16.2109 22.6619 16.4713L14.1766 24.9565C13.9163 25.2169 13.4942 25.2169 13.2338 24.9565L11.631 23.3538C11.3707 23.0934 11.3707 22.6713 11.631 22.411L17.947 16.095Z" fill="currentColor"/>',Icon$24='<path fill-rule="evenodd" clip-rule="evenodd" d="M6 7C5.63181 7 5.33333 7.29848 5.33333 7.66667V14.8667C5.33333 14.9403 5.39361 14.9999 5.46724 15.0009C10.8844 15.0719 15.2614 19.449 15.3325 24.8661C15.3334 24.9397 15.393 25 15.4667 25H26C26.3682 25 26.6667 24.7015 26.6667 24.3333V7.66667C26.6667 7.29848 26.3682 7 26 7H6ZM17.0119 22.2294C17.0263 22.29 17.0802 22.3333 17.1425 22.3333H23.3333C23.7015 22.3333 24 22.0349 24 21.6667V10.3333C24 9.96514 23.7015 9.66667 23.3333 9.66667H8.66667C8.29848 9.66667 8 9.96514 8 10.3333V13.1909C8 13.2531 8.04332 13.3071 8.10392 13.3214C12.5063 14.3618 15.9715 17.827 17.0119 22.2294Z" fill="currentColor"/> <path d="M13.2 25C13.2736 25 13.3334 24.9398 13.3322 24.8661C13.2615 20.5544 9.77889 17.0718 5.46718 17.0011C5.39356 16.9999 5.33333 17.0597 5.33333 17.1333V18.8667C5.33333 18.9403 5.39348 18.9999 5.4671 19.0015C8.67465 19.0716 11.2617 21.6587 11.3319 24.8662C11.3335 24.9399 11.393 25 11.4667 25H13.2Z" fill="currentColor"/> <path d="M5.33333 21.1333C5.33333 21.0597 5.39332 20.9998 5.46692 21.0022C7.57033 21.0712 9.26217 22.763 9.33114 24.8664C9.33356 24.94 9.27364 25 9.2 25H6C5.63181 25 5.33333 24.7015 5.33333 24.3333V21.1333Z" fill="currentColor"/>',chromecast=Object.freeze({__proto__:null,default:Icon$24}),Icon$26='<path d="M8 28.0003C8 27.6321 8.29848 27.3336 8.66667 27.3336H23.3333C23.7015 27.3336 24 27.6321 24 28.0003V29.3336C24 29.7018 23.7015 30.0003 23.3333 30.0003H8.66667C8.29848 30.0003 8 29.7018 8 29.3336V28.0003Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M4.66602 6.66699C4.29783 6.66699 3.99935 6.96547 3.99935 7.33366V24.667C3.99935 25.0352 4.29783 25.3337 4.66602 25.3337H27.3327C27.7009 25.3337 27.9994 25.0352 27.9994 24.667V7.33366C27.9994 6.96547 27.7009 6.66699 27.3327 6.66699H4.66602ZM8.66659 21.3333C8.2984 21.3333 7.99992 21.0349 7.99992 20.6667V11.3333C7.99992 10.9651 8.2984 10.6667 8.66659 10.6667H13.9999C14.3681 10.6667 14.6666 10.9651 14.6666 11.3333V12.6667C14.6666 13.0349 14.3681 13.3333 13.9999 13.3333H10.7999C10.7263 13.3333 10.6666 13.393 10.6666 13.4667V18.5333C10.6666 18.607 10.7263 18.6667 10.7999 18.6667H13.9999C14.3681 18.6667 14.6666 18.9651 14.6666 19.3333V20.6667C14.6666 21.0349 14.3681 21.3333 13.9999 21.3333H8.66659ZM17.9999 21.3333C17.6317 21.3333 17.3333 21.0349 17.3333 20.6667V11.3333C17.3333 10.9651 17.6317 10.6667 17.9999 10.6667H23.3333C23.7014 10.6667 23.9999 10.9651 23.9999 11.3333V12.6667C23.9999 13.0349 23.7014 13.3333 23.3333 13.3333H20.1333C20.0596 13.3333 19.9999 13.393 19.9999 13.4667V18.5333C19.9999 18.607 20.0596 18.6667 20.1333 18.6667H23.3333C23.7014 18.6667 23.9999 18.9651 23.9999 19.3333V20.6667C23.9999 21.0349 23.7014 21.3333 23.3333 21.3333H17.9999Z" fill="currentColor"/>',Icon$27='<path fill-rule="evenodd" clip-rule="evenodd" d="M4.6661 6.66699C4.29791 6.66699 3.99943 6.96547 3.99943 7.33366V24.667C3.99943 25.0352 4.29791 25.3337 4.6661 25.3337H27.3328C27.701 25.3337 27.9994 25.0352 27.9994 24.667V7.33366C27.9994 6.96547 27.701 6.66699 27.3328 6.66699H4.6661ZM8.66667 21.3333C8.29848 21.3333 8 21.0349 8 20.6667V11.3333C8 10.9651 8.29848 10.6667 8.66667 10.6667H14C14.3682 10.6667 14.6667 10.9651 14.6667 11.3333V12.6667C14.6667 13.0349 14.3682 13.3333 14 13.3333H10.8C10.7264 13.3333 10.6667 13.393 10.6667 13.4667V18.5333C10.6667 18.607 10.7264 18.6667 10.8 18.6667H14C14.3682 18.6667 14.6667 18.9651 14.6667 19.3333V20.6667C14.6667 21.0349 14.3682 21.3333 14 21.3333H8.66667ZM18 21.3333C17.6318 21.3333 17.3333 21.0349 17.3333 20.6667V11.3333C17.3333 10.9651 17.6318 10.6667 18 10.6667H23.3333C23.7015 10.6667 24 10.9651 24 11.3333V12.6667C24 13.0349 23.7015 13.3333 23.3333 13.3333H20.1333C20.0597 13.3333 20 13.393 20 13.4667V18.5333C20 18.607 20.0597 18.6667 20.1333 18.6667H23.3333C23.7015 18.6667 24 18.9651 24 19.3333V20.6667C24 21.0349 23.7015 21.3333 23.3333 21.3333H18Z" fill="currentColor"/>',Icon$31='<path d="M14.2225 13.7867C14.3065 13.8706 14.4501 13.8112 14.4501 13.6924V5.99955C14.4501 5.63136 14.7486 5.33289 15.1167 5.33289H16.8501C17.2183 5.33289 17.5167 5.63136 17.5167 5.99955V13.6916C17.5167 13.8104 17.6604 13.8699 17.7444 13.7859L19.9433 11.5869C20.2037 11.3266 20.6258 11.3266 20.8861 11.5869L22.1118 12.8126C22.3722 13.0729 22.3722 13.4951 22.1118 13.7554L16.4549 19.4123C16.1946 19.6726 15.772 19.6731 15.5116 19.4128L9.85479 13.7559C9.59444 13.4956 9.59444 13.0734 9.85479 12.8131L11.0804 11.5874C11.3408 11.3271 11.7629 11.3271 12.0233 11.5874L14.2225 13.7867Z" fill="currentColor"/> <path d="M5.99998 20.267C5.63179 20.267 5.33331 20.5654 5.33331 20.9336V25.9997C5.33331 26.3678 5.63179 26.6663 5.99998 26.6663H26C26.3682 26.6663 26.6666 26.3678 26.6666 25.9997V20.9336C26.6666 20.5654 26.3682 20.267 26 20.267H24.2666C23.8985 20.267 23.6 20.5654 23.6 20.9336V22.9333C23.6 23.3014 23.3015 23.5999 22.9333 23.5999H9.06638C8.69819 23.5999 8.39972 23.3014 8.39972 22.9333V20.9336C8.39972 20.5654 8.10124 20.267 7.73305 20.267H5.99998Z" fill="currentColor"/>',Icon$33='<path d="M16 20C18.2091 20 20 18.2092 20 16C20 13.7909 18.2091 12 16 12C13.7909 12 12 13.7909 12 16C12 18.2092 13.7909 20 16 20Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M28 16.0058C28 18.671 23.5 25.3334 16 25.3334C8.5 25.3334 4 18.6762 4 16.0058C4 13.3354 8.50447 6.66669 16 6.66669C23.4955 6.66669 28 13.3406 28 16.0058ZM25.3318 15.9934C25.3328 16.0017 25.3328 16.0099 25.3318 16.0182C25.3274 16.0571 25.3108 16.1728 25.2485 16.3708C25.1691 16.6229 25.0352 16.9462 24.8327 17.3216C24.4264 18.0749 23.7969 18.9398 22.9567 19.754C21.2791 21.3798 18.9148 22.6667 16 22.6667C13.0845 22.6667 10.7202 21.3805 9.04298 19.7557C8.20295 18.9419 7.57362 18.0773 7.16745 17.3241C6.96499 16.9486 6.83114 16.6252 6.75172 16.3729C6.67942 16.1431 6.66856 16.0243 6.66695 16.0066L6.66695 16.005C6.66859 15.9871 6.67951 15.8682 6.75188 15.6383C6.83145 15.3854 6.96554 15.0614 7.16831 14.6853C7.57507 13.9306 8.20514 13.0644 9.04577 12.249C10.7245 10.6208 13.0886 9.33335 16 9.33335C18.9108 9.33335 21.2748 10.6215 22.9539 12.2507C23.7947 13.0664 24.4249 13.933 24.8318 14.6877C25.0346 15.0639 25.1688 15.3878 25.2483 15.6404C25.3107 15.8386 25.3274 15.9545 25.3318 15.9934Z" fill="currentColor"/>',Icon$34='<path d="M15.8747 8.11857C16.3148 7.79342 16.9375 8.10759 16.9375 8.65476V14.2575C16.9375 14.3669 17.0621 14.4297 17.1501 14.3647L25.6038 8.11857C26.0439 7.79342 26.6667 8.10759 26.6667 8.65476V23.3451C26.6667 23.8923 26.0439 24.2064 25.6038 23.8813L17.1501 17.6346C17.0621 17.5695 16.9375 17.6324 16.9375 17.7418L16.9375 23.3451C16.9375 23.8923 16.3147 24.2064 15.8747 23.8813L5.93387 16.5358C5.57322 16.2693 5.57323 15.7299 5.93389 15.4634L15.8747 8.11857Z" fill="currentColor"/>',Icon$35='<path d="M16.1253 8.11866C15.6852 7.7935 15.0625 8.10768 15.0625 8.65484V14.2576C15.0625 14.367 14.9379 14.4298 14.8499 14.3648L6.39615 8.11866C5.95607 7.7935 5.33331 8.10768 5.33331 8.65484V23.3452C5.33331 23.8923 5.9561 24.2065 6.39617 23.8813L14.8499 17.6347C14.9379 17.5696 15.0625 17.6325 15.0625 17.7419L15.0625 23.3452C15.0625 23.8923 15.6853 24.2065 16.1253 23.8813L26.0661 16.5358C26.4268 16.2694 26.4268 15.73 26.0661 15.4635L16.1253 8.11866Z" fill="currentColor"/>',Icon$39='<path d="M19.3334 13.3333C18.9652 13.3333 18.6667 13.0349 18.6667 12.6667L18.6667 7.33333C18.6667 6.96514 18.9652 6.66666 19.3334 6.66666H21.3334C21.7015 6.66666 22 6.96514 22 7.33333V9.86666C22 9.9403 22.0597 10 22.1334 10L24.6667 10C25.0349 10 25.3334 10.2985 25.3334 10.6667V12.6667C25.3334 13.0349 25.0349 13.3333 24.6667 13.3333L19.3334 13.3333Z" fill="currentColor"/> <path d="M13.3334 19.3333C13.3334 18.9651 13.0349 18.6667 12.6667 18.6667H7.33335C6.96516 18.6667 6.66669 18.9651 6.66669 19.3333V21.3333C6.66669 21.7015 6.96516 22 7.33335 22H9.86669C9.94032 22 10 22.0597 10 22.1333L10 24.6667C10 25.0349 10.2985 25.3333 10.6667 25.3333H12.6667C13.0349 25.3333 13.3334 25.0349 13.3334 24.6667L13.3334 19.3333Z" fill="currentColor"/> <path d="M18.6667 24.6667C18.6667 25.0349 18.9652 25.3333 19.3334 25.3333H21.3334C21.7015 25.3333 22 25.0349 22 24.6667V22.1333C22 22.0597 22.0597 22 22.1334 22H24.6667C25.0349 22 25.3334 21.7015 25.3334 21.3333V19.3333C25.3334 18.9651 25.0349 18.6667 24.6667 18.6667L19.3334 18.6667C18.9652 18.6667 18.6667 18.9651 18.6667 19.3333L18.6667 24.6667Z" fill="currentColor"/> <path d="M10.6667 13.3333H12.6667C13.0349 13.3333 13.3334 13.0349 13.3334 12.6667L13.3334 10.6667V7.33333C13.3334 6.96514 13.0349 6.66666 12.6667 6.66666H10.6667C10.2985 6.66666 10 6.96514 10 7.33333L10 9.86666C10 9.9403 9.94033 10 9.86669 10L7.33335 10C6.96516 10 6.66669 10.2985 6.66669 10.6667V12.6667C6.66669 13.0349 6.96516 13.3333 7.33335 13.3333L10.6667 13.3333Z" fill="currentColor"/>',Icon$40='<path d="M25.3299 7.26517C25.2958 6.929 25.0119 6.66666 24.6667 6.66666H19.3334C18.9652 6.66666 18.6667 6.96514 18.6667 7.33333V9.33333C18.6667 9.70152 18.9652 10 19.3334 10L21.8667 10C21.9403 10 22 10.0597 22 10.1333V12.6667C22 13.0349 22.2985 13.3333 22.6667 13.3333H24.6667C25.0349 13.3333 25.3334 13.0349 25.3334 12.6667V7.33333C25.3334 7.31032 25.3322 7.28758 25.3299 7.26517Z" fill="currentColor"/> <path d="M22 21.8667C22 21.9403 21.9403 22 21.8667 22L19.3334 22C18.9652 22 18.6667 22.2985 18.6667 22.6667V24.6667C18.6667 25.0349 18.9652 25.3333 19.3334 25.3333L24.6667 25.3333C25.0349 25.3333 25.3334 25.0349 25.3334 24.6667V19.3333C25.3334 18.9651 25.0349 18.6667 24.6667 18.6667H22.6667C22.2985 18.6667 22 18.9651 22 19.3333V21.8667Z" fill="currentColor"/> <path d="M12.6667 22H10.1334C10.0597 22 10 21.9403 10 21.8667V19.3333C10 18.9651 9.70154 18.6667 9.33335 18.6667H7.33335C6.96516 18.6667 6.66669 18.9651 6.66669 19.3333V24.6667C6.66669 25.0349 6.96516 25.3333 7.33335 25.3333H12.6667C13.0349 25.3333 13.3334 25.0349 13.3334 24.6667V22.6667C13.3334 22.2985 13.0349 22 12.6667 22Z" fill="currentColor"/> <path d="M10 12.6667V10.1333C10 10.0597 10.0597 10 10.1334 10L12.6667 10C13.0349 10 13.3334 9.70152 13.3334 9.33333V7.33333C13.3334 6.96514 13.0349 6.66666 12.6667 6.66666H7.33335C6.96516 6.66666 6.66669 6.96514 6.66669 7.33333V12.6667C6.66669 13.0349 6.96516 13.3333 7.33335 13.3333H9.33335C9.70154 13.3333 10 13.0349 10 12.6667Z" fill="currentColor"/>',Icon$53='<path fill-rule="evenodd" clip-rule="evenodd" d="M26.6667 5.99998C26.6667 5.63179 26.3682 5.33331 26 5.33331H11.3333C10.9651 5.33331 10.6667 5.63179 10.6667 5.99998V17.5714C10.6667 17.6694 10.5644 17.7342 10.4741 17.6962C9.91823 17.4625 9.30754 17.3333 8.66667 17.3333C6.08934 17.3333 4 19.4226 4 22C4 24.5773 6.08934 26.6666 8.66667 26.6666C11.244 26.6666 13.3333 24.5773 13.3333 22V8.66665C13.3333 8.29846 13.6318 7.99998 14 7.99998L23.3333 7.99998C23.7015 7.99998 24 8.29846 24 8.66665V14.9048C24 15.0027 23.8978 15.0675 23.8075 15.0296C23.2516 14.7958 22.6409 14.6666 22 14.6666C19.4227 14.6666 17.3333 16.756 17.3333 19.3333C17.3333 21.9106 19.4227 24 22 24C24.5773 24 26.6667 21.9106 26.6667 19.3333V5.99998ZM22 21.3333C23.1046 21.3333 24 20.4379 24 19.3333C24 18.2287 23.1046 17.3333 22 17.3333C20.8954 17.3333 20 18.2287 20 19.3333C20 20.4379 20.8954 21.3333 22 21.3333ZM8.66667 24C9.77124 24 10.6667 23.1045 10.6667 22C10.6667 20.8954 9.77124 20 8.66667 20C7.5621 20 6.66667 20.8954 6.66667 22C6.66667 23.1045 7.5621 24 8.66667 24Z" fill="currentColor"/>',Icon$54='<path d="M17.5091 24.6594C17.5091 25.2066 16.8864 25.5208 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9991 9.36923 19.9991H4.66667C4.29848 19.9991 4 19.7006 4 19.3325V12.6658C4 12.2976 4.29848 11.9991 4.66667 11.9991H9.37115C9.39967 11.9991 9.42745 11.99 9.45039 11.973L16.4463 6.8036C16.8863 6.47842 17.5091 6.79259 17.5091 7.33977L17.5091 24.6594Z" fill="currentColor"/> <path d="M28.8621 13.6422C29.1225 13.3818 29.1225 12.9597 28.8621 12.6994L27.9193 11.7566C27.659 11.4962 27.2368 11.4962 26.9765 11.7566L24.7134 14.0197C24.6613 14.0717 24.5769 14.0717 24.5248 14.0197L22.262 11.7568C22.0016 11.4964 21.5795 11.4964 21.3191 11.7568L20.3763 12.6996C20.116 12.9599 20.116 13.382 20.3763 13.6424L22.6392 15.9053C22.6913 15.9573 22.6913 16.0418 22.6392 16.0938L20.3768 18.3562C20.1165 18.6166 20.1165 19.0387 20.3768 19.299L21.3196 20.2419C21.58 20.5022 22.0021 20.5022 22.2624 20.2418L24.5248 17.9795C24.5769 17.9274 24.6613 17.9274 24.7134 17.9795L26.976 20.2421C27.2363 20.5024 27.6585 20.5024 27.9188 20.2421L28.8616 19.2992C29.122 19.0389 29.122 18.6168 28.8616 18.3564L26.599 16.0938C26.547 16.0418 26.547 15.9573 26.599 15.9053L28.8621 13.6422Z" fill="currentColor"/>',Icon$56='<path d="M26.6009 16.0725C26.6009 16.424 26.4302 17.1125 25.9409 18.0213C25.4676 18.8976 24.7542 19.8715 23.8182 20.7783C21.9489 22.5905 19.2662 24.0667 15.9342 24.0667C12.6009 24.0667 9.91958 22.5915 8.04891 20.78C7.11424 19.8736 6.40091 18.9 5.92758 18.0236C5.43824 17.1149 5.26758 16.4257 5.26758 16.0725C5.26758 15.7193 5.43824 15.0293 5.92891 14.1193C6.40224 13.2416 7.11558 12.2665 8.05158 11.3587C9.92224 9.54398 12.6049 8.06665 15.9342 8.06665C19.2636 8.06665 21.9449 9.54505 23.8169 11.3604C24.7529 12.2687 25.4662 13.2441 25.9396 14.1216C26.4302 15.0317 26.6009 15.7209 26.6009 16.0725Z" stroke="currentColor" stroke-width="3"/> <path d="M15.9336 20.0667C18.1427 20.0667 19.9336 18.2758 19.9336 16.0667C19.9336 13.8575 18.1427 12.0667 15.9336 12.0667C13.7245 12.0667 11.9336 13.8575 11.9336 16.0667C11.9336 18.2758 13.7245 20.0667 15.9336 20.0667Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M27.2323 25.0624L6.93878 4.76886C6.78118 4.61126 6.70762 4.57052 6.61919 4.54372C6.53077 4.51692 6.44033 4.51691 6.3519 4.54372C6.26347 4.57052 6.18991 4.61126 6.03231 4.76886L4.77032 6.03085C4.61272 6.18845 4.57198 6.26201 4.54518 6.35044C4.51838 6.43887 4.51838 6.5293 4.54518 6.61773C4.57198 6.70616 4.61272 6.77972 4.77032 6.93732L25.0639 27.2308C25.2215 27.3884 25.295 27.4292 25.3834 27.456C25.4719 27.4828 25.5623 27.4828 25.6507 27.456C25.7392 27.4292 25.8127 27.3885 25.9703 27.2309L27.2323 25.9689C27.3899 25.8113 27.4307 25.7377 27.4575 25.6493C27.4843 25.5608 27.4843 25.4704 27.4575 25.382C27.4307 25.2935 27.3899 25.22 27.2323 25.0624Z" fill="currentColor"/>',Icon$59='<path d="M8.66667 6.66667C8.29848 6.66667 8 6.96514 8 7.33333V24.6667C8 25.0349 8.29848 25.3333 8.66667 25.3333H12.6667C13.0349 25.3333 13.3333 25.0349 13.3333 24.6667V7.33333C13.3333 6.96514 13.0349 6.66667 12.6667 6.66667H8.66667Z" fill="currentColor"/> <path d="M19.3333 6.66667C18.9651 6.66667 18.6667 6.96514 18.6667 7.33333V24.6667C18.6667 25.0349 18.9651 25.3333 19.3333 25.3333H23.3333C23.7015 25.3333 24 25.0349 24 24.6667V7.33333C24 6.96514 23.7015 6.66667 23.3333 6.66667H19.3333Z" fill="currentColor"/>',Icon$60='<path d="M5.33334 26V19.4667C5.33334 19.393 5.39304 19.3333 5.46668 19.3333H7.86668C7.94031 19.3333 8.00001 19.393 8.00001 19.4667V23.3333C8.00001 23.7015 8.29849 24 8.66668 24H23.3333C23.7015 24 24 23.7015 24 23.3333V8.66666C24 8.29847 23.7015 7.99999 23.3333 7.99999H19.4667C19.393 7.99999 19.3333 7.9403 19.3333 7.86666V5.46666C19.3333 5.39302 19.393 5.33333 19.4667 5.33333H26C26.3682 5.33333 26.6667 5.63181 26.6667 5.99999V26C26.6667 26.3682 26.3682 26.6667 26 26.6667H6.00001C5.63182 26.6667 5.33334 26.3682 5.33334 26Z" fill="currentColor"/> <path d="M14.0098 8.42359H10.806C10.6872 8.42359 10.6277 8.56721 10.7117 8.6512L16.5491 14.4886C16.8094 14.7489 16.8094 15.171 16.5491 15.4314L15.3234 16.657C15.0631 16.9174 14.641 16.9174 14.3806 16.657L8.63739 10.9138C8.55339 10.8298 8.40978 10.8893 8.40978 11.0081V14.0236C8.40978 14.3918 8.1113 14.6903 7.74311 14.6903H6.00978C5.64159 14.6903 5.34311 14.3918 5.34311 14.0236L5.34311 6.02359C5.34311 5.6554 5.64159 5.35692 6.00978 5.35692L14.0098 5.35692C14.378 5.35692 14.6764 5.6554 14.6764 6.02359V7.75692C14.6764 8.12511 14.378 8.42359 14.0098 8.42359Z" fill="currentColor"/>',Icon$61='<path d="M16 15.3333C15.6318 15.3333 15.3333 15.6318 15.3333 16V20C15.3333 20.3682 15.6318 20.6667 16 20.6667H21.3333C21.7015 20.6667 22 20.3682 22 20V16C22 15.6318 21.7015 15.3333 21.3333 15.3333H16Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M5.33333 7.33334C5.33333 6.96515 5.63181 6.66667 5.99999 6.66667H26C26.3682 6.66667 26.6667 6.96515 26.6667 7.33334V24.6667C26.6667 25.0349 26.3682 25.3333 26 25.3333H5.99999C5.63181 25.3333 5.33333 25.0349 5.33333 24.6667V7.33334ZM7.99999 10C7.99999 9.63182 8.29847 9.33334 8.66666 9.33334H23.3333C23.7015 9.33334 24 9.63182 24 10V22C24 22.3682 23.7015 22.6667 23.3333 22.6667H8.66666C8.29847 22.6667 7.99999 22.3682 7.99999 22V10Z" fill="currentColor"/>',Icon$62='<path d="M10.6667 6.6548C10.6667 6.10764 11.2894 5.79346 11.7295 6.11862L24.377 15.4634C24.7377 15.7298 24.7377 16.2692 24.3771 16.5357L11.7295 25.8813C11.2895 26.2065 10.6667 25.8923 10.6667 25.3451L10.6667 6.6548Z" fill="currentColor"/>',Icon$63='<path d="M13.9213 5.53573C14.3146 5.45804 14.6666 5.76987 14.6666 6.17079V7.57215C14.6666 7.89777 14.4305 8.17277 14.114 8.24925C12.5981 8.61559 11.2506 9.41368 10.2091 10.506C9.98474 10.7414 9.62903 10.8079 9.34742 10.6453L8.14112 9.94885C7.79394 9.7484 7.69985 9.28777 7.96359 8.98585C9.48505 7.24409 11.5636 6.00143 13.9213 5.53573Z" fill="currentColor"/> <path d="M5.88974 12.5908C6.01805 12.2101 6.46491 12.0603 6.81279 12.2611L8.01201 12.9535C8.29379 13.1162 8.41396 13.4577 8.32238 13.7699C8.11252 14.4854 7.99998 15.2424 7.99998 16.0257C7.99998 16.809 8.11252 17.566 8.32238 18.2814C8.41396 18.5936 8.29378 18.9352 8.01201 19.0979L6.82742 19.7818C6.48051 19.9821 6.03488 19.8337 5.90521 19.4547C5.5345 18.3712 5.33331 17.2091 5.33331 16C5.33331 14.8078 5.5289 13.6613 5.88974 12.5908Z" fill="currentColor"/> <path d="M8.17106 22.0852C7.82291 22.2862 7.72949 22.7486 7.99532 23.0502C9.51387 24.773 11.5799 26.0017 13.9213 26.4642C14.3146 26.5419 14.6666 26.2301 14.6666 25.8291V24.4792C14.6666 24.1536 14.4305 23.8786 14.114 23.8021C12.5981 23.4358 11.2506 22.6377 10.2091 21.5453C9.98474 21.31 9.62903 21.2435 9.34742 21.4061L8.17106 22.0852Z" fill="currentColor"/> <path d="M17.3333 25.8291C17.3333 26.2301 17.6857 26.5418 18.079 26.4641C22.9748 25.4969 26.6666 21.1796 26.6666 16C26.6666 10.8204 22.9748 6.50302 18.079 5.5358C17.6857 5.4581 17.3333 5.76987 17.3333 6.17079V7.57215C17.3333 7.89777 17.5697 8.17282 17.8862 8.24932C21.3942 9.09721 24 12.2572 24 16.0257C24 19.7942 21.3942 22.9542 17.8862 23.802C17.5697 23.8785 17.3333 24.1536 17.3333 24.4792V25.8291Z" fill="currentColor"/> <path d="M14.3961 10.4163C13.9561 10.0911 13.3333 10.4053 13.3333 10.9525L13.3333 21.0474C13.3333 21.5946 13.9561 21.9087 14.3962 21.5836L21.2273 16.5359C21.5879 16.2694 21.5879 15.73 21.2273 15.4635L14.3961 10.4163Z" fill="currentColor"/>',Icon$74='<path d="M15.6038 12.2147C16.0439 12.5399 16.6667 12.2257 16.6667 11.6786V10.1789C16.6667 10.1001 16.7351 10.0384 16.8134 10.0479C20.1116 10.4494 22.6667 13.2593 22.6667 16.6659C22.6667 20.3481 19.6817 23.3332 15.9995 23.3332C12.542 23.3332 9.69927 20.7014 9.36509 17.332C9.32875 16.9655 9.03371 16.6662 8.66548 16.6662L6.66655 16.6666C6.29841 16.6666 5.99769 16.966 6.02187 17.3334C6.36494 22.5454 10.7012 26.6667 16 26.6667C21.5228 26.6667 26 22.1895 26 16.6667C26 11.4103 21.9444 7.10112 16.7916 6.69757C16.7216 6.69209 16.6667 6.63396 16.6667 6.56372V4.98824C16.6667 4.44106 16.0439 4.12689 15.6038 4.45206L11.0765 7.79738C10.7159 8.06387 10.7159 8.60326 11.0766 8.86973L15.6038 12.2147Z" fill="currentColor"/>',Icon$77='<path d="M16.6667 10.3452C16.6667 10.8924 16.0439 11.2066 15.6038 10.8814L11.0766 7.5364C10.7159 7.26993 10.7159 6.73054 11.0766 6.46405L15.6038 3.11873C16.0439 2.79356 16.6667 3.10773 16.6667 3.6549V5.22682C16.6667 5.29746 16.7223 5.35579 16.7927 5.36066C22.6821 5.76757 27.3333 10.674 27.3333 16.6667C27.3333 22.9259 22.2592 28 16 28C9.96483 28 5.03145 23.2827 4.68601 17.3341C4.66466 16.9665 4.96518 16.6673 5.33339 16.6673H7.3334C7.70157 16.6673 7.99714 16.9668 8.02743 17.3337C8.36638 21.4399 11.8064 24.6667 16 24.6667C20.4183 24.6667 24 21.085 24 16.6667C24 12.5225 20.8483 9.11428 16.8113 8.70739C16.7337 8.69957 16.6667 8.76096 16.6667 8.83893V10.3452Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M17.0879 19.679C17.4553 19.9195 17.8928 20.0398 18.4004 20.0398C18.9099 20.0398 19.3474 19.9205 19.7129 19.6818C20.0803 19.4413 20.3635 19.0938 20.5623 18.6392C20.7612 18.1847 20.8606 17.6373 20.8606 16.9972C20.8625 16.3608 20.764 15.8192 20.5652 15.3722C20.3663 14.9252 20.0822 14.5853 19.7129 14.3523C19.3455 14.1175 18.908 14 18.4004 14C17.8928 14 17.4553 14.1175 17.0879 14.3523C16.7224 14.5853 16.4402 14.9252 16.2413 15.3722C16.0443 15.8173 15.9449 16.3589 15.943 16.9972C15.9411 17.6354 16.0396 18.1818 16.2385 18.6364C16.4373 19.089 16.7205 19.4366 17.0879 19.679ZM19.1362 18.4262C18.9487 18.7349 18.7034 18.8892 18.4004 18.8892C18.1996 18.8892 18.0226 18.8211 17.8691 18.6847C17.7157 18.5464 17.5964 18.3372 17.5112 18.0568C17.4279 17.7765 17.3871 17.4233 17.389 16.9972C17.3909 16.3684 17.4847 15.9025 17.6703 15.5995C17.8559 15.2945 18.0993 15.1421 18.4004 15.1421C18.603 15.1421 18.7801 15.2093 18.9316 15.3438C19.0832 15.4782 19.2015 15.6828 19.2868 15.9574C19.372 16.2301 19.4146 16.5767 19.4146 16.9972C19.4165 17.6392 19.3237 18.1156 19.1362 18.4262Z" fill="currentColor"/> <path d="M13.7746 19.8978C13.8482 19.8978 13.9079 19.8381 13.9079 19.7644V14.2129C13.9079 14.1393 13.8482 14.0796 13.7746 14.0796H12.642C12.6171 14.0796 12.5927 14.0865 12.5716 14.0997L11.2322 14.9325C11.1931 14.9568 11.1693 14.9996 11.1693 15.0457V15.9497C11.1693 16.0539 11.2833 16.1178 11.3722 16.0635L12.464 15.396C12.4682 15.3934 12.473 15.3921 12.4779 15.3921C12.4926 15.3921 12.5045 15.404 12.5045 15.4187V19.7644C12.5045 19.8381 12.5642 19.8978 12.6378 19.8978H13.7746Z" fill="currentColor"/>',Icon$81='<path d="M15.3333 10.3452C15.3333 10.8924 15.9561 11.2066 16.3962 10.8814L20.9234 7.5364C21.2841 7.26993 21.2841 6.73054 20.9235 6.46405L16.3962 3.11873C15.9561 2.79356 15.3333 3.10773 15.3333 3.6549V5.22682C15.3333 5.29746 15.2778 5.35579 15.2073 5.36066C9.31791 5.76757 4.66667 10.674 4.66667 16.6667C4.66667 22.9259 9.74078 28 16 28C22.0352 28 26.9686 23.2827 27.314 17.3341C27.3354 16.9665 27.0348 16.6673 26.6666 16.6673H24.6666C24.2984 16.6673 24.0029 16.9668 23.9726 17.3337C23.6336 21.4399 20.1937 24.6667 16 24.6667C11.5817 24.6667 8 21.085 8 16.6667C8 12.5225 11.1517 9.11428 15.1887 8.70739C15.2663 8.69957 15.3333 8.76096 15.3333 8.83893V10.3452Z" fill="currentColor"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M17.0879 19.679C17.4553 19.9195 17.8928 20.0398 18.4004 20.0398C18.9099 20.0398 19.3474 19.9205 19.7129 19.6818C20.0803 19.4413 20.3635 19.0938 20.5623 18.6392C20.7612 18.1847 20.8606 17.6373 20.8606 16.9972C20.8625 16.3608 20.764 15.8192 20.5652 15.3722C20.3663 14.9252 20.0822 14.5853 19.7129 14.3523C19.3455 14.1175 18.908 14 18.4004 14C17.8928 14 17.4553 14.1175 17.0879 14.3523C16.7224 14.5853 16.4402 14.9252 16.2413 15.3722C16.0443 15.8173 15.9449 16.3589 15.943 16.9972C15.9411 17.6354 16.0396 18.1818 16.2385 18.6364C16.4373 19.089 16.7205 19.4366 17.0879 19.679ZM19.1362 18.4262C18.9487 18.7349 18.7034 18.8892 18.4004 18.8892C18.1996 18.8892 18.0225 18.8211 17.8691 18.6847C17.7157 18.5464 17.5964 18.3372 17.5112 18.0568C17.4278 17.7765 17.3871 17.4233 17.389 16.9972C17.3909 16.3684 17.4847 15.9025 17.6703 15.5995C17.8559 15.2945 18.0992 15.1421 18.4004 15.1421C18.603 15.1421 18.7801 15.2093 18.9316 15.3438C19.0831 15.4782 19.2015 15.6828 19.2867 15.9574C19.372 16.2301 19.4146 16.5767 19.4146 16.9972C19.4165 17.6392 19.3237 18.1156 19.1362 18.4262Z" fill="currentColor"/> <path d="M13.7746 19.8978C13.8482 19.8978 13.9079 19.8381 13.9079 19.7644V14.2129C13.9079 14.1393 13.8482 14.0796 13.7746 14.0796H12.642C12.6171 14.0796 12.5927 14.0865 12.5716 14.0997L11.2322 14.9325C11.1931 14.9568 11.1693 14.9996 11.1693 15.0457V15.9497C11.1693 16.0539 11.2833 16.1178 11.3722 16.0635L12.464 15.396C12.4682 15.3934 12.473 15.3921 12.4779 15.3921C12.4926 15.3921 12.5045 15.404 12.5045 15.4187V19.7644C12.5045 19.8381 12.5642 19.8978 12.6378 19.8978H13.7746Z" fill="currentColor"/>',Icon$88='<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5722 5.33333C13.2429 5.33333 12.9629 5.57382 12.9132 5.89938L12.4063 9.21916C12.4 9.26058 12.3746 9.29655 12.3378 9.31672C12.2387 9.37118 12.1409 9.42779 12.0444 9.48648C12.0086 9.5083 11.9646 9.51242 11.9255 9.49718L8.79572 8.27692C8.48896 8.15732 8.14083 8.27958 7.9762 8.56472L5.5491 12.7686C5.38444 13.0538 5.45271 13.4165 5.70981 13.6223L8.33308 15.7225C8.3658 15.7487 8.38422 15.7887 8.38331 15.8306C8.38209 15.8867 8.38148 15.9429 8.38148 15.9993C8.38148 16.0558 8.3821 16.1121 8.38332 16.1684C8.38423 16.2102 8.36582 16.2503 8.33313 16.2765L5.7103 18.3778C5.45334 18.5836 5.38515 18.9462 5.54978 19.2314L7.97688 23.4352C8.14155 23.7205 8.48981 23.8427 8.79661 23.723L11.926 22.5016C11.9651 22.4864 12.009 22.4905 12.0449 22.5123C12.1412 22.5709 12.2388 22.6274 12.3378 22.6818C12.3745 22.7019 12.4 22.7379 12.4063 22.7793L12.9132 26.0993C12.9629 26.4249 13.2429 26.6654 13.5722 26.6654H18.4264C18.7556 26.6654 19.0356 26.425 19.0854 26.0995L19.5933 22.7801C19.5997 22.7386 19.6252 22.7027 19.6619 22.6825C19.7614 22.6279 19.8596 22.5711 19.9564 22.5121C19.9923 22.4903 20.0362 22.4862 20.0754 22.5015L23.2035 23.7223C23.5103 23.842 23.8585 23.7198 24.0232 23.4346L26.4503 19.2307C26.6149 18.9456 26.5467 18.583 26.2898 18.3771L23.6679 16.2766C23.6352 16.2504 23.6168 16.2104 23.6177 16.1685C23.619 16.1122 23.6196 16.0558 23.6196 15.9993C23.6196 15.9429 23.619 15.8866 23.6177 15.8305C23.6168 15.7886 23.6353 15.7486 23.668 15.7224L26.2903 13.623C26.5474 13.4172 26.6156 13.0544 26.451 12.7692L24.0239 8.56537C23.8592 8.28023 23.5111 8.15797 23.2043 8.27757L20.0758 9.49734C20.0367 9.51258 19.9927 9.50846 19.9569 9.48664C19.8599 9.42762 19.7616 9.37071 19.6618 9.31596C19.6251 9.2958 19.5997 9.25984 19.5933 9.21843L19.0854 5.89915C19.0356 5.57369 18.7556 5.33333 18.4264 5.33333H13.5722ZM16.0001 20.2854C18.3672 20.2854 20.2862 18.3664 20.2862 15.9993C20.2862 13.6322 18.3672 11.7132 16.0001 11.7132C13.6329 11.7132 11.714 13.6322 11.714 15.9993C11.714 18.3664 13.6329 20.2854 16.0001 20.2854Z" fill="currentColor"/>',Icon$104='<path d="M17.5091 24.6595C17.5091 25.2066 16.8864 25.5208 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9992 9.36923 19.9992H4.66667C4.29848 19.9992 4 19.7007 4 19.3325V12.6658C4 12.2976 4.29848 11.9992 4.66667 11.9992H9.37115C9.39967 11.9992 9.42745 11.99 9.45039 11.9731L16.4463 6.80363C16.8863 6.47845 17.5091 6.79262 17.5091 7.3398L17.5091 24.6595Z" fill="currentColor"/> <path d="M27.5091 9.33336C27.8773 9.33336 28.1758 9.63184 28.1758 10V22C28.1758 22.3682 27.8773 22.6667 27.5091 22.6667H26.1758C25.8076 22.6667 25.5091 22.3682 25.5091 22V10C25.5091 9.63184 25.8076 9.33336 26.1758 9.33336L27.5091 9.33336Z" fill="currentColor"/> <path d="M22.1758 12C22.544 12 22.8424 12.2985 22.8424 12.6667V19.3334C22.8424 19.7016 22.544 20 22.1758 20H20.8424C20.4743 20 20.1758 19.7016 20.1758 19.3334V12.6667C20.1758 12.2985 20.4743 12 20.8424 12H22.1758Z" fill="currentColor"/>',Icon$105='<path d="M17.5091 24.6594C17.5091 25.2066 16.8864 25.5207 16.4463 25.1956L9.44847 20.0252C9.42553 20.0083 9.39776 19.9991 9.36923 19.9991H4.66667C4.29848 19.9991 4 19.7006 4 19.3324V12.6658C4 12.2976 4.29848 11.9991 4.66667 11.9991H9.37115C9.39967 11.9991 9.42745 11.99 9.45039 11.973L16.4463 6.80358C16.8863 6.4784 17.5091 6.79258 17.5091 7.33975L17.5091 24.6594Z" fill="currentColor"/> <path d="M22.8424 12.6667C22.8424 12.2985 22.544 12 22.1758 12H20.8424C20.4743 12 20.1758 12.2985 20.1758 12.6667V19.3333C20.1758 19.7015 20.4743 20 20.8424 20H22.1758C22.544 20 22.8424 19.7015 22.8424 19.3333V12.6667Z" fill="currentColor"/>';const vidstackCZgUA94N=Object.freeze(Object.defineProperty({__proto__:null,Component:Component,DOMEvent:DOMEvent,EventsController:EventsController,EventsTarget:EventsTarget,Icon$0:Icon$0,Icon$104:Icon$104,Icon$105:Icon$105,Icon$11:Icon$11,Icon$13:Icon$13,Icon$16:Icon$16,Icon$19:Icon$19,Icon$22:Icon$22,Icon$24:Icon$24,Icon$26:Icon$26,Icon$27:Icon$27,Icon$31:Icon$31,Icon$33:Icon$33,Icon$34:Icon$34,Icon$35:Icon$35,Icon$39:Icon$39,Icon$40:Icon$40,Icon$5:Icon$5,Icon$53:Icon$53,Icon$54:Icon$54,Icon$56:Icon$56,Icon$59:Icon$59,Icon$60:Icon$60,Icon$61:Icon$61,Icon$62:Icon$62,Icon$63:Icon$63,Icon$74:Icon$74,Icon$77:Icon$77,Icon$8:Icon$8,Icon$81:Icon$81,Icon$88:Icon$88,State:State$1,ViewController:ViewController,animationFrameThrottle:animationFrameThrottle,appendTriggerEvent:appendTriggerEvent,ariaBool:ariaBool$1,camelToKebabCase:camelToKebabCase,chromecast:chromecast,composeRefs:composeRefs,computed:computed,createContext:createContext,createDisposalBin:createDisposalBin,createReactComponent:createReactComponent,createScope:createScope,deferredPromise:deferredPromise,effect:effect,findTriggerEvent:findTriggerEvent,fscreen:fscreen,functionDebounce:functionDebounce,functionThrottle:functionThrottle,getScope:getScope,hasProvidedContext:hasProvidedContext,hasTriggerEvent:hasTriggerEvent,isArray:isArray$1,isBoolean:isBoolean,isDOMNode:isDOMNode,isFunction:isFunction,isKeyboardClick:isKeyboardClick,isKeyboardEvent:isKeyboardEvent,isMouseEvent:isMouseEvent,isNil:isNil,isNull:isNull,isNumber:isNumber,isObject:isObject,isPointerEvent:isPointerEvent,isString:isString,isTouchEvent:isTouchEvent,isUndefined:isUndefined,isWriteSignal:isWriteSignal,kebabToCamelCase:kebabToCamelCase,keysOf:keysOf,listenEvent:listenEvent,method:method,noop:noop$2,onDispose:onDispose,peek:peek,prop:prop,provideContext:provideContext,r:r,scoped:scoped,setAttribute:setAttribute,setStyle:setStyle,signal:signal,tick:tick,toggleClass:toggleClass,untrack:untrack,uppercaseFirstChar:uppercaseFirstChar,useContext:useContext,useReactContext:useReactContext,useReactScope:useReactScope,useSignal:useSignal,useSignalRecord:useSignalRecord,useState:useState,useStateContext:useStateContext,waitIdlePeriod:waitIdlePeriod,waitTimeout:waitTimeout,walkTriggerEventChain:walkTriggerEventChain,wasEnterKeyPressed:wasEnterKeyPressed},Symbol.toStringTag,{value:"Module"})),min=Math.min,max=Math.max,round$1=Math.round,floor=Math.floor,createCoords=e=>({x:e,y:e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(e,t,n){return max(e,min(t,n))}function evaluate(e,t){return"function"==typeof e?e(t):e}function getSide(e){return e.split("-")[0]}function getAlignment(e){return e.split("-")[1]}function getOppositeAxis(e){return"x"===e?"y":"x"}function getAxisLength(e){return"y"===e?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(e){return yAxisSides.has(getSide(e))?"y":"x"}function getAlignmentAxis(e){return getOppositeAxis(getSideAxis(e))}function getAlignmentSides(e,t,n){void 0===n&&(n=!1);const r=getAlignment(e),i=getAlignmentAxis(e),s=getAxisLength(i);let a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=getOppositePlacement(a)),[a,getOppositePlacement(a)]}function getExpandedPlacements(e){const t=getOppositePlacement(e);return[getOppositeAlignmentPlacement(e),t,getOppositeAlignmentPlacement(t)]}function getOppositeAlignmentPlacement(e){return e.replace(/start|end/g,e=>oppositeAlignmentMap[e])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(e,t,n){switch(e){case"top":case"bottom":return n?t?rlPlacement:lrPlacement:t?lrPlacement:rlPlacement;case"left":case"right":return t?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(e,t,n,r){const i=getAlignment(e);let s=getSideList(getSide(e),"start"===n,r);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(getOppositeAlignmentPlacement)))),s}function getOppositePlacement(e){return e.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(e){return{top:0,right:0,bottom:0,left:0,...e}}function getPaddingObject(e){return"number"!=typeof e?expandPaddingObject(e):{top:e,right:e,bottom:e,left:e}}function rectToClientRect(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function computeCoordsFromPlacement(e,t,n){let{reference:r,floating:i}=e;const s=getSideAxis(t),a=getAlignmentAxis(t),o=getAxisLength(a),l=getSide(t),c="y"===s,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(getAlignment(t)){case"start":p[a]-=h*(n&&c?-1:1);break;case"end":p[a]+=h*(n&&c?-1:1)}return p}const computePosition$1=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=computeCoordsFromPlacement(c,r,l),h=r,p={},m=0;for(let f=0;f<o.length;f++){const{name:n,fn:s}=o[f],{x:g,y:x,data:v,reset:y}=await s({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:a,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=x?x:d,p={...p,[n]:{...p[n],...v}},y&&m<=50&&(m++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):y.rects),({x:u,y:d}=computeCoordsFromPlacement(c,h,l))),f=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:p}};async function detectOverflow(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=evaluate(t,e),m=getPaddingObject(p),f=o[h?"floating"===d?"reference":"floating":d],g=rectToClientRect(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(f)))||n?f:f.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),x="floating"===d?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,v=await(null==s.getOffsetParent?void 0:s.getOffsetParent(o.floating)),y=await(null==s.isElement?void 0:s.isElement(v))&&await(null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},_=rectToClientRect(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:v,strategy:l}):x);return{top:(g.top-_.top+m.top)/y.y,bottom:(_.bottom-g.bottom+m.bottom)/y.y,left:(g.left-_.left+m.left)/y.x,right:(_.right-g.right+m.right)/y.x}}const flip$1=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:f=!0,...g}=evaluate(e,t);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const x=getSide(i),v=getSideAxis(o),y=getSide(o)===o,_=await(null==l.isRTL?void 0:l.isRTL(c.floating)),E=h||(y||!f?[getOppositePlacement(o)]:getExpandedPlacements(o)),b="none"!==m;!h&&b&&E.push(...getOppositeAxisPlacements(o,f,m,_));const C=[o,...E],S=await detectOverflow(t,g),T=[];let R=(null==(r=s.flip)?void 0:r.overflows)||[];if(u&&T.push(S[x]),d){const e=getAlignmentSides(i,a,_);T.push(S[e[0]],S[e[1]])}if(R=[...R,{placement:i,overflows:T}],!T.every(e=>e<=0)){var j,w;const e=((null==(j=s.flip)?void 0:j.index)||0)+1,t=C[e];if(t){if(!("alignment"===d&&v!==getSideAxis(t))||R.every(e=>getSideAxis(e.placement)!==v||e.overflows[0]>0))return{data:{index:e,overflows:R},reset:{placement:t}}}let n=null==(w=R.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:w.placement;if(!n)switch(p){case"bestFit":{var A;const e=null==(A=R.filter(e=>{if(b){const t=getSideAxis(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:A[0];e&&(n=e);break}case"initialPlacement":n=o}if(i!==n)return{reset:{placement:n}}}return{}}}},shift$1=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=evaluate(e,t),c={x:n,y:r},u=await detectOverflow(t,l),d=getSideAxis(getSide(i)),h=getOppositeAxis(d);let p=c[h],m=c[d];if(s){const e="y"===h?"bottom":"right";p=clamp(p+u["y"===h?"top":"left"],p,p-u[e])}if(a){const e="y"===d?"bottom":"right";m=clamp(m+u["y"===d?"top":"left"],m,m-u[e])}const f=o.fn({...t,[h]:p,[d]:m});return{...f,data:{x:f.x-n,y:f.y-r,enabled:{[h]:s,[d]:a}}}}}};function hasWindow(){return"undefined"!=typeof window}function getNodeName(e){return isNode(e)?(e.nodeName||"").toLowerCase():"#document"}function getWindow(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function getDocumentElement(e){var t;return null==(t=(isNode(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function isNode(e){return!!hasWindow()&&(e instanceof Node||e instanceof getWindow(e).Node)}function isElement(e){return!!hasWindow()&&(e instanceof Element||e instanceof getWindow(e).Element)}function isHTMLElement$1(e){return!!hasWindow()&&(e instanceof HTMLElement||e instanceof getWindow(e).HTMLElement)}function isShadowRoot(e){return!(!hasWindow()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof getWindow(e).ShadowRoot)}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=getComputedStyle$1(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!invalidOverflowDisplayValues.has(i)}const tableElements=new Set(["table","td","th"]);function isTableElement(e){return tableElements.has(getNodeName(e))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(e){return topLayerSelectors.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(e){const t=isWebKit(),n=isElement(e)?getComputedStyle$1(e):e;return transformProperties.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||willChangeValues.some(e=>(n.willChange||"").includes(e))||containValues.some(e=>(n.contain||"").includes(e))}function getContainingBlock(e){let t=getParentNode(e);for(;isHTMLElement$1(t)&&!isLastTraversableNode(t);){if(isContainingBlock(t))return t;if(isTopLayer(t))return null;t=getParentNode(t)}return null}function isWebKit(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(e){return lastTraversableNodeNames.has(getNodeName(e))}function getComputedStyle$1(e){return getWindow(e).getComputedStyle(e)}function getNodeScroll(e){return isElement(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function getParentNode(e){if("html"===getNodeName(e))return e;const t=e.assignedSlot||e.parentNode||isShadowRoot(e)&&e.host||getDocumentElement(e);return isShadowRoot(t)?t.host:t}function getNearestOverflowAncestor(e){const t=getParentNode(e);return isLastTraversableNode(t)?e.ownerDocument?e.ownerDocument.body:e.body:isHTMLElement$1(t)&&isOverflowElement(t)?t:getNearestOverflowAncestor(t)}function getOverflowAncestors(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=getNearestOverflowAncestor(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),a=getWindow(i);if(s){const e=getFrameElement(a);return t.concat(a,a.visualViewport||[],isOverflowElement(i)?i:[],e&&n?getOverflowAncestors(e):[])}return t.concat(i,getOverflowAncestors(i,[],n))}function getFrameElement(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function getCssDimensions(e){const t=getComputedStyle$1(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=isHTMLElement$1(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=round$1(n)!==s||round$1(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function unwrapElement(e){return isElement(e)?e:e.contextElement}function getScale(e){const t=unwrapElement(e);if(!isHTMLElement$1(t))return createCoords(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=getCssDimensions(t);let a=(s?round$1(n.width):n.width)/r,o=(s?round$1(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),o&&Number.isFinite(o)||(o=1),{x:a,y:o}}const noOffsets=createCoords(0);function getVisualOffsets(e){const t=getWindow(e);return isWebKit()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:noOffsets}function shouldAddVisualOffsets(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==getWindow(e))&&t}function getBoundingClientRect(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=unwrapElement(e);let a=createCoords(1);t&&(r?isElement(r)&&(a=getScale(r)):a=getScale(e));const o=shouldAddVisualOffsets(s,n,r)?getVisualOffsets(s):createCoords(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(s){const e=getWindow(s),t=r&&isElement(r)?getWindow(r):r;let n=e,i=getFrameElement(n);for(;i&&r&&t!==n;){const e=getScale(i),t=i.getBoundingClientRect(),r=getComputedStyle$1(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=s,c+=a,n=getWindow(i),i=getFrameElement(n)}}return rectToClientRect({width:u,height:d,x:l,y:c})}function getWindowScrollBarX(e,t){const n=getNodeScroll(e).scrollLeft;return t?t.left+n:getBoundingClientRect(getDocumentElement(e)).left+n}function getHTMLOffset(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:getWindowScrollBarX(e,r)),y:r.top+t.scrollTop}}function convertOffsetParentRelativeRectToViewportRelativeRect(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s="fixed"===i,a=getDocumentElement(r),o=!!t&&isTopLayer(t.floating);if(r===a||o&&s)return n;let l={scrollLeft:0,scrollTop:0},c=createCoords(1);const u=createCoords(0),d=isHTMLElement$1(r);if((d||!d&&!s)&&(("body"!==getNodeName(r)||isOverflowElement(a))&&(l=getNodeScroll(r)),isHTMLElement$1(r))){const e=getBoundingClientRect(r);c=getScale(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!a||d||s?createCoords(0):getHTMLOffset(a,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function getClientRects(e){return Array.from(e.getClientRects())}function getDocumentRect(e){const t=getDocumentElement(e),n=getNodeScroll(e),r=e.ownerDocument.body,i=max(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=max(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+getWindowScrollBarX(e);const o=-n.scrollTop;return"rtl"===getComputedStyle$1(r).direction&&(a+=max(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function getViewportRect(e,t){const n=getWindow(e),r=getDocumentElement(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const e=isWebKit();(!e||e&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(e,t){const n=getBoundingClientRect(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=isHTMLElement$1(e)?getScale(e):createCoords(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:r*s.y}}function getClientRectFromClippingAncestor(e,t,n){let r;if("viewport"===t)r=getViewportRect(e,n);else if("document"===t)r=getDocumentRect(getDocumentElement(e));else if(isElement(t))r=getInnerBoundingClientRect(t,n);else{const n=getVisualOffsets(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return rectToClientRect(r)}function hasFixedPositionAncestor(e,t){const n=getParentNode(e);return!(n===t||!isElement(n)||isLastTraversableNode(n))&&("fixed"===getComputedStyle$1(n).position||hasFixedPositionAncestor(n,t))}function getClippingElementAncestors(e,t){const n=t.get(e);if(n)return n;let r=getOverflowAncestors(e,[],!1).filter(e=>isElement(e)&&"body"!==getNodeName(e)),i=null;const s="fixed"===getComputedStyle$1(e).position;let a=s?getParentNode(e):e;for(;isElement(a)&&!isLastTraversableNode(a);){const t=getComputedStyle$1(a),n=isContainingBlock(a);n||"fixed"!==t.position||(i=null);(s?!n&&!i:!n&&"static"===t.position&&!!i&&absoluteOrFixed.has(i.position)||isOverflowElement(a)&&!n&&hasFixedPositionAncestor(e,a))?r=r.filter(e=>e!==a):i=t,a=getParentNode(a)}return t.set(e,r),r}function getClippingRect(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[..."clippingAncestors"===n?isTopLayer(t)?[]:getClippingElementAncestors(t,this._c):[].concat(n),r],a=s[0],o=s.reduce((e,n)=>{const r=getClientRectFromClippingAncestor(t,n,i);return e.top=max(r.top,e.top),e.right=min(r.right,e.right),e.bottom=min(r.bottom,e.bottom),e.left=max(r.left,e.left),e},getClientRectFromClippingAncestor(t,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function getDimensions(e){const{width:t,height:n}=getCssDimensions(e);return{width:t,height:n}}function getRectRelativeToOffsetParent(e,t,n){const r=isHTMLElement$1(t),i=getDocumentElement(t),s="fixed"===n,a=getBoundingClientRect(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=createCoords(0);function c(){l.x=getWindowScrollBarX(i)}if(r||!r&&!s)if(("body"!==getNodeName(t)||isOverflowElement(i))&&(o=getNodeScroll(t)),r){const e=getBoundingClientRect(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();s&&!r&&i&&c();const u=!i||r||s?createCoords(0):getHTMLOffset(i,o);return{x:a.left+o.scrollLeft-l.x-u.x,y:a.top+o.scrollTop-l.y-u.y,width:a.width,height:a.height}}function isStaticPositioned(e){return"static"===getComputedStyle$1(e).position}function getTrueOffsetParent(e,t){if(!isHTMLElement$1(e)||"fixed"===getComputedStyle$1(e).position)return null;if(t)return t(e);let n=e.offsetParent;return getDocumentElement(e)===n&&(n=n.ownerDocument.body),n}function getOffsetParent(e,t){const n=getWindow(e);if(isTopLayer(e))return n;if(!isHTMLElement$1(e)){let t=getParentNode(e);for(;t&&!isLastTraversableNode(t);){if(isElement(t)&&!isStaticPositioned(t))return t;t=getParentNode(t)}return n}let r=getTrueOffsetParent(e,t);for(;r&&isTableElement(r)&&isStaticPositioned(r);)r=getTrueOffsetParent(r,t);return r&&isLastTraversableNode(r)&&isStaticPositioned(r)&&!isContainingBlock(r)?n:r||getContainingBlock(e)||n}const getElementRects=async function(e){const t=this.getOffsetParent||getOffsetParent,n=this.getDimensions,r=await n(e.floating);return{reference:getRectRelativeToOffsetParent(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function isRTL(e){return"rtl"===getComputedStyle$1(e).direction}const platform={convertOffsetParentRelativeRectToViewportRelativeRect:convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement:getDocumentElement,getClippingRect:getClippingRect,getOffsetParent:getOffsetParent,getElementRects:getElementRects,getClientRects:getClientRects,getDimensions:getDimensions,getScale:getScale,isElement:isElement,isRTL:isRTL};function rectsAreEqual(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function observeMove(e,t){let n,r=null;const i=getDocumentElement(e);function s(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(o||t(),!h||!p)return;const m={rootMargin:-floor(d)+"px "+-floor(i.clientWidth-(u+h))+"px "+-floor(i.clientHeight-(d+p))+"px "+-floor(u)+"px",threshold:max(0,min(1,l))||1};let f=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!f)return a();r?a(!1,r):n=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==r||rectsAreEqual(c,e.getBoundingClientRect())||a(),f=!1}try{r=new IntersectionObserver(g,{...m,root:i.ownerDocument})}catch(x){r=new IntersectionObserver(g,m)}r.observe(e)}(!0),s}function autoUpdate(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=unwrapElement(e),u=i||s?[...c?getOverflowAncestors(c):[],...getOverflowAncestors(t)]:[];u.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)});const d=c&&o?observeMove(c,n):null;let h,p=-1,m=null;a&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let f=l?getBoundingClientRect(e):null;return l&&function t(){const r=getBoundingClientRect(e);f&&!rectsAreEqual(f,r)&&n();f=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=m)||e.disconnect(),m=null,l&&cancelAnimationFrame(h)}}const shift=shift$1,flip=flip$1,computePosition=(e,t,n)=>{const r=new Map,i={platform:platform,...n},s={...i.platform,_c:r};return computePosition$1(e,t,{...i,platform:s})};function isVideoQualitySrc(e){return!isString(e)&&"width"in e&&"height"in e&&isNumber(e.width)&&isNumber(e.height)}const IS_SERVER="undefined"==typeof document,UA=IS_SERVER?"":(null==navigator?void 0:navigator.userAgent.toLowerCase())||"",IS_IOS=!IS_SERVER&&/iphone|ipad|ipod|ios|crios|fxios/i.test(UA),IS_IPHONE=!IS_SERVER&&/(iphone|ipod)/gi.test((null==navigator?void 0:navigator.platform)||""),IS_CHROME=!IS_SERVER&&!!window.chrome,IS_SAFARI=!IS_SERVER&&(!!window.safari||IS_IOS);function canOrientScreen(){return canRotateScreen()&&isFunction(screen.orientation.unlock)}function canRotateScreen(){return!IS_SERVER&&!isUndefined(window.screen.orientation)&&!isUndefined(window.screen.orientation.lock)}function canPlayAudioType(e,t){return!IS_SERVER&&(e||(e=document.createElement("audio")),e.canPlayType(t).length>0)}function canPlayVideoType(e,t){return!IS_SERVER&&(e||(e=document.createElement("video")),e.canPlayType(t).length>0)}function canPlayHLSNatively(e){return!IS_SERVER&&(e||(e=document.createElement("video")),e.canPlayType("application/vnd.apple.mpegurl").length>0)}function canUsePictureInPicture(e){return!IS_SERVER&&(!!document.pictureInPictureEnabled&&!(null==e?void 0:e.disablePictureInPicture))}function canUseVideoPresentation(e){return!IS_SERVER&&(isFunction(null==e?void 0:e.webkitSupportsPresentationMode)&&isFunction(null==e?void 0:e.webkitSetPresentationMode))}async function canChangeVolume(){const e=document.createElement("video");return e.volume=.5,await waitTimeout(0),.5===e.volume}function getMediaSource$1(){return IS_SERVER?void 0:(null==window?void 0:window.ManagedMediaSource)??(null==window?void 0:window.MediaSource)??(null==window?void 0:window.WebKitMediaSource)}function getSourceBuffer(){return IS_SERVER?void 0:(null==window?void 0:window.SourceBuffer)??(null==window?void 0:window.WebKitSourceBuffer)}function isHLSSupported(){if(IS_SERVER)return!1;const e=getMediaSource$1();if(isUndefined(e))return!1;const t=e&&isFunction(e.isTypeSupported)&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=getSourceBuffer(),r=isUndefined(n)||!isUndefined(n.prototype)&&isFunction(n.prototype.appendBuffer)&&isFunction(n.prototype.remove);return!!t&&!!r}function isDASHSupported(){return isHLSSupported()}class TimeRange{constructor(e,t){__privateAdd(this,_ranges),isArray$1(e)?__privateSet(this,_ranges,e):isUndefined(e)||isUndefined(t)?__privateSet(this,_ranges,[]):__privateSet(this,_ranges,[[e,t]])}get length(){return __privateGet(this,_ranges).length}start(e){return __privateGet(this,_ranges)[e][0]??1/0}end(e){return __privateGet(this,_ranges)[e][1]??1/0}}function getTimeRangesStart(e){if(!e.length)return null;let t=e.start(0);for(let n=1;n<e.length;n++){const r=e.start(n);r<t&&(t=r)}return t}function getTimeRangesEnd(e){if(!e.length)return null;let t=e.end(0);for(let n=1;n<e.length;n++){const r=e.end(n);r>t&&(t=r)}return t}function normalizeTimeIntervals(e){if(e.length<=1)return e;e.sort((e,t)=>e[0]-t[0]);let t=[],n=e[0];for(let r=1;r<e.length;r++){const i=e[r];n[1]>=i[0]-1?n=[n[0],Math.max(n[1],i[1])]:(t.push(n),n=i)}return t.push(n),t}function updateTimeIntervals(e,t,n){let r=t[0],i=t[1];return n<r?[n,-1]:n===r?t:-1===r?(t[0]=n,t):(n>r&&(t[1]=n,-1===i&&e.push(t)),normalizeTimeIntervals(e),t)}_ranges=new WeakMap;const AUDIO_EXTENSIONS=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx|flac)($|\?)/i,AUDIO_TYPES=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp3","audio/webm","audio/flac","audio/m4a","audio/m4b","audio/mp4a","audio/mp4"]),VIDEO_EXTENSIONS=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,VIDEO_TYPES=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),HLS_VIDEO_EXTENSIONS=/\.(m3u8)($|\?)/i,DASH_VIDEO_EXTENSIONS=/\.(mpd)($|\?)/i,HLS_VIDEO_TYPES=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]),DASH_VIDEO_TYPES=new Set(["application/dash+xml"]);function isAudioSrc({src:e,type:t}){return isString(e)?AUDIO_EXTENSIONS.test(e)||AUDIO_TYPES.has(t)||e.startsWith("blob:")&&"audio/object"===t:"audio/object"===t}function isVideoSrc(e){return isString(e.src)?VIDEO_EXTENSIONS.test(e.src)||VIDEO_TYPES.has(e.type)||e.src.startsWith("blob:")&&"video/object"===e.type||isHLSSrc(e)&&(IS_SERVER||canPlayHLSNatively()):"video/object"===e.type}function isHLSSrc({src:e,type:t}){return isString(e)&&HLS_VIDEO_EXTENSIONS.test(e)||HLS_VIDEO_TYPES.has(t)}function isDASHSrc({src:e,type:t}){return isString(e)&&DASH_VIDEO_EXTENSIONS.test(e)||DASH_VIDEO_TYPES.has(t)}function canGoogleCastSrc(e){return isString(e.src)&&(isAudioSrc(e)||isVideoSrc(e)||isHLSSrc(e))}function isMediaStream(e){return!IS_SERVER&&void 0!==window.MediaStream&&e instanceof window.MediaStream}function appendParamsToURL(e,t){const n=new URL(e);for(const r of Object.keys(t))n.searchParams.set(r,t[r]+"");return n.toString()}function preconnect(e,t="preconnect"){if(IS_SERVER)return!1;if(!isNull(document.querySelector(`link[href="${e}"]`)))return!0;const n=document.createElement("link");return n.rel=t,n.href=e,n.crossOrigin="true",document.head.append(n),!0}const pendingRequests={};function loadScript(e){if(pendingRequests[e])return pendingRequests[e].promise;const t=deferredPromise();if(!isNull(document.querySelector(`script[src="${e}"]`)))return t.resolve(),t.promise;pendingRequests[e]=t;const n=document.createElement("script");return n.src=e,n.onload=()=>{t.resolve(),delete pendingRequests[e]},n.onerror=()=>{t.reject(),delete pendingRequests[e]},setTimeout(()=>document.head.append(n),0),t.promise}function getRequestCredentials(e){return"use-credentials"===e?"include":isString(e)?"same-origin":void 0}const CROSS_ORIGIN=Symbol(0),READY_STATE=Symbol(0),UPDATE_ACTIVE_CUES=Symbol(0),CAN_LOAD=Symbol(0),ON_MODE_CHANGE=Symbol(0),NATIVE=Symbol(0),NATIVE_HLS=Symbol(0),TextTrackSymbol={crossOrigin:CROSS_ORIGIN,readyState:READY_STATE,updateActiveCues:UPDATE_ACTIVE_CUES,canLoad:CAN_LOAD,onModeChange:ON_MODE_CHANGE,native:NATIVE,nativeHLS:NATIVE_HLS};function isCueActive(e,t){return t>=e.startTime&&t<e.endTime}function watchActiveTextTrack(e,t,n){let r=null,i=getScope();function s(){const s=isString(t)?[t]:t,a=e.toArray().find(e=>s.includes(e.kind)&&"showing"===e.mode);if(a!==r){if(!a)return n(null),void(r=null);2==a.readyState?n(a):(n(null),scoped(()=>{const e=listenEvent(a,"load",()=>{n(a),e()},{once:!0})},i)),r=a}}return s(),listenEvent(e,"mode-change",s)}class TextTrack extends EventsTarget{constructor(e){super(),__privateAdd(this,_TextTrack_instances),__publicField(this,"src"),__publicField(this,"content"),__publicField(this,"type"),__publicField(this,"encoding"),__publicField(this,"id",""),__publicField(this,"label",""),__publicField(this,"language",""),__publicField(this,"kind"),__publicField(this,"default",!1),__privateAdd(this,_canLoad,!1),__privateAdd(this,_currentTime,0),__privateAdd(this,_mode,"disabled"),__privateAdd(this,_metadata,{}),__privateAdd(this,_regions,[]),__privateAdd(this,_cues,[]),__privateAdd(this,_activeCues,[]),__publicField(this,_j,0),__publicField(this,_i),__publicField(this,_h,null),__publicField(this,_g,null);for(const t of Object.keys(e))this[t]=e[t];this.type||(this.type="vtt"),!IS_SERVER&&e.content?__privateMethod(this,_TextTrack_instances,parseContent_fn).call(this,e):e.src||(this[TextTrackSymbol.readyState]=2)}static createId(e){return`vds-${e.type}-${e.kind}-${e.src??e.label??"?"}`}get metadata(){return __privateGet(this,_metadata)}get regions(){return __privateGet(this,_regions)}get cues(){return __privateGet(this,_cues)}get activeCues(){return __privateGet(this,_activeCues)}get readyState(){return this[TextTrackSymbol.readyState]}get mode(){return __privateGet(this,_mode)}set mode(e){this.setMode(e)}addCue(e,t){var n;let r=0,i=__privateGet(this,_cues).length;for(r=0;r<i&&!(e.endTime<=__privateGet(this,_cues)[r].startTime);r++);r===i?__privateGet(this,_cues).push(e):__privateGet(this,_cues).splice(r,0,e),e instanceof TextTrackCue||null==(n=this[TextTrackSymbol.native])||n.track.addCue(e),this.dispatchEvent(new DOMEvent("add-cue",{detail:e,trigger:t})),isCueActive(e,__privateGet(this,_currentTime))&&this[TextTrackSymbol.updateActiveCues](__privateGet(this,_currentTime),t)}removeCue(e,t){var n;const r=__privateGet(this,_cues).indexOf(e);if(r>=0){const i=__privateGet(this,_activeCues).includes(e);__privateGet(this,_cues).splice(r,1),null==(n=this[TextTrackSymbol.native])||n.track.removeCue(e),this.dispatchEvent(new DOMEvent("remove-cue",{detail:e,trigger:t})),i&&this[TextTrackSymbol.updateActiveCues](__privateGet(this,_currentTime),t)}}setMode(e,t){var n;__privateGet(this,_mode)!==e&&(__privateSet(this,_mode,e),"disabled"===e?(__privateSet(this,_activeCues,[]),__privateMethod(this,_TextTrack_instances,activeCuesChanged_fn).call(this)):2===this.readyState?this[TextTrackSymbol.updateActiveCues](__privateGet(this,_currentTime),t):__privateMethod(this,_TextTrack_instances,load_fn).call(this),this.dispatchEvent(new DOMEvent("mode-change",{detail:this,trigger:t})),null==(n=this[TextTrackSymbol.onModeChange])||n.call(this))}[(_j=TextTrackSymbol.readyState,_i=TextTrackSymbol.crossOrigin,_h=TextTrackSymbol.onModeChange,_g=TextTrackSymbol.native,TextTrackSymbol.updateActiveCues)](e,t){if(__privateSet(this,_currentTime,e),"disabled"===this.mode||!__privateGet(this,_cues).length)return;const n=[];for(let i=0,s=__privateGet(this,_cues).length;i<s;i++){const t=__privateGet(this,_cues)[i];isCueActive(t,e)&&n.push(t)}let r=n.length!==__privateGet(this,_activeCues).length;if(!r)for(let i=0;i<n.length;i++)if(!__privateGet(this,_activeCues).includes(n[i])){r=!0;break}__privateSet(this,_activeCues,n),r&&__privateMethod(this,_TextTrack_instances,activeCuesChanged_fn).call(this,t)}[TextTrackSymbol.canLoad](){__privateSet(this,_canLoad,!0),"disabled"!==__privateGet(this,_mode)&&__privateMethod(this,_TextTrack_instances,load_fn).call(this)}}_canLoad=new WeakMap,_currentTime=new WeakMap,_mode=new WeakMap,_metadata=new WeakMap,_regions=new WeakMap,_cues=new WeakMap,_activeCues=new WeakMap,_TextTrack_instances=new WeakSet,parseContent_fn=function(e){__vitePreload(async()=>{const{parseText:e,VTTCue:t,VTTRegion:n}=await import("./prod-BjIFnbHf.js").then(e=>e.d);return{parseText:e,VTTCue:t,VTTRegion:n}},[]).then(({parseText:t,VTTCue:n,VTTRegion:r})=>{isString(e.content)&&"json"!==e.type?t(e.content,{type:e.type}).then(({cues:e,regions:t})=>{__privateSet(this,_cues,e),__privateSet(this,_regions,t),__privateMethod(this,_TextTrack_instances,ready_fn).call(this)}):(__privateMethod(this,_TextTrack_instances,parseJSON_fn).call(this,e.content,n,r),3!==this.readyState&&__privateMethod(this,_TextTrack_instances,ready_fn).call(this))})},load_fn=async function(){var e,t;if(__privateGet(this,_canLoad)&&!(this[TextTrackSymbol.readyState]>0))if(this[TextTrackSymbol.readyState]=1,this.dispatchEvent(new DOMEvent("load-start")),this.src)try{const{parseResponse:n,VTTCue:r,VTTRegion:i}=await __vitePreload(async()=>{const{parseResponse:e,VTTCue:t,VTTRegion:n}=await import("./prod-BjIFnbHf.js").then(e=>e.d);return{parseResponse:e,VTTCue:t,VTTRegion:n}},[]),s=null==(e=this[TextTrackSymbol.crossOrigin])?void 0:e.call(this),a=fetch(this.src,{headers:"json"===this.type?{"Content-Type":"application/json"}:void 0,credentials:getRequestCredentials(s)});if("json"===this.type)__privateMethod(this,_TextTrack_instances,parseJSON_fn).call(this,await(await a).text(),r,i);else{const{errors:e,metadata:r,regions:i,cues:s}=await n(a,{type:this.type,encoding:this.encoding});if(0===(null==(t=e[0])?void 0:t.code))throw e[0];__privateSet(this,_metadata,r),__privateSet(this,_regions,i),__privateSet(this,_cues,s)}__privateMethod(this,_TextTrack_instances,ready_fn).call(this)}catch(n){__privateMethod(this,_TextTrack_instances,error_fn).call(this,n)}else __privateMethod(this,_TextTrack_instances,ready_fn).call(this)},ready_fn=function(){if(this[TextTrackSymbol.readyState]=2,!this.src||"vtt"!==this.type){const e=this[TextTrackSymbol.native];if(e&&!e.managed)for(const t of __privateGet(this,_cues))e.track.addCue(t)}const e=new DOMEvent("load");this[TextTrackSymbol.updateActiveCues](__privateGet(this,_currentTime),e),this.dispatchEvent(e)},error_fn=function(e){this[TextTrackSymbol.readyState]=3,this.dispatchEvent(new DOMEvent("error",{detail:e}))},parseJSON_fn=function(e,t,n){try{const{regions:r,cues:i}=parseJSONCaptionsFile(e,t,n);__privateSet(this,_regions,r),__privateSet(this,_cues,i)}catch(r){__privateMethod(this,_TextTrack_instances,error_fn).call(this,r)}},activeCuesChanged_fn=function(e){this.dispatchEvent(new DOMEvent("cue-change",{trigger:e}))};const captionRE=/captions|subtitles/;function isTrackCaptionKind(e){return captionRE.test(e.kind)}function parseJSONCaptionsFile(e,t,n){const r=isString(e)?JSON.parse(e):e;let i=[],s=[];return r.regions&&n&&(i=r.regions.map(e=>Object.assign(new n,e))),(r.cues||isArray$1(r))&&(s=(isArray$1(r)?r:r.cues).filter(e=>isNumber(e.startTime)&&isNumber(e.endTime)).map(e=>Object.assign(new t(0,0,""),e))),{regions:i,cues:s}}const mediaState=new State$1({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new TimeRange,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:canOrientScreen(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return IS_IPHONE&&"video"===this.mediaType&&(!this.playsInline||!fscreen.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new TimeRange,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new TimeRange,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(isTrackCaptionKind).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get duration(){return this.seekableWindow},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return"unknown"!==this.providedViewType?this.providedViewType:this.inferredViewType},get streamType(){return"unknown"!==this.providedStreamType?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){const e=getTimeRangesStart(this.buffered)??0;return Math.max(e,this.clipStartTime)},get bufferedEnd(){const e=getTimeRangesEnd(this.buffered)??0;return Math.min(this.seekableEnd,Math.max(0,e-this.clipStartTime))},get bufferedWindow(){return Math.max(0,this.bufferedEnd-this.bufferedStart)},get seekableStart(){if(this.isLiveDVR&&this.liveDVRWindow>0)return Math.max(0,this.seekableEnd-this.liveDVRWindow);const e=getTimeRangesStart(this.seekable)??0;return Math.max(e,this.clipStartTime)},get seekableEnd(){if(this.providedDuration>0)return this.providedDuration;const e=this.liveSyncPosition>0?this.liveSyncPosition:this.canPlay?getTimeRangesEnd(this.seekable)??1/0:0;return this.clipEndTime>0?Math.min(this.clipEndTime,e):e},get seekableWindow(){const e=this.seekableEnd-this.seekableStart;return isNaN(e)?1/0:Math.max(0,e)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return"airplay"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},get isGoogleCastConnected(){return"google-cast"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.duration)&&(!this.isLiveDVR||this.duration>=this.liveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,this.seekableEnd-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},get isLiveDVR(){return/:dvr/.test(this.streamType)},get liveDVRWindow(){return Math.max(this.inferredLiveDVRWindow,this.minLiveDVRWindow)},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,inferredLiveDVRWindow:0,savedState:null}),RESET_ON_SRC_QUALITY_CHANGE=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),RESET_ON_SRC_CHANGE=new Set([...RESET_ON_SRC_QUALITY_CHANGE,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","inferredLiveDVRWindow","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function softResetMediaState(e,t=!1){const n=t?RESET_ON_SRC_QUALITY_CHANGE:RESET_ON_SRC_CHANGE;mediaState.reset(e,e=>n.has(e)),tick()}function boundTime(e,t){const n=e+t.clipStartTime(),r=Math.floor(e)===Math.floor(t.seekableStart()),i=Math.floor(n)===Math.floor(t.seekableEnd());return r?t.seekableStart():i?t.seekableEnd():t.isLiveDVR()&&t.liveDVRWindow()>0&&n<t.seekableEnd()-t.liveDVRWindow()?t.bufferedStart():Math.min(Math.max(t.seekableStart()+.1,n),t.seekableEnd()-.1)}const mediaContext=createContext();function useMediaContext$1(){return useContext(mediaContext)}class MediaRemoteControl{constructor(e=void 0){__privateAdd(this,_MediaRemoteControl_instances),__privateAdd(this,_target2,null),__privateAdd(this,_player,null),__privateAdd(this,_prevTrackIndex,-1),__privateAdd(this,_logger),__privateSet(this,_logger,e)}setTarget(e){__privateSet(this,_target2,e)}getPlayer(e){var t;return __privateGet(this,_player)||null==(t=e??__privateGet(this,_target2))||t.dispatchEvent(new DOMEvent("find-media-player",{detail:e=>{__privateSet(this,_player,e)},bubbles:!0,composed:!0})),__privateGet(this,_player)}setPlayer(e){__privateSet(this,_player,e)}startLoading(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-start-loading",e)}startLoadingPoster(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-poster-start-loading",e)}requestAirPlay(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-airplay-request",e)}requestGoogleCast(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-google-cast-request",e)}play(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-play-request",e)}pause(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-pause-request",e)}mute(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-mute-request",e)}unmute(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-unmute-request",e)}enterFullscreen(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-enter-fullscreen-request",t,e)}exitFullscreen(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-exit-fullscreen-request",t,e)}lockScreenOrientation(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-orientation-lock-request",t,e)}unlockScreenOrientation(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-orientation-unlock-request",e)}enterPictureInPicture(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-enter-pip-request",e)}exitPictureInPicture(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-exit-pip-request",e)}seeking(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-seeking-request",t,e)}seek(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-seek-request",t,e)}seekToLiveEdge(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-live-edge-request",e)}changeDuration(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-duration-change-request",t,e)}changeClipStart(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-clip-start-change-request",t,e)}changeClipEnd(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-clip-end-change-request",t,e)}changeVolume(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-volume-change-request",t,Math.max(0,Math.min(1,e)))}changeAudioTrack(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-audio-track-change-request",t,e)}changeQuality(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-quality-change-request",t,e)}requestAutoQuality(e){this.changeQuality(-1,e)}changeTextTrackMode(e,t,n){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-text-track-change-request",n,{index:e,mode:t})}changePlaybackRate(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-rate-change-request",t,e)}changeAudioGain(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-audio-gain-change-request",t,e)}resumeControls(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-resume-controls-request",e)}pauseControls(e){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-pause-controls-request",e)}togglePaused(e){const t=this.getPlayer(null==e?void 0:e.target);t&&(t.state.paused?this.play(e):this.pause(e))}toggleControls(e){const t=this.getPlayer(null==e?void 0:e.target);t&&(t.controls.showing?t.controls.hide(0,e):t.controls.show(0,e))}toggleMuted(e){const t=this.getPlayer(null==e?void 0:e.target);t&&(t.state.muted?this.unmute(e):this.mute(e))}toggleFullscreen(e,t){const n=this.getPlayer(null==t?void 0:t.target);n&&(n.state.fullscreen?this.exitFullscreen(e,t):this.enterFullscreen(e,t))}togglePictureInPicture(e){const t=this.getPlayer(null==e?void 0:e.target);t&&(t.state.pictureInPicture?this.exitPictureInPicture(e):this.enterPictureInPicture(e))}showCaptions(e){const t=this.getPlayer(null==e?void 0:e.target);if(!t)return;let n=t.state.textTracks,r=__privateGet(this,_prevTrackIndex);n[r]&&isTrackCaptionKind(n[r])||(r=-1),-1===r&&(r=n.findIndex(e=>isTrackCaptionKind(e)&&e.default)),-1===r&&(r=n.findIndex(e=>isTrackCaptionKind(e))),r>=0&&this.changeTextTrackMode(r,"showing",e),__privateSet(this,_prevTrackIndex,-1)}disableCaptions(e){const t=this.getPlayer(null==e?void 0:e.target);if(!t)return;const n=t.state.textTracks,r=t.state.textTrack;if(r){const t=n.indexOf(r);this.changeTextTrackMode(t,"disabled",e),__privateSet(this,_prevTrackIndex,t)}}toggleCaptions(e){const t=this.getPlayer(null==e?void 0:e.target);t&&(t.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(e,t){__privateMethod(this,_MediaRemoteControl_instances,dispatchRequest_fn).call(this,"media-user-loop-change-request",t,e)}}_target2=new WeakMap,_player=new WeakMap,_prevTrackIndex=new WeakMap,_logger=new WeakMap,_MediaRemoteControl_instances=new WeakSet,dispatchRequest_fn=function(e,t,n){var r,i;const s=new DOMEvent(e,{bubbles:!0,composed:!0,cancelable:!0,detail:n,trigger:t});let a=(null==t?void 0:t.target)||null;a&&a instanceof Component&&(a=a.el);const o=!a||a===document||a===window||a===document.body||(null==(r=__privateGet(this,_player))?void 0:r.el)&&a instanceof Node&&!__privateGet(this,_player).el.contains(a);a=o?__privateGet(this,_target2)??(null==(i=this.getPlayer())?void 0:i.el):a??__privateGet(this,_target2),__privateGet(this,_player)&&("media-play-request"!==e||__privateGet(this,_player).state.canLoad)?__privateGet(this,_player).canPlayQueue.enqueue(e,()=>null==a?void 0:a.dispatchEvent(s)):null==a||a.dispatchEvent(s)},noPlayerWarning_fn=function(e){};class LocalMediaStorage{constructor(){__publicField(this,"playerId","vds-player"),__publicField(this,"mediaId",null),__privateAdd(this,_data,{volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null}),__publicField(this,"saveTimeThrottled",functionThrottle(this.saveTime.bind(this),1e3))}async getVolume(){return __privateGet(this,_data).volume}async setVolume(e){__privateGet(this,_data).volume=e,this.save()}async getMuted(){return __privateGet(this,_data).muted}async setMuted(e){__privateGet(this,_data).muted=e,this.save()}async getTime(){return __privateGet(this,_data).time}async setTime(e,t){const n=e<0;__privateGet(this,_data).time=n?null:e,n||t?this.saveTime():this.saveTimeThrottled()}async getLang(){return __privateGet(this,_data).lang}async setLang(e){__privateGet(this,_data).lang=e,this.save()}async getCaptions(){return __privateGet(this,_data).captions}async setCaptions(e){__privateGet(this,_data).captions=e,this.save()}async getPlaybackRate(){return __privateGet(this,_data).rate}async setPlaybackRate(e){__privateGet(this,_data).rate=e,this.save()}async getAudioGain(){return __privateGet(this,_data).audioGain}async setAudioGain(e){__privateGet(this,_data).audioGain=e,this.save()}async getVideoQuality(){return __privateGet(this,_data).quality}async setVideoQuality(e){__privateGet(this,_data).quality=e,this.save()}onChange(e,t,n="vds-player"){const r=n?localStorage.getItem(n):null,i=t?localStorage.getItem(t):null;this.playerId=n,this.mediaId=t,__privateSet(this,_data,{volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...r?JSON.parse(r):{},time:i?+i:null})}save(){if(IS_SERVER||!this.playerId)return;const e=JSON.stringify({...__privateGet(this,_data),time:void 0});localStorage.setItem(this.playerId,e)}saveTime(){if(IS_SERVER||!this.mediaId)return;const e=(__privateGet(this,_data).time??0).toString();localStorage.setItem(this.mediaId,e)}}_data=new WeakMap;const ADD=Symbol(0),REMOVE=Symbol(0),RESET=Symbol(0),SELECT=Symbol(0),READONLY=Symbol(0),SET_READONLY=Symbol(0),ON_RESET=Symbol(0),ON_REMOVE=Symbol(0),ON_USER_SELECT=Symbol(0),ListSymbol={add:ADD,remove:REMOVE,reset:RESET,select:SELECT,readonly:READONLY,setReadonly:SET_READONLY,onReset:ON_RESET,onRemove:ON_REMOVE,onUserSelect:ON_USER_SELECT};class List extends EventsTarget{constructor(){super(...arguments),__publicField(this,"items",[]),__publicField(this,_k,!1)}get length(){return this.items.length}get readonly(){return this[ListSymbol.readonly]}indexOf(e){return this.items.indexOf(e)}getById(e){return""===e?null:this.items.find(t=>t.id===e)??null}toArray(){return[...this.items]}[(_k=ListSymbol.readonly,Symbol.iterator)](){return this.items.values()}[ListSymbol.add](e,t){const n=this.items.length;""+n in this||Object.defineProperty(this,n,{get(){return this.items[n]}}),this.items.includes(e)||(this.items.push(e),this.dispatchEvent(new DOMEvent("add",{detail:e,trigger:t})))}[ListSymbol.remove](e,t){var n;const r=this.items.indexOf(e);r>=0&&(null==(n=this[ListSymbol.onRemove])||n.call(this,e,t),this.items.splice(r,1),this.dispatchEvent(new DOMEvent("remove",{detail:e,trigger:t})))}[ListSymbol.reset](e){var t;for(const n of[...this.items])this[ListSymbol.remove](n,e);this.items=[],this[ListSymbol.setReadonly](!1,e),null==(t=this[ListSymbol.onReset])||t.call(this)}[ListSymbol.setReadonly](e,t){this[ListSymbol.readonly]!==e&&(this[ListSymbol.readonly]=e,this.dispatchEvent(new DOMEvent("readonly-change",{detail:e,trigger:t})))}}const SELECTED=Symbol(0);class SelectList extends List{get selected(){return this.items.find(e=>e.selected)??null}get selectedIndex(){return this.items.findIndex(e=>e.selected)}[ListSymbol.onRemove](e,t){this[ListSymbol.select](e,!1,t)}[ListSymbol.add](e,t){e[SELECTED]=!1,Object.defineProperty(e,"selected",{get(){return this[SELECTED]},set:t=>{var n;this.readonly||(null==(n=this[ListSymbol.onUserSelect])||n.call(this),this[ListSymbol.select](e,t))}}),super[ListSymbol.add](e,t)}[ListSymbol.select](e,t,n){if(t===(null==e?void 0:e[SELECTED]))return;const r=this.selected;e&&(e[SELECTED]=t);(t?r!==e:r===e)&&(r&&(r[SELECTED]=!1),this.dispatchEvent(new DOMEvent("change",{detail:{prev:r,current:this.selected},trigger:n})))}}class AudioTrackList extends SelectList{}function round(e,t=2){return Number(e.toFixed(t))}function getNumberOfDecimalPlaces(e){var t;return(null==(t=String(e).split(".")[1])?void 0:t.length)??0}function clampNumber(e,t,n){return Math.max(e,Math.min(n,t))}function isEventInside(e,t){const n=t.composedPath()[0];return isDOMNode(n)&&e.contains(n)}const rafJobs=new Set;if(!IS_SERVER){let e=function(){for(const e of rafJobs)try{e()}catch(e2){}window.requestAnimationFrame(e)};e()}function scheduleRafJob(e){return rafJobs.add(e),()=>rafJobs.delete(e)}function setAttributeIfEmpty(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}function setARIALabel(e,t){function n(){setAttribute(e,"aria-label",t())}e.hasAttribute("aria-label")||e.hasAttribute("data-no-label")||(isFunction(t)?IS_SERVER?n():effect(n):setAttribute(e,"aria-label",t))}function isElementVisible(e){const t=getComputedStyle(e);return"none"!==t.display&&parseInt(t.opacity)>0}function checkVisibility(e){return!!e&&("checkVisibility"in e?e.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}):isElementVisible(e))}function observeVisibility(e,t){return scheduleRafJob(()=>t(checkVisibility(e)))}function isElementParent(e,t,n){for(;t;){if(t===e)return!0;if(null==n?void 0:n(t))break;t=t.parentElement}return!1}function onPress(e,t){return new EventsController(e).add("pointerup",e=>{0!==e.button||e.defaultPrevented||t(e)}).add("keydown",e=>{isKeyboardClick(e)&&t(e)})}function isTouchPinchEvent(e){return isTouchEvent(e)&&(e.touches.length>1||e.changedTouches.length>1)}function autoPlacement(e,t,n,{offsetVarName:r,xOffset:i,yOffset:s,...a}){if(!e)return;const o=n.replace(" ","-").replace("-center","");if(setStyle(e,"visibility",t?null:"hidden"),!t)return;let l=n.includes("top");const c=e=>n.includes("left")?`calc(-1 * ${e})`:e,u=e=>l?`calc(-1 * ${e})`:e;return autoUpdate(t,e,()=>{computePosition(t,e,{placement:o,middleware:[...a.middleware??[],flip({fallbackAxisSideDirection:"start",crossAxis:!1}),shift()],...a}).then(({x:t,y:a,middlewareData:o})=>{var d;const h=!!(null==(d=o.flip)?void 0:d.index);l=n.includes(h?"bottom":"top"),e.setAttribute("data-placement",h?n.startsWith("top")?n.replace("top","bottom"):n.replace("bottom","top"):n),Object.assign(e.style,{top:`calc(${a+"px"} + ${u(s?s+"px":`var(--${r}-y-offset, 0px)`)})`,left:`calc(${t+"px"} + ${c(i?i+"px":`var(--${r}-x-offset, 0px)`)})`})})})}function hasAnimation(e){return"none"!==getComputedStyle(e).animationName}function isHTMLElement(e){return e instanceof HTMLElement}class NativeTextRenderer{constructor(){__privateAdd(this,_NativeTextRenderer_instances),__publicField(this,"priority",0),__privateAdd(this,_display,!0),__privateAdd(this,_video,null),__privateAdd(this,_track,null),__privateAdd(this,_tracks,new Set)}canRender(e,t){return!!t}attach(e){__privateSet(this,_video,e),e&&(e.textTracks.onchange=__privateMethod(this,_NativeTextRenderer_instances,onChange_fn).bind(this))}addTrack(e){__privateGet(this,_tracks).add(e),__privateMethod(this,_NativeTextRenderer_instances,attachTrack_fn).call(this,e)}removeTrack(e){var t,n;null==(n=null==(t=e[TextTrackSymbol.native])?void 0:t.remove)||n.call(t),e[TextTrackSymbol.native]=null,__privateGet(this,_tracks).delete(e)}changeTrack(e){const t=null==e?void 0:e[TextTrackSymbol.native];t&&"showing"!==t.track.mode&&(t.track.mode="showing"),__privateSet(this,_track,e)}setDisplay(e){__privateSet(this,_display,e),__privateMethod(this,_NativeTextRenderer_instances,onChange_fn).call(this)}detach(){__privateGet(this,_video)&&(__privateGet(this,_video).textTracks.onchange=null);for(const e of __privateGet(this,_tracks))this.removeTrack(e);__privateGet(this,_tracks).clear(),__privateSet(this,_video,null),__privateSet(this,_track,null)}}_display=new WeakMap,_video=new WeakMap,_track=new WeakMap,_tracks=new WeakMap,_NativeTextRenderer_instances=new WeakSet,attachTrack_fn=function(e){var t;if(!__privateGet(this,_video))return;const n=e[t=TextTrackSymbol.native]??(e[t]=__privateMethod(this,_NativeTextRenderer_instances,createTrackElement_fn).call(this,e));isHTMLElement(n)&&(__privateGet(this,_video).append(n),n.track.mode=n.default?"showing":"disabled")},createTrackElement_fn=function(e){const t=document.createElement("track"),n=e.default||"showing"===e.mode,r=e.src&&"vtt"===e.type;return t.id=e.id,t.src=r?e.src:"",t.label=e.label,t.kind=e.kind,t.default=n,e.language&&(t.srclang=e.language),n&&!r&&__privateMethod(this,_NativeTextRenderer_instances,copyCues_fn).call(this,e,t.track),t},copyCues_fn=function(e,t){var n;if(!(e.src&&"vtt"===e.type||(null==(n=t.cues)?void 0:n.length)))for(const r of e.cues)t.addCue(r)},onChange_fn=function(e){for(const t of __privateGet(this,_tracks)){const n=t[TextTrackSymbol.native];if(!n)continue;if(!__privateGet(this,_display)){n.track.mode=n.managed?"hidden":"disabled";continue}const r="showing"===n.track.mode;r&&__privateMethod(this,_NativeTextRenderer_instances,copyCues_fn).call(this,t,n.track),t.setMode(r?"showing":"disabled",e)}};class TextRenderers{constructor(e){__privateAdd(this,_TextRenderers_instances),__privateAdd(this,_video2,null),__privateAdd(this,_textTracks),__privateAdd(this,_renderers,[]),__privateAdd(this,_media),__privateAdd(this,_nativeDisplay,!1),__privateAdd(this,_nativeRenderer,null),__privateAdd(this,_customRenderer,null),__privateSet(this,_media,e);const t=e.textTracks;__privateSet(this,_textTracks,t),effect(__privateMethod(this,_TextRenderers_instances,watchControls_fn).bind(this)),onDispose(__privateMethod(this,_TextRenderers_instances,detach_fn).bind(this)),new EventsController(t).add("add",__privateMethod(this,_TextRenderers_instances,onAddTrack_fn).bind(this)).add("remove",__privateMethod(this,_TextRenderers_instances,onRemoveTrack_fn).bind(this)).add("mode-change",__privateMethod(this,_TextRenderers_instances,update_fn).bind(this))}add(e){__privateGet(this,_renderers).push(e),untrack(__privateMethod(this,_TextRenderers_instances,update_fn).bind(this))}remove(e){e.detach(),__privateGet(this,_renderers).splice(__privateGet(this,_renderers).indexOf(e),1),untrack(__privateMethod(this,_TextRenderers_instances,update_fn).bind(this))}attachVideo(e){requestAnimationFrame(()=>{if(__privateSet(this,_video2,e),e){__privateSet(this,_nativeRenderer,new NativeTextRenderer),__privateGet(this,_nativeRenderer).attach(e);for(const e of __privateGet(this,_textTracks))__privateMethod(this,_TextRenderers_instances,addNativeTrack_fn).call(this,e)}__privateMethod(this,_TextRenderers_instances,update_fn).call(this)})}}_video2=new WeakMap,_textTracks=new WeakMap,_renderers=new WeakMap,_media=new WeakMap,_nativeDisplay=new WeakMap,_nativeRenderer=new WeakMap,_customRenderer=new WeakMap,_TextRenderers_instances=new WeakSet,watchControls_fn=function(){const{nativeControls:e}=__privateGet(this,_media).$state;__privateSet(this,_nativeDisplay,e()),__privateMethod(this,_TextRenderers_instances,update_fn).call(this)},addNativeTrack_fn=function(e){var t;isTrackCaptionKind(e)&&(null==(t=__privateGet(this,_nativeRenderer))||t.addTrack(e))},removeNativeTrack_fn=function(e){var t;isTrackCaptionKind(e)&&(null==(t=__privateGet(this,_nativeRenderer))||t.removeTrack(e))},onAddTrack_fn=function(e){__privateMethod(this,_TextRenderers_instances,addNativeTrack_fn).call(this,e.detail)},onRemoveTrack_fn=function(e){__privateMethod(this,_TextRenderers_instances,removeNativeTrack_fn).call(this,e.detail)},update_fn=function(){var e,t,n,r,i,s,a;const o=__privateGet(this,_textTracks).selected;if(__privateGet(this,_video2)&&(__privateGet(this,_nativeDisplay)||(null==o?void 0:o[TextTrackSymbol.nativeHLS])))return null==(e=__privateGet(this,_customRenderer))||e.changeTrack(null),null==(t=__privateGet(this,_nativeRenderer))||t.setDisplay(!0),void(null==(n=__privateGet(this,_nativeRenderer))||n.changeTrack(o));if(null==(r=__privateGet(this,_nativeRenderer))||r.setDisplay(!1),null==(i=__privateGet(this,_nativeRenderer))||i.changeTrack(null),!o)return void(null==(s=__privateGet(this,_customRenderer))||s.changeTrack(null));const l=__privateGet(this,_renderers).sort((e,t)=>e.priority-t.priority).find(e=>e.canRender(o,__privateGet(this,_video2)));__privateGet(this,_customRenderer)!==l&&(null==(a=__privateGet(this,_customRenderer))||a.detach(),null==l||l.attach(__privateGet(this,_video2)),__privateSet(this,_customRenderer,l??null)),null==l||l.changeTrack(o)},detach_fn=function(){var e,t;null==(e=__privateGet(this,_nativeRenderer))||e.detach(),__privateSet(this,_nativeRenderer,null),null==(t=__privateGet(this,_customRenderer))||t.detach(),__privateSet(this,_customRenderer,null)};class TextTrackList extends List{constructor(){super(),__privateAdd(this,_TextTrackList_instances),__privateAdd(this,_canLoad2,!1),__privateAdd(this,_defaults,{}),__privateAdd(this,_storage,null),__privateAdd(this,_preferredLang,null),__publicField(this,_l),__privateAdd(this,_selectTracks,functionDebounce(async()=>{var e;if(!__privateGet(this,_canLoad2))return;!__privateGet(this,_preferredLang)&&__privateGet(this,_storage)&&__privateSet(this,_preferredLang,await __privateGet(this,_storage).getLang());const t=await(null==(e=__privateGet(this,_storage))?void 0:e.getCaptions()),n=[["captions","subtitles"],"chapters","descriptions","metadata"];for(const r of n){const e=this.getByKind(r);if(e.find(e=>"showing"===e.mode))continue;const n=__privateGet(this,_preferredLang)?e.find(e=>e.language===__privateGet(this,_preferredLang)):null,i=isArray$1(r)?__privateGet(this,_defaults)[r.find(e=>__privateGet(this,_defaults)[e])||""]:__privateGet(this,_defaults)[r],s=n??i,a=s&&isTrackCaptionKind(s);!s||a&&!1===t||(s.mode="showing",a&&__privateMethod(this,_TextTrackList_instances,saveCaptionsTrack_fn).call(this,s))}},300)),__privateAdd(this,_pendingRemoval,null),__privateAdd(this,_onTrackModeChangeBind,__privateMethod(this,_TextTrackList_instances,onTrackModeChange_fn).bind(this))}get selected(){return this.items.find(e=>"showing"===e.mode&&isTrackCaptionKind(e))??null}get selectedIndex(){const e=this.selected;return e?this.indexOf(e):-1}get preferredLang(){return __privateGet(this,_preferredLang)}set preferredLang(e){__privateSet(this,_preferredLang,e),__privateMethod(this,_TextTrackList_instances,saveLang_fn).call(this,e)}add(e,t){const n=e instanceof TextTrack?e:new TextTrack(e),r="captions"===e.kind||"subtitles"===e.kind?"captions":e.kind;return __privateGet(this,_defaults)[r]&&e.default&&delete e.default,n.addEventListener("mode-change",__privateGet(this,_onTrackModeChangeBind)),this[ListSymbol.add](n,t),n[TextTrackSymbol.crossOrigin]=this[TextTrackSymbol.crossOrigin],__privateGet(this,_canLoad2)&&n[TextTrackSymbol.canLoad](),e.default&&(__privateGet(this,_defaults)[r]=n),__privateGet(this,_selectTracks).call(this),this}remove(e,t){if(__privateSet(this,_pendingRemoval,e),this.items.includes(e))return e===__privateGet(this,_defaults)[e.kind]&&delete __privateGet(this,_defaults)[e.kind],e.mode="disabled",e[TextTrackSymbol.onModeChange]=null,e.removeEventListener("mode-change",__privateGet(this,_onTrackModeChangeBind)),this[ListSymbol.remove](e,t),__privateSet(this,_pendingRemoval,null),this}clear(e){for(const t of[...this.items])this.remove(t,e);return this}getByKind(e){const t=Array.isArray(e)?e:[e];return this.items.filter(e=>t.includes(e.kind))}[(_l=TextTrackSymbol.crossOrigin,TextTrackSymbol.canLoad)](){if(!__privateGet(this,_canLoad2)){for(const e of this.items)e[TextTrackSymbol.canLoad]();__privateSet(this,_canLoad2,!0),__privateGet(this,_selectTracks).call(this)}}setStorage(e){__privateSet(this,_storage,e)}}_canLoad2=new WeakMap,_defaults=new WeakMap,_storage=new WeakMap,_preferredLang=new WeakMap,_selectTracks=new WeakMap,_pendingRemoval=new WeakMap,_onTrackModeChangeBind=new WeakMap,_TextTrackList_instances=new WeakSet,onTrackModeChange_fn=function(e){const t=e.detail;if(__privateGet(this,_storage)&&isTrackCaptionKind(t)&&t!==__privateGet(this,_pendingRemoval)&&__privateMethod(this,_TextTrackList_instances,saveCaptionsTrack_fn).call(this,t),"showing"===t.mode){const e=isTrackCaptionKind(t)?["captions","subtitles"]:[t.kind];for(const n of this.items)"showing"===n.mode&&n!=t&&e.includes(n.kind)&&(n.mode="disabled")}this.dispatchEvent(new DOMEvent("mode-change",{detail:e.detail,trigger:e}))},saveCaptionsTrack_fn=function(e){var t,n;"disabled"!==e.mode&&__privateMethod(this,_TextTrackList_instances,saveLang_fn).call(this,e.language),null==(n=null==(t=__privateGet(this,_storage))?void 0:t.setCaptions)||n.call(t,"showing"===e.mode)},saveLang_fn=function(e){var t,n;null==(n=null==(t=__privateGet(this,_storage))?void 0:t.setLang)||n.call(t,__privateSet(this,_preferredLang,e))};const SET_AUTO=Symbol(0),ENABLE_AUTO=Symbol(0),QualitySymbol={setAuto:SET_AUTO,enableAuto:ENABLE_AUTO};class VideoQualityList extends SelectList{constructor(){super(...arguments),__privateAdd(this,_auto,!1),__publicField(this,"switch","current"),__publicField(this,_m)}get auto(){return __privateGet(this,_auto)||this.readonly}[(_m=QualitySymbol.enableAuto,ListSymbol.onUserSelect)](){this[QualitySymbol.setAuto](!1)}[ListSymbol.onReset](e){this[QualitySymbol.enableAuto]=void 0,this[QualitySymbol.setAuto](!1,e)}autoSelect(e){var t;this.readonly||__privateGet(this,_auto)||!this[QualitySymbol.enableAuto]||(null==(t=this[QualitySymbol.enableAuto])||t.call(this,e),this[QualitySymbol.setAuto](!0,e))}getBySrc(e){return this.items.find(t=>t.src===e)}[QualitySymbol.setAuto](e,t){__privateGet(this,_auto)!==e&&(__privateSet(this,_auto,e),this.dispatchEvent(new DOMEvent("auto-change",{detail:e,trigger:t})))}}function isHLSProvider(e){return"HLS"===(null==e?void 0:e.$$PROVIDER_TYPE)}function isHTMLAudioElement(e){return!IS_SERVER&&e instanceof HTMLAudioElement}function isHTMLVideoElement(e){return!IS_SERVER&&e instanceof HTMLVideoElement}function isHTMLMediaElement(e){return isHTMLAudioElement(e)||isHTMLVideoElement(e)}_auto=new WeakMap;class MediaPlayerController extends ViewController{}const MEDIA_KEY_SHORTCUTS={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},MODIFIER_KEYS=new Set(["Shift","Alt","Meta","Ctrl"]),BUTTON_SELECTORS='button, [role="button"]',IGNORE_SELECTORS='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';class MediaKeyboardController extends MediaPlayerController{constructor(e){super(),__privateAdd(this,_MediaKeyboardController_instances),__privateAdd(this,_media2),__privateAdd(this,_seekTotal),__privateAdd(this,_timeSlider,null),__privateSet(this,_media2,e)}onConnect(){effect(__privateMethod(this,_MediaKeyboardController_instances,onTargetChange_fn).bind(this))}}_media2=new WeakMap,_MediaKeyboardController_instances=new WeakSet,onTargetChange_fn=function(){const{keyDisabled:e,keyTarget:t}=this.$props;if(e())return;const n="player"===t()?this.el:document,r=signal(!1);n===this.el?new EventsController(this.el).add("focusin",()=>r.set(!0)).add("focusout",e=>{this.el.contains(e.target)||r.set(!1)}):(peek(r)||r.set(document.querySelector("[data-media-player]")===this.el),listenEvent(document,"focusin",e=>{const t=e.composedPath().find(e=>e instanceof Element&&"media-player"===e.localName);void 0!==t&&r.set(this.el===t)})),effect(()=>{r()&&new EventsController(n).add("keyup",__privateMethod(this,_MediaKeyboardController_instances,onKeyUp_fn).bind(this)).add("keydown",__privateMethod(this,_MediaKeyboardController_instances,onKeyDown_fn).bind(this)).add("keydown",__privateMethod(this,_MediaKeyboardController_instances,onPreventVideoKeys_fn).bind(this),{capture:!0})})},onKeyUp_fn=function(e){var t,n;const r=document.activeElement;if(!e.key||!this.$state.canSeek()||(null==r?void 0:r.matches(IGNORE_SELECTORS)))return;let{method:i,value:s}=__privateMethod(this,_MediaKeyboardController_instances,getMatchingMethod_fn).call(this,e);if(!isString(s)&&!isArray$1(s))return null==(t=null==s?void 0:s.onKeyUp)||t.call(s,{event:e,player:__privateGet(this,_media2).player,remote:__privateGet(this,_media2).remote}),void(null==(n=null==s?void 0:s.callback)||n.call(s,e,__privateGet(this,_media2).remote));if((null==i?void 0:i.startsWith("seek"))&&(e.preventDefault(),e.stopPropagation(),__privateGet(this,_timeSlider)?(__privateMethod(this,_MediaKeyboardController_instances,forwardTimeKeyboardEvent_fn).call(this,e,"seekForward"===i),__privateSet(this,_timeSlider,null)):(__privateGet(this,_media2).remote.seek(__privateGet(this,_seekTotal),e),__privateSet(this,_seekTotal,void 0))),null==i?void 0:i.startsWith("volume")){const t=this.el.querySelector("[data-media-volume-slider]");null==t||t.dispatchEvent(new KeyboardEvent("keyup",{key:"volumeUp"===i?"Up":"Down",shiftKey:e.shiftKey,trigger:e}))}},onKeyDown_fn=function(e){var t,n,r,i;if(!e.key||MODIFIER_KEYS.has(e.key))return;const s=document.activeElement;if((null==s?void 0:s.matches(IGNORE_SELECTORS))||isKeyboardClick(e)&&(null==s?void 0:s.matches(BUTTON_SELECTORS)))return;let{method:a,value:o}=__privateMethod(this,_MediaKeyboardController_instances,getMatchingMethod_fn).call(this,e),l=!e.metaKey&&/^[0-9]$/.test(e.key);if(!isString(o)&&!isArray$1(o)&&!l)return null==(t=null==o?void 0:o.onKeyDown)||t.call(o,{event:e,player:__privateGet(this,_media2).player,remote:__privateGet(this,_media2).remote}),void(null==(n=null==o?void 0:o.callback)||n.call(o,e,__privateGet(this,_media2).remote));if(!a&&l&&!modifierKeyPressed(e))return e.preventDefault(),e.stopPropagation(),void __privateGet(this,_media2).remote.seek(this.$state.duration()/10*Number(e.key),e);if(a){switch(e.preventDefault(),e.stopPropagation(),a){case"seekForward":case"seekBackward":__privateMethod(this,_MediaKeyboardController_instances,seeking_fn).call(this,e,a,"seekForward"===a);break;case"volumeUp":case"volumeDown":const t=this.el.querySelector("[data-media-volume-slider]");if(t)t.dispatchEvent(new KeyboardEvent("keydown",{key:"volumeUp"===a?"Up":"Down",shiftKey:e.shiftKey,trigger:e}));else{const t=e.shiftKey?.1:.05;__privateGet(this,_media2).remote.changeVolume(this.$state.volume()+("volumeUp"===a?+t:-t),e)}break;case"toggleFullscreen":__privateGet(this,_media2).remote.toggleFullscreen("prefer-media",e);break;case"speedUp":case"slowDown":const n=this.$state.playbackRate();__privateGet(this,_media2).remote.changePlaybackRate(Math.max(.25,Math.min(2,n+("speedUp"===a?.25:-.25))),e);break;default:null==(i=(r=__privateGet(this,_media2).remote)[a])||i.call(r,e)}this.$state.lastKeyboardAction.set({action:a,event:e})}},onPreventVideoKeys_fn=function(e){isHTMLMediaElement(e.target)&&__privateMethod(this,_MediaKeyboardController_instances,getMatchingMethod_fn).call(this,e).method&&e.preventDefault()},getMatchingMethod_fn=function(e){const t={...this.$props.keyShortcuts(),...__privateGet(this,_media2).ariaKeys},n=Object.keys(t).find(n=>{var r;const i=t[n],s=isArray$1(i)?i.join(" "):isString(i)?i:null==i?void 0:i.keys,a=null==(r=isArray$1(s)?s:null==s?void 0:s.split(" "))?void 0:r.map(e=>replaceSymbolKeys(e).replace(/Control/g,"Ctrl").split("+"));return null==a?void 0:a.some(t=>{const n=new Set(t.filter(e=>MODIFIER_KEYS.has(e)));for(const r of MODIFIER_KEYS){const t=r.toLowerCase()+"Key";if(!n.has(r)&&e[t])return!1}return t.every(t=>MODIFIER_KEYS.has(t)?e[t.toLowerCase()+"Key"]:e.key===t.replace("Space"," "))})});return{method:n,value:n?t[n]:null}},_seekTotal=new WeakMap,calcSeekAmount_fn=function(e,t){const n=e.shiftKey?10:5;return __privateSet(this,_seekTotal,Math.max(0,Math.min((__privateGet(this,_seekTotal)??this.$state.currentTime())+("seekForward"===t?+n:-n),this.$state.duration())))},_timeSlider=new WeakMap,forwardTimeKeyboardEvent_fn=function(e,t){var n;null==(n=__privateGet(this,_timeSlider))||n.dispatchEvent(new KeyboardEvent(e.type,{key:t?"Right":"Left",shiftKey:e.shiftKey,trigger:e}))},seeking_fn=function(e,t,n){this.$state.canSeek()&&(__privateGet(this,_timeSlider)||__privateSet(this,_timeSlider,this.el.querySelector("[data-media-time-slider]")),__privateGet(this,_timeSlider)?__privateMethod(this,_MediaKeyboardController_instances,forwardTimeKeyboardEvent_fn).call(this,e,n):__privateGet(this,_media2).remote.seeking(__privateMethod(this,_MediaKeyboardController_instances,calcSeekAmount_fn).call(this,e,t),e))};const SYMBOL_KEY_MAP=["!","@","#","$","%","^","&","*","(",")"];function replaceSymbolKeys(e){return e.replace(/Shift\+(\d)/g,(e,t)=>SYMBOL_KEY_MAP[t-1])}function modifierKeyPressed(e){for(const t of MODIFIER_KEYS)if(e[t.toLowerCase()+"Key"])return!0;return!1}class ARIAKeyShortcuts extends ViewController{constructor(e){super(),__privateAdd(this,_shortcut),__privateSet(this,_shortcut,e)}onAttach(e){const{$props:t,ariaKeys:n}=useMediaContext$1(),r=e.getAttribute("aria-keyshortcuts");if(r)return n[__privateGet(this,_shortcut)]=r,void(IS_SERVER||onDispose(()=>{delete n[__privateGet(this,_shortcut)]}));const i=t.keyShortcuts()[__privateGet(this,_shortcut)];if(i){const t=isArray$1(i)?i.join(" "):isString(i)?i:null==i?void 0:i.keys;e.setAttribute("aria-keyshortcuts",isArray$1(t)?t.join(" "):t)}}}_shortcut=new WeakMap;class MediaControls extends MediaPlayerController{constructor(){super(...arguments),__privateAdd(this,_MediaControls_instances),__privateAdd(this,_idleTimer,-2),__privateAdd(this,_pausedTracking,!1),__privateAdd(this,_hideOnMouseLeave,signal(!1)),__privateAdd(this,_isMouseOutside,signal(!1)),__privateAdd(this,_focusedItem,null),__privateAdd(this,_canIdle,signal(!0)),__publicField(this,"defaultDelay",2e3)}get canIdle(){return __privateGet(this,_canIdle).call(this)}set canIdle(e){__privateGet(this,_canIdle).set(e)}get hideOnMouseLeave(){const{hideControlsOnMouseLeave:e}=this.$props;return __privateGet(this,_hideOnMouseLeave).call(this)||e()}set hideOnMouseLeave(e){__privateGet(this,_hideOnMouseLeave).set(e)}get showing(){return this.$state.controlsVisible()}show(e=0,t){__privateMethod(this,_MediaControls_instances,clearIdleTimer_fn).call(this),__privateGet(this,_pausedTracking)||__privateMethod(this,_MediaControls_instances,changeVisibility_fn).call(this,!0,e,t)}hide(e=this.defaultDelay,t){__privateMethod(this,_MediaControls_instances,clearIdleTimer_fn).call(this),__privateGet(this,_pausedTracking)||__privateMethod(this,_MediaControls_instances,changeVisibility_fn).call(this,!1,e,t)}pause(e){__privateSet(this,_pausedTracking,!0),__privateMethod(this,_MediaControls_instances,clearIdleTimer_fn).call(this),__privateMethod(this,_MediaControls_instances,changeVisibility_fn).call(this,!0,0,e)}resume(e){__privateSet(this,_pausedTracking,!1),this.$state.paused()||__privateMethod(this,_MediaControls_instances,changeVisibility_fn).call(this,!1,this.defaultDelay,e)}onConnect(){effect(__privateMethod(this,_MediaControls_instances,init_fn).bind(this))}}_idleTimer=new WeakMap,_pausedTracking=new WeakMap,_hideOnMouseLeave=new WeakMap,_isMouseOutside=new WeakMap,_focusedItem=new WeakMap,_canIdle=new WeakMap,_MediaControls_instances=new WeakSet,init_fn=function(){const{viewType:e}=this.$state;if(!this.el||!__privateGet(this,_canIdle).call(this))return;if("audio"===e())return void this.show();effect(__privateMethod(this,_MediaControls_instances,watchMouse_fn).bind(this)),effect(__privateMethod(this,_MediaControls_instances,watchPaused_fn).bind(this));const t=__privateMethod(this,_MediaControls_instances,onPlay_fn).bind(this),n=__privateMethod(this,_MediaControls_instances,onPause_fn).bind(this),r=__privateMethod(this,_MediaControls_instances,onEnd_fn).bind(this);new EventsController(this.el).add("can-play",e=>this.show(0,e)).add("play",t).add("pause",n).add("end",r).add("auto-play-fail",n)},watchMouse_fn=function(){if(!this.el)return;const{started:e,pointer:t,paused:n}=this.$state;if(!e()||"fine"!==t())return;const r=new EventsController(this.el),i=this.hideOnMouseLeave;i&&__privateGet(this,_isMouseOutside).call(this)||effect(()=>{n()||r.add("pointermove",__privateMethod(this,_MediaControls_instances,onStopIdle_fn).bind(this))}),i&&r.add("mouseenter",__privateMethod(this,_MediaControls_instances,onMouseEnter_fn).bind(this)).add("mouseleave",__privateMethod(this,_MediaControls_instances,onMouseLeave_fn).bind(this))},watchPaused_fn=function(){const{paused:e,started:t,autoPlayError:n}=this.$state;if(e()||n()&&!t())return;const r=__privateMethod(this,_MediaControls_instances,onStopIdle_fn).bind(this);effect(()=>{if(!this.el)return;const e="coarse"===this.$state.pointer(),t=new EventsController(this.el),n=[e?"touchend":"pointerup","keydown"];for(const i of n)t.add(i,r,{passive:!1})})},onPlay_fn=function(e){e.triggers.hasType("ended")||(this.show(0,e),this.hide(void 0,e))},onPause_fn=function(e){this.show(0,e)},onEnd_fn=function(e){const{loop:t}=this.$state;t()&&this.hide(0,e)},onMouseEnter_fn=function(e){__privateGet(this,_isMouseOutside).set(!1),this.show(0,e),this.hide(void 0,e)},onMouseLeave_fn=function(e){__privateGet(this,_isMouseOutside).set(!0),this.hide(0,e)},clearIdleTimer_fn=function(){window.clearTimeout(__privateGet(this,_idleTimer)),__privateSet(this,_idleTimer,-1)},onStopIdle_fn=function(e){var t;e.MEDIA_GESTURE||__privateGet(this,_pausedTracking)||isTouchPinchEvent(e)||(isKeyboardEvent(e)&&("Escape"===e.key?(null==(t=this.el)||t.focus(),__privateSet(this,_focusedItem,null)):__privateGet(this,_focusedItem)&&(e.preventDefault(),requestAnimationFrame(()=>{var e;null==(e=__privateGet(this,_focusedItem))||e.focus(),__privateSet(this,_focusedItem,null)}))),this.show(0,e),this.hide(this.defaultDelay,e))},changeVisibility_fn=function(e,t,n){0!==t?__privateSet(this,_idleTimer,window.setTimeout(()=>{this.scope&&__privateMethod(this,_MediaControls_instances,onChange_fn2).call(this,e&&!__privateGet(this,_pausedTracking),n)},t)):__privateMethod(this,_MediaControls_instances,onChange_fn2).call(this,e,n)},onChange_fn2=function(e,t){var n;this.$state.controlsVisible()!==e&&(this.$state.controlsVisible.set(e),!e&&document.activeElement&&(null==(n=this.el)?void 0:n.contains(document.activeElement))&&(__privateSet(this,_focusedItem,document.activeElement),requestAnimationFrame(()=>{var e;null==(e=this.el)||e.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:e,trigger:t}))};const CAN_FULLSCREEN=fscreen.fullscreenEnabled;class FullscreenController extends ViewController{constructor(){super(...arguments),__privateAdd(this,_FullscreenController_instances),__privateAdd(this,_listening,!1),__privateAdd(this,_active,!1)}get active(){return __privateGet(this,_active)}get supported(){return CAN_FULLSCREEN}onConnect(){new EventsController(fscreen).add("fullscreenchange",__privateMethod(this,_FullscreenController_instances,onChange_fn3).bind(this)).add("fullscreenerror",__privateMethod(this,_FullscreenController_instances,onError_fn).bind(this)),onDispose(__privateMethod(this,_FullscreenController_instances,onDisconnect_fn).bind(this))}async enter(){try{if(__privateSet(this,_listening,!0),!this.el||isFullscreen(this.el))return;return assertFullscreenAPI(),fscreen.requestFullscreen(this.el)}catch(e){throw __privateSet(this,_listening,!1),e}}async exit(){if(this.el&&isFullscreen(this.el))return assertFullscreenAPI(),fscreen.exitFullscreen()}}function isFullscreen(e){if(fscreen.fullscreenElement===e)return!0;try{return e.matches(fscreen.fullscreenPseudoClass)}catch(t){return!1}}function assertFullscreenAPI(){if(!CAN_FULLSCREEN)throw Error("[vidstack] no fullscreen API")}_listening=new WeakMap,_active=new WeakMap,_FullscreenController_instances=new WeakSet,onDisconnect_fn=async function(){CAN_FULLSCREEN&&await this.exit()},onChange_fn3=function(e){const t=isFullscreen(this.el);t!==__privateGet(this,_active)&&(t||__privateSet(this,_listening,!1),__privateSet(this,_active,t),this.dispatch("fullscreen-change",{detail:t,trigger:e}))},onError_fn=function(e){__privateGet(this,_listening)&&(this.dispatch("fullscreen-error",{detail:null,trigger:e}),__privateSet(this,_listening,!1))};const _ScreenOrientationController=class e extends ViewController{constructor(){super(...arguments),__privateAdd(this,_ScreenOrientationController_instances),__privateAdd(this,_type,signal(__privateMethod(this,_ScreenOrientationController_instances,getScreenOrientation_fn).call(this))),__privateAdd(this,_locked,signal(!1)),__privateAdd(this,_currentLock)}get type(){return __privateGet(this,_type).call(this)}get locked(){return __privateGet(this,_locked).call(this)}get portrait(){return __privateGet(this,_type).call(this).startsWith("portrait")}get landscape(){return __privateGet(this,_type).call(this).startsWith("landscape")}get supported(){return e.supported}onConnect(){if(this.supported)listenEvent(screen.orientation,"change",__privateMethod(this,_ScreenOrientationController_instances,onOrientationChange_fn).bind(this));else{const e=window.matchMedia("(orientation: landscape)");e.onchange=__privateMethod(this,_ScreenOrientationController_instances,onOrientationChange_fn).bind(this),onDispose(()=>e.onchange=null)}onDispose(__privateMethod(this,_ScreenOrientationController_instances,onDisconnect_fn2).bind(this))}async lock(e){peek(__privateGet(this,_locked))||__privateGet(this,_currentLock)===e||(__privateMethod(this,_ScreenOrientationController_instances,assertScreenOrientationAPI_fn).call(this),await screen.orientation.lock(e),__privateGet(this,_locked).set(!0),__privateSet(this,_currentLock,e))}async unlock(){peek(__privateGet(this,_locked))&&(__privateMethod(this,_ScreenOrientationController_instances,assertScreenOrientationAPI_fn).call(this),__privateSet(this,_currentLock,void 0),await screen.orientation.unlock(),__privateGet(this,_locked).set(!1))}};_type=new WeakMap,_locked=new WeakMap,_currentLock=new WeakMap,_ScreenOrientationController_instances=new WeakSet,onDisconnect_fn2=async function(){this.supported&&__privateGet(this,_locked).call(this)&&await this.unlock()},onOrientationChange_fn=function(e){__privateGet(this,_type).set(__privateMethod(this,_ScreenOrientationController_instances,getScreenOrientation_fn).call(this)),this.dispatch("orientation-change",{detail:{orientation:peek(__privateGet(this,_type)),lock:__privateGet(this,_currentLock)},trigger:e})},assertScreenOrientationAPI_fn=function(){if(!this.supported)throw Error("[vidstack] no orientation API")},getScreenOrientation_fn=function(){return IS_SERVER?"portrait-primary":this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"},__publicField(_ScreenOrientationController,"supported",canOrientScreen());let ScreenOrientationController=_ScreenOrientationController;class AudioProviderLoader{constructor(){__publicField(this,"name","audio"),__publicField(this,"target")}canPlay(e){return!!isAudioSrc(e)&&(IS_SERVER||!isString(e.src)||"?"===e.type||canPlayAudioType(this.target,e.type))}mediaType(){return"audio"}async load(e){if(IS_SERVER)throw Error("[vidstack] can not load audio provider server-side");return new((await __vitePreload(async()=>{const{AudioProvider:e}=await import("./vidstack-R_ot4AhB-aJlMdFa2.js");return{AudioProvider:e}},__vite__mapDeps([0,1,2,3]))).AudioProvider)(this.target,e)}}class VideoProviderLoader{constructor(){__publicField(this,"name","video"),__publicField(this,"target")}canPlay(e){return!!isVideoSrc(e)&&(IS_SERVER||!isString(e.src)||"?"===e.type||canPlayVideoType(this.target,e.type))}mediaType(){return"video"}async load(e){if(IS_SERVER)throw Error("[vidstack] can not load video provider server-side");return new((await Promise.resolve().then(function(){return provider$1})).VideoProvider)(this.target,e)}}const _HLSProviderLoader=class e extends VideoProviderLoader{constructor(){super(...arguments),__publicField(this,"name","hls")}canPlay(t){return e.supported&&isHLSSrc(t)}async load(e){if(IS_SERVER)throw Error("[vidstack] can not load hls provider server-side");return new((await __vitePreload(async()=>{const{HLSProvider:e}=await import("./vidstack-BN7_0WI--Hvi_FJp9.js");return{HLSProvider:e}},__vite__mapDeps([4,1,2,3]))).HLSProvider)(this.target,e)}};__publicField(_HLSProviderLoader,"supported",isHLSSupported());let HLSProviderLoader=_HLSProviderLoader,audioContext=null,gainNodes=[],elAudioSources=[];function getOrCreateAudioCtx(){return audioContext??(audioContext=new AudioContext)}function createGainNode(){const e=getOrCreateAudioCtx(),t=e.createGain();return t.connect(e.destination),gainNodes.push(t),t}function createElementSource(e,t){const n=getOrCreateAudioCtx().createMediaElementSource(e);return t&&n.connect(t),elAudioSources.push(n),n}function destroyGainNode(e){const t=gainNodes.indexOf(e);-1!==t&&(gainNodes.splice(t,1),e.disconnect(),freeAudioCtxWhenAllResourcesFreed())}function destroyElementSource(e){const t=elAudioSources.indexOf(e);-1!==t&&(elAudioSources.splice(t,1),e.disconnect(),freeAudioCtxWhenAllResourcesFreed())}function freeAudioCtxWhenAllResourcesFreed(){audioContext&&0===gainNodes.length&&0===elAudioSources.length&&audioContext.close().then(()=>{audioContext=null})}class AudioGain{constructor(e,t){__privateAdd(this,_AudioGain_instances),__privateAdd(this,_media3),__privateAdd(this,_onChange),__privateAdd(this,_gainNode,null),__privateAdd(this,_srcAudioNode,null),__privateSet(this,_media3,e),__privateSet(this,_onChange,t)}get currentGain(){var e,t;return(null==(t=null==(e=__privateGet(this,_gainNode))?void 0:e.gain)?void 0:t.value)??null}get supported(){return!0}setGain(e){const t=this.currentGain;e!==this.currentGain&&(1!==e||1===t?(__privateGet(this,_gainNode)||(__privateSet(this,_gainNode,createGainNode()),__privateGet(this,_srcAudioNode)&&__privateGet(this,_srcAudioNode).connect(__privateGet(this,_gainNode))),__privateGet(this,_srcAudioNode)||__privateSet(this,_srcAudioNode,createElementSource(__privateGet(this,_media3),__privateGet(this,_gainNode))),__privateGet(this,_gainNode).gain.value=e,__privateGet(this,_onChange).call(this,e)):this.removeGain())}removeGain(){__privateGet(this,_gainNode)&&(__privateGet(this,_srcAudioNode)&&__privateGet(this,_srcAudioNode).connect(getOrCreateAudioCtx().destination),__privateMethod(this,_AudioGain_instances,destroyGainNode_fn).call(this),__privateGet(this,_onChange).call(this,null))}destroy(){__privateMethod(this,_AudioGain_instances,destroySrcNode_fn).call(this),__privateMethod(this,_AudioGain_instances,destroyGainNode_fn).call(this)}}_media3=new WeakMap,_onChange=new WeakMap,_gainNode=new WeakMap,_srcAudioNode=new WeakMap,_AudioGain_instances=new WeakSet,destroySrcNode_fn=function(){if(__privateGet(this,_srcAudioNode))try{destroyElementSource(__privateGet(this,_srcAudioNode))}catch(e2){}finally{__privateSet(this,_srcAudioNode,null)}},destroyGainNode_fn=function(){if(__privateGet(this,_gainNode))try{destroyGainNode(__privateGet(this,_gainNode))}catch(e2){}finally{__privateSet(this,_gainNode,null)}};const PAGE_EVENTS=["focus","blur","visibilitychange","pageshow","pagehide"];class PageVisibility{constructor(){__privateAdd(this,_PageVisibility_instances),__privateAdd(this,_state,signal(determinePageState())),__privateAdd(this,_visibility,signal(IS_SERVER?"visible":document.visibilityState)),__privateAdd(this,_safariBeforeUnloadTimeout)}connect(){const e=new EventsController(window),t=__privateMethod(this,_PageVisibility_instances,handlePageEvent_fn).bind(this);for(const n of PAGE_EVENTS)e.add(n,t);IS_SAFARI&&e.add("beforeunload",e=>{__privateSet(this,_safariBeforeUnloadTimeout,setTimeout(()=>{e.defaultPrevented||e.returnValue.length>0||(__privateGet(this,_state).set("hidden"),__privateGet(this,_visibility).set("hidden"))},0))})}get pageState(){return __privateGet(this,_state).call(this)}get visibility(){return __privateGet(this,_visibility).call(this)}}function determinePageState(e){return IS_SERVER||"blur"===(null==e?void 0:e.type)||"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}_state=new WeakMap,_visibility=new WeakMap,_safariBeforeUnloadTimeout=new WeakMap,_PageVisibility_instances=new WeakSet,handlePageEvent_fn=function(e){IS_SAFARI&&window.clearTimeout(__privateGet(this,_safariBeforeUnloadTimeout)),"blur"===e.type&&"active"!==__privateGet(this,_state).call(this)||(__privateGet(this,_state).set(determinePageState(e)),__privateGet(this,_visibility).set("hidden"==document.visibilityState?"hidden":"visible"))};class RAFLoop{constructor(e){__privateAdd(this,_RAFLoop_instances),__privateAdd(this,_id),__privateAdd(this,_callback),__privateSet(this,_callback,e)}start(){isUndefined(__privateGet(this,_id))&&__privateMethod(this,_RAFLoop_instances,loop_fn).call(this)}stop(){isNumber(__privateGet(this,_id))&&window.cancelAnimationFrame(__privateGet(this,_id)),__privateSet(this,_id,void 0)}}_id=new WeakMap,_callback=new WeakMap,_RAFLoop_instances=new WeakSet,loop_fn=function(){__privateSet(this,_id,window.requestAnimationFrame(()=>{isUndefined(__privateGet(this,_id))||(__privateGet(this,_callback).call(this),__privateMethod(this,_RAFLoop_instances,loop_fn).call(this))}))};class HTMLMediaEvents{constructor(e,t){__privateAdd(this,_HTMLMediaEvents_instances),__privateAdd(this,_provider),__privateAdd(this,_ctx),__privateAdd(this,_waiting,!1),__privateAdd(this,_attachedLoadStart,!1),__privateAdd(this,_attachedCanPlay,!1),__privateAdd(this,_timeRAF,new RAFLoop(__privateMethod(this,_HTMLMediaEvents_instances,onAnimationFrame_fn).bind(this))),__privateAdd(this,_pageVisibility,new PageVisibility),__privateAdd(this,_events),__privateAdd(this,_lastSeenTime,0),__privateAdd(this,_seekedTo,-1),__privateAdd(this,_devHandlers),__privateAdd(this,_handleDevEvent),__privateSet(this,_provider,e),__privateSet(this,_ctx,t),__privateSet(this,_events,new EventsController(e.media)),__privateMethod(this,_HTMLMediaEvents_instances,attachInitialListeners_fn).call(this),__privateGet(this,_pageVisibility).connect(),effect(__privateMethod(this,_HTMLMediaEvents_instances,attachTimeUpdate_fn).bind(this)),onDispose(__privateMethod(this,_HTMLMediaEvents_instances,onDispose_fn).bind(this))}}_provider=new WeakMap,_ctx=new WeakMap,_waiting=new WeakMap,_attachedLoadStart=new WeakMap,_attachedCanPlay=new WeakMap,_timeRAF=new WeakMap,_pageVisibility=new WeakMap,_events=new WeakMap,_HTMLMediaEvents_instances=new WeakSet,media_get=function(){return __privateGet(this,_provider).media},onDispose_fn=function(){var e;__privateSet(this,_attachedLoadStart,!1),__privateSet(this,_attachedCanPlay,!1),__privateGet(this,_timeRAF).stop(),__privateGet(this,_events).abort(),null==(e=__privateGet(this,_devHandlers))||e.clear()},_lastSeenTime=new WeakMap,_seekedTo=new WeakMap,onAnimationFrame_fn=function(){const e=__privateGet(this,_HTMLMediaEvents_instances,media_get).currentTime;IS_SAFARI&&e-__privateGet(this,_seekedTo)<.35||__privateGet(this,_lastSeenTime)===e||(__privateMethod(this,_HTMLMediaEvents_instances,updateCurrentTime_fn).call(this,e),__privateSet(this,_lastSeenTime,e))},attachInitialListeners_fn=function(){__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"loadstart",__privateMethod(this,_HTMLMediaEvents_instances,onLoadStart_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"abort",__privateMethod(this,_HTMLMediaEvents_instances,onAbort_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"emptied",__privateMethod(this,_HTMLMediaEvents_instances,onEmptied_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"error",__privateMethod(this,_HTMLMediaEvents_instances,onError_fn2)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"volumechange",__privateMethod(this,_HTMLMediaEvents_instances,onVolumeChange_fn))},attachLoadStartListeners_fn=function(){__privateGet(this,_attachedLoadStart)||(__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"loadeddata",__privateMethod(this,_HTMLMediaEvents_instances,onLoadedData_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"loadedmetadata",__privateMethod(this,_HTMLMediaEvents_instances,onLoadedMetadata_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"canplay",__privateMethod(this,_HTMLMediaEvents_instances,onCanPlay_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"canplaythrough",__privateMethod(this,_HTMLMediaEvents_instances,onCanPlayThrough_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"durationchange",__privateMethod(this,_HTMLMediaEvents_instances,onDurationChange_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"play",__privateMethod(this,_HTMLMediaEvents_instances,onPlay_fn2)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"progress",__privateMethod(this,_HTMLMediaEvents_instances,onProgress_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"stalled",__privateMethod(this,_HTMLMediaEvents_instances,onStalled_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"suspend",__privateMethod(this,_HTMLMediaEvents_instances,onSuspend_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"ratechange",__privateMethod(this,_HTMLMediaEvents_instances,onRateChange_fn)),__privateSet(this,_attachedLoadStart,!0))},attachCanPlayListeners_fn=function(){__privateGet(this,_attachedCanPlay)||(__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"pause",__privateMethod(this,_HTMLMediaEvents_instances,onPause_fn2)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"playing",__privateMethod(this,_HTMLMediaEvents_instances,onPlaying_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"seeked",__privateMethod(this,_HTMLMediaEvents_instances,onSeeked_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"seeking",__privateMethod(this,_HTMLMediaEvents_instances,onSeeking_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"ended",__privateMethod(this,_HTMLMediaEvents_instances,onEnded_fn)),__privateMethod(this,_HTMLMediaEvents_instances,attachEventListener_fn).call(this,"waiting",__privateMethod(this,_HTMLMediaEvents_instances,onWaiting_fn)),__privateSet(this,_attachedCanPlay,!0))},_devHandlers=new WeakMap,_handleDevEvent=new WeakMap,attachEventListener_fn=function(e,t){__privateGet(this,_events).add(e,t.bind(this))},onDevEvent_fn=function(e){},updateCurrentTime_fn=function(e,t){const n=Math.min(e,__privateGet(this,_ctx).$state.seekableEnd());__privateGet(this,_ctx).notify("time-change",n,t)},onLoadStart_fn=function(e){3!==__privateGet(this,_HTMLMediaEvents_instances,media_get).networkState?(__privateMethod(this,_HTMLMediaEvents_instances,attachLoadStartListeners_fn).call(this),__privateGet(this,_ctx).notify("load-start",void 0,e)):__privateMethod(this,_HTMLMediaEvents_instances,onAbort_fn).call(this,e)},onAbort_fn=function(e){__privateGet(this,_ctx).notify("abort",void 0,e)},onEmptied_fn=function(){__privateGet(this,_ctx).notify("emptied",void 0,event)},onLoadedData_fn=function(e){__privateGet(this,_ctx).notify("loaded-data",void 0,e)},onLoadedMetadata_fn=function(e){__privateSet(this,_lastSeenTime,0),__privateSet(this,_seekedTo,-1),__privateMethod(this,_HTMLMediaEvents_instances,attachCanPlayListeners_fn).call(this),__privateGet(this,_ctx).notify("loaded-metadata",void 0,e),(IS_IOS||IS_SAFARI&&isHLSSrc(__privateGet(this,_ctx).$state.source()))&&__privateGet(this,_ctx).delegate.ready(__privateMethod(this,_HTMLMediaEvents_instances,getCanPlayDetail_fn).call(this),e)},getCanPlayDetail_fn=function(){return{provider:peek(__privateGet(this,_ctx).$provider),duration:__privateGet(this,_HTMLMediaEvents_instances,media_get).duration,buffered:__privateGet(this,_HTMLMediaEvents_instances,media_get).buffered,seekable:__privateGet(this,_HTMLMediaEvents_instances,media_get).seekable}},onPlay_fn2=function(e){__privateGet(this,_ctx).$state.canPlay&&__privateGet(this,_ctx).notify("play",void 0,e)},onPause_fn2=function(e){(1!==__privateGet(this,_HTMLMediaEvents_instances,media_get).readyState||__privateGet(this,_waiting))&&(__privateSet(this,_waiting,!1),__privateGet(this,_timeRAF).stop(),__privateGet(this,_ctx).notify("pause",void 0,e))},onCanPlay_fn=function(e){__privateGet(this,_ctx).delegate.ready(__privateMethod(this,_HTMLMediaEvents_instances,getCanPlayDetail_fn).call(this),e)},onCanPlayThrough_fn=function(e){__privateGet(this,_ctx).$state.started()||__privateGet(this,_ctx).notify("can-play-through",__privateMethod(this,_HTMLMediaEvents_instances,getCanPlayDetail_fn).call(this),e)},onPlaying_fn=function(e){__privateGet(this,_HTMLMediaEvents_instances,media_get).paused||(__privateSet(this,_waiting,!1),__privateGet(this,_ctx).notify("playing",void 0,e),__privateGet(this,_timeRAF).start())},onStalled_fn=function(e){__privateGet(this,_ctx).notify("stalled",void 0,e),__privateGet(this,_HTMLMediaEvents_instances,media_get).readyState<3&&(__privateSet(this,_waiting,!0),__privateGet(this,_ctx).notify("waiting",void 0,e))},onWaiting_fn=function(e){__privateGet(this,_HTMLMediaEvents_instances,media_get).readyState<3&&(__privateSet(this,_waiting,!0),__privateGet(this,_ctx).notify("waiting",void 0,e))},onEnded_fn=function(e){if(__privateGet(this,_timeRAF).stop(),__privateMethod(this,_HTMLMediaEvents_instances,updateCurrentTime_fn).call(this,__privateGet(this,_HTMLMediaEvents_instances,media_get).duration,e),__privateGet(this,_ctx).notify("end",void 0,e),__privateGet(this,_ctx).$state.loop()){isNil(__privateGet(this,_HTMLMediaEvents_instances,media_get).controls)&&(__privateGet(this,_HTMLMediaEvents_instances,media_get).controls=!1)}},attachTimeUpdate_fn=function(){const e=__privateGet(this,_ctx).$state.paused(),t="hidden"===__privateGet(this,_pageVisibility).visibility;(e||t)&&listenEvent(__privateGet(this,_HTMLMediaEvents_instances,media_get),"timeupdate",__privateMethod(this,_HTMLMediaEvents_instances,onTimeUpdate_fn).bind(this))},onTimeUpdate_fn=function(e){__privateMethod(this,_HTMLMediaEvents_instances,updateCurrentTime_fn).call(this,__privateGet(this,_HTMLMediaEvents_instances,media_get).currentTime,e)},onDurationChange_fn=function(e){__privateGet(this,_ctx).$state.ended()&&__privateMethod(this,_HTMLMediaEvents_instances,updateCurrentTime_fn).call(this,__privateGet(this,_HTMLMediaEvents_instances,media_get).duration,e),__privateGet(this,_ctx).notify("duration-change",__privateGet(this,_HTMLMediaEvents_instances,media_get).duration,e)},onVolumeChange_fn=function(e){const t={volume:__privateGet(this,_HTMLMediaEvents_instances,media_get).volume,muted:__privateGet(this,_HTMLMediaEvents_instances,media_get).muted};__privateGet(this,_ctx).notify("volume-change",t,e)},onSeeked_fn=function(e){__privateSet(this,_seekedTo,__privateGet(this,_HTMLMediaEvents_instances,media_get).currentTime),__privateMethod(this,_HTMLMediaEvents_instances,updateCurrentTime_fn).call(this,__privateGet(this,_HTMLMediaEvents_instances,media_get).currentTime,e),__privateGet(this,_ctx).notify("seeked",__privateGet(this,_HTMLMediaEvents_instances,media_get).currentTime,e),Math.trunc(__privateGet(this,_HTMLMediaEvents_instances,media_get).currentTime)===Math.trunc(__privateGet(this,_HTMLMediaEvents_instances,media_get).duration)&&getNumberOfDecimalPlaces(__privateGet(this,_HTMLMediaEvents_instances,media_get).duration)>getNumberOfDecimalPlaces(__privateGet(this,_HTMLMediaEvents_instances,media_get).currentTime)&&(__privateMethod(this,_HTMLMediaEvents_instances,updateCurrentTime_fn).call(this,__privateGet(this,_HTMLMediaEvents_instances,media_get).duration,e),__privateGet(this,_HTMLMediaEvents_instances,media_get).ended||__privateGet(this,_ctx).player.dispatch(new DOMEvent("media-play-request",{trigger:e})))},onSeeking_fn=function(e){__privateGet(this,_ctx).notify("seeking",__privateGet(this,_HTMLMediaEvents_instances,media_get).currentTime,e)},onProgress_fn=function(e){const t={buffered:__privateGet(this,_HTMLMediaEvents_instances,media_get).buffered,seekable:__privateGet(this,_HTMLMediaEvents_instances,media_get).seekable};__privateGet(this,_ctx).notify("progress",t,e)},onSuspend_fn=function(e){__privateGet(this,_ctx).notify("suspend",void 0,e)},onRateChange_fn=function(e){__privateGet(this,_ctx).notify("rate-change",__privateGet(this,_HTMLMediaEvents_instances,media_get).playbackRate,e)},onError_fn2=function(e){const t=__privateGet(this,_HTMLMediaEvents_instances,media_get).error;if(!t)return;const n={message:t.message,code:t.code,mediaError:t};__privateGet(this,_ctx).notify("error",n,e)};class NativeAudioTracks{constructor(e,t){__privateAdd(this,_NativeAudioTracks_instances),__privateAdd(this,_provider2),__privateAdd(this,_ctx2),__privateSet(this,_provider2,e),__privateSet(this,_ctx2,t),__privateGet(this,_NativeAudioTracks_instances,nativeTracks_get).onaddtrack=__privateMethod(this,_NativeAudioTracks_instances,onAddNativeTrack_fn).bind(this),__privateGet(this,_NativeAudioTracks_instances,nativeTracks_get).onremovetrack=__privateMethod(this,_NativeAudioTracks_instances,onRemoveNativeTrack_fn).bind(this),__privateGet(this,_NativeAudioTracks_instances,nativeTracks_get).onchange=__privateMethod(this,_NativeAudioTracks_instances,onChangeNativeTrack_fn).bind(this),listenEvent(__privateGet(this,_ctx2).audioTracks,"change",__privateMethod(this,_NativeAudioTracks_instances,onChangeTrack_fn).bind(this))}}_provider2=new WeakMap,_ctx2=new WeakMap,_NativeAudioTracks_instances=new WeakSet,nativeTracks_get=function(){return __privateGet(this,_provider2).media.audioTracks},onAddNativeTrack_fn=function(e){const t=e.track;if(""===t.label)return;const n={id:t.id.toString()||`native-audio-${__privateGet(this,_ctx2).audioTracks.length}`,label:t.label,language:t.language,kind:t.kind,selected:!1};__privateGet(this,_ctx2).audioTracks[ListSymbol.add](n,e),t.enabled&&(n.selected=!0)},onRemoveNativeTrack_fn=function(e){const t=__privateGet(this,_ctx2).audioTracks.getById(e.track.id);t&&__privateGet(this,_ctx2).audioTracks[ListSymbol.remove](t,e)},onChangeNativeTrack_fn=function(e){let t=__privateMethod(this,_NativeAudioTracks_instances,getEnabledNativeTrack_fn).call(this);if(!t)return;const n=__privateGet(this,_ctx2).audioTracks.getById(t.id);n&&__privateGet(this,_ctx2).audioTracks[ListSymbol.select](n,!0,e)},getEnabledNativeTrack_fn=function(){return Array.from(__privateGet(this,_NativeAudioTracks_instances,nativeTracks_get)).find(e=>e.enabled)},onChangeTrack_fn=function(e){const{current:t}=e.detail;if(!t)return;const n=__privateGet(this,_NativeAudioTracks_instances,nativeTracks_get).getTrackById(t.id);if(n){const e=__privateMethod(this,_NativeAudioTracks_instances,getEnabledNativeTrack_fn).call(this);e&&(e.enabled=!1),n.enabled=!0}};class HTMLMediaProvider{constructor(e,t){__privateAdd(this,_HTMLMediaProvider_instances),__publicField(this,"scope",createScope()),__publicField(this,"currentSrc",null),__publicField(this,"audioGain"),this.media=e,this.ctx=t,this.audioGain=new AudioGain(e,e=>{this.ctx.notify("audio-gain-change",e)})}setup(){new HTMLMediaEvents(this,this.ctx),"audioTracks"in this.media&&new NativeAudioTracks(this,this.ctx),onDispose(()=>{this.audioGain.destroy(),this.media.srcObject=null,this.media.removeAttribute("src");for(const e of this.media.querySelectorAll("source"))e.remove();this.media.load()})}get type(){return""}setPlaybackRate(e){this.media.playbackRate=e}async play(){return this.media.play()}async pause(){return this.media.pause()}setMuted(e){this.media.muted=e}setVolume(e){this.media.volume=e}setCurrentTime(e){this.media.currentTime=e}setPlaysInline(e){setAttribute(this.media,"playsinline",e)}async loadSource({src:e,type:t},n){this.media.preload=n||"",isMediaStream(e)?(this.removeSource(),this.media.srcObject=e):(this.media.srcObject=null,isString(e)?"?"!==t?this.appendSource({src:e,type:t}):(this.removeSource(),this.media.src=__privateMethod(this,_HTMLMediaProvider_instances,appendMediaFragment_fn).call(this,e)):(this.removeSource(),this.media.src=window.URL.createObjectURL(e))),this.media.load(),this.currentSrc={src:e,type:t}}appendSource(e,t){const n=this.media.querySelector("source[data-vds]"),r=n??document.createElement("source");setAttribute(r,"src",__privateMethod(this,_HTMLMediaProvider_instances,appendMediaFragment_fn).call(this,e.src)),setAttribute(r,"type","?"!==e.type?e.type:t),setAttribute(r,"data-vds",""),n||this.media.append(r)}removeSource(){var e;null==(e=this.media.querySelector("source[data-vds]"))||e.remove()}}_HTMLMediaProvider_instances=new WeakSet,appendMediaFragment_fn=function(e){const{clipStartTime:t,clipEndTime:n}=this.ctx.$state,r=t(),i=n();return r>0&&i>0?`${e}#t=${r},${i}`:r>0?`${e}#t=${r}`:i>0?`${e}#t=0,${i}`:e};class HTMLRemotePlaybackAdapter{constructor(e,t){__privateAdd(this,_HTMLRemotePlaybackAdapter_instances),__privateAdd(this,_media4),__privateAdd(this,_ctx3),__privateAdd(this,_state2),__privateAdd(this,_supported,signal(!1)),__privateSet(this,_media4,e),__privateSet(this,_ctx3,t),__privateMethod(this,_HTMLRemotePlaybackAdapter_instances,setup_fn).call(this)}get supported(){return __privateGet(this,_supported).call(this)}async prompt(){if(!this.supported)throw Error("Not supported on this platform.");return"airplay"===this.type&&__privateGet(this,_media4).webkitShowPlaybackTargetPicker?__privateGet(this,_media4).webkitShowPlaybackTargetPicker():__privateGet(this,_media4).remote.prompt()}}_media4=new WeakMap,_ctx3=new WeakMap,_state2=new WeakMap,_supported=new WeakMap,_HTMLRemotePlaybackAdapter_instances=new WeakSet,setup_fn=function(){var e;!IS_SERVER&&(null==(e=__privateGet(this,_media4))?void 0:e.remote)&&this.canPrompt&&(__privateGet(this,_media4).remote.watchAvailability(e=>{__privateGet(this,_supported).set(e)}).catch(()=>{__privateGet(this,_supported).set(!1)}),effect(__privateMethod(this,_HTMLRemotePlaybackAdapter_instances,watchSupported_fn).bind(this)))},watchSupported_fn=function(){if(!__privateGet(this,_supported).call(this))return;const e=["connecting","connect","disconnect"],t=__privateMethod(this,_HTMLRemotePlaybackAdapter_instances,onStateChange_fn).bind(this);t(),listenEvent(__privateGet(this,_media4),"playing",t);const n=new EventsController(__privateGet(this,_media4).remote);for(const r of e)n.add(r,t)},onStateChange_fn=function(e){const t=__privateGet(this,_media4).remote.state;if(t===__privateGet(this,_state2))return;const n={type:this.type,state:t};__privateGet(this,_ctx3).notify("remote-playback-change",n,e),__privateSet(this,_state2,t)};class HTMLAirPlayAdapter extends HTMLRemotePlaybackAdapter{constructor(){super(...arguments),__publicField(this,"type","airplay")}get canPrompt(){return"WebKitPlaybackTargetAvailabilityEvent"in window}}class NativeHLSTextTracks{constructor(e,t){__privateAdd(this,_NativeHLSTextTracks_instances),__privateAdd(this,_video3),__privateAdd(this,_ctx4),__privateSet(this,_video3,e),__privateSet(this,_ctx4,t),e.textTracks.onaddtrack=__privateMethod(this,_NativeHLSTextTracks_instances,onAddTrack_fn2).bind(this),onDispose(__privateMethod(this,_NativeHLSTextTracks_instances,onDispose_fn2).bind(this))}}function findTextTrackElement(e,t){return Array.from(e.children).find(e=>e.track===t)}_video3=new WeakMap,_ctx4=new WeakMap,_NativeHLSTextTracks_instances=new WeakSet,onAddTrack_fn2=function(e){const t=e.track;if(!t||findTextTrackElement(__privateGet(this,_video3),t))return;const n=new TextTrack({id:t.id,kind:t.kind,label:t.label??"",language:t.language,type:"vtt"});n[TextTrackSymbol.native]={track:t},n[TextTrackSymbol.readyState]=2,n[TextTrackSymbol.nativeHLS]=!0;let r=0;const i=e=>{if(t.cues)for(let i=r;i<t.cues.length;i++)n.addCue(t.cues[i],e),r++};i(e),t.oncuechange=i,__privateGet(this,_ctx4).textTracks.add(n,e),n.setMode(t.mode,e)},onDispose_fn2=function(){var e;__privateGet(this,_video3).textTracks.onaddtrack=null;for(const t of __privateGet(this,_ctx4).textTracks){const n=null==(e=t[TextTrackSymbol.native])?void 0:e.track;(null==n?void 0:n.oncuechange)&&(n.oncuechange=null)}};class VideoPictureInPicture{constructor(e,t){__privateAdd(this,_VideoPictureInPicture_instances),__privateAdd(this,_video4),__privateAdd(this,_media5),__privateAdd(this,_onChange2,(e,t)=>{__privateGet(this,_media5).notify("picture-in-picture-change",e,t)}),__privateSet(this,_video4,e),__privateSet(this,_media5,t),new EventsController(e).add("enterpictureinpicture",__privateMethod(this,_VideoPictureInPicture_instances,onEnter_fn).bind(this)).add("leavepictureinpicture",__privateMethod(this,_VideoPictureInPicture_instances,onExit_fn).bind(this))}get active(){return document.pictureInPictureElement===__privateGet(this,_video4)}get supported(){return canUsePictureInPicture(__privateGet(this,_video4))}async enter(){return __privateGet(this,_video4).requestPictureInPicture()}exit(){return document.exitPictureInPicture()}}_video4=new WeakMap,_media5=new WeakMap,_VideoPictureInPicture_instances=new WeakSet,onEnter_fn=function(e){__privateGet(this,_onChange2).call(this,!0,e)},onExit_fn=function(e){__privateGet(this,_onChange2).call(this,!1,e)},_onChange2=new WeakMap;class VideoPresentation{constructor(e,t){__privateAdd(this,_VideoPresentation_instances),__privateAdd(this,_video5),__privateAdd(this,_media6),__privateAdd(this,_mode2,"inline"),__privateSet(this,_video5,e),__privateSet(this,_media6,t),listenEvent(e,"webkitpresentationmodechanged",__privateMethod(this,_VideoPresentation_instances,onModeChange_fn).bind(this))}get mode(){return __privateGet(this,_mode2)}get supported(){return canUseVideoPresentation(__privateGet(this,_video5))}async setPresentationMode(e){__privateGet(this,_mode2)!==e&&__privateGet(this,_video5).webkitSetPresentationMode(e)}}_video5=new WeakMap,_media6=new WeakMap,_mode2=new WeakMap,_VideoPresentation_instances=new WeakSet,onModeChange_fn=function(e){var t;const n=__privateGet(this,_mode2);__privateSet(this,_mode2,__privateGet(this,_video5).webkitPresentationMode),null==(t=__privateGet(this,_media6).player)||t.dispatch(new DOMEvent("video-presentation-change",{detail:__privateGet(this,_mode2),trigger:e})),["fullscreen","picture-in-picture"].forEach(t=>{__privateGet(this,_mode2)!==t&&n!==t||__privateGet(this,_media6).notify(`${t}-change`,__privateGet(this,_mode2)===t,e)})};class FullscreenPresentationAdapter{constructor(e){__privateAdd(this,_presentation),__privateSet(this,_presentation,e)}get active(){return"fullscreen"===__privateGet(this,_presentation).mode}get supported(){return __privateGet(this,_presentation).supported}async enter(){__privateGet(this,_presentation).setPresentationMode("fullscreen")}async exit(){__privateGet(this,_presentation).setPresentationMode("inline")}}_presentation=new WeakMap;class PIPPresentationAdapter{constructor(e){__privateAdd(this,_presentation2),__privateSet(this,_presentation2,e)}get active(){return"picture-in-picture"===__privateGet(this,_presentation2).mode}get supported(){return __privateGet(this,_presentation2).supported}async enter(){__privateGet(this,_presentation2).setPresentationMode("picture-in-picture")}async exit(){__privateGet(this,_presentation2).setPresentationMode("inline")}}_presentation2=new WeakMap;let VideoProvider$1=class extends HTMLMediaProvider{constructor(e,t){super(e,t),__publicField(this,"$$PROVIDER_TYPE","VIDEO"),__publicField(this,"airPlay"),__publicField(this,"fullscreen"),__publicField(this,"pictureInPicture"),scoped(()=>{if(this.airPlay=new HTMLAirPlayAdapter(e,t),canUseVideoPresentation(e)){const n=new VideoPresentation(e,t);this.fullscreen=new FullscreenPresentationAdapter(n),this.pictureInPicture=new PIPPresentationAdapter(n)}else canUsePictureInPicture(e)&&(this.pictureInPicture=new VideoPictureInPicture(e,t))},this.scope)}get type(){return"video"}setup(){super.setup(),canPlayHLSNatively(this.video)&&new NativeHLSTextTracks(this.video,this.ctx),this.ctx.textRenderers.attachVideo(this.video),onDispose(()=>{this.ctx.textRenderers.attachVideo(null)}),"video"===this.type&&this.ctx.notify("provider-setup",this)}get video(){return this.media}};var provider$1=Object.freeze({__proto__:null,VideoProvider:VideoProvider$1});function getLangName(e){try{const t=new Intl.DisplayNames(navigator.languages,{type:"language"});return t.of(e)??null}catch(t){return null}}const toDOMEventType=e=>`dash-${camelToKebabCase(e)}`;class DASHController{constructor(e,t){__privateAdd(this,_DASHController_instances),__privateAdd(this,_video6),__privateAdd(this,_ctx5),__privateAdd(this,_instance,null),__privateAdd(this,_callbacks,new Set),__privateAdd(this,_stopLiveSync,null),__publicField(this,"config",{}),__privateAdd(this,_currentTrack,null),__privateAdd(this,_cueTracker,{}),__privateAdd(this,_retryLoadingTimer,-1),__privateSet(this,_video6,e),__privateSet(this,_ctx5,t)}get instance(){return __privateGet(this,_instance)}setup(e){__privateSet(this,_instance,e().create());const t=__privateMethod(this,_DASHController_instances,dispatchDASHEvent_fn).bind(this);for(const n of Object.values(e.events))__privateGet(this,_instance).on(n,t);__privateGet(this,_instance).on(e.events.ERROR,__privateMethod(this,_DASHController_instances,onError_fn3).bind(this));for(const n of __privateGet(this,_callbacks))n(__privateGet(this,_instance));__privateGet(this,_ctx5).player.dispatch("dash-instance",{detail:__privateGet(this,_instance)}),__privateGet(this,_instance).initialize(__privateGet(this,_video6),void 0,!1),__privateGet(this,_instance).updateSettings({streaming:{text:{defaultEnabled:!1,dispatchForManualRendering:!0},buffer:{fastSwitchEnabled:!0}},...this.config}),__privateGet(this,_instance).on(e.events.FRAGMENT_LOADING_STARTED,__privateMethod(this,_DASHController_instances,onFragmentLoadStart_fn).bind(this)),__privateGet(this,_instance).on(e.events.FRAGMENT_LOADING_COMPLETED,__privateMethod(this,_DASHController_instances,onFragmentLoadComplete_fn).bind(this)),__privateGet(this,_instance).on(e.events.MANIFEST_LOADED,__privateMethod(this,_DASHController_instances,onManifestLoaded_fn).bind(this)),__privateGet(this,_instance).on(e.events.QUALITY_CHANGE_RENDERED,__privateMethod(this,_DASHController_instances,onQualityChange_fn).bind(this)),__privateGet(this,_instance).on(e.events.TEXT_TRACKS_ADDED,__privateMethod(this,_DASHController_instances,onTextTracksAdded_fn).bind(this)),__privateGet(this,_instance).on(e.events.TRACK_CHANGE_RENDERED,__privateMethod(this,_DASHController_instances,onTrackChange_fn).bind(this)),__privateGet(this,_ctx5).qualities[QualitySymbol.enableAuto]=__privateMethod(this,_DASHController_instances,enableAutoQuality_fn).bind(this),listenEvent(__privateGet(this,_ctx5).qualities,"change",__privateMethod(this,_DASHController_instances,onUserQualityChange_fn).bind(this)),listenEvent(__privateGet(this,_ctx5).audioTracks,"change",__privateMethod(this,_DASHController_instances,onUserAudioChange_fn).bind(this)),__privateSet(this,_stopLiveSync,effect(__privateMethod(this,_DASHController_instances,liveSync_fn).bind(this)))}onInstance(e){return __privateGet(this,_callbacks).add(e),()=>__privateGet(this,_callbacks).delete(e)}loadSource(e){var t;__privateMethod(this,_DASHController_instances,reset_fn).call(this),isString(e.src)&&(null==(t=__privateGet(this,_instance))||t.attachSource(e.src))}destroy(){var e,t;__privateMethod(this,_DASHController_instances,reset_fn).call(this),null==(e=__privateGet(this,_instance))||e.destroy(),__privateSet(this,_instance,null),null==(t=__privateGet(this,_stopLiveSync))||t.call(this),__privateSet(this,_stopLiveSync,null)}}function coerceToError(e){return e instanceof Error?e:Error("string"==typeof e?e:JSON.stringify(e))}function assert(e,t){if(!e)throw Error("Assertion failed.")}_video6=new WeakMap,_ctx5=new WeakMap,_instance=new WeakMap,_callbacks=new WeakMap,_stopLiveSync=new WeakMap,_DASHController_instances=new WeakSet,createDOMEvent_fn=function(e){return new DOMEvent(toDOMEventType(e.type),{detail:e})},liveSync_fn=function(){if(!__privateGet(this,_ctx5).$state.live())return;const e=new RAFLoop(__privateMethod(this,_DASHController_instances,liveSyncPosition_fn).bind(this));return e.start(),e.stop.bind(e)},liveSyncPosition_fn=function(){if(!__privateGet(this,_instance))return;const e=__privateGet(this,_instance).duration()-__privateGet(this,_instance).time();__privateGet(this,_ctx5).$state.liveSyncPosition.set(isNaN(e)?1/0:e)},dispatchDASHEvent_fn=function(e){var t;null==(t=__privateGet(this,_ctx5).player)||t.dispatch(__privateMethod(this,_DASHController_instances,createDOMEvent_fn).call(this,e))},_currentTrack=new WeakMap,_cueTracker=new WeakMap,onTextFragmentLoaded_fn=function(e){var t;const n=null==(t=__privateGet(this,_currentTrack))?void 0:t[TextTrackSymbol.native],r=(null==n?void 0:n.track).cues;if(!n||!r)return;const i=__privateGet(this,_currentTrack).id,s=__privateGet(this,_cueTracker)[i]??0,a=__privateMethod(this,_DASHController_instances,createDOMEvent_fn).call(this,e);for(let o=s;o<r.length;o++){const e=r[o];e.positionAlign||(e.positionAlign="auto"),__privateGet(this,_currentTrack).addCue(e,a)}__privateGet(this,_cueTracker)[i]=r.length},onTextTracksAdded_fn=function(e){var t;if(!__privateGet(this,_instance))return;const n=e.tracks,r=[...__privateGet(this,_video6).textTracks].filter(e=>"manualMode"in e),i=__privateMethod(this,_DASHController_instances,createDOMEvent_fn).call(this,e);for(let s=0;s<r.length;s++){const e=n[s],a=r[s],o=`dash-${e.kind}-${s}`,l=new TextTrack({id:o,label:(null==e?void 0:e.label)??(null==(t=e.labels.find(e=>e.text))?void 0:t.text)??((null==e?void 0:e.lang)&&getLangName(e.lang))??(null==e?void 0:e.lang)??void 0,language:e.lang??void 0,kind:e.kind,default:e.defaultTrack});l[TextTrackSymbol.native]={managed:!0,track:a},l[TextTrackSymbol.readyState]=2,l[TextTrackSymbol.onModeChange]=()=>{__privateGet(this,_instance)&&("showing"===l.mode?(__privateGet(this,_instance).setTextTrack(s),__privateSet(this,_currentTrack,l)):(__privateGet(this,_instance).setTextTrack(-1),__privateSet(this,_currentTrack,null)))},__privateGet(this,_ctx5).textTracks.add(l,i)}},onTrackChange_fn=function(e){const{mediaType:t,newMediaInfo:n}=e;if("audio"===t){const t=__privateGet(this,_ctx5).audioTracks.getById(`dash-audio-${n.index}`);if(t){const n=__privateMethod(this,_DASHController_instances,createDOMEvent_fn).call(this,e);__privateGet(this,_ctx5).audioTracks[ListSymbol.select](t,!0,n)}}},onQualityChange_fn=function(e){if("video"!==e.mediaType)return;const t=__privateGet(this,_ctx5).qualities[e.newQuality];if(t){const n=__privateMethod(this,_DASHController_instances,createDOMEvent_fn).call(this,e);__privateGet(this,_ctx5).qualities[ListSymbol.select](t,!0,n)}},onManifestLoaded_fn=function(e){if(__privateGet(this,_ctx5).$state.canPlay()||!__privateGet(this,_instance))return;const{type:t,mediaPresentationDuration:n}=e.data,r=__privateMethod(this,_DASHController_instances,createDOMEvent_fn).call(this,e);__privateGet(this,_ctx5).notify("stream-type-change","static"!==t?"live":"on-demand",r),__privateGet(this,_ctx5).notify("duration-change",n,r),__privateGet(this,_ctx5).qualities[QualitySymbol.setAuto](!0,r);const i=__privateGet(this,_instance).getVideoElement(),s=__privateGet(this,_instance).getTracksForTypeFromManifest("video",e.data),a=[...new Set(s.map(e=>e.mimeType))].find(e=>e&&canPlayVideoType(i,e)),o=s.filter(e=>a===e.mimeType)[0];let l=__privateGet(this,_instance).getTracksForTypeFromManifest("audio",e.data);const c=[...new Set(l.map(e=>e.mimeType))].find(e=>e&&canPlayAudioType(i,e));if(l=l.filter(e=>c===e.mimeType),o.bitrateList.forEach((e,t)=>{var n;const i={id:(null==(n=e.id)?void 0:n.toString())??`dash-bitrate-${t}`,width:e.width??0,height:e.height??0,bitrate:e.bandwidth??0,codec:o.codec,index:t};__privateGet(this,_ctx5).qualities[ListSymbol.add](i,r)}),isNumber(o.index)){const e=__privateGet(this,_ctx5).qualities[o.index];e&&__privateGet(this,_ctx5).qualities[ListSymbol.select](e,!0,r)}l.forEach((e,t)=>{const n=e.labels.find(e=>navigator.languages.some(t=>e.lang&&t.toLowerCase().startsWith(e.lang.toLowerCase())))||e.labels[0],i={id:`dash-audio-${null==e?void 0:e.index}`,label:(null==n?void 0:n.text)??(e.lang&&getLangName(e.lang))??e.lang??"",language:e.lang??"",kind:"main",mimeType:e.mimeType,codec:e.codec,index:t};__privateGet(this,_ctx5).audioTracks[ListSymbol.add](i,r)}),i.dispatchEvent(new DOMEvent("canplay",{trigger:r}))},onError_fn3=function(e){const{type:t,error:n}=e;if(27===n.code)__privateMethod(this,_DASHController_instances,onNetworkError_fn).call(this,n);else __privateMethod(this,_DASHController_instances,onFatalError_fn).call(this,n)},onFragmentLoadStart_fn=function(){__privateGet(this,_retryLoadingTimer)>=0&&__privateMethod(this,_DASHController_instances,clearRetryTimer_fn).call(this)},onFragmentLoadComplete_fn=function(e){"text"===e.mediaType&&requestAnimationFrame(__privateMethod(this,_DASHController_instances,onTextFragmentLoaded_fn).bind(this,e))},_retryLoadingTimer=new WeakMap,onNetworkError_fn=function(e){var t;__privateMethod(this,_DASHController_instances,clearRetryTimer_fn).call(this),null==(t=__privateGet(this,_instance))||t.play(),__privateSet(this,_retryLoadingTimer,window.setTimeout(()=>{__privateSet(this,_retryLoadingTimer,-1),__privateMethod(this,_DASHController_instances,onFatalError_fn).call(this,e)},5e3))},clearRetryTimer_fn=function(){clearTimeout(__privateGet(this,_retryLoadingTimer)),__privateSet(this,_retryLoadingTimer,-1)},onFatalError_fn=function(e){__privateGet(this,_ctx5).notify("error",{message:e.message??"",code:1,error:e})},enableAutoQuality_fn=function(){var e;__privateMethod(this,_DASHController_instances,switchAutoBitrate_fn).call(this,"video",!0);const{qualities:t}=__privateGet(this,_ctx5);null==(e=__privateGet(this,_instance))||e.setQualityFor("video",t.selectedIndex,!0)},switchAutoBitrate_fn=function(e,t){var n;null==(n=__privateGet(this,_instance))||n.updateSettings({streaming:{abr:{autoSwitchBitrate:{[e]:t}}}})},onUserQualityChange_fn=function(){const{qualities:e}=__privateGet(this,_ctx5);__privateGet(this,_instance)&&!e.auto&&e.selected&&(__privateMethod(this,_DASHController_instances,switchAutoBitrate_fn).call(this,"video",!1),__privateGet(this,_instance).setQualityFor("video",e.selectedIndex,"current"===e.switch),IS_CHROME&&(__privateGet(this,_video6).currentTime=__privateGet(this,_video6).currentTime))},onUserAudioChange_fn=function(){if(!__privateGet(this,_instance))return;const{audioTracks:e}=__privateGet(this,_ctx5),t=__privateGet(this,_instance).getTracksFor("audio").find(t=>e.selected&&e.selected.id===`dash-audio-${t.index}`);t&&__privateGet(this,_instance).setCurrentTrack(t)},reset_fn=function(){__privateMethod(this,_DASHController_instances,clearRetryTimer_fn).call(this),__privateSet(this,_currentTrack,null),__privateSet(this,_cueTracker,{})};class DASHLibLoader{constructor(e,t,n){__privateAdd(this,_DASHLibLoader_instances),__privateAdd(this,_lib),__privateAdd(this,_ctx6),__privateAdd(this,_callback2),__privateSet(this,_lib,e),__privateSet(this,_ctx6,t),__privateSet(this,_callback2,n),__privateMethod(this,_DASHLibLoader_instances,startLoading_fn).call(this)}}async function importDASH(e,t={}){var n,r,i,s,a,o,l;if(!isUndefined(e)){if(null==(n=t.onLoadStart)||n.call(t),isDASHConstructor(e))return null==(r=t.onLoaded)||r.call(t,e),e;if(isDASHNamespace(e)){const n=e.MediaPlayer;return null==(i=t.onLoaded)||i.call(t,n),n}try{const n=null==(s=await e())?void 0:s.default;if(isDASHNamespace(n))return null==(a=t.onLoaded)||a.call(t,n.MediaPlayer),n.MediaPlayer;if(!n)throw Error("");return null==(o=t.onLoaded)||o.call(t,n),n}catch(c){null==(l=t.onLoadError)||l.call(t,c)}}}async function loadDASHScript(e,t={}){var n,r,i;if(isString(e)){null==(n=t.onLoadStart)||n.call(t);try{if(await loadScript(e),!isFunction(window.dashjs.MediaPlayer))throw Error("");const n=window.dashjs.MediaPlayer;return null==(r=t.onLoaded)||r.call(t,n),n}catch(s){null==(i=t.onLoadError)||i.call(t,s)}}}function isDASHConstructor(e){return e&&e.prototype&&e.prototype!==Function}function isDASHNamespace(e){return e&&"MediaPlayer"in e}_lib=new WeakMap,_ctx6=new WeakMap,_callback2=new WeakMap,_DASHLibLoader_instances=new WeakSet,startLoading_fn=async function(){const e={onLoadStart:__privateMethod(this,_DASHLibLoader_instances,onLoadStart_fn2).bind(this),onLoaded:__privateMethod(this,_DASHLibLoader_instances,onLoaded_fn).bind(this),onLoadError:__privateMethod(this,_DASHLibLoader_instances,onLoadError_fn).bind(this)};let t=await loadDASHScript(__privateGet(this,_lib),e);if(isUndefined(t)&&!isString(__privateGet(this,_lib))&&(t=await importDASH(__privateGet(this,_lib),e)),!t)return null;if(!window.dashjs.supportsMediaSource()){const e="[vidstack] `dash.js` is not supported in this environment";return __privateGet(this,_ctx6).player.dispatch(new DOMEvent("dash-unsupported")),__privateGet(this,_ctx6).notify("error",{message:e,code:4}),null}return t},onLoadStart_fn2=function(){__privateGet(this,_ctx6).player.dispatch(new DOMEvent("dash-lib-load-start"))},onLoaded_fn=function(e){__privateGet(this,_ctx6).player.dispatch(new DOMEvent("dash-lib-loaded",{detail:e})),__privateGet(this,_callback2).call(this,e)},onLoadError_fn=function(e){const t=coerceToError(e);__privateGet(this,_ctx6).player.dispatch(new DOMEvent("dash-lib-load-error",{detail:t})),__privateGet(this,_ctx6).notify("error",{message:t.message,code:4,error:t})};const JS_DELIVR_CDN="https://cdn.jsdelivr.net";class DASHProvider extends VideoProvider$1{constructor(){super(...arguments),__publicField(this,"$$PROVIDER_TYPE","DASH"),__privateAdd(this,_ctor,null),__privateAdd(this,_controller2,new DASHController(this.video,this.ctx)),__privateAdd(this,_library,`${JS_DELIVR_CDN}/npm/dashjs@4.7.4/dist/dash.all.min.js`)}get ctor(){return __privateGet(this,_ctor)}get instance(){return __privateGet(this,_controller2).instance}get type(){return"dash"}get canLiveSync(){return!0}get config(){return __privateGet(this,_controller2).config}set config(e){__privateGet(this,_controller2).config=e}get library(){return __privateGet(this,_library)}set library(e){__privateSet(this,_library,e)}preconnect(){isString(__privateGet(this,_library))&&preconnect(__privateGet(this,_library))}setup(){super.setup(),new DASHLibLoader(__privateGet(this,_library),this.ctx,e=>{__privateSet(this,_ctor,e),__privateGet(this,_controller2).setup(e),this.ctx.notify("provider-setup",this);const t=peek(this.ctx.$state.source);t&&this.loadSource(t)})}async loadSource(e,t){isString(e.src)?(this.media.preload=t||"",this.appendSource(e,"application/x-mpegurl"),__privateGet(this,_controller2).loadSource(e),this.currentSrc=e):this.removeSource()}onInstance(e){const t=__privateGet(this,_controller2).instance;return t&&e(t),__privateGet(this,_controller2).onInstance(e)}destroy(){__privateGet(this,_controller2).destroy()}}_ctor=new WeakMap,_controller2=new WeakMap,_library=new WeakMap,__publicField(DASHProvider,"supported",isDASHSupported());var provider=Object.freeze({__proto__:null,DASHProvider:DASHProvider});const _DASHProviderLoader=class e extends VideoProviderLoader{constructor(){super(...arguments),__publicField(this,"name","dash")}canPlay(t){return e.supported&&isDASHSrc(t)}async load(e){if(IS_SERVER)throw Error("[vidstack] can not load dash provider server-side");return new((await Promise.resolve().then(function(){return provider})).DASHProvider)(this.target,e)}};__publicField(_DASHProviderLoader,"supported",isDASHSupported());let DASHProviderLoader=_DASHProviderLoader;class VimeoProviderLoader{constructor(){__publicField(this,"name","vimeo"),__publicField(this,"target")}preconnect(){const e=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(const t of e)preconnect(t)}canPlay(e){return isString(e.src)&&"video/vimeo"===e.type}mediaType(){return"video"}async load(e){if(IS_SERVER)throw Error("[vidstack] can not load vimeo provider server-side");return new((await __vitePreload(async()=>{const{VimeoProvider:e}=await import("./vidstack-BqgQkvb4-Bajr7kVK.js");return{VimeoProvider:e}},__vite__mapDeps([5,6,7,1,2,3]))).VimeoProvider)(this.target,e)}async loadPoster(e,t,n){const{resolveVimeoVideoId:r,getVimeoVideoInfo:i}=await __vitePreload(async()=>{const{resolveVimeoVideoId:e,getVimeoVideoInfo:t}=await import("./vidstack-krOAtKMi-D_Y3qhEg.js");return{resolveVimeoVideoId:e,getVimeoVideoInfo:t}},[]);if(!isString(e.src))return null;const{videoId:s,hash:a}=r(e.src);return s?i(s,n,a).then(e=>e?e.poster:null):null}}class YouTubeProviderLoader{constructor(){__publicField(this,"name","youtube"),__publicField(this,"target")}preconnect(){const e=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(const t of e)preconnect(t)}canPlay(e){return isString(e.src)&&"video/youtube"===e.type}mediaType(){return"video"}async load(e){if(IS_SERVER)throw Error("[vidstack] can not load youtube provider server-side");return new((await __vitePreload(async()=>{const{YouTubeProvider:e}=await import("./vidstack-DHmfHold-CxlfD1Zn.js");return{YouTubeProvider:e}},__vite__mapDeps([8,6,9,1,2,3]))).YouTubeProvider)(this.target,e)}async loadPoster(e,t,n){const{findYouTubePoster:r,resolveYouTubeVideoId:i}=await __vitePreload(async()=>{const{findYouTubePoster:e,resolveYouTubeVideoId:t}=await import("./vidstack-Dm1xEU9Q-CvQ_TGZE.js");return{findYouTubePoster:e,resolveYouTubeVideoId:t}},[]),s=isString(e.src)&&i(e.src);return s?r(s,n):null}}function padNumberWithZeroes(e,t){const n=String(e),r=n.length;if(r<t){return`${"0".repeat(t-r)}${e}`}return n}function parseTime(e){return{hours:Math.trunc(e/3600),minutes:Math.trunc(e%3600/60),seconds:Math.trunc(e%60),fraction:Number((e-Math.trunc(e)).toPrecision(3))}}function formatTime(e,{padHrs:t=null,padMins:n=null,showHrs:r=!1,showMs:i=!1}={}){const{hours:s,minutes:a,seconds:o,fraction:l}=parseTime(e),c=t?padNumberWithZeroes(s,2):s,u=`${n||isNull(n)&&e>=3600?padNumberWithZeroes(a,2):a}:${padNumberWithZeroes(o,2)}${i&&l>0?`.${String(l).replace(/^0?\./,"")}`:""}`;return s>0||r?`${c}:${u}`:u}function formatSpokenTime(e){const t=[],{hours:n,minutes:r,seconds:i}=parseTime(e);return n>0&&t.push(`${n} hour`),r>0&&t.push(`${r} min`),(i>0||0===t.length)&&t.push(`${i} sec`),t.join(" ")}const MEDIA_ATTRIBUTES=Symbol(0),mediaAttributes=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],mediaPlayerProps={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:MEDIA_KEY_SHORTCUTS,storage:null};class MediaLoadController extends MediaPlayerController{constructor(e,t){super(),__privateAdd(this,_type2),__privateAdd(this,_callback3),__privateSet(this,_type2,e),__privateSet(this,_callback3,t)}async onAttach(e){if(IS_SERVER)return;const t=this.$props[__privateGet(this,_type2)]();if("eager"===t)requestAnimationFrame(__privateGet(this,_callback3));else if("idle"===t)waitIdlePeriod(__privateGet(this,_callback3));else if("visible"===t){let t,n=new IntersectionObserver(e=>{this.scope&&e[0].isIntersecting&&(null==t||t(),t=void 0,__privateGet(this,_callback3).call(this))});n.observe(e),t=onDispose(()=>n.disconnect())}}}_type2=new WeakMap,_callback3=new WeakMap;class MediaPlayerDelegate{constructor(e,t){__privateAdd(this,_MediaPlayerDelegate_instances),__privateAdd(this,_handle),__privateAdd(this,_media7),__privateSet(this,_handle,e),__privateSet(this,_media7,t)}notify(e,...t){IS_SERVER||__privateGet(this,_handle).call(this,new DOMEvent(e,{detail:null==t?void 0:t[0],trigger:null==t?void 0:t[1]}))}async ready(e,t){if(!IS_SERVER)return untrack(async()=>{var n,r,i,s,a,o,l;const{logger:c}=__privateGet(this,_media7),{autoPlay:u,canPlay:d,started:h,duration:p,seekable:m,buffered:f,remotePlaybackInfo:g,playsInline:x,savedState:v,source:y}=__privateGet(this,_media7).$state;if(d())return;const _={duration:(null==e?void 0:e.duration)??p(),seekable:(null==e?void 0:e.seekable)??m(),buffered:(null==e?void 0:e.buffered)??f(),provider:__privateGet(this,_media7).$provider()};this.notify("can-play",_,t),tick();let E=__privateGet(this,_media7).$provider(),{storage:b,qualities:C}=__privateGet(this,_media7),{muted:S,volume:T,clipStartTime:R,playbackRate:j}=__privateGet(this,_media7).$props;await(null==(n=null==b?void 0:b.onLoad)?void 0:n.call(b,y()));const w=null==(r=v())?void 0:r.currentTime,A=null==(i=v())?void 0:i.paused,I=await(null==b?void 0:b.getTime()),k=w??I??R(),M=!1===A||!0!==A&&!h()&&u();if(E){E.setVolume(await(null==b?void 0:b.getVolume())??T()),E.setMuted(S()||!!(await(null==b?void 0:b.getMuted())));const e=await(null==b?void 0:b.getAudioGain())??1;e>1&&(null==(a=null==(s=E.audioGain)?void 0:s.setGain)||a.call(s,e)),null==(o=E.setPlaybackRate)||o.call(E,await(null==b?void 0:b.getPlaybackRate())??j()),null==(l=E.setPlaysInline)||l.call(E,x()),k>0&&E.setCurrentTime(k)}const P=await(null==b?void 0:b.getVideoQuality());if(P&&C.length){let e=null,t=1/0;for(const n of C){const r=Math.abs(P.width-n.width)+Math.abs(P.height-n.height)+(P.bitrate?Math.abs(P.bitrate-(n.bitrate??0)):0);r<t&&(e=n,t=r)}e&&(e.selected=!0)}d()&&M?await __privateMethod(this,_MediaPlayerDelegate_instances,attemptAutoplay_fn).call(this,t):I&&I>0&&this.notify("started",void 0,t),g.set(null)})}}_handle=new WeakMap,_media7=new WeakMap,_MediaPlayerDelegate_instances=new WeakSet,attemptAutoplay_fn=async function(e){const{player:t,$state:{autoPlaying:n,muted:r}}=__privateGet(this,_media7);n.set(!0);const i=new DOMEvent("auto-play-attempt",{trigger:e});try{await t.play(i)}catch(s){}};class Queue{constructor(){__privateAdd(this,_queue,new Map)}enqueue(e,t){__privateGet(this,_queue).set(e,t)}serve(e){const t=this.peek(e);return __privateGet(this,_queue).delete(e),t}peek(e){return __privateGet(this,_queue).get(e)}delete(e){__privateGet(this,_queue).delete(e)}clear(){__privateGet(this,_queue).clear()}}_queue=new WeakMap;class RequestQueue{constructor(){__privateAdd(this,_RequestQueue_instances),__privateAdd(this,_serving,!1),__privateAdd(this,_pending,deferredPromise()),__privateAdd(this,_queue2,new Map)}get size(){return __privateGet(this,_queue2).size}get isServing(){return __privateGet(this,_serving)}async waitForFlush(){__privateGet(this,_serving)||await __privateGet(this,_pending).promise}enqueue(e,t){__privateGet(this,_serving)?t():(__privateGet(this,_queue2).delete(e),__privateGet(this,_queue2).set(e,t))}serve(e){var t;null==(t=__privateGet(this,_queue2).get(e))||t(),__privateGet(this,_queue2).delete(e)}start(){__privateMethod(this,_RequestQueue_instances,flush_fn).call(this),__privateSet(this,_serving,!0),__privateGet(this,_queue2).size>0&&__privateMethod(this,_RequestQueue_instances,flush_fn).call(this)}stop(){__privateSet(this,_serving,!1)}reset(){this.stop(),__privateGet(this,_queue2).clear(),__privateMethod(this,_RequestQueue_instances,release_fn).call(this)}}function ariaBool(e){return e?"true":"false"}function $ariaBool(e){return()=>ariaBool(e())}function prefersReducedMotion(){return"undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}_serving=new WeakMap,_pending=new WeakMap,_queue2=new WeakMap,_RequestQueue_instances=new WeakSet,flush_fn=function(){for(const e of __privateGet(this,_queue2).keys())this.serve(e);__privateMethod(this,_RequestQueue_instances,release_fn).call(this)},release_fn=function(){__privateGet(this,_pending).resolve(),__privateSet(this,_pending,deferredPromise())};class MediaRequestManager extends MediaPlayerController{constructor(e,t,n){super(),__privateAdd(this,_MediaRequestManager_instances),__privateAdd(this,_stateMgr),__privateAdd(this,_request),__privateAdd(this,_media8),__publicField(this,"controls"),__privateAdd(this,_fullscreen),__privateAdd(this,_orientation),__privateAdd(this,_$provider),__privateAdd(this,_providerQueue,new RequestQueue),__privateAdd(this,_wasPIPActive,!1),__privateAdd(this,_googleCastLoader),__privateSet(this,_stateMgr,e),__privateSet(this,_request,t),__privateSet(this,_media8,n),__privateSet(this,_$provider,n.$provider),this.controls=new MediaControls,__privateSet(this,_fullscreen,new FullscreenController),__privateSet(this,_orientation,new ScreenOrientationController)}onAttach(){this.listen("fullscreen-change",__privateMethod(this,_MediaRequestManager_instances,onFullscreenChange_fn).bind(this))}onConnect(e){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),n=new EventsController(e),r=__privateMethod(this,_MediaRequestManager_instances,handleRequest_fn).bind(this);for(const i of t)i.startsWith("media-")&&n.add(i,r);__privateMethod(this,_MediaRequestManager_instances,attachLoadPlayListener_fn).call(this),effect(__privateMethod(this,_MediaRequestManager_instances,watchProvider_fn).bind(this)),effect(__privateMethod(this,_MediaRequestManager_instances,watchControlsDelayChange_fn).bind(this)),effect(__privateMethod(this,_MediaRequestManager_instances,watchAudioGainSupport_fn).bind(this)),effect(__privateMethod(this,_MediaRequestManager_instances,watchAirPlaySupport_fn).bind(this)),effect(__privateMethod(this,_MediaRequestManager_instances,watchGoogleCastSupport_fn).bind(this)),effect(__privateMethod(this,_MediaRequestManager_instances,watchFullscreenSupport_fn).bind(this)),effect(__privateMethod(this,_MediaRequestManager_instances,watchPiPSupport_fn).bind(this))}onDestroy(){try{const e=this.createEvent("destroy"),{pictureInPicture:t,fullscreen:n}=this.$state;n()&&this.exitFullscreen("prefer-media",e),t()&&this.exitPictureInPicture(e)}catch(e2){}__privateGet(this,_providerQueue).reset()}async play(e){if(IS_SERVER)return;const{canPlay:t,paused:n,autoPlaying:r}=this.$state;if(__privateMethod(this,_MediaRequestManager_instances,handleLoadPlayStrategy_fn).call(this,e))return;if(!peek(n))return;e&&__privateGet(this,_request).queue.enqueue("media-play-request",e);const i=peek(r);try{const e=peek(__privateGet(this,_$provider));return throwIfNotReadyForPlayback(e,peek(t)),throwIfAutoplayingWithReducedMotion(i),await e.play()}catch(s){const t=this.createEvent("play-fail",{detail:coerceToError(s),trigger:e});throw t.autoPlay=i,__privateGet(this,_stateMgr).handle(t),s}}async pause(e){if(IS_SERVER)return;const{canPlay:t,paused:n}=this.$state;if(!peek(n)){e&&__privateGet(this,_request).queue.enqueue("media-pause-request",e);try{const e=peek(__privateGet(this,_$provider));return throwIfNotReadyForPlayback(e,peek(t)),await e.pause()}catch(r){throw __privateGet(this,_request).queue.delete("media-pause-request"),r}}}setAudioGain(e,t){const{audioGain:n,canSetAudioGain:r}=this.$state;if(n()===e)return;const i=__privateGet(this,_$provider).call(this);if(!(null==i?void 0:i.audioGain)||!r())throw Error("[vidstack] audio gain api not available");t&&__privateGet(this,_request).queue.enqueue("media-audio-gain-change-request",t),i.audioGain.setGain(e)}seekToLiveEdge(e){if(IS_SERVER)return;const{canPlay:t,live:n,liveEdge:r,canSeek:i,liveSyncPosition:s,seekableEnd:a,userBehindLiveEdge:o}=this.$state;if(o.set(!1),peek(()=>!n()||r()||!i()))return;const l=peek(__privateGet(this,_$provider));throwIfNotReadyForPlayback(l,peek(t)),e&&__privateGet(this,_request).queue.enqueue("media-seek-request",e);const c=a()-2;l.setCurrentTime(Math.min(c,s()??c))}async enterFullscreen(e="prefer-media",t){if(IS_SERVER)return;const n=__privateMethod(this,_MediaRequestManager_instances,getFullscreenAdapter_fn).call(this,e);return throwIfFullscreenNotSupported(e,n),n.active?void 0:(peek(this.$state.pictureInPicture)&&(__privateSet(this,_wasPIPActive,!0),await this.exitPictureInPicture(t)),t&&__privateGet(this,_request).queue.enqueue("media-enter-fullscreen-request",t),n.enter())}async exitFullscreen(e="prefer-media",t){if(IS_SERVER)return;const n=__privateMethod(this,_MediaRequestManager_instances,getFullscreenAdapter_fn).call(this,e);if(throwIfFullscreenNotSupported(e,n),n.active){t&&__privateGet(this,_request).queue.enqueue("media-exit-fullscreen-request",t);try{const e=await n.exit();return __privateGet(this,_wasPIPActive)&&peek(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),e}finally{__privateSet(this,_wasPIPActive,!1)}}}async enterPictureInPicture(e){if(!IS_SERVER&&(__privateMethod(this,_MediaRequestManager_instances,throwIfPIPNotSupported_fn).call(this),!this.$state.pictureInPicture()))return e&&__privateGet(this,_request).queue.enqueue("media-enter-pip-request",e),await __privateGet(this,_$provider).call(this).pictureInPicture.enter()}async exitPictureInPicture(e){if(!IS_SERVER&&(__privateMethod(this,_MediaRequestManager_instances,throwIfPIPNotSupported_fn).call(this),this.$state.pictureInPicture()))return e&&__privateGet(this,_request).queue.enqueue("media-exit-pip-request",e),await __privateGet(this,_$provider).call(this).pictureInPicture.exit()}async"media-airplay-request"(e){try{await this.requestAirPlay(e)}catch(t){}}async requestAirPlay(e){var t;try{const n=null==(t=__privateGet(this,_$provider).call(this))?void 0:t.airPlay;if(!(null==n?void 0:n.supported))throw Error("No AirPlay adapter.");return e&&__privateGet(this,_request).queue.enqueue("media-airplay-request",e),await n.prompt()}catch(n){throw __privateGet(this,_request).queue.delete("media-airplay-request"),n}}async"media-google-cast-request"(e){try{await this.requestGoogleCast(e)}catch(t){}}async requestGoogleCast(e){try{const{canGoogleCast:t}=this.$state;if(!peek(t)){const e=Error("Cast not available.");throw e.code="CAST_NOT_AVAILABLE",e}if(preconnect("https://www.gstatic.com"),!__privateGet(this,_googleCastLoader)){const e=await __vitePreload(()=>import("./vidstack-CQQ1xKSy-o1YnGneL.js"),__vite__mapDeps([10,2,1,3])).then(function(e){return e.loader});__privateSet(this,_googleCastLoader,new e.GoogleCastLoader)}await __privateGet(this,_googleCastLoader).prompt(__privateGet(this,_media8)),e&&__privateGet(this,_request).queue.enqueue("media-google-cast-request",e);const n="disconnected"!==peek(this.$state.remotePlaybackState);n&&this.$state.savedState.set({paused:peek(this.$state.paused),currentTime:peek(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(n?__privateGet(this,_googleCastLoader):null)}catch(t){throw __privateGet(this,_request).queue.delete("media-google-cast-request"),t}}"media-clip-start-change-request"(e){const{clipStartTime:t}=this.$state;t.set(e.detail)}"media-clip-end-change-request"(e){const{clipEndTime:t}=this.$state;t.set(e.detail),this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-duration-change-request"(e){const{providedDuration:t,clipEndTime:n}=this.$state;t.set(e.detail),n()<=0&&this.dispatch("duration-change",{detail:e.detail,trigger:e})}"media-audio-track-change-request"(e){const{logger:t,audioTracks:n}=__privateGet(this,_media8);if(n.readonly)return;const r=n[e.detail];if(r){const t=e.type;__privateGet(this,_request).queue.enqueue(t,e),r.selected=!0}}async"media-enter-fullscreen-request"(e){try{await this.enterFullscreen(e.detail,e)}catch(t){__privateMethod(this,_MediaRequestManager_instances,onFullscreenError_fn).call(this,t,e)}}async"media-exit-fullscreen-request"(e){try{await this.exitFullscreen(e.detail,e)}catch(t){__privateMethod(this,_MediaRequestManager_instances,onFullscreenError_fn).call(this,t,e)}}async"media-orientation-lock-request"(e){const t=e.type;try{__privateGet(this,_request).queue.enqueue(t,e),await __privateGet(this,_orientation).lock(e.detail)}catch(n){__privateGet(this,_request).queue.delete(t)}}async"media-orientation-unlock-request"(e){const t=e.type;try{__privateGet(this,_request).queue.enqueue(t,e),await __privateGet(this,_orientation).unlock()}catch(n){__privateGet(this,_request).queue.delete(t)}}async"media-enter-pip-request"(e){try{await this.enterPictureInPicture(e)}catch(t){__privateMethod(this,_MediaRequestManager_instances,onPictureInPictureError_fn).call(this,t,e)}}async"media-exit-pip-request"(e){try{await this.exitPictureInPicture(e)}catch(t){__privateMethod(this,_MediaRequestManager_instances,onPictureInPictureError_fn).call(this,t,e)}}"media-live-edge-request"(e){const{live:t,liveEdge:n,canSeek:r}=this.$state;if(t()&&!n()&&r()){__privateGet(this,_request).queue.enqueue("media-seek-request",e);try{this.seekToLiveEdge()}catch(i){__privateGet(this,_request).queue.delete("media-seek-request")}}}async"media-loop-request"(e){try{__privateGet(this,_request).looping=!0,__privateGet(this,_request).replaying=!0,await this.play(e)}catch(t){__privateGet(this,_request).looping=!1}}"media-user-loop-change-request"(e){this.$state.userPrefersLoop.set(e.detail)}async"media-pause-request"(e){if(!this.$state.paused())try{await this.pause(e)}catch(t){}}async"media-play-request"(e){if(this.$state.paused())try{await this.play(e)}catch(e2){}}"media-rate-change-request"(e){const{playbackRate:t,canSetPlaybackRate:n}=this.$state;if(t()===e.detail||!n())return;const r=__privateGet(this,_$provider).call(this);(null==r?void 0:r.setPlaybackRate)&&(__privateGet(this,_request).queue.enqueue("media-rate-change-request",e),r.setPlaybackRate(e.detail))}"media-audio-gain-change-request"(e){try{this.setAudioGain(e.detail,e)}catch(e2){}}"media-quality-change-request"(e){var t,n;const{qualities:r,storage:i,logger:s}=__privateGet(this,_media8);if(r.readonly)return;__privateGet(this,_request).queue.enqueue("media-quality-change-request",e);const a=e.detail;if(a<0)r.autoSelect(e),e.isOriginTrusted&&(null==(t=null==i?void 0:i.setVideoQuality)||t.call(i,null));else{const t=r[a];t&&(t.selected=!0,e.isOriginTrusted&&(null==(n=null==i?void 0:i.setVideoQuality)||n.call(i,{id:t.id,width:t.width,height:t.height,bitrate:t.bitrate})))}}"media-pause-controls-request"(e){const t=e.type;__privateGet(this,_request).queue.enqueue(t,e),this.controls.pause(e)}"media-resume-controls-request"(e){const t=e.type;__privateGet(this,_request).queue.enqueue(t,e),this.controls.resume(e)}"media-seek-request"(e){const{canSeek:t,ended:n,live:r,seekableEnd:i,userBehindLiveEdge:s}=this.$state,a=e.detail;n()&&(__privateGet(this,_request).replaying=!0);const o=e.type;__privateGet(this,_request).seeking=!1,__privateGet(this,_request).queue.delete(o);const l=boundTime(a,this.$state);Number.isFinite(l)&&t()&&(__privateGet(this,_request).queue.enqueue(o,e),__privateGet(this,_$provider).call(this).setCurrentTime(l),r()&&e.isOriginTrusted&&Math.abs(i()-l)>=2&&s.set(!0))}"media-seeking-request"(e){const t=e.type;__privateGet(this,_request).queue.enqueue(t,e),this.$state.seeking.set(!0),__privateGet(this,_request).seeking=!0}"media-start-loading"(e){if(this.$state.canLoad())return;const t=e.type;__privateGet(this,_request).queue.enqueue(t,e),__privateGet(this,_stateMgr).handle(this.createEvent("can-load"))}"media-poster-start-loading"(e){if(this.$state.canLoadPoster())return;const t=e.type;__privateGet(this,_request).queue.enqueue(t,e),__privateGet(this,_stateMgr).handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(e){const{index:t,mode:n}=e.detail,r=__privateGet(this,_media8).textTracks[t];if(r){const t=e.type;__privateGet(this,_request).queue.enqueue(t,e),r.setMode(n,e)}}"media-mute-request"(e){if(this.$state.muted())return;const t=e.type;__privateGet(this,_request).queue.enqueue(t,e),__privateGet(this,_$provider).call(this).setMuted(!0)}"media-unmute-request"(e){const{muted:t,volume:n}=this.$state;if(!t())return;const r=e.type;__privateGet(this,_request).queue.enqueue(r,e),__privateGet(this,_media8).$provider().setMuted(!1),0===n()&&(__privateGet(this,_request).queue.enqueue(r,e),__privateGet(this,_$provider).call(this).setVolume(.25))}"media-volume-change-request"(e){const{muted:t,volume:n}=this.$state,r=e.detail;if(n()===r)return;const i=e.type;__privateGet(this,_request).queue.enqueue(i,e),__privateGet(this,_$provider).call(this).setVolume(r),r>0&&t()&&(__privateGet(this,_request).queue.enqueue(i,e),__privateGet(this,_$provider).call(this).setMuted(!1))}}function throwIfNotReadyForPlayback(e,t){if(!e||!t)throw Error("[vidstack] media not ready")}function throwIfFullscreenNotSupported(e,t){if(!(null==t?void 0:t.supported))throw Error("[vidstack] no fullscreen support")}function throwIfAutoplayingWithReducedMotion(e){if(prefersReducedMotion()&&e)throw Error("[vidstack] autoplay blocked")}_stateMgr=new WeakMap,_request=new WeakMap,_media8=new WeakMap,_fullscreen=new WeakMap,_orientation=new WeakMap,_$provider=new WeakMap,_providerQueue=new WeakMap,_MediaRequestManager_instances=new WeakSet,attachLoadPlayListener_fn=function(){const{load:e}=this.$props,{canLoad:t}=this.$state;if("play"!==e()||t())return;const n=this.listen("media-play-request",e=>{__privateMethod(this,_MediaRequestManager_instances,handleLoadPlayStrategy_fn).call(this,e),n()})},watchProvider_fn=function(){const e=__privateGet(this,_$provider).call(this),t=this.$state.canPlay();return e&&t&&__privateGet(this,_providerQueue).start(),()=>{__privateGet(this,_providerQueue).stop()}},handleRequest_fn=function(e){e.stopPropagation(),e.defaultPrevented||this[e.type]&&(peek(__privateGet(this,_$provider))?this[e.type](e):__privateGet(this,_providerQueue).enqueue(e.type,()=>{peek(__privateGet(this,_$provider))&&this[e.type](e)}))},handleLoadPlayStrategy_fn=function(e){const{load:t}=this.$props,{canLoad:n}=this.$state;if("play"===t()&&!n()){const t=this.createEvent("media-start-loading",{trigger:e});return this.dispatchEvent(t),__privateGet(this,_providerQueue).enqueue("media-play-request",async()=>{try{await this.play(t)}catch(e){}}),!0}return!1},_wasPIPActive=new WeakMap,getFullscreenAdapter_fn=function(e){const t=peek(__privateGet(this,_$provider));return"prefer-media"===e&&__privateGet(this,_fullscreen).supported||"media"===e?__privateGet(this,_fullscreen):null==t?void 0:t.fullscreen},throwIfPIPNotSupported_fn=function(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")},watchControlsDelayChange_fn=function(){this.controls.defaultDelay=this.$props.controlsDelay()},watchAudioGainSupport_fn=function(){var e,t;const{canSetAudioGain:n}=this.$state,r=!!(null==(t=null==(e=__privateGet(this,_$provider).call(this))?void 0:e.audioGain)?void 0:t.supported);n.set(r)},watchAirPlaySupport_fn=function(){var e,t;const{canAirPlay:n}=this.$state,r=!!(null==(t=null==(e=__privateGet(this,_$provider).call(this))?void 0:e.airPlay)?void 0:t.supported);n.set(r)},watchGoogleCastSupport_fn=function(){const{canGoogleCast:e,source:t}=this.$state,n=IS_CHROME&&!IS_IOS&&canGoogleCastSrc(t());e.set(n)},watchFullscreenSupport_fn=function(){var e,t;const{canFullscreen:n}=this.$state,r=__privateGet(this,_fullscreen).supported||!!(null==(t=null==(e=__privateGet(this,_$provider).call(this))?void 0:e.fullscreen)?void 0:t.supported);n.set(r)},watchPiPSupport_fn=function(){var e,t;const{canPictureInPicture:n}=this.$state,r=!!(null==(t=null==(e=__privateGet(this,_$provider).call(this))?void 0:e.pictureInPicture)?void 0:t.supported);n.set(r)},_googleCastLoader=new WeakMap,onFullscreenChange_fn=async function(e){const t=peek(this.$props.fullscreenOrientation),n=e.detail;if(!isUndefined(t)&&"none"!==t&&__privateGet(this,_orientation).supported)if(n){if(__privateGet(this,_orientation).locked)return;this.dispatch("media-orientation-lock-request",{detail:t,trigger:e})}else __privateGet(this,_orientation).locked&&this.dispatch("media-orientation-unlock-request",{trigger:e})},onFullscreenError_fn=function(e,t){__privateGet(this,_stateMgr).handle(this.createEvent("fullscreen-error",{detail:coerceToError(e)}))},onPictureInPictureError_fn=function(e,t){__privateGet(this,_stateMgr).handle(this.createEvent("picture-in-picture-error",{detail:coerceToError(e)}))},logError_fn=function(e,t,n){};class MediaRequestContext{constructor(){__publicField(this,"seeking",!1),__publicField(this,"looping",!1),__publicField(this,"replaying",!1),__publicField(this,"queue",new Queue)}}const TRACKED_EVENT=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class MediaStateManager extends MediaPlayerController{constructor(e,t){super(),__privateAdd(this,_MediaStateManager_instances),__privateAdd(this,_request2),__privateAdd(this,_media9),__privateAdd(this,_trackedEvents,new Map),__privateAdd(this,_clipEnded,!1),__privateAdd(this,_playedIntervals,[]),__privateAdd(this,_playedInterval,[-1,-1]),__privateAdd(this,_firingWaiting,!1),__privateAdd(this,_waitingTrigger),__privateAdd(this,_isPlayingOnDisconnect,!1),__privateAdd(this,_stopQualityResizeEffect,null),__publicField(this,"seeking",functionThrottle(e=>{const{seeking:t,realCurrentTime:n,paused:r}=this.$state;t.set(!0),n.set(e.detail),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-seeking-request",e),r()&&(__privateSet(this,_waitingTrigger,e),__privateGet(this,_fireWaiting).call(this)),__privateSet(this,_playedInterval,[-1,-1])},150,{leading:!0})),__privateAdd(this,_fireWaiting,functionDebounce(()=>{if(!__privateGet(this,_waitingTrigger))return;__privateSet(this,_firingWaiting,!0);const{waiting:e,playing:t}=this.$state;e.set(!0),t.set(!1);const n=this.createEvent("waiting",{trigger:__privateGet(this,_waitingTrigger)});__privateGet(this,_trackedEvents).set("waiting",n),this.dispatch(n),__privateSet(this,_waitingTrigger,void 0),__privateSet(this,_firingWaiting,!1)},300)),__privateSet(this,_request2,e),__privateSet(this,_media9,t)}onAttach(e){e.setAttribute("aria-busy","true"),new EventsController(this).add("fullscreen-change",this["fullscreen-change"].bind(this)).add("fullscreen-error",this["fullscreen-error"].bind(this)).add("orientation-change",this["orientation-change"].bind(this))}onConnect(e){effect(__privateMethod(this,_MediaStateManager_instances,watchCanSetVolume_fn).bind(this)),__privateMethod(this,_MediaStateManager_instances,addTextTrackListeners_fn).call(this),__privateMethod(this,_MediaStateManager_instances,addQualityListeners_fn).call(this),__privateMethod(this,_MediaStateManager_instances,addAudioTrackListeners_fn).call(this),__privateMethod(this,_MediaStateManager_instances,resumePlaybackOnConnect_fn).call(this),onDispose(__privateMethod(this,_MediaStateManager_instances,pausePlaybackOnDisconnect_fn).bind(this))}onDestroy(){const{audioTracks:e,qualities:t,textTracks:n}=__privateGet(this,_media9);e[ListSymbol.reset](),t[ListSymbol.reset](),n[ListSymbol.reset](),__privateMethod(this,_MediaStateManager_instances,stopWatchingQualityResize_fn).call(this)}handle(e){if(!this.scope)return;const t=e.type;untrack(()=>{var t;return null==(t=this[e.type])?void 0:t.call(this,e)}),IS_SERVER||(TRACKED_EVENT.has(t)&&__privateGet(this,_trackedEvents).set(t,e),this.dispatch(e))}"provider-change"(e){var t,n;const r=__privateGet(this,_media9).$provider(),i=e.detail;(null==r?void 0:r.type)!==(null==i?void 0:i.type)&&(null==(t=null==r?void 0:r.destroy)||t.call(r),null==(n=null==r?void 0:r.scope)||n.dispose(),__privateGet(this,_media9).$provider.set(e.detail),r&&null===e.detail&&__privateMethod(this,_MediaStateManager_instances,resetMediaState_fn).call(this,e))}"provider-loader-change"(e){}"auto-play"(e){this.$state.autoPlayError.set(null)}"auto-play-fail"(e){this.$state.autoPlayError.set(e.detail),__privateMethod(this,_MediaStateManager_instances,resetTracking_fn).call(this)}"can-load"(e){this.$state.canLoad.set(!0),__privateGet(this,_trackedEvents).set("can-load",e),__privateGet(this,_media9).textTracks[TextTrackSymbol.canLoad](),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-start-loading",e)}"can-load-poster"(e){this.$state.canLoadPoster.set(!0),__privateGet(this,_trackedEvents).set("can-load-poster",e),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-poster-start-loading",e)}"media-type-change"(e){const t=__privateGet(this,_trackedEvents).get("source-change");t&&e.triggers.add(t);const n=this.$state.viewType();this.$state.mediaType.set(e.detail);const r=this.$state.providedViewType(),i="unknown"===r?e.detail:r;n!==i&&(IS_SERVER?this.$state.inferredViewType.set(i):setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(e.detail),this.dispatch("view-type-change",{detail:i,trigger:e}))})},0))}"stream-type-change"(e){const t=__privateGet(this,_trackedEvents).get("source-change");t&&e.triggers.add(t);const{streamType:n,inferredStreamType:r}=this.$state;r.set(e.detail),e.detail=n()}"rate-change"(e){var t;const{storage:n}=__privateGet(this,_media9),{canPlay:r}=this.$state;this.$state.playbackRate.set(e.detail),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-rate-change-request",e),r()&&(null==(t=null==n?void 0:n.setPlaybackRate)||t.call(n,e.detail))}"remote-playback-change"(e){const{remotePlaybackState:t,remotePlaybackType:n}=this.$state,{type:r,state:i}=e.detail,s="connected"===i;n.set(r),t.set(i);const a="airplay"===r?"media-airplay-request":"media-google-cast-request";if(s)__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,a,e);else{const t=__privateGet(this,_request2).queue.peek(a);t&&(e.request=t,e.triggers.add(t))}}"sources-change"(e){const t=this.$state.sources(),n=e.detail;this.$state.sources.set(n),__privateMethod(this,_MediaStateManager_instances,onSourceQualitiesChange_fn).call(this,t,n,e)}"source-change"(e){var t,n;e.isQualityChange="quality-change"===(null==(t=e.originEvent)?void 0:t.type);const r=e.detail;__privateMethod(this,_MediaStateManager_instances,resetMediaState_fn).call(this,e,e.isQualityChange),__privateGet(this,_trackedEvents).set(e.type,e),this.$state.source.set(r),null==(n=this.el)||n.setAttribute("aria-busy","true")}abort(e){const t=__privateGet(this,_trackedEvents).get("source-change");t&&e.triggers.add(t);const n=__privateGet(this,_trackedEvents).get("can-load");n&&!e.triggers.hasType("can-load")&&e.triggers.add(n)}"load-start"(e){const t=__privateGet(this,_trackedEvents).get("source-change");t&&e.triggers.add(t)}error(e){this.$state.error.set(e.detail);const t=__privateGet(this,_trackedEvents).get("abort");t&&e.triggers.add(t)}"loaded-metadata"(e){const t=__privateGet(this,_trackedEvents).get("load-start");t&&e.triggers.add(t)}"loaded-data"(e){const t=__privateGet(this,_trackedEvents).get("load-start");t&&e.triggers.add(t)}"can-play"(e){var t;const n=__privateGet(this,_trackedEvents).get("loaded-metadata");n&&e.triggers.add(n),__privateMethod(this,_MediaStateManager_instances,onCanPlayDetail_fn).call(this,e.detail),null==(t=this.el)||t.setAttribute("aria-busy","false")}"can-play-through"(e){__privateMethod(this,_MediaStateManager_instances,onCanPlayDetail_fn).call(this,e.detail);const t=__privateGet(this,_trackedEvents).get("can-play");t&&e.triggers.add(t)}"duration-change"(e){const{live:t,intrinsicDuration:n,providedDuration:r,clipEndTime:i,ended:s}=this.$state,a=e.detail;if(!t()){const t=Number.isNaN(a)?0:a;n.set(t),s()&&__privateMethod(this,_MediaStateManager_instances,onEndPrecisionChange_fn).call(this,e)}(r()>0||i()>0)&&e.stopImmediatePropagation()}progress(e){const{buffered:t,seekable:n}=this.$state,{buffered:r,seekable:i}=e.detail,s=getTimeRangesEnd(r),a=r.length!==t().length,o=s!==getTimeRangesEnd(t()),l=getTimeRangesEnd(i),c=i.length!==n().length,u=l!==getTimeRangesEnd(n());(a||o)&&t.set(r),(c||u)&&n.set(i)}play(e){const{paused:t,autoPlayError:n,ended:r,autoPlaying:i,playsInline:s,pointer:a,muted:o,viewType:l,live:c,userBehindLiveEdge:u}=this.$state;if(__privateMethod(this,_MediaStateManager_instances,resetPlaybackIfNeeded_fn).call(this),!t())return void e.stopImmediatePropagation();e.autoPlay=i();const d=__privateGet(this,_trackedEvents).get("waiting");d&&e.triggers.add(d),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-play-request",e),__privateGet(this,_trackedEvents).set("play",e),t.set(!1),n.set(null),e.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:o()},trigger:e})),i.set(!1)),(r()||__privateGet(this,_request2).replaying)&&(__privateGet(this,_request2).replaying=!1,r.set(!1),this.handle(this.createEvent("replay",{trigger:e}))),s()||"video"!==l()||"coarse"!==a()||__privateGet(this,_media9).remote.enterFullscreen("prefer-media",e),c()&&!u()&&__privateGet(this,_media9).remote.seekToLiveEdge(e)}"play-fail"(e){const{muted:t,autoPlaying:n}=this.$state,r=__privateGet(this,_trackedEvents).get("play");r&&e.triggers.add(r),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-play-request",e);const{paused:i,playing:s}=this.$state;i.set(!0),s.set(!1),__privateMethod(this,_MediaStateManager_instances,resetTracking_fn).call(this),__privateGet(this,_trackedEvents).set("play-fail",e),e.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:t(),error:e.detail},trigger:e})),n.set(!1))}playing(e){const t=__privateGet(this,_trackedEvents).get("play"),n=__privateGet(this,_trackedEvents).get("seeked");t?e.triggers.add(t):n&&e.triggers.add(n),setTimeout(()=>__privateMethod(this,_MediaStateManager_instances,resetTracking_fn).call(this),0);const{paused:r,playing:i,live:s,liveSyncPosition:a,seekableEnd:o,started:l,currentTime:c,seeking:u,ended:d}=this.$state;if(r.set(!1),i.set(!0),u.set(!1),d.set(!1),__privateGet(this,_request2).looping)__privateGet(this,_request2).looping=!1;else{if(s()&&!l()&&0===c()){const e=a()??o()-2;Number.isFinite(e)&&__privateGet(this,_media9).$provider().setCurrentTime(e)}this.started(e)}}started(e){const{started:t}=this.$state;t()||(t.set(!0),this.handle(this.createEvent("started",{trigger:e})))}pause(e){var t;(null==(t=this.el)?void 0:t.isConnected)||__privateSet(this,_isPlayingOnDisconnect,!0),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-pause-request",e);const n=__privateGet(this,_trackedEvents).get("seeked");n&&e.triggers.add(n);const{paused:r,playing:i}=this.$state;r.set(!0),i.set(!1),__privateGet(this,_clipEnded)&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:e})),__privateSet(this,_clipEnded,!1)},0),__privateMethod(this,_MediaStateManager_instances,resetTracking_fn).call(this)}"time-change"(e){if(__privateGet(this,_request2).looping)return void e.stopImmediatePropagation();let{waiting:t,played:n,clipEndTime:r,realCurrentTime:i,currentTime:s}=this.$state,a=e.detail,o=r();i.set(a),__privateMethod(this,_MediaStateManager_instances,updatePlayed_fn).call(this),t.set(!1);for(const l of __privateGet(this,_media9).textTracks)l[TextTrackSymbol.updateActiveCues](a,e);o>0&&a>=o&&(__privateSet(this,_clipEnded,!0),this.dispatch("media-pause-request",{trigger:e})),__privateMethod(this,_MediaStateManager_instances,saveTime_fn).call(this),this.dispatch("time-update",{detail:{currentTime:s(),played:n()},trigger:e})}"audio-gain-change"(e){var t;const{storage:n}=__privateGet(this,_media9),{canPlay:r,audioGain:i}=this.$state;i.set(e.detail),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-audio-gain-change-request",e),r()&&(null==(t=null==n?void 0:n.setAudioGain)||t.call(n,i()))}"volume-change"(e){var t,n;const{storage:r}=__privateGet(this,_media9),{volume:i,muted:s,canPlay:a}=this.$state,o=e.detail;i.set(o.volume),s.set(o.muted||0===o.volume),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-volume-change-request",e),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,o.muted?"media-mute-request":"media-unmute-request",e),a()&&(null==(t=null==r?void 0:r.setVolume)||t.call(r,i()),null==(n=null==r?void 0:r.setMuted)||n.call(r,s()))}seeked(e){const{seeking:t,currentTime:n,realCurrentTime:r,paused:i,seekableEnd:s,ended:a,live:o}=this.$state;if(__privateGet(this,_request2).seeking)t.set(!0),e.stopImmediatePropagation();else if(t()){const n=__privateGet(this,_trackedEvents).get("waiting");n&&e.triggers.add(n);const s=__privateGet(this,_trackedEvents).get("seeking");s&&!e.triggers.has(s)&&e.triggers.add(s),i()&&__privateMethod(this,_MediaStateManager_instances,stopWaiting_fn).call(this),t.set(!1),r.set(e.detail),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-seek-request",e);const a=null==e?void 0:e.originEvent;!(null==a?void 0:a.isTrusted)||a instanceof MessageEvent||/seek/.test(a.type)||this.started(e)}o()||(Math.floor(n())!==Math.floor(s())?a.set(!1):this.end(e))}waiting(e){__privateGet(this,_firingWaiting)||__privateGet(this,_request2).seeking||(e.stopImmediatePropagation(),__privateSet(this,_waitingTrigger,e),__privateGet(this,_fireWaiting).call(this))}end(e){const{loop:t,ended:n}=this.$state;!t()&&n()||(t()?setTimeout(()=>{requestAnimationFrame(()=>{__privateMethod(this,_MediaStateManager_instances,resetPlaybackIfNeeded_fn).call(this,e),this.dispatch("media-loop-request",{trigger:e})})},10):setTimeout(()=>__privateMethod(this,_MediaStateManager_instances,onEnded_fn2).call(this,e),0))}"fullscreen-change"(e){const t=e.detail;this.$state.fullscreen.set(t),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,t?"media-enter-fullscreen-request":"media-exit-fullscreen-request",e)}"fullscreen-error"(e){__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-enter-fullscreen-request",e),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-exit-fullscreen-request",e)}"orientation-change"(e){const t=e.detail.lock;__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,t?"media-orientation-lock-request":"media-orientation-unlock-request",e)}"picture-in-picture-change"(e){const t=e.detail;this.$state.pictureInPicture.set(t),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,t?"media-enter-pip-request":"media-exit-pip-request",e)}"picture-in-picture-error"(e){__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-enter-pip-request",e),__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-exit-pip-request",e)}"title-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredTitle.set(e.detail))}"poster-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredPoster.set(e.detail))}}_request2=new WeakMap,_media9=new WeakMap,_trackedEvents=new WeakMap,_clipEnded=new WeakMap,_playedIntervals=new WeakMap,_playedInterval=new WeakMap,_firingWaiting=new WeakMap,_waitingTrigger=new WeakMap,_isPlayingOnDisconnect=new WeakMap,_MediaStateManager_instances=new WeakSet,resumePlaybackOnConnect_fn=function(){__privateGet(this,_isPlayingOnDisconnect)&&(requestAnimationFrame(()=>{this.scope&&__privateGet(this,_media9).remote.play(new DOMEvent("dom-connect"))}),__privateSet(this,_isPlayingOnDisconnect,!1))},pausePlaybackOnDisconnect_fn=function(){var e;__privateGet(this,_isPlayingOnDisconnect)||(__privateSet(this,_isPlayingOnDisconnect,!this.$state.paused()),null==(e=__privateGet(this,_media9).$provider())||e.pause())},resetTracking_fn=function(){__privateMethod(this,_MediaStateManager_instances,stopWaiting_fn).call(this),__privateSet(this,_clipEnded,!1),__privateGet(this,_request2).replaying=!1,__privateGet(this,_request2).looping=!1,__privateSet(this,_firingWaiting,!1),__privateSet(this,_waitingTrigger,void 0),__privateGet(this,_trackedEvents).clear()},satisfyRequest_fn=function(e,t){const n=__privateGet(this,_request2).queue.serve(e);n&&(t.request=n,t.triggers.add(n))},addTextTrackListeners_fn=function(){__privateMethod(this,_MediaStateManager_instances,onTextTracksChange_fn).call(this),__privateMethod(this,_MediaStateManager_instances,onTextTrackModeChange_fn).call(this);const e=__privateGet(this,_media9).textTracks;new EventsController(e).add("add",__privateMethod(this,_MediaStateManager_instances,onTextTracksChange_fn).bind(this)).add("remove",__privateMethod(this,_MediaStateManager_instances,onTextTracksChange_fn).bind(this)).add("mode-change",__privateMethod(this,_MediaStateManager_instances,onTextTrackModeChange_fn).bind(this))},addQualityListeners_fn=function(){const e=__privateGet(this,_media9).qualities;new EventsController(e).add("add",__privateMethod(this,_MediaStateManager_instances,onQualitiesChange_fn).bind(this)).add("remove",__privateMethod(this,_MediaStateManager_instances,onQualitiesChange_fn).bind(this)).add("change",__privateMethod(this,_MediaStateManager_instances,onQualityChange_fn2).bind(this)).add("auto-change",__privateMethod(this,_MediaStateManager_instances,onAutoQualityChange_fn).bind(this)).add("readonly-change",__privateMethod(this,_MediaStateManager_instances,onCanSetQualityChange_fn).bind(this))},addAudioTrackListeners_fn=function(){const e=__privateGet(this,_media9).audioTracks;new EventsController(e).add("add",__privateMethod(this,_MediaStateManager_instances,onAudioTracksChange_fn).bind(this)).add("remove",__privateMethod(this,_MediaStateManager_instances,onAudioTracksChange_fn).bind(this)).add("change",__privateMethod(this,_MediaStateManager_instances,onAudioTrackChange_fn).bind(this))},onTextTracksChange_fn=function(e){const{textTracks:t}=this.$state;t.set(__privateGet(this,_media9).textTracks.toArray()),this.dispatch("text-tracks-change",{detail:t(),trigger:e})},onTextTrackModeChange_fn=function(e){e&&__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-text-track-change-request",e);const t=__privateGet(this,_media9).textTracks.selected,{textTrack:n}=this.$state;n()!==t&&(n.set(t),this.dispatch("text-track-change",{detail:t,trigger:e}))},onAudioTracksChange_fn=function(e){const{audioTracks:t}=this.$state;t.set(__privateGet(this,_media9).audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:t(),trigger:e})},onAudioTrackChange_fn=function(e){const{audioTrack:t}=this.$state;t.set(__privateGet(this,_media9).audioTracks.selected),e&&__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-audio-track-change-request",e),this.dispatch("audio-track-change",{detail:t(),trigger:e})},onQualitiesChange_fn=function(e){const{qualities:t}=this.$state;t.set(__privateGet(this,_media9).qualities.toArray()),this.dispatch("qualities-change",{detail:t(),trigger:e})},onQualityChange_fn2=function(e){const{quality:t}=this.$state;t.set(__privateGet(this,_media9).qualities.selected),e&&__privateMethod(this,_MediaStateManager_instances,satisfyRequest_fn).call(this,"media-quality-change-request",e),this.dispatch("quality-change",{detail:t(),trigger:e})},onAutoQualityChange_fn=function(){const{qualities:e}=__privateGet(this,_media9),t=e.auto;this.$state.autoQuality.set(t),t||__privateMethod(this,_MediaStateManager_instances,stopWatchingQualityResize_fn).call(this)},_stopQualityResizeEffect=new WeakMap,watchQualityResize_fn=function(){__privateMethod(this,_MediaStateManager_instances,stopWatchingQualityResize_fn).call(this),__privateSet(this,_stopQualityResizeEffect,effect(()=>{const{qualities:e}=__privateGet(this,_media9),{mediaWidth:t,mediaHeight:n}=this.$state,r=t(),i=n();if(0===r||0===i)return;let s=null,a=1/0;for(const o of e){const e=Math.abs(o.width-r)+Math.abs(o.height-i);e<a&&(a=e,s=o)}s&&e[ListSymbol.select](s,!0,new DOMEvent("resize",{detail:{width:r,height:i}}))}))},stopWatchingQualityResize_fn=function(){var e;null==(e=__privateGet(this,_stopQualityResizeEffect))||e.call(this),__privateSet(this,_stopQualityResizeEffect,null)},onCanSetQualityChange_fn=function(){this.$state.canSetQuality.set(!__privateGet(this,_media9).qualities.readonly)},watchCanSetVolume_fn=function(){const{canSetVolume:e,isGoogleCastConnected:t}=this.$state;t()?e.set(!1):canChangeVolume().then(e.set)},onSourceQualitiesChange_fn=function(e,t,n){let{qualities:r}=__privateGet(this,_media9),i=!1,s=!1;for(const a of e){if(!isVideoQualitySrc(a))continue;if(!t.some(e=>e.src===a.src)){const e=r.getBySrc(a.src);e&&(r[ListSymbol.remove](e,n),s=!0)}}s&&!r.length&&(this.$state.savedState.set(null),r[ListSymbol.reset](n));for(const a of t){if(!isVideoQualitySrc(a)||r.getBySrc(a.src))continue;const e={id:a.id??a.height+"p",bitrate:null,codec:null,...a,selected:!1};r[ListSymbol.add](e,n),i=!0}i&&!r[QualitySymbol.enableAuto]&&(__privateMethod(this,_MediaStateManager_instances,watchQualityResize_fn).call(this),r[QualitySymbol.enableAuto]=__privateMethod(this,_MediaStateManager_instances,watchQualityResize_fn).bind(this),r[QualitySymbol.setAuto](!0,n))},resetMediaState_fn=function(e,t=!1){const{audioTracks:n,qualities:r}=__privateGet(this,_media9);if(!t)return __privateSet(this,_playedIntervals,[]),__privateSet(this,_playedInterval,[-1,-1]),n[ListSymbol.reset](e),r[ListSymbol.reset](e),softResetMediaState(this.$state,t),void __privateMethod(this,_MediaStateManager_instances,resetTracking_fn).call(this);softResetMediaState(this.$state,t),__privateMethod(this,_MediaStateManager_instances,resetTracking_fn).call(this)},onCanPlayDetail_fn=function(e){const{seekable:t,buffered:n,intrinsicDuration:r,canPlay:i}=this.$state;i.set(!0),n.set(e.buffered),t.set(e.seekable);const s=getTimeRangesEnd(e.seekable)??1/0;r.set(s)},resetPlaybackIfNeeded_fn=function(e){if(!peek(__privateGet(this,_media9).$provider))return;const{ended:t,seekableStart:n,clipEndTime:r,currentTime:i,realCurrentTime:s,duration:a}=this.$state,o=t()||s()<n()||r()>0&&s()>=r()||Math.abs(i()-a())<.1;return o&&this.dispatch("media-seek-request",{detail:n(),trigger:e}),o},updatePlayed_fn=function(){const{currentTime:e,played:t,paused:n}=this.$state;n()||(__privateSet(this,_playedInterval,updateTimeIntervals(__privateGet(this,_playedIntervals),__privateGet(this,_playedInterval),e())),t.set(new TimeRange(__privateGet(this,_playedIntervals))))},onEndPrecisionChange_fn=function(e){const{clipStartTime:t,clipEndTime:n,duration:r}=this.$state;t()>0||n()>0||this.handle(this.createEvent("time-change",{detail:r(),trigger:e}))},saveTime_fn=function(){var e;const{storage:t}=__privateGet(this,_media9),{canPlay:n,realCurrentTime:r}=this.$state;n()&&(null==(e=null==t?void 0:t.setTime)||e.call(t,r()))},_fireWaiting=new WeakMap,onEnded_fn2=function(e){var t;const{storage:n}=__privateGet(this,_media9),{paused:r,seeking:i,ended:s,duration:a}=this.$state;__privateMethod(this,_MediaStateManager_instances,onEndPrecisionChange_fn).call(this,e),r()||this.dispatch("pause",{trigger:e}),i()&&this.dispatch("seeked",{detail:a(),trigger:e}),s.set(!0),__privateMethod(this,_MediaStateManager_instances,resetTracking_fn).call(this),null==(t=null==n?void 0:n.setTime)||t.call(n,a(),!0),this.dispatch("ended",{trigger:e})},stopWaiting_fn=function(){__privateGet(this,_fireWaiting).cancel(),this.$state.waiting.set(!1)};class MediaStateSync extends MediaPlayerController{constructor(){super(...arguments),__privateAdd(this,_MediaStateSync_instances)}onSetup(){if(__privateMethod(this,_MediaStateSync_instances,init_fn2).call(this),IS_SERVER)return;const e=[__privateMethod(this,_MediaStateSync_instances,watchMetadata_fn),__privateMethod(this,_MediaStateSync_instances,watchAutoplay_fn),__privateMethod(this,_MediaStateSync_instances,watchClipStartTime_fn),__privateMethod(this,_MediaStateSync_instances,watchClipEndTime_fn),__privateMethod(this,_MediaStateSync_instances,watchControls_fn2),__privateMethod(this,_MediaStateSync_instances,watchCrossOrigin_fn),__privateMethod(this,_MediaStateSync_instances,watchDuration_fn),__privateMethod(this,_MediaStateSync_instances,watchLive_fn),__privateMethod(this,_MediaStateSync_instances,watchLiveEdge_fn),__privateMethod(this,_MediaStateSync_instances,watchLiveTolerance_fn),__privateMethod(this,_MediaStateSync_instances,watchLoop_fn),__privateMethod(this,_MediaStateSync_instances,watchPlaysInline_fn),__privateMethod(this,_MediaStateSync_instances,watchPoster_fn),__privateMethod(this,_MediaStateSync_instances,watchProvidedTypes_fn),__privateMethod(this,_MediaStateSync_instances,watchTitle_fn)];for(const t of e)effect(t.bind(this))}}_MediaStateSync_instances=new WeakSet,init_fn2=function(){var e;const t={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},n=new Set(["currentTime","paused","playbackRate","volume"]);for(const r of Object.keys(this.$props))n.has(r)||null==(e=this.$state[t[r]??r])||e.set(this.$props[r]());this.$state.muted.set(this.$props.muted()||0===this.$props.volume())},watchProvidedTypes_fn=function(){const{viewType:e,streamType:t,title:n,poster:r,loop:i}=this.$props,s=this.$state;s.providedPoster.set(r()),s.providedStreamType.set(t()),s.providedViewType.set(e()),s.providedTitle.set(n()),s.providedLoop.set(i())},watchLogLevel_fn=function(){},watchMetadata_fn=function(){const{artist:e,artwork:t}=this.$props;this.$state.artist.set(e()),this.$state.artwork.set(t())},watchTitle_fn=function(){const{title:e}=this.$state;this.dispatch("title-change",{detail:e()})},watchAutoplay_fn=function(){const e=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(e),this.dispatch("auto-play-change",{detail:e})},watchLoop_fn=function(){const e=this.$state.loop();this.dispatch("loop-change",{detail:e})},watchControls_fn2=function(){const e=this.$props.controls();this.$state.controls.set(e)},watchPoster_fn=function(){const{poster:e}=this.$state;this.dispatch("poster-change",{detail:e()})},watchCrossOrigin_fn=function(){const e=this.$props.crossOrigin()??this.$props.crossorigin(),t=!0===e?"":e;this.$state.crossOrigin.set(t)},watchDuration_fn=function(){const{duration:e}=this.$props;this.dispatch("media-duration-change-request",{detail:e()})},watchPlaysInline_fn=function(){const e=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(e),this.dispatch("plays-inline-change",{detail:e})},watchClipStartTime_fn=function(){const{clipStartTime:e}=this.$props;this.dispatch("media-clip-start-change-request",{detail:e()})},watchClipEndTime_fn=function(){const{clipEndTime:e}=this.$props;this.dispatch("media-clip-end-change-request",{detail:e()})},watchLive_fn=function(){this.dispatch("live-change",{detail:this.$state.live()})},watchLiveTolerance_fn=function(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())},watchLiveEdge_fn=function(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})};const actions=["play","pause","seekforward","seekbackward","seekto"];class NavigatorMediaSession extends MediaPlayerController{constructor(){super(...arguments),__privateAdd(this,_NavigatorMediaSession_instances)}onConnect(){effect(__privateMethod(this,_NavigatorMediaSession_instances,onMetadataChange_fn).bind(this)),effect(__privateMethod(this,_NavigatorMediaSession_instances,onPlaybackStateChange_fn).bind(this));const e=__privateMethod(this,_NavigatorMediaSession_instances,handleAction_fn).bind(this);for(const t of actions)navigator.mediaSession.setActionHandler(t,e);onDispose(__privateMethod(this,_NavigatorMediaSession_instances,onDisconnect_fn3).bind(this))}}_NavigatorMediaSession_instances=new WeakSet,onDisconnect_fn3=function(){for(const e of actions)navigator.mediaSession.setActionHandler(e,null)},onMetadataChange_fn=function(){const{title:e,artist:t,artwork:n,poster:r}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:e(),artist:t(),artwork:n()??[{src:r()}]})},onPlaybackStateChange_fn=function(){const{canPlay:e,paused:t}=this.$state;navigator.mediaSession.playbackState=e()?t()?"paused":"playing":"none"},handleAction_fn=function(e){const t=new DOMEvent("media-session-action",{detail:e});switch(e.action){case"play":this.dispatch("media-play-request",{trigger:t});break;case"pause":this.dispatch("media-pause-request",{trigger:t});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:isNumber(e.seekTime)?e.seekTime:this.$state.currentTime()+(e.seekOffset??("seekforward"===e.action?10:-10)),trigger:t})}};let $keyboard=signal(!1);IS_SERVER||(listenEvent(document,"pointerdown",()=>{$keyboard.set(!1)}),listenEvent(document,"keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||$keyboard.set(!0)}));class FocusVisibleController extends ViewController{constructor(){super(...arguments),__privateAdd(this,_FocusVisibleController_instances),__privateAdd(this,_focused,signal(!1))}onConnect(e){effect(()=>{const t=new EventsController(e);if(!$keyboard())return __privateGet(this,_focused).set(!1),updateFocusAttr(e,!1),void t.add("pointerenter",__privateMethod(this,_FocusVisibleController_instances,onPointerEnter_fn).bind(this)).add("pointerleave",__privateMethod(this,_FocusVisibleController_instances,onPointerLeave_fn).bind(this));const n=document.activeElement===e;__privateGet(this,_focused).set(n),updateFocusAttr(e,n),t.add("focus",__privateMethod(this,_FocusVisibleController_instances,onFocus_fn).bind(this)).add("blur",__privateMethod(this,_FocusVisibleController_instances,onBlur_fn).bind(this))})}focused(){return __privateGet(this,_focused).call(this)}}function updateFocusAttr(e,t){setAttribute(e,"data-focus",t),setAttribute(e,"data-hocus",t)}function updateHoverAttr(e,t){setAttribute(e,"data-hocus",t),setAttribute(e,"data-hover",t)}_focused=new WeakMap,_FocusVisibleController_instances=new WeakSet,onFocus_fn=function(){__privateGet(this,_focused).set(!0),updateFocusAttr(this.el,!0)},onBlur_fn=function(){__privateGet(this,_focused).set(!1),updateFocusAttr(this.el,!1)},onPointerEnter_fn=function(){updateHoverAttr(this.el,!0)},onPointerLeave_fn=function(){updateHoverAttr(this.el,!1)};let MediaPlayer$1=(_n=class extends Component{constructor(){super(),__privateAdd(this,_MediaPlayer_instances),__privateAdd(this,_media10),__privateAdd(this,_stateMgr2),__privateAdd(this,_requestMgr),__publicField(this,"canPlayQueue",new RequestQueue),__publicField(this,"remoteControl"),__privateAdd(this,_skipTitleUpdate,!1),__publicField(this,"orientation"),new MediaStateSync;const e={player:this,qualities:new VideoQualityList,audioTracks:new AudioTrackList,storage:null,$provider:signal(null),$providerSetup:signal(!1),$props:this.$props,$state:this.$state};e.remote=this.remoteControl=new MediaRemoteControl(void 0),e.remote.setPlayer(this),e.textTracks=new TextTrackList,e.textTracks[TextTrackSymbol.crossOrigin]=this.$state.crossOrigin,e.textRenderers=new TextRenderers(e),e.ariaKeys={},__privateSet(this,_media10,e),provideContext(mediaContext,e),this.orientation=new ScreenOrientationController,new FocusVisibleController,new MediaKeyboardController(e);const t=new MediaRequestContext;__privateSet(this,_stateMgr2,new MediaStateManager(t,e)),__privateSet(this,_requestMgr,new MediaRequestManager(__privateGet(this,_stateMgr2),t,e)),e.delegate=new MediaPlayerDelegate(__privateGet(this,_stateMgr2).handle.bind(__privateGet(this,_stateMgr2)),e),e.notify=e.delegate.notify.bind(e.delegate),"undefined"!=typeof navigator&&"mediaSession"in navigator&&new NavigatorMediaSession,new MediaLoadController("load",this.startLoading.bind(this)),new MediaLoadController("posterLoad",this.startLoadingPoster.bind(this))}onSetup(){__privateMethod(this,_MediaPlayer_instances,setupMediaAttributes_fn).call(this),effect(__privateMethod(this,_MediaPlayer_instances,watchCanPlay_fn).bind(this)),effect(__privateMethod(this,_MediaPlayer_instances,watchMuted_fn).bind(this)),effect(__privateMethod(this,_MediaPlayer_instances,watchPaused_fn2).bind(this)),effect(__privateMethod(this,_MediaPlayer_instances,watchVolume_fn).bind(this)),effect(__privateMethod(this,_MediaPlayer_instances,watchCurrentTime_fn).bind(this)),effect(__privateMethod(this,_MediaPlayer_instances,watchPlaysInline_fn2).bind(this)),effect(__privateMethod(this,_MediaPlayer_instances,watchPlaybackRate_fn).bind(this))}onAttach(e){e.setAttribute("data-media-player",""),setAttributeIfEmpty(e,"tabindex","0"),setAttributeIfEmpty(e,"role","region"),effect(__privateMethod(this,_MediaPlayer_instances,watchStorage_fn).bind(this)),IS_SERVER?__privateMethod(this,_MediaPlayer_instances,watchTitle_fn2).call(this):effect(__privateMethod(this,_MediaPlayer_instances,watchTitle_fn2).bind(this)),IS_SERVER?__privateMethod(this,_MediaPlayer_instances,watchOrientation_fn).call(this):effect(__privateMethod(this,_MediaPlayer_instances,watchOrientation_fn).bind(this)),listenEvent(e,"find-media-player",__privateMethod(this,_MediaPlayer_instances,onFindPlayer_fn).bind(this))}onConnect(e){IS_IPHONE&&setAttribute(e,"data-iphone","");const t=window.matchMedia("(pointer: coarse)");__privateMethod(this,_MediaPlayer_instances,onPointerChange_fn).call(this,t),t.onchange=__privateMethod(this,_MediaPlayer_instances,onPointerChange_fn).bind(this);const n=new ResizeObserver(animationFrameThrottle(__privateMethod(this,_MediaPlayer_instances,onResize_fn).bind(this)));n.observe(e),effect(__privateMethod(this,_MediaPlayer_instances,onResize_fn).bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),onDispose(()=>{n.disconnect(),t.onchange=null})}onDestroy(){__privateGet(this,_media10).player=null,this.canPlayQueue.reset()}get provider(){return __privateGet(this,_MediaPlayer_instances,provider_get)}get controls(){return __privateGet(this,_requestMgr).controls}set controls(e){__privateGet(this,_MediaPlayer_instances,props_get).controls.set(e)}get title(){return peek(this.$state.title)}set title(e){__privateGet(this,_skipTitleUpdate)?__privateSet(this,_skipTitleUpdate,!1):__privateGet(this,_MediaPlayer_instances,props_get).title.set(e)}get qualities(){return __privateGet(this,_media10).qualities}get audioTracks(){return __privateGet(this,_media10).audioTracks}get textTracks(){return __privateGet(this,_media10).textTracks}get textRenderers(){return __privateGet(this,_media10).textRenderers}get duration(){return this.$state.duration()}set duration(e){__privateGet(this,_MediaPlayer_instances,props_get).duration.set(e)}get paused(){return peek(this.$state.paused)}set paused(e){__privateMethod(this,_MediaPlayer_instances,queuePausedUpdate_fn).call(this,e)}get muted(){return peek(this.$state.muted)}set muted(e){__privateMethod(this,_MediaPlayer_instances,queueMutedUpdate_fn).call(this,e)}get currentTime(){return peek(this.$state.currentTime)}set currentTime(e){__privateMethod(this,_MediaPlayer_instances,queueCurrentTimeUpdate_fn).call(this,e)}get volume(){return peek(this.$state.volume)}set volume(e){__privateMethod(this,_MediaPlayer_instances,queueVolumeUpdate_fn).call(this,e)}get playbackRate(){return peek(this.$state.playbackRate)}set playbackRate(e){__privateMethod(this,_MediaPlayer_instances,queuePlaybackRateUpdate_fn).call(this,e)}async play(e){return __privateGet(this,_requestMgr).play(e)}async pause(e){return __privateGet(this,_requestMgr).pause(e)}async enterFullscreen(e,t){return __privateGet(this,_requestMgr).enterFullscreen(e,t)}async exitFullscreen(e,t){return __privateGet(this,_requestMgr).exitFullscreen(e,t)}enterPictureInPicture(e){return __privateGet(this,_requestMgr).enterPictureInPicture(e)}exitPictureInPicture(e){return __privateGet(this,_requestMgr).exitPictureInPicture(e)}seekToLiveEdge(e){__privateGet(this,_requestMgr).seekToLiveEdge(e)}startLoading(e){__privateGet(this,_media10).notify("can-load",void 0,e)}startLoadingPoster(e){__privateGet(this,_media10).notify("can-load-poster",void 0,e)}requestAirPlay(e){return __privateGet(this,_requestMgr).requestAirPlay(e)}requestGoogleCast(e){return __privateGet(this,_requestMgr).requestGoogleCast(e)}setAudioGain(e,t){return __privateGet(this,_requestMgr).setAudioGain(e,t)}destroy(){super.destroy(),__privateGet(this,_media10).remote.setPlayer(null),this.dispatch("destroy")}},_media10=new WeakMap,_stateMgr2=new WeakMap,_requestMgr=new WeakMap,_MediaPlayer_instances=new WeakSet,provider_get=function(){return __privateGet(this,_media10).$provider()},props_get=function(){return this.$props},_skipTitleUpdate=new WeakMap,watchTitle_fn2=function(){const e=this.$el,{title:t,live:n,viewType:r,providedTitle:i}=this.$state,s=n(),a=uppercaseFirstChar(r()),o="Unknown"!==a?`${s?"Live ":""}${a}`:s?"Live":"Media",l=t();setAttribute(this.el,"aria-label",`${o} Player`+(l?` - ${l}`:"")),!IS_SERVER&&(null==e?void 0:e.hasAttribute("title"))&&(__privateSet(this,_skipTitleUpdate,!0),null==e||e.removeAttribute("title"))},watchOrientation_fn=function(){const e=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(e),setAttribute(this.el,"data-orientation",e),__privateMethod(this,_MediaPlayer_instances,onResize_fn).call(this)},watchCanPlay_fn=function(){this.$state.canPlay()&&__privateGet(this,_MediaPlayer_instances,provider_get)?this.canPlayQueue.start():this.canPlayQueue.stop()},setupMediaAttributes_fn=function(){if(_n[MEDIA_ATTRIBUTES])return void this.setAttributes(_n[MEDIA_ATTRIBUTES]);const e={"data-load":function(){return this.$props.load()},"data-captions":function(){const e=this.$state.textTrack();return!!e&&isTrackCaptionKind(e)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canLoad:e,canPlay:t,waiting:n}=this.$state;return e()&&(!t()||n())},"data-error":function(){const{error:e}=this.$state;return!!e()},"data-autoplay-error":function(){const{autoPlayError:e}=this.$state;return!!e()}},t={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(const n of mediaAttributes){e["data-"+(t[n]??camelToKebabCase(n))]=function(){return this.$state[n]()}}delete e.title,_n[MEDIA_ATTRIBUTES]=e,this.setAttributes(e)},onFindPlayer_fn=function(e){e.detail(this)},onResize_fn=function(){if(IS_SERVER||!this.el)return;const e=this.el.clientWidth,t=this.el.clientHeight;this.$state.width.set(e),this.$state.height.set(t),setStyle(this.el,"--player-width",e+"px"),setStyle(this.el,"--player-height",t+"px")},onPointerChange_fn=function(e){if(IS_SERVER)return;const t=e.matches?"coarse":"fine";setAttribute(this.el,"data-pointer",t),this.$state.pointer.set(t),__privateMethod(this,_MediaPlayer_instances,onResize_fn).call(this)},watchPaused_fn2=function(){__privateMethod(this,_MediaPlayer_instances,queuePausedUpdate_fn).call(this,this.$props.paused())},queuePausedUpdate_fn=function(e){e?this.canPlayQueue.enqueue("paused",()=>__privateGet(this,_requestMgr).pause()):this.canPlayQueue.enqueue("paused",()=>__privateGet(this,_requestMgr).play())},watchMuted_fn=function(){__privateMethod(this,_MediaPlayer_instances,queueMutedUpdate_fn).call(this,this.$props.muted())},queueMutedUpdate_fn=function(e){this.canPlayQueue.enqueue("muted",()=>{__privateGet(this,_MediaPlayer_instances,provider_get)&&__privateGet(this,_MediaPlayer_instances,provider_get).setMuted(e)})},watchCurrentTime_fn=function(){__privateMethod(this,_MediaPlayer_instances,queueCurrentTimeUpdate_fn).call(this,this.$props.currentTime())},queueCurrentTimeUpdate_fn=function(e){this.canPlayQueue.enqueue("currentTime",()=>{const{currentTime:t}=this.$state;e!==peek(t)&&peek(()=>{if(!__privateGet(this,_MediaPlayer_instances,provider_get))return;const t=boundTime(e,this.$state);Number.isFinite(t)&&__privateGet(this,_MediaPlayer_instances,provider_get).setCurrentTime(t)})})},watchVolume_fn=function(){__privateMethod(this,_MediaPlayer_instances,queueVolumeUpdate_fn).call(this,this.$props.volume())},queueVolumeUpdate_fn=function(e){const t=clampNumber(0,e,1);this.canPlayQueue.enqueue("volume",()=>{__privateGet(this,_MediaPlayer_instances,provider_get)&&__privateGet(this,_MediaPlayer_instances,provider_get).setVolume(t)})},watchPlaybackRate_fn=function(){__privateMethod(this,_MediaPlayer_instances,queuePlaybackRateUpdate_fn).call(this,this.$props.playbackRate())},queuePlaybackRateUpdate_fn=function(e){this.canPlayQueue.enqueue("rate",()=>{var t,n;__privateGet(this,_MediaPlayer_instances,provider_get)&&(null==(n=(t=__privateGet(this,_MediaPlayer_instances,provider_get)).setPlaybackRate)||n.call(t,e))})},watchPlaysInline_fn2=function(){__privateMethod(this,_MediaPlayer_instances,queuePlaysInlineUpdate_fn).call(this,this.$props.playsInline())},queuePlaysInlineUpdate_fn=function(e){this.canPlayQueue.enqueue("playsinline",()=>{var t,n;__privateGet(this,_MediaPlayer_instances,provider_get)&&(null==(n=(t=__privateGet(this,_MediaPlayer_instances,provider_get)).setPlaysInline)||n.call(t,e))})},watchStorage_fn=function(){var e;let t=this.$props.storage(),n=isString(t)?new LocalMediaStorage:t;if(null==n?void 0:n.onChange){const{source:r}=this.$state,i=isString(t)?t:null==(e=this.el)?void 0:e.id,s=computed(__privateMethod(this,_MediaPlayer_instances,computeMediaId_fn).bind(this));effect(()=>n.onChange(r(),s(),i||void 0))}__privateGet(this,_media10).storage=n,__privateGet(this,_media10).textTracks.setStorage(n),onDispose(()=>{var e;null==(e=null==n?void 0:n.onDestroy)||e.call(n),__privateGet(this,_media10).storage=null,__privateGet(this,_media10).textTracks.setStorage(null)})},computeMediaId_fn=function(){const{clipStartTime:e,clipEndTime:t}=this.$props,{source:n}=this.$state,r=n();return r.src?`${r.src}:${e()}:${t()}`:null},__publicField(_n,"props",mediaPlayerProps),__publicField(_n,"state",mediaState),_n);const mediaplayer__proto=MediaPlayer$1.prototype;function resolveStreamTypeFromDASHManifest(e,t){return fetch(e,t).then(e=>e.text()).then(e=>/type="static"/.test(e)?"on-demand":"live")}function resolveStreamTypeFromHLSManifest(e,t){return fetch(e,t).then(e=>e.text()).then(n=>{const r=resolveHLSRenditionURI(n);if(r)return resolveStreamTypeFromHLSManifest(/^https?:/.test(r)?r:new URL(r,e).href,t);const i=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(n)?"on-demand":"live";return"live"===i&&resolveTargetDuration(n)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(n)||n.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":i})}function resolveHLSRenditionURI(e){const t=e.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return t?t[0].split("\n")[1].trim():null}function resolveTargetDuration(e){const t=e.split("\n");for(const n of t)if(n.startsWith("#EXT-X-TARGETDURATION")){const e=parseFloat(n.split(":")[1]);if(!isNaN(e))return e}return-1}prop(mediaplayer__proto,"canPlayQueue"),prop(mediaplayer__proto,"remoteControl"),prop(mediaplayer__proto,"provider"),prop(mediaplayer__proto,"controls"),prop(mediaplayer__proto,"orientation"),prop(mediaplayer__proto,"title"),prop(mediaplayer__proto,"qualities"),prop(mediaplayer__proto,"audioTracks"),prop(mediaplayer__proto,"textTracks"),prop(mediaplayer__proto,"textRenderers"),prop(mediaplayer__proto,"duration"),prop(mediaplayer__proto,"paused"),prop(mediaplayer__proto,"muted"),prop(mediaplayer__proto,"currentTime"),prop(mediaplayer__proto,"volume"),prop(mediaplayer__proto,"playbackRate"),method(mediaplayer__proto,"play"),method(mediaplayer__proto,"pause"),method(mediaplayer__proto,"enterFullscreen"),method(mediaplayer__proto,"exitFullscreen"),method(mediaplayer__proto,"enterPictureInPicture"),method(mediaplayer__proto,"exitPictureInPicture"),method(mediaplayer__proto,"seekToLiveEdge"),method(mediaplayer__proto,"startLoading"),method(mediaplayer__proto,"startLoadingPoster"),method(mediaplayer__proto,"requestAirPlay"),method(mediaplayer__proto,"requestGoogleCast"),method(mediaplayer__proto,"setAudioGain");const sourceTypes=new Map;class SourceSelection{constructor(e,t,n,r=[]){__privateAdd(this,_SourceSelection_instances),__privateAdd(this,_initialize,!1),__privateAdd(this,_loaders),__privateAdd(this,_domSources),__privateAdd(this,_media11),__privateAdd(this,_loader),__privateSet(this,_domSources,e),__privateSet(this,_media11,t),__privateSet(this,_loader,n);const i=new DASHProviderLoader,s=new HLSProviderLoader,a=new VideoProviderLoader,o=new AudioProviderLoader,l=[new YouTubeProviderLoader,new VimeoProviderLoader];__privateSet(this,_loaders,computed(()=>{const e=t.$state.remotePlaybackLoader(),n=t.$props.preferNativeHLS()?[a,o,i,s,...l,...r]:[s,a,o,i,...l,...r];return e?[e,...n]:n}));const{$state:c}=t;c.sources.set(normalizeSrc(t.$props.src()));for(const u of c.sources()){const e=__privateGet(this,_loaders).call(this).find(e=>e.canPlay(u));if(!e)continue;const n=e.mediaType(u);t.$state.source.set(u),t.$state.mediaType.set(n),t.$state.inferredViewType.set(n),__privateGet(this,_loader).set(e),__privateSet(this,_initialize,!0);break}}connect(){const e=__privateGet(this,_loader).call(this);__privateGet(this,_initialize)&&(__privateMethod(this,_SourceSelection_instances,notifySourceChange_fn).call(this,__privateGet(this,_media11).$state.source(),e),__privateMethod(this,_SourceSelection_instances,notifyLoaderChange_fn).call(this,e),__privateSet(this,_initialize,!1)),effect(__privateMethod(this,_SourceSelection_instances,onSourcesChange_fn).bind(this)),effect(__privateMethod(this,_SourceSelection_instances,onSourceChange_fn).bind(this)),effect(__privateMethod(this,_SourceSelection_instances,onSetup_fn).bind(this)),effect(__privateMethod(this,_SourceSelection_instances,onLoadSource_fn).bind(this)),effect(__privateMethod(this,_SourceSelection_instances,onLoadPoster_fn).bind(this))}}function normalizeSrc(e){return(isArray$1(e)?e:[e]).map(e=>isString(e)?{src:e,type:inferType(e)}:{...e,type:inferType(e.src,e.type)})}function inferType(e,t){return isString(t)&&t.length?t:isString(e)&&sourceTypes.has(e)?sourceTypes.get(e):!t&&isHLSSrc({src:e,type:""})?"application/x-mpegurl":!t&&isDASHSrc({src:e,type:""})?"application/dash+xml":!isString(e)||e.startsWith("blob:")?"video/object":e.includes("youtube")||e.includes("youtu.be")?"video/youtube":!e.includes("vimeo")||e.includes("progressive_redirect")||e.includes(".m3u8")?"?":"video/vimeo"}function isSameSrc(e,t){return(null==e?void 0:e.src)===(null==t?void 0:t.src)&&(null==e?void 0:e.type)===(null==t?void 0:t.type)}_initialize=new WeakMap,_loaders=new WeakMap,_domSources=new WeakMap,_media11=new WeakMap,_loader=new WeakMap,_SourceSelection_instances=new WeakSet,onSourcesChange_fn=function(){__privateGet(this,_media11).notify("sources-change",[...normalizeSrc(__privateGet(this,_media11).$props.src()),...__privateGet(this,_domSources).call(this)])},onSourceChange_fn=function(){var e;const{$state:t}=__privateGet(this,_media11),n=t.sources(),r=peek(t.source),i=__privateMethod(this,_SourceSelection_instances,findNewSource_fn).call(this,r,n);if((null==(e=n[0])?void 0:e.src)&&!i.src&&!i.type){const{crossOrigin:e}=t,r=getRequestCredentials(e()),i=new AbortController;return Promise.all(n.map(e=>isString(e.src)&&"?"===e.type?fetch(e.src,{method:"HEAD",credentials:r,signal:i.signal}).then(t=>(e.type=t.headers.get("content-type")||"??",sourceTypes.set(e.src,e.type),e)).catch(()=>e):e)).then(e=>{if(i.signal.aborted)return;const n=__privateMethod(this,_SourceSelection_instances,findNewSource_fn).call(this,peek(t.source),e);tick(),n.src||__privateGet(this,_media11).notify("error",{message:"Failed to load resource.",code:4})}),()=>i.abort()}tick()},findNewSource_fn=function(e,t){let n={src:"",type:""},r=null,i=new DOMEvent("sources-change",{detail:{sources:t}}),s=__privateGet(this,_loaders).call(this),{started:a,paused:o,currentTime:l,quality:c,savedState:u}=__privateGet(this,_media11).$state;for(const d of t){const e=s.find(e=>e.canPlay(d));if(e){n=d,r=e;break}}if(isVideoQualitySrc(n)){const e=c(),r=t.find(t=>t.src===(null==e?void 0:e.src));peek(a)?u.set({paused:peek(o),currentTime:peek(l)}):u.set(null),r&&(n=r,i=new DOMEvent("quality-change",{detail:{quality:e}}))}return isSameSrc(e,n)||__privateMethod(this,_SourceSelection_instances,notifySourceChange_fn).call(this,n,r,i),r!==peek(__privateGet(this,_loader))&&__privateMethod(this,_SourceSelection_instances,notifyLoaderChange_fn).call(this,r,i),n},notifySourceChange_fn=function(e,t,n){__privateGet(this,_media11).notify("source-change",e,n),__privateGet(this,_media11).notify("media-type-change",(null==t?void 0:t.mediaType(e))||"unknown",n)},notifyLoaderChange_fn=function(e,t){__privateGet(this,_media11).$providerSetup.set(!1),__privateGet(this,_media11).notify("provider-change",null,t),e&&peek(()=>{var t;return null==(t=e.preconnect)?void 0:t.call(e,__privateGet(this,_media11))}),__privateGet(this,_loader).set(e),__privateGet(this,_media11).notify("provider-loader-change",e,t)},onSetup_fn=function(){const e=__privateGet(this,_media11).$provider();if(e&&!peek(__privateGet(this,_media11).$providerSetup))return __privateGet(this,_media11).$state.canLoad()?(scoped(()=>e.setup(),e.scope),void __privateGet(this,_media11).$providerSetup.set(!0)):void peek(()=>{var t;return null==(t=e.preconnect)?void 0:t.call(e)})},onLoadSource_fn=function(){if(!__privateGet(this,_media11).$providerSetup())return;const e=__privateGet(this,_media11).$provider(),t=__privateGet(this,_media11).$state.source(),n=peek(__privateGet(this,_media11).$state.crossOrigin),r=peek(__privateGet(this,_media11).$props.preferNativeHLS);if(!isSameSrc(null==e?void 0:e.currentSrc,t)){if(__privateGet(this,_media11).$state.canLoad()){const i=new AbortController;return isHLSSrc(t)?!r&&isHLSSupported()||resolveStreamTypeFromHLSManifest(t.src,{credentials:getRequestCredentials(n),signal:i.signal}).then(e=>{__privateGet(this,_media11).notify("stream-type-change",e)}).catch(noop$2):isDASHSrc(t)?resolveStreamTypeFromDASHManifest(t.src,{credentials:getRequestCredentials(n),signal:i.signal}).then(e=>{__privateGet(this,_media11).notify("stream-type-change",e)}).catch(noop$2):__privateGet(this,_media11).notify("stream-type-change","on-demand"),peek(()=>{const n=peek(__privateGet(this,_media11).$state.preload);return null==e?void 0:e.loadSource(t,n).catch(e=>{})}),()=>i.abort()}try{isString(t.src)&&preconnect(new URL(t.src).origin)}catch(i){}}},onLoadPoster_fn=function(){const e=__privateGet(this,_loader).call(this),{providedPoster:t,source:n,canLoadPoster:r}=__privateGet(this,_media11).$state;if(!e||!e.loadPoster||!n()||!r()||t())return;const i=new AbortController,s=new DOMEvent("source-change",{detail:n});return e.loadPoster(n(),__privateGet(this,_media11),i).then(e=>{__privateGet(this,_media11).notify("poster-change",e||"",s)}).catch(()=>{__privateGet(this,_media11).notify("poster-change","",s)}),()=>{i.abort()}};class Tracks{constructor(e,t){__privateAdd(this,_Tracks_instances),__privateAdd(this,_domTracks),__privateAdd(this,_media12),__privateAdd(this,_prevTracks,[]),__privateSet(this,_domTracks,e),__privateSet(this,_media12,t),effect(__privateMethod(this,_Tracks_instances,onTracksChange_fn).bind(this))}}_domTracks=new WeakMap,_media12=new WeakMap,_prevTracks=new WeakMap,_Tracks_instances=new WeakSet,onTracksChange_fn=function(){const e=__privateGet(this,_domTracks).call(this);for(const t of __privateGet(this,_prevTracks))if(!e.some(e=>e.id===t.id)){const e=t.id&&__privateGet(this,_media12).textTracks.getById(t.id);e&&__privateGet(this,_media12).textTracks.remove(e)}for(const t of e){const e=t.id||TextTrack.createId(t);__privateGet(this,_media12).textTracks.getById(e)||(t.id=e,__privateGet(this,_media12).textTracks.add(t))}__privateSet(this,_prevTracks,e)};let MediaProvider$1=(_o=class extends Component{constructor(){super(...arguments),__privateAdd(this,_MediaProvider_instances),__privateAdd(this,_media13),__privateAdd(this,_sources),__privateAdd(this,_domSources2,signal([])),__privateAdd(this,_domTracks2,signal([])),__privateAdd(this,_loader2,null),__privateAdd(this,_loadRafId,-1)}onSetup(){__privateSet(this,_media13,useMediaContext$1()),__privateSet(this,_sources,new SourceSelection(__privateGet(this,_domSources2),__privateGet(this,_media13),this.$state.loader,this.$props.loaders()))}onAttach(e){e.setAttribute("data-media-provider","")}onConnect(e){__privateGet(this,_sources).connect(),new Tracks(__privateGet(this,_domTracks2),__privateGet(this,_media13));const t=new ResizeObserver(animationFrameThrottle(__privateMethod(this,_MediaProvider_instances,onResize_fn2).bind(this)));t.observe(e);const n=new MutationObserver(__privateMethod(this,_MediaProvider_instances,onMutation_fn).bind(this));n.observe(e,{attributes:!0,childList:!0}),__privateMethod(this,_MediaProvider_instances,onResize_fn2).call(this),__privateMethod(this,_MediaProvider_instances,onMutation_fn).call(this),onDispose(()=>{t.disconnect(),n.disconnect()})}load(e){null==e||e.setAttribute("aria-hidden","true"),window.cancelAnimationFrame(__privateGet(this,_loadRafId)),__privateSet(this,_loadRafId,requestAnimationFrame(()=>__privateMethod(this,_MediaProvider_instances,runLoader_fn).call(this,e))),onDispose(()=>{window.cancelAnimationFrame(__privateGet(this,_loadRafId))})}onDestroy(){__privateSet(this,_loader2,null),__privateMethod(this,_MediaProvider_instances,destroyProvider_fn).call(this)}},_media13=new WeakMap,_sources=new WeakMap,_domSources2=new WeakMap,_domTracks2=new WeakMap,_loader2=new WeakMap,_loadRafId=new WeakMap,_MediaProvider_instances=new WeakSet,runLoader_fn=function(e){if(!this.scope)return;const t=this.$state.loader(),{$provider:n}=__privateGet(this,_media13);__privateGet(this,_loader2)===t&&(null==t?void 0:t.target)===e&&peek(n)||(__privateMethod(this,_MediaProvider_instances,destroyProvider_fn).call(this),__privateSet(this,_loader2,t),t&&(t.target=e||null),t&&e&&t.load(__privateGet(this,_media13)).then(e=>{this.scope&&peek(this.$state.loader)===t&&__privateGet(this,_media13).notify("provider-change",e)}))},destroyProvider_fn=function(){var e;null==(e=__privateGet(this,_media13))||e.notify("provider-change",null)},onResize_fn2=function(){if(!this.el)return;const{player:e,$state:t}=__privateGet(this,_media13),n=this.el.offsetWidth,r=this.el.offsetHeight;e&&(t.mediaWidth.set(n),t.mediaHeight.set(r),e.el&&(setStyle(e.el,"--media-width",n+"px"),setStyle(e.el,"--media-height",r+"px")))},onMutation_fn=function(){const e=[],t=[],n=this.el.children;for(const r of n)if(!r.hasAttribute("data-vds"))if(r instanceof HTMLSourceElement){const t={id:r.id,src:r.src,type:r.type};for(const e of["id","src","width","height","bitrate","codec"]){const n=r.getAttribute(`data-${e}`);isString(n)&&(t[e]=/id|src|codec/.test(e)?n:Number(n))}e.push(t)}else if(r instanceof HTMLTrackElement){const e={src:r.src,kind:r.track.kind,language:r.srclang,label:r.label,default:r.default,type:r.getAttribute("data-type")};t.push({id:r.id||TextTrack.createId(e),...e})}__privateGet(this,_domSources2).set(e),__privateGet(this,_domTracks2).set(t),tick()},__publicField(_o,"props",{loaders:[]}),__publicField(_o,"state",new State$1({loader:null})),_o);const mediaprovider__proto=MediaProvider$1.prototype;method(mediaprovider__proto,"load");class Popper extends ViewController{constructor(e){super(),__privateAdd(this,_Popper_instances),__privateAdd(this,_delegate),__privateAdd(this,_showTimerId,-1),__privateAdd(this,_hideRafId,-1),__privateAdd(this,_stopAnimationEndListener,null),__privateSet(this,_delegate,e),effect(__privateMethod(this,_Popper_instances,watchTrigger_fn).bind(this))}onDestroy(){var e;null==(e=__privateGet(this,_stopAnimationEndListener))||e.call(this),__privateSet(this,_stopAnimationEndListener,null)}show(e){var t,n,r;__privateMethod(this,_Popper_instances,cancelShowing_fn).call(this),window.cancelAnimationFrame(__privateGet(this,_hideRafId)),__privateSet(this,_hideRafId,-1),null==(t=__privateGet(this,_stopAnimationEndListener))||t.call(this),__privateSet(this,_stopAnimationEndListener,null),__privateSet(this,_showTimerId,window.setTimeout(()=>{__privateSet(this,_showTimerId,-1);const t=__privateGet(this,_delegate).content();t&&t.style.removeProperty("display"),peek(()=>__privateGet(this,_delegate).onChange(!0,e))},(null==(r=(n=__privateGet(this,_delegate)).showDelay)?void 0:r.call(n))??0))}hide(e){__privateMethod(this,_Popper_instances,cancelShowing_fn).call(this),peek(()=>__privateGet(this,_delegate).onChange(!1,e)),__privateSet(this,_hideRafId,requestAnimationFrame(()=>{var e;__privateMethod(this,_Popper_instances,cancelShowing_fn).call(this),__privateSet(this,_hideRafId,-1);const t=__privateGet(this,_delegate).content();if(t){const n=()=>{t.style.display="none",__privateSet(this,_stopAnimationEndListener,null)};if(hasAnimation(t)){null==(e=__privateGet(this,_stopAnimationEndListener))||e.call(this);const r=listenEvent(t,"animationend",n,{once:!0});__privateSet(this,_stopAnimationEndListener,r)}else n()}}))}}_delegate=new WeakMap,_Popper_instances=new WeakSet,watchTrigger_fn=function(){const e=__privateGet(this,_delegate).trigger();if(!e)return void this.hide();const t=this.show.bind(this),n=this.hide.bind(this);__privateGet(this,_delegate).listen(e,t,n)},_showTimerId=new WeakMap,_hideRafId=new WeakMap,_stopAnimationEndListener=new WeakMap,cancelShowing_fn=function(){window.clearTimeout(__privateGet(this,_showTimerId)),__privateSet(this,_showTimerId,-1)};class ToggleButtonController extends ViewController{constructor(e){super(),__privateAdd(this,_ToggleButtonController_instances),__privateAdd(this,_delegate2),__privateSet(this,_delegate2,e),new FocusVisibleController,e.keyShortcut&&new ARIAKeyShortcuts(e.keyShortcut)}onSetup(){const{disabled:e}=this.$props;this.setAttributes({"data-pressed":__privateGet(this,_delegate2).isPresssed,"aria-pressed":__privateMethod(this,_ToggleButtonController_instances,isARIAPressed_fn).bind(this),"aria-disabled":()=>e()?"true":null})}onAttach(e){setAttributeIfEmpty(e,"tabindex","0"),setAttributeIfEmpty(e,"role","button"),setAttributeIfEmpty(e,"type","button")}onConnect(e){const t=onPress(e,__privateMethod(this,_ToggleButtonController_instances,onMaybePress_fn).bind(this));for(const n of["click","touchstart"])t.add(n,__privateMethod(this,_ToggleButtonController_instances,onInteraction_fn).bind(this),{passive:!0})}}_delegate2=new WeakMap,_ToggleButtonController_instances=new WeakSet,isARIAPressed_fn=function(){return ariaBool$1(__privateGet(this,_delegate2).isPresssed())},onPressed_fn=function(e){isWriteSignal(__privateGet(this,_delegate2).isPresssed)&&__privateGet(this,_delegate2).isPresssed.set(e=>!e)},onMaybePress_fn=function(e){if(this.$props.disabled()||this.el.hasAttribute("data-disabled"))return e.preventDefault(),void e.stopImmediatePropagation();e.preventDefault(),(__privateGet(this,_delegate2).onPress??__privateMethod(this,_ToggleButtonController_instances,onPressed_fn)).call(this,e)},onInteraction_fn=function(e){this.$props.disabled()&&(e.preventDefault(),e.stopImmediatePropagation())},__publicField(ToggleButtonController,"props",{disabled:!1});let ToggleButton$1=(_p=class extends Component{constructor(){super(),__privateAdd(this,_pressed,signal(!1)),new ToggleButtonController({isPresssed:__privateGet(this,_pressed)})}get pressed(){return __privateGet(this,_pressed).call(this)}},_pressed=new WeakMap,__publicField(_p,"props",{disabled:!1,defaultPressed:!1}),_p);const togglebutton__proto=ToggleButton$1.prototype;prop(togglebutton__proto,"pressed");let AirPlayButton$1=(_q=class extends Component{constructor(){super(),__privateAdd(this,_AirPlayButton_instances),__privateAdd(this,_media14),new ToggleButtonController({isPresssed:__privateMethod(this,_AirPlayButton_instances,isPressed_fn).bind(this),onPress:__privateMethod(this,_AirPlayButton_instances,onPress_fn).bind(this)})}onSetup(){__privateSet(this,_media14,useMediaContext$1());const{canAirPlay:e,isAirPlayConnected:t}=__privateGet(this,_media14).$state;this.setAttributes({"data-active":t,"data-supported":e,"data-state":__privateMethod(this,_AirPlayButton_instances,getState_fn).bind(this),"aria-hidden":$ariaBool(()=>!e())})}onAttach(e){e.setAttribute("data-media-tooltip","airplay"),setARIALabel(e,__privateMethod(this,_AirPlayButton_instances,getDefaultLabel_fn).bind(this))}},_media14=new WeakMap,_AirPlayButton_instances=new WeakSet,onPress_fn=function(e){__privateGet(this,_media14).remote.requestAirPlay(e)},isPressed_fn=function(){const{remotePlaybackType:e,remotePlaybackState:t}=__privateGet(this,_media14).$state;return"airplay"===e()&&"disconnected"!==t()},getState_fn=function(){const{remotePlaybackType:e,remotePlaybackState:t}=__privateGet(this,_media14).$state;return"airplay"===e()&&t()},getDefaultLabel_fn=function(){const{remotePlaybackState:e}=__privateGet(this,_media14).$state;return`AirPlay ${e()}`},__publicField(_q,"props",ToggleButtonController.props),_q),PlayButton$1=(_r=class extends Component{constructor(){super(),__privateAdd(this,_PlayButton_instances),__privateAdd(this,_media15),new ToggleButtonController({isPresssed:__privateMethod(this,_PlayButton_instances,isPressed_fn2).bind(this),keyShortcut:"togglePaused",onPress:__privateMethod(this,_PlayButton_instances,onPress_fn2).bind(this)})}onSetup(){__privateSet(this,_media15,useMediaContext$1());const{paused:e,ended:t}=__privateGet(this,_media15).$state;this.setAttributes({"data-paused":e,"data-ended":t})}onAttach(e){e.setAttribute("data-media-tooltip","play"),setARIALabel(e,"Play")}},_media15=new WeakMap,_PlayButton_instances=new WeakSet,onPress_fn2=function(e){const t=__privateGet(this,_media15).remote;__privateMethod(this,_PlayButton_instances,isPressed_fn2).call(this)?t.pause(e):t.play(e)},isPressed_fn2=function(){const{paused:e}=__privateGet(this,_media15).$state;return!e()},__publicField(_r,"props",ToggleButtonController.props),_r),CaptionButton$1=(_s=class extends Component{constructor(){super(),__privateAdd(this,_CaptionButton_instances),__privateAdd(this,_media16),new ToggleButtonController({isPresssed:__privateMethod(this,_CaptionButton_instances,isPressed_fn3).bind(this),keyShortcut:"toggleCaptions",onPress:__privateMethod(this,_CaptionButton_instances,onPress_fn3).bind(this)})}onSetup(){__privateSet(this,_media16,useMediaContext$1()),this.setAttributes({"data-active":__privateMethod(this,_CaptionButton_instances,isPressed_fn3).bind(this),"data-supported":()=>!__privateMethod(this,_CaptionButton_instances,isHidden_fn).call(this),"aria-hidden":$ariaBool(__privateMethod(this,_CaptionButton_instances,isHidden_fn).bind(this))})}onAttach(e){e.setAttribute("data-media-tooltip","caption"),setARIALabel(e,"Captions")}},_media16=new WeakMap,_CaptionButton_instances=new WeakSet,onPress_fn3=function(e){__privateGet(this,_media16).remote.toggleCaptions(e)},isPressed_fn3=function(){const{textTrack:e}=__privateGet(this,_media16).$state,t=e();return!!t&&isTrackCaptionKind(t)},isHidden_fn=function(){const{hasCaptions:e}=__privateGet(this,_media16).$state;return!e()},__publicField(_s,"props",ToggleButtonController.props),_s),FullscreenButton$1=(_t=class extends Component{constructor(){super(),__privateAdd(this,_FullscreenButton_instances),__privateAdd(this,_media17),new ToggleButtonController({isPresssed:__privateMethod(this,_FullscreenButton_instances,isPressed_fn4).bind(this),keyShortcut:"toggleFullscreen",onPress:__privateMethod(this,_FullscreenButton_instances,onPress_fn4).bind(this)})}onSetup(){__privateSet(this,_media17,useMediaContext$1());const{fullscreen:e}=__privateGet(this,_media17).$state,t=__privateMethod(this,_FullscreenButton_instances,isSupported_fn).bind(this);this.setAttributes({"data-active":e,"data-supported":t,"aria-hidden":$ariaBool(()=>!t())})}onAttach(e){e.setAttribute("data-media-tooltip","fullscreen"),setARIALabel(e,"Fullscreen")}},_media17=new WeakMap,_FullscreenButton_instances=new WeakSet,onPress_fn4=function(e){const t=__privateGet(this,_media17).remote,n=this.$props.target();__privateMethod(this,_FullscreenButton_instances,isPressed_fn4).call(this)?t.exitFullscreen(n,e):t.enterFullscreen(n,e)},isPressed_fn4=function(){const{fullscreen:e}=__privateGet(this,_media17).$state;return e()},isSupported_fn=function(){const{canFullscreen:e}=__privateGet(this,_media17).$state;return e()},__publicField(_t,"props",{...ToggleButtonController.props,target:"prefer-media"}),_t),MuteButton$1=(_u=class extends Component{constructor(){super(),__privateAdd(this,_MuteButton_instances),__privateAdd(this,_media18),new ToggleButtonController({isPresssed:__privateMethod(this,_MuteButton_instances,isPressed_fn5).bind(this),keyShortcut:"toggleMuted",onPress:__privateMethod(this,_MuteButton_instances,onPress_fn5).bind(this)})}onSetup(){__privateSet(this,_media18,useMediaContext$1()),this.setAttributes({"data-muted":__privateMethod(this,_MuteButton_instances,isPressed_fn5).bind(this),"data-state":__privateMethod(this,_MuteButton_instances,getState_fn2).bind(this)})}onAttach(e){e.setAttribute("data-media-mute-button",""),e.setAttribute("data-media-tooltip","mute"),setARIALabel(e,"Mute")}},_media18=new WeakMap,_MuteButton_instances=new WeakSet,onPress_fn5=function(e){const t=__privateGet(this,_media18).remote;__privateMethod(this,_MuteButton_instances,isPressed_fn5).call(this)?t.unmute(e):t.mute(e)},isPressed_fn5=function(){const{muted:e,volume:t}=__privateGet(this,_media18).$state;return e()||0===t()},getState_fn2=function(){const{muted:e,volume:t}=__privateGet(this,_media18).$state,n=t();return e()||0===n?"muted":n>=.5?"high":n<.5?"low":void 0},__publicField(_u,"props",ToggleButtonController.props),_u),PIPButton$1=(_v=class extends Component{constructor(){super(),__privateAdd(this,_PIPButton_instances),__privateAdd(this,_media19),new ToggleButtonController({isPresssed:__privateMethod(this,_PIPButton_instances,isPressed_fn6).bind(this),keyShortcut:"togglePictureInPicture",onPress:__privateMethod(this,_PIPButton_instances,onPress_fn6).bind(this)})}onSetup(){__privateSet(this,_media19,useMediaContext$1());const{pictureInPicture:e}=__privateGet(this,_media19).$state,t=__privateMethod(this,_PIPButton_instances,isSupported_fn2).bind(this);this.setAttributes({"data-active":e,"data-supported":t,"aria-hidden":$ariaBool(()=>!t())})}onAttach(e){e.setAttribute("data-media-tooltip","pip"),setARIALabel(e,"PiP")}},_media19=new WeakMap,_PIPButton_instances=new WeakSet,onPress_fn6=function(e){const t=__privateGet(this,_media19).remote;__privateMethod(this,_PIPButton_instances,isPressed_fn6).call(this)?t.exitPictureInPicture(e):t.enterPictureInPicture(e)},isPressed_fn6=function(){const{pictureInPicture:e}=__privateGet(this,_media19).$state;return e()},isSupported_fn2=function(){const{canPictureInPicture:e}=__privateGet(this,_media19).$state;return e()},__publicField(_v,"props",ToggleButtonController.props),_v),SeekButton$1=(_w=class extends Component{constructor(){super(),__privateAdd(this,_SeekButton_instances),__privateAdd(this,_media20),new FocusVisibleController}onSetup(){__privateSet(this,_media20,useMediaContext$1());const{seeking:e}=__privateGet(this,_media20).$state,{seconds:t}=this.$props,n=__privateMethod(this,_SeekButton_instances,isSupported_fn3).bind(this);this.setAttributes({seconds:t,"data-seeking":e,"data-supported":n,"aria-hidden":$ariaBool(()=>!n())})}onAttach(e){setAttributeIfEmpty(e,"tabindex","0"),setAttributeIfEmpty(e,"role","button"),setAttributeIfEmpty(e,"type","button"),e.setAttribute("data-media-tooltip","seek"),setARIALabel(e,__privateMethod(this,_SeekButton_instances,getDefaultLabel_fn2).bind(this))}onConnect(e){onPress(e,__privateMethod(this,_SeekButton_instances,onPress_fn7).bind(this))}},_media20=new WeakMap,_SeekButton_instances=new WeakSet,isSupported_fn3=function(){const{canSeek:e}=__privateGet(this,_media20).$state;return e()},getDefaultLabel_fn2=function(){const{seconds:e}=this.$props;return`Seek ${e()>0?"forward":"backward"} ${e()} seconds`},onPress_fn7=function(e){const{seconds:t,disabled:n}=this.$props;if(n())return;const{currentTime:r}=__privateGet(this,_media20).$state,i=r()+t();__privateGet(this,_media20).remote.seek(i,e)},__publicField(_w,"props",{disabled:!1,seconds:30}),_w),LiveButton$1=(_x=class extends Component{constructor(){super(),__privateAdd(this,_LiveButton_instances),__privateAdd(this,_media21),new FocusVisibleController}onSetup(){__privateSet(this,_media21,useMediaContext$1());const{disabled:e}=this.$props,{live:t,liveEdge:n}=__privateGet(this,_media21).$state,r=()=>!t();this.setAttributes({"data-edge":n,"data-hidden":r,"aria-disabled":$ariaBool(()=>e()||n()),"aria-hidden":$ariaBool(r)})}onAttach(e){setAttributeIfEmpty(e,"tabindex","0"),setAttributeIfEmpty(e,"role","button"),setAttributeIfEmpty(e,"type","button"),e.setAttribute("data-media-tooltip","live")}onConnect(e){onPress(e,__privateMethod(this,_LiveButton_instances,onPress_fn8).bind(this))}},_media21=new WeakMap,_LiveButton_instances=new WeakSet,onPress_fn8=function(e){const{disabled:t}=this.$props,{liveEdge:n}=__privateGet(this,_media21).$state;t()||n()||__privateGet(this,_media21).remote.seekToLiveEdge(e)},__publicField(_x,"props",{disabled:!1}),_x);const sliderState=new State$1({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return calcRate(this.min,this.max,this.value)},get fillPercent(){return 100*this.fillRate},get pointerRate(){return calcRate(this.min,this.max,this.pointerValue)},get pointerPercent(){return 100*this.pointerRate}});function calcRate(e,t,n){const r=t-e;return r>0?(n-e)/r:0}class IntersectionObserverController extends ViewController{constructor(e){super(),__privateAdd(this,_IntersectionObserverController_instances),__privateAdd(this,_init),__privateAdd(this,_observer),__privateSet(this,_init,e)}onConnect(e){__privateSet(this,_observer,new IntersectionObserver(e=>{var t,n;null==(n=(t=__privateGet(this,_init)).callback)||n.call(t,e,__privateGet(this,_observer))},__privateGet(this,_init))),__privateGet(this,_observer).observe(e),onDispose(__privateMethod(this,_IntersectionObserverController_instances,onDisconnect_fn4).bind(this))}}_init=new WeakMap,_observer=new WeakMap,_IntersectionObserverController_instances=new WeakSet,onDisconnect_fn4=function(){var e;null==(e=__privateGet(this,_observer))||e.disconnect(),__privateSet(this,_observer,void 0)};const sliderContext=createContext(),sliderObserverContext=createContext();function getClampedValue(e,t,n,r){return clampNumber(e,round(n,getNumberOfDecimalPlaces(r)),t)}function getValueFromRate(e,t,n,r){const i=(t-e)*clampNumber(0,n,1)/r;return e+r*Math.round(i)}const SliderKeyDirection={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class SliderEventsController extends ViewController{constructor(e,t){super(),__privateAdd(this,_SliderEventsController_instances),__privateAdd(this,_delegate3),__privateAdd(this,_media22),__privateAdd(this,_observer2),__privateAdd(this,_provider3,null),__privateAdd(this,_touch,null),__privateAdd(this,_touchStartValue,null),__privateAdd(this,_lastDownKey),__privateAdd(this,_repeatedKeys,!1),__privateAdd(this,_onDocumentPointerMove,functionThrottle(e=>{__privateMethod(this,_SliderEventsController_instances,updatePointerValue_fn).call(this,__privateMethod(this,_SliderEventsController_instances,getPointerValue_fn).call(this,e),e)},20,{leading:!0})),__privateSet(this,_delegate3,e),__privateSet(this,_media22,t)}onSetup(){hasProvidedContext(sliderObserverContext)&&__privateSet(this,_observer2,useContext(sliderObserverContext))}onConnect(e){effect(__privateMethod(this,_SliderEventsController_instances,attachEventListeners_fn).bind(this,e)),effect(__privateMethod(this,_SliderEventsController_instances,attachPointerListeners_fn).bind(this,e)),__privateGet(this,_delegate3).swipeGesture&&effect(__privateMethod(this,_SliderEventsController_instances,watchSwipeGesture_fn).bind(this))}}_delegate3=new WeakMap,_media22=new WeakMap,_observer2=new WeakMap,_SliderEventsController_instances=new WeakSet,watchSwipeGesture_fn=function(){var e;const{pointer:t}=__privateGet(this,_media22).$state;"coarse"===t()&&__privateGet(this,_delegate3).swipeGesture()?(__privateSet(this,_provider3,null==(e=__privateGet(this,_media22).player.el)?void 0:e.querySelector("media-provider,[data-media-provider]")),__privateGet(this,_provider3)&&new EventsController(__privateGet(this,_provider3)).add("touchstart",__privateMethod(this,_SliderEventsController_instances,onTouchStart_fn).bind(this),{passive:!0}).add("touchmove",__privateMethod(this,_SliderEventsController_instances,onTouchMove_fn).bind(this),{passive:!1})):__privateSet(this,_provider3,null)},_provider3=new WeakMap,_touch=new WeakMap,_touchStartValue=new WeakMap,onTouchStart_fn=function(e){__privateSet(this,_touch,e.touches[0])},onTouchMove_fn=function(e){if(isNull(__privateGet(this,_touch))||isTouchPinchEvent(e))return;const t=e.touches[0],n=t.clientX-__privateGet(this,_touch).clientX,r=t.clientY-__privateGet(this,_touch).clientY,i=this.$state.dragging();!i&&Math.abs(r)>5||i||(e.preventDefault(),Math.abs(n)>20&&(__privateSet(this,_touch,t),__privateSet(this,_touchStartValue,this.$state.value()),__privateMethod(this,_SliderEventsController_instances,onStartDragging_fn).call(this,__privateGet(this,_touchStartValue),e)))},attachEventListeners_fn=function(e){const{hidden:t}=this.$props;listenEvent(e,"focus",__privateMethod(this,_SliderEventsController_instances,onFocus_fn2).bind(this)),t()||__privateGet(this,_delegate3).isDisabled()||new EventsController(e).add("keyup",__privateMethod(this,_SliderEventsController_instances,onKeyUp_fn2).bind(this)).add("keydown",__privateMethod(this,_SliderEventsController_instances,onKeyDown_fn2).bind(this)).add("pointerenter",__privateMethod(this,_SliderEventsController_instances,onPointerEnter_fn2).bind(this)).add("pointermove",__privateMethod(this,_SliderEventsController_instances,onPointerMove_fn).bind(this)).add("pointerleave",__privateMethod(this,_SliderEventsController_instances,onPointerLeave_fn2).bind(this)).add("pointerdown",__privateMethod(this,_SliderEventsController_instances,onPointerDown_fn).bind(this))},attachPointerListeners_fn=function(e){!__privateGet(this,_delegate3).isDisabled()&&this.$state.dragging()&&new EventsController(document).add("pointerup",__privateMethod(this,_SliderEventsController_instances,onDocumentPointerUp_fn).bind(this),{capture:!0}).add("pointermove",__privateGet(this,_onDocumentPointerMove).bind(this)).add("touchmove",__privateMethod(this,_SliderEventsController_instances,onDocumentTouchMove_fn).bind(this),{passive:!1})},onFocus_fn2=function(){__privateMethod(this,_SliderEventsController_instances,updatePointerValue_fn).call(this,this.$state.value())},updateValue_fn=function(e,t){var n,r,i,s;const{value:a,min:o,max:l,dragging:c}=this.$state,u=Math.max(o(),Math.min(e,l()));a.set(u);const d=this.createEvent("value-change",{detail:u,trigger:t});if(this.dispatch(d),null==(r=(n=__privateGet(this,_delegate3)).onValueChange)||r.call(n,d),c()){const e=this.createEvent("drag-value-change",{detail:u,trigger:t});this.dispatch(e),null==(s=(i=__privateGet(this,_delegate3)).onDragValueChange)||s.call(i,e)}},updatePointerValue_fn=function(e,t){const{pointerValue:n,dragging:r}=this.$state;n.set(e),this.dispatch("pointer-value-change",{detail:e,trigger:t}),r()&&__privateMethod(this,_SliderEventsController_instances,updateValue_fn).call(this,e,t)},getPointerValue_fn=function(e){let t,n=this.el.getBoundingClientRect(),{min:r,max:i}=this.$state;if("vertical"===this.$props.orientation()){const{bottom:r,height:i}=n;t=(r-e.clientY)/i}else if(__privateGet(this,_touch)&&isNumber(__privateGet(this,_touchStartValue))){const{width:n}=__privateGet(this,_provider3).getBoundingClientRect(),s=(e.clientX-__privateGet(this,_touch).clientX)/n,a=i()-r(),o=a*Math.abs(s);t=(s<0?__privateGet(this,_touchStartValue)-o:__privateGet(this,_touchStartValue)+o)/a}else{const{left:r,width:i}=n;t=(e.clientX-r)/i}return Math.max(r(),Math.min(i(),__privateGet(this,_delegate3).roundValue(getValueFromRate(r(),i(),t,__privateGet(this,_delegate3).getStep()))))},onPointerEnter_fn2=function(e){this.$state.pointing.set(!0)},onPointerMove_fn=function(e){const{dragging:t}=this.$state;t()||__privateMethod(this,_SliderEventsController_instances,updatePointerValue_fn).call(this,__privateMethod(this,_SliderEventsController_instances,getPointerValue_fn).call(this,e),e)},onPointerLeave_fn2=function(e){this.$state.pointing.set(!1)},onPointerDown_fn=function(e){if(0!==e.button)return;const t=__privateMethod(this,_SliderEventsController_instances,getPointerValue_fn).call(this,e);__privateMethod(this,_SliderEventsController_instances,onStartDragging_fn).call(this,t,e),__privateMethod(this,_SliderEventsController_instances,updatePointerValue_fn).call(this,t,e)},onStartDragging_fn=function(e,t){var n,r,i,s;const{dragging:a}=this.$state;if(a())return;a.set(!0),__privateGet(this,_media22).remote.pauseControls(t);const o=this.createEvent("drag-start",{detail:e,trigger:t});this.dispatch(o),null==(r=(n=__privateGet(this,_delegate3)).onDragStart)||r.call(n,o),null==(s=null==(i=__privateGet(this,_observer2))?void 0:i.onDragStart)||s.call(i)},onStopDragging_fn=function(e,t){var n,r,i,s;const{dragging:a}=this.$state;if(!a())return;a.set(!1),__privateGet(this,_media22).remote.resumeControls(t);const o=this.createEvent("drag-end",{detail:e,trigger:t});this.dispatch(o),null==(r=(n=__privateGet(this,_delegate3)).onDragEnd)||r.call(n,o),__privateSet(this,_touch,null),__privateSet(this,_touchStartValue,null),null==(s=null==(i=__privateGet(this,_observer2))?void 0:i.onDragEnd)||s.call(i)},_lastDownKey=new WeakMap,_repeatedKeys=new WeakMap,onKeyDown_fn2=function(e){if(!Object.keys(SliderKeyDirection).includes(e.key))return;const{key:t}=e,n=__privateMethod(this,_SliderEventsController_instances,calcJumpValue_fn).call(this,e);if(!isNull(n))return __privateMethod(this,_SliderEventsController_instances,updatePointerValue_fn).call(this,n,e),void __privateMethod(this,_SliderEventsController_instances,updateValue_fn).call(this,n,e);const r=__privateMethod(this,_SliderEventsController_instances,calcNewKeyValue_fn).call(this,e);__privateGet(this,_repeatedKeys)||(__privateSet(this,_repeatedKeys,t===__privateGet(this,_lastDownKey)),!this.$state.dragging()&&__privateGet(this,_repeatedKeys)&&__privateMethod(this,_SliderEventsController_instances,onStartDragging_fn).call(this,r,e)),__privateMethod(this,_SliderEventsController_instances,updatePointerValue_fn).call(this,r,e),__privateSet(this,_lastDownKey,t)},onKeyUp_fn2=function(e){if(!Object.keys(SliderKeyDirection).includes(e.key)||!isNull(__privateMethod(this,_SliderEventsController_instances,calcJumpValue_fn).call(this,e)))return;const t=__privateGet(this,_repeatedKeys)?this.$state.pointerValue():__privateMethod(this,_SliderEventsController_instances,calcNewKeyValue_fn).call(this,e);__privateMethod(this,_SliderEventsController_instances,updateValue_fn).call(this,t,e),__privateMethod(this,_SliderEventsController_instances,onStopDragging_fn).call(this,t,e),__privateSet(this,_lastDownKey,""),__privateSet(this,_repeatedKeys,!1)},calcJumpValue_fn=function(e){let t=e.key,{min:n,max:r}=this.$state;return"Home"===t||"PageUp"===t?n():"End"===t||"PageDown"===t?r():!e.metaKey&&/^[0-9]$/.test(t)?(r()-n())/10*Number(t):null},calcNewKeyValue_fn=function(e){var t,n;const{key:r,shiftKey:i}=e;e.preventDefault(),e.stopPropagation();const{shiftKeyMultiplier:s}=this.$props,{min:a,max:o,value:l,pointerValue:c}=this.$state,u=__privateGet(this,_delegate3).getStep(),d=__privateGet(this,_delegate3).getKeyStep(),h=(i?d*s():d)*Number(SliderKeyDirection[r]),p=((__privateGet(this,_repeatedKeys)?c():(null==(n=(t=__privateGet(this,_delegate3)).getValue)?void 0:n.call(t))??l())+h)/u;return Math.max(a(),Math.min(o(),Number((u*p).toFixed(3))))},onDocumentPointerUp_fn=function(e){if(0!==e.button)return;e.preventDefault(),e.stopImmediatePropagation();const t=__privateMethod(this,_SliderEventsController_instances,getPointerValue_fn).call(this,e);__privateMethod(this,_SliderEventsController_instances,updatePointerValue_fn).call(this,t,e),__privateMethod(this,_SliderEventsController_instances,onStopDragging_fn).call(this,t,e)},onDocumentTouchMove_fn=function(e){e.preventDefault()},_onDocumentPointerMove=new WeakMap;const sliderValueFormatContext=createContext(()=>({}));class SliderController extends ViewController{constructor(e){super(),__privateAdd(this,_SliderController_instances),__privateAdd(this,_media23),__privateAdd(this,_delegate4),__privateAdd(this,_isVisible,signal(!0)),__privateAdd(this,_isIntersecting,signal(!0)),__privateAdd(this,_updateSliderVars,animationFrameThrottle((e,t)=>{var n,r;null==(n=this.el)||n.style.setProperty("--slider-fill",e+"%"),null==(r=this.el)||r.style.setProperty("--slider-pointer",t+"%")})),__privateSet(this,_delegate4,e)}onSetup(){__privateSet(this,_media23,useMediaContext$1());const e=new FocusVisibleController;e.attach(this),this.$state.focused=e.focused.bind(e),hasProvidedContext(sliderValueFormatContext)||provideContext(sliderValueFormatContext,{default:"value"}),provideContext(sliderContext,{orientation:this.$props.orientation,disabled:__privateGet(this,_delegate4).isDisabled,preview:signal(null)}),effect(__privateMethod(this,_SliderController_instances,watchValue_fn).bind(this)),effect(__privateMethod(this,_SliderController_instances,watchStep_fn).bind(this)),effect(__privateMethod(this,_SliderController_instances,watchDisabled_fn).bind(this)),__privateMethod(this,_SliderController_instances,setupAttrs_fn).call(this),new SliderEventsController(__privateGet(this,_delegate4),__privateGet(this,_media23)).attach(this),new IntersectionObserverController({callback:__privateMethod(this,_SliderController_instances,onIntersectionChange_fn).bind(this)}).attach(this)}onAttach(e){setAttributeIfEmpty(e,"role","slider"),setAttributeIfEmpty(e,"tabindex","0"),setAttributeIfEmpty(e,"autocomplete","off"),IS_SERVER?__privateMethod(this,_SliderController_instances,watchCSSVars_fn).call(this):effect(__privateMethod(this,_SliderController_instances,watchCSSVars_fn).bind(this))}onConnect(e){onDispose(observeVisibility(e,__privateGet(this,_isVisible).set)),effect(__privateMethod(this,_SliderController_instances,watchHidden_fn).bind(this))}}_media23=new WeakMap,_delegate4=new WeakMap,_isVisible=new WeakMap,_isIntersecting=new WeakMap,_SliderController_instances=new WeakSet,onIntersectionChange_fn=function(e){__privateGet(this,_isIntersecting).set(e[0].isIntersecting)},watchHidden_fn=function(){const{hidden:e}=this.$props;this.$state.hidden.set(e()||!__privateGet(this,_isVisible).call(this)||!__privateGet(this,_isIntersecting).bind(this))},watchValue_fn=function(){const{dragging:e,value:t,min:n,max:r}=this.$state;peek(e)||t.set(getClampedValue(n(),r(),t(),__privateGet(this,_delegate4).getStep()))},watchStep_fn=function(){this.$state.step.set(__privateGet(this,_delegate4).getStep())},watchDisabled_fn=function(){if(!__privateGet(this,_delegate4).isDisabled())return;const{dragging:e,pointing:t}=this.$state;e.set(!1),t.set(!1)},getARIADisabled_fn=function(){return ariaBool$1(__privateGet(this,_delegate4).isDisabled())},setupAttrs_fn=function(){const{orientation:e}=this.$props,{dragging:t,active:n,pointing:r}=this.$state;this.setAttributes({"data-dragging":t,"data-pointing":r,"data-active":n,"aria-disabled":__privateMethod(this,_SliderController_instances,getARIADisabled_fn).bind(this),"aria-valuemin":__privateGet(this,_delegate4).aria.valueMin??this.$state.min,"aria-valuemax":__privateGet(this,_delegate4).aria.valueMax??this.$state.max,"aria-valuenow":__privateGet(this,_delegate4).aria.valueNow,"aria-valuetext":__privateGet(this,_delegate4).aria.valueText,"aria-orientation":e})},watchCSSVars_fn=function(){const{fillPercent:e,pointerPercent:t}=this.$state;__privateGet(this,_updateSliderVars).call(this,round(e(),3),round(t(),3))},_updateSliderVars=new WeakMap,__publicField(SliderController,"props",{hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5});class Slider extends Component{constructor(){super(),__privateAdd(this,_Slider_instances),new SliderController({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:__privateMethod(this,_Slider_instances,getARIAValueNow_fn).bind(this),valueText:__privateMethod(this,_Slider_instances,getARIAValueText_fn).bind(this)}})}onSetup(){effect(__privateMethod(this,_Slider_instances,watchValue_fn2).bind(this)),effect(__privateMethod(this,_Slider_instances,watchMinMax_fn).bind(this))}}_Slider_instances=new WeakSet,getARIAValueNow_fn=function(){const{value:e}=this.$state;return Math.round(e())},getARIAValueText_fn=function(){const{value:e,max:t}=this.$state;return round(e()/t()*100,2)+"%"},watchValue_fn2=function(){const{value:e}=this.$props;this.$state.value.set(e())},watchMinMax_fn=function(){const{min:e,max:t}=this.$props;this.$state.min.set(e()),this.$state.max.set(t())},__publicField(Slider,"props",{...SliderController.props,min:0,max:100,value:0}),__publicField(Slider,"state",sliderState);const cache=new Map,pending=new Map,_ThumbnailsLoader=class e{constructor(e,t,n){__privateAdd(this,_ThumbnailsLoader_instances),__privateAdd(this,_media24),__privateAdd(this,_src),__privateAdd(this,_crossOrigin),__publicField(this,"$images",signal([])),__privateSet(this,_src,e),__privateSet(this,_crossOrigin,t),__privateSet(this,_media24,n),effect(__privateMethod(this,_ThumbnailsLoader_instances,onLoadCues_fn).bind(this))}static create(t,n){const r=useMediaContext$1();return new e(t,n,r)}};_media24=new WeakMap,_src=new WeakMap,_crossOrigin=new WeakMap,_ThumbnailsLoader_instances=new WeakSet,onLoadCues_fn=function(){var e;const{canLoad:t}=__privateGet(this,_media24).$state;if(!t())return;const n=__privateGet(this,_src).call(this);if(n){if(isString(n)&&cache.has(n)){const e=cache.get(n);if(cache.delete(n),cache.set(n,e),cache.size>99){const e=cache.keys().next().value;cache.delete(e)}this.$images.set(cache.get(n))}else if(isString(n)){const t=__privateGet(this,_crossOrigin).call(this),r=n+"::"+t;if(!pending.has(r)){const e=new Promise(async(e,r)=>{try{const i=await fetch(n,{credentials:getRequestCredentials(t)});if("application/json"===i.headers.get("content-type")){const t=await i.json();if(isArray$1(t))if(t[0]&&"text"in t[0])e(__privateMethod(this,_ThumbnailsLoader_instances,processVTTCues_fn).call(this,t));else{for(let e=0;e<t.length;e++){const n=t[e];assert(isObject(n),!1),assert("url"in n&&isString(n.url),!1),assert("startTime"in n&&isNumber(n.startTime),!1)}e(t)}else e(__privateMethod(this,_ThumbnailsLoader_instances,processStoryboard_fn).call(this,t));return}__vitePreload(()=>import("./prod-BjIFnbHf.js").then(e=>e.d),[]).then(async({parseResponse:t})=>{try{const{cues:n}=await t(i);e(__privateMethod(this,_ThumbnailsLoader_instances,processVTTCues_fn).call(this,n))}catch(e2){r(e2)}})}catch(e2){r(e2)}}).then(e=>(cache.set(r,e),e)).catch(e=>{__privateMethod(this,_ThumbnailsLoader_instances,onError_fn4).call(this,n,e)}).finally(()=>{isString(r)&&pending.delete(r)});pending.set(r,e)}null==(e=pending.get(r))||e.then(e=>{this.$images.set(e||[])})}else if(isArray$1(n))try{this.$images.set(__privateMethod(this,_ThumbnailsLoader_instances,processImages_fn).call(this,n))}catch(r){__privateMethod(this,_ThumbnailsLoader_instances,onError_fn4).call(this,n,r)}else try{this.$images.set(__privateMethod(this,_ThumbnailsLoader_instances,processStoryboard_fn).call(this,n))}catch(r){__privateMethod(this,_ThumbnailsLoader_instances,onError_fn4).call(this,n,r)}return()=>{this.$images.set([])}}},processImages_fn=function(e){const t=__privateMethod(this,_ThumbnailsLoader_instances,resolveBaseUrl_fn).call(this);return e.map((e,n)=>(assert(e.url&&isString(e.url)),assert("startTime"in e&&isNumber(e.startTime)),{...e,url:isString(e.url)?__privateMethod(this,_ThumbnailsLoader_instances,resolveURL_fn).call(this,e.url,t):e.url}))},processStoryboard_fn=function(e){var t;assert(isString(e.url)),assert(isArray$1(e.tiles)&&(null==(t=e.tiles)?void 0:t.length));const n=new URL(e.url),r=[],i="tile_width"in e?e.tile_width:e.tileWidth,s="tile_height"in e?e.tile_height:e.tileHeight;for(const a of e.tiles)r.push({url:n,startTime:"start"in a?a.start:a.startTime,width:i,height:s,coords:{x:a.x,y:a.y}});return r},processVTTCues_fn=function(e){for(let r=0;r<e.length;r++){const t=e[r];assert("startTime"in t&&isNumber(t.startTime)),assert("text"in t&&isString(t.text))}const t=[],n=__privateMethod(this,_ThumbnailsLoader_instances,resolveBaseUrl_fn).call(this);for(const r of e){const[e,i]=r.text.split("#"),s=__privateMethod(this,_ThumbnailsLoader_instances,resolveData_fn).call(this,i);t.push({url:__privateMethod(this,_ThumbnailsLoader_instances,resolveURL_fn).call(this,e,n),startTime:r.startTime,endTime:r.endTime,width:null==s?void 0:s.w,height:null==s?void 0:s.h,coords:s&&isNumber(s.x)&&isNumber(s.y)?{x:s.x,y:s.y}:void 0})}return t},resolveBaseUrl_fn=function(){let e=peek(__privateGet(this,_src));return isString(e)&&/^https?:/.test(e)?e:location.href},resolveURL_fn=function(e,t){return/^https?:/.test(e)?new URL(e):new URL(e,t)},resolveData_fn=function(e){if(!e)return{};const[t,n]=e.split("="),r=null==n?void 0:n.split(","),i={};if(!t||!r)return null;for(let s=0;s<t.length;s++){const e=+r[s];isNaN(e)||(i[t[s]]=e)}return i},onError_fn4=function(e,t){};let ThumbnailsLoader=_ThumbnailsLoader;class Thumbnail extends Component{constructor(){super(...arguments),__privateAdd(this,_Thumbnail_instances),__publicField(this,"media"),__privateAdd(this,_loader3),__privateAdd(this,_styleResets,[])}onSetup(){this.media=useMediaContext$1(),__privateSet(this,_loader3,ThumbnailsLoader.create(this.$props.src,this.$state.crossOrigin)),__privateMethod(this,_Thumbnail_instances,watchCrossOrigin_fn2).call(this),this.setAttributes({"data-loading":__privateMethod(this,_Thumbnail_instances,isLoading_fn).bind(this),"data-error":__privateMethod(this,_Thumbnail_instances,hasError_fn).bind(this),"data-hidden":this.$state.hidden,"aria-hidden":$ariaBool(this.$state.hidden)})}onConnect(e){effect(__privateMethod(this,_Thumbnail_instances,watchImg_fn).bind(this)),effect(__privateMethod(this,_Thumbnail_instances,watchHidden_fn2).bind(this)),effect(__privateMethod(this,_Thumbnail_instances,watchCrossOrigin_fn2).bind(this)),effect(__privateMethod(this,_Thumbnail_instances,onLoadStart_fn3).bind(this)),effect(__privateMethod(this,_Thumbnail_instances,onFindActiveThumbnail_fn).bind(this)),effect(__privateMethod(this,_Thumbnail_instances,resize_fn).bind(this))}getTime(){return this.$props.time()}}_loader3=new WeakMap,_styleResets=new WeakMap,_Thumbnail_instances=new WeakSet,watchImg_fn=function(){const e=this.$state.img();e&&new EventsController(e).add("load",__privateMethod(this,_Thumbnail_instances,onLoaded_fn2).bind(this)).add("error",__privateMethod(this,_Thumbnail_instances,onError_fn5).bind(this))},watchCrossOrigin_fn2=function(){const{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:n}=this.media.$state,r=null!==e()?e():n();t.set(!0===r?"anonymous":r)},onLoadStart_fn3=function(){const{src:e,loading:t,error:n}=this.$state;return e()&&(t.set(!0),n.set(null)),()=>{__privateMethod(this,_Thumbnail_instances,resetStyles_fn).call(this),t.set(!1),n.set(null)}},onLoaded_fn2=function(){const{loading:e,error:t}=this.$state;__privateMethod(this,_Thumbnail_instances,resize_fn).call(this),e.set(!1),t.set(null)},onError_fn5=function(e){const{loading:t,error:n}=this.$state;t.set(!1),n.set(e)},isLoading_fn=function(){const{loading:e,hidden:t}=this.$state;return!t()&&e()},hasError_fn=function(){const{error:e}=this.$state;return!isNull(e())},watchHidden_fn2=function(){const{hidden:e}=this.$state,{duration:t}=this.media.$state,n=__privateGet(this,_loader3).$images();e.set(__privateMethod(this,_Thumbnail_instances,hasError_fn).call(this)||!Number.isFinite(t())||0===n.length)},onFindActiveThumbnail_fn=function(){let e=__privateGet(this,_loader3).$images();if(!e.length)return;let t=this.getTime(),{src:n,activeThumbnail:r}=this.$state,i=-1,s=null;for(let a=e.length-1;a>=0;a--){const n=e[a];if(t>=n.startTime&&(!n.endTime||t<n.endTime)){i=a;break}}e[i]&&(s=e[i]),r.set(s),n.set((null==s?void 0:s.url.href)||"")},resize_fn=function(){if(!this.scope||this.$state.hidden())return;const e=this.el,t=this.$state.img(),n=this.$state.activeThumbnail();if(!t||!n||!e)return;let r=n.width??t.naturalWidth,i=(null==n?void 0:n.height)??t.naturalHeight,{maxWidth:s,maxHeight:a,minWidth:o,minHeight:l,width:c,height:u}=getComputedStyle(this.el);"100%"===o&&(o=parseFloat(c)+""),"100%"===l&&(l=parseFloat(u)+"");let d=Math.max(parseInt(o)/r,parseInt(l)/i),h=Math.min(Math.max(parseInt(o),parseInt(s))/r,Math.max(parseInt(l),parseInt(a))/i),p=!isNaN(h)&&h<1?h:d>1?d:1;__privateMethod(this,_Thumbnail_instances,style_fn).call(this,e,"--thumbnail-width",r*p+"px"),__privateMethod(this,_Thumbnail_instances,style_fn).call(this,e,"--thumbnail-height",i*p+"px"),__privateMethod(this,_Thumbnail_instances,style_fn).call(this,e,"--thumbnail-aspect-ratio",String(round(r/i,5))),__privateMethod(this,_Thumbnail_instances,style_fn).call(this,t,"width",t.naturalWidth*p+"px"),__privateMethod(this,_Thumbnail_instances,style_fn).call(this,t,"height",t.naturalHeight*p+"px"),__privateMethod(this,_Thumbnail_instances,style_fn).call(this,t,"transform",n.coords?`translate(-${n.coords.x*p}px, -${n.coords.y*p}px)`:""),__privateMethod(this,_Thumbnail_instances,style_fn).call(this,t,"max-width","none")},style_fn=function(e,t,n){e.style.setProperty(t,n),__privateGet(this,_styleResets).push(()=>e.style.removeProperty(t))},resetStyles_fn=function(){for(const e of __privateGet(this,_styleResets))e();__privateSet(this,_styleResets,[])},__publicField(Thumbnail,"props",{src:null,time:0,crossOrigin:null}),__publicField(Thumbnail,"state",new State$1({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1}));class SliderThumbnail extends Thumbnail{constructor(){super(...arguments),__privateAdd(this,_slider)}onAttach(e){__privateSet(this,_slider,useState(Slider.state))}getTime(){const{duration:e,clipStartTime:t}=this.media.$state;return t()+__privateGet(this,_slider).pointerRate()*e()}}_slider=new WeakMap;class SliderVideo extends Component{constructor(){super(...arguments),__privateAdd(this,_SliderVideo_instances),__privateAdd(this,_media25),__privateAdd(this,_slider2)}get video(){return this.$state.video()}onSetup(){__privateSet(this,_media25,useMediaContext$1()),__privateSet(this,_slider2,useState(Slider.state)),__privateMethod(this,_SliderVideo_instances,watchCrossOrigin_fn3).call(this),this.setAttributes({"data-loading":__privateMethod(this,_SliderVideo_instances,isLoading_fn2).bind(this),"data-hidden":this.$state.hidden,"data-error":__privateMethod(this,_SliderVideo_instances,hasError_fn2).bind(this),"aria-hidden":$ariaBool(this.$state.hidden)})}onAttach(e){effect(__privateMethod(this,_SliderVideo_instances,watchVideo_fn).bind(this)),effect(__privateMethod(this,_SliderVideo_instances,watchSrc_fn).bind(this)),effect(__privateMethod(this,_SliderVideo_instances,watchCrossOrigin_fn3).bind(this)),effect(__privateMethod(this,_SliderVideo_instances,watchHidden_fn3).bind(this)),effect(__privateMethod(this,_SliderVideo_instances,onSrcChange_fn).bind(this)),effect(__privateMethod(this,_SliderVideo_instances,onUpdateTime_fn).bind(this))}}_media25=new WeakMap,_slider2=new WeakMap,_SliderVideo_instances=new WeakSet,watchVideo_fn=function(){const e=this.$state.video();e&&(e.readyState>=2&&__privateMethod(this,_SliderVideo_instances,onCanPlay_fn2).call(this),new EventsController(e).add("canplay",__privateMethod(this,_SliderVideo_instances,onCanPlay_fn2).bind(this)).add("error",__privateMethod(this,_SliderVideo_instances,onError_fn6).bind(this)))},watchSrc_fn=function(){const{src:e}=this.$state,{canLoad:t}=__privateGet(this,_media25).$state;e.set(t()?this.$props.src():null)},watchCrossOrigin_fn3=function(){const{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:n}=__privateGet(this,_media25).$state,r=null!==e()?e():n();t.set(!0===r?"anonymous":r)},isLoading_fn2=function(){const{canPlay:e,hidden:t}=this.$state;return!e()&&!t()},hasError_fn2=function(){const{error:e}=this.$state;return!isNull(e)},watchHidden_fn3=function(){const{src:e,hidden:t}=this.$state,{canLoad:n,duration:r}=__privateGet(this,_media25).$state;t.set(n()&&(!e()||__privateMethod(this,_SliderVideo_instances,hasError_fn2).call(this)||!Number.isFinite(r())))},onSrcChange_fn=function(){const{src:e,canPlay:t,error:n}=this.$state;e(),t.set(!1),n.set(null)},onCanPlay_fn2=function(e){const{canPlay:t,error:n}=this.$state;t.set(!0),n.set(null),this.dispatch("can-play",{trigger:e})},onError_fn6=function(e){const{canPlay:t,error:n}=this.$state;t.set(!1),n.set(e),this.dispatch("error",{trigger:e})},onUpdateTime_fn=function(){const{video:e,canPlay:t}=this.$state,{duration:n}=__privateGet(this,_media25).$state,{pointerRate:r}=__privateGet(this,_slider2),i=e();t()&&i&&Number.isFinite(n())&&Number.isFinite(r())&&(i.currentTime=r()*n())},__publicField(SliderVideo,"props",{src:null,crossOrigin:null}),__publicField(SliderVideo,"state",new State$1({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1}));const slidervideo__proto=SliderVideo.prototype;prop(slidervideo__proto,"video");class SliderValue extends Component{constructor(){super(...arguments),__privateAdd(this,_format),__privateAdd(this,_text),__privateAdd(this,_slider3)}onSetup(){__privateSet(this,_slider3,useState(Slider.state)),__privateSet(this,_format,useContext(sliderValueFormatContext)),__privateSet(this,_text,computed(this.getValueText.bind(this)))}getValueText(){var e,t;const{type:n,format:r,decimalPlaces:i,padHours:s,padMinutes:a,showHours:o,showMs:l}=this.$props,{value:c,pointerValue:u,min:d,max:h}=__privateGet(this,_slider3),p=(null==r?void 0:r())??__privateGet(this,_format).default,m="current"===n()?c():u();if("percent"===p){const e=m/(h()-d())*100;return(__privateGet(this,_format).percent??round)(e,i())+"%"}return"time"===p?(__privateGet(this,_format).time??formatTime)(m,{padHrs:s(),padMins:a(),showHrs:o(),showMs:l()}):((null==(t=(e=__privateGet(this,_format)).value)?void 0:t.call(e,m))??m.toFixed(2))+""}}_format=new WeakMap,_text=new WeakMap,_slider3=new WeakMap,__publicField(SliderValue,"props",{type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2});const slidervalue__proto=SliderValue.prototype;method(slidervalue__proto,"getValueText");class SliderPreview extends Component{constructor(){super(...arguments),__privateAdd(this,_slider4),__privateAdd(this,_updatePlacement,animationFrameThrottle(()=>{const{disabled:e,orientation:t}=__privateGet(this,_slider4);if(e())return;const n=this.el,{offset:r,noClamp:i}=this.$props;n&&updateSliderPreviewPlacement(n,{clamp:!i(),offset:r(),orientation:t()})}))}onSetup(){__privateSet(this,_slider4,useContext(sliderContext));const{active:e}=useState(Slider.state);this.setAttributes({"data-visible":e})}onAttach(e){Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){const{preview:t}=__privateGet(this,_slider4);t.set(e),onDispose(()=>t.set(null)),effect(__privateGet(this,_updatePlacement).bind(this));const n=new ResizeObserver(__privateGet(this,_updatePlacement).bind(this));n.observe(e),onDispose(()=>n.disconnect())}}function updateSliderPreviewPlacement(e,{clamp:t,offset:n,orientation:r}){const i=getComputedStyle(e),s=parseFloat(i.width),a=parseFloat(i.height),o={top:null,right:null,bottom:null,left:null};if(o["horizontal"===r?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${n}px))`,"horizontal"===r){const e=s/2;if(t){const t=`max(0px, calc(var(--slider-pointer) - ${e}px))`,n=`calc(100% - ${s}px)`;o.left=`min(${t}, ${n})`}else o.left=`calc(var(--slider-pointer) - ${e}px)`}else{const e=a/2;if(t){const t=`max(${e}px, calc(var(--slider-pointer) - ${e}px))`,n=`calc(100% - ${a}px)`;o.bottom=`min(${t}, ${n})`}else o.bottom=`calc(var(--slider-pointer) - ${e}px)`}Object.assign(e.style,o)}_slider4=new WeakMap,_updatePlacement=new WeakMap,__publicField(SliderPreview,"props",{offset:0,noClamp:!1});class VolumeSlider extends Component{constructor(){super(...arguments),__privateAdd(this,_VolumeSlider_instances),__privateAdd(this,_media26),__privateAdd(this,_throttleVolumeChange,functionThrottle(__privateMethod(this,_VolumeSlider_instances,onVolumeChange_fn2).bind(this),25))}onSetup(){__privateSet(this,_media26,useMediaContext$1());const{audioGain:e}=__privateGet(this,_media26).$state;provideContext(sliderValueFormatContext,{default:"percent",value:t=>(t*(e()??1)).toFixed(2),percent:t=>Math.round(t*(e()??1))}),new SliderController({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:__privateMethod(this,_VolumeSlider_instances,isDisabled_fn).bind(this),aria:{valueMax:__privateMethod(this,_VolumeSlider_instances,getARIAValueMax_fn).bind(this),valueNow:__privateMethod(this,_VolumeSlider_instances,getARIAValueNow_fn2).bind(this),valueText:__privateMethod(this,_VolumeSlider_instances,getARIAValueText_fn2).bind(this)},onDragValueChange:__privateMethod(this,_VolumeSlider_instances,onDragValueChange_fn).bind(this),onValueChange:__privateMethod(this,_VolumeSlider_instances,onValueChange_fn).bind(this)}).attach(this),effect(__privateMethod(this,_VolumeSlider_instances,watchVolume_fn2).bind(this))}onAttach(e){e.setAttribute("data-media-volume-slider",""),setAttributeIfEmpty(e,"aria-label","Volume");const{canSetVolume:t}=__privateGet(this,_media26).$state;this.setAttributes({"data-supported":t,"aria-hidden":$ariaBool(()=>!t())})}}_media26=new WeakMap,_VolumeSlider_instances=new WeakSet,getARIAValueNow_fn2=function(){const{value:e}=this.$state,{audioGain:t}=__privateGet(this,_media26).$state;return Math.round(e()*(t()??1))},getARIAValueText_fn2=function(){const{value:e,max:t}=this.$state,{audioGain:n}=__privateGet(this,_media26).$state;return round(e()/t()*(n()??1)*100,2)+"%"},getARIAValueMax_fn=function(){const{audioGain:e}=__privateGet(this,_media26).$state;return this.$state.max()*(e()??1)},isDisabled_fn=function(){const{disabled:e}=this.$props,{canSetVolume:t}=__privateGet(this,_media26).$state;return e()||!t()},watchVolume_fn2=function(){const{muted:e,volume:t}=__privateGet(this,_media26).$state,n=e()?0:100*t();this.$state.value.set(n),this.dispatch("value-change",{detail:n})},_throttleVolumeChange=new WeakMap,onVolumeChange_fn2=function(e){if(!e.trigger)return;const t=round(e.detail/100,3);__privateGet(this,_media26).remote.changeVolume(t,e)},onValueChange_fn=function(e){__privateGet(this,_throttleVolumeChange).call(this,e)},onDragValueChange_fn=function(e){__privateGet(this,_throttleVolumeChange).call(this,e)},__publicField(VolumeSlider,"props",{...SliderController.props,keyStep:5,shiftKeyMultiplier:2}),__publicField(VolumeSlider,"state",sliderState);class TimeSlider extends Component{constructor(){super(),__privateAdd(this,_TimeSlider_instances),__privateAdd(this,_media27),__privateAdd(this,_dispatchSeeking),__privateAdd(this,_chapter,signal(null)),__privateAdd(this,_playingBeforeDragStart,!1);const{noSwipeGesture:e}=this.$props;new SliderController({swipeGesture:()=>!e(),getValue:__privateMethod(this,_TimeSlider_instances,getValue_fn).bind(this),getStep:__privateMethod(this,_TimeSlider_instances,getStep_fn).bind(this),getKeyStep:__privateMethod(this,_TimeSlider_instances,getKeyStep_fn).bind(this),roundValue:__privateMethod(this,_TimeSlider_instances,roundValue_fn),isDisabled:__privateMethod(this,_TimeSlider_instances,isDisabled_fn2).bind(this),aria:{valueNow:__privateMethod(this,_TimeSlider_instances,getARIAValueNow_fn3).bind(this),valueText:__privateMethod(this,_TimeSlider_instances,getARIAValueText_fn3).bind(this)},onDragStart:__privateMethod(this,_TimeSlider_instances,onDragStart_fn).bind(this),onDragValueChange:__privateMethod(this,_TimeSlider_instances,onDragValueChange_fn2).bind(this),onDragEnd:__privateMethod(this,_TimeSlider_instances,onDragEnd_fn).bind(this),onValueChange:__privateMethod(this,_TimeSlider_instances,onValueChange_fn2).bind(this)})}onSetup(){__privateSet(this,_media27,useMediaContext$1()),provideContext(sliderValueFormatContext,{default:"time",value:__privateMethod(this,_TimeSlider_instances,formatValue_fn).bind(this),time:__privateMethod(this,_TimeSlider_instances,formatTime_fn).bind(this)}),this.setAttributes({"data-chapters":__privateMethod(this,_TimeSlider_instances,hasChapters_fn).bind(this)}),this.setStyles({"--slider-progress":__privateMethod(this,_TimeSlider_instances,calcBufferedPercent_fn).bind(this)}),effect(__privateMethod(this,_TimeSlider_instances,watchCurrentTime_fn2).bind(this)),effect(__privateMethod(this,_TimeSlider_instances,watchSeekingThrottle_fn).bind(this))}onAttach(e){e.setAttribute("data-media-time-slider",""),setAttributeIfEmpty(e,"aria-label","Seek")}onConnect(e){effect(__privateMethod(this,_TimeSlider_instances,watchPreviewing_fn).bind(this)),watchActiveTextTrack(__privateGet(this,_media27).textTracks,"chapters",__privateGet(this,_chapter).set)}}_media27=new WeakMap,_dispatchSeeking=new WeakMap,_chapter=new WeakMap,_TimeSlider_instances=new WeakSet,calcBufferedPercent_fn=function(){const{bufferedEnd:e,duration:t}=__privateGet(this,_media27).$state;return round(100*Math.min(e()/Math.max(t(),1),1),3)+"%"},hasChapters_fn=function(){var e;const{duration:t}=__privateGet(this,_media27).$state;return(null==(e=__privateGet(this,_chapter).call(this))?void 0:e.cues.length)&&Number.isFinite(t())&&t()>0},watchSeekingThrottle_fn=function(){__privateSet(this,_dispatchSeeking,functionThrottle(__privateMethod(this,_TimeSlider_instances,seeking_fn2).bind(this),this.$props.seekingRequestThrottle()))},watchCurrentTime_fn2=function(){if(this.$state.hidden())return;const{value:e,dragging:t}=this.$state,n=__privateMethod(this,_TimeSlider_instances,getValue_fn).call(this);peek(t)||(e.set(n),this.dispatch("value-change",{detail:n}))},watchPreviewing_fn=function(){const e=__privateGet(this,_media27).player.el,{preview:t}=useContext(sliderContext);e&&t()&&setAttribute(e,"data-preview",this.$state.active())},seeking_fn2=function(e,t){__privateGet(this,_media27).remote.seeking(e,t)},seek_fn=function(e,t,n){__privateGet(this,_dispatchSeeking).cancel();const{live:r}=__privateGet(this,_media27).$state;r()&&t>=99?__privateGet(this,_media27).remote.seekToLiveEdge(n):__privateGet(this,_media27).remote.seek(e,n)},_playingBeforeDragStart=new WeakMap,onDragStart_fn=function(e){const{pauseWhileDragging:t}=this.$props;if(t()){const{paused:t}=__privateGet(this,_media27).$state;__privateSet(this,_playingBeforeDragStart,!t()),__privateGet(this,_media27).remote.pause(e)}},onDragValueChange_fn2=function(e){__privateGet(this,_dispatchSeeking).call(this,__privateMethod(this,_TimeSlider_instances,percentToTime_fn).call(this,e.detail),e)},onDragEnd_fn=function(e){const{seeking:t}=__privateGet(this,_media27).$state;peek(t)||__privateMethod(this,_TimeSlider_instances,seeking_fn2).call(this,__privateMethod(this,_TimeSlider_instances,percentToTime_fn).call(this,e.detail),e);const n=e.detail;__privateMethod(this,_TimeSlider_instances,seek_fn).call(this,__privateMethod(this,_TimeSlider_instances,percentToTime_fn).call(this,n),n,e);const{pauseWhileDragging:r}=this.$props;r()&&__privateGet(this,_playingBeforeDragStart)&&(__privateGet(this,_media27).remote.play(e),__privateSet(this,_playingBeforeDragStart,!1))},onValueChange_fn2=function(e){const{dragging:t}=this.$state;!t()&&e.trigger&&__privateMethod(this,_TimeSlider_instances,onDragEnd_fn).call(this,e)},getValue_fn=function(){const{currentTime:e}=__privateGet(this,_media27).$state;return __privateMethod(this,_TimeSlider_instances,timeToPercent_fn).call(this,e())},getStep_fn=function(){const e=this.$props.step()/__privateGet(this,_media27).$state.duration()*100;return Number.isFinite(e)?e:1},getKeyStep_fn=function(){const e=this.$props.keyStep()/__privateGet(this,_media27).$state.duration()*100;return Number.isFinite(e)?e:1},roundValue_fn=function(e){return round(e,3)},isDisabled_fn2=function(){const{disabled:e}=this.$props,{canSeek:t}=__privateGet(this,_media27).$state;return e()||!t()},getARIAValueNow_fn3=function(){const{value:e}=this.$state;return Math.round(e())},getARIAValueText_fn3=function(){const e=__privateMethod(this,_TimeSlider_instances,percentToTime_fn).call(this,this.$state.value()),{duration:t}=__privateGet(this,_media27).$state;return Number.isFinite(e)?`${formatSpokenTime(e)} out of ${formatSpokenTime(t())}`:"live"},percentToTime_fn=function(e){const{duration:t}=__privateGet(this,_media27).$state;return round(e/100*t(),5)},timeToPercent_fn=function(e){const{liveEdge:t,duration:n}=__privateGet(this,_media27).$state,r=Math.max(0,Math.min(1,t()?1:Math.min(e,n())/n()));return Number.isNaN(r)?0:Number.isFinite(r)?100*r:100},formatValue_fn=function(e){const t=__privateMethod(this,_TimeSlider_instances,percentToTime_fn).call(this,e),{live:n,duration:r}=__privateGet(this,_media27).$state;return Number.isFinite(t)?(n()?t-r():t).toFixed(0):"LIVE"},formatTime_fn=function(e,t){const n=__privateMethod(this,_TimeSlider_instances,percentToTime_fn).call(this,e),{live:r,duration:i}=__privateGet(this,_media27).$state,s=r()?n-i():n;return Number.isFinite(n)?`${s<0?"-":""}${formatTime(Math.abs(s),t)}`:"LIVE"},__publicField(TimeSlider,"props",{...SliderController.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100}),__publicField(TimeSlider,"state",sliderState);class SliderChapters extends Component{constructor(){super(...arguments),__privateAdd(this,_SliderChapters_instances),__privateAdd(this,_media28),__privateAdd(this,_sliderState),__privateAdd(this,_updateScope),__privateAdd(this,_titleRef,null),__privateAdd(this,_refs,[]),__privateAdd(this,_$track,signal(null)),__privateAdd(this,_$cues,signal([])),__privateAdd(this,_activeIndex,signal(-1)),__privateAdd(this,_activePointerIndex,signal(-1)),__privateAdd(this,_bufferedIndex,0),__privateAdd(this,_updateBufferedPercent,animationFrameThrottle(e=>{var t;let n,r=__privateGet(this,_$cues).call(this),{seekableStart:i}=__privateGet(this,_media28).$state,s=i(),a=__privateMethod(this,_SliderChapters_instances,getEndTime_fn).call(this,r);for(let o=__privateGet(this,_bufferedIndex);o<__privateGet(this,_refs).length;o++)if(n=__privateMethod(this,_SliderChapters_instances,calcPercent_fn).call(this,r[o],e,s,a),null==(t=__privateGet(this,_refs)[o])||t.style.setProperty("--chapter-progress",n+"%"),n<100){__privateSet(this,_bufferedIndex,o);break}})),__privateAdd(this,_bufferedPercent,computed(__privateMethod(this,_SliderChapters_instances,calcMediaBufferedPercent_fn).bind(this))),__privateAdd(this,_onCuesChange,functionDebounce(()=>{const e=peek(__privateGet(this,_$track));this.scope&&e&&e.cues.length&&(__privateGet(this,_$cues).set(__privateMethod(this,_SliderChapters_instances,fillGaps_fn).call(this,e.cues)),__privateGet(this,_activeIndex).set(0),__privateSet(this,_bufferedIndex,0))},150,!0))}get cues(){return __privateGet(this,_$cues).call(this)}get activeCue(){return __privateGet(this,_$cues).call(this)[__privateGet(this,_activeIndex).call(this)]||null}get activePointerCue(){return __privateGet(this,_$cues).call(this)[__privateGet(this,_activePointerIndex).call(this)]||null}onSetup(){__privateSet(this,_media28,useMediaContext$1()),__privateSet(this,_sliderState,useState(TimeSlider.state))}onAttach(e){watchActiveTextTrack(__privateGet(this,_media28).textTracks,"chapters",__privateMethod(this,_SliderChapters_instances,setTrack_fn).bind(this)),effect(__privateMethod(this,_SliderChapters_instances,watchSource_fn).bind(this))}onConnect(){onDispose(()=>__privateMethod(this,_SliderChapters_instances,reset_fn2).bind(this))}onDestroy(){__privateMethod(this,_SliderChapters_instances,setTrack_fn).call(this,null)}setRefs(e){var t;if(__privateSet(this,_refs,e),null==(t=__privateGet(this,_updateScope))||t.dispose(),1===__privateGet(this,_refs).length){const e=__privateGet(this,_refs)[0];e.style.width="100%",e.style.setProperty("--chapter-fill","var(--slider-fill)"),e.style.setProperty("--chapter-progress","var(--slider-progress)")}else __privateGet(this,_refs).length>0&&scoped(()=>__privateMethod(this,_SliderChapters_instances,watch_fn).call(this),__privateSet(this,_updateScope,createScope()))}}_media28=new WeakMap,_sliderState=new WeakMap,_updateScope=new WeakMap,_titleRef=new WeakMap,_refs=new WeakMap,_$track=new WeakMap,_$cues=new WeakMap,_activeIndex=new WeakMap,_activePointerIndex=new WeakMap,_bufferedIndex=new WeakMap,_SliderChapters_instances=new WeakSet,setTrack_fn=function(e){peek(__privateGet(this,_$track))!==e&&(__privateMethod(this,_SliderChapters_instances,reset_fn2).call(this),__privateGet(this,_$track).set(e))},reset_fn2=function(){var e;__privateSet(this,_refs,[]),__privateGet(this,_$cues).set([]),__privateGet(this,_activeIndex).set(-1),__privateGet(this,_activePointerIndex).set(-1),__privateSet(this,_bufferedIndex,0),null==(e=__privateGet(this,_updateScope))||e.dispose()},watch_fn=function(){__privateGet(this,_refs).length&&effect(__privateMethod(this,_SliderChapters_instances,watchUpdates_fn).bind(this))},watchUpdates_fn=function(){const{hidden:e}=__privateGet(this,_sliderState);e()||(effect(__privateMethod(this,_SliderChapters_instances,watchContainerWidths_fn).bind(this)),effect(__privateMethod(this,_SliderChapters_instances,watchFillPercent_fn).bind(this)),effect(__privateMethod(this,_SliderChapters_instances,watchPointerPercent_fn).bind(this)),effect(__privateMethod(this,_SliderChapters_instances,watchBufferedPercent_fn).bind(this)))},watchContainerWidths_fn=function(){const e=__privateGet(this,_$cues).call(this);if(!e.length)return;let t,{seekableStart:n,seekableEnd:r}=__privateGet(this,_media28).$state,i=n(),s=(r()||e[e.length-1].endTime)-i,a=100;for(let o=0;o<e.length;o++)if(t=e[o],__privateGet(this,_refs)[o]){const n=o===e.length-1?a:round((t.endTime-Math.max(i,t.startTime))/s*100,3);__privateGet(this,_refs)[o].style.width=n+"%",a-=n}},watchFillPercent_fn=function(){let{liveEdge:e,seekableStart:t,seekableEnd:n}=__privateGet(this,_media28).$state,{fillPercent:r,value:i}=__privateGet(this,_sliderState),s=__privateGet(this,_$cues).call(this),a=e(),o=peek(__privateGet(this,_activeIndex)),l=s[o],c=a?__privateGet(this,_$cues).length-1:__privateMethod(this,_SliderChapters_instances,findActiveChapterIndex_fn).call(this,l&&l.startTime/n()*100<=peek(i)?o:0,r());a||!l?__privateMethod(this,_SliderChapters_instances,updateFillPercents_fn).call(this,0,s.length,100):c>o?__privateMethod(this,_SliderChapters_instances,updateFillPercents_fn).call(this,o,c,100):c<o&&__privateMethod(this,_SliderChapters_instances,updateFillPercents_fn).call(this,c+1,o+1,0);const u=a?100:__privateMethod(this,_SliderChapters_instances,calcPercent_fn).call(this,s[c],r(),t(),__privateMethod(this,_SliderChapters_instances,getEndTime_fn).call(this,s));__privateMethod(this,_SliderChapters_instances,updateFillPercent_fn).call(this,__privateGet(this,_refs)[c],u),__privateGet(this,_activeIndex).set(c)},watchPointerPercent_fn=function(){let{hidden:e,pointerPercent:t}=__privateGet(this,_sliderState);if(e())return void __privateGet(this,_activePointerIndex).set(-1);const n=__privateMethod(this,_SliderChapters_instances,findActiveChapterIndex_fn).call(this,0,t());__privateGet(this,_activePointerIndex).set(n)},updateFillPercents_fn=function(e,t,n){for(let r=e;r<t;r++)__privateMethod(this,_SliderChapters_instances,updateFillPercent_fn).call(this,__privateGet(this,_refs)[r],n)},updateFillPercent_fn=function(e,t){e&&(e.style.setProperty("--chapter-fill",t+"%"),setAttribute(e,"data-active",t>0&&t<100),setAttribute(e,"data-ended",100===t))},findActiveChapterIndex_fn=function(e,t){let n=0,r=__privateGet(this,_$cues).call(this);if(0===t)return 0;if(100===t)return r.length-1;let{seekableStart:i}=__privateGet(this,_media28).$state,s=i(),a=__privateMethod(this,_SliderChapters_instances,getEndTime_fn).call(this,r);for(let o=e;o<r.length;o++)if(n=__privateMethod(this,_SliderChapters_instances,calcPercent_fn).call(this,r[o],t,s,a),n>=0&&n<100)return o;return 0},watchBufferedPercent_fn=function(){__privateGet(this,_updateBufferedPercent).call(this,__privateGet(this,_bufferedPercent).call(this))},_updateBufferedPercent=new WeakMap,_bufferedPercent=new WeakMap,calcMediaBufferedPercent_fn=function(){const{bufferedEnd:e,duration:t}=__privateGet(this,_media28).$state;return 100*round(Math.min(e()/Math.max(t(),1),1),3)},getEndTime_fn=function(e){var t;const{seekableEnd:n}=__privateGet(this,_media28).$state,r=n();return Number.isFinite(r)?r:(null==(t=e[e.length-1])?void 0:t.endTime)||0},calcPercent_fn=function(e,t,n,r){if(!e)return 0;if(0===__privateGet(this,_$cues).call(this).length)return 0;const i=r-n,s=Math.max(0,e.startTime-n),a=Math.min(r,e.endTime)-n,o=s/i,l=100*o,c=100*Math.min(1,o+(a-s)/i);return Math.max(0,round(t>=c?100:(t-l)/(c-l)*100,3))},fillGaps_fn=function(e){let t=[],{seekableStart:n,seekableEnd:r,duration:i}=__privateGet(this,_media28).$state,s=n(),a=r();const o=(e=e.filter(e=>e.startTime<=a&&e.endTime>=s))[0];o&&o.startTime>s&&t.push(new window.VTTCue(s,o.startTime,""));for(let c=0;c<e.length-1;c++){const n=e[c],r=e[c+1];if(t.push(n),r){const e=r.startTime-n.endTime;e>0&&t.push(new window.VTTCue(n.endTime,n.endTime+e,""))}}const l=e[e.length-1];if(l){t.push(l);const e=i();e>=0&&e-l.endTime>1&&t.push(new window.VTTCue(l.endTime,i(),""))}return t},watchSource_fn=function(){const{source:e}=__privateGet(this,_media28).$state;e(),__privateMethod(this,_SliderChapters_instances,onTrackChange_fn2).call(this)},onTrackChange_fn2=function(){if(!this.scope)return;const{disabled:e}=this.$props;if(e())return __privateGet(this,_$cues).set([]),__privateGet(this,_activeIndex).set(0),void __privateSet(this,_bufferedIndex,0);const t=__privateGet(this,_$track).call(this);if(t){const e=__privateGet(this,_onCuesChange).bind(this);e(),new EventsController(t).add("add-cue",e).add("remove-cue",e),effect(__privateMethod(this,_SliderChapters_instances,watchMediaDuration_fn).bind(this))}return __privateSet(this,_titleRef,__privateMethod(this,_SliderChapters_instances,findChapterTitleRef_fn).call(this)),__privateGet(this,_titleRef)&&effect(__privateMethod(this,_SliderChapters_instances,onChapterTitleChange_fn).bind(this)),()=>{__privateGet(this,_titleRef)&&(__privateGet(this,_titleRef).textContent="",__privateSet(this,_titleRef,null))}},watchMediaDuration_fn=function(){__privateGet(this,_media28).$state.duration(),__privateGet(this,_onCuesChange).call(this)},_onCuesChange=new WeakMap,onChapterTitleChange_fn=function(){const e=this.activePointerCue||this.activeCue;__privateGet(this,_titleRef)&&(__privateGet(this,_titleRef).textContent=(null==e?void 0:e.text)||"")},findParentSlider_fn=function(){let e=this.el;for(;e&&"slider"!==e.getAttribute("role");)e=e.parentElement;return e},findChapterTitleRef_fn=function(){const e=__privateMethod(this,_SliderChapters_instances,findParentSlider_fn).call(this);return e?e.querySelector('[data-part="chapter-title"]'):null},__publicField(SliderChapters,"props",{disabled:!1});const sliderchapters__proto=SliderChapters.prototype;prop(sliderchapters__proto,"cues"),prop(sliderchapters__proto,"activeCue"),prop(sliderchapters__proto,"activePointerCue"),method(sliderchapters__proto,"setRefs");const menuContext=createContext();function scrollIntoView$1(e,t){const n=r(e,t);for(const{el:r,top:i,left:s}of n)r.scroll({top:i,left:s,behavior:t.behavior})}function scrollIntoCenter(e,t={}){scrollIntoView$1(e,{scrollMode:"if-needed",block:"center",inline:"center",...t})}const FOCUSABLE_ELEMENTS_SELECTOR=["a[href]","[tabindex]","input","select","button"].map(e=>`${e}:not([aria-hidden='true'])`).join(","),VALID_KEYS=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class MenuFocusController{constructor(e){__privateAdd(this,_MenuFocusController_instances),__privateAdd(this,_index,-1),__privateAdd(this,_el,null),__privateAdd(this,_elements,[]),__privateAdd(this,_delegate5),__privateSet(this,_delegate5,e)}get items(){return __privateGet(this,_elements)}attachMenu(e){listenEvent(e,"focus",__privateMethod(this,_MenuFocusController_instances,onFocus_fn3).bind(this)),__privateSet(this,_el,e),onDispose(()=>{__privateSet(this,_el,null)})}listen(){__privateGet(this,_el)&&(this.update(),new EventsController(__privateGet(this,_el)).add("keyup",__privateMethod(this,_MenuFocusController_instances,onKeyUp_fn3).bind(this)).add("keydown",__privateMethod(this,_MenuFocusController_instances,onKeyDown_fn3).bind(this)),onDispose(()=>{__privateSet(this,_index,-1),__privateSet(this,_elements,[])}))}update(){__privateSet(this,_index,0),__privateSet(this,_elements,__privateMethod(this,_MenuFocusController_instances,getFocusableElements_fn).call(this))}scroll(e=__privateMethod(this,_MenuFocusController_instances,findActiveIndex_fn).call(this)){const t=__privateGet(this,_elements)[e];t&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{scrollIntoCenter(t,{behavior:"smooth",boundary:e=>!e.hasAttribute("data-root")})})})}focusActive(e=!0){const t=__privateMethod(this,_MenuFocusController_instances,findActiveIndex_fn).call(this);__privateMethod(this,_MenuFocusController_instances,focusAt_fn).call(this,t>=0?t:0,e)}}_index=new WeakMap,_el=new WeakMap,_elements=new WeakMap,_delegate5=new WeakMap,_MenuFocusController_instances=new WeakSet,focusAt_fn=function(e,t=!0){var n;__privateSet(this,_index,e),__privateGet(this,_elements)[e]?(__privateGet(this,_elements)[e].focus({preventScroll:!0}),t&&this.scroll(e)):null==(n=__privateGet(this,_el))||n.focus({preventScroll:!0})},findActiveIndex_fn=function(){return __privateGet(this,_elements).findIndex(e=>document.activeElement===e||"menuitemradio"===e.getAttribute("role")&&"true"===e.getAttribute("aria-checked"))},onFocus_fn3=function(){__privateGet(this,_index)>=0||(this.update(),this.focusActive())},validateKeyEvent_fn=function(e){const t=e.target;if(wasEnterKeyPressed(e)&&t instanceof Element){const e=t.getAttribute("role");return!/a|input|select|button/.test(t.localName)&&!e}return VALID_KEYS.has(e.key)},onKeyUp_fn3=function(e){__privateMethod(this,_MenuFocusController_instances,validateKeyEvent_fn).call(this,e)&&(e.stopPropagation(),e.preventDefault())},onKeyDown_fn3=function(e){if(__privateMethod(this,_MenuFocusController_instances,validateKeyEvent_fn).call(this,e))switch(e.stopPropagation(),e.preventDefault(),e.key){case"Escape":__privateGet(this,_delegate5).closeMenu(e);break;case"Tab":__privateMethod(this,_MenuFocusController_instances,focusAt_fn).call(this,__privateMethod(this,_MenuFocusController_instances,nextIndex_fn).call(this,e.shiftKey?-1:1));break;case"ArrowUp":__privateMethod(this,_MenuFocusController_instances,focusAt_fn).call(this,__privateMethod(this,_MenuFocusController_instances,nextIndex_fn).call(this,-1));break;case"ArrowDown":__privateMethod(this,_MenuFocusController_instances,focusAt_fn).call(this,__privateMethod(this,_MenuFocusController_instances,nextIndex_fn).call(this,1));break;case"Home":case"PageUp":__privateMethod(this,_MenuFocusController_instances,focusAt_fn).call(this,0);break;case"End":case"PageDown":__privateMethod(this,_MenuFocusController_instances,focusAt_fn).call(this,__privateGet(this,_elements).length-1)}},nextIndex_fn=function(e){var t;let n=__privateGet(this,_index);do{n=(n+e+__privateGet(this,_elements).length)%__privateGet(this,_elements).length}while(null===(null==(t=__privateGet(this,_elements)[n])?void 0:t.offsetParent));return n},getFocusableElements_fn=function(){if(!__privateGet(this,_el))return[];const e=__privateGet(this,_el).querySelectorAll(FOCUSABLE_ELEMENTS_SELECTOR),t=[],n=e=>"menu"===e.getAttribute("role");for(const r of e)isHTMLElement(r)&&null!==r.offsetParent&&isElementParent(__privateGet(this,_el),r,n)&&t.push(r);return t};var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__decorateClass=(e,t,n,r)=>{for(var i,s=__getOwnPropDesc(t,n),a=e.length-1;a>=0;a--)(i=e[a])&&(s=i(t,n,s)||s);return s&&__defProp(t,n,s),s};let idCount=0,Menu$2=(_y=class extends Component{constructor(){super(),__privateAdd(this,_Menu_instances),__privateAdd(this,_media29),__privateAdd(this,_menuId),__privateAdd(this,_menuButtonId),__privateAdd(this,_expanded,signal(!1)),__privateAdd(this,_disabled,signal(!1)),__privateAdd(this,_trigger,signal(null)),__privateAdd(this,_content,signal(null)),__privateAdd(this,_parentMenu),__privateAdd(this,_submenus,new Set),__privateAdd(this,_menuObserver,null),__privateAdd(this,_popper),__privateAdd(this,_focus),__privateAdd(this,_isSliderActive,!1),__privateAdd(this,_isTriggerDisabled,signal(!1)),__privateAdd(this,_transitionCallbacks,new Set),__privateAdd(this,_wasKeyboardExpand,!1),__privateAdd(this,_removeSubmenuBind,__privateMethod(this,_Menu_instances,removeSubmenu_fn).bind(this)),__privateAdd(this,_isSubmenuOpen,!1),__privateAdd(this,_onSubmenuOpenBind,__privateMethod(this,_Menu_instances,onSubmenuOpen_fn).bind(this)),__privateAdd(this,_onSubmenuCloseBind,__privateMethod(this,_Menu_instances,onSubmenuClose_fn).bind(this)),__privateAdd(this,_onResize,animationFrameThrottle(()=>{const e=peek(__privateGet(this,_content));if(!e||IS_SERVER)return;let t=0,n=getComputedStyle(e),r=[...e.children];for(const i of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])t+=parseFloat(n[i])||0;for(const i of r)if(isHTMLElement(i)&&"contents"===i.style.display)r.push(...i.children);else if(3===i.nodeType)t+=parseFloat(getComputedStyle(i).fontSize);else if(isHTMLElement(i)){if(!isElementVisible(i))continue;const e=getComputedStyle(i);t+=i.offsetHeight+(parseFloat(e.marginTop)||0)+(parseFloat(e.marginBottom)||0)}setStyle(e,"--menu-height",t+"px")})),__privateAdd(this,_isTransitionActive,!1);const{showDelay:e}=this.$props;__privateSet(this,_popper,new Popper({trigger:__privateGet(this,_trigger),content:__privateGet(this,_content),showDelay:e,listen:(e,t,n)=>{onPress(e,e=>{__privateGet(this,_expanded).call(this)?n(e):t(e)});const r=__privateMethod(this,_Menu_instances,getCloseTarget_fn).call(this);r&&onPress(r,e=>{e.stopPropagation(),n(e)})},onChange:__privateMethod(this,_Menu_instances,onExpandedChange_fn).bind(this)}))}get triggerElement(){return __privateGet(this,_trigger).call(this)}get contentElement(){return __privateGet(this,_content).call(this)}get isSubmenu(){return!!__privateGet(this,_parentMenu)}onSetup(){__privateSet(this,_media29,useMediaContext$1());const e=++idCount;__privateSet(this,_menuId,`media-menu-${e}`),__privateSet(this,_menuButtonId,`media-menu-button-${e}`),__privateSet(this,_focus,new MenuFocusController({closeMenu:this.close.bind(this)})),hasProvidedContext(menuContext)&&__privateSet(this,_parentMenu,useContext(menuContext)),__privateMethod(this,_Menu_instances,observeSliders_fn).call(this),this.setAttributes({"data-open":__privateGet(this,_expanded),"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":__privateMethod(this,_Menu_instances,isDisabled_fn3).bind(this)}),provideContext(menuContext,{button:__privateGet(this,_trigger),content:__privateGet(this,_content),expanded:__privateGet(this,_expanded),hint:signal(""),submenu:!!__privateGet(this,_parentMenu),disable:__privateMethod(this,_Menu_instances,disable_fn).bind(this),attachMenuButton:__privateMethod(this,_Menu_instances,attachMenuButton_fn).bind(this),attachMenuItems:__privateMethod(this,_Menu_instances,attachMenuItems_fn).bind(this),attachObserver:__privateMethod(this,_Menu_instances,attachObserver_fn).bind(this),disableMenuButton:__privateMethod(this,_Menu_instances,disableMenuButton_fn).bind(this),addSubmenu:__privateMethod(this,_Menu_instances,addSubmenu_fn).bind(this),onTransitionEvent:e=>{__privateGet(this,_transitionCallbacks).add(e),onDispose(()=>{__privateGet(this,_transitionCallbacks).delete(e)})}})}onAttach(e){e.style.setProperty("display","contents")}onConnect(e){var t;effect(__privateMethod(this,_Menu_instances,watchExpanded_fn).bind(this)),this.isSubmenu&&(null==(t=__privateGet(this,_parentMenu))||t.addSubmenu(this))}onDestroy(){__privateGet(this,_trigger).set(null),__privateGet(this,_content).set(null),__privateSet(this,_menuObserver,null),__privateGet(this,_transitionCallbacks).clear()}open(e){peek(__privateGet(this,_expanded))||(__privateGet(this,_popper).show(e),tick())}close(e){peek(__privateGet(this,_expanded))&&(__privateGet(this,_popper).hide(e),tick())}},_media29=new WeakMap,_menuId=new WeakMap,_menuButtonId=new WeakMap,_expanded=new WeakMap,_disabled=new WeakMap,_trigger=new WeakMap,_content=new WeakMap,_parentMenu=new WeakMap,_submenus=new WeakMap,_menuObserver=new WeakMap,_popper=new WeakMap,_focus=new WeakMap,_isSliderActive=new WeakMap,_isTriggerDisabled=new WeakMap,_transitionCallbacks=new WeakMap,_Menu_instances=new WeakSet,observeSliders_fn=function(){let e=-1,t=hasProvidedContext(sliderObserverContext)?useContext(sliderObserverContext):null;provideContext(sliderObserverContext,{onDragStart:()=>{var n;null==(n=null==t?void 0:t.onDragStart)||n.call(t),window.clearTimeout(e),e=-1,__privateSet(this,_isSliderActive,!0)},onDragEnd:()=>{var n;null==(n=null==t?void 0:t.onDragEnd)||n.call(t),e=window.setTimeout(()=>{__privateSet(this,_isSliderActive,!1),e=-1},300)}})},watchExpanded_fn=function(){const e=__privateMethod(this,_Menu_instances,isExpanded_fn).call(this);this.isSubmenu||__privateGet(this,_onResize).call(this),__privateMethod(this,_Menu_instances,updateMenuItemsHidden_fn).call(this,e),e&&(effect(()=>{const{height:e}=__privateGet(this,_media29).$state,t=__privateGet(this,_content).call(this);t&&setStyle(t,"--player-height",e()+"px")}),__privateGet(this,_focus).listen(),this.listen("pointerup",__privateMethod(this,_Menu_instances,onPointerUp_fn).bind(this)),listenEvent(window,"pointerup",__privateMethod(this,_Menu_instances,onWindowPointerUp_fn).bind(this)))},attachMenuButton_fn=function(e){const t=e.el,n=this.isSubmenu,r=$ariaBool(__privateMethod(this,_Menu_instances,isDisabled_fn3).bind(this));setAttributeIfEmpty(t,"tabindex",n?"-1":"0"),setAttributeIfEmpty(t,"role",n?"menuitem":"button"),setAttribute(t,"id",__privateGet(this,_menuButtonId)),setAttribute(t,"aria-haspopup","menu"),setAttribute(t,"aria-expanded","false"),setAttribute(t,"data-root",!this.isSubmenu),setAttribute(t,"data-submenu",this.isSubmenu);const i=()=>{setAttribute(t,"data-open",__privateGet(this,_expanded).call(this)),setAttribute(t,"aria-disabled",r())};IS_SERVER?i():effect(i),__privateGet(this,_trigger).set(t),onDispose(()=>{__privateGet(this,_trigger).set(null)})},attachMenuItems_fn=function(e){var t;const n=e.el;n.style.setProperty("display","none"),setAttribute(n,"id",__privateGet(this,_menuId)),setAttributeIfEmpty(n,"role","menu"),setAttributeIfEmpty(n,"tabindex","-1"),setAttribute(n,"data-root",!this.isSubmenu),setAttribute(n,"data-submenu",this.isSubmenu),__privateGet(this,_content).set(n),onDispose(()=>__privateGet(this,_content).set(null));const r=()=>setAttribute(n,"data-open",__privateGet(this,_expanded).call(this));IS_SERVER?r():effect(r),__privateGet(this,_focus).attachMenu(n),__privateMethod(this,_Menu_instances,updateMenuItemsHidden_fn).call(this,!1);const i=__privateMethod(this,_Menu_instances,onResizeTransition_fn).bind(this);this.isSubmenu?null==(t=__privateGet(this,_parentMenu))||t.onTransitionEvent(i):(e.listen("transitionstart",i),e.listen("transitionend",i),e.listen("animationend",__privateGet(this,_onResize)),e.listen("vds-menu-resize",__privateGet(this,_onResize)))},attachObserver_fn=function(e){__privateSet(this,_menuObserver,e)},updateMenuItemsHidden_fn=function(e){const t=peek(__privateGet(this,_content));t&&setAttribute(t,"aria-hidden",ariaBool$1(!e))},disableMenuButton_fn=function(e){__privateGet(this,_isTriggerDisabled).set(e)},_wasKeyboardExpand=new WeakMap,onExpandedChange_fn=function(e,t){var n,r,i,s,a,o;if(__privateSet(this,_wasKeyboardExpand,isKeyboardEvent(t)),null==t||t.stopPropagation(),__privateGet(this,_expanded).call(this)===e)return;if(__privateMethod(this,_Menu_instances,isDisabled_fn3).call(this))return void(e&&__privateGet(this,_popper).hide(t));null==(n=this.el)||n.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));const l=__privateGet(this,_trigger).call(this),c=__privateGet(this,_content).call(this);if(l&&(setAttribute(l,"aria-controls",e&&__privateGet(this,_menuId)),setAttribute(l,"aria-expanded",ariaBool$1(e))),c&&setAttribute(c,"aria-labelledby",e&&__privateGet(this,_menuButtonId)),__privateGet(this,_expanded).set(e),__privateMethod(this,_Menu_instances,toggleMediaControls_fn).call(this,t),tick(),__privateGet(this,_wasKeyboardExpand)){e?null==c||c.focus():null==l||l.focus();for(const e of[this.el,c])e&&e.setAttribute("data-keyboard","")}else for(const u of[this.el,c])u&&u.removeAttribute("data-keyboard");if(this.dispatch(e?"open":"close",{trigger:t}),e)this.isSubmenu||__privateGet(this,_media29).activeMenu===this||(null==(r=__privateGet(this,_media29).activeMenu)||r.close(t),__privateGet(this,_media29).activeMenu=this),null==(s=null==(i=__privateGet(this,_menuObserver))?void 0:i.onOpen)||s.call(i,t);else{if(this.isSubmenu)for(const e of __privateGet(this,_submenus))e.close(t);else __privateGet(this,_media29).activeMenu=null;null==(o=null==(a=__privateGet(this,_menuObserver))?void 0:a.onClose)||o.call(a,t)}e&&requestAnimationFrame(__privateMethod(this,_Menu_instances,updateFocus_fn).bind(this))},updateFocus_fn=function(){__privateGet(this,_isTransitionActive)||__privateGet(this,_isSubmenuOpen)||(__privateGet(this,_focus).update(),requestAnimationFrame(()=>{__privateGet(this,_wasKeyboardExpand)?__privateGet(this,_focus).focusActive():__privateGet(this,_focus).scroll()}))},isExpanded_fn=function(){return!__privateMethod(this,_Menu_instances,isDisabled_fn3).call(this)&&__privateGet(this,_expanded).call(this)},isDisabled_fn3=function(){return __privateGet(this,_disabled).call(this)||__privateGet(this,_isTriggerDisabled).call(this)},disable_fn=function(e){__privateGet(this,_disabled).set(e)},onPointerUp_fn=function(e){const t=__privateGet(this,_content).call(this);__privateGet(this,_isSliderActive)||t&&isEventInside(t,e)||e.stopPropagation()},onWindowPointerUp_fn=function(e){const t=__privateGet(this,_content).call(this);__privateGet(this,_isSliderActive)||t&&isEventInside(t,e)||this.close(e)},getCloseTarget_fn=function(){var e;const t=null==(e=this.el)?void 0:e.querySelector('[data-part="close-target"]');return this.el&&t&&isElementParent(this.el,t,e=>"menu"===e.getAttribute("role"))?t:null},toggleMediaControls_fn=function(e){this.isSubmenu||(__privateGet(this,_expanded).call(this)?__privateGet(this,_media29).remote.pauseControls(e):__privateGet(this,_media29).remote.resumeControls(e))},addSubmenu_fn=function(e){__privateGet(this,_submenus).add(e),new EventsController(e).add("open",__privateGet(this,_onSubmenuOpenBind)).add("close",__privateGet(this,_onSubmenuCloseBind)),onDispose(__privateGet(this,_removeSubmenuBind))},_removeSubmenuBind=new WeakMap,removeSubmenu_fn=function(e){__privateGet(this,_submenus).delete(e)},_isSubmenuOpen=new WeakMap,_onSubmenuOpenBind=new WeakMap,onSubmenuOpen_fn=function(e){var t;__privateSet(this,_isSubmenuOpen,!0);const n=__privateGet(this,_content).call(this);this.isSubmenu&&(null==(t=this.triggerElement)||t.setAttribute("aria-hidden","true"));for(const r of __privateGet(this,_submenus))if(r!==e.target)for(const e of[r.el,r.triggerElement])null==e||e.setAttribute("aria-hidden","true");if(n){const t=e.target.el;for(const e of n.children)e.contains(t)?e.setAttribute("data-open",""):e!==t&&e.setAttribute("data-hidden","")}},_onSubmenuCloseBind=new WeakMap,onSubmenuClose_fn=function(e){var t;__privateSet(this,_isSubmenuOpen,!1);const n=__privateGet(this,_content).call(this);this.isSubmenu&&(null==(t=this.triggerElement)||t.setAttribute("aria-hidden","false"));for(const r of __privateGet(this,_submenus))for(const e of[r.el,r.triggerElement])null==e||e.setAttribute("aria-hidden","false");if(n)for(const r of n.children)r.removeAttribute("data-open"),r.removeAttribute("data-hidden")},_onResize=new WeakMap,_isTransitionActive=new WeakMap,onResizeTransition_fn=function(e){const t=__privateGet(this,_content).call(this);t&&"height"===e.propertyName&&(__privateSet(this,_isTransitionActive,"transitionstart"===e.type),setAttribute(t,"data-transition",__privateGet(this,_isTransitionActive)?"height":null),__privateGet(this,_expanded).call(this)&&__privateMethod(this,_Menu_instances,updateFocus_fn).call(this));for(const n of __privateGet(this,_transitionCallbacks))n(e)},__publicField(_y,"props",{showDelay:0}),_y);__decorateClass([prop],Menu$2.prototype,"triggerElement"),__decorateClass([prop],Menu$2.prototype,"contentElement"),__decorateClass([prop],Menu$2.prototype,"isSubmenu"),__decorateClass([method],Menu$2.prototype,"open"),__decorateClass([method],Menu$2.prototype,"close");class MenuButton extends Component{constructor(){super(),__privateAdd(this,_MenuButton_instances),__privateAdd(this,_menu),__privateAdd(this,_hintEl,signal(null)),new FocusVisibleController}get expanded(){var e;return(null==(e=__privateGet(this,_menu))?void 0:e.expanded())??!1}onSetup(){__privateSet(this,_menu,useContext(menuContext))}onAttach(e){__privateGet(this,_menu).attachMenuButton(this),effect(__privateMethod(this,_MenuButton_instances,watchDisabled_fn2).bind(this)),setAttributeIfEmpty(e,"type","button")}onConnect(e){effect(__privateMethod(this,_MenuButton_instances,watchHintEl_fn).bind(this)),__privateMethod(this,_MenuButton_instances,onMutation_fn2).call(this);const t=new MutationObserver(__privateMethod(this,_MenuButton_instances,onMutation_fn2).bind(this));t.observe(e,{attributeFilter:["data-part"],childList:!0,subtree:!0}),onDispose(()=>t.disconnect()),onPress(e,e=>{this.dispatch("select",{trigger:e})})}}_menu=new WeakMap,_hintEl=new WeakMap,_MenuButton_instances=new WeakSet,watchDisabled_fn2=function(){__privateGet(this,_menu).disableMenuButton(this.$props.disabled())},watchHintEl_fn=function(){const e=__privateGet(this,_hintEl).call(this);e&&effect(()=>{const t=__privateGet(this,_menu).hint();t&&(e.textContent=t)})},onMutation_fn2=function(){var e;const t=null==(e=this.el)?void 0:e.querySelector('[data-part="hint"]');__privateGet(this,_hintEl).set(t??null)},__publicField(MenuButton,"props",{disabled:!1});const menubutton__proto=MenuButton.prototype;prop(menubutton__proto,"expanded");class MenuItem extends MenuButton{}const menuPortalContext=createContext();class MenuItems extends Component{constructor(){super(),__privateAdd(this,_MenuItems_instances),__privateAdd(this,_menu2),new FocusVisibleController;const{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){if(__privateSet(this,_menu2,useContext(menuContext)),__privateGet(this,_menu2).attachMenuItems(this),hasProvidedContext(menuPortalContext)){const t=useContext(menuPortalContext);t&&(provideContext(menuPortalContext,null),t.attach(e),onDispose(()=>t.attach(null)))}}onConnect(e){effect(__privateMethod(this,_MenuItems_instances,watchPlacement_fn).bind(this))}}_menu2=new WeakMap,_MenuItems_instances=new WeakSet,watchPlacement_fn=function(){const{expanded:e}=__privateGet(this,_menu2);if(!this.el||!e())return;const t=this.$props.placement();if(!t)return;Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});const{offset:n,alignOffset:r}=this.$props;onDispose(autoPlacement(this.el,__privateMethod(this,_MenuItems_instances,getButton_fn).call(this),t,{offsetVarName:"media-menu",xOffset:r(),yOffset:n()})),onDispose(__privateMethod(this,_MenuItems_instances,hide_fn).bind(this))},hide_fn=function(){this.el&&(this.el.removeAttribute("style"),this.el.style.display="none")},getButton_fn=function(){return __privateGet(this,_menu2).button()},__publicField(MenuItems,"props",{placement:null,offset:0,alignOffset:0});const radioControllerContext=createContext();class RadioGroupController extends ViewController{constructor(){super(...arguments),__privateAdd(this,_RadioGroupController_instances),__privateAdd(this,_group,new Set),__privateAdd(this,_value,signal("")),__privateAdd(this,_controller3,null),__publicField(this,"onValueChange"),__privateAdd(this,_onChangeBind,__privateMethod(this,_RadioGroupController_instances,onChange_fn4).bind(this))}get values(){return Array.from(__privateGet(this,_group)).map(e=>e.value())}get value(){return __privateGet(this,_value).call(this)}set value(e){__privateMethod(this,_RadioGroupController_instances,onChange_fn4).call(this,e)}onSetup(){provideContext(radioControllerContext,{add:__privateMethod(this,_RadioGroupController_instances,addRadio_fn).bind(this),remove:__privateMethod(this,_RadioGroupController_instances,removeRadio_fn).bind(this)})}onAttach(e){hasProvidedContext(menuContext)||setAttributeIfEmpty(e,"role","radiogroup"),this.setAttributes({value:__privateGet(this,_value)})}onDestroy(){__privateGet(this,_group).clear()}}_group=new WeakMap,_value=new WeakMap,_controller3=new WeakMap,_RadioGroupController_instances=new WeakSet,addRadio_fn=function(e){__privateGet(this,_group).has(e)||(__privateGet(this,_group).add(e),e.onCheck=__privateGet(this,_onChangeBind),e.check(e.value()===__privateGet(this,_value).call(this)))},removeRadio_fn=function(e){e.onCheck=null,__privateGet(this,_group).delete(e)},_onChangeBind=new WeakMap,onChange_fn4=function(e,t){var n;const r=peek(__privateGet(this,_value));if(!e||e===r)return;const i=__privateMethod(this,_RadioGroupController_instances,findRadio_fn).call(this,r),s=__privateMethod(this,_RadioGroupController_instances,findRadio_fn).call(this,e);null==i||i.check(!1,t),null==s||s.check(!0,t),__privateGet(this,_value).set(e),null==(n=this.onValueChange)||n.call(this,e,t)},findRadio_fn=function(e){for(const t of __privateGet(this,_group))if(e===peek(t.value))return t;return null};class RadioGroup extends Component{constructor(){super(),__privateAdd(this,_RadioGroup_instances),__privateAdd(this,_controller4),__privateSet(this,_controller4,new RadioGroupController),__privateGet(this,_controller4).onValueChange=__privateMethod(this,_RadioGroup_instances,onValueChange_fn3).bind(this)}get values(){return __privateGet(this,_controller4).values}get value(){return __privateGet(this,_controller4).value}set value(e){__privateGet(this,_controller4).value=e}onSetup(){IS_SERVER?__privateMethod(this,_RadioGroup_instances,watchValue_fn3).call(this):effect(__privateMethod(this,_RadioGroup_instances,watchValue_fn3).bind(this))}}_controller4=new WeakMap,_RadioGroup_instances=new WeakSet,watchValue_fn3=function(){__privateGet(this,_controller4).value=this.$props.value()},onValueChange_fn3=function(e,t){const n=this.createEvent("change",{detail:e,trigger:t});this.dispatch(n)},__publicField(RadioGroup,"props",{value:""});const radiogroup__proto=RadioGroup.prototype;prop(radiogroup__proto,"values"),prop(radiogroup__proto,"value");class Radio extends Component{constructor(){super(),__privateAdd(this,_Radio_instances),__privateAdd(this,_checked,signal(!1)),__privateAdd(this,_controller5,{value:this.$props.value,check:__privateMethod(this,_Radio_instances,check_fn).bind(this),onCheck:null}),new FocusVisibleController}get checked(){return __privateGet(this,_checked).call(this)}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":__privateGet(this,_checked),"aria-checked":$ariaBool(__privateGet(this,_checked))})}onAttach(e){const t=hasProvidedContext(menuContext);setAttributeIfEmpty(e,"tabindex",t?"-1":"0"),setAttributeIfEmpty(e,"role",t?"menuitemradio":"radio"),effect(__privateMethod(this,_Radio_instances,watchValue_fn4).bind(this))}onConnect(e){__privateMethod(this,_Radio_instances,addToGroup_fn).call(this),onPress(e,__privateMethod(this,_Radio_instances,onPress_fn9).bind(this)),onDispose(__privateMethod(this,_Radio_instances,onDisconnect_fn5).bind(this))}}_checked=new WeakMap,_controller5=new WeakMap,_Radio_instances=new WeakSet,onDisconnect_fn5=function(){scoped(()=>{useContext(radioControllerContext).remove(__privateGet(this,_controller5))},this.connectScope)},addToGroup_fn=function(){useContext(radioControllerContext).add(__privateGet(this,_controller5))},watchValue_fn4=function(){var e,t;const{value:n}=this.$props,r=n();peek(__privateGet(this,_checked))&&(null==(t=(e=__privateGet(this,_controller5)).onCheck)||t.call(e,r))},onPress_fn9=function(e){var t,n;peek(__privateGet(this,_checked))||(__privateMethod(this,_Radio_instances,onChange_fn5).call(this,!0,e),__privateMethod(this,_Radio_instances,onSelect_fn).call(this,e),null==(n=(t=__privateGet(this,_controller5)).onCheck)||n.call(t,peek(this.$props.value),e))},check_fn=function(e,t){peek(__privateGet(this,_checked))!==e&&__privateMethod(this,_Radio_instances,onChange_fn5).call(this,e,t)},onChange_fn5=function(e,t){__privateGet(this,_checked).set(e),this.dispatch("change",{detail:e,trigger:t})},onSelect_fn=function(e){this.dispatch("select",{trigger:e})},__publicField(Radio,"props",{value:""});const radio__proto=Radio.prototype;prop(radio__proto,"checked");let Gesture$1=(_z=class extends Component{constructor(){super(...arguments),__privateAdd(this,_Gesture_instances),__privateAdd(this,_media30),__privateAdd(this,_provider4,null),__privateAdd(this,_presses,0),__privateAdd(this,_pressTimerId,-1)}onSetup(){__privateSet(this,_media30,useMediaContext$1());const{event:e,action:t}=this.$props;this.setAttributes({event:e,action:t})}onAttach(e){e.setAttribute("data-media-gesture",""),e.style.setProperty("pointer-events","none")}onConnect(e){var t;__privateSet(this,_provider4,null==(t=__privateGet(this,_media30).player.el)?void 0:t.querySelector("[data-media-provider]")),effect(__privateMethod(this,_Gesture_instances,attachListener_fn).bind(this))}},_media30=new WeakMap,_provider4=new WeakMap,_Gesture_instances=new WeakSet,attachListener_fn=function(){let e=this.$props.event(),t=this.$props.disabled();if(__privateGet(this,_provider4)&&e&&!t){if(/^dbl/.test(e)&&(e=e.split(/^dbl/)[1]),"pointerup"===e||"pointerdown"===e){"coarse"===__privateGet(this,_media30).$state.pointer()&&(e="pointerup"===e?"touchend":"touchstart")}listenEvent(__privateGet(this,_provider4),e,__privateMethod(this,_Gesture_instances,acceptEvent_fn).bind(this),{passive:!1})}},_presses=new WeakMap,_pressTimerId=new WeakMap,acceptEvent_fn=function(e){if(this.$props.disabled()||isPointerEvent(e)&&(0!==e.button||__privateGet(this,_media30).activeMenu)||isTouchEvent(e)&&__privateGet(this,_media30).activeMenu||isTouchPinchEvent(e)||!__privateMethod(this,_Gesture_instances,inBounds_fn).call(this,e))return;e.MEDIA_GESTURE=!0,e.preventDefault();const t=peek(this.$props.event);if(null==t?void 0:t.startsWith("dbl")){if(1===__privateGet(this,_presses))return queueMicrotask(()=>__privateMethod(this,_Gesture_instances,handleEvent_fn).call(this,e)),clearTimeout(__privateGet(this,_pressTimerId)),void __privateSet(this,_presses,0)}else 0===__privateGet(this,_presses)&&setTimeout(()=>{1===__privateGet(this,_presses)&&__privateMethod(this,_Gesture_instances,handleEvent_fn).call(this,e)},250);0===__privateGet(this,_presses)&&__privateSet(this,_pressTimerId,window.setTimeout(()=>{__privateSet(this,_presses,0)},275)),__privateWrapper(this,_presses)._++},handleEvent_fn=function(e){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{__privateMethod(this,_Gesture_instances,isTopLayer_fn).call(this)&&__privateMethod(this,_Gesture_instances,performAction_fn).call(this,peek(this.$props.action),e),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})},inBounds_fn=function(e){if(!this.el)return!1;if(isPointerEvent(e)||isMouseEvent(e)||isTouchEvent(e)){const t=isTouchEvent(e)?e.changedTouches[0]??e.touches[0]:void 0,n=(null==t?void 0:t.clientX)??e.clientX,r=(null==t?void 0:t.clientY)??e.clientY,i=this.el.getBoundingClientRect(),s=r>=i.top&&r<=i.bottom&&n>=i.left&&n<=i.right;return e.type.includes("leave")?!s:s}return!0},isTopLayer_fn=function(){const e=__privateGet(this,_media30).player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(e).sort((e,t)=>+getComputedStyle(t).zIndex-+getComputedStyle(e).zIndex)[0]===this.el},performAction_fn=function(e,t){if(!e)return;const n=new DOMEvent("will-trigger",{detail:e,cancelable:!0,trigger:t});if(this.dispatchEvent(n),n.defaultPrevented)return;const[r,i]=e.replace(/:([a-z])/,"-$1").split(":");e.includes(":fullscreen")?__privateGet(this,_media30).remote.toggleFullscreen("prefer-media",t):e.includes("seek:")?__privateGet(this,_media30).remote.seek(peek(__privateGet(this,_media30).$state.currentTime)+(+i||0),t):__privateGet(this,_media30).remote[kebabToCamelCase(r)](t),this.dispatch("trigger",{detail:e,trigger:t})},__publicField(_z,"props",{disabled:!1,event:void 0,action:void 0}),_z);class CaptionsTextRenderer{constructor(e){__privateAdd(this,_CaptionsTextRenderer_instances),__publicField(this,"priority",10),__privateAdd(this,_track2,null),__privateAdd(this,_renderer),__privateAdd(this,_events2),__privateSet(this,_renderer,e)}attach(){}canRender(){return!0}detach(){var e;null==(e=__privateGet(this,_events2))||e.abort(),__privateSet(this,_events2,void 0),__privateGet(this,_renderer).reset(),__privateSet(this,_track2,null)}changeTrack(e){var t;e&&__privateGet(this,_track2)!==e&&(null==(t=__privateGet(this,_events2))||t.abort(),__privateSet(this,_events2,new EventsController(e)),e.readyState<2?(__privateGet(this,_renderer).reset(),__privateGet(this,_events2).add("load",()=>__privateMethod(this,_CaptionsTextRenderer_instances,changeTrack_fn).call(this,e),{once:!0})):__privateMethod(this,_CaptionsTextRenderer_instances,changeTrack_fn).call(this,e),__privateGet(this,_events2).add("add-cue",e=>{__privateGet(this,_renderer).addCue(e.detail)}).add("remove-cue",e=>{__privateGet(this,_renderer).removeCue(e.detail)}),__privateSet(this,_track2,e))}}_track2=new WeakMap,_renderer=new WeakMap,_events2=new WeakMap,_CaptionsTextRenderer_instances=new WeakSet,changeTrack_fn=function(e){__privateGet(this,_renderer).changeTrack({cues:[...e.cues],regions:[...e.regions]})};const _Captions=class e extends Component{constructor(){super(...arguments),__privateAdd(this,_Captions_instances),__privateAdd(this,_media31),__privateAdd(this,_hideExampleTimer,-1)}onSetup(){__privateSet(this,_media31,useMediaContext$1()),this.setAttributes({"aria-hidden":$ariaBool(__privateMethod(this,_Captions_instances,isHidden_fn2).bind(this))})}onAttach(e){e.style.setProperty("pointer-events","none")}onConnect(t){e.lib()||__vitePreload(()=>import("./prod-BjIFnbHf.js").then(e=>e.d),[]).then(t=>e.lib.set(t)),effect(__privateMethod(this,_Captions_instances,watchViewType_fn).bind(this))}};_media31=new WeakMap,_Captions_instances=new WeakSet,isHidden_fn2=function(){const{textTrack:e,remotePlaybackState:t,iOSControls:n}=__privateGet(this,_media31).$state,r=e();return n()||"connected"===t()||!r||!isTrackCaptionKind(r)},watchViewType_fn=function(){if(!_Captions.lib())return;const{viewType:e}=__privateGet(this,_media31).$state;return"audio"===e()?__privateMethod(this,_Captions_instances,setupAudioView_fn).call(this):__privateMethod(this,_Captions_instances,setupVideoView_fn).call(this)},setupAudioView_fn=function(){return effect(__privateMethod(this,_Captions_instances,onTrackChange_fn3).bind(this)),__privateMethod(this,_Captions_instances,listenToFontStyleChanges_fn).call(this,null),()=>{this.el.textContent=""}},onTrackChange_fn3=function(){if(__privateMethod(this,_Captions_instances,isHidden_fn2).call(this))return;__privateMethod(this,_Captions_instances,onCueChange_fn).call(this);const{textTrack:e}=__privateGet(this,_media31).$state;listenEvent(e(),"cue-change",__privateMethod(this,_Captions_instances,onCueChange_fn).bind(this)),effect(__privateMethod(this,_Captions_instances,onUpdateTimedNodes_fn).bind(this))},onCueChange_fn=function(){this.el.textContent="",__privateGet(this,_hideExampleTimer)>=0&&__privateMethod(this,_Captions_instances,removeExample_fn).call(this);const{realCurrentTime:e,textTrack:t}=__privateGet(this,_media31).$state,{renderVTTCueString:n}=_Captions.lib(),r=peek(e),i=peek(t).activeCues;for(const s of i){const e=__privateMethod(this,_Captions_instances,createCueDisplayElement_fn).call(this),t=__privateMethod(this,_Captions_instances,createCueElement_fn).call(this);t.innerHTML=n(s,r),e.append(t),this.el.append(t)}},onUpdateTimedNodes_fn=function(){const{realCurrentTime:e}=__privateGet(this,_media31).$state,{updateTimedVTTCueNodes:t}=_Captions.lib();t(this.el,e())},setupVideoView_fn=function(){const{CaptionsRenderer:e}=_Captions.lib(),t=new e(this.el),n=new CaptionsTextRenderer(t);return __privateGet(this,_media31).textRenderers.add(n),effect(__privateMethod(this,_Captions_instances,watchTextDirection_fn).bind(this,t)),effect(__privateMethod(this,_Captions_instances,watchMediaTime_fn).bind(this,t)),__privateMethod(this,_Captions_instances,listenToFontStyleChanges_fn).call(this,t),()=>{this.el.textContent="",__privateGet(this,_media31).textRenderers.remove(n),t.destroy()}},watchTextDirection_fn=function(e){e.dir=this.$props.textDir()},watchMediaTime_fn=function(e){var t;if(__privateMethod(this,_Captions_instances,isHidden_fn2).call(this))return;const{realCurrentTime:n,textTrack:r}=__privateGet(this,_media31).$state;e.currentTime=n(),__privateGet(this,_hideExampleTimer)>=0&&(null==(t=r())?void 0:t.activeCues[0])&&__privateMethod(this,_Captions_instances,removeExample_fn).call(this)},listenToFontStyleChanges_fn=function(e){const t=__privateGet(this,_media31).player;if(!t)return;listenEvent(t,"vds-font-change",__privateMethod(this,_Captions_instances,onFontStyleChange_fn).bind(this,e))},onFontStyleChange_fn=function(e){var t;if(__privateGet(this,_hideExampleTimer)>=0)return void __privateMethod(this,_Captions_instances,hideExample_fn).call(this);const{textTrack:n}=__privateGet(this,_media31).$state;(null==(t=n())?void 0:t.activeCues[0])?null==e||e.update(!0):__privateMethod(this,_Captions_instances,showExample_fn).call(this)},showExample_fn=function(){var e,t;const n=__privateMethod(this,_Captions_instances,createCueDisplayElement_fn).call(this);setAttribute(n,"data-example","");const r=__privateMethod(this,_Captions_instances,createCueElement_fn).call(this);setAttribute(r,"data-example",""),r.textContent=this.$props.exampleText(),null==n||n.append(r),null==(e=this.el)||e.append(n),null==(t=this.el)||t.setAttribute("data-example",""),__privateMethod(this,_Captions_instances,hideExample_fn).call(this)},_hideExampleTimer=new WeakMap,hideExample_fn=function(){window.clearTimeout(__privateGet(this,_hideExampleTimer)),__privateSet(this,_hideExampleTimer,window.setTimeout(__privateMethod(this,_Captions_instances,removeExample_fn).bind(this),2500))},removeExample_fn=function(){var e,t;null==(e=this.el)||e.removeAttribute("data-example"),(null==(t=this.el)?void 0:t.querySelector("[data-example]"))&&(this.el.textContent=""),__privateSet(this,_hideExampleTimer,-1)},createCueDisplayElement_fn=function(){const e=document.createElement("div");return setAttribute(e,"data-part","cue-display"),e},createCueElement_fn=function(){const e=document.createElement("div");return setAttribute(e,"data-part","cue"),e},__publicField(_Captions,"props",{textDir:"ltr",exampleText:"Captions look like this."}),__publicField(_Captions,"lib",signal(null));let Captions=_Captions,Poster$1=(_A=class extends Component{constructor(){super(...arguments),__privateAdd(this,_Poster_instances),__privateAdd(this,_media32),__privateAdd(this,_prevSrc,"")}onSetup(){__privateSet(this,_media32,useMediaContext$1()),__privateMethod(this,_Poster_instances,watchSrc_fn2).call(this),__privateMethod(this,_Poster_instances,watchAlt_fn).call(this),__privateMethod(this,_Poster_instances,watchCrossOrigin_fn4).call(this),__privateMethod(this,_Poster_instances,watchHidden_fn4).call(this)}onAttach(e){e.style.setProperty("pointer-events","none"),effect(__privateMethod(this,_Poster_instances,watchImg_fn2).bind(this)),effect(__privateMethod(this,_Poster_instances,watchSrc_fn2).bind(this)),effect(__privateMethod(this,_Poster_instances,watchAlt_fn).bind(this)),effect(__privateMethod(this,_Poster_instances,watchCrossOrigin_fn4).bind(this)),effect(__privateMethod(this,_Poster_instances,watchHidden_fn4).bind(this));const{started:t}=__privateGet(this,_media32).$state;this.setAttributes({"data-visible":()=>!t()&&!this.$state.hidden(),"data-loading":__privateMethod(this,_Poster_instances,isLoading_fn3).bind(this),"data-error":__privateMethod(this,_Poster_instances,hasError_fn3).bind(this),"data-hidden":this.$state.hidden})}onConnect(e){effect(__privateMethod(this,_Poster_instances,onPreconnect_fn).bind(this)),effect(__privateMethod(this,_Poster_instances,onLoadStart_fn4).bind(this))}},_media32=new WeakMap,_Poster_instances=new WeakSet,hasError_fn3=function(){const{error:e}=this.$state;return!isNull(e())},onPreconnect_fn=function(){const{canLoadPoster:e,poster:t}=__privateGet(this,_media32).$state;!e()&&t()&&preconnect(t(),"preconnect")},watchHidden_fn4=function(){const{src:e}=this.$props,{poster:t,nativeControls:n}=__privateGet(this,_media32).$state;this.el&&setAttribute(this.el,"display",n()?"none":null),this.$state.hidden.set(__privateMethod(this,_Poster_instances,hasError_fn3).call(this)||!(e()||t())||n())},isLoading_fn3=function(){const{loading:e,hidden:t}=this.$state;return!t()&&e()},watchImg_fn2=function(){const e=this.$state.img();e&&(new EventsController(e).add("load",__privateMethod(this,_Poster_instances,onLoad_fn).bind(this)).add("error",__privateMethod(this,_Poster_instances,onError_fn7).bind(this)),e.complete&&__privateMethod(this,_Poster_instances,onLoad_fn).call(this))},_prevSrc=new WeakMap,watchSrc_fn2=function(){const{poster:e}=__privateGet(this,_media32).$props,{canLoadPoster:t,providedPoster:n,inferredPoster:r}=__privateGet(this,_media32).$state,i=this.$props.src()||"",s=i||e()||r();__privateGet(this,_prevSrc)===n()&&n.set(i),this.$state.src.set(t()&&s.length?s:null),__privateSet(this,_prevSrc,i)},watchAlt_fn=function(){const{src:e}=this.$props,{alt:t}=this.$state,{poster:n}=__privateGet(this,_media32).$state;t.set(e()||n()?this.$props.alt():null)},watchCrossOrigin_fn4=function(){const{crossOrigin:e}=this.$props,{crossOrigin:t}=this.$state,{crossOrigin:n,poster:r}=__privateGet(this,_media32).$state,i=null!==e()?e():n();t.set(/ytimg\.com|vimeo/.test(r()||"")?null:!0===i?"anonymous":i)},onLoadStart_fn4=function(){const{loading:e,error:t}=this.$state,{canLoadPoster:n,poster:r}=__privateGet(this,_media32).$state;e.set(n()&&!!r()),t.set(null)},onLoad_fn=function(){const{loading:e,error:t}=this.$state;e.set(!1),t.set(null)},onError_fn7=function(e){const{loading:t,error:n}=this.$state;t.set(!1),n.set(e)},__publicField(_A,"props",{src:null,alt:null,crossOrigin:null}),__publicField(_A,"state",new State$1({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1})),_A),Time$1=(_B=class extends Component{constructor(){super(...arguments),__privateAdd(this,_Time_instances),__privateAdd(this,_media33),__privateAdd(this,_invert,signal(null)),__privateAdd(this,_isVisible2,signal(!0)),__privateAdd(this,_isIntersecting2,signal(!0))}onSetup(){__privateSet(this,_media33,useMediaContext$1()),__privateMethod(this,_Time_instances,watchTime_fn).call(this);const{type:e}=this.$props;this.setAttributes({"data-type":e,"data-remainder":__privateMethod(this,_Time_instances,shouldInvert_fn).bind(this)}),new IntersectionObserverController({callback:__privateMethod(this,_Time_instances,onIntersectionChange_fn2).bind(this)}).attach(this)}onAttach(e){e.hasAttribute("role")||effect(__privateMethod(this,_Time_instances,watchRole_fn).bind(this)),effect(__privateMethod(this,_Time_instances,watchTime_fn).bind(this))}onConnect(e){onDispose(observeVisibility(e,__privateGet(this,_isVisible2).set)),effect(__privateMethod(this,_Time_instances,watchHidden_fn5).bind(this)),effect(__privateMethod(this,_Time_instances,watchToggle_fn).bind(this))}},_media33=new WeakMap,_invert=new WeakMap,_isVisible2=new WeakMap,_isIntersecting2=new WeakMap,_Time_instances=new WeakSet,onIntersectionChange_fn2=function(e){__privateGet(this,_isIntersecting2).set(e[0].isIntersecting)},watchHidden_fn5=function(){const{hidden:e}=this.$props;this.$state.hidden.set(e()||!__privateGet(this,_isVisible2).call(this)||!__privateGet(this,_isIntersecting2).call(this))},watchToggle_fn=function(){this.$props.toggle()?this.el&&onPress(this.el,__privateMethod(this,_Time_instances,onToggle_fn).bind(this)):__privateGet(this,_invert).set(null)},watchTime_fn=function(){const{hidden:e,timeText:t}=this.$state,{duration:n}=__privateGet(this,_media33).$state;if(e())return;const{type:r,padHours:i,padMinutes:s,showHours:a}=this.$props,o=__privateMethod(this,_Time_instances,getSeconds_fn).call(this,r()),l=n(),c=__privateMethod(this,_Time_instances,shouldInvert_fn).call(this);if(!Number.isFinite(o+l))return void t.set("LIVE");const u=formatTime(c?Math.max(0,l-o):o,{padHrs:i(),padMins:s(),showHrs:a()});t.set((c?"-":"")+u)},watchRole_fn=function(){if(!this.el)return;const{toggle:e}=this.$props;setAttribute(this.el,"role",e()?"timer":null),setAttribute(this.el,"tabindex",e()?0:null)},getSeconds_fn=function(e){const{bufferedEnd:t,duration:n,currentTime:r}=__privateGet(this,_media33).$state;switch(e){case"buffered":return t();case"duration":return n();default:return r()}},shouldInvert_fn=function(){return this.$props.remainder()&&!1!==__privateGet(this,_invert).call(this)},onToggle_fn=function(e){e.preventDefault(),null!==__privateGet(this,_invert).call(this)?__privateGet(this,_invert).set(e=>!e):__privateGet(this,_invert).set(!this.$props.remainder())},__publicField(_B,"props",{type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1}),__publicField(_B,"state",new State$1({timeText:"",hidden:!1})),_B);class MediaPlayerInstance extends MediaPlayer$1{}class MediaProviderInstance extends MediaProvider$1{}class ToggleButtonInstance extends ToggleButton$1{}class CaptionButtonInstance extends CaptionButton$1{}class FullscreenButtonInstance extends FullscreenButton$1{}class LiveButtonInstance extends LiveButton$1{}class MuteButtonInstance extends MuteButton$1{}class PIPButtonInstance extends PIPButton$1{}class PlayButtonInstance extends PlayButton$1{}class AirPlayButtonInstance extends AirPlayButton$1{}class SeekButtonInstance extends SeekButton$1{}class SliderInstance extends Slider{}class TimeSliderInstance extends TimeSlider{}class VolumeSliderInstance extends VolumeSlider{}class SliderThumbnailInstance extends SliderThumbnail{}class SliderValueInstance extends SliderValue{}class SliderVideoInstance extends SliderVideo{}class SliderPreviewInstance extends SliderPreview{}class SliderChaptersInstance extends SliderChapters{}class MenuInstance extends Menu$2{}class MenuButtonInstance extends MenuButton{}class MenuItemsInstance extends MenuItems{}class MenuItemInstance extends MenuItem{}class RadioGroupInstance extends RadioGroup{}class RadioInstance extends Radio{}class GestureInstance extends Gesture$1{}class PosterInstance extends Poster$1{}class ThumbnailInstance extends Thumbnail{}class TimeInstance extends Time$1{}const Slot=reactExports.forwardRef((e,t)=>{const{children:n,...r}=e,i=reactExports.Children.toArray(n),s=i.find(isSlottable);if(s){const e=s.props.children,n=i.map(t=>t===s?reactExports.Children.count(e)>1?reactExports.Children.only(null):reactExports.isValidElement(e)?e.props.children:null:t);return reactExports.createElement(SlotClone,{...r,ref:t},reactExports.isValidElement(e)?reactExports.cloneElement(e,void 0,n):null)}return reactExports.createElement(SlotClone,{...r,ref:t},n)});Slot.displayName="Slot";const SlotClone=reactExports.forwardRef((e,t)=>{const{children:n,...r}=e;return reactExports.isValidElement(n)?reactExports.cloneElement(n,{...mergeProps(r,n.props),ref:t?composeRefs(t,n.ref):n.ref}):reactExports.Children.count(n)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";const Slottable=({children:e})=>reactExports.createElement(reactExports.Fragment,null,e);function isSlottable(e){return reactExports.isValidElement(e)&&e.type===Slottable}function mergeProps(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{s(...e),i(...e)}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const NODES=["button","div","span","img","video","audio"],Primitive=NODES.reduce((e,t)=>{const n=reactExports.forwardRef((e,n)=>{const{asChild:r,...i}=e,s=r?Slot:t;return reactExports.createElement(s,{...i,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function isRemotionProvider(e){return"REMOTION"===(null==e?void 0:e.$$PROVIDER_TYPE)}const sliderStateRecord=SliderInstance.state.record,initialSliderStore=Object.keys(sliderStateRecord).reduce((e,t)=>({...e,[t]:()=>sliderStateRecord[t]}),{});function useSliderState(e,t){return useSignal((useStateContext(sliderState)||initialSliderStore)[e])}const mediaStateRecord=MediaPlayerInstance.state.record,initialMediaStore=Object.keys(mediaStateRecord).reduce((e,t)=>({...e,[t]:()=>mediaStateRecord[t]}),{});function useMediaState(e,t){return useSignal((useStateContext(mediaState)||initialMediaStore)[e])}function useMediaContext(){return useReactContext(mediaContext)}const AirPlayButtonBridge=createReactComponent(AirPlayButtonInstance,{domEventsRegex:/^onMedia/}),AirPlayButton=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(AirPlayButtonBridge,{...t},t=>reactExports.createElement(Primitive.button,{...t,ref:composeRefs(t.ref,n)},e)));AirPlayButton.displayName="AirPlayButton";const PlayButtonBridge=createReactComponent(PlayButtonInstance,{domEventsRegex:/^onMedia/}),PlayButton=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(PlayButtonBridge,{...t},t=>reactExports.createElement(Primitive.button,{...t,ref:composeRefs(t.ref,n)},e)));PlayButton.displayName="PlayButton";const CaptionButtonBridge=createReactComponent(CaptionButtonInstance,{domEventsRegex:/^onMedia/}),CaptionButton=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(CaptionButtonBridge,{...t},t=>reactExports.createElement(Primitive.button,{...t,ref:composeRefs(t.ref,n)},e)));CaptionButton.displayName="CaptionButton";const FullscreenButtonBridge=createReactComponent(FullscreenButtonInstance,{domEventsRegex:/^onMedia/}),FullscreenButton=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(FullscreenButtonBridge,{...t},t=>reactExports.createElement(Primitive.button,{...t,ref:composeRefs(t.ref,n)},e)));FullscreenButton.displayName="FullscreenButton";const MuteButtonBridge=createReactComponent(MuteButtonInstance,{domEventsRegex:/^onMedia/}),MuteButton=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(MuteButtonBridge,{...t},t=>reactExports.createElement(Primitive.button,{...t,ref:composeRefs(t.ref,n)},e)));MuteButton.displayName="MuteButton";const PIPButtonBridge=createReactComponent(PIPButtonInstance,{domEventsRegex:/^onMedia/}),PIPButton=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(PIPButtonBridge,{...t},t=>reactExports.createElement(Primitive.button,{...t,ref:composeRefs(t.ref,n)},e)));PIPButton.displayName="PIPButton";const SeekButtonBridge=createReactComponent(SeekButtonInstance,{domEventsRegex:/^onMedia/}),SeekButton=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(SeekButtonBridge,{...t},t=>reactExports.createElement(Primitive.button,{...t,ref:composeRefs(t.ref,n)},e)));SeekButton.displayName="SeekButton";const LiveButtonBridge=createReactComponent(LiveButtonInstance,{domEventsRegex:/^onMedia/}),LiveButton=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(LiveButtonBridge,{...t},t=>reactExports.createElement(Primitive.button,{...t,ref:composeRefs(t.ref,n)},e)));LiveButton.displayName="LiveButton";const sliderCallbacks=["onDragStart","onDragEnd","onDragValueChange","onValueChange","onPointerValueChange"],SliderValueBridge=createReactComponent(SliderValueInstance),SliderBridge=createReactComponent(SliderInstance,{events:sliderCallbacks}),Root$5=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(SliderBridge,{...t,ref:n},t=>reactExports.createElement(Primitive.div,{...t},e)));Root$5.displayName="Slider";const Thumb=reactExports.forwardRef((e,t)=>reactExports.createElement(Primitive.div,{...e,ref:t}));Thumb.displayName="SliderThumb";const Track=reactExports.forwardRef((e,t)=>reactExports.createElement(Primitive.div,{...e,ref:t}));Track.displayName="SliderTrack";const TrackFill=reactExports.forwardRef((e,t)=>reactExports.createElement(Primitive.div,{...e,ref:t}));TrackFill.displayName="SliderTrackFill";const PreviewBridge=createReactComponent(SliderPreviewInstance),Preview=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(PreviewBridge,{...t},t=>reactExports.createElement(Primitive.div,{...t,ref:composeRefs(t.ref,n)},e)));Preview.displayName="SliderPreview";const Value=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(SliderValueBridge,{...t},(t,r)=>{const i=useSignal(()=>r.getValueText(),r);return reactExports.createElement(Primitive.div,{...t,ref:n},i,e)}));Value.displayName="SliderValue";const Steps=reactExports.forwardRef(({children:e,...t},n)=>{const r=useSliderState("min"),i=(useSliderState("max")-r)/useSliderState("step");return reactExports.createElement(Primitive.div,{...t,ref:n},Array.from({length:Math.floor(i)+1}).map((t,n)=>e(n)))});Steps.displayName="SliderSteps";const VolumeSliderBridge=createReactComponent(VolumeSliderInstance,{events:sliderCallbacks,domEventsRegex:/^onMedia/}),Root$4=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(VolumeSliderBridge,{...t,ref:n},t=>reactExports.createElement(Primitive.div,{...t},e)));function createVTTCue(e=0,t=0,n=""){return IS_SERVER?{startTime:e,endTime:t,text:n,addEventListener:noop$2,removeEventListener:noop$2,dispatchEvent:noop$2}:new window.VTTCue(e,t,n)}Root$4.displayName="VolumeSlider";const ThumbnailBridge=createReactComponent(ThumbnailInstance),Root$3=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(ThumbnailBridge,{...t},t=>reactExports.createElement(Primitive.div,{...t,ref:composeRefs(t.ref,n)},e)));Root$3.displayName="Thumbnail";const Img=reactExports.forwardRef(({children:e,...t},n)=>{const{src:r,img:i,crossOrigin:s}=useStateContext(ThumbnailInstance.state),a=useSignal(r),o=useSignal(s);return reactExports.createElement(Primitive.img,{crossOrigin:o,...t,src:a||void 0,ref:composeRefs(i.set,n)},e)});Img.displayName="ThumbnailImg";const TimeSliderContext=reactExports.createContext({$chapters:signal(null)});TimeSliderContext.displayName="TimeSliderContext";const TimeSliderBridge=createReactComponent(TimeSliderInstance,{events:sliderCallbacks,domEventsRegex:/^onMedia/}),Root$2=reactExports.forwardRef(({children:e,...t},n)=>{const r=reactExports.useMemo(()=>signal(null),[]);return reactExports.createElement(TimeSliderContext.Provider,{value:{$chapters:r}},reactExports.createElement(TimeSliderBridge,{...t,ref:n},t=>reactExports.createElement(Primitive.div,{...t},e)))});Root$2.displayName="TimeSlider";const SliderChaptersBridge=createReactComponent(SliderChaptersInstance),Chapters=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(SliderChaptersBridge,{...t},(t,r)=>reactExports.createElement(Primitive.div,{...t,ref:composeRefs(t.ref,n)},reactExports.createElement(ChapterTracks,{instance:r},e))));function ChapterTracks({instance:e,children:t}){const n=useSignal(()=>e.cues,e),r=reactExports.useRef([]),i=reactExports.useRef(null),{$chapters:s}=reactExports.useContext(TimeSliderContext);return i.current||(i.current=createVTTCue()),reactExports.useEffect(()=>(s.set(e),()=>{s.set(null)}),[e]),reactExports.useEffect(()=>{e.setRefs(r.current)},[n]),t(n.length?n:[i.current],e=>{e?r.current.push(e):r.current.length=0})}Chapters.displayName="SliderChapters",ChapterTracks.displayName="SliderChapterTracks";const ChapterTitle=reactExports.forwardRef(({children:e,...t},n)=>{const{$chapters:r}=reactExports.useContext(TimeSliderContext),[i,s]=reactExports.useState();return reactExports.useEffect(()=>effect(()=>{const e=r(),t=(null==e?void 0:e.activePointerCue)||(null==e?void 0:e.activeCue);s((null==t?void 0:t.text)||"")}),[]),reactExports.createElement(Primitive.div,{...t,ref:n},i,e)});ChapterTitle.displayName="SliderChapterTitle";const Progress=reactExports.forwardRef((e,t)=>reactExports.createElement(Primitive.div,{...e,ref:t}));Progress.displayName="SliderProgress";const SliderThumbnailBridge=createReactComponent(SliderThumbnailInstance),ThumbnailRoot=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(SliderThumbnailBridge,{...t},t=>reactExports.createElement(Primitive.div,{...t,ref:composeRefs(t.ref,n)},e)));ThumbnailRoot.displayName="SliderThumbnail";const VideoBridge=createReactComponent(SliderVideoInstance,{events:["onCanPlay","onError"]}),Video=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(VideoBridge,{...t},(t,r)=>reactExports.createElement(VideoProvider,{...t,instance:r,ref:composeRefs(t.ref,n)},e)));Video.displayName="SliderVideo";const VideoProvider=reactExports.forwardRef(({instance:e,children:t,...n},r)=>{const{canLoad:i}=useStateContext(mediaState),{src:s,video:a,crossOrigin:o}=e.$state,l=useSignal(s),c=useSignal(i),u=useSignal(o);return reactExports.createElement(Primitive.video,{style:{maxWidth:"unset"},...n,src:l||void 0,muted:!0,playsInline:!0,preload:c?"auto":"none",crossOrigin:u||void 0,ref:composeRefs(a.set,r)},t)});VideoProvider.displayName="SliderVideoProvider";const RadioGroupBridge=createReactComponent(RadioGroupInstance,{events:["onChange"]}),Root$1$1=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(RadioGroupBridge,{...t,ref:n},t=>reactExports.createElement(Primitive.div,{...t},e)));Root$1$1.displayName="RadioGroup";const ItemBridge$1=createReactComponent(RadioInstance,{events:["onChange","onSelect"]}),Item$1=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(ItemBridge$1,{...t},t=>reactExports.createElement(Primitive.div,{...t,ref:composeRefs(t.ref,n)},e)));Item$1.displayName="RadioItem";const MenuBridge=createReactComponent(MenuInstance,{events:["onOpen","onClose"],domEventsRegex:/^onMedia/}),Root$6=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(MenuBridge,{...t,ref:n},(t,n)=>reactExports.createElement(Primitive.div,{...t,style:{display:n.isSubmenu?void 0:"contents",...t.style}},e)));Root$6.displayName="Menu";const ButtonBridge=createReactComponent(MenuButtonInstance,{events:["onSelect"]}),Button=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(ButtonBridge,{...t},t=>reactExports.createElement(Primitive.button,{...t,ref:composeRefs(t.ref,n)},e)));Button.displayName="MenuButton";const Portal=reactExports.forwardRef(({container:e=null,disabled:t=!1,children:n,...r},i)=>{let s=useMediaState("fullscreen"),a="fullscreen"===t?!s:!t;const o=reactExports.useMemo(()=>{if(IS_SERVER)return null;return(isString(e)?document.querySelector(e):e)??document.body},[e]);return o&&a?reactDomExports.createPortal(reactExports.createElement(Primitive.div,{...r,style:{display:"contents",...r.style},ref:i},n),o):n});Portal.displayName="MenuPortal";const ItemsBridge=createReactComponent(MenuItemsInstance),Items=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(ItemsBridge,{...t},t=>reactExports.createElement(Primitive.div,{...t,ref:composeRefs(t.ref,n)},e)));Items.displayName="MenuItems";const ItemBridge=createReactComponent(MenuItemInstance),Item=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(ItemBridge,{...t},t=>reactExports.createElement(Primitive.div,{...t,ref:composeRefs(t.ref,n)},e)));Item.displayName="MenuItem";const GestureBridge=createReactComponent(GestureInstance,{events:["onWillTrigger","onTrigger"]}),Gesture=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(GestureBridge,{...t,ref:n},t=>reactExports.createElement(Primitive.div,{...t},e)));Gesture.displayName="Gesture";const TimeBridge=createReactComponent(TimeInstance),Time=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(TimeBridge,{...t},(t,r)=>reactExports.createElement(TimeText,{...t,instance:r,ref:composeRefs(t.ref,n)},e)));Time.displayName="Time";const TimeText=reactExports.forwardRef(({instance:e,children:t,...n},r)=>{const{timeText:i}=e.$state,s=useSignal(i);return reactExports.createElement(Primitive.div,{...n,ref:r},s,t)});TimeText.displayName="TimeText";const DEFAULT_AUDIO_GAINS=[1,1.25,1.5,1.75,2,2.5,3,4];class AudioGainRadioGroup extends Component{constructor(){super(),__privateAdd(this,_AudioGainRadioGroup_instances),__privateAdd(this,_media34),__privateAdd(this,_menu3),__privateAdd(this,_controller6),__privateSet(this,_controller6,new RadioGroupController),__privateGet(this,_controller6).onValueChange=__privateMethod(this,_AudioGainRadioGroup_instances,onValueChange_fn4).bind(this)}get value(){return __privateGet(this,_controller6).value}get disabled(){const{gains:e}=this.$props,{canSetAudioGain:t}=__privateGet(this,_media34).$state;return!t()||0===e().length}onSetup(){__privateSet(this,_media34,useMediaContext$1()),hasProvidedContext(menuContext)&&__privateSet(this,_menu3,useContext(menuContext))}onConnect(e){effect(__privateMethod(this,_AudioGainRadioGroup_instances,watchValue_fn5).bind(this)),effect(__privateMethod(this,_AudioGainRadioGroup_instances,watchHintText_fn).bind(this)),effect(__privateMethod(this,_AudioGainRadioGroup_instances,watchControllerDisabled_fn).bind(this))}getOptions(){const{gains:e,normalLabel:t}=this.$props;return e().map(e=>({label:1===e||null===e?t:String(100*e)+"%",value:e.toString()}))}}_media34=new WeakMap,_menu3=new WeakMap,_controller6=new WeakMap,_AudioGainRadioGroup_instances=new WeakSet,watchValue_fn5=function(){__privateGet(this,_controller6).value=__privateMethod(this,_AudioGainRadioGroup_instances,getValue_fn2).call(this)},watchHintText_fn=function(){var e;const{normalLabel:t}=this.$props,{audioGain:n}=__privateGet(this,_media34).$state,r=n();null==(e=__privateGet(this,_menu3))||e.hint.set(1===r||null==r?t():String(100*r)+"%")},watchControllerDisabled_fn=function(){var e;null==(e=__privateGet(this,_menu3))||e.disable(this.disabled)},getValue_fn2=function(){var e;const{audioGain:t}=__privateGet(this,_media34).$state;return(null==(e=t())?void 0:e.toString())??"1"},onValueChange_fn4=function(e,t){if(this.disabled)return;const n=+e;__privateGet(this,_media34).remote.changeAudioGain(n,t),this.dispatch("change",{detail:n,trigger:t})},__publicField(AudioGainRadioGroup,"props",{normalLabel:"Disabled",gains:DEFAULT_AUDIO_GAINS});const audiogainradiogroup__proto=AudioGainRadioGroup.prototype;prop(audiogainradiogroup__proto,"value"),prop(audiogainradiogroup__proto,"disabled"),method(audiogainradiogroup__proto,"getOptions");const playerCallbacks=["onAbort","onAudioTrackChange","onAudioTracksChange","onAutoPlay","onAutoPlayChange","onAutoPlayFail","onCanLoad","onCanPlay","onCanPlayThrough","onControlsChange","onDestroy","onDurationChange","onEmptied","onEnd","onEnded","onError","onFindMediaPlayer","onFullscreenChange","onFullscreenError","onLiveChange","onLiveEdgeChange","onLoadedData","onLoadedMetadata","onLoadStart","onLoopChange","onOrientationChange","onPause","onPictureInPictureChange","onPictureInPictureError","onPlay","onPlayFail","onPlaying","onPlaysInlineChange","onPosterChange","onProgress","onProviderChange","onProviderLoaderChange","onProviderSetup","onQualitiesChange","onQualityChange","onRateChange","onReplay","onSeeked","onSeeking","onSourceChange","onSourceChange","onStalled","onStarted","onStreamTypeChange","onSuspend","onTextTrackChange","onTextTracksChange","onTimeUpdate","onTitleChange","onVdsLog","onVideoPresentationChange","onVolumeChange","onWaiting"],MediaPlayerBridge=createReactComponent(MediaPlayerInstance,{events:playerCallbacks,eventsRegex:/^onHls/,domEventsRegex:/^onMedia/}),MediaPlayer=reactExports.forwardRef(({aspectRatio:e,children:t,...n},r)=>reactExports.createElement(MediaPlayerBridge,{...n,src:n.src,ref:r,style:{aspectRatio:e,...n.style}},e=>reactExports.createElement(Primitive.div,{...e},t)));MediaPlayer.displayName="MediaPlayer";const MediaProviderBridge=createReactComponent(MediaProviderInstance),MediaProvider=reactExports.forwardRef(({loaders:e=[],children:t,iframeProps:n,mediaProps:r,...i},s)=>{const a=reactExports.useMemo(()=>e.map(e=>new e),e);return reactExports.createElement(MediaProviderBridge,{...i,loaders:a,ref:s},(e,i)=>reactExports.createElement("div",{...e},reactExports.createElement(MediaOutlet,{provider:i,mediaProps:r,iframeProps:n}),t))});function MediaOutlet({provider:e,mediaProps:t,iframeProps:n}){const{sources:r,crossOrigin:i,poster:s,remotePlaybackInfo:a,nativeControls:o,viewType:l}=useStateContext(mediaState),{loader:c}=e.$state,{$provider:u,$providerSetup:d}=useMediaContext(),h=useSignal(r),p=useSignal(o),m=useSignal(i),f=useSignal(s),g=useSignal(c),x=useSignal(u),v=useSignal(d),y=useSignal(a),_=null==g?void 0:g.mediaType(),E="audio"===useSignal(l),b="youtube"===(null==g?void 0:g.name),C="vimeo"===(null==g?void 0:g.name),S=b||C,T="remotion"===(null==g?void 0:g.name),R="google-cast"===(null==g?void 0:g.name),[j,w]=reactExports.useState(""),[A,I]=reactExports.useState(!1);return reactExports.useEffect(()=>{R&&!j&&__vitePreload(()=>Promise.resolve().then(()=>vidstackCZgUA94N),void 0).then(function(e){return e.chromecast}).then(e=>{w(e.default)})},[R]),reactExports.useEffect(()=>{I(!0)},[]),R?reactExports.createElement("div",{className:"vds-google-cast",ref:t=>{e.load(t)}},reactExports.createElement(Icon,{paths:j}),(null==y?void 0:y.deviceName)?reactExports.createElement("span",{className:"vds-google-cast-info"},"Google Cast on"," ",reactExports.createElement("span",{className:"vds-google-cast-device-name"},y.deviceName)):null):T?reactExports.createElement("div",{"data-remotion-canvas":!0},reactExports.createElement("div",{"data-remotion-container":!0,ref:t=>{e.load(t)}},isRemotionProvider(x)&&v?reactExports.createElement(x.render):null)):S?reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("iframe",{...n,className:((null==n?void 0:n.className)?`${n.className} `:"")+b?"vds-youtube":"vds-vimeo",suppressHydrationWarning:!0,tabIndex:p?void 0:-1,"aria-hidden":"true","data-no-controls":p?void 0:"",ref(t){e.load(t)}}),p||E?null:reactExports.createElement("div",{className:"vds-blocker"})):_?reactExports.createElement("audio"===_?"audio":"video",{...t,controls:!!p||null,crossOrigin:"boolean"==typeof m?"":m,poster:"video"===_&&p&&f?f:null,suppressHydrationWarning:!0,children:A?null:h.map(({src:e,type:t})=>isString(e)?reactExports.createElement("source",{src:e,type:"?"!==t?t:void 0,key:e}):null),ref(t){e.load(t)}}):null}MediaProvider.displayName="MediaProvider",MediaOutlet.displayName="MediaOutlet";const ToggleButtonBridge=createReactComponent(ToggleButtonInstance),ToggleButton=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(ToggleButtonBridge,{...t},t=>reactExports.createElement(Primitive.button,{...t,ref:composeRefs(t.ref,n)},e)));ToggleButton.displayName="ToggleButton";const PosterBridge=createReactComponent(PosterInstance),Poster=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(PosterBridge,{src:t.asChild&&reactExports.isValidElement(e)?e.props.src:void 0,...t},(t,r)=>reactExports.createElement(PosterImg,{...t,instance:r,ref:composeRefs(t.ref,n)},e)));Poster.displayName="Poster";const PosterImg=reactExports.forwardRef(({instance:e,children:t,...n},r)=>{const{src:i,img:s,alt:a,crossOrigin:o,hidden:l}=e.$state,c=useSignal(i),u=useSignal(a),d=useSignal(o),h=useSignal(l);return reactExports.createElement(Primitive.img,{...n,src:c||void 0,alt:u||void 0,crossOrigin:d||void 0,ref:composeRefs(s.set,r),style:{display:h?"none":void 0}},t)});PosterImg.displayName="PosterImg";const Root$1=reactExports.forwardRef(({children:e,...t},n)=>reactExports.createElement(Primitive.div,{translate:"yes","aria-live":"off","aria-atomic":"true",...t,ref:n},e));Root$1.displayName="Caption";const Text=reactExports.forwardRef((e,t)=>{const n=useMediaState("textTrack"),[r,i]=reactExports.useState();return reactExports.useEffect(()=>{if(n)return n.addEventListener("cue-change",e),()=>{n.removeEventListener("cue-change",e),i(void 0)};function e(){i(null==n?void 0:n.activeCues[0])}},[n]),reactExports.createElement(Primitive.span,{...e,"data-part":"cue",dangerouslySetInnerHTML:{__html:(null==r?void 0:r.text)||""},ref:t})});Text.displayName="CaptionText";const isFiniteNumber=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},isSafeInteger=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=MAX_SAFE_INTEGER},MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;let ErrorTypes=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),ErrorDetails=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",e.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",e.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.ASSET_LIST_LOAD_ERROR="assetListLoadError",e.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",e.ASSET_LIST_PARSING_ERROR="assetListParsingError",e.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.ATTACH_MEDIA_ERROR="attachMediaError",e.UNKNOWN="unknown",e}({}),Events$1=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.MEDIA_ENDED="hlsMediaEnded",e.STALL_RESOLVED="hlsStallResolved",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFERED_TO_END="hlsBufferedToEnd",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e.ASSET_LIST_LOADING="hlsAssetListLoading",e.ASSET_LIST_LOADED="hlsAssetListLoaded",e.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",e.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",e.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",e.INTERSTITIAL_STARTED="hlsInterstitialStarted",e.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",e.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",e.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",e.INTERSTITIAL_ENDED="hlsInterstitialEnded",e.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",e.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",e.EVENT_CUE_ENTER="hlsEventCueEnter",e}({});var PlaylistContextType={AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},PlaylistLevelType={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class EWMA{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class EwmaBandWidthEstimator{constructor(e,t,n,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new EWMA(e),this.fast_=new EWMA(t),this.defaultTTFB_=r,this.ttfb_=new EWMA(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:i}=this;n.halfLife!==e&&(this.slow_=new EWMA(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new EWMA(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new EWMA(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){const n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function _defineProperty$1(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends$1.apply(null,arguments)}function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread2$1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach(function(t){_defineProperty$1(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}class Logger{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=noop$1,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const noop$1=function(){},fakeLogger={trace:noop$1,debug:noop$1,log:noop$1,warn:noop$1,info:noop$1,error:noop$1};function createLogger(){return _extends$1({},fakeLogger)}const exportedLogger=createLogger(),logger=exportedLogger;function getMediaSource(e=!0){if("undefined"==typeof self)return;return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function isManagedMediaSource(e){return"undefined"!=typeof self&&e===self.ManagedMediaSource}function isCompatibleTrackChange(e,t){const n=Object.keys(e),r=Object.keys(t),i=n.length,s=r.length;return!i||!s||i===s&&!n.some(e=>-1===r.indexOf(e))}function utf8ArrayToStr(e,t=!1){if("undefined"!=typeof TextDecoder){const n=new TextDecoder("utf-8").decode(e);if(t){const e=n.indexOf("\0");return-1!==e?n.substring(0,e):n}return n.replace(/\0/g,"")}const n=e.length;let r,i,s,a="",o=0;for(;o<n;){if(r=e[o++],0===r&&t)return a;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:i=e[o++],a+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=e[o++],s=e[o++],a+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s)}}return a}const Hex={hexDump:function(e){let t="";for(let n=0;n<e.length;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+=r}return t}};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var urlToolkit={exports:{}},hasRequiredUrlToolkit;function requireUrlToolkit(){return hasRequiredUrlToolkit||(hasRequiredUrlToolkit=1,e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,t=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,i={buildAbsoluteURL:function(e,n,r){if(r=r||{},e=e.trim(),!(n=n.trim())){if(!r.alwaysNormalize)return e;var s=i.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");return s.path=i.normalizePath(s.path),i.buildURLFromParts(s)}var a=i.parseURL(n);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=i.normalizePath(a.path),i.buildURLFromParts(a)):n;var o=i.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=t.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var u=o.path,d=u.substring(0,u.lastIndexOf("/")+1)+a.path;c.path=i.normalizePath(d)}else c.path=o.path,a.params||(c.params=o.params,a.query||(c.query=o.query));return null===c.path&&(c.path=r.alwaysNormalize?i.normalizePath(a.path):a.path),i.buildURLFromParts(c)},parseURL:function(t){var n=e.exec(t);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},urlToolkit.exports=i),urlToolkit.exports;var e,t,n,r,i}requireUrlToolkit();class LoadStats{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ElementaryStreamTypes={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};function isMediaFragment(e){return"initSegment"!==e.sn}const UINT32_MAX$1=Math.pow(2,32)-1,push=[].push,RemuxerTrackIdConfig={video:1,audio:2,id3:3,text:4};function bin2str(e){return String.fromCharCode.apply(null,e)}function readUint16(e,t){const n=e[t]<<8|e[t+1];return n<0?65536+n:n}function readUint32(e,t){const n=readSint32(e,t);return n<0?4294967296+n:n}function readUint64(e,t){let n=readUint32(e,t);return n*=Math.pow(2,32),n+=readUint32(e,t+4),n}function readSint32(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function hasMoofData(e){const t=e.byteLength;for(let n=0;n<t;){const r=readUint32(e,n);if(r>8&&109===e[n+4]&&111===e[n+5]&&111===e[n+6]&&102===e[n+7])return!0;n=r>1?n+r:t}return!1}function findBox(e,t){const n=[];if(!t.length)return n;const r=e.byteLength;for(let i=0;i<r;){const s=readUint32(e,i),a=s>1?i+s:r;if(bin2str(e.subarray(i+4,i+8))===t[0])if(1===t.length)n.push(e.subarray(i+8,a));else{const r=findBox(e.subarray(i+8,a),t.slice(1));r.length&&push.apply(n,r)}i=a}return n}function parseSegmentIndex(e){const t=[],n=e[0];let r=8;const i=readUint32(e,r);r+=4;let s=0,a=0;0===n?(s=readUint32(e,r),a=readUint32(e,r+4),r+=8):(s=readUint64(e,r),a=readUint64(e,r+8),r+=16),r+=2;let o=e.length+a;const l=readUint16(e,r);r+=2;for(let c=0;c<l;c++){let n=r;const s=readUint32(e,n);n+=4;const a=2147483647&s;if(1===(2147483648&s)>>>31)return logger.warn("SIDX has hierarchical references (not supported)"),null;const l=readUint32(e,n);n+=4,t.push({referenceSize:a,subsegmentDuration:l,info:{duration:l/i,start:o,end:o+a-1}}),o+=a,n+=4,r=n}return{earliestPresentationTime:s,timescale:i,version:n,referencesCount:l,references:t}}function parseInitSegment(e){const t=[],n=findBox(e,["moov","trak"]);for(let r=0;r<n.length;r++){const e=n[r],i=findBox(e,["tkhd"])[0];if(i){let n=i[0];const r=readUint32(i,0===n?12:20),s=findBox(e,["mdia","mdhd"])[0];if(s){n=s[0];const i=readUint32(s,0===n?12:20),a=findBox(e,["mdia","hdlr"])[0];if(a){const n=bin2str(a.subarray(8,12)),s={soun:ElementaryStreamTypes.AUDIO,vide:ElementaryStreamTypes.VIDEO}[n],o=parseStsd(findBox(e,["mdia","minf","stbl","stsd"])[0]);s?(t[r]={timescale:i,type:s,stsd:o},t[s]=_objectSpread2$1({timescale:i,id:r},o)):t[r]={timescale:i,type:n,stsd:o}}}}}return findBox(e,["moov","mvex","trex"]).forEach(e=>{const n=readUint32(e,4),r=t[n];r&&(r.default={duration:readUint32(e,12),flags:readUint32(e,20)})}),t}function parseStsd(e){const t=e.subarray(8),n=t.subarray(86),r=bin2str(t.subarray(4,8));let i,s=r;const a="enca"===r||"encv"===r;if(a){const e=findBox(t,[r])[0];findBox(e.subarray("enca"===r?28:78),["sinf"]).forEach(e=>{const t=findBox(e,["schm"])[0];if(t){const n=bin2str(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=findBox(e,["frma"])[0];t&&(s=bin2str(t))}}})}const o=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const e=findBox(n,["avcC"])[0];e&&e.length>3&&(s+="."+toHex(e[1])+toHex(e[2])+toHex(e[3]),i=parseSupplementalDoViCodec("avc1"===o?"dva1":"dvav",n));break}case"mp4a":{const e=findBox(t,[r])[0],n=findBox(e.subarray(28),["esds"])[0];if(n&&n.length>7){let e=4;if(3!==n[e++])break;e=skipBERInteger(n,e),e+=2;const t=n[e++];if(128&t&&(e+=2),64&t&&(e+=n[e++]),4!==n[e++])break;e=skipBERInteger(n,e);const r=n[e++];if(64!==r)break;if(s+="."+toHex(r),e+=12,5!==n[e++])break;e=skipBERInteger(n,e);const i=n[e++];let a=(248&i)>>3;31===a&&(a+=1+((7&i)<<3)+((224&n[e])>>5)),s+="."+a}break}case"hvc1":case"hev1":{const e=findBox(n,["hvcC"])[0];if(e&&e.length>12){const t=e[1],n=["","A","B","C"][t>>6],r=31&t,i=readUint32(e,2),a=(32&t)>>5?"H":"L",o=e[12],l=e.subarray(6,12);s+="."+n+r,s+="."+reverse32BitInt(i).toString(16).toUpperCase(),s+="."+a+o;let c="";for(let e=l.length;e--;){const t=l[e];if(t||c){c="."+t.toString(16).toUpperCase()+c}}s+=c}i=parseSupplementalDoViCodec("hev1"==o?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":s=parseSupplementalDoViCodec(s,n)||s;break;case"vp09":{const e=findBox(n,["vpcC"])[0];if(e&&e.length>6){const t=e[4],n=e[5],r=e[6]>>4&15;s+="."+addLeadingZero(t)+"."+addLeadingZero(n)+"."+addLeadingZero(r)}break}case"av01":{const e=findBox(n,["av1C"])[0];if(e&&e.length>2){const t=e[1]>>>5,r=31&e[1],a=e[2]>>>7?"H":"M",o=(64&e[2])>>6,l=(32&e[2])>>5,c=2===t&&o?l?12:10:o?10:8,u=(16&e[2])>>4,d=(8&e[2])>>3,h=(4&e[2])>>2,p=3&e[2],m=1,f=1,g=1,x=0;s+="."+t+"."+addLeadingZero(r)+a+"."+addLeadingZero(c)+"."+u+"."+d+h+p+"."+addLeadingZero(m)+"."+addLeadingZero(f)+"."+addLeadingZero(g)+"."+x,i=parseSupplementalDoViCodec("dav1",n)}break}}return{codec:s,encrypted:a,supplemental:i}}function parseSupplementalDoViCodec(e,t){const n=findBox(t,["dvvC"]),r=n.length?n[0]:findBox(t,["dvcC"])[0];if(r){const t=r[2]>>1&127,n=r[2]<<5&32|r[3]>>3&31;return e+"."+addLeadingZero(t)+"."+addLeadingZero(n)}}function reverse32BitInt(e){let t=0;for(let n=0;n<32;n++)t|=(e>>n&1)<<31-n;return t>>>0}function skipBERInteger(e,t){const n=t+5;for(;128&e[t++]&&t<n;);return t}function toHex(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function addLeadingZero(e){return(e<10?"0":"")+e}function patchEncyptionData(e,t){if(!e||!t)return;const n=t.keyId;if(n&&t.isCommonEncryption){findBox(e,["moov","trak"]).forEach(e=>{const t=findBox(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let r=findBox(t,["enca"]);const i=r.length>0;i||(r=findBox(t,["encv"])),r.forEach(e=>{findBox(i?e.subarray(28):e.subarray(78),["sinf"]).forEach(e=>{const t=parseSinf(e);if(t){const e=t.subarray(8,24);e.some(e=>0!==e)||(logger.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${Hex.hexDump(e)} -> ${Hex.hexDump(n)}`),t.set(n,8))}})})})}}function parseSinf(e){const t=findBox(e,["schm"])[0];if(t){const n=bin2str(t.subarray(4,8));if("cbcs"===n||"cenc"===n)return findBox(e,["schi","tenc"])[0]}return null}function getSampleData(e,t,n){const r={},i=findBox(e,["moof","traf"]);for(let s=0;s<i.length;s++){const e=i[s],a=findBox(e,["tfhd"])[0],o=readUint32(a,4),l=t[o];if(!l)continue;r[o]||(r[o]={start:NaN,duration:0,sampleCount:0,timescale:l.timescale,type:l.type});const c=r[o],u=findBox(e,["tfdt"])[0];if(u){const e=u[0];let t=readUint32(u,4);1===e&&(t===UINT32_MAX$1?n.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(t*=UINT32_MAX$1+1,t+=readUint32(u,8))),isFiniteNumber(t)&&(!isFiniteNumber(c.start)||t<c.start)&&(c.start=t)}const d=l.default,h=readUint32(a,0)|(null==d?void 0:d.flags);let p=(null==d?void 0:d.duration)||0;8&h&&(p=readUint32(a,2&h?12:8));const m=findBox(e,["trun"]);let f=c.start||0,g=0,x=p;for(let t=0;t<m.length;t++){const e=m[t],n=readUint32(e,4),r=c.sampleCount;c.sampleCount+=n;const i=1&e[3],s=4&e[3],a=1&e[2],o=2&e[2],l=4&e[2],u=8&e[2];let d=8,h=n;if(i&&(d+=4),s&&n){1&e[d+1]||void 0!==c.keyFrameIndex||(c.keyFrameIndex=r),d+=4,a?(x=readUint32(e,d),d+=4):x=p,o&&(d+=4),u&&(d+=4),f+=x,g+=x,h--}for(;h--;){if(a?(x=readUint32(e,d),d+=4):x=p,o&&(d+=4),l){1&e[d+1]||void 0===c.keyFrameIndex&&(c.keyFrameIndex=c.sampleCount-(h+1),c.keyFrameStart=f),d+=4}u&&(d+=4),f+=x,g+=x}!g&&p&&(g+=p*n)}c.duration+=g}if(!Object.keys(r).some(e=>r[e].duration)){let t=1/0,n=0;const i=findBox(e,["sidx"]);for(let e=0;e<i.length;e++){const r=parseSegmentIndex(i[e]);if(null!=r&&r.references){t=Math.min(t,r.earliestPresentationTime/r.timescale);const e=r.references.reduce((e,t)=>e+t.info.duration||0,0);n=Math.max(n,e+r.earliestPresentationTime/r.timescale)}}n&&isFiniteNumber(n)&&Object.keys(r).forEach(e=>{r[e].duration||(r[e].duration=n*r[e].timescale-r[e].start)})}return r}function segmentValidRange(e){const t={valid:null,remainder:null},n=findBox(e,["moof"]);if(n.length<2)return t.remainder=e,t;const r=n[n.length-1];return t.valid=e.slice(0,r.byteOffset-8),t.remainder=e.slice(r.byteOffset-8),t}function appendUint8Array(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function parseSamples(e,t){const n=[],r=t.samples,i=t.timescale,s=t.id;let a=!1;return findBox(r,["moof"]).map(o=>{const l=o.byteOffset-8;findBox(o,["traf"]).map(o=>{const c=findBox(o,["tfdt"]).map(e=>{const t=e[0];let n=readUint32(e,4);return 1===t&&(n*=Math.pow(2,32),n+=readUint32(e,8)),n/i})[0];return void 0!==c&&(e=c),findBox(o,["tfhd"]).map(c=>{const u=readUint32(c,4),d=16777215&readUint32(c,0);let h=0;const p=!!(16&d);let m=0;const f=!!(32&d);let g=8;u===s&&(!!(1&d)&&(g+=8),!!(2&d)&&(g+=4),!!(8&d)&&(h=readUint32(c,g),g+=4),p&&(m=readUint32(c,g),g+=4),f&&(g+=4),"video"===t.type&&(a=isHEVC(t.codec)),findBox(o,["trun"]).map(s=>{const o=s[0],c=16777215&readUint32(s,0),u=!!(1&c);let d=0;const p=!!(4&c),f=!!(256&c);let g=0;const x=!!(512&c);let v=0;const y=!!(1024&c),_=!!(2048&c);let E=0;const b=readUint32(s,4);let C=8;u&&(d=readUint32(s,C),C+=4),p&&(C+=4);let S=d+l;for(let l=0;l<b;l++){if(f?(g=readUint32(s,C),C+=4):g=h,x?(v=readUint32(s,C),C+=4):v=m,y&&(C+=4),_&&(E=0===o?readUint32(s,C):readSint32(s,C),C+=4),t.type===ElementaryStreamTypes.VIDEO){let t=0;for(;t<v;){const s=readUint32(r,S);if(S+=4,isSEIMessage(a,r[S])){parseSEIMessageFromNALu(r.subarray(S,S+s),a?2:1,e+E/i,n)}S+=s,t+=s+4}}e+=g/i}}))})})}),n}function isHEVC(e){if(!e)return!1;const t=e.substring(0,4);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}function isSEIMessage(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function parseSEIMessageFromNALu(e,t,n,r){const i=discardEPB(e);let s=0;s+=t;let a=0,o=0,l=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(255===l);o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(255===l);const e=i.length-s;let t=s;if(o<e)s+=o;else if(o>e){logger.error(`Malformed SEI payload. ${o} is too small, only ${e} bytes left to parse.`);break}if(4===a){if(181===i[t++]){const e=readUint16(i,t);if(t+=2,49===e){const e=readUint32(i,t);if(t+=4,1195456820===e){const e=i[t++];if(3===e){const s=i[t++],o=64&s,l=o?2+3*(31&s):0,c=new Uint8Array(l);if(o){c[0]=s;for(let e=1;e<l;e++)c[e]=i[t++]}r.push({type:e,payloadType:a,pts:n,bytes:c})}}}}}else if(5===a&&o>16){const e=[];for(let n=0;n<16;n++){const r=i[t++].toString(16);e.push(1==r.length?"0"+r:r),3!==n&&5!==n&&7!==n&&9!==n||e.push("-")}const s=o-16,l=new Uint8Array(s);for(let n=0;n<s;n++)l[n]=i[t++];r.push({payloadType:a,pts:n,uuid:e.join(""),userData:utf8ArrayToStr(l),userDataBytes:l})}}}function discardEPB(e){const t=e.byteLength,n=[];let r=1;for(;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;const i=t-n.length,s=new Uint8Array(i);let a=0;for(r=0;r<i;a++,r++)a===n[0]&&(a++,n.shift()),s[r]=e[a];return s}function parseEmsg(e){const t=e[0];let n="",r="",i=0,s=0,a=0,o=0,l=0,c=0;if(0===t){for(;"\0"!==bin2str(e.subarray(c,c+1));)n+=bin2str(e.subarray(c,c+1)),c+=1;for(n+=bin2str(e.subarray(c,c+1)),c+=1;"\0"!==bin2str(e.subarray(c,c+1));)r+=bin2str(e.subarray(c,c+1)),c+=1;r+=bin2str(e.subarray(c,c+1)),c+=1,i=readUint32(e,12),s=readUint32(e,16),o=readUint32(e,20),l=readUint32(e,24),c=28}else if(1===t){c+=4,i=readUint32(e,c),c+=4;const t=readUint32(e,c);c+=4;const s=readUint32(e,c);for(c+=4,a=2**32*t+s,isSafeInteger(a)||(a=Number.MAX_SAFE_INTEGER,logger.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=readUint32(e,c),c+=4,l=readUint32(e,c),c+=4;"\0"!==bin2str(e.subarray(c,c+1));)n+=bin2str(e.subarray(c,c+1)),c+=1;for(n+=bin2str(e.subarray(c,c+1)),c+=1;"\0"!==bin2str(e.subarray(c,c+1));)r+=bin2str(e.subarray(c,c+1)),c+=1;r+=bin2str(e.subarray(c,c+1)),c+=1}return{schemeIdUri:n,value:r,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:e.subarray(c,e.byteLength)}}const userAgentHevcSupportIsInaccurate=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),sampleEntryCodesISO={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function isCodecType(e,t){const n=sampleEntryCodesISO[t];return!!n&&!!n[e.slice(0,4)]}function areCodecsMediaSourceSupported(e,t,n=!0){return!e.split(",").some(e=>!isCodecMediaSourceSupported(e,t,n))}function isCodecMediaSourceSupported(e,t,n=!0){var r;const i=getMediaSource(n);return null!=(r=null==i?void 0:i.isTypeSupported(mimeTypeForCodec(e,t)))&&r}function mimeTypeForCodec(e,t){return`${t}/mp4;codecs=${e}`}function codecsSetSelectionPreferenceValue(e){const t=userAgentHevcSupportIsInaccurate();return e.split(",").reduce((e,n)=>{const r=t&&isHEVC(n)?9:sampleEntryCodesISO.video[n];return r?(2*r+e)/(e?3:2):(sampleEntryCodesISO.audio[n]+e)/(e?2:1)},0)}const CODEC_COMPATIBLE_NAMES={};function getCodecCompatibleNameLower(e,t=!0){if(CODEC_COMPATIBLE_NAMES[e])return CODEC_COMPATIBLE_NAMES[e];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e];for(let i=0;i<n.length;i++){var r;if(isCodecMediaSourceSupported(n[i],"audio",t))return CODEC_COMPATIBLE_NAMES[e]=n[i],n[i];if("mp3"===n[i]&&null!=(r=getMediaSource(t))&&r.isTypeSupported("audio/mpeg"))return""}return e}const AUDIO_CODEC_REGEXP=/flac|opus|mp4a\.40\.34/i;function getCodecCompatibleName(e,t=!0){return e.replace(AUDIO_CODEC_REGEXP,e=>getCodecCompatibleNameLower(e.toLowerCase(),t))}function replaceVideoCodec(e,t){const n=[];if(e){const t=e.split(",");for(let e=0;e<t.length;e++)isCodecType(t[e],"video")||n.push(t[e])}return t&&n.push(t),n.join(",")}function pickMostCompleteCodecName(e,t){if(e&&(e.length>4||-1!==["ac-3","ec-3","alac","fLaC","Opus"].indexOf(e))&&(isCodecSupportedAsType(e,"audio")||isCodecSupportedAsType(e,"video")))return e;if(t){const n=t.split(",");if(n.length>1){if(e)for(let t=n.length;t--;)if(n[t].substring(0,4)===e.substring(0,4))return n[t];return n[0]}}return t||e}function isCodecSupportedAsType(e,t){return isCodecType(e,t)&&isCodecMediaSourceSupported(e,t)}function fillInMissingAV01Params(e){if(e.startsWith("av01.")){const t=e.split("."),n=["0","111","01","01","01","0"];for(let e=t.length;e>4&&e<10;e++)t[e]=n[e-4];return t.join(".")}return e}function getM2TSSupportedAudioTypes(e){const t=getMediaSource(e)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function getCodecsForMimeType(e){return e.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const SUPPORTED_INFO_DEFAULT={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function getUnsupportedResult(e,t){return{supported:!1,configurations:t,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:e}}function requiresMediaCapabilitiesDecodingInfo(e,t,n,r,i,s){const a=e.videoCodec,o=e.audioCodec?e.audioGroups:null,l=null==s?void 0:s.audioCodec,c=null==s?void 0:s.channels,u=c?parseInt(c):l?1/0:2;let d=null;if(null!=o&&o.length)try{d=1===o.length&&o[0]?t.groups[o[0]].channels:o.reduce((e,n)=>{if(n){const r=t.groups[n];if(!r)throw new Error(`Audio track group ${n} not found`);Object.keys(r.channels).forEach(t=>{e[t]=(e[t]||0)+r.channels[t]})}return e},{2:0})}catch(h){return!0}return void 0!==a&&(a.split(",").some(e=>isHEVC(e))||e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(r,30)||"SDR"!==e.videoRange&&e.videoRange!==n||e.bitrate>Math.max(i,8e6))||!!d&&isFiniteNumber(u)&&Object.keys(d).some(e=>parseInt(e)>u)}function getMediaDecodingInfoPromise(e,t,n,r={}){const i=e.videoCodec;if(!i&&!e.audioCodec||!n)return Promise.resolve(SUPPORTED_INFO_DEFAULT);const s=[],a=makeVideoConfigurations(e),o=a.length,l=makeAudioConfigurations(e,t,o>0),c=l.length;for(let u=o||1*c||1;u--;){const e={type:"media-source"};if(o&&(e.video=a[u%o]),c){e.audio=l[u%c];const t=e.audio.bitrate;e.video&&t&&(e.video.bitrate-=t)}s.push(e)}if(i){const e=navigator.userAgent;if(i.split(",").some(e=>isHEVC(e))&&userAgentHevcSupportIsInaccurate())return Promise.resolve(getUnsupportedResult(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${e})`),s))}return Promise.all(s.map(e=>{const t=getMediaDecodingInfoKey(e);return r[t]||(r[t]=n.decodingInfo(e))})).then(e=>({supported:!e.some(e=>!e.supported),configurations:s,decodingInfoResults:e})).catch(e=>({supported:!1,configurations:s,decodingInfoResults:[],error:e}))}function makeVideoConfigurations(e){var t;const n=null==(t=e.videoCodec)?void 0:t.split(","),r=getVariantDecodingBitrate(e),i=e.width||640,s=e.height||480,a=e.frameRate||30,o=e.videoRange.toLowerCase();return n?n.map(e=>{const t={contentType:mimeTypeForCodec(fillInMissingAV01Params(e),"video"),width:i,height:s,bitrate:r,framerate:a};return"sdr"!==o&&(t.transferFunction=o),t}):[]}function makeAudioConfigurations(e,t,n){var r;const i=null==(r=e.audioCodec)?void 0:r.split(","),s=getVariantDecodingBitrate(e);return i&&e.audioGroups?e.audioGroups.reduce((e,r)=>{var a;const o=r?null==(a=t.groups[r])?void 0:a.tracks:null;return o?o.reduce((e,t)=>{if(t.groupId===r){const r=parseFloat(t.channels||"");i.forEach(t=>{const i={contentType:mimeTypeForCodec(t,"audio"),bitrate:n?estimatedAudioBitrate(t,s):s};r&&(i.channels=""+r),e.push(i)})}return e},e):e},[]):[]}function estimatedAudioBitrate(e,t){if(t<=1)return 1;let n=128e3;return"ec-3"===e?n=768e3:"ac-3"===e&&(n=64e4),Math.min(t/2,n)}function getVariantDecodingBitrate(e){return 1e3*Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)/1e3)||1}function getMediaDecodingInfoKey(e){let t="";const{audio:n,video:r}=e;if(r){t+=`${getCodecsForMimeType(r.contentType)}_r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${Math.ceil(r.bitrate/1e5)}`}if(n){t+=`${r?"_":""}${getCodecsForMimeType(n.contentType)}_c${n.channels}`}return t}const HdcpLevels=["NONE","TYPE-0","TYPE-1",null],VideoRangeValues=["SDR","PQ","HLG"];var HlsSkip={No:"",Yes:"YES",v2:"v2"};function getSkipValue(e){const{canSkipUntil:t,canSkipDateRanges:n,age:r}=e;return t&&r<t/2?n?HlsSkip.v2:HlsSkip.Yes:HlsSkip.No}class HlsUrlParameters{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Level{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(e=>!!e).map(e=>e.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=null==(t=e.supplemental)?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return hasGroup(this._audioGroups,e)}hasSubtitleGroup(e){return hasGroup(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function hasGroup(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function isHdrSupported(){if("function"==typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}function getVideoSelectionOptions(e,t){let n=!1,r=[];if(e&&(n="SDR"!==e,r=[e]),t){r=t.allowedVideoRanges||VideoRangeValues.slice(0);const e="SDR"!==r.join("")&&!t.videoCodec;n=void 0!==t.preferHDR?t.preferHDR:e&&isHdrSupported(),n||(r=["SDR"])}return{preferHDR:n,allowedVideoRanges:r}}const omitCircularRefsReplacer=e=>{const t=new WeakSet;return(n,r)=>{if(e&&(r=e(n,r)),"object"==typeof r&&null!==r){if(t.has(r))return;t.add(r)}return r}},stringify=(e,t)=>JSON.stringify(e,omitCircularRefsReplacer(t));function getStartCodecTier(e,t,n,r,i){const s=Object.keys(e),a=null==r?void 0:r.channels,o=null==r?void 0:r.audioCodec,l=null==i?void 0:i.videoCodec,c=a&&2===parseInt(a);let u=!1,d=!1,h=1/0,p=1/0,m=1/0,f=1/0,g=0,x=[];const{preferHDR:v,allowedVideoRanges:y}=getVideoSelectionOptions(t,i);for(let C=s.length;C--;){const t=e[s[C]];u||(u=t.channels[2]>0),h=Math.min(h,t.minHeight),p=Math.min(p,t.minFramerate),m=Math.min(m,t.minBitrate);y.filter(e=>t.videoRanges[e]>0).length>0&&(d=!0)}h=isFiniteNumber(h)?h:0,p=isFiniteNumber(p)?p:0;const _=Math.max(1080,h),E=Math.max(30,p);m=isFiniteNumber(m)?m:n,n=Math.max(m,n),d||(t=void 0);const b=s.length>1;return{codecSet:s.reduce((t,r)=>{const i=e[r];if(r===t)return t;if(x=d?y.filter(e=>i.videoRanges[e]>0):[],b){if(i.minBitrate>n)return logStartCodecCandidateIgnored(r,`min bitrate of ${i.minBitrate} > current estimate of ${n}`),t;if(!i.hasDefaultAudio)return logStartCodecCandidateIgnored(r,"no renditions with default or auto-select sound found"),t;if(o&&r.indexOf(o.substring(0,4))%5!=0)return logStartCodecCandidateIgnored(r,`audio codec preference "${o}" not found`),t;if(a&&!c){if(!i.channels[a])return logStartCodecCandidateIgnored(r,`no renditions with ${a} channel sound found (channels options: ${Object.keys(i.channels)})`),t}else if((!o||c)&&u&&0===i.channels[2])return logStartCodecCandidateIgnored(r,"no renditions with stereo sound found"),t;if(i.minHeight>_)return logStartCodecCandidateIgnored(r,`min resolution of ${i.minHeight} > maximum of ${_}`),t;if(i.minFramerate>E)return logStartCodecCandidateIgnored(r,`min framerate of ${i.minFramerate} > maximum of ${E}`),t;if(!x.some(e=>i.videoRanges[e]>0))return logStartCodecCandidateIgnored(r,`no variants with VIDEO-RANGE of ${stringify(x)} found`),t;if(l&&r.indexOf(l.substring(0,4))%5!=0)return logStartCodecCandidateIgnored(r,`video codec preference "${l}" not found`),t;if(i.maxScore<g)return logStartCodecCandidateIgnored(r,`max score of ${i.maxScore} < selected max of ${g}`),t}return t&&(codecsSetSelectionPreferenceValue(r)>=codecsSetSelectionPreferenceValue(t)||i.fragmentError>e[t].fragmentError)?t:(f=i.minIndex,g=i.maxScore,r)},void 0),videoRanges:x,preferHDR:v,minFramerate:p,minBitrate:m,minIndex:f}}function logStartCodecCandidateIgnored(e,t){logger.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function getAudioTracksByGroup(e){return e.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const r=t.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function getCodecTiers(e,t,n,r){return e.slice(n,r+1).reduce((e,n,r)=>{if(!n.codecSet)return e;const i=n.audioGroups;let s=e[n.codecSet];s||(e[n.codecSet]=s={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:r,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),s.minBitrate=Math.min(s.minBitrate,n.bitrate);const a=Math.min(n.height,n.width);return s.minHeight=Math.min(s.minHeight,a),s.minFramerate=Math.min(s.minFramerate,n.frameRate),s.minIndex=Math.min(s.minIndex,r),s.maxScore=Math.max(s.maxScore,n.score),s.fragmentError+=n.fragmentError,s.videoRanges[n.videoRange]=(s.videoRanges[n.videoRange]||0)+1,i&&i.forEach(e=>{if(!e)return;const n=t.groups[e];n&&(s.hasDefaultAudio=s.hasDefaultAudio||t.hasDefaultAudio?n.hasDefault:n.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(n.channels).forEach(e=>{s.channels[e]=(s.channels[e]||0)+n.channels[e]}))}),e},{})}function getBasicSelectionOption(e){if(!e)return e;const{lang:t,assocLang:n,characteristics:r,channels:i,audioCodec:s}=e;return{lang:t,assocLang:n,characteristics:r,channels:i,audioCodec:s}}function findMatchingOption(e,t,n){if("attrs"in e){const n=t.indexOf(e);if(-1!==n)return n}for(let r=0;r<t.length;r++){if(matchesOption(e,t[r],n))return r}return-1}function matchesOption(e,t,n){const{groupId:r,name:i,lang:s,assocLang:a,default:o}=e,l=e.forced;return(void 0===r||t.groupId===r)&&(void 0===i||t.name===i)&&(void 0===s||languagesMatch(s,t.lang))&&(void 0===s||t.assocLang===a)&&(void 0===o||t.default===o)&&(void 0===l||t.forced===l)&&(!("characteristics"in e)||characteristicsMatch(e.characteristics||"",t.characteristics))&&(void 0===n||n(e,t))}function languagesMatch(e,t="--"){return e.length===t.length?e===t:e.startsWith(t)||t.startsWith(e)}function characteristicsMatch(e,t=""){const n=e.split(","),r=t.split(",");return n.length===r.length&&!n.some(e=>-1===r.indexOf(e))}function audioMatchPredicate(e,t){const{audioCodec:n,channels:r}=e;return!(void 0!==n&&(t.audioCodec||"").substring(0,4)!==n.substring(0,4)||void 0!==r&&r!==(t.channels||"2"))}function findClosestLevelWithAudioGroup(e,t,n,r,i){const s=t[r],a=t.reduce((e,t,n)=>{const r=t.uri;return(e[r]||(e[r]=[])).push(n),e},{})[s.uri];a.length>1&&(r=Math.max.apply(Math,a));const o=s.videoRange,l=s.frameRate,c=s.codecSet.substring(0,4),u=searchDownAndUpList(t,r,t=>{if(t.videoRange!==o||t.frameRate!==l||t.codecSet.substring(0,4)!==c)return!1;const r=t.audioGroups,s=n.filter(e=>!r||-1!==r.indexOf(e.groupId));return findMatchingOption(e,s,i)>-1});return u>-1?u:searchDownAndUpList(t,r,t=>{const r=t.audioGroups,s=n.filter(e=>!r||-1!==r.indexOf(e.groupId));return findMatchingOption(e,s,i)>-1})}function searchDownAndUpList(e,t,n){for(let r=t;r>-1;r--)if(n(e[r]))return r;for(let r=t+1;r<e.length;r++)if(n(e[r]))return r;return-1}function useAlternateAudio(e,t){var n;return!!e&&e!==(null==(n=t.loadLevelObj)?void 0:n.uri)}class AbrController extends Logger{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=e=>{var t;const{fragCurrent:n,partCurrent:r,hls:i}=this,{autoLevelEnabled:s,media:a}=i;if(!n||!a)return;const o=performance.now(),l=r?r.stats:n.stats,c=r?r.duration:n.duration,u=o-l.loading.start,d=i.minAutoLevel,h=n.level,p=this._nextAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||h<=d)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!s)return;const m=p>-1&&p!==h,f=!!e||m;if(!f&&(a.paused||!a.playbackRate||!a.readyState))return;const g=i.mainForwardBufferInfo;if(!f&&null===g)return;const x=this.bwEstimator.getEstimateTTFB(),v=Math.abs(a.playbackRate);if(u<=Math.max(x,c/(2*v)*1e3))return;const y=g?g.len/v:0,_=l.loading.first?l.loading.first-l.loading.start:-1,E=l.loaded&&_>-1,b=this.getBwEstimate(),C=i.levels,S=C[h],T=Math.max(l.loaded,Math.round(c*(n.bitrate||S.averageBitrate)/8));let R=E?u-_:u;R<1&&E&&(R=Math.min(u,8*l.loaded/b));const j=E?1e3*l.loaded/R:0,w=x/1e3,A=j?(T-l.loaded)/j:8*T/b+w;if(A<=y)return;const I=j?8*j:b,k=!0===(null==(t=(null==e?void 0:e.details)||this.hls.latestLevelDetails)?void 0:t.live),M=this.hls.config.abrBandWidthUpFactor;let P,L=Number.POSITIVE_INFINITY;for(P=h-1;P>d;P--){const e=C[P].maxBitrate,t=!C[P].details||k;if(L=this.getTimeToLoadFrag(w,I,c*e,t),L<Math.min(y,c+w))break}if(L>=A)return;if(L>10*c)return;E?this.bwEstimator.sample(u-Math.min(x,_),l.loaded):this.bwEstimator.sampleTTFB(u);const D=C[P].maxBitrate;this.getBwEstimate()*M>D&&this.resetEstimator(D);const O=this.findBestLevel(D,d,P,0,y,1,1);O>-1&&(P=O),this.warn(`Fragment ${n.sn}${r?" part "+r.index:""} of level ${h} is loading too slowly;\n      Fragment duration: ${n.duration.toFixed(3)}\n      Time to underbuffer: ${y.toFixed(3)} s\n      Estimated load time for current fragment: ${A.toFixed(3)} s\n      Estimated load time for down switch fragment: ${L.toFixed(3)} s\n      TTFB estimate: ${0|_} ms\n      Current BW estimate: ${isFiniteNumber(b)?0|b:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${P} @ ${0|D} bps`),i.nextLoadLevel=i.nextAutoLevel=P,this.clearTimer();const $=()=>{if(this.clearTimer(),this.fragCurrent===n&&this.hls.loadLevel===P&&P>0){const e=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${P>0?"and switching down":""}\n      Fragment duration: ${n.duration.toFixed(3)} s\n      Time to underbuffer: ${e.toFixed(3)} s`),n.abortRequests(),this.fragCurrent=this.partCurrent=null,P>d){let t=this.findBestLevel(this.hls.levels[d].bitrate,d,P,0,e,1,1);-1===t&&(t=d),this.hls.nextLoadLevel=this.hls.nextAutoLevel=t,this.resetEstimator(this.hls.levels[t].bitrate)}}};m||A>2*L?$():this.timer=self.setInterval($,1e3*L),i.trigger(Events$1.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:r,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new EwmaBandWidthEstimator(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events$1.FRAG_LOADING,this.onFragLoading,this),e.on(Events$1.FRAG_LOADED,this.onFragLoaded,this),e.on(Events$1.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Events$1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Events$1.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Events$1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Events$1.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(Events$1.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events$1.FRAG_LOADING,this.onFragLoading,this),e.off(Events$1.FRAG_LOADED,this.onFragLoaded,this),e.off(Events$1.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Events$1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Events$1.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Events$1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Events$1.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(Events$1.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){var r;if(!n.bitrateTest)this.fragCurrent=n,this.partCurrent=null!=(r=t.part)?r:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case ErrorDetails.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:n,partCurrent:r}=this;if(e&&n&&e.sn===n.sn&&e.level===n.level){const t=performance.now(),n=r?r.stats:e.stats,i=t-n.loading.start,s=n.loading.first?n.loading.first-n.loading.start:-1;if(n.loaded&&s>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(i-Math.min(e,s),n.loaded)}else this.bwEstimator.sampleTTFB(i)}break}}}getTimeToLoadFrag(e,t,n,r){return e+n/t+(r?e+this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const n=this.hls.config,{loading:r}=t.stats,i=r.end-r.first;isFiniteNumber(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const r=n?n.stats:t.stats;if(t.type===PlaylistLevelType.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=n?n.duration:t.duration,i=this.hls.levels[t.level],s=(i.loaded?i.loaded.bytes:0)+r.loaded,a=(i.loaded?i.loaded.duration:0)+e;i.loaded={bytes:s,duration:a},i.realBitrate=Math.round(8*s/a)}if(t.bitrateTest){const e={stats:r,frag:t,part:n,id:t.type};this.onFragBuffered(Events$1.FRAG_BUFFERED,e),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:r}=t,i=null!=r&&r.stats.loaded?r.stats:n.stats;if(i.aborted)return;if(this.ignoreFragment(n))return;const s=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,i.loaded),i.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==PlaylistLevelType.MAIN||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,i=this.findBestLevel(n,t,e,0,r,1,1);if(i>-1)return i;const s=this.hls.firstLevel,a=Math.min(Math.max(s,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${s} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&n&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;const r=t&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,r)&&t[e].loadError<=t[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:r,config:i,minAutoLevel:s}=n,a=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay();let c=i.abrBandWidthFactor,u=i.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(o,s,r,l,0,c,u);if(e>=0)return this.rebufferNotice=-1,e}let d=a?Math.min(a,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;if(e){d=(a?Math.min(a,i.maxLoadingDelay):i.maxLoadingDelay)-e,this.info(`bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*d)} ms`),c=u=1}}const h=this.findBestLevel(o,s,r,l,d,c,u);if(this.rebufferNotice!==h&&(this.rebufferNotice=h,this.info(`${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`)),h>-1)return h;const p=n.levels[s],m=n.loadLevelObj;return m&&(null==p?void 0:p.bitrate)<m.bitrate?s:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,r,i,s,a){var o;const l=r+i,c=this.lastLoadedFragLevel,u=-1===c?this.hls.firstLevel:c,{fragCurrent:d,partCurrent:h}=this,{levels:p,allAudioTracks:m,loadLevel:f,config:g}=this.hls;if(1===p.length)return 0;const x=p[u],v=!(null==(o=this.hls.latestLevelDetails)||!o.live),y=-1===f||-1===c;let _,E="SDR",b=(null==x?void 0:x.frameRate)||0;const{audioPreference:C,videoPreference:S}=g,T=this.audioTracksByGroup||(this.audioTracksByGroup=getAudioTracksByGroup(m));let R=-1;if(y){if(-1!==this.firstSelection)return this.firstSelection;const r=getStartCodecTier(this.codecTiers||(this.codecTiers=getCodecTiers(p,T,t,n)),E,e,C,S),{codecSet:i,videoRanges:s,minFramerate:a,minBitrate:o,minIndex:l,preferHDR:c}=r;R=l,_=i,E=c?s[s.length-1]:s[0],b=a,e=Math.max(e,o),this.log(`picked start tier ${stringify(r)}`)}else _=null==x?void 0:x.codecSet,E=null==x?void 0:x.videoRange;const j=h?h.duration:d?d.duration:0,w=this.bwEstimator.getEstimateTTFB()/1e3,A=[];for(let k=n;k>=t;k--){var I;const t=p[k],o=k>u;if(!t)continue;if(g.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const n=navigator.mediaCapabilities;"function"==typeof(null==n?void 0:n.decodingInfo)&&requiresMediaCapabilitiesDecodingInfo(t,T,E,b,e,C)?(t.supportedPromise=getMediaDecodingInfoPromise(t,T,n,this.supportedCache),t.supportedPromise.then(e=>{if(!this.hls)return;t.supportedResult=e;const n=this.hls.levels,r=n.indexOf(t);e.error?this.warn(`MediaCapabilities decodingInfo error: "${e.error}" for level ${r} ${stringify(e)}`):e.supported?e.decodingInfoResults.some(e=>!1===e.smooth||!1===e.powerEfficient)&&this.log(`MediaCapabilities decodingInfo for level ${r} not smooth or powerEfficient: ${stringify(e)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${r} ${stringify(e)}`),r>-1&&n.length>1&&(this.log(`Removing unsupported level ${r}`),this.hls.removeLevel(r),-1===this.hls.loadLevel&&(this.hls.nextLoadLevel=0)))})):t.supportedResult=SUPPORTED_INFO_DEFAULT}if((_&&t.codecSet!==_||E&&t.videoRange!==E||o&&b>t.frameRate||!o&&b>0&&b<t.frameRate||null!=(I=t.supportedResult)&&null!=(I=I.decodingInfoResults)&&I.some(e=>!1===e.smooth))&&(!y||k!==R)){A.push(k);continue}const d=t.details,m=(h?null==d?void 0:d.partTarget:null==d?void 0:d.averagetargetduration)||j;let x;x=o?a*e:s*e;const S=j&&r>=2*j&&0===i?t.averageBitrate:t.maxBitrate,M=this.getTimeToLoadFrag(w,x,S*m,void 0===d);if(x>=S&&(k===c||0===t.loadError&&0===t.fragmentError)&&(M<=w||!isFiniteNumber(M)||v&&!this.bitrateTestDelay||M<l)){const e=this.forcedAutoLevel;return k===f||-1!==e&&e===f||(A.length&&this.trace(`Skipped level(s) ${A.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${p[A[0]].codecs}" ${p[A[0]].videoRange}; not compatible with "${_}" ${E}`),this.info(`switch candidate:${u}->${k} adjustedbw(${Math.round(x)})-bitrate=${Math.round(x-S)} ttfb:${w.toFixed(1)} avgDuration:${m.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${M.toFixed(1)} firstSelection:${y} codecSet:${t.codecSet} videoRange:${t.videoRange} hls.loadLevel:${f}`)),y&&(this.firstSelection=k),k}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}}const BinarySearch={search:function(e,t){let n=0,r=e.length-1,i=null,s=null;for(;n<=r;){i=(n+r)/2|0,s=e[i];const a=t(s);if(a>0)n=i+1;else{if(!(a<0))return s;r=i-1}}return null}};function findFragmentByPDT(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!isFiniteNumber(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;for(let r=0;r<e.length;++r){const i=e[r];if(pdtWithinToleranceTest(t,n,i))return i}return null}function findFragmentByPTS(e,t,n=0,r=0,i=.005){let s=null;if(e){s=t[1+e.sn-t[0].sn]||null;const r=e.endDTS-n;r>0&&r<15e-7&&(n+=15e-7),s&&e.level!==s.level&&s.end<=e.end&&(s=t[2+e.sn-t[0].sn]||null)}else 0===n&&0===t[0].start&&(s=t[0]);if(s&&((!e||e.level===s.level)&&0===fragmentWithinToleranceTest(n,r,s)||fragmentWithinFastStartSwitch(s,e,Math.min(i,r))))return s;const a=BinarySearch.search(t,fragmentWithinToleranceTest.bind(null,n,r));return!a||a===e&&s?s:a}function fragmentWithinFastStartSwitch(e,t,n){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const r=t.tagList.reduce((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e),n);return e.start<=r}return!1}function fragmentWithinToleranceTest(e=0,t=0,n){if(n.start<=e&&n.start+n.duration>e)return 0;const r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function pdtWithinToleranceTest(e,t,n){const r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}function findNearestWithCC(e,t,n){if(e&&e.startCC<=t&&e.endCC>=t){let r=e.fragments;const{fragmentHint:i}=e;let s;return i&&(r=r.concat(i)),BinarySearch.search(r,e=>e.cc<t?1:e.cc>t?-1:(s=e,e.end<=n?1:e.start>n?-1:0)),s||null}return null}function isTimeoutError(e){switch(e.details){case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_TIMEOUT:case ErrorDetails.LEVEL_LOAD_TIMEOUT:case ErrorDetails.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function getRetryConfig(e,t){const n=isTimeoutError(t);return e.default[(n?"timeout":"error")+"Retry"]}function getRetryDelay(e,t){const n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function getLoaderConfigWithoutReties(e){return _objectSpread2$1(_objectSpread2$1({},e),{errorRetry:null,timeoutRetry:null})}function shouldRetry(e,t,n,r){if(!e)return!1;const i=null==r?void 0:r.code,s=t<e.maxNumRetry&&(retryForHttpStatus(i)||!!n);return e.shouldRetry?e.shouldRetry(e,t,n,r,s):s}function retryForHttpStatus(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}var NetworkErrorAction={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},ErrorActionFlags={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class ErrorController extends Logger{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Events$1.ERROR,this.onError,this),e.on(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events$1.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Events$1.ERROR,this.onError,this),e.off(Events$1.ERROR,this.onErrorOut,this),e.off(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events$1.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===PlaylistLevelType.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const r=this.hls,i=t.context;switch(t.details){case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case ErrorDetails.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction=createDoNothingErrorAction());case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox);case ErrorDetails.LEVEL_EMPTY_ERROR:case ErrorDetails.LEVEL_PARSING_ERROR:{var s;const e=t.parent===PlaylistLevelType.MAIN?t.level:r.loadLevel;t.details===ErrorDetails.LEVEL_EMPTY_ERROR&&null!=(s=t.context)&&null!=(s=s.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case ErrorDetails.LEVEL_LOAD_ERROR:case ErrorDetails.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==i?void 0:i.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.level)));case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.SUBTITLE_LOAD_ERROR:case ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const e=r.loadLevelObj;if(e&&(i.type===PlaylistContextType.AUDIO_TRACK&&e.hasAudioGroup(i.groupId)||i.type===PlaylistContextType.SUBTITLE_TRACK&&e.hasSubtitleGroup(i.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=NetworkErrorAction.SendAlternateToPenaltyBox,void(t.errorAction.flags=ErrorActionFlags.MoveAllAlternatesMatchingHost)}return;case ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=r.loadLevelObj,n=null==e?void 0:e.attrs["HDCP-LEVEL"];n?t.errorAction={action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHDCP,hdcpLevel:n}:this.keySystemError(t)}return;case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.REMUX_ALLOC_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:var a;if(!t.errorAction)t.errorAction=this.getLevelSwitchAction(t,null!=(a=t.level)?a:r.loadLevel);return;case ErrorDetails.INTERNAL_EXCEPTION:case ErrorDetails.BUFFER_APPENDING_ERROR:case ErrorDetails.BUFFER_FULL_ERROR:case ErrorDetails.LEVEL_SWITCH_ERROR:case ErrorDetails.BUFFER_STALLED_ERROR:case ErrorDetails.BUFFER_SEEK_OVER_HOLE:case ErrorDetails.BUFFER_NUDGE_ON_STALL:return void(t.errorAction=createDoNothingErrorAction())}t.type===ErrorTypes.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=getRetryConfig(this.hls.config.playlistLoadPolicy,e),r=this.playlistError++;if(shouldRetry(n,r,isTimeoutError(e),e.response))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:n,retryCount:r};const i=this.getLevelSwitchAction(e,t);return n&&(i.retryConfig=n,i.retryCount=r),i}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:i,keyLoadPolicy:s}=t.config,a=getRetryConfig(e.details.startsWith("key")?s:i,e),o=t.levels.reduce((e,t)=>e+t.fragmentError,0);if(r){e.details!==ErrorDetails.FRAG_GAP&&r.fragmentError++;if(shouldRetry(a,o,isTimeoutError(e),e.response))return{action:NetworkErrorAction.RetryRequest,flags:ErrorActionFlags.None,retryConfig:a,retryCount:o}}const l=this.getLevelSwitchAction(e,n);return a&&(l.retryConfig=a,l.retryCount=o),l}getLevelSwitchAction(e,t){const n=this.hls;null==t&&(t=n.loadLevel);const r=this.hls.levels[t];if(r){var i,s;const t=e.details;r.loadError++,t===ErrorDetails.BUFFER_APPEND_ERROR&&r.fragmentError++;let l=-1;const{levels:c,loadLevel:u,minAutoLevel:d,maxAutoLevel:h}=n;n.autoLevelEnabled||n.config.preserveManualLevelOnError||(n.loadLevel=-1);const p=null==(i=e.frag)?void 0:i.type,m=(p===PlaylistLevelType.AUDIO&&t===ErrorDetails.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===ErrorDetails.BUFFER_ADD_CODEC_ERROR||t===ErrorDetails.BUFFER_APPEND_ERROR))&&c.some(({audioCodec:e})=>r.audioCodec!==e),f="video"===e.sourceBufferName&&(t===ErrorDetails.BUFFER_ADD_CODEC_ERROR||t===ErrorDetails.BUFFER_APPEND_ERROR)&&c.some(({codecSet:e,audioCodec:t})=>r.codecSet!==e&&r.audioCodec===t),{type:g,groupId:x}=null!=(s=e.context)?s:{};for(let n=c.length;n--;){const i=(n+u)%c.length;if(i!==u&&i>=d&&i<=h&&0===c[i].loadError){var a,o;const n=c[i];if(t===ErrorDetails.FRAG_GAP&&p===PlaylistLevelType.MAIN&&e.frag){const t=c[i].details;if(t){const n=findFragmentByPTS(e.frag,t.fragments,e.frag.start);if(null!=n&&n.gap)continue}}else{if(g===PlaylistContextType.AUDIO_TRACK&&n.hasAudioGroup(x)||g===PlaylistContextType.SUBTITLE_TRACK&&n.hasSubtitleGroup(x))continue;if(p===PlaylistLevelType.AUDIO&&null!=(a=r.audioGroups)&&a.some(e=>n.hasAudioGroup(e))||p===PlaylistLevelType.SUBTITLE&&null!=(o=r.subtitleGroups)&&o.some(e=>n.hasSubtitleGroup(e))||m&&r.audioCodec===n.audioCodec||f&&r.codecSet===n.codecSet||!m&&r.codecSet!==n.codecSet)continue}l=i;break}}if(l>-1&&n.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.None,nextAutoLevel:l}}return{action:NetworkErrorAction.SendAlternateToPenaltyBox,flags:ErrorActionFlags.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case NetworkErrorAction.DoNothing:break;case NetworkErrorAction.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===ErrorDetails.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r,hdcpLevel:i,nextAutoLevel:s}=n;switch(r){case ErrorActionFlags.None:this.switchLevel(e,s);break;case ErrorActionFlags.MoveAllAlternatesMatchingHDCP:i&&(t.maxHdcpLevel=HdcpLevels[HdcpLevels.indexOf(i)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}n.resolved||this.switchLevel(e,s)}switchLevel(e,t){if(void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===ErrorDetails.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&"audiovideo"!==e.sourceBufferName)){const t=getCodecsForMimeType(e.mimeType),n=this.hls.levels;for(let r=n.length;r--;)n[r][`${e.sourceBufferName}Codec`]===t&&this.hls.removeLevel(r)}}}function createDoNothingErrorAction(e){const t={action:NetworkErrorAction.DoNothing,flags:ErrorActionFlags.None};return e&&(t.resolved=!0),t}var FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},DecrypterAesMode={cbc:0,ctr:1};class AESCrypto{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case DecrypterAesMode.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case DecrypterAesMode.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function removePadding(e){const t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?e.slice(0,t-n):e}class AESDecryptor{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=t.getUint32(4*r);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],s=n[2],a=n[3],o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=new Uint32Array(256);let p=0,m=0,f=0;for(f=0;f<256;f++)h[f]=f<128?f<<1:f<<1^283;for(f=0;f<256;f++){let n=m^m<<1^m<<2^m<<3^m<<4;n=n>>>8^255&n^99,e[p]=n,t[n]=p;const o=h[p],f=h[o],g=h[f];let x=257*h[n]^16843008*n;r[p]=x<<24|x>>>8,i[p]=x<<16|x>>>16,s[p]=x<<8|x>>>24,a[p]=x,x=16843009*g^65537*f^257*o^16843008*p,l[n]=x<<24|x>>>8,c[n]=x<<16|x>>>16,u[n]=x<<8|x>>>24,d[n]=x,p?(p=o^h[h[h[g^o]]],m^=h[h[m]]):p=m=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);const s=this.ksRows=4*(i+6+1);let a,o;const l=this.keySchedule=new Uint32Array(s),c=this.invKeySchedule=new Uint32Array(s),u=this.sBox,d=this.rcon,h=this.invSubMix,p=h[0],m=h[1],f=h[2],g=h[3];let x,v;for(a=0;a<s;a++)a<i?x=l[a]=t[a]:(v=x,a%i===0?(v=v<<8|v>>>24,v=u[v>>>24]<<24|u[v>>>16&255]<<16|u[v>>>8&255]<<8|u[255&v],v^=d[a/i|0]<<24):i>6&&a%i===4&&(v=u[v>>>24]<<24|u[v>>>16&255]<<16|u[v>>>8&255]<<8|u[255&v]),l[a]=x=(l[a-i]^v)>>>0);for(o=0;o<s;o++)a=s-o,v=3&o?l[a]:l[a-4],c[o]=o<4||a<=4?v:p[u[v>>>24]]^m[u[v>>>16&255]]^f[u[v>>>8&255]]^g[u[255&v]],c[o]=c[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,i=this.invKeySchedule,s=this.invSBox,a=this.invSubMix,o=a[0],l=a[1],c=a[2],u=a[3],d=this.uint8ArrayToUint32Array_(n);let h=d[0],p=d[1],m=d[2],f=d[3];const g=new Int32Array(e),x=new Int32Array(g.length);let v,y,_,E,b,C,S,T,R,j,w,A,I,k;const M=this.networkToHostOrderSwap;for(;t<g.length;){for(R=M(g[t]),j=M(g[t+1]),w=M(g[t+2]),A=M(g[t+3]),b=R^i[0],C=A^i[1],S=w^i[2],T=j^i[3],I=4,k=1;k<r;k++)v=o[b>>>24]^l[C>>16&255]^c[S>>8&255]^u[255&T]^i[I],y=o[C>>>24]^l[S>>16&255]^c[T>>8&255]^u[255&b]^i[I+1],_=o[S>>>24]^l[T>>16&255]^c[b>>8&255]^u[255&C]^i[I+2],E=o[T>>>24]^l[b>>16&255]^c[C>>8&255]^u[255&S]^i[I+3],b=v,C=y,S=_,T=E,I+=4;v=s[b>>>24]<<24^s[C>>16&255]<<16^s[S>>8&255]<<8^s[255&T]^i[I],y=s[C>>>24]<<24^s[S>>16&255]<<16^s[T>>8&255]<<8^s[255&b]^i[I+1],_=s[S>>>24]<<24^s[T>>16&255]<<16^s[b>>8&255]<<8^s[255&C]^i[I+2],E=s[T>>>24]<<24^s[b>>16&255]<<16^s[C>>8&255]<<8^s[255&S]^i[I+3],x[t]=M(v^h),x[t+1]=M(E^p),x[t+2]=M(_^m),x[t+3]=M(y^f),h=R,p=j,m=w,f=A,t+=4}return x.buffer}}class FastAESKey{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=getSubtleAlgoName(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function getSubtleAlgoName(e){switch(e){case DecrypterAesMode.cbc:return"AES-CBC";case DecrypterAesMode.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${e}`)}}const CHUNK_SIZE=16;class Decrypter{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(e2){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?removePadding(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,r){return this.useSoftware?new Promise((i,s)=>{const a=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(a,t,n,r);const o=this.flush();o?i(o.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,r)}softwareDecrypt(e,t,n,r){const{currentIV:i,currentResult:s,remainderData:a}=this;if(r!==DecrypterAesMode.cbc||16!==t.byteLength)return logger.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),a&&(e=appendUint8Array(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(n=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new AESDecryptor),l.expandKey(t);const c=s;return this.currentResult=l.decrypt(o.buffer,0,n),this.currentIV=o.slice(-16).buffer,c||null}webCryptoDecrypt(e,t,n,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,r));this.key=t,this.fastAesKey=new FastAESKey(this.subtle,t,r)}return this.fastAesKey.expandKey().then(t=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new AESCrypto(this.subtle,new Uint8Array(n),r).decrypt(e.buffer,t)}).catch(i=>(logger.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,n,r)))}onWebCryptoError(e,t,n,r){const i=this.enableSoftwareAES;if(i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,r);const i=this.flush();if(i)return i.buffer}throw new Error("WebCrypto"+(i?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%CHUNK_SIZE;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(logger.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const MIN_CHUNK_SIZE=Math.pow(2,17);class FragmentLoader{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();const r=this.config,i=r.fLoader,s=r.loader;return new Promise((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some(e=>"GAP"===e[0]))return void o(createGapLoadError(e));e.gap=!1}const l=this.loader=i?new i(r):new s(r),c=createLoaderContext(e);e.loader=l;const u=getLoaderConfigWithoutReties(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:MIN_CHUNK_SIZE};e.stats=l.stats;const h={onSuccess:(t,n,r,i)=>{this.resetLoader(e,l);let s=t.data;r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),a({frag:e,part:null,payload:s,networkDetails:i})},onError:(t,r,i,s)=>{this.resetLoader(e,l),o(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:_objectSpread2$1({url:n,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:i,stats:s}))},onAbort:(t,n,r)=>{this.resetLoader(e,l),o(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:(t,n,r)=>{this.resetLoader(e,l),o(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:r,stats:t}))}};t&&(h.onProgress=(n,r,i,s)=>t({frag:e,part:null,payload:i,networkDetails:s})),l.load(c,d,h)})}loadPart(e,t,n){this.abort();const r=this.config,i=r.fLoader,s=r.loader;return new Promise((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void o(createGapLoadError(e,t));const l=this.loader=i?new i(r):new s(r),c=createLoaderContext(e,t);e.loader=l;const u=getLoaderConfigWithoutReties(r.fragLoadPolicy.default),d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:MIN_CHUNK_SIZE};t.stats=l.stats,l.load(c,d,{onSuccess:(r,i,s,o)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:r.data,networkDetails:o};n(c),a(c)},onError:(n,r,i,s)=>{this.resetLoader(e,l),o(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:_objectSpread2$1({url:c.url,data:void 0},n),error:new Error(`HTTP Error ${n.code} ${n.text}`),networkDetails:i,stats:s}))},onAbort:(n,r,i)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),o(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:i,stats:n}))},onTimeout:(n,r,i)=>{this.resetLoader(e,l),o(new LoadError({type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${d.timeout}ms`),networkDetails:i,stats:n}))}})})}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){const r=Math.round(e.duration/t.duration),s=Math.min(Math.round(n.loaded/i),r),a=(r-s)*Math.round(n.loaded/s);n.total=n.loaded+a}else n.total=Math.max(n.loaded,n.total);const s=n.loading,a=r.loading;s.start?s.first+=a.first-a.start:(s.start=a.start,s.first=a.first),s.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function createLoaderContext(e,t=null){const n=t||e,r={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if(isFiniteNumber(i)&&isFiniteNumber(s)){var a;let t=i,n=s;if("initSegment"===e.sn&&isMethodFullSegmentAesCbc(null==(a=e.decryptdata)?void 0:a.method)){const e=s-i;e%16&&(n=s+(16-e%16)),0!==i&&(r.resetIV=!0,t=i-16)}r.rangeStart=t,r.rangeEnd=n}return r}function createGapLoadError(e,t){const n=new Error(`GAP ${e.gap?"tag":"attribute"} found`),r={type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(r.part=t),(t||e).stats.aborted=!0,new LoadError(r)}function isMethodFullSegmentAesCbc(e){return"AES-128"===e||"AES-256"===e}class LoadError extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class TaskLoop extends Logger{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class ChunkMetadata{constructor(e,t,n,r=0,i=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=getNewPerformanceTiming(),this.buffering={audio:getNewPerformanceTiming(),video:getNewPerformanceTiming(),audiovideo:getNewPerformanceTiming()},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=i,this.partial=s}}function getNewPerformanceTiming(){return{start:0,executeStart:0,executeEnd:0,end:0}}const noopBuffered={length:0,start:()=>0,end:()=>0};class BufferHelper{static isBuffered(e,t){if(e){const n=BufferHelper.getBuffered(e);for(let e=n.length;e--;)if(t>=n.start(e)&&t<=n.end(e))return!0}return!1}static bufferedRanges(e){if(e){const t=BufferHelper.getBuffered(e);return BufferHelper.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const r=BufferHelper.bufferedRanges(e);if(r.length)return BufferHelper.bufferedInfo(r,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((e,t)=>e.start-t.start||t.end-e.end);let r=-1,i=[];if(n)for(let c=0;c<e.length;c++){t>=e[c].start&&t<=e[c].end&&(r=c);const s=i.length;if(s){const t=i[s-1].end;e[c].start-t<n?e[c].end>t&&(i[s-1].end=e[c].end):i.push(e[c])}else i.push(e[c])}else i=e;let s,a=0,o=t,l=t;for(let c=0;c<i.length;c++){const e=i[c].start,u=i[c].end;if(-1===r&&t>=e&&t<=u&&(r=c),t+n>=e&&t<u)o=e,l=u,a=l-t;else if(t+n<e){s=e;break}}return{len:a,start:o||0,end:l||0,nextStart:s,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||noopBuffered}catch(e2){return logger.log("failed to get media.buffered",e2),noopBuffered}}}const VARIABLE_REPLACEMENT_REGEX=/\{\$([a-zA-Z0-9-_]+)\}/g;function substituteVariables(e,t){if(null!==e.variableList||e.hasVariableRefs){const n=e.variableList;return t.replace(VARIABLE_REPLACEMENT_REGEX,t=>{const r=t.substring(2,t.length-1),i=null==n?void 0:n[r];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),t):i})}return t}const DECIMAL_RESOLUTION_REGEX=/^(\d+)x(\d+)$/,ATTR_LIST_REGEX=/(.+?)=(".*?"|.*?)(?:,|$)/g;class AttrList{constructor(e,t){"string"==typeof e&&(e=AttrList.parseAttrList(e,t)),_extends$1(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>"X-"===e.substring(0,2))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const n=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((e,t)=>(e[t.toLowerCase()]=!0,e),t)}bool(e){return"YES"===this[e]}decimalResolution(e){const t=DECIMAL_RESOLUTION_REGEX.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const r={};for(ATTR_LIST_REGEX.lastIndex=0;null!==(n=ATTR_LIST_REGEX.exec(e));){const i=n[1].trim();let s=n[2];const a=0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1;let o=!1;if(a)s=s.slice(1,-1);else switch(i){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":o=!0}if(t&&(a||o))s=substituteVariables(t,s);else if(!o&&!a)switch(i){case"CLOSED-CAPTIONS":if("NONE"===s)break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":logger.warn(`${e}: attribute ${i} is missing quotes`)}r[i]=s}return r}}const CLASS_INTERSTITIAL="com.apple.hls.interstitial";class DateRange{constructor(e,t,n=0){var r;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(null==t?void 0:t.tagAnchor)||null,this.tagOrder=null!=(r=null==t?void 0:t.tagOrder)?r:n,t){const n=t.attr;for(const t in n)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==n[t]){logger.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=_extends$1(new AttrList({}),n,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=(null==t?void 0:t.endDate)||new Date(this.attr["END-DATE"]);isFiniteNumber(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return void 0===e?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return null===e||null===e.programDateTime?(logger.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return null!==t?this._dateAtEnd=new Date(this._startDate.getTime()+1e3*t):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(isFiniteNumber(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===CLASS_INTERSTITIAL}get isValid(){return!!this.id&&!this._badValueForSameId&&isFiniteNumber(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}function isFullSegmentEncryption(e){return"AES-128"===e||"AES-256"===e||"AES-256-CTR"===e}function getAesModeFromFullSegmentMethod(e){switch(e){case"AES-128":case"AES-256":return DecrypterAesMode.cbc;case"AES-256-CTR":return DecrypterAesMode.ctr;default:throw new Error(`invalid full segment method ${e}`)}}function base64Decode(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function strToUtf8array(e){return Uint8Array.from(unescape(encodeURIComponent(e)),e=>e.charCodeAt(0))}const optionalSelf="undefined"!=typeof self?self:void 0;var KeySystems={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},KeySystemFormats={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function keySystemFormatToKeySystemDomain(e){switch(e){case KeySystemFormats.FAIRPLAY:return KeySystems.FAIRPLAY;case KeySystemFormats.PLAYREADY:return KeySystems.PLAYREADY;case KeySystemFormats.WIDEVINE:return KeySystems.WIDEVINE;case KeySystemFormats.CLEARKEY:return KeySystems.CLEARKEY}}function keySystemDomainToKeySystemFormat(e){switch(e){case KeySystems.FAIRPLAY:return KeySystemFormats.FAIRPLAY;case KeySystems.PLAYREADY:return KeySystemFormats.PLAYREADY;case KeySystems.WIDEVINE:return KeySystemFormats.WIDEVINE;case KeySystems.CLEARKEY:return KeySystemFormats.CLEARKEY}}function getKeySystemsForConfig(e){const{drmSystems:t,widevineLicenseUrl:n}=e,r=t?[KeySystems.FAIRPLAY,KeySystems.WIDEVINE,KeySystems.PLAYREADY,KeySystems.CLEARKEY].filter(e=>!!t[e]):[];return!r[KeySystems.WIDEVINE]&&n&&r.push(KeySystems.WIDEVINE),r}const requestMediaKeySystemAccess=null!=optionalSelf&&null!=(_optionalSelf$navigat=optionalSelf.navigator)&&_optionalSelf$navigat.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var _optionalSelf$navigat;function getSupportedMediaKeySystemConfigurations(e,t,n,r){let i;switch(e){case KeySystems.FAIRPLAY:i=["cenc","sinf"];break;case KeySystems.WIDEVINE:case KeySystems.PLAYREADY:i=["cenc"];break;case KeySystems.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return createMediaKeySystemConfigurations(i,t,n,r)}function createMediaKeySystemConfigurations(e,t,n,r){return[{initDataTypes:e,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:t.map(e=>({contentType:`audio/mp4; codecs=${e}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(e=>({contentType:`video/mp4; codecs=${e}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function isPersistentSessionType(e){var t;return"persistent-license"===e.sessionType||!(null==(t=e.sessionTypes)||!t.some(e=>"persistent-license"===e))}function mapDateRanges(e,t){let n=e.length;if(!n){if(!t.hasProgramDateTime)return;{const r=t.fragments[t.fragments.length-1];e.push(r),n++}}const r=e[n-1],i=t.live?1/0:t.totalduration,s=Object.keys(t.dateRanges);for(let o=s.length;o--;){const l=t.dateRanges[s[o]],c=l.startDate.getTime();l.tagAnchor=r.ref;for(let r=n;r--;){var a;if((null==(a=e[r])?void 0:a.sn)<t.startSN)break;const n=findFragmentWithStartDate(t,c,e,r,i);if(-1!==n){l.tagAnchor=t.fragments[n].ref;break}}}}function findFragmentWithStartDate(e,t,n,r,i){const s=n[r];if(s){const o=s.programDateTime;if(t>=o||0===r){var a;if(t<=o+1e3*(((null==(a=n[r+1])?void 0:a.start)||i)-s.start)){const i=n[r].sn-e.startSN;if(i<0)return-1;const s=e.fragments;if(s.length>n.length){for(let a=(n[r+1]||s[s.length-1]).sn-e.startSN;a>i;a--){const e=s[a].programDateTime;if(t>=e&&t<e+1e3*s[a].duration)return a}}return i}}}return-1}function assignProgramDateTime(e,t,n){e.rawProgramDateTime?n.push(e):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime)}function updateFromToPTS(e,t){const n=t.startPTS;if(isFiniteNumber(n)){let r,i=0;t.sn>e.sn?(i=n-e.start,r=e):(i=e.start-n,r=t),r.duration!==i&&r.setDuration(i)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.setStart(e.start+(e.minEndPTS-e.start)):t.setStart(e.start+e.duration)}else t.setStart(Math.max(e.start-t.duration,0))}function updateFragPTSDTS(e,t,n,r,i,s,a){r-n<=0&&(a.warn("Fragment should have a positive duration",t),r=n+t.duration,s=i+t.duration);let o=n,l=r;const c=t.startPTS,u=t.endPTS;if(isFiniteNumber(c)){const d=Math.abs(c-n);e&&d>e.totalduration?a.warn(`media timestamps and playlist times differ by ${d}s for level ${t.level} ${e.url}`):isFiniteNumber(t.deltaPTS)?t.deltaPTS=Math.max(d,t.deltaPTS):t.deltaPTS=d,o=Math.max(n,c),n=Math.min(n,c),i=void 0!==t.startDTS?Math.min(i,t.startDTS):i,l=Math.min(r,u),r=Math.max(r,u),s=void 0!==t.endDTS?Math.max(s,t.endDTS):s}const d=n-t.start;0!==t.start&&t.setStart(n),t.setDuration(r-t.start),t.startPTS=n,t.maxStartPTS=o,t.startDTS=i,t.endPTS=r,t.minEndPTS=l,t.endDTS=s;const h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;let p;const m=h-e.startSN,f=e.fragments;for(f[m]=t,p=m;p>0;p--)updateFromToPTS(f[p],f[p-1]);for(p=m;p<f.length-1;p++)updateFromToPTS(f[p],f[p+1]);return e.fragmentHint&&updateFromToPTS(f[f.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,d}function mergeDetails(e,t,n){if(e===t)return;let r=null;const i=e.fragments;for(let u=i.length-1;u>=0;u--){const e=i[u].initSegment;if(e){r=e;break}}let s;e.fragmentHint&&delete e.fragmentHint.endPTS,mapFragmentIntersection(e,t,(e,n,i,a)=>{if((!t.startCC||t.skippedSegments)&&n.cc!==e.cc){const r=e.cc-n.cc;for(let e=i;e<a.length;e++)a[e].cc+=r;t.endCC=a[a.length-1].cc}isFiniteNumber(e.startPTS)&&isFiniteNumber(e.endPTS)&&(n.setStart(n.startPTS=e.startPTS),n.startDTS=e.startDTS,n.maxStartPTS=e.maxStartPTS,n.endPTS=e.endPTS,n.endDTS=e.endDTS,n.minEndPTS=e.minEndPTS,n.setDuration(e.endPTS-e.startPTS),n.duration&&(s=n),t.PTSKnown=t.alignedSliding=!0),e.hasStreams&&(n.elementaryStreams=e.elementaryStreams),n.loader=e.loader,e.hasStats&&(n.stats=e.stats),e.initSegment&&(n.initSegment=e.initSegment,r=e.initSegment)});const a=t.fragments,o=t.fragmentHint?a.concat(t.fragmentHint):a;if(r&&o.forEach(e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=r)?void 0:t.relurl)||(e.initSegment=r)}),t.skippedSegments){if(t.deltaUpdateFailed=a.some(e=>!e),t.deltaUpdateFailed){n.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)a.shift();t.startSN=a[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=mergeDateRanges(e.dateRanges,t,n));const r=e.fragments.filter(e=>e.rawProgramDateTime);if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(let e=1;e<o.length;e++)null===o[e].programDateTime&&assignProgramDateTime(o[e],o[e-1],r);mapDateRanges(r,t)}t.endCC=a[a.length-1].cc}if(!t.startCC){var l;const n=getFragmentWithSN(e,t.startSN-1);t.startCC=null!=(l=null==n?void 0:n.cc)?l:a[0].cc}mapPartIntersection(e.partList,t.partList,(e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),s?updateFragPTSDTS(t,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,n):adjustSliding(e,t),a.length&&(t.totalduration=t.edge-a[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const c=t.advancedDateTime;if(t.advanced&&c){const e=t.edge;t.driftStart||(t.driftStartTime=c,t.driftStart=e),t.driftEndTime=c,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;-1===t.requestScheduled&&(t.requestScheduled=e.requestScheduled)}function mergeDateRanges(e,t,n){const{dateRanges:r,recentlyRemovedDateranges:i}=t,s=_extends$1({},e);i&&i.forEach(e=>{delete s[e]});const a=Object.keys(s).length;return a?(Object.keys(r).forEach(e=>{const t=s[e],i=new DateRange(r[e].attr,t);i.isValid?(s[e]=i,t||(i.tagOrder+=a)):n.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${stringify(r[e].attr)}"`)}),s):r}function mapPartIntersection(e,t,n){if(e&&t){let r=0;for(let i=0,s=e.length;i<=s;i++){const s=e[i],a=t[i+r];s&&a&&s.index===a.index&&s.fragment.sn===a.fragment.sn?n(s,a):r--}}}function mapFragmentIntersection(e,t,n){const r=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,s=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=i;c<=s;c++){const i=l[a+c];let s=o[c];if(r&&!s&&i&&(s=t.fragments[c]=i),i&&s){n(i,s,c,o);const r=i.relurl,a=s.relurl;if(r&&notEqualAfterStrippingQueries(r,a))return void(t.playlistParsingError=getSequenceError(`media sequence mismatch ${s.sn}:`,e,t,i,s));if(i.cc!==s.cc)return void(t.playlistParsingError=getSequenceError(`discontinuity sequence mismatch (${i.cc}!=${s.cc})`,e,t,i,s))}}}function getSequenceError(e,t,n,r,i){return new Error(`${e} ${i.url}\nPlaylist starting @${t.startSN}\n${t.m3u8}\n\nPlaylist starting @${n.startSN}\n${n.m3u8}`)}function adjustSliding(e,t,n=!0){const r=t.startSN+t.skippedSegments-e.startSN,i=e.fragments,s=r>=0;let a=0;if(s&&r<i.length)a=i[r].start;else if(s&&t.startSN===e.endSN+1)a=e.fragmentEnd;else if(s&&n)a=e.fragmentStart+r*t.levelTargetDuration;else{if(t.skippedSegments||0!==t.fragmentStart)return;a=e.fragmentStart}addSliding(t,a)}function addSliding(e,t){if(t){const n=e.fragments;for(let r=e.skippedSegments;r<n.length;r++)n[r].addStart(t);e.fragmentHint&&e.fragmentHint.addStart(t)}}function computeReloadInterval(e,t=1/0){let n=1e3*e.targetduration;if(e.updated){const r=e.fragments,i=4;if(r.length&&n*i>t){const e=1e3*r[r.length-1].duration;e<n&&(n=e)}}else n/=2;return Math.round(n)}function getFragmentWithSN(e,t,n){if(!e)return null;let r=e.fragments[t-e.startSN];return r||(r=e.fragmentHint,r&&r.sn===t?r:t<e.startSN&&n&&n.sn===t?n:null)}function getPartWith(e,t,n){return e?findPart(e.partList,t,n):null}function findPart(e,t,n){if(e)for(let r=e.length;r--;){const i=e[r];if(i.index===n&&i.fragment.sn===t)return i}return null}function reassignFragmentLevelIndexes(e){e.forEach((e,t)=>{var n;null==(n=e.details)||n.fragments.forEach(e=>{e.level=t,e.initSegment&&(e.initSegment.level=t)})})}function notEqualAfterStrippingQueries(e,t){return!(e===t||!t)&&stripQuery(e)!==stripQuery(t)}function stripQuery(e){return e.replace(/\?[^?]*$/,"")}function findFirstFragWithCC(e,t){for(let r=0,i=e.length;r<i;r++){var n;if((null==(n=e[r])?void 0:n.cc)===t)return e[r]}return null}function shouldAlignOnDiscontinuities(e,t){return!!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}function adjustFragmentStart(e,t){const n=e.start+t;e.startPTS=n,e.setStart(n),e.endPTS=n+e.duration}function adjustSlidingStart(e,t){const n=t.fragments;for(let r=0,i=n.length;r<i;r++)adjustFragmentStart(n[r],e);t.fragmentHint&&adjustFragmentStart(t.fragmentHint,e),t.alignedSliding=!0}function alignStream(e,t){e&&(alignDiscontinuities(t,e),t.alignedSliding||alignMediaPlaylistByPDT(t,e),t.alignedSliding||t.skippedSegments||adjustSliding(e,t,!1))}function alignDiscontinuities(e,t){if(!shouldAlignOnDiscontinuities(t,e))return;const n=Math.min(t.endCC,e.endCC),r=findFirstFragWithCC(t.fragments,n),i=findFirstFragWithCC(e.fragments,n);if(!r||!i)return;logger.log(`Aligning playlist at start of dicontinuity sequence ${n}`);adjustSlidingStart(r.start-i.start,e)}function alignMediaPlaylistByPDT(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=e.fragments,r=t.fragments;if(!n.length||!r.length)return;let i,s;const a=Math.min(t.endCC,e.endCC);t.startCC<a&&e.startCC<a&&(i=findFirstFragWithCC(r,a),s=findFirstFragWithCC(n,a)),i&&s||(i=r[Math.floor(r.length/2)],s=findFirstFragWithCC(n,i.cc)||n[Math.floor(n.length/2)]);const o=i.programDateTime,l=s.programDateTime;if(!o||!l)return;adjustSlidingStart((l-o)/1e3-(s.start-i.start),e)}const TimeRanges$1={toString:function(e){let t="";const n=e.length;for(let r=0;r<n;r++)t+=`[${e.start(r).toFixed(3)}-${e.end(r).toFixed(3)}]`;return t}},State={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class BaseStreamController extends TaskLoop{constructor(e,t,n,r,i){super(r,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=State.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:e,fragCurrent:t,media:n,mediaBuffer:r,state:i}=this,s=n?n.currentTime:0,a=BufferHelper.bufferInfo(r||n,s,e.maxBufferHole),o=!a.len;if(this.log(`Media seeking to ${isFiniteNumber(s)?s.toFixed(3):s}, state: ${i}, ${o?"out of":"in"} buffer`),this.state===State.ENDED)this.resetLoadingState();else if(t){const n=e.maxFragLookUpTolerance,r=t.start-n,i=t.start+t.duration+n;if(o||i<a.start||r>a.end){const e=s>i;(s<r||e)&&(e&&t.loader&&(this.log(`Cancelling fragment load for seek (sn: ${t.sn})`),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(n){this.fragmentTracker.removeFragmentsInRange(s,1/0,this.playlistType,!0);if(s>this.lastCurrentTime&&(this.lastCurrentTime=s),!this.loadingParts){const e=Math.max(a.end,s),t=this.shouldLoadParts(this.getLevelDetails(),e);t&&(this.log(`LL-Part loading ON after seeking to ${s.toFixed(2)} with buffer @${e.toFixed(2)}`),this.loadingParts=t)}}this.hls.hasEnoughToStart||(this.log(`Setting ${o?"startPosition":"nextLoadPosition"} to ${s} for seek without enough to start`),this.nextLoadPosition=s,o&&(this.startPosition=s)),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=i,this.hls=e,this.fragmentLoader=new FragmentLoader(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Decrypter(e.config)}registerListeners(){const{hls:e}=this;e.on(Events$1.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events$1.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Events$1.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Events$1.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events$1.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Events$1.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===State.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=State.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return-1===t&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,r=this.config.timelineOffset||0;if(n<=r)return!1;const i=e.buffered;this.config.maxBufferHole&&i&&i.length>1&&(e=BufferHelper.bufferedInfo(i,e.start,0));const s=e.nextStart;if(s&&s>r&&s<t.edge)return!1;if(this.media.currentTime<e.start)return!1;const a=t.partList;if(null!=a&&a.length){const e=a[a.length-1];return BufferHelper.isBuffered(this.media,e.start+e.duration/2)}const o=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(o)}getLevelDetails(){if(this.levels&&null!==this.levelLastLoaded)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;var t;return e?(null==(t=this.getLevelDetails())?void 0:t.appliedTimelineOffset)||e:0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;n.removeEventListener("seeking",this.onMediaSeeking),n.removeEventListener("ended",this.onMediaEnded),n.addEventListener("seeking",this.onMediaSeeking),n.addEventListener("ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===State.STOPPED&&this.startLoad(r.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(null!==r){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n)return this.resetLoadingState(),void this.resetTransmuxer();this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=State.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){this._doFragLoad(e,t,n,e=>{const t=e.frag;if(this.fragContextChanged(t))return this.warn(`${t.type} sn: ${t.sn}${e.part?" part: "+e.part.index:""} of ${this.fragInfo(t,!1,e.part)}) was dropped during download.`),void this.fragmentTracker.removeFragment(t);t.stats.chunkCount++,this._handleFragmentLoadProgress(e)}).then(e=>{if(!e)return;const t=this.state,n=e.frag;this.fragContextChanged(n)?(t===State.FRAG_LOADING||!this.fragCurrent&&t===State.PARSING)&&(this.fragmentTracker.removeFragment(n),this.state=State.IDLE):("payload"in e&&(this.log(`Loaded ${n.type} sn: ${n.sn} of ${this.playlistLabel()} ${n.level}`),this.hls.trigger(Events$1.FRAG_LOADED,e)),this._handleFragmentLoadComplete(e))}).catch(t=>{this.state!==State.STOPPED&&this.state!==State.ERROR&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===FragmentState.APPENDING){const t=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,t),i=Math.max(e.duration,r?r.len:this.config.maxBufferLength),s=this.backtrackFragment;(1===(s?e.sn-s.sn:0)||this.reduceMaxBufferLength(i,e.duration))&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===FragmentState.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(null==t?void 0:t.live)&&"EVENT"!==t.type&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:n};this.hls.trigger(Events$1.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(e=>{const t=null==e?void 0:e.frag;if(!t||this.fragContextChanged(t)||!this.levels)throw new Error("init load aborted");return e}).then(e=>{const{hls:t}=this,{frag:n,payload:r}=e,i=n.decryptdata;if(r&&r.byteLength>0&&null!=i&&i.key&&i.iv&&isFullSegmentEncryption(i.method)){const s=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,getAesModeFromFullSegmentMethod(i.method)).catch(e=>{throw t.trigger(Events$1.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:n}),e}).then(r=>{const i=self.performance.now();return t.trigger(Events$1.FRAG_DECRYPTED,{frag:n,payload:r,stats:{tstart:s,tdecrypt:i}}),e.payload=r,this.completeInitSegmentLoad(e)})}return this.completeInitSegmentLoad(e)}).catch(t=>{this.state!==State.STOPPED&&this.state!==State.ERROR&&(this.warn(t),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==State.STOPPED&&(this.state=State.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,r;const i=e.tracks;if(i&&!t.encrypted&&(null!=(n=i.audio)&&n.encrypted||null!=(r=i.video)&&r.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const e=this.media,n=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${e?"attached mediaKeys: "+e.mediaKeys:"detached"})`);return this.warn(n.message),!e||e.mediaKeys?!1:(this.hls.trigger(Events$1.ERROR,{type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!1,error:n,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?TimeRanges$1.toString(BufferHelper.getBuffered(n)):"(detached)"})`),isMediaFragment(e)){var r;if(e.type!==PlaylistLevelType.SUBTITLE){const t=e.elementaryStreams;if(!Object.keys(t).some(e=>!!t[e]))return void(this.state=State.IDLE)}const t=null==(r=this.levels)?void 0:r[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=State.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:i}=e,s=!i||0===i.length||i.some(e=>!e),a=new ChunkMetadata(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!s);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,r){var i;this.fragCurrent=e;const s=t.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let a=null;!e.encrypted||null!=(i=e.decryptdata)&&i.key?e.encrypted||(a=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),a&&this.log("[eme] blocking frag load until media-keys acquired")):(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=State.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(Events$1.KEY_LOADED,e),this.state===State.KEY_LOADING&&(this.state=State.IDLE),e}),this.hls.trigger(Events$1.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING"))));const o=this.fragPrevious;if(isMediaFragment(e)&&(!o||e.sn!==o.sn)){const n=this.shouldLoadParts(t.details,e.end);n!==this.loadingParts&&(this.log(`LL-Part loading ${n?"ON":"OFF"} loading sn ${null==o?void 0:o.sn}->${e.sn}`),this.loadingParts=n)}if(n=Math.max(e.start,n||0),this.loadingParts&&isMediaFragment(e)){const i=s.partList;if(i&&r){n>s.fragmentEnd&&s.fragmentHint&&(e=s.fragmentHint);const o=this.getNextPart(i,e,n);if(o>-1){const l=i[o];let c;return e=this.fragCurrent=l.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${l.index} (${o}/${i.length-1}) of ${this.fragInfo(e,!1,l)}) cc: ${e.cc} [${s.startSN}-${s.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=State.FRAG_LOADING,c=a?a.then(n=>!n||this.fragContextChanged(n.frag)?null:this.doFragPartsLoad(e,l,t,r)).catch(e=>this.handleFragLoadError(e)):this.doFragPartsLoad(e,l,t,r).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(Events$1.FRAG_LOADING,{frag:e,part:l,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(i,n))return Promise.resolve(null)}}var l;if(isMediaFragment(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${null==(l=s.partList)?void 0:l.filter(e=>e.loaded).map(e=>`[${e.start}-${e.end}]`)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+s.startSN+"-"+s.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),isFiniteNumber(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=State.FRAG_LOADING;const c=this.config.progressive;let u;return u=c&&a?a.then(t=>!t||this.fragContextChanged(t.frag)?null:this.fragmentLoader.load(e,r)).catch(e=>this.handleFragLoadError(e)):Promise.all([this.fragmentLoader.load(e,c?r:void 0),a]).then(([e])=>(!c&&r&&r(e),e)).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(Events$1.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,t,n,r){return new Promise((i,s)=>{var a;const o=[],l=null==(a=n.details)?void 0:a.partList,c=t=>{this.fragmentLoader.loadPart(e,t,r).then(r=>{o[t.index]=r;const s=r.part;this.hls.trigger(Events$1.FRAG_LOADED,r);const a=getPartWith(n.details,e.sn,t.index+1)||findPart(l,e.sn,t.index+1);if(!a)return i({frag:e,part:s,partsLoaded:o});c(a)}).catch(s)};c(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t&&t.details===ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(Events$1.ERROR,t)}else this.hls.trigger(Events$1.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==State.PARSING)return void(this.fragCurrent||this.state===State.STOPPED||this.state===State.ERROR||(this.state=State.IDLE));const{frag:n,part:r,level:i}=t,s=self.performance.now();n.stats.parsing.end=s,r&&(r.stats.parsing.end=s);const a=this.getLevelDetails(),o=a&&n.sn>a.endSN||this.shouldLoadParts(a,n.end);o!==this.loadingParts&&(this.log(`LL-Part loading ${o?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=o),this.updateLevelTiming(n,r,i,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const i=e.partList[0];if(i.fragment.type===PlaylistLevelType.SUBTITLE)return!1;if(t>=i.end+((null==(n=e.fragmentHint)?void 0:n.duration)||0)){var r;if((this.hls.hasEnoughToStart?(null==(r=this.media)?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>i.start-i.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:i,part:s}=e;if(null==t||!t[r])return this.warn(`Levels object was unset while buffering fragment ${i} of ${this.playlistLabel()} ${r}. The current chunk will not be buffered.`),null;const a=t[r],o=a.details,l=s>-1?getPartWith(o,i,s):null,c=l?l.fragment:getFragmentWithSN(o,i,n);return c?(n&&n!==c&&(c.stats=n.stats),{frag:c,part:l,level:a}):null}bufferFragmentData(e,t,n,r,i){if(this.state!==State.PARSING)return;const{data1:s,data2:a}=e;let o=s;if(a&&(o=appendUint8Array(s,a)),!o.length)return;const l=this.initPTS[t.cc],c=l?-l.baseTime/l.timescale:void 0,u={type:e.type,frag:t,part:n,chunkMeta:r,offset:c,parent:t.type,data:o};if(this.hls.trigger(Events$1.BUFFER_APPENDING,u),e.dropped&&e.independent&&!n){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!BufferHelper.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const n=t.currentTime,r=BufferHelper.bufferInfo(t,n,0),i=e.duration,s=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),a=Math.max(Math.min(e.start-s,r.end-s),n+s);e.start-a>s&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){var n;const r=this.getLoadPosition();if(!isFiniteNumber(r))return null;const i=this.lastCurrentTime>r||null!=(n=this.media)&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,r,t,i)}getFwdBufferInfoAtPos(e,t,n,r){const i=BufferHelper.bufferInfo(e,t,r);if(0===i.len&&void 0!==i.nextStart){const s=this.fragmentTracker.getBufferedFrag(t,n);if(s&&(i.nextStart<=s.end||s.gap)){const n=Math.max(Math.min(i.nextStart,s.end)-t,r);return BufferHelper.bufferInfo(e,t,n)}}return i}getMaxBufferLength(e){const{config:t}=this;let n;return n=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,r=Math.max(Math.min(e-t,n.maxBufferLength),t),i=Math.max(e-3*t,n.maxMaxBufferLength/2,r);return i>=r&&(n.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0)}getAppendedFrag(e,t=PlaylistLevelType.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:i}=this,s=n[0].start,a=i.lowLatencyMode&&!!t.partList;let o=null;if(t.live){const n=i.initialLiveManifestSize;if(r<n)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${n})`),null;if(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<s){var l;a&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),o=this.getInitialLiveFragment(t);const n=this.hls.startPosition,r=this.hls.liveSyncPosition,i=o?(-1!==n&&n>=s?n:r)||o.start:e;this.log(`Setting startPosition to ${i} to match start frag at live edge. mainStart: ${n} liveSyncPosition: ${r} frag.start: ${null==(l=o)?void 0:l.start}`),this.startPosition=this.nextLoadPosition=i}}else e<=s&&(o=n[0]);if(!o){const n=this.loadingParts?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,n,t)}let c=this.filterReplacedPrimary(o,t);if(!c&&o){const e=o.sn-t.startSN;c=this.filterReplacedPrimary(n[e+1]||null,t)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===FragmentState.OK||n===FragmentState.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,i){let s=null;if(e.gap&&(s=this.getNextFragment(this.nextLoadPosition,t),s&&!s.gap&&n.nextStart)){const e=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r,0);if(null!==e&&n.len+e.len>=i){const e=s.sn;return this.loopSn!==e&&(this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${e}`),this.loopSn=e),null}}return this.loopSn=void 0,s}get primaryPrefetch(){if(interstitialsEnabled(this.config)){var e;if(null==(e=this.hls.interstitialsManager)||null==(e=e.playingItem)?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(interstitialsEnabled(this.config)&&e.type!==PlaylistLevelType.SUBTITLE){const n=this.hls.interstitialsManager,r=null==n?void 0:n.bufferingItem;if(r){const n=r.event;if(n){if(n.appendInPlace||Math.abs(e.start-r.start)>1||0===r.start)return null}else{if(e.end<=r.start&&!1===(null==t?void 0:t.live))return null;if(e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}}const i=null==n?void 0:n.playerQueue;if(i)for(let t=i.length;t--;){const n=i[t].interstitial;if(n.appendInPlace&&e.start>=n.startTime&&e.end<=n.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,n){let r=-1,i=!1,s=!0;for(let a=0,o=e.length;a<o;a++){const o=e[a];if(s=s&&!o.independent,r>-1&&n<o.start)break;const l=o.loaded;l?r=-1:(i||(o.independent||s)&&o.fragment===t)&&(o.fragment!==t&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${o.start}`),r=a),i=l}return r}loadedEndOfParts(e,t){let n;for(let r=e.length;r--;){if(n=e[r],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),r=findFragmentByPDT(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){const s=t[i-e.startSN];n.cc===s.cc&&(r=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=findNearestWithCC(e,n.cc,n.end),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(r=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:i}=this,{fragments:s,endSN:a}=n;const{fragmentHint:o}=n,{maxFragLookUpTolerance:l}=r,c=n.partList,u=!!(this.loadingParts&&null!=c&&c.length&&o);let d;if(u&&!this.bitrateTest&&c[c.length-1].fragment.sn===o.sn&&(s=s.concat(o),a=o.sn),e<t){var h;d=findFragmentByPTS(i,s,e,e<this.lastCurrentTime||e>t-l||null!=(h=this.media)&&h.paused||!this.startFragRequested?0:l)}else d=s[s.length-1];if(d){const e=d.sn-n.startSN,t=this.fragmentTracker.getState(d);if((t===FragmentState.OK||t===FragmentState.PARTIAL&&d.gap)&&(i=d),i&&d.sn===i.sn&&(!u||c[0].fragment.sn>d.sn||!n.live)){if(d.level===i.level){const t=s[e+1];d=d.sn<a&&this.fragmentTracker.getState(t)!==FragmentState.OK?t:null}}}return d}alignPlaylists(e,t,n){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const i=e.fragmentStart,s=!t,a=e.alignedSliding&&isFiniteNumber(i);if(s||!a&&!i){alignStream(n,e);const i=e.fragmentStart;return this.log(`Live playlist sliding: ${i.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${r}`),i}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const r=this.timelineOffset;if(-1===n){const i=null!==this.startTimeOffset,s=i?this.startTimeOffset:e.startTimeOffset;null!==s&&isFiniteNumber(s)?(n=t+s,s<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${s} found in ${i?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+r}this.nextLoadPosition=n+r}getLoadPosition(){var e;const{media:t}=this;let n=0;return null!=(e=this.hls)&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&isMediaFragment(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===State.FRAG_LOADING_WAITING_RETRY)||(this.state=State.IDLE)}onFragmentOrKeyLoadError(e,t){var n;if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const r=t.frag;if(!r||r.type!==e||!this.levels)return;var i;if(this.fragContextChanged(r))return void this.warn(`Frag load error must match current frag to retry ${r.url} > ${null==(i=this.fragCurrent)?void 0:i.url}`);const s=t.details===ErrorDetails.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(r,!0);const a=t.errorAction,{action:o,flags:l,retryCount:c=0,retryConfig:u}=a||{},d=!!a&&!!u,h=d&&o===NetworkErrorAction.RetryRequest,p=d&&!a.resolved&&l===ErrorActionFlags.MoveAllAlternatesMatchingHost,m=(null==(n=t.response)?void 0:n.code)||0;if(!h&&p&&isMediaFragment(r)&&!r.endList&&0!==m)this.resetFragmentErrors(e),this.treatAsGap(r),a.resolved=!0;else if((h||p)&&c<u.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const n=getRetryDelay(u,c);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${t.details}, retrying loading ${c+1}/${u.maxNumRetry} in ${n}ms`),a.resolved=!0,this.retryDate=self.performance.now()+n,this.state=State.FRAG_LOADING_WAITING_RETRY}else if(u&&a){if(this.resetFragmentErrors(e),!(c<u.maxNumRetry))return void this.warn(`${t.details} reached or exceeded max retry (${c})`);s||o===NetworkErrorAction.RemoveAlternatePermanently||(a.resolved=!0)}else o===NetworkErrorAction.SendAlternateToPenaltyBox?this.state=State.WAITING_LEVEL:this.state=State.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===State.PARSING||this.state===State.PARSED){const t=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len,(null==t?void 0:t.duration)||10);const s=!i;return s&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==State.STOPPED&&(this.state=State.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const r=BufferHelper.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===State.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==State.STOPPED&&(this.state=State.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;null!=t&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){const i=n.details;if(!i)return void this.warn("level.details undefined");var s;if(!Object.keys(e.elementaryStreams).reduce((t,s)=>{const a=e.elementaryStreams[s];if(a){const o=a.endPTS-a.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${e.sn} ${s} duration reliably (${o})`),t||!1;const l=r?0:updateFragPTSDTS(i,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS,this);return this.hls.trigger(Events$1.LEVEL_PTS_UPDATED,{details:i,level:n,drift:l,type:s,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t},!1)&&(0===n.fragmentError&&this.treatAsGap(e,n),null===(null==(s=this.transmuxer)?void 0:s.error))){const t=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(t.message),this.hls.trigger(Events$1.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=State.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(Events$1.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===PlaylistLevelType.MAIN?"level":"track"}fragInfo(e,t=!0,n){var r,i;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${(null!=(r=t&&!n?e.startPTS:(n||e).start)?r:NaN).toFixed(3)}-${(null!=(i=t&&!n?e.endPTS:(n||e).end)?i:NaN).toFixed(3)}]${n&&"main"===e.type?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;null==(e=this.transmuxer)||e.reset()}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function interstitialsEnabled(e){return!!e.interstitialsController&&!1!==e.enableInterstitialPlayback}class ChunkCache{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;return e.length?(n=1===e.length?e[0]:concatUint8Arrays(e,t),this.reset(),n):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function concatUint8Arrays(e,t){const n=new Uint8Array(t);let r=0;for(let i=0;i<e.length;i++){const t=e[i];n.set(t,r),r+=t.length}return n}var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new i(r,s||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,a=new Array(s);i<s;i++)a[i]=r[i].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,s,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,s),!0;case 6:return u.fn.call(u.context,t,r,i,s,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3(),EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);const version="1.6.10",workerStore={};function hasUMDWorker(){return"function"==typeof __HLS_WORKER_BUNDLE__}function injectWorker(){const e=workerStore[version];if(e)return e.clientCount++,e;const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(t),r={worker:new self.Worker(n),objectURL:n,clientCount:1};return workerStore[version]=r,r}function loadWorker(e){const t=workerStore[e];if(t)return t.clientCount++,t;const n=new self.URL(e,self.location.href).href,r={worker:new self.Worker(n),scriptURL:n,clientCount:1};return workerStore[e]=r,r}function removeWorkerFromStore(e){const t=workerStore[e||version];if(t){if(1===t.clientCount--){const{worker:n,objectURL:r}=t;delete workerStore[e||version],r&&self.URL.revokeObjectURL(r),n.terminate()}}}function isId3Footer(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function isId3Header(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function readId3Size(e,t){let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n}function getId3Data(e,t){const n=t;let r=0;for(;isId3Header(e,t);){r+=10;r+=readId3Size(e,t+6),isId3Footer(e,t+10)&&(r+=10),t+=r}if(r>0)return e.subarray(n,n+r)}function getAudioConfig(e,t,n,r){const i=t[n+2],s=i>>2&15;if(s>12){const t=new Error(`invalid ADTS sampling index:${s}`);return void e.emit(Events$1.ERROR,Events$1.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}const a=1+(i>>6&3),o=t[n+3]>>6&3|(1&i)<<2,l="mp4a.40."+a,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][s];let u=s;5!==a&&29!==a||(u-=3);const d=[a<<3|(14&u)>>1,(1&u)<<7|o<<3];return logger.log(`manifest codec:${r}, parsed codec:${l}, channels:${o}, rate:${c} (ADTS object type:${a} sampling index:${s})`),{config:d,samplerate:c,channelCount:o,codec:l,parsedCodec:l,manifestCodec:r}}function isHeaderPattern$1(e,t){return 255===e[t]&&240==(246&e[t+1])}function getHeaderLength(e,t){return 1&e[t+1]?7:9}function getFullFrameLength(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function canGetFrameLength(e,t){return t+5<e.length}function isHeader$1(e,t){return t+1<e.length&&isHeaderPattern$1(e,t)}function canParse$1(e,t){return canGetFrameLength(e,t)&&isHeaderPattern$1(e,t)&&getFullFrameLength(e,t)<=e.length-t}function probe$1(e,t){if(isHeader$1(e,t)){const n=getHeaderLength(e,t);if(t+n>=e.length)return!1;const r=getFullFrameLength(e,t);if(r<=n)return!1;const i=t+r;return i===e.length||isHeader$1(e,i)}return!1}function initTrackConfig(e,t,n,r,i){if(!e.samplerate){const s=getAudioConfig(t,n,r,i);if(!s)return;_extends$1(e,s)}}function getFrameDuration(e){return 9216e4/e}function parseFrameHeader(e,t){const n=getHeaderLength(e,t);if(t+n<=e.length){const r=getFullFrameLength(e,t)-n;if(r>0)return{headerLength:n,frameLength:r}}}function appendFrame$2(e,t,n,r,i){const s=r+i*getFrameDuration(e.samplerate),a=parseFrameHeader(t,n);let o;if(a){const{frameLength:r,headerLength:i}=a,l=i+r,c=Math.max(0,n+l-t.length);c?(o=new Uint8Array(l-i),o.set(t.subarray(n+i,t.length),0)):o=t.subarray(n+i,n+l);const u={unit:o,pts:s};return c||e.samples.push(u),{sample:u,length:l,missing:c}}const l=t.length-n;o=new Uint8Array(l),o.set(t.subarray(n,t.length),0);return{sample:{unit:o,pts:s},length:l,missing:-1}}function canParseId3(e,t){return isId3Header(e,t)&&readId3Size(e,t+6)+10<=e.length-t}function toArrayBuffer(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function toUint8(e,t=0,n=1/0){return view(e,t,n,Uint8Array)}function view(e,t,n,r){const i=unsafeGetArrayBuffer(e);let s=1;"BYTES_PER_ELEMENT"in r&&(s=r.BYTES_PER_ELEMENT);const a=isArrayBufferView(e)?e.byteOffset:0,o=(a+e.byteLength)/s,l=(a+t)/s,c=Math.floor(Math.max(0,Math.min(l,o)));return new r(i,c,Math.floor(Math.min(c+Math.max(n,0),o))-c)}function unsafeGetArrayBuffer(e){return e instanceof ArrayBuffer?e:e.buffer}function isArrayBufferView(e){return e&&e.buffer instanceof ArrayBuffer&&void 0!==e.byteLength&&void 0!==e.byteOffset}function decodeId3ImageFrame(e){const t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.size<2)return;if(3!==e.data[0])return void console.log("Ignore frame with unrecognized character encoding");const n=e.data.subarray(1).indexOf(0);if(-1===n)return;const r=utf8ArrayToStr(toUint8(e.data,1,n)),i=e.data[2+n],s=e.data.subarray(3+n).indexOf(0);if(-1===s)return;const a=utf8ArrayToStr(toUint8(e.data,3+n,s));let o;return o="--\x3e"===r?utf8ArrayToStr(toUint8(e.data,4+n+s)):toArrayBuffer(e.data.subarray(4+n+s)),t.mimeType=r,t.pictureType=i,t.description=a,t.data=o,t}function decodeId3PrivFrame(e){if(e.size<2)return;const t=utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}function decodeId3TextFrame(e){if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=utf8ArrayToStr(e.data.subarray(t),!0);t+=n.length+1;const r=utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=utf8ArrayToStr(e.data.subarray(1));return{key:e.type,info:"",data:t}}function decodeId3UrlFrame(e){if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=utf8ArrayToStr(e.data.subarray(t),!0);t+=n.length+1;const r=utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=utf8ArrayToStr(e.data);return{key:e.type,info:"",data:t}}function decodeId3Frame(e){return"PRIV"===e.type?decodeId3PrivFrame(e):"W"===e.type[0]?decodeId3UrlFrame(e):"APIC"===e.type?decodeId3ImageFrame(e):decodeId3TextFrame(e)}function getId3FrameData(e){const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=readId3Size(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}}const HEADER_FOOTER_SIZE=10,FRAME_SIZE=10;function getId3Frames(e){let t=0;const n=[];for(;isId3Header(e,t);){const r=readId3Size(e,t+6);e[t+5]>>6&1&&(t+=HEADER_FOOTER_SIZE),t+=HEADER_FOOTER_SIZE;const i=t+r;for(;t+FRAME_SIZE<i;){const r=getId3FrameData(e.subarray(t)),i=decodeId3Frame(r);i&&n.push(i),t+=r.size+HEADER_FOOTER_SIZE}isId3Footer(e,t)&&(t+=HEADER_FOOTER_SIZE)}return n}function isId3TimestampFrame(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function readId3Timestamp(e){if(8===e.data.byteLength){const t=new Uint8Array(e.data),n=1&t[3];let r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}}function getId3Timestamp(e){const t=getId3Frames(e);for(let n=0;n<t.length;n++){const e=t[n];if(isId3TimestampFrame(e))return readId3Timestamp(e)}}let MetadataSchema=function(e){return e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3",e.misbklv="urn:misb:KLV:bin:1910.1",e}({});function dummyTrack(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class BaseAudioDemuxer{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=appendUint8Array(this.cachedData,e),this.cachedData=null);let n,r=getId3Data(e,0),i=r?r.length:0;const s=this._audioTrack,a=this._id3Track,o=r?getId3Timestamp(r):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&isFiniteNumber(o))&&(this.basePTS=initPTSFn(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){const t=this.appendFrame(s,e,i);t?(this.frameIndex++,this.lastPTS=t.sample.pts,i+=t.length,n=i):i=l}else canParseId3(e,i)?(r=getId3Data(e,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,n=i):i++;if(i===l&&n!==l){const t=e.slice(n);this.cachedData?this.cachedData=appendUint8Array(this.cachedData,t):this.cachedData=t}}return{audioTrack:s,videoTrack:dummyTrack(),id3Track:a,textTrack:dummyTrack()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:dummyTrack(),id3Track:this._id3Track,textTrack:dummyTrack()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const initPTSFn=(e,t,n)=>{if(isFiniteNumber(e))return 90*e;return 9e4*t+(n?9e4*n.baseTime/n.timescale:0)};let chromeVersion$1=null;const BitratesMap=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot=[0,1,1,4];function appendFrame$1(e,t,n,r,i){if(n+24>t.length)return;const s=parseHeader(t,n);if(s&&n+s.frameLength<=t.length){const a=r+i*(9e4*s.samplesPerFrame/s.sampleRate),o={unit:t.subarray(n,n+s.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=s.channelCount,e.samplerate=s.sampleRate,e.samples.push(o),{sample:o,length:s.frameLength,missing:0}}}function parseHeader(e,t){const n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,s=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==s){const a=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*BitratesMap[14*(3===n?3-r:3===r?3:4)+i-1],c=SamplingRateMap[3*(3===n?0:2===n?1:2)+s],u=3===o?1:2,d=SamplesCoefficients[n][r],h=BytesInSlot[r],p=8*d*h,m=Math.floor(d*l/c+a)*h;if(null===chromeVersion$1){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion$1=e?parseInt(e[1]):0}return!!chromeVersion$1&&chromeVersion$1<=87&&2===r&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:u,frameLength:m,samplesPerFrame:p}}}function isHeaderPattern(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function isHeader(e,t){return t+1<e.length&&isHeaderPattern(e,t)}function canParse(e,t){return isHeaderPattern(e,t)&&4<=e.length-t}function probe(e,t){if(t+1<e.length&&isHeaderPattern(e,t)){const n=4,r=parseHeader(e,t);let i=n;null!=r&&r.frameLength&&(i=r.frameLength);const s=t+i;return s===e.length||isHeader(e,s)}return!1}class AACDemuxer extends BaseAudioDemuxer{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=getId3Data(e,0);let r=(null==n?void 0:n.length)||0;if(probe(e,r))return!1;for(let i=e.length;r<i;r++)if(probe$1(e,r))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return canParse$1(e,t)}appendFrame(e,t,n){initTrackConfig(e,this.observer,t,n,e.manifestCodec);const r=appendFrame$2(e,t,n,this.basePTS,this.frameIndex);if(r&&0===r.missing)return r}}const getAudioBSID=(e,t)=>{let n=0,r=5;t+=r;const i=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;r>0;){a[0]=e[t];const o=Math.min(r,8),l=8-o;s[0]=4278190080>>>24+l<<l,i[0]=(a[0]&s[0])>>l,n=n?n<<o|i[0]:i[0],t+=1,r-=o}return n};class AC3Demuxer extends BaseAudioDemuxer{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const r=appendFrame(e,t,n,this.basePTS,this.frameIndex);if(-1!==r){return{sample:e.samples[e.samples.length-1],length:r,missing:0}}}static probe(e){if(!e)return!1;const t=getId3Data(e,0);if(!t)return!1;const n=t.length;return 11===e[n]&&119===e[n+1]&&void 0!==getId3Timestamp(t)&&getAudioBSID(e,n)<16}}function appendFrame(e,t,n,r,i){if(n+8>t.length)return-1;if(11!==t[n]||119!==t[n+1])return-1;const s=t[n+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],o=63&t[n+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+s];if(n+l>t.length)return-1;const c=t[n+6]>>5;let u=0;2===c?u+=2:(1&c&&1!==c&&(u+=2),4&c&&(u+=2));const d=(t[n+6]<<8|t[n+7])>>12-u&1,h=[2,1,2,3,3,4,4,5][c]+d,p=t[n+5]>>3,m=7&t[n+5],f=new Uint8Array([s<<6|p<<1|m>>2,(3&m)<<6|c<<3|d<<2|o>>4,o<<4&224]),g=r+i*(1536/a*9e4),x=t.subarray(n,n+l);return e.config=f,e.channelCount=h,e.samplerate=a,e.samples.push({unit:x,pts:g}),l}class MP3Demuxer extends BaseAudioDemuxer{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=getId3Data(e,0);let n=(null==t?void 0:t.length)||0;if(t&&11===e[n]&&119===e[n+1]&&void 0!==getId3Timestamp(t)&&getAudioBSID(e,n)<=16)return!1;for(let r=e.length;n<r;n++)if(probe(e,n))return logger.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return canParse(e,t)}appendFrame(e,t,n){if(null!==this.basePTS)return appendFrame$1(e,t,n,this.basePTS,this.frameIndex)}}const emsgSchemePattern=/\/emsg[-/]ID3/i;class MP4Demuxer{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const i=this.videoTrack=dummyTrack("video",1),s=this.audioTrack=dummyTrack("audio",1),a=this.txtTrack=dummyTrack("text",1);if(this.id3Track=dummyTrack("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=parseInitSegment(e);if(o.video){const{id:e,timescale:t,codec:n,supplemental:r}=o.video;i.id=e,i.timescale=a.timescale=t,i.codec=n,i.supplemental=r}if(o.audio){const{id:e,timescale:t,codec:n}=o.audio;s.id=e,s.timescale=t,s.codec=n}a.id=RemuxerTrackIdConfig.text,i.sampleDuration=0,i.duration=s.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return hasMoofData(e)}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=appendUint8Array(this.remainderData,e));const t=segmentValidRange(n);this.remainderData=t.remainder,r.samples=t.valid||new Uint8Array}else r.samples=n;const s=this.extractID3Track(r,t);return i.samples=parseSamples(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=parseSamples(e,t),{videoTrack:t,audioTrack:dummyTrack(),id3Track:r,textTrack:dummyTrack()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const r=findBox(e.samples,["emsg"]);r&&r.forEach(e=>{const r=parseEmsg(e);if(emsgSchemePattern.test(r.schemeIdUri)){const e=getEmsgStartTime(r,t);let i=4294967295===r.eventDuration?Number.POSITIVE_INFINITY:r.eventDuration/r.timeScale;i<=.001&&(i=Number.POSITIVE_INFINITY);const s=r.payload;n.samples.push({data:s,len:s.byteLength,dts:e,pts:e,type:MetadataSchema.emsg,duration:i})}else if(this.config.enableEmsgKLVMetadata&&r.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const e=getEmsgStartTime(r,t);n.samples.push({data:r.payload,len:r.payload.byteLength,dts:e,pts:e,type:MetadataSchema.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function getEmsgStartTime(e,t){return isFiniteNumber(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale}class SampleAesDecrypter{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new Decrypter(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,DecrypterAesMode.cbc)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const i=r.subarray(16,r.length-r.length%16),s=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(s).then(i=>{const s=new Uint8Array(i);r.set(s,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)})}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)e.set(n.subarray(r,r+16),i);return e}decryptAvcSample(e,t,n,r,i){const s=discardEPB(i.data),a=this.getAvcEncryptedData(s);this.decryptBuffer(a.buffer).then(a=>{i.data=this.getAvcDecryptedUnit(s,a),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)})}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();const i=e[t].units;for(;!(n>=i.length);n++){const s=i[n];if(!(s.data.length<=48||1!==s.type&&5!==s.type||(this.decryptAvcSample(e,t,n,r,s),this.decrypter.isSync())))return}}}}class BaseVideoParser{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n,r=this.VideoSample;if(r&&0!==r.units.length||(r=e[e.length-1]),null!=(t=r)&&t.units){const e=r.units;n=e[e.length-1]}return n}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const n=t.samples,r=n.length;if(!r)return void t.dropped++;{const t=n[r-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}}parseNALu(e,t,n){const r=t.byteLength;let i=e.naluState||0;const s=i,a=[];let o,l,c,u=0,d=-1,h=0;for(-1===i&&(d=0,h=this.getNALuType(t,0),i=0,u=1);u<r;)if(o=t[u++],i)if(1!==i)if(o)if(1===o){if(l=u-i-1,d>=0){const e={data:t.subarray(d,l),type:h};a.push(e)}else{const n=this.getLastNalUnit(e.samples);n&&(s&&u<=4-s&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-s)),l>0&&(n.data=appendUint8Array(n.data,t.subarray(0,l)),n.state=0))}u<r?(c=this.getNALuType(t,u),d=u,h=c,i=0):i=-1}else i=0;else i=3;else i=o?0:2;else i=o?0:1;if(d>=0&&i>=0){const e={data:t.subarray(d,r),type:h,state:i};a.push(e)}if(0===a.length){const n=this.getLastNalUnit(e.samples);n&&(n.data=appendUint8Array(n.data,t))}return e.naluState=i,a}}class ExpGolomb{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class AvcVideoParser extends BaseVideoParser{parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let s,a=this.VideoSample,o=!1;n.data=null,a&&i.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(r=>{var i,l;switch(r.type){case 1:{let t=!1;s=!0;const i=r.data;if(o&&i.length>4){const e=this.readSliceType(i);2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var c;if(t)null!=(c=a)&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null);a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.frame=!0,a.key=t;break}case 5:s=!0,null!=(i=a)&&i.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 6:s=!0,parseSEIMessageFromNALu(r.data,1,n.pts,t.samples);break;case 7:{var u,d;s=!0,o=!0;const t=r.data,n=this.readSPS(t);if(!e.sps||e.width!==n.width||e.height!==n.height||(null==(u=e.pixelRatio)?void 0:u[0])!==n.pixelRatio[0]||(null==(d=e.pixelRatio)?void 0:d[1])!==n.pixelRatio[1]){e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t];const r=t.subarray(1,4);let i="avc1.";for(let e=0;e<3;e++){let t=r[e].toString(16);t.length<2&&(t="0"+t),i+=t}e.codec=i}break}case 8:s=!0,e.pps=[r.data];break;case 9:s=!0,e.audFound=!0,null!=(l=a)&&l.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:s=!0;break;default:s=!1}if(a&&s){a.units.push(r)}}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return 31&e[t]}readSliceType(e){const t=new ExpGolomb(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n,r=8,i=8;for(let s=0;s<e;s++)0!==i&&(n=t.readEG(),i=(r+n+256)%256),r=0===i?r:i}readSPS(e){const t=new ExpGolomb(e);let n,r,i,s=0,a=0,o=0,l=0;const c=t.readUByte.bind(t),u=t.readBits.bind(t),d=t.readUEG.bind(t),h=t.readBoolean.bind(t),p=t.skipBits.bind(t),m=t.skipEG.bind(t),f=t.skipUEG.bind(t),g=this.skipScalingList.bind(this);c();const x=c();if(u(5),p(3),c(),f(),100===x||110===x||122===x||244===x||44===x||83===x||86===x||118===x||128===x){const e=d();if(3===e&&p(1),f(),f(),p(1),h())for(r=3!==e?8:12,i=0;i<r;i++)h()&&g(i<6?16:64,t)}f();const v=d();if(0===v)d();else if(1===v)for(p(1),m(),m(),n=d(),i=0;i<n;i++)m();f(),p(1);const y=d(),_=d(),E=u(1);0===E&&p(1),p(1),h()&&(s=d(),a=d(),o=d(),l=d());let b=[1,1];if(h()&&h()){switch(c()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:b=[c()<<8|c(),c()<<8|c()]}}return{width:Math.ceil(16*(y+1)-2*s-2*a),height:(2-E)*(_+1)*16-(E?2:4)*(o+l),pixelRatio:b}}}class HevcVideoParser extends BaseVideoParser{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let s,a=this.VideoSample,o=!1;n.data=null,a&&i.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(r=>{var i,l;switch(r.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.frame=!0,s=!0;break;case 16:case 17:case 18:case 21:var c;if(s=!0,o)null!=(c=a)&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null);a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:s=!0,null!=(i=a)&&i.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 39:s=!0,parseSEIMessageFromNALu(r.data,2,n.pts,t.samples);break;case 32:s=!0,e.vps||("object"!=typeof e.params&&(e.params={}),e.params=_extends$1(e.params,this.readVPS(r.data)),this.initVPS=r.data),e.vps=[r.data];break;case 33:if(s=!0,o=!0,void 0===e.vps||e.vps[0]===this.initVPS||void 0===e.sps||this.matchSPS(e.sps[0],r.data)||(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const t=this.readSPS(r.data);e.width=t.width,e.height=t.height,e.pixelRatio=t.pixelRatio,e.codec=t.codecString,e.sps=[],"object"!=typeof e.params&&(e.params={});for(const n in t.params)e.params[n]=t.params[n]}this.pushParameterSet(e.sps,r.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0;break;case 34:if(s=!0,"object"==typeof e.params){if(!e.pps){e.pps=[];const t=this.readPPS(r.data);for(const n in t)e.params[n]=t[n]}this.pushParameterSet(e.pps,r.data,e.vps)}break;case 35:s=!0,e.audFound=!0,null!=(l=a)&&l.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:s=!1}if(a&&s){a.units.push(r)}}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(126&e[t])>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let r=0;r<e.byteLength;r++)r>=2&&3===e[r]&&0===e[r-1]&&0===e[r-2]||(t[n]=e[r],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new ExpGolomb(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);return{numTemporalLayers:t.readBits(3)+1,temporalIdNested:t.readBoolean()}}readSPS(e){const t=new ExpGolomb(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const r=t.readBits(2),i=t.readBoolean(),s=t.readBits(5),a=t.readUByte(),o=t.readUByte(),l=t.readUByte(),c=t.readUByte(),u=t.readUByte(),d=t.readUByte(),h=t.readUByte(),p=t.readUByte(),m=t.readUByte(),f=t.readUByte(),g=t.readUByte(),x=[],v=[];for(let W=0;W<n;W++)x.push(t.readBoolean()),v.push(t.readBoolean());if(n>0)for(let W=n;W<8;W++)t.readBits(2);for(let W=0;W<n;W++)x[W]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),v[W]&&t.readUByte();t.readUEG();const y=t.readUEG();3==y&&t.skipBits(1);const _=t.readUEG(),E=t.readUEG(),b=t.readBoolean();let C=0,S=0,T=0,R=0;b&&(C+=t.readUEG(),S+=t.readUEG(),T+=t.readUEG(),R+=t.readUEG());const j=t.readUEG(),w=t.readUEG(),A=t.readUEG();for(let W=t.readBoolean()?0:n;W<=n;W++)t.skipUEG(),t.skipUEG(),t.skipUEG();t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.readBoolean()){if(t.readBoolean())for(let e=0;e<4;e++)for(let n=0;n<(3===e?2:6);n++){if(t.readBoolean()){const n=Math.min(64,1<<4+(e<<1));e>1&&t.readEG();for(let e=0;e<n;e++)t.readEG()}else t.readUEG()}}t.readBoolean(),t.readBoolean();t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const I=t.readUEG();let k=0;for(let W=0;W<I;W++){let e=!1;if(0!==W&&(e=t.readBoolean()),e){W===I&&t.readUEG(),t.readBoolean(),t.readUEG();let e=0;for(let n=0;n<=k;n++){const n=t.readBoolean();let r=!1;n||(r=t.readBoolean()),(n||r)&&e++}k=e}else{const e=t.readUEG(),n=t.readUEG();k=e+n;for(let r=0;r<e;r++)t.readUEG(),t.readBoolean();for(let r=0;r<n;r++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const e=t.readUEG();for(let n=0;n<e;n++){for(let e=0;e<A+4;e++)t.readBits(1);t.readBits(1)}}let M=0,P=1,L=1,D=!0,O=1,$=0;t.readBoolean(),t.readBoolean();let N=!1;if(t.readBoolean()){if(t.readBoolean()){const e=t.readUByte();e>0&&e<16?(P=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],L=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(P=t.readBits(16),L=t.readBits(16))}t.readBoolean()&&t.readBoolean();if(t.readBoolean()){t.readBits(3),t.readBoolean();t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())}t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),N=t.readBoolean(),N&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG());if(t.readBoolean()){O=t.readBits(32),$=t.readBits(32);t.readBoolean()&&t.readUEG();if(t.readBoolean()){const e=t.readBoolean(),r=t.readBoolean();let i=!1;(e||r)&&(i=t.readBoolean(),i&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),i&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let s=0;s<=n;s++){D=t.readBoolean();let n=!1;D||t.readBoolean()?t.readEG():n=t.readBoolean();const s=n?1:t.readUEG()+1;if(e)for(let e=0;e<s;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(r)for(let e=0;e<s;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),M=t.readUEG())}let F=_,B=E;if(b){let e=1,t=1;1===y?e=t=2:2==y&&(e=2),F=_-e*S-e*C,B=E-t*R-t*T}const U=r?["A","B","C"][r]:"",G=a<<24|o<<16|l<<8|c;let V=0;for(let W=0;W<32;W++)V=(V|(G>>W&1)<<31-W)>>>0;let H=V.toString(16);1===s&&"2"===H&&(H="6");return{codecString:`hvc1.${U}${s}.${H}.${i?"H":"L"}${g}.B0`,params:{general_tier_flag:i,general_profile_idc:s,general_profile_space:r,general_profile_compatibility_flags:[a,o,l,c],general_constraint_indicator_flags:[u,d,h,p,m,f],general_level_idc:g,bit_depth:j+8,bit_depth_luma_minus8:j,bit_depth_chroma_minus8:w,min_spatial_segmentation_idc:M,chroma_format_idc:y,frame_rate:{fixed:D,fps:$/O}},width:F,height:B,pixelRatio:[P,L]}}readPPS(e){const t=new ExpGolomb(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2);t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const n=t.readBoolean(),r=t.readBoolean();let i=1;return r&&n?i=0:r?i=3:n&&(i=2),{parallelismType:i}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const PACKET_LENGTH=188;class TSDemuxer{constructor(e,t,n,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=r,this.videoParser=null}static probe(e,t){const n=TSDemuxer.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),-1!==n}static syncOffset(e){const t=e.length;let n=Math.min(5*PACKET_LENGTH,t-PACKET_LENGTH)+1,r=0;for(;r<n;){let i=!1,s=-1,a=0;for(let o=r;o<t;o+=PACKET_LENGTH){if(71!==e[o]||t-o!==PACKET_LENGTH&&71!==e[o+PACKET_LENGTH]){if(a)return-1;break}if(a++,-1===s&&(s=o,0!==s&&(n=Math.min(s+99*PACKET_LENGTH,e.length-PACKET_LENGTH)+1)),i||(i=0===parsePID(e,o)),i&&a>1&&(0===s&&a>2||o+PACKET_LENGTH>n))return s}r++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:RemuxerTrackIdConfig[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=TSDemuxer.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=TSDemuxer.createTrack("audio",r),this._id3Track=TSDemuxer.createTrack("id3"),this._txtTrack=TSDemuxer.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,r=!1){let i;n||(this.sampleAes=null);const s=this._videoTrack,a=this._audioTrack,o=this._id3Track,l=this._txtTrack;let c=s.pid,u=s.pesData,d=a.pid,h=o.pid,p=a.pesData,m=o.pesData,f=null,g=this.pmtParsed,x=this._pmtId,v=e.length;if(this.remainderData&&(v=(e=appendUint8Array(this.remainderData,e)).length,this.remainderData=null),v<PACKET_LENGTH&&!r)return this.remainderData=e,{audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};const y=Math.max(0,TSDemuxer.syncOffset(e));v-=(v-y)%PACKET_LENGTH,v<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,v,e.buffer.byteLength-v));let _=0;for(let b=y;b<v;b+=PACKET_LENGTH)if(71===e[b]){const t=!!(64&e[b+1]),r=parsePID(e,b);let v;if((48&e[b+3])>>4>1){if(v=b+5+e[b+4],v===b+PACKET_LENGTH)continue}else v=b+4;switch(r){case c:t&&(u&&(i=parsePES(u,this.logger))&&(this.readyVideoParser(s.segmentCodec),null!==this.videoParser&&this.videoParser.parsePES(s,l,i,!1)),u={data:[],size:0}),u&&(u.data.push(e.subarray(v,b+PACKET_LENGTH)),u.size+=b+PACKET_LENGTH-v);break;case d:if(t){if(p&&(i=parsePES(p,this.logger)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,i);break;case"mp3":this.parseMPEGPES(a,i);break;case"ac3":this.parseAC3PES(a,i)}p={data:[],size:0}}p&&(p.data.push(e.subarray(v,b+PACKET_LENGTH)),p.size+=b+PACKET_LENGTH-v);break;case h:t&&(m&&(i=parsePES(m,this.logger))&&this.parseID3PES(o,i),m={data:[],size:0}),m&&(m.data.push(e.subarray(v,b+PACKET_LENGTH)),m.size+=b+PACKET_LENGTH-v);break;case 0:t&&(v+=e[v]+1),x=this._pmtId=parsePAT(e,v);break;case x:{t&&(v+=e[v]+1);const r=parsePMT(e,v,this.typeSupported,n,this.observer,this.logger);c=r.videoPid,c>0&&(s.pid=c,s.segmentCodec=r.segmentVideoCodec),d=r.audioPid,d>0&&(a.pid=d,a.segmentCodec=r.segmentAudioCodec),h=r.id3Pid,h>0&&(o.pid=h),null===f||g||(this.logger.warn(`MPEG-TS PMT found at ${b} after unknown PID '${f}'. Backtracking to sync byte @${y} to parse all TS packets.`),f=null,b=y-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:f=r}}else _++;_>0&&emitParsingError(this.observer,new Error(`Found ${_} TS packet/s that do not start with 0x47`),void 0,this.logger),s.pesData=u,a.pesData=p,o.pesData=m;const E={audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};return r&&this.extractRemainingSamples(E),E}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:i}=e,s=n.pesData,a=t.pesData,o=r.pesData;let l;if(s&&(l=parsePES(s,this.logger))?(this.readyVideoParser(n.segmentCodec),null!==this.videoParser&&(this.videoParser.parsePES(n,i,l,!0),n.pesData=null)):n.pesData=s,a&&(l=parsePES(a,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=a&&a.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;o&&(l=parsePES(o,this.logger))?(this.parseID3PES(r,l),r.pesData=null):r.pesData=o}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new SampleAesDecrypter(this.observer,this.config,t);return this.decrypt(r,i)}readyVideoParser(e){null===this.videoParser&&("avc"===e?this.videoParser=new AvcVideoParser:"hevc"===e&&(this.videoParser=new HevcVideoParser))}decrypt(e,t){return new Promise(n=>{const{audioTrack:r,videoTrack:i}=e;r.samples&&"aac"===r.segmentCodec?t.decryptAacSamples(r.samples,0,()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,()=>{n(e)}):n(e)}):i.samples&&t.decryptAvcSamples(i.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let i,s,a,o=t.data;if(r){this.aacOverFlow=null;const t=r.missing,i=r.sample.unit.byteLength;if(-1===t)o=appendUint8Array(r.sample.unit,o);else{const s=i-t;r.sample.unit.set(o.subarray(0,t),s),e.samples.push(r.sample),n=r.missing}}for(i=n,s=o.length;i<s-1&&!isHeader$1(o,i);i++);if(i!==n){let e;const t=i<s-1;if(e=t?`AAC PES did not start with ADTS header,offset:${i}`:"No ADTS header found in AAC PES",emitParsingError(this.observer,new Error(e),t,this.logger),!t)return}if(initTrackConfig(e,this.observer,o,i,this.audioCodec),void 0!==t.pts)a=t.pts;else{if(!r)return void this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=getFrameDuration(e.samplerate);a=r.sample.pts+t}}let l,c=0;for(;i<s;){if(l=appendFrame$2(e,o,i,a,c),i+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;i<s-1&&!isHeader$1(o,i);i++);}}parseMPEGPES(e,t){const n=t.data,r=n.length;let i=0,s=0;const a=t.pts;if(void 0!==a)for(;s<r;)if(isHeader(n,s)){const t=appendFrame$1(e,n,s,a,i);if(!t)break;s+=t.length,i++}else s++;else this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const n=t.data,r=t.pts;if(void 0===r)return void this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");const i=n.length;let s,a=0,o=0;for(;o<i&&(s=appendFrame(e,n,o,r,a++))>0;)o+=s}}parseID3PES(e,t){if(void 0===t.pts)return void this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");const n=_extends$1({},t,{type:this._videoTrack?MetadataSchema.emsg:MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function parsePID(e,t){return((31&e[t+1])<<8)+e[t+2]}function parsePAT(e,t){return(31&e[t+10])<<8|e[t+11]}function parsePMT(e,t,n,r,i,s){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){const o=parsePID(e,t),l=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!r){logEncryptedSamplesFoundInUnencryptedStream("ADTS AAC",s);break}case 15:-1===a.audioPid&&(a.audioPid=o);break;case 21:-1===a.id3Pid&&(a.id3Pid=o);break;case 219:if(!r){logEncryptedSamplesFoundInUnencryptedStream("H.264",s);break}case 27:-1===a.videoPid&&(a.videoPid=o);break;case 3:case 4:n.mpeg||n.mp3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="mp3"):s.log("MPEG audio found, not supported in this browser");break;case 193:if(!r){logEncryptedSamplesFoundInUnencryptedStream("AC-3",s);break}case 129:n.ac3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===a.audioPid&&l>0){let r=t+5,i=l;for(;i>2;){if(106===e[r])!0!==n.ac3?s.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=o,a.segmentAudioCodec="ac3");const t=e[r+1]+2;r+=t,i-=t}}break;case 194:case 135:return emitParsingError(i,new Error("Unsupported EC-3 in M2TS found"),void 0,s),a;case 36:-1===a.videoPid&&(a.videoPid=o,a.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"))}t+=l+5}return a}function emitParsingError(e,t,n,r){r.warn(`parsing error: ${t.message}`),e.emit(Events$1.ERROR,Events$1.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:t,reason:t.message})}function logEncryptedSamplesFoundInUnencryptedStream(e,t){t.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function parsePES(e,t){let n,r,i,s,a,o=0;const l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&l.length>1;)l[0]=appendUint8Array(l[0],l[1]),l.splice(1,1);n=l[0];if(1===(n[0]<<16)+(n[1]<<8)+n[2]){if(r=(n[4]<<8)+n[5],r&&r>e.size-6)return null;const c=n[7];192&c&&(s=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2,64&c?(a=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2,s-a>54e5&&(t.warn(`${Math.round((s-a)/9e4)}s delta between PTS and DTS, align them`),s=a)):a=s),i=n[8];let u=i+9;if(e.size<=u)return null;e.size-=u;const d=new Uint8Array(e.size);for(let e=0,t=l.length;e<t;e++){n=l[e];let t=n.byteLength;if(u){if(u>t){u-=t;continue}n=n.subarray(u),t-=u,u=0}d.set(n,o),o+=t}return r&&(r-=i+3),{data:d,pts:s,dts:a,len:r}}return null}class AAC{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const UINT32_MAX=Math.pow(2,32)-1;class MP4{static init(){let e;for(e in MP4.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},MP4.types)MP4.types.hasOwnProperty(e)&&(MP4.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);MP4.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);MP4.STTS=MP4.STSC=MP4.STCO=i,MP4.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),MP4.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),MP4.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),MP4.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);MP4.FTYP=MP4.box(MP4.types.ftyp,s,o,s,a),MP4.DINF=MP4.box(MP4.types.dinf,MP4.box(MP4.types.dref,r))}static box(e,...t){let n=8,r=t.length;const i=r;for(;r--;)n+=t[r].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=255&n,s.set(e,4),r=0,n=8;r<i;r++)s.set(t[r],n),n+=t[r].byteLength;return s}static hdlr(e){return MP4.box(MP4.types.hdlr,MP4.HDLR_TYPES[e])}static mdat(e){return MP4.box(MP4.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(UINT32_MAX+1)),r=Math.floor(t%(UINT32_MAX+1));return MP4.box(MP4.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}static mdia(e){return MP4.box(MP4.types.mdia,MP4.mdhd(e.timescale||0,e.duration||0),MP4.hdlr(e.type),MP4.minf(e))}static mfhd(e){return MP4.box(MP4.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?MP4.box(MP4.types.minf,MP4.box(MP4.types.smhd,MP4.SMHD),MP4.DINF,MP4.stbl(e)):MP4.box(MP4.types.minf,MP4.box(MP4.types.vmhd,MP4.VMHD),MP4.DINF,MP4.stbl(e))}static moof(e,t,n){return MP4.box(MP4.types.moof,MP4.mfhd(e),MP4.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=MP4.trak(e[t]);return MP4.box.apply(null,[MP4.types.moov,MP4.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(MP4.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=MP4.trex(e[t]);return MP4.box.apply(null,[MP4.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(UINT32_MAX+1)),r=Math.floor(t%(UINT32_MAX+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return MP4.box(MP4.types.mvhd,i)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,i;for(r=0;r<t.length;r++)i=t[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return MP4.box(MP4.types.sdtp,n)}static stbl(e){return MP4.box(MP4.types.stbl,MP4.stsd(e),MP4.box(MP4.types.stts,MP4.STTS),MP4.box(MP4.types.stsc,MP4.STSC),MP4.box(MP4.types.stsz,MP4.STSZ),MP4.box(MP4.types.stco,MP4.STCO))}static avc1(e){let t,n,r,i=[],s=[];for(t=0;t<e.sps.length;t++)n=e.sps[t],r=n.byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)n=e.pps[t],r=n.byteLength,s.push(r>>>8&255),s.push(255&r),s=s.concat(Array.prototype.slice.call(n));const a=MP4.box(MP4.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(s))),o=e.width,l=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return MP4.box(MP4.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,MP4.box(MP4.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),MP4.box(MP4.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return MP4.box(MP4.types.mp4a,MP4.audioStsd(e),MP4.box(MP4.types.esds,MP4.esds(e)))}static mp3(e){return MP4.box(MP4.types[".mp3"],MP4.audioStsd(e))}static ac3(e){return MP4.box(MP4.types["ac-3"],MP4.audioStsd(e),MP4.box(MP4.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if("audio"===e.type){if("aac"===t)return MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp4a(e));if("ac3"===t&&e.config)return MP4.box(MP4.types.stsd,MP4.STSD,MP4.ac3(e));if("mp3"===t&&"mp3"===e.codec)return MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp3(e))}else{if(!e.pps||!e.sps)throw new Error("video track missing pps or sps");if("avc"===t)return MP4.box(MP4.types.stsd,MP4.STSD,MP4.avc1(e));if("hevc"===t&&e.vps)return MP4.box(MP4.types.stsd,MP4.STSD,MP4.hvc1(e))}throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),r=e.width||0,i=e.height||0,s=Math.floor(n/(UINT32_MAX+1)),a=Math.floor(n%(UINT32_MAX+1));return MP4.box(MP4.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}static traf(e,t){const n=MP4.sdtp(e),r=e.id,i=Math.floor(t/(UINT32_MAX+1)),s=Math.floor(t%(UINT32_MAX+1));return MP4.box(MP4.types.traf,MP4.box(MP4.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),MP4.box(MP4.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s])),MP4.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,MP4.box(MP4.types.trak,MP4.tkhd(e),MP4.mdia(e))}static trex(e){const t=e.id;return MP4.box(MP4.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,i=12+16*r,s=new Uint8Array(i);let a,o,l,c,u,d;for(t+=8+i,s.set(["video"===e.type?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),a=0;a<r;a++)o=n[a],l=o.duration,c=o.size,u=o.flags,d=o.cts,s.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,61440&u.degradPrio,15&u.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*a);return MP4.box(MP4.types.trun,s)}static initSegment(e){MP4.types||MP4.init();const t=MP4.moov(e);return appendUint8Array(MP4.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],r=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),3|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let i=r.length;for(let h=0;h<n.length;h+=1){i+=3;for(let e=0;e<n[h].length;e+=1)i+=2+n[h][e].length}const s=new Uint8Array(i);s.set(r,0),i=r.length;const a=n.length-1;for(let h=0;h<n.length;h+=1){s.set(new Uint8Array([32+h|(h===a?128:0),0,n[h].length]),i),i+=3;for(let e=0;e<n[h].length;e+=1)s.set(new Uint8Array([n[h][e].length>>8,255&n[h][e].length]),i),i+=2,s.set(n[h][e],i),i+=n[h][e].length}const o=MP4.box(MP4.types.hvcC,s),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return MP4.box(MP4.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,MP4.box(MP4.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),MP4.box(MP4.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))}}MP4.types=void 0,MP4.HDLR_TYPES=void 0,MP4.STTS=void 0,MP4.STSC=void 0,MP4.STCO=void 0,MP4.STSZ=void 0,MP4.VMHD=void 0,MP4.SMHD=void 0,MP4.STSD=void 0,MP4.FTYP=void 0,MP4.DINF=void 0;const MPEG_TS_CLOCK_FREQ_HZ=9e4;function toTimescaleFromBase(e,t,n=1,r=!1){const i=e*t*n;return r?Math.round(i):i}function toTimescaleFromScale(e,t,n=1,r=!1){return toTimescaleFromBase(e,t,1/n,r)}function toMsFromMpegTsClock(e,t=!1){return toTimescaleFromBase(e,1e3,1/MPEG_TS_CLOCK_FREQ_HZ,t)}function toMpegTsClockFromTimescale(e,t=1){return toTimescaleFromBase(e,MPEG_TS_CLOCK_FREQ_HZ,1/t)}const MAX_SILENT_FRAME_DURATION=1e4,AAC_SAMPLES_PER_FRAME=1024,MPEG_AUDIO_SAMPLE_PER_FRAME=1152,AC3_SAMPLES_PER_FRAME=1536;let chromeVersion=null,safariWebkitVersion=null,now;function createMp4Sample(e,t,n,r){return{duration:t,size:n,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class MP4Remuxer extends Logger{constructor(e,t,n,r){if(super("mp4-remuxer",r),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===chromeVersion){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);chromeVersion=e?parseInt(e[1]):0}if(null===safariWebkitVersion){const e=navigator.userAgent.match(/Safari\/(\d+)/i);safariWebkitVersion=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,r=e.reduce((e,r)=>{let i=r.pts,s=i-e;return s<-4294967296&&(t=!0,i=normalizePts(i,n),s=i-e),s>0?e:i},n);return t&&this.debug("PTS rollover detected"),r}remux(e,t,n,r,i,s,a,o){let l,c,u,d,h,p,m=i,f=i;const g=e.pid>-1,x=t.pid>-1,v=t.samples.length,y=e.samples.length>0,_=a&&v>0||v>1;if((!g||y)&&(!x||_)||this.ISGenerated||a){if(this.ISGenerated){var E,b,C,S;const e=this.videoTrackConfig;(e&&(t.width!==e.width||t.height!==e.height||(null==(E=t.pixelRatio)?void 0:E[0])!==(null==(b=e.pixelRatio)?void 0:b[0])||(null==(C=t.pixelRatio)?void 0:C[1])!==(null==(S=e.pixelRatio)?void 0:S[1]))||!e&&_||null===this.nextAudioTs&&y)&&this.resetInitSegment()}this.ISGenerated||(u=this.generateIS(e,t,i,s));const n=this.isVideoContiguous;let r,a=-1;if(_&&(a=findKeyframeIndex(t.samples),!n&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,a>0){this.warn(`Dropped ${a} out of ${v} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(a),t.dropped+=a,f+=(t.samples[0].pts-e)/t.inputTimeScale,r=f}else-1===a&&(this.warn(`No keyframe found out of ${v} video samples`),p=!1);if(this.ISGenerated){if(y&&_){const n=this.getVideoStartPts(t.samples),r=(normalizePts(e.samples[0].pts,n)-n)/t.inputTimeScale;m+=Math.max(0,r),f+=Math.max(0,-r)}if(y){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),u=this.generateIS(e,t,i,s)),c=this.remuxAudio(e,m,this.isAudioContiguous,s,x||_||o===PlaylistLevelType.AUDIO?f:void 0),_){const r=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),u=this.generateIS(e,t,i,s)),l=this.remuxVideo(t,f,n,r)}}else _&&(l=this.remuxVideo(t,f,n,0));l&&(l.firstKeyFrame=a,l.independent=-1!==a,l.firstKeyFramePTS=r)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=flushTextTrackMetadataCueSamples(n,i,this._initPTS,this._initDTS)),r.samples.length&&(d=flushTextTrackUserdataCueSamples(r,i,this._initPTS))),{audio:c,video:l,initSegment:u,independent:p,text:d,id3:h}}generateIS(e,t,n,r){const i=e.samples,s=t.samples,a=this.typeSupported,o={},l=this._initPTS;let c,u,d,h=!l||r,p="audio/mp4",m=-1;if(h&&(c=u=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(p="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}o.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&a.mpeg?new Uint8Array(0):MP4.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(m=e.id,d=e.inputTimeScale,l&&d===l.timescale?h=!1:c=u=i[0].pts-Math.round(d*n))}if(t.sps&&t.pps&&s.length){if(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:MP4.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(m=t.id,d=t.inputTimeScale,l&&d===l.timescale)h=!1;else{const e=this.getVideoStartPts(s),t=Math.round(d*n);u=Math.min(u,normalizePts(s[0].dts,e)-t),c=Math.min(c,e-t)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,h?(l&&this.warn(`Timestamps at playlist time: ${r?"":"~"}${n} ${c/d} != initPTS: ${l.baseTime/l.timescale} (${l.baseTime}/${l.timescale}) trackId: ${l.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${c/d} (${c}/${d}) trackId: ${m}`),this._initPTS={baseTime:c,timescale:d,trackId:m},this._initDTS={baseTime:u,timescale:d,trackId:m}):c=d=void 0,{tracks:o,initPTS:c,timescale:d,trackId:m}}remuxVideo(e,t,n,r){const i=e.inputTimeScale,s=e.samples,a=[],o=s.length,l=this._initPTS,c=l.baseTime*i/l.timescale;let u,d,h=this.nextVideoTs,p=8,m=this.videoSampleDuration,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,x=!1;if(!n||null===h){const e=c+t*i,r=s[0].pts-normalizePts(s[0].dts,s[0].pts);chromeVersion&&null!==h&&Math.abs(e-r-(h+c))<15e3?n=!0:h=e-r-c}const v=h+c;for(let D=0;D<o;D++){const e=s[D];e.pts=normalizePts(e.pts,v),e.dts=normalizePts(e.dts,v),e.dts<s[D>0?D-1:D].dts&&(x=!0)}x&&s.sort(function(e,t){const n=e.dts-t.dts,r=e.pts-t.pts;return n||r}),u=s[0].dts,d=s[s.length-1].dts;const y=d-u,_=y?Math.round(y/(o-1)):m||e.inputTimeScale/30;if(n){const n=u-v,r=n>_,i=n<-1;if((r||i)&&(r?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${toMsFromMpegTsClock(n,!0)} ms (${n}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${toMsFromMpegTsClock(-n,!0)} ms (${n}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!i||v>=s[0].pts||chromeVersion)){u=v;const e=s[0].pts-n;if(r)s[0].dts=u,s[0].pts=e;else{let t=!0;for(let r=0;r<s.length&&!(s[r].dts>e&&t);r++){const e=s[r].pts;if(s[r].dts-=n,s[r].pts-=n,r<s.length-1){const n=s[r+1].pts;t=n<=s[r].pts==n<=e}}}this.log(`Video: Initial PTS/DTS adjusted: ${toMsFromMpegTsClock(e,!0)}/${toMsFromMpegTsClock(u,!0)}, delta: ${toMsFromMpegTsClock(n,!0)} ms`)}}u=Math.max(0,u);let E=0,b=0,C=u;for(let D=0;D<o;D++){const e=s[D],t=e.units,n=t.length;let r=0;for(let i=0;i<n;i++)r+=t[i].data.length;b+=r,E+=n,e.length=r,e.dts<C?(e.dts=C,C+=_/4|0||1):C=e.dts,f=Math.min(e.pts,f),g=Math.max(e.pts,g)}d=s[o-1].dts;const S=b+4*E+8;let T;try{T=new Uint8Array(S)}catch(L){return void this.observer.emit(Events$1.ERROR,Events$1.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:L,bytes:S,reason:`fail allocating video mdat ${S}`})}const R=new DataView(T.buffer);R.setUint32(0,S),T.set(MP4.types.mdat,4);let j=!1,w=Number.POSITIVE_INFINITY,A=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY,k=Number.NEGATIVE_INFINITY;for(let D=0;D<o;D++){const e=s[D],t=e.units;let n,l=0;for(let r=0,i=t.length;r<i;r++){const e=t[r],n=e.data,i=e.data.byteLength;R.setUint32(p,i),p+=4,T.set(n,p),p+=i,l+=4+i}if(D<o-1)m=s[D+1].dts-e.dts,n=s[D+1].pts-e.pts;else{const t=this.config,a=D>0?e.dts-s[D-1].dts:_;if(n=D>0?e.pts-s[D-1].pts:_,t.stretchShortVideoTrack&&null!==this.nextAudioTs){const n=Math.floor(t.maxBufferHole*i),s=(r?f+r*i:this.nextAudioTs+c)-e.pts;s>n?(m=s-a,m<0?m=a:j=!0,this.log(`It is approximately ${s/90} ms to the next segment; using duration ${m/90} ms for the last video frame.`)):m=a}else m=a}const u=Math.round(e.pts-e.dts);w=Math.min(w,m),I=Math.max(I,m),A=Math.min(A,n),k=Math.max(k,n),a.push(createMp4Sample(e.key,m,l,u))}if(a.length)if(chromeVersion){if(chromeVersion<70){const e=a[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(safariWebkitVersion&&k-A<I-w&&_/I<.025&&0===a[0].cts){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=u;for(let t=0,n=a.length;t<n;t++){const r=e+a[t].duration,i=e+a[t].cts;if(t<n-1){const e=r+a[t+1].cts;a[t].duration=e-i}else a[t].duration=t?a[t-1].duration:_;a[t].cts=0,e=r}}m=j||!m?_:m;const M=d+m;this.nextVideoTs=h=M-c,this.videoSampleDuration=m,this.isVideoContiguous=!0;const P={data1:MP4.moof(e.sequenceNumber++,u,_extends$1(e,{samples:a})),data2:T,startPTS:(f-c)/i,endPTS:(g+m-c)/i,startDTS:(u-c)/i,endDTS:h/i,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,P}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return MPEG_AUDIO_SAMPLE_PER_FRAME;case"ac3":return AC3_SAMPLES_PER_FRAME;default:return AAC_SAMPLES_PER_FRAME}}remuxAudio(e,t,n,r,i){const s=e.inputTimeScale,a=s/(e.samplerate?e.samplerate:s),o=this.getSamplesPerFrame(e),l=o*a,c=this._initPTS,u="mp3"===e.segmentCodec&&this.typeSupported.mpeg,d=[],h=void 0!==i;let p=e.samples,m=u?0:8,f=this.nextAudioTs||-1;const g=c.baseTime*s/c.timescale,x=g+t*s;if(this.isAudioContiguous=n=n||p.length&&f>0&&(r&&Math.abs(x-(f+g))<9e3||Math.abs(normalizePts(p[0].pts,x)-(f+g))<20*l),p.forEach(function(e){e.pts=normalizePts(e.pts,x)}),!n||f<0){if(p=p.filter(e=>e.pts>=0),!p.length)return;f=0===i?0:r&&!h?Math.max(0,x-g):p[0].pts-g}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let n=0,r=f+g;n<p.length;n++){const i=p[n],a=i.pts,o=a-r,c=Math.abs(1e3*o/s);if(o<=-t*l&&h)0===n&&(this.warn(`Audio frame @ ${(a/s).toFixed(3)}s overlaps marker by ${Math.round(1e3*o/s)} ms.`),this.nextAudioTs=f=a-g,r=a);else if(o>=t*l&&c<MAX_SILENT_FRAME_DURATION&&h){let t=Math.round(o/l);for(r=a-t*l;r<0&&t&&l;)t--,r+=l;0===n&&(this.nextAudioTs=f=r-g),this.warn(`Injecting ${t} audio frames @ ${((r-g)/s).toFixed(3)}s due to ${Math.round(1e3*o/s)} ms gap.`);for(let s=0;s<t;s++){let t=AAC.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);t||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),t=i.unit.subarray()),p.splice(n,0,{unit:t,pts:r}),r+=l,n++}}i.pts=r,r+=l}}let v,y=null,_=null,E=0,b=p.length;for(;b--;)E+=p[b].unit.byteLength;for(let I=0,k=p.length;I<k;I++){const t=p[I],r=t.unit;let i=t.pts;if(null!==_){d[I-1].duration=Math.round((i-_)/a)}else{if(n&&"aac"===e.segmentCodec&&(i=f+g),y=i,!(E>0))return;E+=m;try{v=new Uint8Array(E)}catch(A){return void this.observer.emit(Events$1.ERROR,Events$1.ERROR,{type:ErrorTypes.MUX_ERROR,details:ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,error:A,bytes:E,reason:`fail allocating audio mdat ${E}`})}if(!u){new DataView(v.buffer).setUint32(0,E),v.set(MP4.types.mdat,4)}}v.set(r,m);const s=r.byteLength;m+=s,d.push(createMp4Sample(!0,o,s,0)),_=i}const C=d.length;if(!C)return;const S=d[d.length-1];f=_-g,this.nextAudioTs=f+a*S.duration;const T=u?new Uint8Array(0):MP4.moof(e.sequenceNumber++,y/a,_extends$1({},e,{samples:d}));e.samples=[];const R=(y-g)/s,j=f/s,w={data1:T,data2:v,startPTS:R,endPTS:j,startDTS:R,endDTS:j,type:"audio",hasAudio:!0,hasVideo:!1,nb:C};return this.isAudioContiguous=!0,w}}function normalizePts(e,t){let n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function findKeyframeIndex(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}function flushTextTrackMetadataCueSamples(e,t,n,r){const i=e.samples.length;if(!i)return;const s=e.inputTimeScale;for(let o=0;o<i;o++){const i=e.samples[o];i.pts=normalizePts(i.pts-n.baseTime*s/n.timescale,t*s)/s,i.dts=normalizePts(i.dts-r.baseTime*s/r.timescale,t*s)/s}const a=e.samples;return e.samples=[],{samples:a}}function flushTextTrackUserdataCueSamples(e,t,n){const r=e.samples.length;if(!r)return;const i=e.inputTimeScale;for(let a=0;a<r;a++){const r=e.samples[a];r.pts=normalizePts(r.pts-n.baseTime*i/n.timescale,t*i)/i}e.samples.sort((e,t)=>e.pts-t.pts);const s=e.samples;return e.samples=[],{samples:s}}class PassThroughRemuxer extends Logger{constructor(e,t,n,r){super("passthrough-remuxer",r),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,r),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:r}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const{audio:i,video:s}=this.initData=parseInitSegment(e);if(t)patchEncyptionData(e,t);else{const e=i||s;null!=e&&e.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${e.codec}")!`)}i&&(n=getParsedTrackCodec(i,ElementaryStreamTypes.AUDIO,this)),s&&(r=getParsedTrackCodec(s,ElementaryStreamTypes.VIDEO,this));const a={};i&&s?a.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:i?a.audio={container:"audio/mp4",codec:n,encrypted:i.encrypted,initSegment:e,id:"audio"}:s?a.video={container:"video/mp4",codec:r,supplemental:s.supplemental,encrypted:s.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(e,t,n,r,i,s){var a,o;let{initPTS:l,lastEndTime:c}=this;const u={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};isFiniteNumber(c)||(c=this.lastEndTime=i||0);const d=t.samples;if(!d.length)return u;const h={initPTS:void 0,timescale:void 0,trackId:void 0};let p=this.initData;if(null!=(a=p)&&a.length||(this.generateInitSegment(d),p=this.initData),null==(o=p)||!o.length)return this.warn("Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const m=getSampleData(d,p,this),f=p.audio?m[p.audio.id]:null,g=p.video?m[p.video.id]:null,x=toStartEndOrDefault(g,1/0),v=toStartEndOrDefault(f,1/0),y=toStartEndOrDefault(g,0,!0),_=toStartEndOrDefault(f,0,!0);let E=i,b=0;const C=f&&(!g||!l&&v<x||l&&l.trackId===p.audio.id),S=C?f:g;if(S){const e=S.timescale,t=S.start-i*e,n=C?p.audio.id:p.video.id;E=S.start/e,b=C?_-v:y-x,!s&&l||!isInvalidInitPts(l,E,i,b)&&e===l.timescale||(l&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${i} ${t/e} != initPTS: ${l.baseTime/l.timescale} (${l.baseTime}/${l.timescale}) trackId: ${l.trackId}`),this.log(`Found initPTS at playlist time: ${i} offset: ${E-i} (${t}/${e}) trackId: ${n}`),l=null,h.initPTS=t,h.timescale=e,h.trackId=n)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${i}`);l?(h.initPTS=l.baseTime,h.timescale=l.timescale,h.trackId=l.trackId):(h.timescale&&void 0!==h.trackId&&void 0!==h.initPTS||(this.warn("Could not set initPTS"),h.initPTS=E,h.timescale=1,h.trackId=-1),this.initPTS=l={baseTime:h.initPTS,timescale:h.timescale,trackId:h.trackId});const T=E-l.baseTime/l.timescale,R=T+b;b>0?this.lastEndTime=R:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const j=!!p.audio,w=!!p.video;let A="";j&&(A+="audio"),w&&(A+="video");const I={data1:d,startPTS:T,startDTS:T,endPTS:R,endDTS:R,type:A,hasAudio:j,hasVideo:w,nb:1,dropped:0,encrypted:!!p.audio&&p.audio.encrypted||!!p.video&&p.video.encrypted};u.audio=j&&!w?I:void 0,u.video=w?I:void 0;const k=null==g?void 0:g.sampleCount;if(k){const e=g.keyFrameIndex,t=-1!==e;I.nb=k,I.dropped=0===e||this.isVideoContiguous?0:t?e:k,I.independent=t,I.firstKeyFrame=e,t&&g.keyFrameStart&&(I.firstKeyFramePTS=(g.keyFrameStart-l.baseTime)/l.timescale),this.isVideoContiguous||(u.independent=t),this.isVideoContiguous||(this.isVideoContiguous=t),I.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${e}/${k} dropped: ${I.dropped} start: ${I.firstKeyFramePTS||"NA"}`)}return u.initSegment=h,u.id3=flushTextTrackMetadataCueSamples(n,i,l,l),r.samples.length&&(u.text=flushTextTrackUserdataCueSamples(r,i,l)),u}}function toStartEndOrDefault(e,t,n=!1){return void 0!==(null==e?void 0:e.start)?(e.start+(n?e.duration:0))/e.timescale:t}function isInvalidInitPts(e,t,n,r){if(null===e)return!0;const i=Math.max(r,1),s=t-e.baseTime/e.timescale;return Math.abs(s-n)>i}function getParsedTrackCodec(e,t,n){const r=e.codec;if(r&&r.length>4)return r;if(t===ElementaryStreamTypes.AUDIO){if("ec-3"===r||"ac-3"===r||"alac"===r)return r;if("fLaC"===r||"Opus"===r){return getCodecCompatibleName(r,!1)}return n.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"}return n.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1"}try{now=self.performance.now.bind(self.performance)}catch(err){now=Date.now}const muxConfig=[{demux:MP4Demuxer,remux:PassThroughRemuxer},{demux:TSDemuxer,remux:MP4Remuxer},{demux:AACDemuxer,remux:MP4Remuxer},{demux:MP3Demuxer,remux:MP4Remuxer}];muxConfig.splice(2,0,{demux:AC3Demuxer,remux:MP4Remuxer});class Transmuxer{constructor(e,t,n,r,i,s){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=i,this.logger=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const i=n.transmuxing;i.executeStart=now();let s=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:o}=this;r&&(this.currentTransmuxState=r);const{contiguous:l,discontinuity:c,trackSwitch:u,accurateTimeOffset:d,timeOffset:h,initSegmentChange:p}=r||a,{audioCodec:m,videoCodec:f,defaultInitPts:g,duration:x,initSegmentData:v}=o,y=getEncryptionType(s,t);if(y&&isFullSegmentEncryption(y.method)){const e=this.getDecrypter(),t=getAesModeFromFullSegmentMethod(y.method);if(!e.isSync())return this.asyncResult=!0,this.decryptionPromise=e.webCryptoDecrypt(s,y.key.buffer,y.iv.buffer,t).then(e=>{const t=this.push(e,null,n);return this.decryptionPromise=null,t}),this.decryptionPromise;{let r=e.softwareDecrypt(s,y.key.buffer,y.iv.buffer,t);if(n.part>-1){const t=e.flush();r=t?t.buffer:t}if(!r)return i.executeEnd=now(),emptyResult(n);s=new Uint8Array(r)}}const _=this.needsProbing(c,u);if(_){const e=this.configureTransmuxer(s);if(e)return this.logger.warn(`[transmuxer] ${e.message}`),this.observer.emit(Events$1.ERROR,Events$1.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),i.executeEnd=now(),emptyResult(n)}(c||u||p||_)&&this.resetInitSegment(v,m,f,x,t),(c||p||_)&&this.resetInitialTimestamp(g),l||this.resetContiguity();const E=this.transmux(s,y,h,d,n);this.asyncResult=isPromise(E);const b=this.currentTransmuxState;return b.contiguous=!0,b.discontinuity=!1,b.trackSwitch=!1,i.executeEnd=now(),E}flush(e){const t=e.transmuxing;t.executeStart=now();const{decrypter:n,currentTransmuxState:r,decryptionPromise:i}=this;if(i)return this.asyncResult=!0,i.then(()=>this.flush(e));const s=[],{timeOffset:a}=r;if(n){const t=n.flush();t&&s.push(this.push(t.buffer,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l){t.executeEnd=now();const n=[emptyResult(e)];return this.asyncResult?Promise.resolve(n):n}const c=o.flush(a);return isPromise(c)?(this.asyncResult=!0,c.then(t=>(this.flushRemux(s,t,e),s))):(this.flushRemux(s,c,e),this.asyncResult?Promise.resolve(s):s)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:i,id3Track:s,textTrack:a}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===PlaylistLevelType.MAIN?"level":"track"} ${n.level}`);const c=this.remuxer.remux(r,i,s,a,l,o,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=now()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,i){const{demuxer:s,remuxer:a}=this;s&&a&&(s.resetInitSegment(e,t,n,r),a.resetInitSegment(e,t,n,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,i){let s;return s=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,i):this.transmuxUnencrypted(e,n,r,i),s}transmuxUnencrypted(e,t,n,r){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,s,a,o,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,i){return this.demuxer.demuxSampleAes(e,t,n).then(e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,r,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r}=this;let i;for(let u=0,d=muxConfig.length;u<d;u++){var s;if(null!=(s=muxConfig[u].demux)&&s.probe(e,this.logger)){i=muxConfig[u];break}}if(!i)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,o=this.remuxer,l=i.remux,c=i.demux;o&&o instanceof l||(this.remuxer=new l(n,t,r,this.logger)),a&&a instanceof c||(this.demuxer=new c(n,t,r,this.logger),this.probe=c.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Decrypter(this.config)),e}}function getEncryptionType(e,t){let n=null;return e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(n=t),n}const emptyResult=e=>({remuxResult:{},chunkMeta:e});function isPromise(e){return"then"in e&&e.then instanceof Function}class TransmuxConfig{constructor(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i||null}}class TransmuxState{constructor(e,t,n,r,i,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=s}}let transmuxerInstanceCount=0;class TransmuxerInterface{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=transmuxerInstanceCount++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=e=>{const t=e.data,n=this.hls;if(n&&null!=t&&t.event&&t.instanceNo===this.instanceNo)switch(t.event){case"init":{var r;const e=null==(r=this.workerContext)?void 0:r.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":n.logger[t.data.logType]&&n.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.part=this.part,t.data.id=this.id,n.trigger(t.event,t.data)}},this.onWorkerError=e=>{if(!this.hls)return;const t=new Error(`${e.message}  (${e.filename}:${e.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(Events$1.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})};const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const s=(e,t)=>{(t=t||{}).frag=this.frag||void 0,e===Events$1.ERROR&&(t.parent=this.id,t.part=this.part,this.error=t.error),this.hls.trigger(e,t)};this.observer=new EventEmitter,this.observer.on(Events$1.FRAG_DECRYPTED,s),this.observer.on(Events$1.ERROR,s);const a=getM2TSSupportedAudioTypes(i.preferManagedMediaSource);if(this.useWorker&&"undefined"!=typeof Worker){const n=this.hls.logger;if(i.workerPath||hasUMDWorker()){try{i.workerPath?(n.log(`loading Web Worker ${i.workerPath} for "${t}"`),this.workerContext=loadWorker(i.workerPath)):(n.log(`injecting Web Worker for "${t}"`),this.workerContext=injectWorker());const{worker:e}=this.workerContext;e.addEventListener("message",this.onWorkerMessage),e.addEventListener("error",this.onWorkerError),e.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:a,id:t,config:stringify(i)})}catch(err){n.warn(`Error setting up "${t}" Web Worker, fallback to inline`,err),this.terminateWorker(),this.error=null,this.transmuxer=new Transmuxer(this.observer,a,i,"",t,e.logger)}return}}this.transmuxer=new Transmuxer(this.observer,a,i,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=transmuxerInstanceCount++;const t=this.hls.config,n=getM2TSSupportedAudioTypes(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:stringify(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),removeWorkerFromStore(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,r,i,s,a,o,l,c){var u,d;l.transmuxing.start=self.performance.now();const{instanceNo:h,transmuxer:p}=this,m=s?s.start:i.start,f=i.decryptdata,g=this.frag,x=!(g&&i.cc===g.cc),v=!(g&&l.level===g.level),y=g?l.sn-g.sn:-1,_=this.part?l.part-this.part.index:-1,E=0===y&&l.id>1&&l.id===(null==g?void 0:g.stats.chunkCount),b=!v&&(1===y||0===y&&(1===_||E&&_<=0)),C=self.performance.now();(v||y||0===i.stats.parsing.start)&&(i.stats.parsing.start=C),!s||!_&&b||(s.stats.parsing.start=C);const S=!(g&&(null==(u=i.initSegment)?void 0:u.url)===(null==(d=g.initSegment)?void 0:d.url)),T=new TransmuxState(x,b,o,v,m,S);if(!b||x||S){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${i.type} sn: ${l.sn}${l.part>-1?" part: "+l.part:""} ${this.id===PlaylistLevelType.MAIN?"level":"track"}: ${l.level} id: ${l.id}\n        discontinuity: ${x}\n        trackSwitch: ${v}\n        contiguous: ${b}\n        accurateTimeOffset: ${o}\n        timeOffset: ${m}\n        initSegmentChange: ${S}`);const e=new TransmuxConfig(n,r,t,a,c);this.configureTransmuxer(e)}if(this.frag=i,this.part=s,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:f,chunkMeta:l,state:T},e instanceof ArrayBuffer?[e]:[]);else if(p){const t=p.push(e,f,l,T);isPromise(t)?t.then(e=>{this.handleTransmuxComplete(e)}).catch(e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}):this.handleTransmuxComplete(t)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const t=n.flush(e);isPromise(t)?t.then(t=>{this.handleFlushResult(t,e)}).catch(t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}):this.handleFlushResult(t,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(Events$1.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(e=>{this.handleTransmuxComplete(e)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const TICK_INTERVAL$3=100;class AudioStreamController extends BaseStreamController{constructor(e,t,n){super(e,t,n,"audio-stream-controller",PlaylistLevelType.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Events$1.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Events$1.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(Events$1.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Events$1.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Events$1.BUFFER_RESET,this.onBufferReset,this),e.on(Events$1.BUFFER_CREATED,this.onBufferCreated,this),e.on(Events$1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Events$1.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Events$1.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Events$1.FRAG_LOADING,this.onFragLoading,this),e.on(Events$1.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(Events$1.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Events$1.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(Events$1.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Events$1.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Events$1.BUFFER_RESET,this.onBufferReset,this),e.off(Events$1.BUFFER_CREATED,this.onBufferCreated,this),e.off(Events$1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Events$1.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Events$1.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Events$1.FRAG_LOADING,this.onFragLoading,this),e.off(Events$1.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:i,trackId:s}){if(n===PlaylistLevelType.MAIN){const e=t.cc,n=this.fragCurrent;if(this.initPTS[e]={baseTime:r,timescale:i,trackId:s},this.log(`InitPTS for cc: ${e} found from main: ${r/i} (${r}/${i}) trackId: ${s}`),this.mainAnchor=t,this.state===State.WAITING_INIT_PTS){const n=this.waitingData;(!n&&!this.loadingParts||n&&n.frag.cc!==e)&&this.syncWithAnchor(t,null==n?void 0:n.frag)}else!this.hls.hasEnoughToStart&&n&&n.cc!==e?(n.abortRequests(),this.syncWithAnchor(t,n)):this.state===State.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const r=(null==(n=this.mainFragLoading)?void 0:n.frag)||null;if(t&&(null==r?void 0:r.cc)===t.cc)return;const i=(r||e).cc,s=findNearestWithCC(this.getLevelDetails(),i,this.getLoadPosition());s&&(this.log(`Syncing with main frag at ${s.start} cc ${s.cc}`),this.startFragRequested=!1,this.nextLoadPosition=s.start,this.resetLoadingState(),this.state===State.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels)return this.startPosition=e,void(this.state=State.STOPPED);const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(TICK_INTERVAL$3),n>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=State.IDLE):this.state=State.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case State.IDLE:this.doTickIdle();break;case State.WAITING_TRACK:{const{levels:e,trackId:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(r))break;this.state=State.WAITING_INIT_PTS}break}case State.FRAG_LOADING_WAITING_RETRY:{var e;const t=performance.now(),n=this.retryDate;if(!n||t>=n||null!=(e=this.media)&&e.seeking){const{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=State.IDLE}break}case State.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:r,complete:i}=e,s=this.mainAnchor;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.state=State.FRAG_LOADING;const e={frag:t,part:n,payload:r.flush().buffer,networkDetails:null};this._handleFragmentLoadProgress(e),i&&super._handleFragmentLoadComplete(e)}else s&&s.cc!==e.frag.cc&&this.syncWithAnchor(s,e.frag)}else this.state=State.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:r,trackId:i}=this,s=t.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!s.startFragPrefetch)||null==n||!n[i])return;const a=n[i],o=a.details;if(!o||this.waitForLive(a)||this.waitForCdnTuneIn(o))return this.state=State.WAITING_TRACK,void(this.startFragRequested=!1);const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,ElementaryStreamTypes.AUDIO,PlaylistLevelType.AUDIO));const c=this.getFwdBufferInfo(l,PlaylistLevelType.AUDIO);if(null===c)return;if(!this.switchingTrack&&this._streamEnded(c,o))return t.trigger(Events$1.BUFFER_EOS,{type:"audio"}),void(this.state=State.ENDED);const u=c.len,d=t.maxBufferLength,h=o.fragments,p=h[0].start,m=this.getLoadPosition(),f=this.flushing?m:c.end;if(this.switchingTrack&&r){const e=m;o.PTSKnown&&e<p&&(c.end>p||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=p+.05)}if(u>=d&&!this.switchingTrack&&f<h[h.length-1].start)return;let g=this.getNextFragment(f,o);if(g&&this.isLoopLoading(g,f)&&(g=this.getNextFragmentLoopLoading(g,o,c,PlaylistLevelType.MAIN,d)),!g)return void(this.bufferFlushed=!0);let x=(null==(e=this.mainFragLoading)?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&x&&isMediaFragment(g)&&!g.endList&&(!o.live||!this.loadingParts&&f<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(x)===FragmentState.OK&&(this.mainFragLoading=x=null),x&&isMediaFragment(x))){if(g.start>x.end){const e=this.fragmentTracker.getFragAtPos(f,PlaylistLevelType.MAIN);e&&e.end>x.end&&(x=e,this.mainFragLoading={frag:e,targetBufferTime:null})}if(g.start>x.end)return}this.loadFragment(g,a,f)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(e=>new Level(e))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==State.STOPPED&&(this.setInterval(TICK_INTERVAL$3),this.state=State.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(Events$1.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:r}=this,{details:i,id:s,groupId:a,track:o}=t;if(!r)return void this.warn(`Audio tracks reset while loading track ${s} "${o.name}" of "${a}"`);const l=this.mainDetails;if(!l||i.endCC>l.endCC||l.expired)return this.cachedTrackLoadedData=t,void(this.state!==State.STOPPED&&(this.state=State.WAITING_TRACK));this.cachedTrackLoadedData=null,this.log(`Audio track ${s} "${o.name}" of "${a}" loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const c=r[s];let u=0;if(i.live||null!=(n=c.details)&&n.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;var d;if(c.details)u=this.alignPlaylists(i,c.details,null==(d=this.levelLastLoaded)?void 0:d.details);i.alignedSliding||(alignDiscontinuities(i,l),i.alignedSliding||alignMediaPlaylistByPDT(i,l),u=i.fragmentStart)}c.details=i,this.levelLastLoaded=c,this.startFragRequested||this.setStartPosition(l,u),this.hls.trigger(Events$1.AUDIO_TRACK_UPDATED,{details:i,id:s,groupId:t.groupId}),this.state!==State.WAITING_TRACK||this.waitForCdnTuneIn(i)||(this.state=State.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:i}=e,{config:s,trackId:a,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const l=o[a];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);const u=s.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let d=this.transmuxer;d||(d=this.transmuxer=new TransmuxerInterface(this.hls,PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],p=null==(t=n.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=r?r.index:-1,s=-1!==t,a=new ChunkMetadata(n.level,n.sn,n.stats.chunkCount,i.byteLength,t,s);d.push(i,p,u,"",n,r,c.totalduration,e,a,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:e}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new ChunkCache,complete:!1};e.push(new Uint8Array(i)),this.state!==State.STOPPED&&(this.state=State.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===PlaylistLevelType.MAIN&&isMediaFragment(t.frag)&&(this.mainFragLoading=t,this.state===State.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type===PlaylistLevelType.AUDIO)if(this.fragContextChanged(n))this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if(isMediaFragment(n)){this.fragPrevious=n;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(Events$1.AUDIO_TRACK_SWITCHED,_objectSpread2$1({},e)))}this.fragBufferedComplete(n,r),this.media&&this.tick()}else this.audioOnly||n.type!==PlaylistLevelType.MAIN||n.elementaryStreams.video||n.elementaryStreams.audiovideo||(this.audioOnly=!0,this.mainFragLoading=null)}onError(e,t){var n;if(t.fatal)this.state=State.ERROR;else switch(t.details){case ErrorDetails.FRAG_GAP:case ErrorDetails.FRAG_PARSING_ERROR:case ErrorDetails.FRAG_DECRYPT_ERROR:case ErrorDetails.FRAG_LOAD_ERROR:case ErrorDetails.FRAG_LOAD_TIMEOUT:case ErrorDetails.KEY_LOAD_ERROR:case ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(PlaylistLevelType.AUDIO,t);break;case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case ErrorDetails.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==State.WAITING_TRACK||(null==(n=t.context)?void 0:n.type)!==PlaylistContextType.AUDIO_TRACK||(this.state=State.IDLE);break;case ErrorDetails.BUFFER_ADD_CODEC_ERROR:case ErrorDetails.BUFFER_APPEND_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case ErrorDetails.BUFFER_FULL_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case ErrorDetails.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,{type:t}){t!==ElementaryStreamTypes.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==ElementaryStreamTypes.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===State.ENDED&&(this.state=State.IDLE);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,t,PlaylistLevelType.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:i,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:c}=a,{details:u}=c,{audio:d,text:h,id3:p,initSegment:m}=i;if(!this.fragContextChanged(o)&&u){if(this.state=State.PARSING,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=m&&m.tracks){const e=o.initSegment||o;if(this.unhandledEncryptionError(m,o))return;this._bufferInitSegment(c,m.tracks,e,s),r.trigger(Events$1.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:m.tracks})}if(d){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=d;l&&(l.elementaryStreams[ElementaryStreamTypes.AUDIO]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),o.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO,e,t,n,r),this.bufferFragmentData(d,o,l,s)}if(null!=p&&null!=(t=p.samples)&&t.length){const e=_extends$1({id:n,frag:o,details:u},p);r.trigger(Events$1.FRAG_PARSING_METADATA,e)}if(h){const e=_extends$1({id:n,frag:o,details:u},h);r.trigger(Events$1.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,n,r){if(this.state!==State.PARSING)return;if(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio)return;const i=t.audio;i.id=PlaylistLevelType.AUDIO;const s=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${s}/${i.codec}]`),s&&1===s.split(",").length&&(i.levelCodec=s),this.hls.trigger(Events$1.BUFFER_CODECS,t);const a=i.initSegment;if(null!=a&&a.byteLength){const e={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:a};this.hls.trigger(Events$1.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);var i;if(this.switchingTrack||r===FragmentState.NOT_LOADED||r===FragmentState.PARTIAL)if(isMediaFragment(e))if(null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=State.WAITING_INIT_PTS;const n=this.mainDetails;n&&n.fragmentStart!==t.details.fragmentStart&&alignMediaPlaylistByPDT(t.details,n)}else super.loadFragment(e,t,n);else this._loadInitSegment(e,t);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:r,characteristics:i,audioCodec:s,channels:a}=this.bufferedTrack;matchesOption({name:t,lang:n,assocLang:r,characteristics:i,audioCodec:s,channels:a},e,audioMatchPredicate)||(useAlternateAudio(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(Events$1.AUDIO_TRACK_SWITCHED,_objectSpread2$1({},e))}}class BasePlaylistController extends Logger{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const r=null==t?void 0:t.renditionReports;if(r){let s=-1;for(let n=0;n<r.length;n++){const a=r[n];let o;try{o=new self.URL(a.URI,t.url).href}catch(i){this.warn(`Could not construct new URL for Rendition Report: ${i}`),o=a.URI||""}if(o===e){s=n;break}o===e.substring(0,o.length)&&(s=n)}if(-1!==s){const e=r[s],i=parseInt(e["LAST-MSN"])||t.lastPartSn;let a=parseInt(e["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);a>=0&&e>t.partTarget&&(a+=1)}const o=n&&getSkipValue(n);return new HlsUrlParameters(i,a>=0?a:void 0,o)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:r,stats:i}=t,s=self.performance.now(),a=i.loading.first?Math.max(0,s-i.loading.first):0;r.advancedDateTime=Date.now()-a;const o=this.hls.config.timelineOffset;if(o!==r.appliedTimelineOffset){const e=Math.max(o||0,0);r.appliedTimelineOffset=e,r.fragments.forEach(t=>{t.setStart(t.playlistOffset+e)})}if(r.live||null!=n&&n.live){const o="levelInfo"in t?t.levelInfo:t.track;if(r.reloaded(n),n&&r.fragments.length>0){mergeDetails(n,r,this);const e=r.playlistParsingError;if(e){this.warn(e);const n=this.hls;if(!n.config.ignorePlaylistParsingErrors){var l;const{networkDetails:s}=t;return void n.trigger(Events$1.ERROR,{type:ErrorTypes.NETWORK_ERROR,details:ErrorDetails.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:e,reason:e.message,level:t.level||void 0,parent:null==(l=r.fragments[0])?void 0:l.type,networkDetails:s,stats:i})}r.playlistParsingError=null}}-1===r.requestScheduled&&(r.requestScheduled=i.loading.start);const c=this.hls.mainForwardBufferInfo,u=c?c.end-c.len:0,d=computeReloadInterval(r,1e3*(r.edge-u));if(r.requestScheduled+d<s?r.requestScheduled=s:r.requestScheduled+=d,this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),!this.canLoad||!r.live)return;let h,p,m;if(r.canBlockReload&&r.endSN&&r.advanced){const e=this.hls.config.lowLatencyMode,i=r.lastPartSn,a=r.endSN,l=r.lastPartIndex,c=i===a;-1!==l?c?(p=a+1,m=e?0:l):(p=i,m=e?l+1:r.maxPartIndex):p=a+1;const u=r.age,d=u+r.ageHeader;let f=Math.min(d-r.partTarget,1.5*r.targetduration);if(f>0){if(d>3*r.targetduration)this.log(`Playlist last advanced ${u.toFixed(2)}s ago. Omitting segment and part directives.`),p=void 0,m=void 0;else if(null!=n&&n.tuneInGoal&&d-r.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${f} with playlist age: ${r.age}`),f=0;else{const e=Math.floor(f/r.targetduration);if(p+=e,void 0!==m){m+=Math.round(f%r.targetduration/r.partTarget)}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${u.toFixed(2)}s goal: ${f} skip sn ${e} to part ${m}`)}r.tuneInGoal=f}if(h=this.getDeliveryDirectives(r,t.deliveryDirectives,p,m),e||!c)return r.requestScheduled=s,void this.loadingPlaylist(o,h)}else(r.canBlockReload||r.canSkipUntil)&&(h=this.getDeliveryDirectives(r,t.deliveryDirectives,p,m));h&&void 0!==p&&r.canBlockReload&&(r.requestScheduled=i.loading.first+Math.max(d-2*a,d/2)),this.scheduleLoading(o,h,r)}else this.clearTimer()}scheduleLoading(e,t,n){const r=n||e.details;if(!r)return void this.loadingPlaylist(e,t);const i=self.performance.now(),s=r.requestScheduled;if(i>=s)return void this.loadingPlaylist(e,t);const a=s-i;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(a)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),a)}getDeliveryDirectives(e,t,n,r){let i=getSkipValue(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,i=HlsSkip.No),new HlsUrlParameters(n,r,i)}checkRetry(e){const t=e.details,n=isTimeoutError(e),r=e.errorAction,{action:i,retryCount:s=0,retryConfig:a}=r||{},o=!!r&&!!a&&(i===NetworkErrorAction.RetryRequest||!r.resolved&&i===NetworkErrorAction.SendAlternateToPenaltyBox);if(o){var l;if(s>=a.maxNumRetry)return!1;if(n&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=getRetryDelay(a,s);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),e),this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,r.resolved=!0}return o}}function subtitleOptionsIdentical(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!mediaAttributesIdentical(e[n].attrs,t[n].attrs))return!1;return!0}function mediaAttributesIdentical(e,t,n){const r=e["STABLE-RENDITION-ID"];return r&&!n?r===t["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(n=>e[n]!==t[n])}function subtitleTrackMatchesTextTrack(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class AudioTrackController extends BasePlaylistController{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events$1.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Events$1.LEVEL_LOADING,this.onLevelLoading,this),e.on(Events$1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Events$1.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Events$1.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events$1.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Events$1.LEVEL_LOADING,this.onLevelLoading,this),e.off(Events$1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Events$1.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Events$1.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==r)return void this.warn(`Audio track with id:${n} and group:${r} not found in active group ${null==s?void 0:s.groupId}`);const a=s.details;s.details=t.details,this.log(`Audio track ${n} "${s.name}" lang:${s.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some(e=>-1===(null==r?void 0:r.indexOf(e)))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!n||-1!==n.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!i&&t){const n=findMatchingOption(t,e,audioMatchPredicate);if(n>-1)i=e[n];else{const e=findMatchingOption(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const a={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==n?void 0:n.join(",")}`),this.hls.trigger(Events$1.AUDIO_TRACKS_UPDATED,a);const o=this.trackId;if(-1!==r&&-1===o)this.setAudioTrack(r);else if(e.length&&-1===o){var s;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(s=this.groupIds)?void 0:s.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(Events$1.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}}onError(e,t){!t.fatal&&t.context&&(t.context.type!==PlaylistContextType.AUDIO_TRACK||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&matchesOption(e,r,audioMatchPredicate))return r;const i=findMatchingOption(e,this.tracksInGroup,audioMatchPredicate);if(i>-1){const e=this.tracksInGroup[i];return this.setAudioTrack(i),e}if(r){let r=t.loadLevel;-1===r&&(r=t.firstAutoLevel);const i=findClosestLevelWithAudioGroup(e,t.levels,n,r,audioMatchPredicate);if(-1===i)return null;t.nextLoadLevel=i}if(e.channels||e.audioCodec){const t=findMatchingOption(e,n);if(t>-1)return n[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e],i=r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;if(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(Events$1.AUDIO_TRACK_SWITCHING,_objectSpread2$1({},r)),i)return;const s=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(s)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||matchesOption(e,r,audioMatchPredicate)))return n}if(e){const{name:n,lang:r,assocLang:i,characteristics:s,audioCodec:a,channels:o}=e;for(let e=0;e<t.length;e++){if(matchesOption({name:n,lang:r,assocLang:i,characteristics:s,audioCodec:a,channels:o},t[e],audioMatchPredicate))return e}for(let l=0;l<t.length;l++){const n=t[l];if(mediaAttributesIdentical(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<t.length;l++){const n=t[l];if(mediaAttributesIdentical(e.attrs,n.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&useAlternateAudio(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),s=e.details,a=null==s?void 0:s.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${r}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${a&&s.live?" age "+a.toFixed(1)+(s.type&&" "+s.type||""):""} ${i}`),this.hls.trigger(Events$1.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}}class BufferOperationQueue{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(null===this.queues||null===this.tracks)return;const r=this.queues[t];r.push(e),1!==r.length||n||this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){null!==this.queues&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=null==(t=e[0])?void 0:t.label;"async-blocker"!==n&&"async-blocker-prepend"!==n||(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(null===this.queues)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(null===this.queues||null===this.tracks)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(r){var n;if(i.onError(r),null===this.queues||null===this.tracks)return;const t=null==(n=this.tracks[e])?void 0:n.buffer;null!=t&&t.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){null!==this.queues&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return(null==(t=this.queues)?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return null===e||null===t?"<destroyed>":`\n${this.list("video")}\n${this.list("audio")}\n${this.list("audiovideo")}}`}list(e){var t,n;return null!=(t=this.queues)&&t[e]||null!=(n=this.tracks)&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=null==(t=this.tracks)?void 0:t[e],r=null==n?void 0:n.buffer;return r?`SourceBuffer${r.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return(null==(t=this.queues)?void 0:t[e].map(e=>e.label).join(", "))||""}}const VIDEO_CODEC_PROFILE_REPLACE=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,TRACK_REMOVED_ERROR_NAME="HlsJsTrackRemovedError";class HlsJsTrackRemovedError extends Error{constructor(e){super(e),this.name=TRACK_REMOVED_ERROR_NAME}}class BufferController extends Logger{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=e=>{var t;this.hls&&"open"===(null==(t=this.mediaSource)?void 0:t.readyState)&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=e=>{const{media:t,mediaSource:n}=this;e&&this.log("Media source opened"),t&&n&&(n.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(Events$1.MEDIA_ATTACHED,{media:t,mediaSource:n}),null!==this.mediaSource&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&this.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=isManagedMediaSource(getMediaSource(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(Events$1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events$1.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Events$1.BUFFER_RESET,this.onBufferReset,this),e.on(Events$1.BUFFER_APPENDING,this.onBufferAppending,this),e.on(Events$1.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Events$1.BUFFER_EOS,this.onBufferEos,this),e.on(Events$1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Events$1.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Events$1.FRAG_PARSED,this.onFragParsed,this),e.on(Events$1.FRAG_CHANGED,this.onFragChanged,this),e.on(Events$1.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Events$1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events$1.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Events$1.BUFFER_RESET,this.onBufferReset,this),e.off(Events$1.BUFFER_APPENDING,this.onBufferAppending,this),e.off(Events$1.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Events$1.BUFFER_EOS,this.onBufferEos,this),e.off(Events$1.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Events$1.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Events$1.FRAG_PARSED,this.onFragParsed,this),e.off(Events$1.FRAG_CHANGED,this.onFragChanged,this),e.off(Events$1.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const e=this.isUpdating();e||this.operationQueue.removeBlockers();const t=this.isQueued();(e||t)&&this.warn(`Transfering MediaSource with${t?" operations in queue":""}${e?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===t?_extends$1(n,r.tracks):this.sourceBuffers.forEach(e=>{const[t]=e;t&&(n[t]=_extends$1({},this.tracks[t]),this.removeBuffer(t)),e[0]=e[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){this.sourceBuffers=[[null,null],[null,null]],this.tracks={},this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log(`${r} bufferCodec event(s) expected.`),null!=(n=this.transferData)&&n.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const r=getMediaSource(this.appendSource);if(r){const e=!!t.mediaSource;(e||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const s=this.mediaSource=t.mediaSource||new r;if(this.assignMediaSource(s),e)this._objectUrl=n.src,this.attachTransferred();else{const e=this._objectUrl=self.URL.createObjectURL(s);if(this.appendSource)try{n.removeAttribute("src");const t=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||t&&s instanceof t,removeSourceChildren(n),addSource(n,e),n.load()}catch(i){n.src=e}else n.src=e}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${(null==(t=this.transferData)?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${null==(n=e.constructor)?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,r=t.tracks,i=r?Object.keys(r):null,s=i?i.length:0,a=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(r&&i&&s){if(!this.tracksReady)return this.hls.config.startFragPrefetch=!0,void this.log("attachTransferred: waiting for SourceBuffer track info");if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})\nrequired tracks: ${stringify(n,(e,t)=>"initSegment"===e?void 0:t)};\ntransfer tracks: ${stringify(r,(e,t)=>"initSegment"===e?void 0:t)}}`),!isCompatibleTrackChange(r,n)){t.mediaSource=null,t.tracks=void 0;const i=e.currentTime,s=this.details,a=Math.max(i,(null==s?void 0:s.fragments[0].start)||0);return a-i>1?void this.log(`attachTransferred: waiting for playback to reach new tracks start time ${i} -> ${a}`):(this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(r)}"->"${Object.keys(n)}") start time: ${a} currentTime: ${i}`),this.onMediaDetaching(Events$1.MEDIA_DETACHING,{}),this.onMediaAttaching(Events$1.MEDIA_ATTACHING,t),void(e.currentTime=a))}this.transferData=void 0,i.forEach(e=>{const t=e,n=r[t];if(n){const e=n.buffer;if(e){const r=this.fragmentTracker,i=n.id;if(r.hasFragments(i)||r.hasParts(i)){const n=BufferHelper.getBuffered(e);r.detectEvictedFragments(t,n,i,null,!0)}const s=sourceBufferNameToIndex(t),a=[t,e];this.sourceBuffers[s]=a,e.updating&&this.operationQueue&&this.operationQueue.prependBlocker(t),this.trackSourceBuffer(t,n)}}}),a(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),a()}get mediaSourceOpenOrEnded(){var e;const t=null==(e=this.mediaSource)?void 0:e.readyState;return"open"===t||"ended"===t}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:i,_objectUrl:s}=this;if(i){if(this.log("media source "+(n?"transferring":"detaching")),n)this.sourceBuffers.forEach(([e])=>{e&&this.removeBuffer(e)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const e="open"===i.readyState;try{const t=i.sourceBuffers;for(let n=t.length;n--;)e&&t[n].abort(),i.removeSourceBuffer(t[n]);e&&i.endOfStream()}catch(err){this.warn(`onMediaDetaching: ${err.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}i.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("sourceended",this._onMediaSourceEnded),i.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(i.removeEventListener("startstreaming",this._onStartStreaming),i.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),n||(s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(r.removeAttribute("src"),this.appendSource&&removeSourceChildren(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(Events$1.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=null==(t=this.tracks[e])?void 0:t.buffer;if(this.removeBuffer(e),n)try{var r;null!=(r=this.mediaSource)&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(err){this.warn(`onBufferReset ${e}`,err)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[sourceBufferNameToIndex(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new BufferOperationQueue(this.tracks)}onBufferCodecs(e,t){const n=this.tracks,r=Object.keys(t);this.log(`BUFFER_CODECS: "${r}" (current SB count ${this.sourceBufferCount})`);const i="audiovideo"in t&&(n.audio||n.video)||n.audiovideo&&("audio"in t||"video"in t),s=!i&&this.sourceBufferCount&&this.media&&r.some(e=>!n[e]);i||s?this.warn(`Unsupported transition between "${Object.keys(n)}" and "${r}" SourceBuffers`):(r.forEach(e=>{var r,i;const s=t[e],{id:a,codec:o,levelCodec:l,container:c,metadata:u,supplemental:d}=s;let h=n[e];const p=null==(r=this.transferData)||null==(r=r.tracks)?void 0:r[e],m=null!=p&&p.buffer?p:h,f=(null==m?void 0:m.pendingCodec)||(null==m?void 0:m.codec),g=null==m?void 0:m.levelCodec;h||(h=n[e]={buffer:void 0,listeners:[],codec:o,supplemental:d,container:c,levelCodec:l,metadata:u,id:a});const x=pickMostCompleteCodecName(f,g),v=null==x?void 0:x.replace(VIDEO_CODEC_PROFILE_REPLACE,"$1");let y=pickMostCompleteCodecName(o,l);const _=null==(i=y)?void 0:i.replace(VIDEO_CODEC_PROFILE_REPLACE,"$1");y&&x&&v!==_&&("audio"===e.slice(0,5)&&(y=getCodecCompatibleName(y,this.appendSource)),this.log(`switching codec ${f} to ${y}`),y!==(h.pendingCodec||h.codec)&&(h.pendingCodec=y),h.container=c,this.appendChangeType(e,c,y))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),this.sourceBufferCount||this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const r=`${t};codecs=${n}`,i={label:`change-type=${r}`,execute:()=>{const i=this.tracks[e];if(i){const s=i.buffer;null!=s&&s.changeType&&(this.log(`changing ${e} sourceBuffer type to ${r}`),s.changeType(r),i.codec=n,i.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};this.append(i,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,r=n+.05*e.duration;if(!0===(null==(t=this.fragmentTracker.getAppendedFrag(n,PlaylistLevelType.MAIN))?void 0:t.gap))return;const i={label:"block-audio",execute:()=>{var e;const t=this.tracks.video;(this.lastVideoAppendEnd>r||null!=t&&t.buffer&&BufferHelper.isBuffered(t.buffer,r)||!0===(null==(e=this.fragmentTracker.getAppendedFrag(r,PlaylistLevelType.MAIN))?void 0:e.gap))&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:e=>{this.warn("Error executing block-audio operation",e)}};this.blockedAudioAppend={op:i,frag:e},this.append(i,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:r,type:i,parent:s,frag:a,part:o,chunkMeta:l,offset:c}=t,u=l.buffering[i],{sn:d,cc:h}=a,p=self.performance.now();u.start=p;const m=a.stats.buffering,f=o?o.stats.buffering:null;0===m.start&&(m.start=p),f&&0===f.start&&(f.start=p);const g=n.audio;let x=!1;"audio"===i&&"audio/mpeg"===(null==g?void 0:g.container)&&(x=!this.lastMpegAudioChunk||1===l.id||this.lastMpegAudioChunk.sn!==l.sn,this.lastMpegAudioChunk=l);const v=n.video,y=null==v?void 0:v.buffer;if(y&&"initSegment"!==d){const e=o||a,t=this.blockedAudioAppend;if("audio"!==i||"main"===s||this.blockedAudioAppend||v.ending||v.ended){if("video"===i){const n=e.end;if(t){const e=t.frag.start;(n>e||n<this.lastVideoAppendEnd||BufferHelper.isBuffered(y,e))&&this.unblockAudio()}this.lastVideoAppendEnd=n}}else{const t=e.start+.05*e.duration,n=y.buffered,r=this.currentOp("video");n.length||r?!r&&!BufferHelper.isBuffered(y,t)&&this.lastVideoAppendEnd<t&&this.blockAudio(e):this.blockAudio(e)}}const _=(o||a).start,E={label:`append-${i}`,execute:()=>{var e;u.executeStart=self.performance.now();const t=null==(e=this.tracks[i])?void 0:e.buffer;t&&(x?this.updateTimestampOffset(t,_,.1,i,d,h):void 0!==c&&isFiniteNumber(c)&&this.updateTimestampOffset(t,c,1e-6,i,d,h)),this.appendExecutor(r,i)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();u.executeEnd=u.end=e,0===m.first&&(m.first=e),f&&0===f.first&&(f.first=e);const t={};this.sourceBuffers.forEach(([e,n])=>{e&&(t[e]=BufferHelper.getBuffered(n))}),this.appendErrors[i]=0,"audio"===i||"video"===i?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Events$1.BUFFER_APPENDED,{type:i,frag:a,part:o,chunkMeta:l,parent:a.type,timeRanges:t})},onError:e=>{var t;const n={type:ErrorTypes.MEDIA_ERROR,parent:a.type,details:ErrorDetails.BUFFER_APPEND_ERROR,sourceBufferName:i,frag:a,part:o,chunkMeta:l,error:e,err:e,fatal:!1},r=null==(t=this.media)?void 0:t.error;if(e.code===DOMException.QUOTA_EXCEEDED_ERR||"QuotaExceededError"==e.name||"quota"in e)n.details=ErrorDetails.BUFFER_FULL_ERROR;else if(e.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!r)n.errorAction=createDoNothingErrorAction(!0);else if(e.name===TRACK_REMOVED_ERROR_NAME&&0===this.sourceBufferCount)n.errorAction=createDoNothingErrorAction(!0);else{const e=++this.appendErrors[i];this.warn(`Failed ${e}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${i}" sourceBuffer (${r||"no media error"})`),(e>=this.hls.config.appendErrorMaxRetry||r)&&(n.fatal=!0)}this.hls.trigger(Events$1.ERROR,n)}};this.append(E,i,this.isPending(this.tracks[i]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(Events$1.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,r)}}}onBufferFlushing(e,t){const{type:n,startOffset:r,endOffset:i}=t;n?this.append(this.getFlushOp(n,r,i),n):this.sourceBuffers.forEach(([e])=>{e&&this.append(this.getFlushOp(e,r,i),e)})}onFragParsed(e,t){const{frag:n,part:r}=t,i=[],s=r?r.elementaryStreams:n.elementaryStreams;s[ElementaryStreamTypes.AUDIOVIDEO]?i.push("audiovideo"):(s[ElementaryStreamTypes.AUDIO]&&i.push("audio"),s[ElementaryStreamTypes.VIDEO]&&i.push("video"));0===i.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(()=>{const e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);const t=r?r.stats:n.stats;this.hls.trigger(Events$1.FRAG_BUFFERED,{frag:n,part:r,stats:t,id:n.type})},i).catch(e=>{this.warn(`Fragment buffered callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([e])=>{if(e){const n=this.tracks[e];t.type&&t.type!==e||(n.ending=!0,n.ended||(n.ended=!0,this.log(`${e} buffer reached EOS`)))}});const r=!1!==(null==(n=this.overrides)?void 0:n.endOfStream);this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t;return e&&!(null!=(t=this.tracks[e])&&t.ended)})?r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream(),this.hls.trigger(Events$1.BUFFERED_TO_END,void 0)):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})):(this.tracksEnded(),this.hls.trigger(Events$1.BUFFERED_TO_END,void 0)):"video"===t.type&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(null!==e){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===ErrorDetails.BUFFER_APPEND_ERROR&&t.frag){var n;const e=null==(n=t.errorAction)?void 0:n.nextAutoLevel;isFiniteNumber(e)&&e!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||null===t)return;if(!this.sourceBufferCount)return;const r=e.config,i=n.currentTime,s=t.levelTargetDuration,a=t.live&&null!==r.liveBackBufferLength?r.liveBackBufferLength:r.backBufferLength;if(isFiniteNumber(a)&&a>=0){const e=Math.max(a,s),t=Math.floor(i/s)*s-e;this.flushBackBuffer(i,s,t)}const o=r.frontBufferFlushThreshold;if(isFiniteNumber(o)&&o>0){const e=Math.max(r.maxBufferLength,o),t=Math.max(e,s),n=Math.floor(i/s)*s+t;this.flushFrontBuffer(i,s,n)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([e,t])=>{if(t){const i=BufferHelper.getBuffered(t);if(i.length>0&&n>i.start(0)){var r;this.hls.trigger(Events$1.BACK_BUFFER_REACHED,{bufferEnd:n});const t=this.tracks[e];if(null!=(r=this.details)&&r.live)this.hls.trigger(Events$1.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(null!=t&&t.ended)return void this.log(`Cannot flush ${e} back buffer while SourceBuffer is in ended state`);this.hls.trigger(Events$1.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:e})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([t,r])=>{if(r){const i=BufferHelper.getBuffered(r),s=i.length;if(s<2)return;const a=i.start(s-1),o=i.end(s-1);if(n>a||e>=a&&e<=o)return;this.hls.trigger(Events$1.BUFFER_FLUSHING,{startOffset:a,endOffset:1/0,type:t})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||"open"!==(null==n?void 0:n.readyState))return null;const r=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&n.setLiveSeekableRange){const e=Math.max(0,t.fragmentStart);return{duration:1/0,start:e,end:Math.max(e,r)}}return{duration:1/0}}const i=null==(e=this.overrides)?void 0:e.duration;if(i)return isFiniteNumber(i)?{duration:i}:null;const s=this.media.duration;return r>(isFiniteNumber(n.duration)?n.duration:0)&&r>s||!isFiniteNumber(s)?{duration:r}:null}updateMediaSource({duration:e,start:t,end:n}){const r=this.mediaSource;this.media&&r&&"open"===r.readyState&&(r.duration!==e&&(isFiniteNumber(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),r.duration=e),void 0!==t&&void 0!==n&&(this.log(`MediaSource duration is set to ${r.duration}. Setting seekable range to ${t}-${n}.`),r.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${stringify(n)}`),this.tracksReady){var r;const e=null==(r=this.transferData)?void 0:r.tracks;e&&Object.keys(e).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const r=this.tracks[t];e[t]={buffer:n,container:r.container,codec:r.codec,supplemental:r.supplemental,levelCodec:r.levelCodec,id:r.id,metadata:r.metadata}}}),this.hls.trigger(Events$1.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([e])=>{this.executeNext(e)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Events$1.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const a=s,o=e[a];if(this.isPending(o)){const e=this.getTrackCodec(o,a),s=`${o.container};codecs=${e}`;o.codec=e,this.log(`creating sourceBuffer(${s})${this.currentOp(a)?" Queued":""} ${stringify(o)}`);try{const e=n.addSourceBuffer(s),r=sourceBufferNameToIndex(a),i=[a,e];t[r]=i,o.buffer=e}catch(i){var r;return this.error(`error while trying to add sourceBuffer: ${i.message}`),this.shiftAndExecuteNext(a),null==(r=this.operationQueue)||r.removeBlockers(),delete this.tracks[a],void this.hls.trigger(Events$1.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:i,sourceBufferName:a,mimeType:s,parent:o.id})}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let r=e.codec;n&&("video"===t||"audiovideo"===t)&&areCodecsMediaSourceSupported(n,"video")&&(r=replaceVideoCodec(r,n));const i=pickMostCompleteCodecName(r,e.levelCodec);return i?"audio"===t.slice(0,5)?getCodecCompatibleName(i,this.appendSource):i:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const r=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:r,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(e,t)=>{const n=t.removedRanges;null!=n&&n.length&&this.hls.trigger(Events$1.BUFFER_FLUSHED,{type:e})})}get mediaSrc(){var e,t;const n=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==n?void 0:n.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(n=this.mediaSource)?void 0:n.readyState}`);this.error(`${r}`,t),this.hls.trigger(Events$1.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const i=this.currentOp(e);i&&i.onError(r)}updateTimestampOffset(e,t,n,r,i,s){const a=t-e.timestampOffset;Math.abs(a)>=n&&(this.log(`Updating ${r} SourceBuffer timestampOffset to ${t} (sn: ${i} cc: ${s})`),e.timestampOffset=t)}removeExecutor(e,t,n){const{media:r,mediaSource:i}=this,s=this.tracks[e],a=null==s?void 0:s.buffer;if(!r||!i||!a)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void this.shiftAndExecuteNext(e);const o=isFiniteNumber(r.duration)?r.duration:1/0,l=isFiniteNumber(i.duration)?i.duration:1/0,c=Math.max(0,t),u=Math.min(n,o,l);u>c&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${c},${u}] from the ${e} SourceBuffer`),a.remove(c,u)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],r=null==n?void 0:n.buffer;if(!r)throw new HlsJsTrackRemovedError(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(e=>{this.warn(`SourceBuffer blocked callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,r=t.map(e=>this.appendBlocker(e));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(t=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(e=>{var t;const n=null==(t=this.tracks[e])?void 0:t.buffer;n&&!n.updating&&this.shiftAndExecuteNext(e)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const r=this.tracks[e];if(!r)return;const i=r.buffer;if(!i)return;const s=n.bind(this,e);r.listeners.push({event:t,listener:s}),i.addEventListener(t,s)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(e=>{n.removeEventListener(e.event,e.listener)}),t.listeners.length=0)}}function removeSourceChildren(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach(t=>{e.removeChild(t)})}function addSource(e,t){const n=self.document.createElement("source");n.type="video/mp4",n.src=t,e.appendChild(n)}function sourceBufferNameToIndex(e){return"audio"===e?1:0}class CapLevelController{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(Events$1.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(Events$1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Events$1.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Events$1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Events$1.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(Events$1.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(Events$1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Events$1.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Events$1.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Events$1.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&isFiniteNumber(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((t,n)=>this.isLevelAllowed(t)&&n<=e);return this.clientRect=null,CapLevelController.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e2){}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height)}static getMaxLevelByMediaSize(e,t,n){if(null==e||!e.length)return-1;const r=(e,t)=>!t||(e.width!==t.width||e.height!==t.height);let i=e.length-1;const s=Math.max(t,n);for(let a=0;a<e.length;a+=1){const t=e[a];if((t.width>=s||t.height>=s)&&r(t,e[a+1])){i=a;break}}return i}}const CmObjectType={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},CmcdObjectType=CmObjectType,CmStreamingFormat={HLS:"h"},CmcdStreamingFormat=CmStreamingFormat;class SfItem{constructor(e,t){Array.isArray(e)&&(e=e.map(e=>e instanceof SfItem?e:new SfItem(e))),this.value=e,this.params=t}}const DICT="Dict";function format(e){return Array.isArray(e)?JSON.stringify(e):e instanceof Map?"Map{}":e instanceof Set?"Set{}":"object"==typeof e?JSON.stringify(e):String(e)}function throwError(e,t,n,r){return new Error(`failed to ${e} "${format(t)}" as ${n}`,{cause:r})}function serializeError(e,t,n){return throwError("serialize",e,t,n)}class SfToken{constructor(e){this.description=e}}const BARE_ITEM="Bare Item",BOOLEAN="Boolean";function serializeBoolean(e){if("boolean"!=typeof e)throw serializeError(e,BOOLEAN);return e?"?1":"?0"}function encodeBase64(e){return btoa(String.fromCharCode(...e))}const BYTES="Byte Sequence";function serializeByteSequence(e){if(!1===ArrayBuffer.isView(e))throw serializeError(e,BYTES);return`:${encodeBase64(e)}:`}const INTEGER="Integer";function isInvalidInt(e){return e<-999999999999999||999999999999999<e}function serializeInteger(e){if(isInvalidInt(e))throw serializeError(e,INTEGER);return e.toString()}function serializeDate(e){return`@${serializeInteger(e.getTime()/1e3)}`}function roundToEven(e,t){if(e<0)return-roundToEven(-e,t);const n=Math.pow(10,t);if(Math.abs(e*n%1-.5)<Number.EPSILON){const t=Math.floor(e*n);return(t%2==0?t:t+1)/n}return Math.round(e*n)/n}const DECIMAL="Decimal";function serializeDecimal(e){const t=roundToEven(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw serializeError(e,DECIMAL);const n=t.toString();return n.includes(".")?n:`${n}.0`}const STRING="String",STRING_REGEX=/[\x00-\x1f\x7f]+/;function serializeString(e){if(STRING_REGEX.test(e))throw serializeError(e,STRING);return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function symbolToStr(e){return e.description||e.toString().slice(7,-1)}const TOKEN="Token";function serializeToken(e){const t=symbolToStr(e);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw serializeError(t,TOKEN);return t}function serializeBareItem(e){switch(typeof e){case"number":if(!isFiniteNumber(e))throw serializeError(e,BARE_ITEM);return Number.isInteger(e)?serializeInteger(e):serializeDecimal(e);case"string":return serializeString(e);case"symbol":return serializeToken(e);case"boolean":return serializeBoolean(e);case"object":if(e instanceof Date)return serializeDate(e);if(e instanceof Uint8Array)return serializeByteSequence(e);if(e instanceof SfToken)return serializeToken(e);default:throw serializeError(e,BARE_ITEM)}}const KEY="Key";function serializeKey(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw serializeError(e,KEY);return e}function serializeParams(e){return null==e?"":Object.entries(e).map(([e,t])=>!0===t?`;${serializeKey(e)}`:`;${serializeKey(e)}=${serializeBareItem(t)}`).join("")}function serializeItem(e){return e instanceof SfItem?`${serializeBareItem(e.value)}${serializeParams(e.params)}`:serializeBareItem(e)}function serializeInnerList(e){return`(${e.value.map(serializeItem).join(" ")})${serializeParams(e.params)}`}function serializeDict(e,t={whitespace:!0}){if("object"!=typeof e||null==e)throw serializeError(e,DICT);const n=e instanceof Map?e.entries():Object.entries(e),r=(null==t?void 0:t.whitespace)?" ":"";return Array.from(n).map(([e,t])=>{t instanceof SfItem==!1&&(t=new SfItem(t));let n=serializeKey(e);return!0===t.value?n+=serializeParams(t.params):(n+="=",Array.isArray(t.value)?n+=serializeInnerList(t):n+=serializeItem(t)),n}).join(`,${r}`)}function encodeSfDict(e,t){return serializeDict(e,t)}const CMCD_OBJECT="CMCD-Object",CMCD_REQUEST="CMCD-Request",CMCD_SESSION="CMCD-Session",CMCD_STATUS="CMCD-Status",CMCD_HEADER_MAP={br:CMCD_OBJECT,ab:CMCD_OBJECT,d:CMCD_OBJECT,ot:CMCD_OBJECT,tb:CMCD_OBJECT,tpb:CMCD_OBJECT,lb:CMCD_OBJECT,tab:CMCD_OBJECT,lab:CMCD_OBJECT,url:CMCD_OBJECT,pb:CMCD_REQUEST,bl:CMCD_REQUEST,tbl:CMCD_REQUEST,dl:CMCD_REQUEST,ltc:CMCD_REQUEST,mtp:CMCD_REQUEST,nor:CMCD_REQUEST,nrr:CMCD_REQUEST,rc:CMCD_REQUEST,sn:CMCD_REQUEST,sta:CMCD_REQUEST,su:CMCD_REQUEST,ttfb:CMCD_REQUEST,ttfbb:CMCD_REQUEST,ttlb:CMCD_REQUEST,cmsdd:CMCD_REQUEST,cmsds:CMCD_REQUEST,smrt:CMCD_REQUEST,df:CMCD_REQUEST,cs:CMCD_REQUEST,ts:CMCD_REQUEST,cid:CMCD_SESSION,pr:CMCD_SESSION,sf:CMCD_SESSION,sid:CMCD_SESSION,st:CMCD_SESSION,v:CMCD_SESSION,msd:CMCD_SESSION,bs:CMCD_STATUS,bsd:CMCD_STATUS,cdn:CMCD_STATUS,rtp:CMCD_STATUS,bg:CMCD_STATUS,pt:CMCD_STATUS,ec:CMCD_STATUS,e:CMCD_STATUS},CmcdHeaderField={REQUEST:CMCD_REQUEST};function createHeaderMap(e){return Object.keys(e).reduce((t,n)=>{var r;return null===(r=e[n])||void 0===r||r.forEach(e=>t[e]=n),t},{})}function groupCmcdHeaders(e,t){const n={};if(!e)return n;const r=Object.keys(e),i=t?createHeaderMap(t):{};return r.reduce((t,n)=>{var r;const s=CMCD_HEADER_MAP[n]||i[n]||CmcdHeaderField.REQUEST;return(null!==(r=t[s])&&void 0!==r?r:t[s]={})[n]=e[n],t},n)}function isTokenField(e){return["ot","sf","st","e","sta"].includes(e)}function isValid(e){return"number"==typeof e?isFiniteNumber(e):null!=e&&""!==e&&!1!==e}const CMCD_EVENT_MODE="event";function urlToRelativePath(e,t){const n=new URL(e),r=new URL(t);if(n.origin!==r.origin)return e;const i=n.pathname.split("/").slice(1),s=r.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")+n.search+n.hash}const toRounded=e=>Math.round(e),toUrlSafe=(e,t)=>Array.isArray(e)?e.map(e=>toUrlSafe(e,t)):e instanceof SfItem&&"string"==typeof e.value?new SfItem(toUrlSafe(e.value,t),e.params):(t.baseUrl&&(e=urlToRelativePath(e,t.baseUrl)),1===t.version?encodeURIComponent(e):e),toHundred=e=>100*toRounded(e/100),nor=(e,t)=>{let n=e;return t.version>=2&&(e instanceof SfItem&&"string"==typeof e.value?n=new SfItem([e]):"string"==typeof e&&(n=[e])),toUrlSafe(n,t)},CMCD_FORMATTER_MAP={br:toRounded,d:toRounded,bl:toHundred,dl:toHundred,mtp:toHundred,nor:nor,rtp:toHundred,tb:toRounded},CMCD_REQUEST_MODE="request",CMCD_RESPONSE_MODE="response",CMCD_COMMON_KEYS=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],CMCD_EVENT_KEYS=["e"],CUSTOM_KEY_REGEX=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function isCmcdCustomKey(e){return CUSTOM_KEY_REGEX.test(e)}function isCmcdEventKey(e){return CMCD_COMMON_KEYS.includes(e)||CMCD_EVENT_KEYS.includes(e)||isCmcdCustomKey(e)}const CMCD_REQUEST_KEYS=["d","dl","nor","ot","rtp","su"];function isCmcdRequestKey(e){return CMCD_COMMON_KEYS.includes(e)||CMCD_REQUEST_KEYS.includes(e)||isCmcdCustomKey(e)}const CMCD_RESPONSE_KEYS=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function isCmcdResponseKey(e){return CMCD_COMMON_KEYS.includes(e)||CMCD_REQUEST_KEYS.includes(e)||CMCD_RESPONSE_KEYS.includes(e)||isCmcdCustomKey(e)}const CMCD_V1_KEYS=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function isCmcdV1Key(e){return CMCD_V1_KEYS.includes(e)||isCmcdCustomKey(e)}const filterMap={[CMCD_RESPONSE_MODE]:isCmcdResponseKey,[CMCD_EVENT_MODE]:isCmcdEventKey,[CMCD_REQUEST_MODE]:isCmcdRequestKey};function prepareCmcdData(e,t={}){const n={};if(null==e||"object"!=typeof e)return n;const r=t.version||e.v||1,i=t.reportingMode||CMCD_REQUEST_MODE,s=1===r?isCmcdV1Key:filterMap[i];let a=Object.keys(e).filter(s);const o=t.filter;"function"==typeof o&&(a=a.filter(o));const l=i===CMCD_RESPONSE_MODE||i===CMCD_EVENT_MODE;l&&!a.includes("ts")&&a.push("ts"),r>1&&!a.includes("v")&&a.push("v");const c=_extends$1({},CMCD_FORMATTER_MAP,t.formatters),u={version:r,reportingMode:i,baseUrl:t.baseUrl};return a.sort().forEach(t=>{let i=e[t];const s=c[t];if("function"==typeof s&&(i=s(i,u)),"v"===t){if(1===r)return;i=r}"pr"==t&&1===i||(l&&"ts"===t&&!isFiniteNumber(i)&&(i=Date.now()),isValid(i)&&(isTokenField(t)&&"string"==typeof i&&(i=new SfToken(i)),n[t]=i))}),n}function toCmcdHeaders(e,t={}){const n={};if(!e)return n;const r=groupCmcdHeaders(prepareCmcdData(e,t),null==t?void 0:t.customHeaderMap);return Object.entries(r).reduce((e,[t,n])=>{const r=encodeSfDict(n,{whitespace:!1});return r&&(e[t]=r),e},n)}function appendCmcdHeaders(e,t,n){return _extends$1(e,toCmcdHeaders(t,n))}const CMCD_PARAM="CMCD";function encodeCmcd(e,t={}){return e?encodeSfDict(prepareCmcdData(e,t),{whitespace:!1}):""}function toCmcdUrl(e,t={}){if(!e)return"";const n=encodeCmcd(e,t);return encodeURIComponent(n)}function toCmcdQuery(e,t={}){if(!e)return"";const n=toCmcdUrl(e,t);return`${CMCD_PARAM}=${n}`}const REGEX=/CMCD=[^&#]+/;function appendCmcdQuery(e,t,n){const r=toCmcdQuery(t,n);if(!r)return e;if(REGEX.test(e))return e.replace(REGEX,r);const i=e.includes("?")?"&":"?";return`${e}${i}${r}`}class CMCDController{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:CmcdObjectType.MANIFEST,su:!this.initialized})}catch(t){this.hls.logger.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=e=>{try{const{frag:t,part:n}=e,r=this.hls.levels[t.level],i=this.getObjectType(t),s={d:1e3*(n||t).duration,ot:i};i!==CmcdObjectType.VIDEO&&i!==CmcdObjectType.AUDIO&&i!=CmcdObjectType.MUXED||(s.br=r.bitrate/1e3,s.tb=this.getTopBandwidth(i)/1e3,s.bl=this.getBufferLength(i));const a=n?this.getNextPart(n):this.getNextFrag(t);null!=a&&a.url&&a.url!==t.url&&(s.nor=a.url),this.apply(e,s)}catch(t){this.hls.logger.warn("Could not generate segment CMCD data.",t)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;null!=n&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(Events$1.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Events$1.MEDIA_DETACHED,this.onMediaDetached,this),e.on(Events$1.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(Events$1.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Events$1.MEDIA_DETACHED,this.onMediaDetached,this),e.off(Events$1.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(r=t.tracks.video)?void 0:r.buffer}createData(){var e;return{v:1,sf:CmcdStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){_extends$1(t,this.createData());const n=t.ot===CmcdObjectType.INIT||t.ot===CmcdObjectType.VIDEO||t.ot===CmcdObjectType.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((e,n)=>(r.includes(n)&&(e[n]=t[n]),e),{}));const i={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),appendCmcdHeaders(e.headers,t,i)):e.url=appendCmcdQuery(e.url,t,i)}getNextFrag(e){var t;const n=null==(t=this.hls.levels[e.level])?void 0:t.details;if(n){const t=e.sn-n.startSN;return n.fragments[t+1]}}getNextPart(e){var t;const{index:n,fragment:r}=e,i=null==(t=this.hls.levels[r.level])||null==(t=t.details)?void 0:t.partList;if(i){const{sn:e}=r;for(let t=i.length-1;t>=0;t--){const r=i[t];if(r.index===n&&r.fragment.sn===e)return i[t+1]}}}getObjectType(e){const{type:t}=e;return"subtitle"===t?CmcdObjectType.TIMED_TEXT:"initSegment"===e.sn?CmcdObjectType.INIT:"audio"===t?CmcdObjectType.AUDIO:"main"===t?this.hls.audioTracks.length?CmcdObjectType.VIDEO:CmcdObjectType.MUXED:void 0}getTopBandwidth(e){let t,n=0;const r=this.hls;if(e===CmcdObjectType.AUDIO)t=r.audioTracks;else{const e=r.maxAutoLevel,n=e>-1?e+1:r.levels.length;t=r.levels.slice(0,n)}return t.forEach(e=>{e.bitrate>n&&(n=e.bitrate)}),n>0?n:NaN}getBufferLength(e){const t=this.media,n=e===CmcdObjectType.AUDIO?this.audioBuffer:this.videoBuffer;if(!n||!t)return NaN;return 1e3*BufferHelper.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}}const PATHWAY_PENALTY_DURATION_MS=3e5;class ContentSteeringController extends Logger{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events$1.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Events$1.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Events$1.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events$1.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Events$1.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Events$1.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(t=>t!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((null==n?void 0:n.action)===NetworkErrorAction.SendAlternateToPenaltyBox&&n.flags===ErrorActionFlags.MoveAllAlternatesMatchingHost){const e=this.levels;let r=this._pathwayPriority,i=this.pathwayId;if(t.context){const{groupId:n,pathwayId:r,type:s}=t.context;n&&e?i=this.getPathwayForGroupId(n,s,i):r&&(i=r)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!r&&e&&(r=this.pathways()),r&&r.length>1&&(this.updatePathwayPriority(r),n.resolved=this.pathwayId!==i),t.details!==ErrorDetails.BUFFER_APPEND_ERROR||t.fatal?n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${i} levels: ${e?e.length:e} priorities: ${stringify(r)} penalized: ${stringify(this.penalizedPathways)}`):n.resolved=!0}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){let t;this._pathwayPriority=e;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach(e=>{r-n[e]>PATHWAY_PENALTY_DURATION_MS&&delete n[e]});for(let i=0;i<e.length;i++){const r=e[i];if(r in n)continue;if(r===this.pathwayId)return;const s=this.hls.nextLoadLevel,a=this.hls.levels[s];if(t=this.getLevelsForPathway(r),t.length>0){this.log(`Setting Pathway to "${r}"`),this.pathwayId=r,reassignFragmentLevelIndexes(t),this.hls.trigger(Events$1.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[s];a&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==a.bitrate&&this.log(`Unstable Pathways change from bitrate ${a.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=s);break}}}getPathwayForGroupId(e,t,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let i=0;i<r.length;i++)if(t===PlaylistContextType.AUDIO_TRACK&&r[i].hasAudioGroup(e)||t===PlaylistContextType.SUBTITLE_TRACK&&r[i].hasSubtitleGroup(e))return r[i].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach(e=>{const{ID:i,"BASE-ID":s,"URI-REPLACEMENT":a}=e;if(t.some(e=>e.pathwayId===i))return;const o=this.getLevelsForPathway(s).map(e=>{const t=new AttrList(e.attrs);t["PATHWAY-ID"]=i;const s=t.AUDIO&&`${t.AUDIO}_clone_${i}`,o=t.SUBTITLES&&`${t.SUBTITLES}_clone_${i}`;s&&(n[t.AUDIO]=s,t.AUDIO=s),o&&(r[t.SUBTITLES]=o,t.SUBTITLES=o);const l=performUriReplacement(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a),c=new Level({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let n=1;n<e.audioGroups.length;n++)c.addGroupId("audio",`${e.audioGroups[n]}_clone_${i}`);if(e.subtitleGroups)for(let n=1;n<e.subtitleGroups.length;n++)c.addGroupId("text",`${e.subtitleGroups[n]}_clone_${i}`);return c});t.push(...o),cloneRenditionGroups(this.audioTracks,n,a,i),cloneRenditionGroups(this.subtitleTracks,r,a,i)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;let r;this.loader&&this.loader.destroy(),this.loader=new n(t);try{r=new self.URL(e)}catch(c){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==r.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+e)}const i={responseType:"json",url:r.href},s=t.steeringManifestLoadPolicy.default,a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(e,t,n,i)=>{this.log(`Loaded steering manifest: "${r}"`);const s=e.data;if(1!==(null==s?void 0:s.VERSION))return void this.log(`Steering VERSION ${s.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=s.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=s;if(a)try{this.uri=new self.URL(a,r).href}catch(c){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${a}`)}this.scheduleRefresh(this.uri||n.url),o&&this.clonePathways(o);const u={steeringManifest:s,url:r.toString()};this.hls.trigger(Events$1.STEERING_MANIFEST_LOADED,u),l&&this.updatePathwayPriority(l)},onError:(e,t,n,r)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let i=1e3*this.timeToLoad;if(429===e.code){const e=this.loader;if("function"==typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(i=1e3*parseFloat(t))}return void this.log(`Steering manifest ${t.url} rate limited`)}this.scheduleRefresh(this.uri||t.url,i)},onTimeout:(e,t,n)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(i,o,l)}scheduleRefresh(e,t=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var t;const n=null==(t=this.hls)?void 0:t.media;!n||n.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)},t)}}function cloneRenditionGroups(e,t,n,r){e&&Object.keys(t).forEach(i=>{const s=e.filter(e=>e.groupId===i).map(e=>{const s=_extends$1({},e);return s.details=void 0,s.attrs=new AttrList(s.attrs),s.url=s.attrs.URI=performUriReplacement(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),s.groupId=s.attrs["GROUP-ID"]=t[i],s.attrs["PATHWAY-ID"]=r,s});e.push(...s)})}function performUriReplacement(e,t,n,r){const{HOST:i,PARAMS:s,[n]:a}=r;let o;t&&(o=null==a?void 0:a[t],o&&(e=o));const l=new self.URL(e);return i&&!o&&(l.host=i),s&&Object.keys(s).sort().forEach(e=>{e&&l.searchParams.set(e,s[e])}),l.href}function addEventListener(e,t,n){removeEventListener(e,t,n),e.addEventListener(t,n)}function removeEventListener(e,t,n){e.removeEventListener(t,n)}class EMEController extends Logger{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=EMEController.CDMCleanupPromise?[EMEController.CDMCleanupPromise]:[],this.onMediaEncrypted=e=>{const{initDataType:t,initData:n}=e,r=`"${e.type}" event: init data type: "${t}"`;if(this.debug(r),null!==n){if(!this.keyFormatPromise){let e=Object.keys(this.keySystemAccessPromises);e.length||(e=getKeySystemsForConfig(this.config));const t=e.map(keySystemDomainToKeySystemFormat).filter(e=>!!e);this.keyFormatPromise=this.getKeyFormatPromise(t)}this.keyFormatPromise.then(i=>{const s=keySystemFormatToKeySystemDomain(i);if("sinf"!==t||s!==KeySystems.FAIRPLAY)return void this.log(`Ignoring "${e.type}" event with init data type: "${t}" for selected key-system ${s}`);let a;try{const e=bin2str(new Uint8Array(n)),t=parseSinf(base64Decode(JSON.parse(e).sinf));if(!t)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");a=new Uint8Array(t.subarray(8,24))}catch(d){return void this.warn(`${r} Failed to parse sinf: ${d}`)}const o=Hex.hexDump(a),{keyIdToKeySessionPromise:l,mediaKeySessions:c}=this;let u=l[o];for(let e=0;e<c.length;e++){const r=c[e],i=r.decryptdata;if(!i.keyId)continue;const s=Hex.hexDump(i.keyId);if(o===s||-1!==i.uri.replace(/-/g,"").indexOf(o)){if(u=l[s],!u)continue;if(i.pssh)break;delete l[s],i.pssh=new Uint8Array(n),i.keyId=a,u=l[o]=u.then(()=>this.generateRequestWithPreferredKeySession(r,t,n,"encrypted-event-key-match")),u.catch(e=>this.handleError(e));break}}u||this.handleError(new Error(`Key ID ${o} not encountered in playlist. Key-system sessions ${c.length}.`))}).catch(e=>this.handleError(e))}},this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null}registerListeners(){this.hls.on(Events$1.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Events$1.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Events$1.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(Events$1.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(Events$1.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Events$1.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Events$1.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(Events$1.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=t[e];return r?r.licenseUrl:e===KeySystems.WIDEVINE&&n?n:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(e,t,n)=>!!e&&n.indexOf(e)===t,r=t.map(e=>e.audioCodec).filter(n),i=t.map(e=>e.videoCodec).filter(n);return r.length+i.length===0&&i.push("avc1.42e01e"),new Promise((t,n)=>{const s=e=>{const a=e.shift();this.getMediaKeysPromise(a,r,i).then(e=>t({keySystem:a,mediaKeys:e})).catch(t=>{e.length?s(e):n(t instanceof EMEKeyError?t:new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))})};s(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if("function"!=typeof n){let e=`Configured requestMediaKeySystemAccess is not a function ${n}`;return null===requestMediaKeySystemAccess&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return n(e,t)}getMediaKeysPromise(e,t,n){const r=getSupportedMediaKeySystemConfigurations(e,t,n,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let s=null==i?void 0:i.keySystemAccess;if(!s){this.log(`Requesting encrypted media "${e}" key-system access with config: ${stringify(r)}`),s=this.requestMediaKeySystemAccess(e,r);const t=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch(t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)}),s.then(n=>{this.log(`Access for key-system "${n.keySystem}" obtained`);const r=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=n.createMediaKeys().then(n=>(this.log(`Media-keys created for "${e}"`),t.hasMediaKeys=!0,r.then(t=>t?this.setMediaKeysServerCertificate(n,e,t):n))),t.mediaKeys.catch(t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)}),t.mediaKeys})}return s.then(()=>i.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Hex.hexDump(e.keyId||[])}`);const r=n.createSession(),i={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),i="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,i,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return Hex.hexDump(e.keyId)}updateKeySession(e,t){var n;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${Hex.hexDump((null==(n=e.decryptdata)?void 0:n.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),r.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>keySystemDomainToKeySystemFormat(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:e,mediaKeys:t})=>this.attemptSetMediaKeys(e,t))}selectKeySystem(e){return new Promise((t,n)=>this.getKeySystemSelectionPromise(e).then(({keySystem:e})=>{const r=keySystemDomainToKeySystemFormat(e);r?t(r):n(new Error(`Unable to find format for key-system "${e}"`))}).catch(n))}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=getKeySystemsForConfig(this.config),n=e.map(keySystemFormatToKeySystemDomain).filter(e=>!!e&&-1!==t.indexOf(e));return this.selectKeySystem(n)}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),r=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);let i=this.keyIdToKeySessionPromise[n];if(!i){i=this.getKeySystemForKeyPromise(t).then(({keySystem:n,mediaKeys:i})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(n,i).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:n,mediaKeys:i,decryptdata:t})))));(this.keyIdToKeySessionPromise[n]=i.then(e=>{const n=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(e,"cenc",n,"playlist-key")})).catch(e=>this.handleError(e))}return i}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof EMEKeyError?this.hls.trigger(Events$1.ERROR,e.data):this.hls.trigger(Events$1.ERROR,{type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const t=keySystemFormatToKeySystemDomain(e.keyFormat),n=t?[t]:getKeySystemsForConfig(this.config);return this.attemptKeySystemAccess(n)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=getKeySystemsForConfig(this.config)),0===e.length)throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(n).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(e=>-1===n.indexOf(e))})}generateRequestWithPreferredKeySession(e,t,n,r){var i;const s=null==(i=this.config.drmSystems)||null==(i=i[e.keySystem])?void 0:i.generateRequest;if(s)try{const r=s.call(this.hls,t,n,e);if(!r)throw new Error("Invalid response from configured generateRequest filter");t=r.initDataType,n=r.initData?r.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(h){var a;if(this.warn(h.message),null!=(a=this.hls)&&a.config.debug)throw h}if(null===n)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const o=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${o} (init data type: ${t} length: ${n?n.byteLength:null})`);const l=new EventEmitter,c=e._onmessage=t=>{const n=e.mediaKeysSession;if(!n)return void l.emit("error",new Error("invalid state"));const{messageType:r,message:i}=t;this.log(`"${r}" message event for session "${n.sessionId}" message size: ${i.byteLength}`),"license-request"===r||"license-renewal"===r?this.renewLicense(e,i).catch(e=>{l.eventNames().length?l.emit("error",e):this.handleError(e)}):"license-release"===r?e.keySystem===KeySystems.FAIRPLAY&&(this.updateKeySession(e,strToUtf8array("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${r}"`)},u=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void l.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const n=e.keyStatus;l.emit("keyStatus",n),"expired"===n&&(this.warn(`${e.keySystem} expired for key ${o}`),this.renewKeySession(e))};addEventListener(e.mediaKeysSession,"message",c),addEventListener(e.mediaKeysSession,"keystatuseschange",u);const d=new Promise((e,t)=>{l.on("error",t),l.on("keyStatus",n=>{n.startsWith("usable")?e():"output-restricted"===n?t(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${n}"`)):"expired"===n?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${n}"`)})});return e.mediaKeysSession.generateRequest(t,n).then(()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${o}`)}).catch(e=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)}).then(()=>d).catch(t=>{throw l.removeAllListeners(),this.removeSession(e),t}).then(()=>(l.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,n)=>{if("string"==typeof n&&"object"==typeof t){const e=n;n=t,t=e}this.log(`key status change "${t}" for keyStatuses keyId: ${Hex.hexDump("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${Hex.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,n=new(0,t.loader)(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((i,s)=>{const a={responseType:"arraybuffer",url:r},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{i(e.data)},onError:(t,n,i,o)=>{s(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:_objectSpread2$1({url:a.url,data:void 0},t)},`"${e}" certificate request failed (${r}). Status: ${t.code} (${t.text})`))},onTimeout:(t,n,i)=>{s(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:a.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(e,t,n)=>{s(new Error("aborted"))}};n.load(a,l,c)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((r,i)=>{e.setServerCertificate(n).then(i=>{this.log(`setServerCertificate ${i?"success":"not supported by CDM"} (${null==n?void 0:n.byteLength}) on "${t}"`),r(e)}).catch(e=>{i(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(t=>this.updateKeySession(e,new Uint8Array(t)).catch(e=>{throw new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=(new DOMParser).parseFromString(n,"application/xml"),i=r.querySelectorAll("HttpHeader");if(i.length>0){let t;for(let n=0,r=i.length;n<r;n++){var s,a;t=i[n];const r=null==(s=t.querySelector("name"))?void 0:s.textContent,o=null==(a=t.querySelector("value"))?void 0:a.textContent;r&&o&&e.setRequestHeader(r,o)}}const o=r.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return strToUtf8array(atob(l))}setupLicenseXHR(e,t,n,r){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,n,r)}).catch(s=>{if(!n.decryptdata)throw s;return e.open("POST",t,!0),i.call(this.hls,e,t,n,r)}).then(n=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:n||r}}):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((r,i)=>{const s=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${s}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let t=a.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const n=this.config.licenseResponseCallback;if(n)try{t=n.call(this.hls,a,s,e)}catch(o){this.error(o)}r(t)}else{const o=n.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)i(new EMEKeyError({type:ErrorTypes.KEY_SYSTEM_ERROR,details:ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:s,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${s}). Status: ${a.status} (${a.statusText})`));else{const n=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${n} attempts left`),this.requestLicense(e,t).then(r,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,s,e,t).then(({xhr:t,licenseChallenge:n})=>{e.keySystem==KeySystems.PLAYREADY&&(n=this.unpackPlayReadyKeyMessage(t,n)),t.send(n)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,addEventListener(n,"encrypted",this.onMediaEncrypted),addEventListener(n,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(removeEventListener(e,"encrypted",this.onMediaEncrypted),removeEventListener(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null;const r=n.length;EMEController.CDMCleanupPromise=Promise.all(n.map(e=>this.removeSession(e)).concat(null==t||null==(e=t.setMediaKeys(null))?void 0:e.catch(e=>{var t;this.log(`Could not clear media keys: ${e}`),null==(t=this.hls)||t.trigger(Events$1.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${e}`)})}))).catch(e=>{var t;this.log(`Could not close sessions and clear media keys: ${e}`),null==(t=this.hls)||t.trigger(Events$1.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${e}`)})}).then(()=>{r&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);r>-1&&this.mediaKeySessions.splice(r,1);const{drmSystemOptions:i}=this.config;return(isPersistentSessionType(i)?new Promise((e,n)=>{self.setTimeout(()=>n(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(e)}):Promise.resolve()).catch(e=>{var t;this.log(`Could not remove session: ${e}`),null==(t=this.hls)||t.trigger(Events$1.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${e}`)})}).then(()=>t.close()).catch(e=>{var t;this.log(`Could not close session: ${e}`),null==(t=this.hls)||t.trigger(Events$1.ERROR,{type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${e}`)})})}}}EMEController.CDMCleanupPromise=void 0;class EMEKeyError extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}class FPSController{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(Events$1.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(Events$1.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const e=r-this.lastTime,i=n-this.lastDroppedFrames,s=t-this.lastDecodedFrames,a=1e3*i/e,o=this.hls;if(o.trigger(Events$1.FPS_DROP,{currentDropped:i,currentDecoded:s,totalDroppedFrames:n}),a>0&&i>o.config.fpsDroppedMonitoringThreshold*s){let e=o.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(Events$1.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function sendAddTrackEvent(e,t){let n;try{n=new Event("addtrack")}catch(err){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function addCueToTrack(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(err){logger.debug(`[texttrack-utils]: ${err}`);try{const n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(r){logger.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}"disabled"===n&&(e.mode=n)}function clearCurrentCues(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues)for(let r=e.cues.length;r--;)e.removeCue(e.cues[r]);"disabled"===n&&(e.mode=n)}function removeCuesInRange(e,t,n,r){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0){const r=getCuesInRange(e.cues,t,n);for(let t=0;t<r.length;t++)e.removeCue(r[t])}"disabled"===i&&(e.mode=i)}function getFirstCueIndexFromTime(e,t){if(t<=e[0].startTime)return 0;const n=e.length-1;if(t>e[n].endTime)return-1;let r,i=0,s=n;for(;i<=s;)if(r=Math.floor((s+i)/2),t<e[r].startTime)s=r-1;else{if(!(t>e[r].startTime&&i<n))return r;i=r+1}return e[i].startTime-t<t-e[s].startTime?i:s}function getCuesInRange(e,t,n){const r=[],i=getFirstCueIndexFromTime(e,t);if(i>-1)for(let s=i,a=e.length;s<a;s++){const i=e[s];if(i.startTime>=t&&i.endTime<=n)r.push(i);else if(i.startTime>n)return r}return r}function filterSubtitleTracks(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];"subtitles"!==r.kind&&"captions"!==r.kind||!r.label||t.push(e[n])}return t}class SubtitleTrackController extends BasePlaylistController{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=filterSubtitleTracks(this.media.textTracks);for(let r=0;r<t.length;r++)if("hidden"===t[r].mode)e=t[r];else if("showing"===t[r].mode){e=t[r];break}const n=this.findTrackForTextTrack(e);this.subtitleTrack!==n&&this.setSubtitleTrack(n)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(Events$1.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events$1.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Events$1.LEVEL_LOADING,this.onLevelLoading,this),e.on(Events$1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Events$1.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Events$1.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Events$1.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events$1.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Events$1.LEVEL_LOADING,this.onLevelLoading,this),e.off(Events$1.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Events$1.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Events$1.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const r=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r)return;filterSubtitleTracks(n.textTracks).forEach(e=>{clearCurrentCues(e)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,s=this.tracksInGroup[n];if(!s||s.groupId!==r)return void this.warn(`Subtitle track with id:${n} and group:${r} not found in active group ${null==s?void 0:s.groupId}`);const a=s.details;s.details=t.details,this.log(`Subtitle track ${n} "${s.name}" lang:${s.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some(e=>-1===(null==r?void 0:r.indexOf(e)))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!n||-1!==n.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!i&&t){this.selectDefaultTrack=!1;const n=findMatchingOption(t,e);if(n>-1)i=e[n];else{const e=findMatchingOption(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const s={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==n?void 0:n.join(",")}" group-id`),this.hls.trigger(Events$1.SUBTITLE_TRACKS_UPDATED,s),-1!==r&&-1===this.trackId&&this.setSubtitleTrack(r)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const i=t[r];if((!n||i.default)&&(n||e)&&(!e||matchesOption(i,e)))return r}if(e){for(let n=0;n<t.length;n++){const r=t[n];if(mediaAttributesIdentical(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const r=t[n];if(mediaAttributesIdentical(e.attrs,r.attrs,["LANGUAGE"]))return n}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){if(subtitleTrackMatchesTextTrack(t[n],e))return n}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==PlaylistContextType.SUBTITLE_TRACK||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(-1===e.id)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&matchesOption(e,n))return n;const r=findMatchingOption(e,this.tracksInGroup);if(r>-1){const e=this.tracksInGroup[r];return this.setSubtitleTrack(r),e}if(n)return null;{const n=findMatchingOption(e,t);if(n>-1)return t[n]}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),s=e.details,a=null==s?void 0:s.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${r}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${a&&s.live?" age "+a.toFixed(1)+(s.type&&" "+s.type||""):""} ${i}`),this.hls.trigger(Events$1.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=filterSubtitleTracks(e.textTracks),n=this.currentTrack;let r;if(n&&(r=t.filter(e=>subtitleTrackMatchesTextTrack(n,e))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(e=>{"disabled"!==e.mode&&e!==r&&(e.mode="disabled")}),r){const e=this.subtitleDisplay?"showing":"hidden";r.mode!==e&&(r.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!isFiniteNumber(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r)return void this.hls.trigger(Events$1.SUBTITLE_TRACK_SWITCH,{id:e});const i=!!r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:s,groupId:a="",name:o,type:l,url:c}=r;this.hls.trigger(Events$1.SUBTITLE_TRACK_SWITCH,{id:s,groupId:a,name:o,type:l,url:c});const u=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(u)}}function hash(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}const ALIGNED_END_THRESHOLD_SECONDS=.025;let TimelineOccupancy=function(e){return e[e.Point=0]="Point",e[e.Range=1]="Range",e}({});function generateAssetIdentifier(e,t,n){return`${e.identifier}-${n+1}-${hash(t)}`}class InterstitialEvent{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,null==(e=this.assetListLoader)||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;if(e<=0||isNaN(n))return!1;if(0===n)return!0;return((null==(t=this.assetList[e])?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return getSnapToFragmentTime(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(0===this.startTime||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime;return t-getSnapToFragmentTime(t,e)<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=isFiniteNumber(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return getSnapToFragmentTime(e,t)}return e}get appendInPlace(){return!!this.appendInPlaceStarted||!this.appendInPlaceDisabled&&!(this.cue.once||this.cue.pre||!this.startIsAligned||!(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<ALIGNED_END_THRESHOLD_SECONDS))}set appendInPlace(e){this.appendInPlaceStarted?this.resetOnResume=!e:this.appendInPlaceDisabled=!e}get timelineStart(){return null!==this._timelineStart?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return t=null!==this._duration?this._duration:this.dateRange.duration?this.dateRange.duration:this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return"RANGE"===this.dateRange.attr["X-TIMELINE-OCCUPIES"]?TimelineOccupancy.Range:TimelineOccupancy.Point}get supplementsPrimary(){return"PRIMARY"===this.dateRange.attr["X-TIMELINE-STYLE"]}get contentMayVary(){return"NO"!==this.dateRange.attr["X-CONTENT-MAY-VARY"]}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||null!==this.assetListResponse}toString(){return eventToString(this)}}function getSnapToFragmentTime(e,t){return e-t.start<t.duration/2&&!(Math.abs(e-(t.start+t.duration))<ALIGNED_END_THRESHOLD_SECONDS)?t.start:t.start+t.duration}function getInterstitialUrl(e,t,n){const r=new self.URL(e,n);return"data:"!==r.protocol&&r.searchParams.set("_HLS_primary_id",t),r}function getNextAssetIndex(e,t){for(;null!=(n=e.assetList[++t])&&n.error;)var n;return t}function eventToString(e){return`["${e.identifier}" ${e.cue.pre?"<pre>":e.cue.post?"<post>":""}${e.timelineStart.toFixed(2)}-${e.resumeTime.toFixed(2)}]`}function eventAssetToString(e){const t=e.timelineStart,n=e.duration||0;return`["${e.identifier}" ${t.toFixed(2)}-${(t+n).toFixed(2)}]`}class HlsAssetPlayer{constructor(e,t,n,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(Events$1.PLAYOUT_LIMIT_REACHED,{})};const i=this.hls=new e(t);this.interstitial=n,this.assetItem=r;const s=()=>{this.hasDetails=!0};i.once(Events$1.LEVEL_LOADED,s),i.once(Events$1.AUDIO_TRACK_LOADED,s),i.once(Events$1.SUBTITLE_TRACK_LOADED,s),i.on(Events$1.MEDIA_ATTACHING,(e,{media:t})=>{this.removeMediaListeners(),this.mediaAttached=t;this.interstitial.playoutLimit&&(t.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&i.on(Events$1.BUFFER_APPENDED,()=>{const e=this.bufferedEnd;this.reachedPlayout(e)&&(this._bufferedEosTime=e,i.trigger(Events$1.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let n=this.assetItem.uri;try{n=getInterstitialUrl(n,e.config.primarySessionId||"").href}catch(t){}e.loadSource(n)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if(null!=(t=this.hls)&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),r=this.timelineOffset,i=BufferHelper.bufferInfo(e,r,0);return this.getAssetTime(i.end)>=n-.02}reachedPlayout(e){const t=this.interstitial.playoutLimit;return this.startOffset+e>=t}get destroyed(){var e;return!(null!=(e=this.hls)&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return(null==(e=this.hls)?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=BufferHelper.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return(null==(e=this.hls)?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){var e;this.mediaAttached&&(null!=(e=this.hls)&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd))}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),null==(t=this.hls)||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,null==(e=this.hls)||e.detachMedia()}resumeBuffering(){var e;null==(e=this.hls)||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.hls)||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),(null==(e=this.hls)?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=e=>delete e.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var r;null==(r=this.hls)||r.on(e,t)}once(e,t,n){var r;null==(r=this.hls)||r.once(e,t)}off(e,t,n){var r;null==(r=this.hls)||r.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${eventAssetToString(this.assetItem)} ${null==(e=this.hls)?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const ABUTTING_THRESHOLD_SECONDS=.033;class InterstitialsSchedule extends Logger{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,r)=>e<=r.startOffset&&t>r.startOffset?(delete r.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[n]||(void 0===t&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&null!=(i=r[n])&&i.event;){var i;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let r=0;r<n.length;r++){let i=n[r];if(t&&"primary"!==t&&(i=i[t]),e===i.start||e>i.start&&e<i.end)return r}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let r=e;r<=t&&n[r];r++){const e=n[r].event;if(null!=e&&e.restrictions.jump&&!e.appendInPlace)return r}return-1}findEventIndex(e){const t=this.items;if(t)for(let r=t.length;r--;){var n;if((null==(n=t[r].event)?void 0:n.identifier)===e)return r}return-1}findAssetIndex(e,t){const n=e.assetList,r=n.length;if(r>1)for(let i=0;i<r;i++){const e=n[i];if(!e.error){const n=e.timelineStart;if(t===n||t>n&&(t<n+(e.duration||0)||i===r-1))return i}}return 0}get assetIdAtEnd(){var e;const t=null==(e=this.items)||null==(e=e[this.length-1])?void 0:e.event;if(t){const e=t.assetList,n=e[e.length-1];if(n)return n.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:r}=n,i=this.events,s=this.parseDateRanges(r,{url:n.url},t),a=Object.keys(r),o=i?i.filter(e=>!a.includes(e.identifier)):[];s.length&&s.sort((e,t)=>{const n=e.cue.pre,r=e.cue.post,i=t.cue.pre,s=t.cue.post;if(n&&!i)return-1;if(i&&!n)return 1;if(r&&!s)return 1;if(s&&!r)return-1;if(!(n||i||r||s)){const n=e.startTime,r=t.startTime;if(n!==r)return n-r}return e.dateRange.tagOrder-t.dateRange.tagOrder}),this.events=s,o.forEach(e=>{this.removeEvent(e)}),this.updateSchedule(e,o)}updateSchedule(e,t=[],n=!1){const r=this.events||[];if(r.length||t.length||this.length<2){const i=this.items,s=this.parseSchedule(r,e);(n||t.length||(null==i?void 0:i.length)!==s.length||s.some((e,t)=>Math.abs(e.playout.start-i[t].playout.start)>.005||Math.abs(e.playout.end-i[t].playout.end)>.005))&&(this.items=s,this.onScheduleUpdate(t,i))}}parseDateRanges(e,t,n){const r=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const a=i[s],o=e[a];if(o.isInterstitial){let e=this.eventMap[a];e?e.setDateRange(o):(e=new InterstitialEvent(o,t),this.eventMap[a]=e,!1===n&&(e.appendInPlace=n)),r.push(e)}}return r}parseSchedule(e,t){const n=[],r=t.main.details,i=r.live?1/0:r.edge;let s=0;if((e=e.filter(e=>!(e.error||e.cue.once&&e.hasPlayed))).length){this.resolveOffsets(e,t);let r=0,o=0;if(e.forEach((t,a)=>{const l=t.cue.pre,c=t.cue.post,u=e[a-1]||null,d=t.appendInPlace,h=c?i:t.startOffset,p=t.duration,m=t.timelineOccupancy===TimelineOccupancy.Range?p:0,f=t.resumptionOffset,g=(null==u?void 0:u.startTime)===h,x=h+t.cumulativeDuration;let v=d?x+p:h+f;if(l||!c&&h<=0){const e=o;o+=m,t.timelineStart=x;const r=s;s+=p,n.push({event:t,start:x,end:v,playout:{start:r,end:s},integrated:{start:e,end:o}})}else{if(!(h<=i))return;{if(!g){const i=h-r;if(i>ABUTTING_THRESHOLD_SECONDS){const l=r,c=o;o+=i;const u=s;s+=i;const d={previousEvent:e[a-1]||null,nextEvent:t,start:l,end:l+i,playout:{start:u,end:s},integrated:{start:c,end:o}};n.push(d)}else i>0&&u&&(u.cumulativeDuration+=i,n[n.length-1].end=h)}c&&(v=x),t.timelineStart=x;const i=o;o+=m;const l=s;s+=p,n.push({event:t,start:x,end:v,playout:{start:l,end:s},integrated:{start:i,end:o}})}}const y=t.resumeTime;r=c||y>i?i:y}),r<i){var a;const e=r,t=o,l=i-r;o+=l;const c=s;s+=l,n.push({previousEvent:(null==(a=n[n.length-1])?void 0:a.event)||null,nextEvent:null,start:r,end:e+l,playout:{start:c,end:s},integrated:{start:t,end:o}})}this.setDurations(i,s,o)}else{const e=0;n.push({previousEvent:null,nextEvent:null,start:e,end:i,playout:{start:e,end:i},integrated:{start:e,end:i}}),this.setDurations(i,i,i)}return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,r=n.live?1/0:n.edge;let i=0,s=-1;e.forEach((a,o)=>{const l=a.cue.pre,c=a.cue.post,u=l?0:c?r:a.startTime;this.updateAssetDurations(a);if(s===u?a.cumulativeDuration=i:(i=0,s=u),!c&&a.snapOptions.in&&(a.resumeAnchor=findFragmentByPTS(null,n.fragments,a.startOffset+a.resumptionOffset,0,0)||void 0),a.appendInPlace&&!a.appendInPlaceStarted){this.primaryCanResumeInPlaceAt(a,t)||(a.appendInPlace=!1)}if(!a.appendInPlace&&o+1<e.length){e[o+1].startTime-e[o].resumeTime<ABUTTING_THRESHOLD_SECONDS&&(e[o+1].appendInPlace=!1,e[o+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${a}`))}const d=isFiniteNumber(a.resumeOffset)?a.resumeOffset:a.duration;i+=d})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,r=e.startTime+e.resumptionOffset;if(Math.abs(n-r)>ALIGNED_END_THRESHOLD_SECONDS)return this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${r}`),!1;return!Object.keys(t).some(r=>{const i=t[r].details,s=i.edge;if(n>=s)return this.log(`"${e.identifier}" resumption ${n} past ${r} playlist end ${s}`),!1;const a=findFragmentByPTS(null,i.fragments,n);if(!a)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${r} playlist (${i.fragStart}-${i.fragmentEnd})`),!0;const o="audio"===r?.175:0;return!(Math.abs(a.start-n)<ALIGNED_END_THRESHOLD_SECONDS+o||Math.abs(a.end-n)<ALIGNED_END_THRESHOLD_SECONDS+o)&&(this.log(`"${e.identifier}" resumption ${n} not aligned with ${r} fragment bounds (${a.start}-${a.end} sn: ${a.sn} cc: ${a.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,r=!1,i=!1;for(let s=0;s<e.assetList.length;s++){const a=e.assetList[s],o=t+n;a.startOffset=n,a.timelineStart=o,r||(r=null===a.duration),i||(i=!!a.error);n+=a.error?0:a.duration||0}e.duration=r&&!i?Math.max(n,e.duration):n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function segmentToString(e){return`[${e.event?'"'+e.event.identifier+'"':"primary"}: ${e.start.toFixed(2)}-${e.end.toFixed(2)}]`}class AssetListLoader{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let r;try{r=getInterstitialUrl(n,this.hls.sessionId,e.baseUrl)}catch(u){const t=this.assignAssetListError(e,ErrorDetails.ASSET_LIST_LOAD_ERROR,u,n);return void this.hls.trigger(Events$1.ERROR,t)}t&&"data:"!==r.protocol&&r.searchParams.set("_HLS_start_offset",""+t);const i=this.hls.config,s=new(0,i.loader)(i),a={responseType:"json",url:r.href},o=i.interstitialAssetListLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(t,n,r,i)=>{const s=t.data,a=null==s?void 0:s.ASSETS;if(!Array.isArray(a)){const t=this.assignAssetListError(e,ErrorDetails.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),r.url,n,i);return void this.hls.trigger(Events$1.ERROR,t)}e.assetListResponse=s,this.hls.trigger(Events$1.ASSET_LIST_LOADED,{event:e,assetListResponse:s,networkDetails:i})},onError:(t,n,r,i)=>{const s=this.assignAssetListError(e,ErrorDetails.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${t.code} ${t.text} (${n.url})`),n.url,i,r);this.hls.trigger(Events$1.ERROR,s)},onTimeout:(t,n,r)=>{const i=this.assignAssetListError(e,ErrorDetails.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${n.url})`),n.url,t,r);this.hls.trigger(Events$1.ERROR,i)}};return s.load(a,l,c),this.hls.trigger(Events$1.ASSET_LIST_LOADING,{event:e}),s}assignAssetListError(e,t,n,r,i,s){return e.error=n,{type:ErrorTypes.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:r,error:n,networkDetails:s,stats:i}}}function playWithCatch(e){null==e||e.play().catch(()=>{})}class InterstitialsController extends Logger{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled||!this.schedule)return;const t=e-this.timelinePos;if(Math.abs(t)<1/7056e5)return;const n=t<=-.01;this.timelinePos=e,this.bufferedPos=e;const r=this.playingItem;if(!r)return void this.checkBuffer();if(n){this.schedule.resetErrorsInRange(e,e-t)&&this.updateSchedule(!0)}if(this.checkBuffer(),n&&e<r.start||e>=r.end){var i;const t=this.findItemIndex(r);let s=this.schedule.findItemIndexAtTime(e);if(-1===s&&(s=t+(n?-1:1),this.log(`seeked ${n?"back ":""}to position not covered by schedule ${e} (resolving from ${t} to ${s})`)),!this.isInterstitial(r)&&null!=(i=this.media)&&i.paused&&(this.shouldPlay=!1),!n&&s>t){const e=this.schedule.findJumpRestrictedIndex(t+1,s);if(e>t)return void this.setSchedulePosition(e)}return void this.setSchedulePosition(s)}const s=this.playingAsset;if(!s){if(this.playingLastItem&&this.isInterstitial(r)){const t=r.event.assetList[0];t&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(e,t))}return}const a=s.timelineStart,o=s.duration||0;var l;(n&&e<a||e>=a+o)&&(null!=(l=r.event)&&l.appendInPlace&&(this.clearInterstitial(r.event,r),this.flushFrontBuffer(e)),this.setScheduleToAssetAtTime(e,s))},this.onTimeupdate=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;if(!(e>this.timelinePos))return;this.timelinePos=e,e>this.bufferedPos&&this.checkBuffer();const t=this.playingItem;if(!t||this.playingLastItem)return;if(e>=t.end){this.timelinePos=t.end;const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}const n=this.playingAsset;if(!n)return;e>=n.timelineStart+(n.duration||0)&&this.setScheduleToAssetAtTime(e,n)},this.onScheduleUpdate=(e,t)=>{const n=this.schedule;if(!n)return;const r=this.playingItem,i=n.events||[],s=n.items||[],a=n.durations,o=e.map(e=>e.identifier),l=!(!i.length&&!o.length);(l||t)&&this.log(`INTERSTITIALS_UPDATED (${i.length}): ${i}\nSchedule: ${s.map(e=>segmentToString(e))} pos: ${this.timelinePos}`),o.length&&this.log(`Removed events ${o}`);let c=null,u=null;r&&(c=this.updateItem(r,this.timelinePos),this.itemsMatch(r,c)?this.playingItem=c:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const d=this.bufferingItem;if(d&&(u=this.updateItem(d,this.bufferedPos),this.itemsMatch(d,u)?this.bufferingItem=u:d.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(d.event,null))),e.forEach(e=>{e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,null)})}),this.playerQueue.forEach(e=>{if(e.interstitial.appendInPlace){const t=e.assetItem.timelineStart,n=e.timelineOffset-t;if(n)try{e.timelineOffset=t}catch(e2){Math.abs(n)>ALIGNED_END_THRESHOLD_SECONDS&&this.warn(`${e2} ("${e.assetId}" ${e.timelineOffset}->${t})`)}}}),l||t){if(this.hls.trigger(Events$1.INTERSTITIALS_UPDATED,{events:i.slice(0),schedule:s.slice(0),durations:a,removedIds:o}),this.isInterstitial(r)&&o.includes(r.event.identifier))return this.warn(`Interstitial "${r.event.identifier}" removed while playing`),void this.primaryFallback(r.event);r&&this.trimInPlace(c,r),d&&this.trimInPlace(u,d),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new AssetListLoader(e),this.schedule=new InterstitialsSchedule(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(Events$1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Events$1.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events$1.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Events$1.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Events$1.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(Events$1.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Events$1.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(Events$1.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(Events$1.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(Events$1.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Events$1.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Events$1.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(Events$1.MEDIA_ENDED,this.onMediaEnded,this),e.on(Events$1.ERROR,this.onError,this),e.on(Events$1.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(Events$1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Events$1.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events$1.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Events$1.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Events$1.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(Events$1.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Events$1.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(Events$1.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(Events$1.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(Events$1.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Events$1.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Events$1.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Events$1.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(Events$1.MEDIA_ENDED,this.onMediaEnded,this),e.off(Events$1.ERROR,this.onError,this),e.off(Events$1.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;null==(e=this.getBufferingPlayer())||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.getBufferingPlayer())||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){removeEventListener(e,"play",this.onPlay),removeEventListener(e,"pause",this.onPause),removeEventListener(e,"seeking",this.onSeeking),removeEventListener(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;addEventListener(n,"seeking",this.onSeeking),addEventListener(n,"timeupdate",this.onTimeupdate),addEventListener(n,"play",this.onPlay),addEventListener(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,null===n)this.checkStart();else if(!r){this.clearScheduleState();const e=this.findItemIndex(n);this.setSchedulePosition(e)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(this.media=null,!n&&(r&&this.removeMediaListeners(r),this.detachedData)){const e=this.getBufferingPlayer();e&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,e.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=t=>t?e.getAssetPlayer(t.identifier):t,r=(t,r,s,a,o)=>{if(t){let l=t[r].start;const c=t.event;if(c){if("playout"===r||c.timelineOccupancy!==TimelineOccupancy.Point){const e=n(s);(null==e?void 0:e.interstitial)===c&&(l+=e.assetItem.startOffset+e[o])}}else{l+=("bufferedPos"===a?i():e[a])-t.start}return l}return 0},i=()=>{const t=e.bufferedPos;return t===Number.MAX_VALUE?s("primary"):Math.max(t,0)},s=t=>{var n,r;return null!=(n=e.primaryDetails)&&n.live?e.primaryDetails.edge:(null==(r=e.schedule)?void 0:r.durations[t])||0},a=(t,i)=>{var s,a;const o=e.effectivePlayingItem;if(null!=o&&null!=(s=o.event)&&s.restrictions.skip||!e.schedule)return;e.log(`seek to ${t} "${i}"`);const l=e.effectivePlayingItem,c=e.schedule.findItemIndexAtTime(t,i),u=null==(a=e.schedule.items)?void 0:a[c],d=e.getBufferingPlayer(),h=null==d?void 0:d.interstitial,p=null==h?void 0:h.appendInPlace,m=l&&e.itemsMatch(l,u);if(l&&(p||m)){const s=n(e.playingAsset),a=(null==s?void 0:s.media)||e.primaryMedia;if(a){const n="primary"===i?a.currentTime:r(l,i,e.playingAsset,"timelinePos","currentTime"),o=t-n,c=(p?n:a.currentTime)+o;if(c>=0&&(!s||p||c<=s.duration))return void(a.currentTime=c)}}if(u){let n=t;if("primary"!==i){const e=t-u[i].start;n=u.start+e}const r=!e.isInterstitial(u);if(e.isInterstitial(l)&&!l.event.appendInPlace||!r&&!u.event.appendInPlace){if(l){const s=e.findItemIndex(l);if(c>s){const t=e.schedule.findJumpRestrictedIndex(s+1,c);if(t>s)return void e.setSchedulePosition(t)}let a=0;if(r)e.timelinePos=n,e.checkBuffer();else{const e=u.event.assetList,n=t-(u[i]||u).start;for(let t=e.length;t--;){const r=e[t];if(r.duration&&n>=r.startOffset&&n<r.startOffset+r.duration){a=t;break}}}e.setSchedulePosition(c,a)}}else{const t=e.media||(p?null==d?void 0:d.media:null);t&&(t.currentTime=n)}}},o=()=>{const n=e.effectivePlayingItem;if(e.isInterstitial(n))return n;const r=t();return e.isInterstitial(r)?r:null},l={get bufferedEnd(){const n=t(),i=e.bufferingItem;var s;return i&&i===n&&(r(i,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-i.playout.start||(null==(s=e.bufferingAsset)?void 0:s.startOffset))||0},get currentTime(){const t=o(),n=e.effectivePlayingItem;return n&&n===t?r(n,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-n.playout.start:0},set currentTime(t){const n=o(),r=e.effectivePlayingItem;r&&r===n&&a(t+r.playout.start,"playout")},get duration(){const e=o();return e?e.playout.end-e.playout.start:0},get assetPlayers(){var t;const n=null==(t=o())?void 0:t.event.assetList;return n?n.map(t=>e.getAssetPlayer(t.identifier)):[]},get playingIndex(){var t;const n=null==(t=o())?void 0:t.event;return n&&e.effectivePlayingAsset?n.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return o()}};return this.manager={get events(){var t;return(null==(t=e.schedule)||null==(t=t.events)?void 0:t.slice(0))||[]},get schedule(){var t;return(null==(t=e.schedule)||null==(t=t.items)?void 0:t.slice(0))||[]},get interstitialPlayer(){return o()?l:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const n=t();return e.findItemIndex(n)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const t=e.effectivePlayingItem;return e.findItemIndex(t)},primary:{get bufferedEnd(){return i()},get currentTime(){const t=e.timelinePos;return t>0?t:0},set currentTime(e){a(e,"primary")},get duration(){return s("primary")},get seekableStart(){var t;return(null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(e){a(e,"integrated")},get duration(){return s("integrated")},get seekableStart(){var t;return((t,n)=>{var r;if(0!==t&&"primary"!==n&&null!=(r=e.schedule)&&r.length){var i;const r=e.schedule.findItemIndexAtTime(t),s=null==(i=e.schedule.items)?void 0:i[r];if(s)return t+(s[n].start-s.start)}return t})((null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0,"integrated")}},skip:()=>{const t=e.effectivePlayingItem,n=null==t?void 0:t.event;if(n&&!n.restrictions.skip){const r=e.findItemIndex(t);if(n.appendInPlace){const e=t.playout.start+t.event.duration;a(e+.001,"playout")}else e.advanceAfterAssetEnded(n,r,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=null==(e=this.schedule)?void 0:e.items;return!!(this.playbackStarted&&t&&n)&&this.findItemIndex(t)===n.length-1}get playbackStarted(){return null!==this.effectivePlayingItem}get currentTime(){var e,t;if(null===this.mediaSelection)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let r=this.media;!r&&null!=(e=this.bufferingItem)&&null!=(e=e.event)&&e.appendInPlace&&(r=this.primaryMedia);const i=null==(t=r)?void 0:t.currentTime;return void 0!==i&&isFiniteNumber(i)?i:void 0}get primaryMedia(){var e;return this.media||(null==(e=this.detachedData)?void 0:e.media)||null}isInterstitial(e){return!(null==e||!e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,r=e.media;if(n&&r===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&r)return void(this.detachedData={media:r});const n=e.transferMedia();this.log(`transfer MediaSource from ${e} ${stringify(n)}`),this.detachedData=n}else t&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,t){var n,r;if(e.media===t)return;let i=null;const s=this.hls,a=e!==s,o=a&&e.interstitial.appendInPlace,l=null==(n=this.detachedData)?void 0:n.mediaSource;let c;if(s.media)o&&(i=s.transferMedia(),this.detachedData=i),c="Primary";else if(l){const e=this.getBufferingPlayer();e?(i=e.transferMedia(),c=`${e}`):c="detached MediaSource"}else c="detached media";if(!i)if(l)i=this.detachedData,this.log(`using detachedData: MediaSource ${stringify(i)}`);else if(!this.detachedData||s.media===t){const e=this.playerQueue;e.length>1&&e.forEach(e=>{if(a&&e.interstitial.appendInPlace!==o){const t=e.interstitial;this.clearInterstitial(e.interstitial,null),t.appendInPlace=!1,t.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${t}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}const u=i&&"mediaSource"in i&&"closed"!==(null==(r=i.mediaSource)?void 0:r.readyState),d=u&&i?i:t;this.log(`${u?"transfering MediaSource":"attaching media"} to ${a?e:"Primary"} from ${c} (media.currentTime: ${t.currentTime})`);const h=this.schedule;if(d===i&&h){const t=a&&e.assetId===h.assetIdAtEnd;d.overrides={duration:h.duration,endOfStream:!a||t,cueRemoval:!a}}e.attachMedia(d)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=null==e?void 0:e.events;if(!t||this.playbackDisabled||!this.media)return;-1===this.bufferedPos&&(this.bufferedPos=0);const n=this.timelinePos,r=this.effectivePlayingItem;if(-1===n){const n=this.hls.startPosition;if(this.timelinePos=n,t.length&&t[0].cue.pre){const n=e.findEventIndex(t[0].identifier);this.setSchedulePosition(n)}else if(n>=0||!this.primaryLive){const t=this.timelinePos=n>0?n:0,r=e.findItemIndexAtTime(t);this.setSchedulePosition(r)}}else if(r&&!this.playingItem){const t=e.findItemIndex(r);this.setSchedulePosition(t)}}advanceAssetBuffering(e,t){const n=e.event,r=n.findAssetIndex(t),i=getNextAssetIndex(n,r);if(n.isAssetPastPlayoutLimit(i)){if(this.schedule){var s;const t=null==(s=this.schedule.items)?void 0:s[this.findItemIndex(e)+1];t&&this.bufferedToItem(t)}}else this.bufferedToEvent(e,i)}advanceAfterAssetEnded(e,t,n){const r=getNextAssetIndex(e,n);if(e.isAssetPastPlayoutLimit(r)){if(this.schedule){const n=this.schedule.items;if(n){const r=t+1;if(r>=n.length)return void this.setSchedulePosition(-1);const i=e.resumeTime;this.timelinePos<i&&(this.timelinePos=i,e.appendInPlace&&this.advanceInPlace(i),this.checkBuffer(this.bufferedPos<i)),this.setSchedulePosition(r)}}}else{if(e.appendInPlace){const t=e.assetList[r];t&&this.advanceInPlace(t.timelineStart)}this.setSchedulePosition(t,r)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const r=t.parentIdentifier,i=n.getEvent(r);if(i){const t=n.findEventIndex(r),s=n.findAssetIndex(i,e);this.advanceAfterAssetEnded(i,t,s-1)}}setSchedulePosition(e,t){var n;const r=null==(n=this.schedule)?void 0:n.items;if(!r||this.playbackDisabled)return;const i=e>=0?r[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${i?segmentToString(i):i})`);const s=this.waitingItem||this.playingItem,a=this.playingLastItem;if(this.isInterstitial(s)){const n=s.event,c=this.playingAsset,u=null==c?void 0:c.identifier,d=u?this.getAssetPlayer(u):null;if(d&&u&&(!this.eventItemsMatch(s,i)||void 0!==t&&u!==n.assetList[t].identifier)){var o;const t=n.findAssetIndex(c);if(this.log(`INTERSTITIAL_ASSET_ENDED ${t+1}/${n.assetList.length} ${eventAssetToString(c)}`),this.endedAsset=c,this.playingAsset=null,this.hls.trigger(Events$1.INTERSTITIAL_ASSET_ENDED,{asset:c,assetListIndex:t,event:n,schedule:r.slice(0),scheduleIndex:e,player:d}),s!==this.playingItem)return void(this.itemsMatch(s,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(n,this.findItemIndex(this.playingItem),t));this.retreiveMediaSource(u,i),!d.media||null!=(o=this.detachedData)&&o.mediaSource||d.detachMedia()}if(!this.eventItemsMatch(s,i)&&(this.endedItem=s,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${n} ${segmentToString(s)}`),n.hasPlayed=!0,this.hls.trigger(Events$1.INTERSTITIAL_ENDED,{event:n,schedule:r.slice(0),scheduleIndex:e}),n.cue.once)){var l;this.updateSchedule();const e=null==(l=this.schedule)?void 0:l.items;if(i&&e){const n=this.findItemIndex(i);this.advanceSchedule(n,e,t,s,a)}return}}this.advanceSchedule(e,r,t,s,a)}advanceSchedule(e,t,n,r,i){const s=this.schedule;if(!s)return;const a=e>=0?t[e]:null,o=this.primaryMedia,l=this.playerQueue;if(l.length&&l.forEach(t=>{const n=t.interstitial,r=s.findEventIndex(n.identifier);(r<e||r>e+1)&&this.clearInterstitial(n,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const i=a.event;if(void 0===n){const t=getNextAssetIndex(i,(n=s.findAssetIndex(i,this.timelinePos))-1);if(i.isAssetPastPlayoutLimit(t)||i.appendInPlace&&this.timelinePos===a.end)return void this.advanceAfterAssetEnded(i,e,n);n=t}const l=this.waitingItem;this.assetsBuffered(a,o)||this.setBufferingItem(a);let c=this.preloadAssets(i,n);if(this.eventItemsMatch(a,l||r)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${segmentToString(a)} ${i.appendInPlace?"append in place":""}`),this.hls.trigger(Events$1.INTERSTITIAL_STARTED,{event:i,schedule:t.slice(0),scheduleIndex:e})),!i.assetListLoaded)return void this.log(`Waiting for ASSET-LIST to complete loading ${i}`);if(i.assetListLoader&&(i.assetListLoader.destroy(),i.assetListLoader=void 0),!o)return void this.log(`Waiting for attachMedia to start Interstitial ${i}`);this.waitingItem=this.endedItem=null,this.playingItem=a;const u=i.assetList[n];if(!u)return void this.advanceAfterAssetEnded(i,e,n||0);if(c||(c=this.getAssetPlayer(u.identifier)),null===c||c.destroyed){const e=i.assetList.length;this.warn(`asset ${n+1}/${e} player destroyed ${i}`),c=this.createAssetPlayer(i,u,n),c.loadSource()}if(!this.eventItemsMatch(a,this.bufferingItem)&&i.appendInPlace&&this.isAssetBuffered(u))return;this.startAssetPlayer(c,n,t,e,o),this.shouldPlay&&playWithCatch(c.media)}else null!==a?(this.resumePrimary(a,e,r),this.shouldPlay&&playWithCatch(this.hls.media)):i&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(s.durations.primary,null))}get playbackDisabled(){return!1===this.hls.config.enableInterstitialPlayback}get primaryDetails(){var e;return null==(e=this.mediaSelection)?void 0:e.main.details}get primaryLive(){var e;return!(null==(e=this.primaryDetails)||!e.live)}resumePrimary(e,t,n){var r,i;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${segmentToString(e)}`),null==(r=this.detachedData)||!r.mediaSource){let n=this.timelinePos;(n<e.start||n>=e.end)&&(n=this.getPrimaryResumption(e,t),this.timelinePos=n),this.attachPrimary(n,e)}if(!n)return;const s=null==(i=this.schedule)?void 0:i.items;s&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${segmentToString(e)}`),this.hls.trigger(Events$1.INTERSTITIALS_PRIMARY_RESUMED,{schedule:s.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const e=this.primaryDetails;if(0===t)return this.hls.startPosition;if(e&&(n<e.fragmentStart||n>e.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);if(null!=t&&t.hls)return t.hls.bufferedToEnd;return BufferHelper.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const i=this.hls;i.media?this.checkBuffer():(this.transferMediaTo(i,r),n&&this.startLoadingPrimaryAt(e,n)),n||(this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs(((null==(n=r.mainForwardBufferInfo)?void 0:n.start)||r.media.currentTime)-e)>.5?r.startLoad(e,t):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),null==(e=this.schedule)||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(Events$1.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(Events$1.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(-1===t.level||!this.schedule)return;const n=this.hls.levels[t.level],r=_objectSpread2$1(_objectSpread2$1({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],r=this.mediaSelection;if(!r)return void(this.altSelection=_objectSpread2$1(_objectSpread2$1({},this.altSelection),{},{audio:n}));const i=_objectSpread2$1(_objectSpread2$1({},r),{},{audio:n});this.mediaSelection=i}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],r=this.mediaSelection;if(!r)return void(this.altSelection=_objectSpread2$1(_objectSpread2$1({},this.altSelection),{},{subtitles:n}));const i=_objectSpread2$1(_objectSpread2$1({},r),{},{subtitles:n});this.mediaSelection=i}onAudioTrackSwitching(e,t){const n=getBasicSelectionOption(t);this.playerQueue.forEach(({hls:e})=>e&&(e.setAudioOption(t)||e.setAudioOption(n)))}onSubtitleTrackSwitch(e,t){const n=getBasicSelectionOption(t);this.playerQueue.forEach(({hls:e})=>e&&(e.setSubtitleOption(t)||-1!==t.id&&e.setSubtitleOption(n)))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const e=this.timelinePos;this.bufferedPos=e,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let e=0;e<t.length;e++){const r=t[e];if(r.cue.post){var n;const e=this.schedule.findEventIndex(r.identifier),t=null==(n=this.schedule.items)?void 0:n[e];this.isInterstitial(t)&&this.eventItemsMatch(t,this.bufferingItem)&&this.bufferedToItem(t,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const r=null==(n=this.schedule)?void 0:n.items;if(e&&r){return r[this.findItemIndex(e,t)]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((t,n)=>{e.event.isAssetPastPlayoutLimit(n)&&this.clearAssetPlayer(t.identifier,null)});const t=e.end+.25,n=BufferHelper.bufferInfo(this.primaryMedia,t,0);(n.end>t||(n.nextStart||0)>t)&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===(null==(n=t.event)?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const n=this.mediaSelection;n&&(null==(t=this.schedule)||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=null==(t=this.schedule)?void 0:t.items;if(!n)return;const r=BufferHelper.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,n,e)}updateBufferedPos(e,t,n){const r=this.schedule,i=this.bufferingItem;if(this.bufferedPos>e||!r)return;if(1===t.length&&this.itemsMatch(t[0],i))return void(this.bufferedPos=e);const s=this.playingItem,a=this.findItemIndex(s);let o=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var l;const n=this.findItemIndex(i),r=Math.min(n+1,t.length-1),s=t[r];if((-1===o&&i&&e>=i.end||null!=(l=s.event)&&l.appendInPlace&&e+.01>=s.start)&&(o=r),this.isInterstitial(i)){const e=i.event;if(r-a>1&&!1===e.appendInPlace)return;if(0===e.assetList.length&&e.assetListLoader)return}if(this.bufferedPos=e,o>n&&o>a)this.bufferedToItem(s);else{const t=this.primaryDetails;this.primaryLive&&t&&e>t.edge-t.targetduration&&s.start<t.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(s)&&this.preloadAssets(s.event,0)}}else n&&s&&!this.itemsMatch(s,i)&&(o===a?this.bufferedToItem(s):o===a+1&&this.bufferedToItem(t[o]))}assetsBuffered(e,t){return 0!==e.event.assetList.length&&!e.event.assetList.some(e=>{const n=this.getAssetPlayer(e.identifier);return!(null!=n&&n.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:r,events:i}=n;if(!r||!i)return t;const s=this.isInterstitial(e),a=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const o=a?a.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${segmentToString(e)}`+(t?` (${o.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(s){const t=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((e,n)=>{const r=this.getAssetPlayer(e.identifier);r&&(n===t&&r.loadSource(),r.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(e=>e.pauseBuffering());this.hls.trigger(Events$1.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:i.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled)if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(null!==n){this.bufferingAsset=null;const t=this.detachedData;if(t)if(t.mediaSource){const t=!0;this.attachPrimary(e.start,e,t)}else this.preloadPrimary(e);else this.preloadPrimary(e)}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,r=0===n.assetList.length&&!n.assetListLoader,i=n.cue.once;if(r||!i){const e=this.preloadAssets(n,t);if(null!=e&&e.interstitial.appendInPlace){const t=this.primaryMedia;t&&this.bufferAssetPlayer(e,t)}}}preloadAssets(e,t){const n=e.assetUrl,r=e.assetList.length,i=0===r&&!e.assetListLoader,s=e.cue.once;if(i){const i=e.timelineStart;if(e.appendInPlace){var a;const t=this.playingItem;this.isInterstitial(t)||(null==t||null==(a=t.nextEvent)?void 0:a.identifier)!==e.identifier||this.flushFrontBuffer(i+.25)}let s,o=0;if(!this.playingItem&&this.primaryLive&&(o=this.hls.startPosition,-1===o&&(o=this.hls.liveSyncPosition||0)),o&&!e.cue.pre&&!e.cue.post){const e=o-i;e>0&&(s=Math.round(1e3*e)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:r} ${e}${s?` live-start: ${o} start-offset: ${s}`:""}`),n)return this.createAsset(e,0,0,i,e.duration,n);const l=this.assetListLoader.loadAssetList(e,s);l&&(e.assetListLoader=l)}else if(!s&&r){for(let i=t;i<r;i++){const t=e.assetList[i],n=this.getAssetPlayerQueueIndex(t.identifier);-1!==n&&!this.playerQueue[n].destroyed||t.error||this.createAssetPlayer(e,t,i)}const n=e.assetList[t];if(n){const e=this.getAssetPlayer(n.identifier);return e&&e.loadSource(),e}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`);Object.keys(t).forEach(t=>{this.hls.trigger(Events$1.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:t})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t)for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n];return null}createAsset(e,t,n,r,i,s){const a={parentIdentifier:e.identifier,identifier:generateAssetIdentifier(e,s,t),duration:i,startOffset:n,timelineStart:r,uri:s};return this.createAssetPlayer(e,a,t)}createAssetPlayer(e,t,n){const r=this.hls,i=r.userConfig;let s=i.videoPreference;const a=r.loadLevelObj||r.levels[r.currentLevel];(s||a)&&(s=_extends$1({},s),a.videoCodec&&(s.videoCodec=a.videoCodec),a.videoRange&&(s.allowedVideoRanges=[a.videoRange]));const o=r.audioTracks[r.audioTrack],l=r.subtitleTracks[r.subtitleTrack];let c=0;if(this.primaryLive||e.appendInPlace){const e=this.timelinePos-t.timelineStart;if(e>1){const n=t.duration;n&&e<n&&(c=e)}}const u=t.identifier,d=_objectSpread2$1(_objectSpread2$1({},i),{},{maxMaxBufferLength:Math.min(180,r.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:u,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:c,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:s,audioPreference:o||i.audioPreference,subtitlePreference:l||i.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(d.timelineOffset=t.timelineStart));const h=d.cmcd;null!=h&&h.sessionId&&h.contentId&&(d.cmcd=_extends$1({},h,{contentId:hash(t.uri)})),this.getAssetPlayer(u)&&this.warn(`Duplicate date range identifier ${e} and asset ${u}`);const p=new HlsAssetPlayer(this.HlsPlayerClass,d,e,t);this.playerQueue.push(p),e.assetList[n]=t;let m=!0;const f=r=>{if(r.live){var i;const t=new Error(`Interstitials MUST be VOD assets ${e}`),r={fatal:!0,type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},s=(null==(i=this.schedule)?void 0:i.findEventIndex(e.identifier))||-1;return void this.handleAssetItemError(r,e,s,n,t.message)}const s=r.edge-r.fragmentStart,a=t.duration;(m||null===a||s>a)&&(m=!1,this.log(`Interstitial asset "${u}" duration change ${a} > ${s}`),t.duration=s,this.updateSchedule())};p.on(Events$1.LEVEL_UPDATED,(e,{details:t})=>f(t)),p.on(Events$1.LEVEL_PTS_UPDATED,(e,{details:t})=>f(t)),p.on(Events$1.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const g=(e,t)=>{const n=this.getAssetPlayer(u);if(n&&t.tracks){n.off(Events$1.BUFFER_CODECS,g),n.tracks=t.tracks;const e=this.primaryMedia;this.bufferingAsset===n.assetItem&&e&&!n.media&&this.bufferAssetPlayer(n,e)}};p.on(Events$1.BUFFER_CODECS,g);p.on(Events$1.BUFFERED_TO_END,()=>{var n;const r=this.getAssetPlayer(u);if(this.log(`buffered to end of asset ${r}`),!r||!this.schedule)return;const i=this.schedule.findEventIndex(e.identifier),s=null==(n=this.schedule.items)?void 0:n[i];this.isInterstitial(s)&&this.advanceAssetBuffering(s,t)});const x=t=>()=>{if(!this.getAssetPlayer(u)||!this.schedule)return;this.shouldPlay=!0;const n=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,n,t)};return p.once(Events$1.MEDIA_ENDED,x(n)),p.once(Events$1.PLAYOUT_LIMIT_REACHED,x(1/0)),p.on(Events$1.ERROR,(t,r)=>{if(!this.schedule)return;const i=this.getAssetPlayer(u);if(r.details===ErrorDetails.BUFFER_STALLED_ERROR)return null!=i&&i.appendInPlace?void this.handleInPlaceStall(e):(this.onTimeupdate(),void this.checkBuffer(!0));this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${r.error} ${e}`)}),p.on(Events$1.DESTROYING,()=>{if(!this.getAssetPlayer(u)||!this.schedule)return;const t=new Error(`Asset player destroyed unexpectedly ${u}`),r={fatal:!0,type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),n,t.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${eventAssetToString(t)}`),this.hls.trigger(Events$1.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:p}),p}clearInterstitial(e,t){e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(-1!==t){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(-1!==n){this.log(`clear asset player "${e}" toSegment: ${t?segmentToString(t):t}`);const r=this.playerQueue[n];this.transferMediaFromPlayer(r,t),this.playerQueue.splice(n,1),r.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,r,i){const{interstitial:s,assetItem:a,assetId:o}=e,l=s.assetList.length,c=this.playingAsset;this.endedAsset=null,this.playingAsset=a,c&&c.identifier===o||(c&&(this.clearAssetPlayer(c.identifier,n[r]),delete c.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${l} ${eventAssetToString(a)}`),this.hls.trigger(Events$1.INTERSTITIAL_ASSET_STARTED,{asset:a,assetListIndex:t,event:s,schedule:n.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,i)}bufferAssetPlayer(e,t){var n,r;if(!this.schedule)return;const{interstitial:i,assetItem:s}=e,a=this.schedule.findEventIndex(i.identifier),o=null==(n=this.schedule.items)?void 0:n[a];if(!o)return;e.loadSource(),this.setBufferingItem(o),this.bufferingAsset=s;const l=this.getBufferingPlayer();if(l===e)return;const c=i.appendInPlace;if(c&&!1===(null==l?void 0:l.interstitial.appendInPlace))return;const u=(null==l?void 0:l.tracks)||(null==(r=this.detachedData)?void 0:r.tracks)||this.requiredTracks;if(c&&s!==this.playingAsset){if(!e.tracks)return void this.log(`Waiting for track info before buffering ${e}`);if(u&&!isCompatibleTrackChange(u,e.tracks)){const t=new Error(`Asset ${eventAssetToString(s)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(u)}')`),n={fatal:!0,type:ErrorTypes.OTHER_ERROR,details:ErrorDetails.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},r=i.findAssetIndex(s);return void this.handleAssetItemError(n,i,a,r,t.message)}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const r=n.currentTime,i=t.findAssetIndex(e,r),s=e.assetList[i];if(s){const a=this.getAssetPlayer(s.identifier);if(a){const o=a.currentTime||r-s.timelineStart,l=a.duration-o;if(this.warn(`Stalled at ${o} of ${o+l} in ${a} ${e} (media.currentTime: ${r})`),o&&(l/n.playbackRate<.5||a.bufferedInPlaceToEnd(n))&&a.hls){const n=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,n,i)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,r,i){if(e.details===ErrorDetails.BUFFER_STALLED_ERROR)return;const s=t.assetList[r]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${s?eventAssetToString(s):s} ${e.error}`),!this.schedule)return;const a=(null==s?void 0:s.identifier)||"",o=this.getAssetPlayerQueueIndex(a),l=this.playerQueue[o]||null,c=this.schedule.items,u=_extends$1({},e,{fatal:!1,errorAction:createDoNothingErrorAction(!0),asset:s,assetListIndex:r,event:t,schedule:c,scheduleIndex:n,player:l});if(this.hls.trigger(Events$1.INTERSTITIAL_ASSET_ERROR,u),!e.fatal)return;const d=this.playingAsset,h=this.bufferingAsset,p=new Error(i);if(s&&(this.clearAssetPlayer(a,null),s.error=p),t.assetList.some(e=>!e.error))for(let m=r;m<t.assetList.length;m++)this.resetAssetPlayer(t.assetList[m].identifier);else t.error=p;this.updateSchedule(!0),t.error?this.primaryFallback(t):d&&d.identifier===a?this.advanceAfterAssetEnded(t,n,r):h&&h.identifier===a&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,h)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${segmentToString(n)} error: ${e.error}`);let r=this.timelinePos;-1===r&&(r=this.hls.startPosition);const i=this.updateItem(n,r);if(this.itemsMatch(n,i)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t)),!this.schedule)return;const s=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(s)}else this.checkStart()}onAssetListLoaded(e,t){var n,r;const i=t.event,s=i.identifier,a=t.assetListResponse.ASSETS;if(null==(n=this.schedule)||!n.hasEvent(s))return;const o=i.timelineStart,l=i.duration;let c=0;a.forEach((e,t)=>{const n=parseFloat(e.DURATION);this.createAsset(i,t,c,o+c,n,e.URI),c+=n}),i.duration=c,this.log(`Loaded asset-list with duration: ${c} (was: ${l}) ${i}`);const u=this.waitingItem,d=(null==u?void 0:u.event.identifier)===s;this.updateSchedule();const h=null==(r=this.bufferingItem)?void 0:r.event;if(d){var p;const e=this.schedule.findEventIndex(s),t=null==(p=this.schedule.items)?void 0:p[e];if(t){if(!this.playingItem&&this.timelinePos>t.end){if(this.schedule.findItemIndexAtTime(this.timelinePos)!==e)return i.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${i}`),this.updateSchedule(!0),void this.primaryFallback(i)}this.setBufferingItem(t)}this.setSchedulePosition(e)}else if((null==h?void 0:h.identifier)===s){const e=i.assetList[0];if(e){const t=this.getAssetPlayer(e.identifier);if(h.appendInPlace){const e=this.primaryMedia;t&&e&&this.bufferAssetPlayer(t,e)}else t&&t.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case ErrorDetails.ASSET_LIST_PARSING_ERROR:case ErrorDetails.ASSET_LIST_LOAD_ERROR:case ErrorDetails.ASSET_LIST_LOAD_TIMEOUT:{const e=t.interstitial;e&&(this.updateSchedule(!0),this.primaryFallback(e));break}case ErrorDetails.BUFFER_STALLED_ERROR:{const e=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(e)&&e.event.appendInPlace)return void this.handleInPlaceStall(e.event);this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const TICK_INTERVAL$2=500;class SubtitleStreamController extends BaseStreamController{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",PlaylistLevelType.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Events$1.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Events$1.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Events$1.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Events$1.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Events$1.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(Events$1.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Events$1.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Events$1.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Events$1.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Events$1.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Events$1.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(Events$1.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=State.IDLE,this.setInterval(TICK_INTERVAL$2),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(this.fragContextChanged(n)||(isMediaFragment(n)&&(this.fragPrevious=n),this.state=State.IDLE),!r)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let s;const a=n.start;for(let l=0;l<i.length;l++)if(a>=i[l].start&&a<=i[l].end){s=i[l];break}const o=n.start+n.duration;s?s.end=o:(s={start:a,end:o},i.push(s)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(0===n&&r!==Number.POSITIVE_INFINITY){const e=r-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach(t=>{for(let n=0;n<t.length;)if(t[n].end<=e)t.shift();else{if(!(t[n].start<e))break;t[n].start=e,n++}}),this.fragmentTracker.removeFragmentsInRange(n,e,PlaylistLevelType.SUBTITLE)}}onError(e,t){const n=t.frag;(null==n?void 0:n.type)===PlaylistLevelType.SUBTITLE&&(t.details===ErrorDetails.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==State.STOPPED&&(this.state=State.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){this.levels&&subtitleOptionsIdentical(this.levels,t)?this.levels=t.map(e=>new Level(e)):(this.tracksBuffered=[],this.levels=t.map(e=>{const t=new Level(e);return this.tracksBuffered[t.id]=[],t}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,PlaylistLevelType.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,null==(n=this.levels)||!n.length||-1===this.currentTrackId)return void this.clearInterval();const r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==State.STOPPED&&this.setInterval(TICK_INTERVAL$2)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:r,levels:i}=this,{details:s,id:a}=t;if(!i)return void this.warn(`Subtitle tracks were reset while loading level ${a}`);const o=i[a];if(a>=i.length||!o)return;this.log(`Subtitle track ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(s.live||null!=(n=o.details)&&n.live){if(s.deltaUpdateFailed)return;const e=this.mainDetails;if(!e)return void(this.startFragRequested=!1);const t=e.fragments[0];var c;if(o.details)l=this.alignPlaylists(s,o.details,null==(c=this.levelLastLoaded)?void 0:c.details),0===l&&t&&(l=t.start,addSliding(s,l));else s.hasProgramDateTime&&e.hasProgramDateTime?(alignMediaPlaylistByPDT(s,e),l=s.fragmentStart):t&&(l=t.start,addSliding(s,l));e&&!this.startFragRequested&&this.setStartPosition(e,l)}if(o.details=s,this.levelLastLoaded=o,a===r&&(this.hls.trigger(Events$1.SUBTITLE_TRACK_UPDATED,{details:s,id:a,groupId:t.groupId}),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===State.IDLE)){findFragmentByPTS(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&null!=r&&r.key&&r.iv&&isFullSegmentEncryption(r.method)){const e=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer,getAesModeFromFullSegmentMethod(r.method)).catch(e=>{throw i.trigger(Events$1.ERROR,{type:ErrorTypes.MEDIA_ERROR,details:ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e}).then(n=>{const r=performance.now();i.trigger(Events$1.FRAG_DECRYPTED,{frag:t,payload:n,stats:{tstart:e,tdecrypt:r}})}).catch(e=>{this.warn(`${e.name}: ${e.message}`),this.state=State.IDLE})}}doTick(){if(this.media){if(this.state===State.IDLE){const{currentTrackId:e,levels:t}=this,n=null==t?void 0:t[e];if(!n||!t.length||!n.details)return;if(this.waitForLive(n))return;const{config:r}=this,i=this.getLoadPosition(),s=BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,r.maxBufferHole),{end:a,len:o}=s,l=n.details;if(o>this.hls.maxBufferLength+l.levelTargetDuration)return;const c=l.fragments,u=c.length,d=l.edge;let h=null;const p=this.fragPrevious;if(a<d){const e=r.maxFragLookUpTolerance,t=a>d-e?0:e;h=findFragmentByPTS(p,c,Math.max(c[0].start,a),t),!h&&p&&p.start<c[0].start&&(h=c[0])}else h=c[u-1];if(h=this.filterReplacedPrimary(h,n.details),!h)return;const m=c[h.sn-l.startSN-1];if(m&&m.cc===h.cc&&this.fragmentTracker.getState(m)===FragmentState.NOT_LOADED&&(h=m),this.fragmentTracker.getState(h)===FragmentState.NOT_LOADED){const e=this.mapToInitFragWhenRequired(h);e&&this.loadFragment(e,n,a)}}}else this.state=State.IDLE}loadFragment(e,t,n){isMediaFragment(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new BufferableInstance(this.tracksBuffered[this.currentTrackId]||[])}}class BufferableInstance{constructor(e){this.buffered=void 0;const t=(t,n,r)=>{if((n>>>=0)>r-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${n}) is greater than the maximum bound (${r})`);return e[n][t]};this.buffered={get length(){return e.length},end:n=>t("end",n,e.length),start:n=>t("start",n,e.length)}}}const specialCea608CharsCodes={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},getCharForByte=e=>String.fromCharCode(specialCea608CharsCodes[e]||e),NR_ROWS=15,NR_COLS=100,rowsLowCh1={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},rowsHighCh1={17:2,18:4,21:6,22:8,23:10,19:13,20:15},rowsLowCh2={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},rowsHighCh2={25:2,26:4,29:6,30:8,31:10,27:13,28:15},backgroundColors=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class CaptionsLogger{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n="function"==typeof t?t():t;logger.log(`${this.time} [${e}] ${n}`)}}}const numArrayToHexArray=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class PenState{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class StyledUnicodeChar{constructor(){this.uchar=" ",this.penState=new PenState}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class Row{constructor(e){this.chars=[],this.pos=0,this.currPenState=new PenState,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<NR_COLS;t++)this.chars.push(new StyledUnicodeChar);this.logger=e}equals(e){for(let t=0;t<NR_COLS;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<NR_COLS;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<NR_COLS;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>NR_COLS&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=NR_COLS)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=getCharForByte(e);this.pos>=NR_COLS?this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<NR_COLS;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<NR_COLS;n++){const r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class CaptionScreen{constructor(e){this.rows=[],this.currRow=NR_ROWS-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<NR_ROWS;t++)this.rows.push(new Row(e));this.logger=e}reset(){for(let e=0;e<NR_ROWS;e++)this.rows[e].clear();this.currRow=NR_ROWS-1}equals(e){let t=!0;for(let n=0;n<NR_ROWS;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<NR_ROWS;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<NR_ROWS;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<NR_ROWS;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const r=n.rows[e].cueStartTime,i=this.logger.time;if(null!==r&&null!==i&&r<i)for(let s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(n.rows[e+s])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,r=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let i=0;i<NR_ROWS;i++){const n=this.rows[i].getTextString();n&&(r=i+1,e?t.push("Row "+r+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class Cea608Channel{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new CaptionScreen(n),this.nonDisplayedMemory=new CaptionScreen(n),this.lastOutputScreen=new CaptionScreen(n),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[NR_ROWS-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Cea608Parser{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=createCmdHistory(),this.logger=void 0;const r=this.logger=new CaptionsLogger;this.channels=[null,new Cea608Channel(e,t,r),new Cea608Channel(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const e=127&t[n],r=127&t[n+1];let i=!1,s=null;if(0===e&&0===r)continue;this.logger.log(3,()=>"["+numArrayToHexArray([t[n],t[n+1]])+"] -> ("+numArrayToHexArray([e,r])+")");const a=this.cmdHistory;if(e>=16&&e<=31){if(hasCmdRepeated(e,r,a)){setLastCmd(null,null,a),this.logger.log(3,()=>"Repeated command ("+numArrayToHexArray([e,r])+") is dropped");continue}setLastCmd(e,r,this.cmdHistory),i=this.parseCmd(e,r),i||(i=this.parseMidrow(e,r)),i||(i=this.parsePAC(e,r)),i||(i=this.parseBackgroundAttributes(e,r))}else setLastCmd(null,null,a);if(!i&&(s=this.parseChars(e,r),s)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(s)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||s||this.logger.log(2,()=>"Couldn't parse cleaned data "+numArrayToHexArray([e,r])+" orig: "+numArrayToHexArray([t[n],t[n+1]]))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;const n=20===e||21===e||23===e?1:2,r=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.currentChannel=n,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+numArrayToHexArray([e,t])+")"),!0)}return!1}parsePAC(e,t){let n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;const r=e<=23?1:2;n=t>=64&&t<=95?1===r?rowsLowCh1[e]:rowsLowCh2[e]:1===r?rowsHighCh1[e]:rowsHighCh2[e];const i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(n,t)),this.currentChannel=r,!0)}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=!(1&~n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}parseChars(e,t){let n,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,()=>"Special char '"+getCharForByte(e)+"' in channel "+n),r=[e]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+numArrayToHexArray(r).join(",")),r}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let n;const r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=backgroundColors[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(r),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}setLastCmd(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function setLastCmd(e,t,n){n.a=e,n.b=t}function hasCmdRepeated(e,t,n){return n.a===e&&n.b===t}function createCmdHistory(){return{a:null,b:null}}var VTTCue$1=function(){if(null!=optionalSelf&&optionalSelf.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;const n=t.toLowerCase();return!!~e.indexOf(n)&&n}function r(e){return n(t,e)}function i(e,...t){let n=1;for(;n<arguments.length;n++){const t=arguments[n];for(const n in t)e[n]=t[n]}return e}function s(t,s,a){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let c="",u=!1,d=t,h=s,p=a,m=null,f="",g=!0,x="auto",v="start",y=50,_="middle",E=50,b="middle";Object.defineProperty(o,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},l,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",i({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},l,{get:function(){return m},set:function(e){m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},l,{get:function(){return f},set:function(t){const r=function(t){return n(e,t)}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");f=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},l,{get:function(){return x},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");x=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},l,{get:function(){return v},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},l,{get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},l,{get:function(){return _},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},l,{get:function(){return b},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),o.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class StringDecoder{decode(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function parseTimeStamp(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}const n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class Settings{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function parseOptions(e,t,n,r){const i=r?e.split(r):[e];for(const s in i){if("string"!=typeof i[s])continue;const e=i[s].split(n);if(2!==e.length)continue;t(e[0],e[1])}}const defaults=new VTTCue$1(0,0,""),center="middle"===defaults.align?"middle":"center";function parseCue(e,t,n){const r=e;function i(){const t=parseTimeStamp(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=i(),s(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.slice(3),s(),t.endTime=i(),s(),function(e,t){const r=new Settings;parseOptions(e,function(e,t){let i;switch(e){case"region":for(let i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",center,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",center,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",center,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");let i=r.get("line","auto");"auto"===i&&-1===defaults.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",center);let s=r.get("position","auto");"auto"===s&&50===defaults.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function fixLineBreaks(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class VTTParser{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new StringDecoder,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function n(){let e=t.buffer,n=0;for(e=fixLineBreaks(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;const r=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),r}function r(e){parseOptions(e,function(e,t){},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=n();const r=e.match(/^()?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let i=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(i?i=!1:e=n(),t.state){case"HEADER":/:/.test(e)?r(e):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new VTTCue$1(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{parseCue(e,t.cue,t.regionList)}catch(e2){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const n=-1!==e.indexOf("--\x3e");if(!e||n&&(i=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(e2){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e2){e.onparsingerror&&e.onparsingerror(e2)}return e.onflush&&e.onflush(),this}}const LINEBREAKS=/\r\n|\n\r|\n|\r/g,startsWith=function(e,t,n=0){return e.slice(n,n+t.length)===t},cueString2millis=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(isFiniteNumber(t)&&isFiniteNumber(n)&&isFiniteNumber(r)&&isFiniteNumber(i)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=6e4*r,t+=36e5*i,t};function generateCueId(e,t,n){return hash(e.toString())+hash(t.toString())+hash(n)}const calculateOffset=function(e,t,n){let r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!=(s=i)&&s.new;){var s;e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC]}e.presentationOffset=n};function parseWebVTT(e,t,n,r,i,s,a){const o=new VTTParser,l=utf8ArrayToStr(new Uint8Array(e)).trim().replace(LINEBREAKS,"\n").split("\n"),c=[],u=t?toMpegTsClockFromTimescale(t.baseTime,t.timescale):0;let d,h="00:00.000",p=0,m=0,f=!0;o.oncue=function(e){const s=n[r];let a=n.ccOffset;const o=(p-u)/9e4;if(null!=s&&s.new&&(void 0!==m?a=n.ccOffset=s.start:calculateOffset(n,r,o)),o){if(!t)return void(d=new Error("Missing initPTS for VTT MPEGTS"));a=o-n.presentationOffset}const l=e.endTime-e.startTime,h=normalizePts(9e4*(e.startTime+a-m),9e4*i)/9e4;e.startTime=Math.max(h,0),e.endTime=Math.max(h+l,0);const f=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(f)),e.id||(e.id=generateCueId(e.startTime,e.endTime,f)),e.endTime>0&&c.push(e)},o.onparsingerror=function(e){d=e},o.onflush=function(){d?a(d):s(c)},l.forEach(e=>{if(f){if(startsWith(e,"X-TIMESTAMP-MAP=")){f=!1,e.slice(16).split(",").forEach(e=>{startsWith(e,"LOCAL:")?h=e.slice(6):startsWith(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))});try{m=cueString2millis(h)/1e3}catch(t){d=t}return}""===e&&(f=!1)}o.parse(e+"\n")}),o.flush()}const IMSC1_CODEC="stpp.ttml.im1t",HMSF_REGEX=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,TIME_UNIT_REGEX=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,textAlignToLineAlign={left:"start",center:"center",right:"end",start:"start",end:"end"};function parseIMSC1(e,t,n,r){const i=findBox(new Uint8Array(e),["mdat"]);if(0===i.length)return void r(new Error("Could not parse IMSC1 mdat"));const s=i.map(e=>utf8ArrayToStr(e)),a=toTimescaleFromScale(t.baseTime,1,t.timescale);try{s.forEach(e=>n(parseTTML(e,a)))}catch(o){r(o)}}function parseTTML(e,t){const n=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(r).reduce((e,t)=>(e[t]=n.getAttribute(`ttp:${t}`)||r[t],e),{}),s="preserve"!==n.getAttribute("xml:space"),a=collectionToDictionary(getElementCollection(n,"styling","style")),o=collectionToDictionary(getElementCollection(n,"layout","region")),l=getElementCollection(n,"body","[begin]");return[].map.call(l,e=>{const n=getTextContent(e,s);if(!n||!e.hasAttribute("begin"))return null;const r=parseTtmlTime(e.getAttribute("begin"),i),l=parseTtmlTime(e.getAttribute("dur"),i);let c=parseTtmlTime(e.getAttribute("end"),i);if(null===r)throw timestampParsingError(e);if(null===c){if(null===l)throw timestampParsingError(e);c=r+l}const u=new VTTCue$1(r-t,c-t,n);u.id=generateCueId(u.startTime,u.endTime,u.text);const d=getTtmlStyles(o[e.getAttribute("region")],a[e.getAttribute("style")],a),{textAlign:h}=d;if(h){const e=textAlignToLineAlign[h];e&&(u.lineAlign=e),u.align=h}return _extends$1(u,d),u}).filter(e=>null!==e)}function getElementCollection(e,t,n){const r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function collectionToDictionary(e){return e.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function getTextContent(e,t){return[].slice.call(e.childNodes).reduce((e,n,r)=>{var i;return"br"===n.nodeName&&r?e+"\n":null!=(i=n.childNodes)&&i.length?getTextContent(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent},"")}function getTtmlStyles(e,t,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const s=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return s&&n.hasOwnProperty(s)&&(i=n[s]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((n,s)=>{const a=getAttributeNS(t,r,s)||getAttributeNS(e,r,s)||getAttributeNS(i,r,s);return a&&(n[s]=a),n},{})}function getAttributeNS(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function timestampParsingError(e){return new Error(`Could not parse ttml timestamp ${e}`)}function parseTtmlTime(e,t){if(!e)return null;let n=parseTimeStamp(e);return null===n&&(HMSF_REGEX.test(e)?n=parseHoursMinutesSecondsFrames(e,t):TIME_UNIT_REGEX.test(e)&&(n=parseTimeUnits(e,t))),n}function parseHoursMinutesSecondsFrames(e,t){const n=HMSF_REGEX.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}function parseTimeUnits(e,t){const n=TIME_UNIT_REGEX.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}class OutputFilter{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class TimelineController{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(Events$1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Events$1.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Events$1.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Events$1.FRAG_LOADING,this.onFragLoading,this),e.on(Events$1.FRAG_LOADED,this.onFragLoaded,this),e.on(Events$1.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(Events$1.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(Events$1.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Events$1.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(Events$1.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(Events$1.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Events$1.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Events$1.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Events$1.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Events$1.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Events$1.FRAG_LOADING,this.onFragLoading,this),e.off(Events$1.FRAG_LOADED,this.onFragLoaded,this),e.off(Events$1.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(Events$1.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(Events$1.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Events$1.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(Events$1.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new OutputFilter(this,"textTrack1"),t=new OutputFilter(this,"textTrack2"),n=new OutputFilter(this,"textTrack3"),r=new OutputFilter(this,"textTrack4");this.cea608Parser1=new Cea608Parser(1,e,t),this.cea608Parser2=new Cea608Parser(3,n,r)}addCues(e,t,n,r,i){let s=!1;for(let a=i.length;a--;){const e=i[a],r=intersection(e[0],e[1],t,n);if(r>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],n),s=!0,r/(n-t)>.5))return}if(s||i.push([t,n]),this.config.renderTextTracksNatively){const i=this.captionsTracks[e];this.Cues.newCue(i,t,n,r)}else{const i=this.Cues.newCue(null,t,n,r);this.hls.trigger(Events$1.CUES_PARSED,{type:"captions",cues:i,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:i,trackId:s}){const{unparsedVttFrags:a}=this;n===PlaylistLevelType.MAIN&&(this.initPTS[t.cc]={baseTime:r,timescale:i,trackId:s}),a.length&&(this.unparsedVttFrags=[],a.forEach(e=>{this.initPTS[e.frag.cc]?this.onFragLoaded(Events$1.FRAG_LOADED,e):this.hls.trigger(Events$1.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const i=n.textTracks[r];if(canReuseVttTextTrack(i,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:i,languageCode:s}=t[e],a=this.getExistingTrack(i,s);if(a)n[e]=a,clearCurrentCues(n[e]),sendAddTrackEvent(n[e],r);else{const t=this.createTextTrack("captions",i,s);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(Events$1.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:r}=this;Object.keys(r).forEach(e=>{clearCurrentCues(r[e]),delete r[e]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=newVTTCCs(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)clearCurrentCues(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some(e=>e.textCodec===IMSC1_CODEC);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(subtitleOptionsIdentical(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const e=this.media,t=e?filterSubtitleTracks(e.textTracks):null;if(this.tracks.forEach((e,n)=>{let r;if(t){let n=null;for(let r=0;r<t.length;r++)if(t[r]&&canReuseVttTextTrack(t[r],e)){n=t[r],t[r]=null;break}n&&(r=n)}if(r)clearCurrentCues(r);else{const t=captionsOrSubtitlesFromCharacteristics(e);r=this.createTextTrack(t,e.name,e.lang),r&&(r.mode="disabled")}r&&this.textTracks.push(r)}),null!=t&&t.length){const e=t.filter(e=>null!==e).map(e=>e.label);e.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map(e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}));this.hls.trigger(Events$1.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const n=`textTrack${t[1]}`,r=this.captionsProperties[n];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===PlaylistLevelType.MAIN){var n,r;const{cea608Parser1:e,cea608Parser2:i,lastSn:s}=this,{cc:a,sn:o}=t.frag,l=null!=(n=null==(r=t.part)?void 0:r.index)?n:-1;e&&i&&(o!==s+1||o===s&&l!==this.lastPartIndex+1||a!==this.lastCc)&&(e.reset(),i.reset()),this.lastCc=a,this.lastSn=o,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===PlaylistLevelType.SUBTITLE)if(r.byteLength){const e=n.decryptdata,i="stats"in t;if(null==e||!e.encrypted||i){const e=this.tracks[n.level],i=this.vttCCs;i[n.cc]||(i[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),e&&e.textCodec===IMSC1_CODEC?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(Events$1.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;parseIMSC1(t,this.initPTS[e.cc],t=>{this._appendCues(t,e.level),n.trigger(Events$1.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},t=>{n.logger.log(`Failed to parse IMSC1: ${t}`),n.trigger(Events$1.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})})}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:i,unparsedVttFrags:s}=this,a=i.length-1;if(!i[n.cc]&&-1===a)return void s.push(e);const o=this.hls;parseWebVTT(null!=(t=n.initSegment)&&t.data?appendUint8Array(n.initSegment.data,new Uint8Array(r)).buffer:r,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,e=>{this._appendCues(e,n.level),o.trigger(Events$1.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},t=>{const i="Missing initPTS for VTT MPEGTS"===t.message;i?s.push(e):this._fallbackToIMSC1(n,r),o.logger.log(`Failed to parse VTT cue: ${t}`),i&&a>n.cc||o.trigger(Events$1.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||parseIMSC1(t,this.initPTS[e.cc],()=>{n.textCodec=IMSC1_CODEC,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach(e=>addCueToTrack(n,e))}else{const r=this.tracks[t];if(!r)return;const i=r.default?"default":"subtitles"+t;n.trigger(Events$1.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===PlaylistLevelType.SUBTITLE&&this.onFragLoaded(Events$1.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:r}=t;if(n.type!==PlaylistLevelType.MAIN||"NONE"!==this.closedCaptionsForLevel(n))for(let i=0;i<r.length;i++){const e=r[i].bytes;if(e){this.cea608Parser1||this.initCea608Parsers();const t=this.extractCea608Data(e);this.cea608Parser1.addData(r[i].pts,t[0]),this.cea608Parser2.addData(r[i].pts,t[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:r,type:i}){const{media:s}=this;if(s&&!(s.currentTime<n)){if(!i||"video"===i){const{captionsTracks:e}=this;Object.keys(e).forEach(r=>removeCuesInRange(e[r],t,n))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==r){const{textTracks:e}=this;Object.keys(e).forEach(n=>removeCuesInRange(e[n],t,r))}}}extractCea608Data(e){const t=[[],[]],n=31&e[0];let r=2;for(let i=0;i<n;i++){const n=e[r++],i=127&e[r++],s=127&e[r++];if(0===i&&0===s)continue;if(!!(4&n)){const e=3&n;0!==e&&1!==e||(t[e].push(i),t[e].push(s))}}return t}}function captionsOrSubtitlesFromCharacteristics(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function canReuseVttTextTrack(e,t){return!!e&&e.kind===captionsOrSubtitlesFromCharacteristics(t)&&subtitleTrackMatchesTextTrack(t,e)}function intersection(e,t,n,r){return Math.min(t,r)-Math.max(e,n)}function newVTTCCs(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const WHITESPACE_CHAR=/\s/,Cues={newCue(e,t,n,r){const i=[];let s,a,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<r.rows.length;h++)if(s=r.rows[h],o=!0,l=0,c="",!s.isEmpty()){var d;for(let e=0;e<s.chars.length;e++)WHITESPACE_CHAR.test(s.chars[e].uchar)&&o?l++:(c+=s.chars[e].uchar,o=!1);s.cueStartTime=t,t===n&&(n+=1e-4),l>=16?l--:l++;const r=fixLineBreaks(c.trim()),p=generateCueId(t,n,r);null!=e&&null!=(d=e.cues)&&d.getCueById(p)||(a=new u(t,n,r),a.id=p,a.line=h+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*l/32)),i.push(a))}return e&&i.length&&(i.sort((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line),i.forEach(t=>addCueToTrack(e,t))),i}},AGE_HEADER_LINE_REGEX=/^age:\s*[\d.]+\s*$/im;class XhrLoader{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new LoadStats,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(this.loader===n&&!this.stats.aborted)return i(n,t.url)}).catch(e=>{if(this.loader===n&&!this.stats.aborted)return n.open("GET",t.url,!0),i(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(e=>{var i;null==(i=this.callbacks)||i.onError({code:n.status,text:e.message},t,n,r)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:s}=n.loadPolicy;if(r)for(const a in r)e.setRequestHeader(a,r[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=i&&isFiniteNumber(i)?i:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,i=this.config;if(!n.aborted&&r>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===r)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const r=t.status,l="text"===t.responseType?t.responseText:null;if(r>=200&&r<300){const i=null!=l?l:t.response;if(null!=i){var s,a;n.loading.end=Math.max(self.performance.now(),n.loading.first);const o="arraybuffer"===t.responseType?i.byteLength:i.length;n.loaded=n.total=o,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first);const l=null==(s=this.callbacks)?void 0:s.onProgress;l&&l(n,e,i,t);const c={url:t.responseURL,data:i,code:r};return void(null==(a=this.callbacks)||a.onSuccess(c,n,e,t))}}const c=i.loadPolicy.errorRetry;var o;if(shouldRetry(c,n.retry,!1,{url:e.url,data:void 0,code:r}))this.retry(c);else logger.error(`${r} while loading ${e.url}`),null==(o=this.callbacks)||o.onError({code:r,text:t.statusText},e,t,n)}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(shouldRetry(e,this.stats.retry,!0))this.retry(e);else{var t;logger.warn(`timeout while loading ${null==(t=this.context)?void 0:t.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=getRetryDelay(e,n.retry),n.retry++,logger.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&AGE_HEADER_LINE_REGEX.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const defaultLoadPolicy={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null};function timelineConfig(){return{cueHandler:Cues,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function getCueClass(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function SimpleVidstackPlayer({streamUrl:e,channelName:t,onError:n,onReady:r,isMobileMuted:i=!1,onUnmute:s}){const a=useTheme();console.log("SimpleVidstackPlayer props:",{streamUrl:e,channelName:t});const o=reactExports.useRef(null),[l,c]=reactExports.useState(!1),[u,d]=reactExports.useState(""),[h,p]=reactExports.useState(!1),[m,f]=reactExports.useState(.6),[g,x]=reactExports.useState(i),[v,y]=reactExports.useState(!1),[_,E]=reactExports.useState(!1),[b,C]=reactExports.useState(0),[S,T]=reactExports.useState(0),[R,j]=reactExports.useState(!0),[w,A]=reactExports.useState(!1),I=reactExports.useRef(null);reactExports.useEffect(()=>{var e;return null==(e=o.current)?void 0:e.subscribe(({paused:e,viewType:t,volume:n,muted:r,fullscreen:i,currentTime:s,duration:a})=>{console.log("Player state:",{paused:e,viewType:t,volume:n,muted:r,fullscreen:i,currentTime:s,duration:a}),p(e),f(n),x(r),y(i),C(s||0),T(a||0),E("pip"===t)})},[]),reactExports.useEffect(()=>{e&&(console.log("Testing stream accessibility for:",e),fetch(e,{method:"HEAD"}).then(e=>{console.log("Stream accessibility test:",{status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.headers.entries())})}).catch(e=>{console.error("Stream accessibility test failed:",e)}))},[e]);const k=()=>{I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{j(!1),A(!1)},3e3)},M=()=>{j(!0),A(!0),k()};reactExports.useEffect(()=>(l&&!u&&k(),()=>{I.current&&clearTimeout(I.current)}),[l,u]);const P=()=>{o.current&&(h?o.current.play():o.current.pause()),M()};return jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",width:"100%",aspectRatio:"16/9",backgroundColor:"#000",borderRadius:2},onMouseEnter:M,onMouseMove:M,onMouseLeave:()=>{},onTouchStart:M,onTouchMove:M,children:[jsxRuntimeExports.jsxs(MediaPlayer,{className:"vds-player",title:t||"IPTV Channel",src:e,crossOrigin:!0,playsInline:!0,autoplay:!0,muted:i,volume:i?0:.6,onProviderChange:function(e,t){isHLSProvider(e)&&(e.config={maxBufferLength:30,liveSyncDurationCount:3,enableWorker:!0,lowLatencyMode:!0,backBufferLength:90,maxBufferSize:6e7,maxBufferHole:.5,highBufferWatchdogPeriod:2,nudgeOffset:.2,nudgeMaxRetry:5,maxFragLookUpTolerance:.25,fragLoadingTimeOut:2e4,manifestLoadingTimeOut:1e4,levelLoadingTimeOut:1e4,enableSoftwareAES:!0,forceKeyFrameOnDiscontinuity:!0,liveDurationInfinity:!0,debug:!1},console.log("HLS provider configured"))},onCanPlay:function(e,t){c(!0),d(""),console.log("Player ready"),setTimeout(()=>{o.current&&i&&(console.log("Auto-unmuting mobile audio"),o.current.muted=!1,o.current.volume=.6,s&&s())},1e3),r&&r()},onError:function(e){var t,r,i,s,a,o,l,c;console.error("Vidstack Player Error:",e),console.log("Error details:",{code:null==(t=e.detail)?void 0:t.code,message:null==(r=e.detail)?void 0:r.message,data:null==(i=e.detail)?void 0:i.data});let u="The video stream failed to load.";"HLS_PLAYER_ERROR"===(null==(s=e.detail)?void 0:s.code)?u="HLS stream format not supported or stream is offline.":"MEDIA_ERR_NETWORK"===(null==(a=e.detail)?void 0:a.code)?u="Network error. Please check your connection.":"MEDIA_ERR_DECODE"===(null==(o=e.detail)?void 0:o.code)?u="Video codec not supported. Try a different browser.":"HLS_LOAD_ERROR"===(null==(l=e.detail)?void 0:l.code)?u="Failed to load HLS stream. The stream may be offline or inaccessible.":4===(null==(c=e.detail)?void 0:c.code)&&(u="HLS configuration error. Please try refreshing the page."),d(u),n&&n(u)},ref:o,style:{width:"100%",height:"100%"},preload:"metadata",children:[jsxRuntimeExports.jsx(MediaProvider,{}),jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",padding:2,opacity:R?1:0,transition:"opacity 0.3s ease",zIndex:9999,pointerEvents:"auto"},children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(IconButton,{onClick:P,sx:{color:"white",backgroundColor:"rgba(255,255,255,0.2)","&:hover":{backgroundColor:"rgba(255,255,255,0.3)"},width:40,height:40},children:h?jsxRuntimeExports.jsx(PlayIcon,{size:20}):jsxRuntimeExports.jsx(PauseIcon,{size:20})}),jsxRuntimeExports.jsx(IconButton,{onClick:()=>{o.current&&(o.current.muted=!g),M()},sx:{color:"white",backgroundColor:"rgba(255,255,255,0.2)","&:hover":{backgroundColor:"rgba(255,255,255,0.3)"},width:40,height:40},children:g||0===m?jsxRuntimeExports.jsx(MuteIcon,{size:20}):m<.5?jsxRuntimeExports.jsx(VolumeLowIcon,{size:20}):jsxRuntimeExports.jsx(VolumeHighIcon,{size:20})}),jsxRuntimeExports.jsx(Slider$1,{value:g?0:100*m,onChange:(e,t)=>{if(o.current){const e=t/100;o.current.volume=e,0===t?o.current.muted=!0:g&&(o.current.muted=!1)}M()},sx:{width:100,color:"white","& .MuiSlider-track":{backgroundColor:"white"},"& .MuiSlider-rail":{backgroundColor:"rgba(255,255,255,0.3)"},"& .MuiSlider-thumb":{backgroundColor:"white"}}})]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(IconButton,{onClick:()=>{o.current&&(_?o.current.exitPictureInPicture():o.current.enterPictureInPicture()),M()},sx:{color:"white",backgroundColor:"rgba(255,255,255,0.2)","&:hover":{backgroundColor:"rgba(255,255,255,0.3)"},width:40,height:40},children:_?jsxRuntimeExports.jsx(PictureInPictureExitIcon,{size:20}):jsxRuntimeExports.jsx(PictureInPictureIcon,{size:20})}),jsxRuntimeExports.jsx(IconButton,{onClick:()=>{o.current&&(v?o.current.exitFullscreen():o.current.enterFullscreen()),M()},sx:{color:"white",backgroundColor:"rgba(255,255,255,0.2)","&:hover":{backgroundColor:"rgba(255,255,255,0.3)"},width:40,height:40},children:v?jsxRuntimeExports.jsx(FullscreenExitIcon,{size:20}):jsxRuntimeExports.jsx(FullscreenIcon,{size:20})})]})]})})]}),l&&!u&&jsxRuntimeExports.jsx(Box,{onClick:()=>{P(),A(!0),setTimeout(()=>A(!1),1e3)},sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%","&:hover .center-button":{opacity:1,transform:"translate(-50%, -50%) scale(1.1)"}},children:jsxRuntimeExports.jsx(Box,{className:"center-button",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:w?1:0,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:80,height:80,borderRadius:"50%",background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",border:"2px solid rgba(255, 255, 255, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)","&:hover":{background:"rgba(0, 0, 0, 0.8)",borderColor:"rgba(255, 255, 255, 0.5)",boxShadow:"0 12px 40px rgba(0, 0, 0, 0.4)"}},children:h?jsxRuntimeExports.jsx(PlayIcon,{size:32,style:{color:"white",marginLeft:"4px"}}):jsxRuntimeExports.jsx(PauseIcon,{size:32,style:{color:"white"}})})}),!l&&!u&&jsxRuntimeExports.jsxs(Box,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",zIndex:12,textAlign:"center",width:"80%",maxWidth:320,p:3,borderRadius:2,background:"linear-gradient(160deg, rgba(0, 0, 0, 0.85) 0%, rgba(0, 0, 0, 0.65) 100%)",boxShadow:"0 18px 45px rgba(0, 0, 0, 0.45)",backdropFilter:"blur(8px)"},children:[jsxRuntimeExports.jsx(CircularProgress,{size:54,thickness:4,sx:{mb:2,color:a.palette.primary.main}}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",sx:{mb:1,fontWeight:600,letterSpacing:.5},children:["Preparing ",t||"the channel"]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{opacity:.85},children:e?"Connecting to live stream...":"No stream URL provided"}),jsxRuntimeExports.jsx(LinearProgress,{variant:"indeterminate",color:"primary",sx:{mt:3,height:6,borderRadius:999,backgroundColor:"rgba(255, 255, 255, 0.1)"}}),jsxRuntimeExports.jsx(Typography,{variant:"caption",sx:{display:"block",mt:1.5,opacity:.6},children:"Hang tightplayback will start automatically once the feed is ready."})]}),u&&jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",zIndex:5,p:2,borderRadius:1,backgroundColor:"rgba(0, 0, 0, 0.7)"},children:jsxRuntimeExports.jsx(Typography,{sx:{color:"white"},children:u})}),i&&l&&!u&&jsxRuntimeExports.jsxs(Box,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",textAlign:"center",zIndex:5,background:"linear-gradient(135deg, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.85) 100%)",backdropFilter:"blur(10px)",padding:{xs:2.5,sm:3},borderRadius:3,border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 20px 40px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.05)",maxWidth:{xs:"90%",sm:400},animation:"fadeInUp 0.6s ease-out","@keyframes fadeInUp":{"0%":{opacity:0,transform:"translate(-50%, -40%) scale(0.9)"},"100%":{opacity:1,transform:"translate(-50%, -50%) scale(1)"}}},children:[jsxRuntimeExports.jsx(Box,{sx:{width:80,height:80,borderRadius:"50%",background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",boxShadow:"0 10px 30px rgba(255,107,107,0.3)",animation:"pulse 2s infinite","@keyframes pulse":{"0%":{boxShadow:"0 10px 30px rgba(255,107,107,0.3)",transform:"scale(1)"},"50%":{boxShadow:"0 15px 40px rgba(255,107,107,0.5)",transform:"scale(1.05)"},"100%":{boxShadow:"0 10px 30px rgba(255,107,107,0.3)",transform:"scale(1)"}}},children:jsxRuntimeExports.jsx(Box,{sx:{fontSize:"2.5rem",animation:"bounce 1.5s infinite","@keyframes bounce":{"0%, 20%, 50%, 80%, 100%":{transform:"translateY(0)"},"40%":{transform:"translateY(-10px)"},"60%":{transform:"translateY(-5px)"}}},children:""})}),jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{mb:1.5,fontWeight:700,background:"linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 2px 4px rgba(0,0,0,0.3)",letterSpacing:"0.5px"},children:"Audio is Muted"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{mb:3,opacity:.9,lineHeight:1.6,color:"#e0e0e0",fontSize:{xs:"0.95rem",sm:"1rem"},maxWidth:280,margin:"0 auto"},children:"Tap the button below to enable sound and enjoy the full experience"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",size:"large",onClick:()=>{o.current&&(o.current.muted=!1,o.current.volume=.6,s&&s()),M()},sx:{background:"linear-gradient(135deg, #00d4aa 0%, #00b894 100%)",color:"white",fontWeight:700,fontSize:{xs:"1rem",sm:"1.1rem"},px:{xs:3,sm:4},py:{xs:1.5,sm:2},borderRadius:3,textTransform:"none",letterSpacing:"0.5px",boxShadow:"0 8px 25px rgba(0,212,170,0.3)",border:"2px solid rgba(255,255,255,0.1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&:hover":{background:"linear-gradient(135deg, #00b894 0%, #00a085 100%)",boxShadow:"0 12px 35px rgba(0,212,170,0.4)",transform:"translateY(-2px)","&::before":{transform:"translateX(100%)"}},"&:active":{transform:"translateY(0)",boxShadow:"0 4px 15px rgba(0,212,170,0.3)"},"&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)",transition:"transform 0.6s"}},children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1,position:"relative",zIndex:1},children:[jsxRuntimeExports.jsx(Box,{sx:{fontSize:"1.2rem"},children:""}),jsxRuntimeExports.jsx("span",{children:"Enable Audio"})]})}),jsxRuntimeExports.jsx(Typography,{variant:"caption",sx:{display:"block",mt:2,opacity:.6,color:"#b0b0b0",fontSize:"0.8rem"},children:"Tap anywhere on the video to start"})]})]})}_objectSpread2$1(_objectSpread2$1({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:6e7,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:XhrLoader,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:AbrController,bufferController:BufferController,capLevelController:CapLevelController,errorController:ErrorController,fpsController:FPSController,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:requestMediaKeySystemAccess,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:defaultLoadPolicy},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},timelineConfig()),{},{subtitleStreamController:SubtitleStreamController,subtitleTrackController:SubtitleTrackController,timelineController:TimelineController,audioStreamController:AudioStreamController,audioTrackController:AudioTrackController,emeController:EMEController,cmcdController:CMCDController,contentSteeringController:ContentSteeringController,interstitialsController:InterstitialsController}),(()=>{const e=getCueClass();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(e2){return Number.MAX_VALUE}Number.POSITIVE_INFINITY})();var React=reactExports;function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var React__default=_interopDefaultLegacy(React);function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _objectWithoutProperties$1(e,t){if(null==e)return{};var n,r,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_unsupportedIterableToArray$1(e,t)||_nonIterableRest$1()}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}function _iterableToArrayLimit$1(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);a=!0);}catch(err){o=!0,i=err}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return s}}function _unsupportedIterableToArray$1(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$1(e,t):void 0}}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==commonjsGlobal$1?commonjsGlobal$1:"undefined"!=typeof self?self:{},shakaPlayer_ui={},exports;
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
exports=shakaPlayer_ui,function(){var e="undefined"!=typeof window?window:commonjsGlobal,t={};for(var n in function(e,t,n){var r;function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var s="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},a=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var r=0;r<n.length;++r){var i=n[r];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{for(var n=a,r=e.split("."),i=0;i<r.length-1;i++){var o=r[i];if(!(o in n))break e;n=n[o]}(o=t(i=n[r=r[r.length-1]]))!=i&&null!=o&&s(n,r,{configurable:!0,writable:!0,value:o})}}function l(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}function u(e){if(!(e instanceof Array)){e=c(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}o("Symbol",function(e){function t(e,t){this.g=e,s(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}}),o("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=a[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&s(r.prototype,e,{configurable:!0,writable:!0,value:function(){return l(i(this))}})}return e});var d,h="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)d=Object.setPrototypeOf;else{var p;e:{var m={};try{m.__proto__={a:!0},p=m.a;break e}catch(Oy){}p=!1}d=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var f=d;function g(e,t){if(e.prototype=h(t.prototype),e.prototype.constructor=e,f)f(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Wi=t.prototype}function x(){this.B=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.s=0,this.G=this.i=null}function v(e){if(e.B)throw new TypeError("Generator is already running");e.B=!0}function y(e,t){e.i={ef:t,qf:!0},e.g=e.s||e.j}function _(e,t,n){return e.g=n,{value:t}}function E(e){e.g=0}function b(e,t,n){e.s=t,null!=n&&(e.j=n)}function C(e){e.s=0,e.j=2}function S(e,t,n){e.g=t,e.s=n||0}function T(e,t){e.s=t||0;var n=e.i.ef;return e.i=null,n}function R(e){e.G=[e.i],e.s=0,e.j=0}function j(e,t){var n=e.G.splice(0)[0];(n=e.i=e.i||n)?n.qf?e.g=e.s||e.j:null!=n.D&&e.j<n.D?(e.g=n.D,e.i=null):e.g=e.j:e.g=t}function w(e){this.g=new x,this.h=e}function A(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.B=!1,i;var s=i.value}catch(a){return e.g.l=null,y(e.g,a),I(e)}return e.g.l=null,r.call(e.g,s),I(e)}function I(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.B=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,y(e.g,n)}if(e.g.B=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.qf)throw t.ef;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function k(e){this.next=function(t){return v(e.g),e.g.l?t=A(e,e.g.l.next,t,e.g.C):(e.g.C(t),t=I(e)),t},this.throw=function(t){return v(e.g),e.g.l?t=A(e,e.g.l.throw,t,e.g.C):(y(e.g,t),t=I(e)),t},this.return=function(t){return function(e,t){v(e.g);var n=e.g.l;return n?A(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),I(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function M(e,t){var n=new k(new w(t));return f&&e.prototype&&f(n,e.prototype),n}function P(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(r,i){!function e(s){s.done?r(s.value):Promise.resolve(s.value).then(t,n).then(e,i)}(e.next())})}(new k(new w(e)))}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function O(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var s=e[i];if(t.call(n,s,i,e))return{wa:i,v:s}}return{wa:-1,v:void 0}}function $(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}x.prototype.C=function(e){this.h=e},x.prototype.return=function(e){this.i={return:e},this.g=this.j},x.prototype.D=function(e){this.g=e},o("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.B=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var i=a.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.L),reject:e(this.l)}},t.prototype.L=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.P(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.J(e):this.s(e)}},t.prototype.J=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.S(t,e):this.s(e)},t.prototype.l=function(e){this.C(2,e)},t.prototype.s=function(e){this.C(1,e)},t.prototype.C=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.M(),this.G()},t.prototype.M=function(){var e=this;i(function(){if(e.I()){var t=a.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.I=function(){if(this.B)return!1;var e=a.CustomEvent,t=a.Event,n=a.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=a.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.G=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)s.h(this.g[e]);this.g=null}};var s=new n;return t.prototype.P=function(e){var t=this.j();e.ld(t.resolve,t.reject)},t.prototype.S=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){s(n)}}:t}var i,s,a=new t(function(e,t){i=e,s=t});return this.ld(r(e,i),r(n,s)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.ld=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?s.h(n):this.g.push(n),this.B=!0},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=c(e),s=i.next();!s.done;s=i.next())r(s.value).ld(t,n)})},t.all=function(e){var n=c(e),i=n.next();return i.done?r([]):new t(function(e,t){function s(t){return function(n){a[t]=n,0==--o&&e(a)}}var a=[],o=0;do{a.push(void 0),o++,r(i.value).ld(s(a.length-1),t),i=n.next()}while(!i.done)})},t}),o("WeakMap",function(e){function t(e){if(this.g=(l+=Math.random()+1).toString(),e){e=c(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!L(e,o)){var t=new n;s(e,o,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(i){return!1}}())return e;var o="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var l=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(i(e),!L(e,o))throw Error("WeakMap key fail: "+e);return e[o][this.g]=t,this},t.prototype.get=function(e){return r(e)&&L(e,o)?e[o][this.g]:void 0},t.prototype.has=function(e){return r(e)&&L(e,o)&&L(e[o],this.g)},t.prototype.delete=function(e){return!!(r(e)&&L(e,o)&&L(e[o],this.g))&&delete e[o][this.g]},t}),o("Map",function(e){function t(){var e={};return e.wb=e.next=e.head=e}function n(e,t){var n=e.g;return l(function(){if(n){for(;n.head!=e.g;)n=n.wb;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?s.has(t)?n=s.get(t):(n=""+ ++a,s.set(t,n)):n="p_"+t;var r=e.h[n];if(r&&L(e.h,n))for(var i=0;i<r.length;i++){var o=r[i];if(t!=t&&o.key!=o.key||t===o.key)return{id:n,list:r,index:i,Ea:o}}return{id:n,list:r,index:-1,Ea:void 0}}function i(e){if(this.h={},this.g=t(),this.size=0,e){e=c(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(s){return!1}}())return e;var s=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this.h[n.id]=[]),n.Ea?n.Ea.value=t:(n.Ea={next:this.g,wb:this.g.wb,head:this.g,key:e,value:t},n.list.push(n.Ea),this.g.wb.next=n.Ea,this.g.wb=n.Ea,this.size++),this},i.prototype.delete=function(e){return!(!(e=r(this,e)).Ea||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.Ea.wb.next=e.Ea.next,e.Ea.next.wb=e.Ea.wb,e.Ea.head=null,this.size--,0))},i.prototype.clear=function(){this.h={},this.g=this.g.wb=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).Ea},i.prototype.get=function(e){return(e=r(this,e).Ea)&&e.value},i.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},i.prototype.keys=function(){return n(this,function(e){return e.key})},i.prototype.values=function(){return n(this,function(e){return e.value})},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var a=0;return i}),o("Array.prototype.keys",function(e){return e||function(){return D(this,function(e){return e})}}),o("Set",function(e){function t(e){if(this.g=new Map,e){e=c(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&!(i=r.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done}catch(s){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach(function(r){return e.call(t,r,r,n)})},t)}),o("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var s=0;!(i=e.next()).done;)r.push(t.call(n,i.value,s++))}else for(i=e.length,s=0;s<i;s++)r.push(t.call(n,e[s],s));return r}}),o("Array.prototype.findIndex",function(e){return e||function(e,t){return O(this,e,t).wa}}),o("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),o("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length,i=t||0;for(0>i&&(i=Math.max(i+r,0));i<r;i++){var s=n[i];if(s===e||Object.is(s,e))return!0}return!1}}),o("String.prototype.includes",function(e){return e||function(e,t){return-1!==$(this,e,"includes").indexOf(e,t||0)}}),o("Array.prototype.find",function(e){return e||function(e,t){return O(this,e,t).v}}),o("String.prototype.startsWith",function(e){return e||function(e,t){for(var n=$(this,e,"startsWith"),r=n.length,i=e.length,s=Math.max(0,Math.min(0|t,n.length)),a=0;a<i&&s<r;)if(n[s++]!=e[a++])return!1;return a>=i}});var N="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)L(r,i)&&(e[i]=r[i])}return e};o("Object.assign",function(e){return e||N}),o("Array.prototype.values",function(e){return e||function(){return D(this,function(e,t){return t})}}),o("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),o("Array.prototype.entries",function(e){return e||function(){return D(this,function(e,t){return[e,t]})}}),o("String.prototype.repeat",function(e){return e||function(e){var t=$(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),o("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),o("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)L(e,t)&&n.push(e[t]);return n}}),o("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),o("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)L(e,t)&&n.push([t,e[t]]);return n}});var F=this||self;function B(e,t){var n,r=e.split("."),i=F;r[0]in i||void 0===i.execScript||i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===t?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=t}function U(t,n){if(n)if(n instanceof Map)for(var r=c(n.keys()),i=r.next();!i.done;i=r.next())i=i.value,Object.defineProperty(this,i,{value:n.get(i),writable:!0,enumerable:!0});else for(r in n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function G(e){var t,n=new U(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}function V(){}function H(){}function W(){}function q(e,t){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];K.has(e)||(K.add(e),W.apply(V,u(n)))}function z(){}U.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},U.prototype.stopImmediatePropagation=function(){this.g=!0},U.prototype.stopPropagation=function(){},B("shaka.util.FakeEvent",U);var K=new Set;if(e.console&&e.console.log.bind){var Y={},Q=(Y[1]=console.error.bind(console),Y[2]=console.warn.bind(console),Y[3]=console.info.bind(console),Y[4]=console.log.bind(console),Y[5]=console.debug.bind(console),Y[6]=console.debug.bind(console),Y);W=Q[2],H=Q[1]}function X(){this.g={}}function Z(e,t){for(var n in e.g)t(n,e.g[n])}function J(){this.ea=new X,this.hd=this}function ee(e,t){for(var n=[],r=c(e),i=r.next();!i.done;i=r.next())n.push(t(i.value));return n}function te(e,t){for(var n=[],r=c(e),i=r.next();!i.done;i=r.next())t(i=i.value)&&n.push(i);return n}(r=X.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},r.get=function(e){return(e=this.g[e])?e.slice():null},r.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(e){return e!=t}),0==this.g[e].length&&delete this.g[e])},r.size=function(){return Object.keys(this.g).length},r.keys=function(){return Object.keys(this.g)},J.prototype.addEventListener=function(e,t){this.ea&&this.ea.push(e,t)},J.prototype.removeEventListener=function(e,t){this.ea&&this.ea.remove(e,t)},J.prototype.dispatchEvent=function(e){if(!this.ea)return!0;var t=this.ea.get(e.type)||[],n=this.ea.get("All");for(n&&(t=t.concat(n)),n=(t=c(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.hd,e.currentTarget=this.hd;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},J.prototype.release=function(){this.ea=null};var ne=function e(t){var n;return M(e,function(e){return 1==e.g&&(n=0),3!=e.g?n<t?_(e,n,3):e.D(0):(n++,e.D(2))})},re=function e(t){var n,r,i,s,a,o;return M(e,function(e){return 1==e.g&&(n=-1,i=r=void 0,s=c(t),a=s.next()),5!=e.g?a.done?-1==n?e.D(0):_(e,{wa:n,Yg:r,item:i,next:void 0},0):(o=a.value,0<=n?_(e,{wa:n,item:i,Yg:r,next:o},5):e.D(5)):(n++,r=i,i=o,a=s.next(),e.D(2))})},ie=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;
/*
       @license
       Copyright 2008 The Closure Library Authors
       SPDX-License-Identifier: Apache-2.0
      */
/*
       @license
       Copyright 2006 The Closure Library Authors
       SPDX-License-Identifier: Apache-2.0
      */
function se(e){var t;e instanceof se?(ae(this,e.ab),this.$b=e.$b,this.eb=e.eb,oe(this,e.vc),this.Sa=e.Sa,le(this,e.g.clone()),this.Pb=e.Pb):e&&(t=String(e).match(ie))?(ae(this,t[1]||"",!0),this.$b=ce(t[2]||""),this.eb=ce(t[3]||"",!0),oe(this,t[4]),this.Sa=ce(t[5]||"",!0),le(this,t[6]||"",!0),this.Pb=ce(t[7]||"")):this.g=new xe(null)}function ae(e,t,n){e.ab=n?ce(t,!0):t,e.ab&&(e.ab=e.ab.replace(/:$/,""))}function oe(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.vc=t}else e.vc=null}function le(e,t,n){t instanceof xe?e.g=t:(n||(t=ue(t,fe)),e.g=new xe(t))}function ce(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ue(e,t,n){return null!=e?(e=encodeURI(e).replace(t,de),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function de(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(r=se.prototype).ab="",r.$b="",r.eb="",r.vc=null,r.Sa="",r.Pb="",r.toString=function(){var e=[],t=this.ab;if(t&&e.push(ue(t,he,!0),":"),t=this.eb){e.push("//");var n=this.$b;n&&e.push(ue(n,he,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.vc)&&e.push(":",String(t))}return(t=this.Sa)&&(this.eb&&"/"!=t.charAt(0)&&e.push("/"),e.push(ue(t,"/"==t.charAt(0)?me:pe,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Pb)&&e.push("#",ue(t,ge)),e.join("")},r.resolve=function(e){var t=this.clone();"data"===t.ab&&(t=new se);var n=!!e.ab;n?ae(t,e.ab):n=!!e.$b,n?t.$b=e.$b:n=!!e.eb,n?t.eb=e.eb:n=null!=e.vc;var r=e.Sa;if(n)oe(t,e.vc);else if(n=!!e.Sa){if("/"!=r.charAt(0))if(this.eb&&!this.Sa)r="/"+r;else{var i=t.Sa.lastIndexOf("/");-1!=i&&(r=t.Sa.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var s=[],a=0;a<r.length;){var o=r[a++];"."==o?i&&a==r.length&&s.push(""):".."==o?((1<s.length||1==s.length&&""!=s[0])&&s.pop(),i&&a==r.length&&s.push("")):(s.push(o),i=!0)}r=s.join("/")}}return n?t.Sa=r:n=""!==e.g.toString(),n?le(t,e.g.clone()):n=!!e.Pb,n&&(t.Pb=e.Pb),t},r.clone=function(){return new se(this)};var he=/[#\/\?@]/g,pe=/[#\?:]/g,me=/[#\?]/g,fe=/[#\?@]/g,ge=/#/g;function xe(e){this.g=e||null}function ve(e){if(!e.Ja&&(e.Ja={},e.nd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];s=decodeURIComponent(s.replace(/\+/g," ")),i=i||"",e.add(s,decodeURIComponent(i.replace(/\+/g," ")))}}function ye(e,t,n,r){for(var i=[],s=3;s<arguments.length;++s)i[s-3]=arguments[s];this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}function _e(e,t){this.g=e,this.h=t}function Ee(e,t){var n=new _e(4,0),r=Se,i=r.g,s=n.h-i.h;(0<(n.g-i.g||s)?r.i:r.h)(r.g,n,e,t)}function be(e,t,n,r){W([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Ce(e,t,n,r){H([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}(r=xe.prototype).Ja=null,r.nd=null,r.add=function(e,t){ve(this),this.g=null;var n=this.Ja.hasOwnProperty(e)&&this.Ja[e];return n||(this.Ja[e]=n=[]),n.push(t),this.nd++,this},r.set=function(e,t){return ve(this),this.g=null,this.Ja.hasOwnProperty(e)?this.Ja[e]=[t]:this.add(e,t),this},r.toString=function(){if(this.g)return this.g;if(!this.Ja)return"";var e,t=[];for(e in this.Ja)for(var n=encodeURIComponent(e),r=this.Ja[e],i=0;i<r.length;i++){var s=n;""!==r[i]&&(s+="="+encodeURIComponent(r[i])),t.push(s)}return this.g=t.join("&")},r.clone=function(){var e=new xe;if(e.g=this.g,this.Ja){var t,n={};for(t in this.Ja)n[t]=this.Ja[t].concat();e.Ja=n,e.nd=this.nd}return e},ye.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},B("shaka.util.Error",ye),ye.Severity={RECOVERABLE:1,CRITICAL:2},ye.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},ye.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004},_e.prototype.toString=function(){return"v"+this.g+"."+this.h};var Se=null;function Te(e,t){return e.concat(t)}function Re(){}function je(e){return null!=e}function we(e){var t=Object.create(e.prototype||Object.prototype);try{var n=e.call(t);n||(Ee("Factories requiring new","Factories should be plain functions"),n=t)}catch(r){Ee("Factories requiring new","Factories should be plain functions"),n=new e}return n}function Ae(e,t){if(0==t.length)return e;var n=t.map(function(e){return new se(e)});return e.map(function(e){return new se(e)}).map(function(e){return n.map(function(t){return e.resolve(t)})}).reduce(Te,[]).map(function(e){return e.toString()})}function Ie(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function ke(e,t){if(1==t.length)return t[0];var n=Me(e,t);if(null!=n)return n;throw new ye(2,4,4025,t)}function Me(e,t){for(var n=c(De[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var i=c(t),s=i.next();!s.done;s=i.next())if(s=s.value,r.test(s.trim()))return s.trim()}return e==Pe?"":null}var Pe="text",Le={mb:"video",Nb:"audio",ua:Pe,Gc:"image",Ah:"application"},De={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Oe(){}function $e(e,t){return e=Be(e),t=Be(t),e.split("-")[0]==t.split("-")[0]}function Ne(e,t){e=Be(e),t=Be(t);var n=e.split("-"),r=t.split("-");return n[0]==r[0]&&1==n.length&&2==r.length}function Fe(e,t){e=Be(e),t=Be(t);var n=e.split("-"),r=t.split("-");return 2==n.length&&2==r.length&&n[0]==r[0]}function Be(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=qe.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function Ue(e,t){var n=Ve(e),r=Ve(t);return e!=n&&t!=r&&n==r}function Ge(e,t){return e=Be(e),(t=Be(t))==e?4:Ne(t,e)?3:Fe(t,e)?2:Ne(e,t)?1:0}function Ve(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),qe.get(e)||e}function He(e){return e.language?Be(e.language):e.audio&&e.audio.language?Be(e.audio.language):e.video&&e.video.language?Be(e.video.language):"und"}function We(e,t){for(var n=Be(e),r=new Set,i=c(t),s=i.next();!s.done;s=i.next())r.add(Be(s.value));for(s=(i=c(r)).next();!s.done;s=i.next())if((s=s.value)==n)return s;for(s=(i=c(r)).next();!s.done;s=i.next())if(Ne(s=s.value,n))return s;for(s=(i=c(r)).next();!s.done;s=i.next())if(Fe(s=s.value,n))return s;for(s=(r=c(r)).next();!s.done;s=r.next())if(Ne(n,s=s.value))return s;return null}B("shaka.util.LanguageUtils",Oe),Oe.findClosestLocale=We,Oe.getLocaleForVariant=He,Oe.getLocaleForText=function(e){return Be(e.language||"und")},Oe.getBase=Ve,Oe.relatedness=Ge,Oe.areSiblings=Ue,Oe.normalize=Be,Oe.isSiblingOf=Fe,Oe.isParentOf=Ne,Oe.areLanguageCompatible=$e,Oe.areLocaleCompatible=function(e,t){return(e=Be(e))==(t=Be(t))};var qe=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function ze(e){J.call(this),this.j=Be(e),this.i=new Map,this.g=new Set,this.h=new Map}function Ke(e){for(var t=e.h,n=e.j,r=e.g,i=new Set,s={},a=c(r),o=a.next();!o.done;s={ec:s.ec},o=a.next()){s.ec=o.value,i.add(s.ec),i.add(Ve(s.ec)),(o=te(t.keys(),function(e){return function(t){return Ue(t,e.ec)}}(s))).sort();var l=c(o);for(o=l.next();!o.done;o=l.next())i.add(o.value);for((o=te(t.keys(),function(e){return function(t){return Ve(t)==e.ec}}(s))).sort(),o=(l=c(o)).next();!o.done;o=l.next())i.add(o.value)}for(i.add(n),n=[],o=(i=c(i)).next();!o.done;o=i.next())(o=t.get(o.value))&&n.push(o);for(n.reverse(),e.i.clear(),o=(t=c(n)).next();!o.done;o=t.next())o.value.forEach(function(t,n){e.i.set(n,t)});for(t=e.i.keys(),i=new Set,o=(n=c(e.g)).next();!o.done;o=n.next())Ye(o=e.h.get(o.value)||new Map,t,i);0<i.size&&(r=(new Map).set("locales",Array.from(r)).set("missing",Array.from(i)),e.dispatchEvent(new U("missing-localizations",r)))}function Ye(e,t,n){for(var r=(t=c(t)).next();!r.done;r=t.next())r=r.value,e.get(r)||n.add(r)}g(ze,J),(r=ze.prototype).release=function(){J.prototype.release.call(this)},r.We=function(e){var t=this;this.g.clear();for(var n=(e=c(e)).next();!n.done;n=e.next())this.g.add(Be(n.value));Ke(this),(e=te(this.g,function(e){return!t.h.has(e)})).length&&this.dispatchEvent(new U("unknown-locales",(new Map).set("locales",e))),e=te(this.g,function(e){return t.h.has(e)}),e=(new Map).set("locales",e.length?e:[this.j]),this.dispatchEvent(new U("locale-changed",e))},r.ma=function(e,t,n){e=Be(e),void 0===n&&(n=Qe);var r=this.h.get(e)||new Map;return t.forEach(function(e,t){r.has(t)&&n!=Qe||r.set(t,e)}),this.h.set(e,r),Ke(this),this.dispatchEvent(new U("locale-updated")),this},r.hh=function(e){for(var t=c(e.keys()),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,this.resolve(n))},r.resolve=function(e){var t=this.i.get(e);return t||(e=(new Map).set("locales",Array.from(this.g)).set("missing",e),this.dispatchEvent(new U("unknown-localization",e)),"")},B("shaka.ui.Localization",ze),ze.prototype.resolve=ze.prototype.resolve,ze.prototype.resolveDictionary=ze.prototype.hh,ze.prototype.insert=ze.prototype.ma,ze.prototype.changeLocale=ze.prototype.We,ze.prototype.release=ze.prototype.release;var Qe=1;ze.ConflictResolution={USE_OLD:0,USE_NEW:Qe},ze.UNKNOWN_LOCALES="unknown-locales",ze.UNKNOWN_LOCALIZATION="unknown-localization",ze.MISSING_LOCALIZATIONS="missing-localizations",ze.LOCALE_CHANGED="locale-changed",ze.LOCALE_UPDATED="locale-updated";var Xe="SUBTITLE_FORCED";function Ze(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function Je(e,t,n){var r=Math.pow(e.g,t);n=n*(1-r)+r*e.h,isNaN(n)||(e.h=n,e.i+=t)}function et(e){return e.h/(1-Math.pow(e.g,e.i))}function tt(){this.h=new Ze(2),this.j=new Ze(5),this.g=0,this.i=128e3,this.l=16e3}function nt(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function rt(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function it(e,t,n){if(n||(n=nt),e.length!=t.length)return!1;t=t.slice();for(var r={},i=(e=c(e)).next();!i.done;r={Ld:r.Ld},i=e.next()){if(r.Ld=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.Ld,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function st(e,t,n){if(n||(n=nt),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function at(e,t,n){this.startTime=e,this.direction=pt,this.endTime=t,this.payload=n,this.region=new Ct,this.position=null,this.positionAlign=lt,this.size=0,this.textAlign=ct,this.writingMode=mt,this.lineInterpretation=ft,this.line=null,this.lineHeight="",this.lineAlign=gt,this.displayAlign=dt,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=_t,this.fontStyle=Et,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}function ot(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!st(e.nestedCues,t.nestedCues,ot))return!1}else if("region"==n||"cellResolution"==n){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!st(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}tt.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},tt.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(et(this.h),et(this.j))},at.prototype.clone=function(){var e,t=new at(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},B("shaka.text.Cue",at);var lt="auto";at.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:lt};var ct="center",ut={LEFT:"left",RIGHT:"right",CENTER:ct,START:"start",END:"end"};at.textAlign=ut;var dt="after",ht={BEFORE:"before",CENTER:"center",AFTER:dt};at.displayAlign=ht;var pt="ltr";at.direction={HORIZONTAL_LEFT_TO_RIGHT:pt,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var mt="horizontal-tb";at.writingMode={HORIZONTAL_TOP_TO_BOTTOM:mt,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var ft=0;at.lineInterpretation={LINE_NUMBER:ft,PERCENTAGE:1};var gt="start",xt={CENTER:"center",START:gt,END:"end"};at.lineAlign=xt;var vt={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};at.defaultTextColor=vt;var yt={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};at.defaultTextBackgroundColor=yt;var _t=400;at.fontWeight={NORMAL:_t,BOLD:700};var Et="normal",bt={NORMAL:Et,ITALIC:"italic",OBLIQUE:"oblique"};function Ct(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=St,this.scroll=Tt}at.fontStyle=bt,at.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},B("shaka.text.CueRegion",Ct);var St=1;Ct.units={PX:0,PERCENTAGE:St,LINES:2};var Tt="";function Rt(){}function jt(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(wt(e)==wt(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;for(var n=It(e),r=It(t),i=c(ne(e.byteLength)),s=i.next();!s.done;s=i.next())if(n[s=s.value]!=r[s])return!1;return!0}function wt(e){return e instanceof ArrayBuffer?e:e.buffer}function At(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function It(e,t,n){return Mt(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function kt(e,t,n){return Mt(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Mt(e,t,n,r){var i=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,i)),new r(wt(e),t,Math.min(t+Math.max(n,0),i)-t)}function Pt(){}Ct.scrollMode={NONE:Tt,UP:"up"},B("shaka.util.BufferUtils",Rt),Rt.toDataView=kt,Rt.toUint8=It,Rt.toArrayBuffer=At,Rt.equal=jt,B("shaka.dependencies",Pt),Pt.has=function(e){return Dt.has(e)},Pt.add=function(e,t){if(!Lt[e])throw Error(e+" is not supported");Dt.set(e,function(){return t})};var Lt={muxjs:"muxjs"};Pt.Allowed=Lt;var Dt=new Map([["muxjs",function(){return e.muxjs}]]);function Ot(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function $t(e){this.h=e,this.g=void 0}function Nt(){}function Ft(e){return e?(239==(e=It(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),(e=(new TextDecoder).decode(e)).includes("")&&H('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e):""}function Bt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new ye(2,2,2004);var r=Math.floor(e.byteLength/2);n=new Uint16Array(r),e=kt(e);for(var i=(r=c(ne(r))).next();!i.done;i=r.next())n[i=i.value]=e.getUint16(2*i,t);return Ht.value()(n)}function Ut(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=It(e);if(239==n[0]&&187==n[1]&&191==n[2])return Ft(n);if(254==n[0]&&255==n[1])return Bt(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Bt(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Bt(e,!1);if(0==n[1]&&0==n[3])return Bt(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Ft(e);throw new ye(2,2,2003)}function Gt(e){return At((new TextEncoder).encode(e))}function Vt(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=c(re(e)),s=i.next();!s.done;s=i.next())s=s.value,r.setUint16(2*s.wa,s.item.charCodeAt(0),t);return n}Ot.prototype.resolve=function(){},Ot.prototype.reject=function(){},$t.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g},B("shaka.util.StringUtils",Nt),Nt.resetFromCharCode=function(){Ht.g=void 0},Nt.toUTF16=Vt,Nt.toUTF8=Gt,Nt.fromBytesAutoDetect=Ut,Nt.fromUTF16=Bt,Nt.fromUTF8=Ft;var Ht=new $t(function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e2){return!1}}for(var t={Bb:65536};0<t.Bb;(t={Bb:t.Bb}).Bb/=2)if(e(t.Bb))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.Bb)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.Bb));return n}}(t);return null});function Wt(){}function qt(e){return e=It(e),e=Ht.value()(e),btoa(e)}function zt(e,t){t=null==t||t;var n=qt(e).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/[=]*$/,"")}function Kt(t){var n=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));t=new Uint8Array(n.length);for(var r=(n=c(re(n))).next();!r.done;r=n.next())t[(r=r.value).wa]=r.item.charCodeAt(0);return t}function Yt(t){for(var n=t.length/2,r=new Uint8Array(n),i=(n=c(ne(n))).next();!i.done;i=n.next())r[i=i.value]=e.parseInt(t.substr(2*i,2),16);return r}function Qt(e){var t=It(e);e="";for(var n=(t=c(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function Xt(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];var r=0,i=c(t);for(n=i.next();!n.done;n=i.next())r+=n.value.byteLength;for(r=new Uint8Array(r),i=0,n=(t=c(t)).next();!n.done;n=t.next())n=n.value,r.set(It(n),i),i+=n.byteLength;return r}function Zt(){var e=this;this.B=Dt.get("muxjs")(),this.g=new this.B.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.s=[],this.j=[],this.i=[],this.l=!1,this.g.on("data",function(t){e.j=t.captions,e.i=t.metadata,e.s.push(Xt(t.initSegment,t.data))}),this.g.on("done",function(){var t={data:Xt.apply(Wt,u(e.s)),captions:e.j,metadata:e.i};e.h.resolve(t),e.l=!1})}function Jt(e,t){if(!Dt.get("muxjs")()||!en(e))return!1;if(t)return MediaSource.isTypeSupported(tn(t,e));var n=tn("audio",e),r=tn("video",e);return MediaSource.isTypeSupported(n)||MediaSource.isTypeSupported(r)}function en(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]}function tn(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(r){var i="avc1.",s=r[1],a=Number(r[2]);i=("66"==s?i+"4200":"77"==s?i+"4d00":i+"6400")+(a>>4).toString(16),i+=(15&a).toString(16),n=n.replace(r[0],i)}return n}function nn(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function rn(e,t,n){return e=nn(e,t),Dt.get("muxjs")()&&en(e)?tn(n,e):e}function sn(e){var t=(e=e.split("."))[0];return e.pop(),t}function an(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function on(e){this.C=null,this.i=e,this.j=this.G=0,this.l=1/0,this.h=this.g=null,this.B="",this.s=new Map}function ln(e){return!(!hn[e]&&"application/cea-608"!=e&&"application/cea-708"!=e)}function cn(e,t,n){if(e.B=t,t=e.s.get(t))for(var r=c(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter(function(e){return e.endTime<=n}))&&e.i.append(i)}function un(e,t,n){t.startTime+=n,t.endTime+=n;for(var r=(t=c(t.nestedCues)).next();!r.done;r=t.next())un(e,r.value,n)}function dn(e,t,n,r,i){for(var s=n+" "+r,a=new Map,o=(t=c(t)).next();!o.done;o=t.next()){var l=o.value;o=l.stream,l=l.cue,a.has(o)||a.set(o,new Map),a.get(o).has(s)||a.get(o).set(s,[]),un(e,l,i),l.startTime>=e.j&&l.startTime<e.l&&(a.get(o).get(s).push(l),o==e.B&&e.i.append([l]))}for(s=(i=c(a.keys())).next();!s.done;s=i.next())for(s=s.value,e.s.has(s)||e.s.set(s,new Map),o=(t=c(a.get(s).keys())).next();!o.done;o=t.next())o=o.value,l=a.get(s).get(o),e.s.get(s).set(o,l);e.g=null==e.g?Math.max(n,e.j):Math.min(e.g,Math.max(n,e.j)),e.h=Math.max(e.h,Math.min(r,e.l))}B("shaka.util.Uint8ArrayUtils",Wt),Wt.concat=Xt,Wt.toHex=Qt,Wt.fromHex=Yt,Wt.fromBase64=Kt,Wt.toBase64=zt,Wt.toStandardBase64=qt,Wt.equal=function(e,t){return Ee("shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead."),jt(e,t)},Zt.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),on.prototype.destroy=function(){return this.i=this.C=null,this.s.clear(),Promise.resolve()},on.prototype.remove=function(e,t){var n=this;return P(function(r){if(1==r.g)return _(r,Promise.resolve(),2);!n.i||!n.i.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),E(r)})},B("shaka.text.TextEngine",on),on.prototype.destroy=on.prototype.destroy,on.findParser=function(e){return hn[e]},on.unregisterParser=function(e){delete hn[e]},on.registerParser=function(e,t){hn[e]=t};var hn={};function pn(e){this.h=e,this.g=null}function mn(e){this.h=e,this.g=null}function fn(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function gn(e){return""!=bn().canPlayType(e)}function xn(){return En("Tizen")}function vn(){return En("CrKey")}function yn(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!xn()}function _n(){if(!yn())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function En(e){return(navigator.userAgent||"").includes(e)}function bn(){return Sn||(Cn||(Cn=new mn(function(){Sn=null})),(Sn=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Sn=document.createElement("video")),Cn.U(1),Sn)}pn.prototype.U=function(t){var n=this;this.stop();var r=!0,i=null;return this.g=function(){e.clearTimeout(i),r=!1},i=e.setTimeout(function(){r&&n.h()},1e3*t),this},pn.prototype.stop=function(){this.g&&(this.g(),this.g=null)},mn.prototype.Ga=function(){return this.stop(),this.h(),this},mn.prototype.U=function(e){var t=this;return this.stop(),this.g=new pn(function(){t.h()}).U(e),this},mn.prototype.na=function(e){var t=this;return this.stop(),this.g=new pn(function(){t.g.U(e),t.h()}).U(e),this},mn.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},B("shaka.util.Timer",mn),mn.prototype.stop=mn.prototype.stop,mn.prototype.tickEvery=mn.prototype.na,mn.prototype.tickAfter=mn.prototype.U,mn.prototype.tickNow=mn.prototype.Ga;var Cn=null,Sn=null;function Tn(e,t,n,r,i){var s=e.variants;(t.length||n.length)&&(s=function(e,t,n){for(var r={},i=(t=c(t)).next();!i.done;r={Wd:r.Wd},i=t.next())if(r.Wd=i.value,i=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.Wd)}}(r)),i.length){e=i;break}for(r={},n=c(n),t=n.next();!t.done;r={Id:r.Id},t=n.next())if(r.Id=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.Id)}}(r)),t.length){e=t;break}return e}(s,t,n)),t=function(e){for(var t=new X,n=(e=c(e)).next();!n.done;n=e.next()){var r=jn(n=n.value);t.push(r,n)}return t}(s=Wn(s,r)),t=function(e){var t=0,n=new Map,r=e.size();return Z(e,function(e,i){for(var s=c(i),a=s.next();!a.done;a=s.next()){var o=(a=a.value).video;if(o&&o.width&&o.height){o=o.width*o.height*(o.frameRate||1),n.has(o)||n.set(o,new X);var l=n.get(o);l.push(e,a),l.size()===r&&(t=Math.max(t,o))}}}),t?n.get(t):e}(t);var a=function(e,t){for(var n=c(t),r=n.next();!r.done;r=n.next())if((r=r.value)==Xn||r==Zn){if(1==(e=Rn(e,r)).size())return e.keys()[0]}else if(r==Jn)break;return function(e){var t="",n=1/0;return Z(e,function(e,r){for(var i=0,s=0,a=c(r),o=a.next();!o.done;o=a.next())i+=o.value.bandwidth||0,++s;(i/=s)<n&&(t=e,n=i)}),t}(e)}(t,i);e.variants=e.variants.filter(function(e){return jn(e)==a})}function Rn(e,t){var n=0,r=new X;return Z(e,function(e,i){for(var s=0,a=0,o=c(i),l=o.next();!l.done;l=o.next())(l=l.value).decodingInfos.length&&(s+=l.decodingInfos[0][t]?1:0,a++);(s/=a)>n?(r.g={},r.push(e,i),n=s):s==n&&r.push(e,i)}),r}function jn(e){var t="";e.video&&(t=sn(e.video.codecs));var n="";return e.audio&&(n=sn(e.audio.codecs)),t+"-"+n}function wn(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;return!(i&&i.width&&i.height&&(!r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))||!r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function An(e,t){return P(function(n){if(1==n.g)return _(n,In(t,0<t.offlineSessionIds.length),2);Dn(e,t),function(e){e.textStreams=e.textStreams.filter(function(e){return ln(nn(e.mimeType,e.codecs))})}(t),function(e){e.imageStreams=e.imageStreams.filter(function(e){var t=["image/svg+xml","image/png","image/jpeg"];return(En("Web0S")||xn()||vn())&&t.push("image/webp"),t.includes(e.mimeType)})}(t),E(n)})}function In(e,t){return P(function(n){if(1==n.g)return _(n,kn(e.variants,t,!1),2);e.variants=e.variants.filter(function(e){var t=e.video;if(t){var n=Ln(t.codecs);if(t.codecs.includes(",")){var r=t.codecs.split(",");if(n=ke("video",r),r=ke("audio",r),r=rn(t.mimeType,r,"audio"),!MediaSource.isTypeSupported(r))return!1}if(n=rn(t.mimeType,n,"video"),!MediaSource.isTypeSupported(n))return!1}return!((n=e.audio)&&(r=Pn(n.codecs),n=rn(n.mimeType,r,"audio"),!MediaSource.isTypeSupported(n)))&&(En("Xbox One")&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&t.codecs.includes("avc1.")?(Kn(e),!1):((t=e.decodingInfos.some(function(e){return e.supported}))||Kn(e),t))}),E(n)})}function kn(e,t,n){var r,i,s,a,o,l,u,d,h,p;return P(function(m){if(e.some(function(e){return e.decodingInfos.length}))return m.return();for(r=navigator.mediaCapabilities,i=[],s=function(e,t){var n;return P(function(i){return 1==i.g?(b(i,2),_(i,r.decodingInfo(t),4)):2!=i.g?(n=i.h,e.decodingInfos.push(n),S(i,0)):(T(i),JSON.stringify(t),void E(i))})},a=c(e),o=a.next();!o.done;o=a.next())for(l=o.value,u=Mn(l,t,n),d=c(u),h=d.next();!h.done;h=d.next())p=h.value,i.push(s(l,p));return _(m,Promise.all(i),0)})}function Mn(e,t,n){var r=e.audio,i=e.video;if(n={type:n?"file":"media-source"},i){var s=i.codecs;if(i.codecs.includes(",")){var a=i.codecs.split(",");s=Ln(s=ke("video",a)),a=ke("audio",a),a=rn(i.mimeType,a,"audio"),n.audio={contentType:a,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(s=Ln(s),s=rn(i.mimeType,s,"video"),n.video={contentType:s,width:i.width||1,height:i.height||1,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1},i.hdr)switch(i.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(r&&(s=Pn(r.codecs),s=rn(r.mimeType,s,"audio"),n.audio={contentType:s,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio}),!(a=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[n];e=[],s=new Map;for(var o=(a=c(a)).next();!o.done;o=a.next()){var l=o.value;s.get(l.keySystem)||s.set(l.keySystem,[]),s.get(l.keySystem).push(l)}a=t?"required":"optional",t=t?["persistent-license"]:["temporary"];for(var u=(l=c(s.keys())).next();!u.done;u=l.next()){var d=u.value;u=Object.assign({},n);var h=s.get(d);for(d={keySystem:d,initDataType:"cenc",persistentState:a,distinctiveIdentifier:"optional",sessionTypes:t},o=(h=c(h)).next();!o.done;o=h.next()){if((o=o.value).initData&&o.initData.length){for(var p=new Set,m=c(o.initData),f=m.next();!f.done;f=m.next())p.add(f.value.initDataType);d.initDataType=o.initData[0].initDataType}o.distinctiveIdentifierRequired&&(d.distinctiveIdentifier="required"),o.persistentStateRequired&&(d.persistentState="required"),o.sessionType&&(d.sessionTypes=[o.sessionType]),r&&(d.audio?d.audio.robustness=d.audio.robustness||o.audioRobustness:d.audio={robustness:o.audioRobustness}),i&&(d.video?d.video.robustness=d.video.robustness||o.videoRobustness:d.video={robustness:o.videoRobustness})}u.keySystemConfiguration=d,e.push(u)}return e}function Pn(e){return xn()&&"ac-3"==e.toLowerCase()?"ec-3":e}function Ln(e){return"vp9"==e?"vp09.00.10.08":e}function Dn(e,t){t.variants=t.variants.filter(function(t){var n=t.audio;return t=t.video,!(n&&e&&e.audio&&!On(n,e.audio)||t&&e&&e.video&&!On(t,e.video))})}function On(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function $n(e){var t=e.audio,n=e.video,r=t?t.codecs:null,i=n?n.codecs:null,s=[];i&&s.push(i),r&&s.push(r);var a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var o=[];t&&o.push(t.kind),n&&o.push(n.kind),o=o[0]||null;var l=new Set;if(t)for(var u=c(t.roles),d=u.next();!d.done;d=u.next())l.add(d.value);if(n)for(d=(u=c(n.roles)).next();!d.done;d=u.next())l.add(d.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:o,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:a,codecs:s.join(", "),audioCodec:r,videoCodec:i,primary:e.primary,roles:Array.from(l),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function Nn(e){return{id:e.id,active:!1,type:Pe,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function Fn(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&null!=t&&(t/=Number(i.split("x")[0])),i&&null!=n&&(n/=Number(i.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function Bn(e){return e.__shaka_id||(e.__shaka_id=Qn++),e.__shaka_id}function Un(e){var t=Vn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function Gn(e){var t=Vn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Vn(e){return{id:Bn(e),active:!1,type:"",bandwidth:0,language:Be(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function Hn(e){return e.allowedByApplication&&e.allowedByKeySystem}function Wn(e,t){for(var n=e.filter(function(e){return e.audio&&e.audio.channelsCount}),r=new Map,i=(n=c(n)).next();!i.done;i=n.next()){var s=(i=i.value).audio.channelsCount;r.has(s)||r.set(s,[]),r.get(s).push(i)}return 0==(n=Array.from(r.keys())).length?e:(i=n.filter(function(e){return e<=t})).length?r.get(Math.max.apply(Math,u(i))):r.get(Math.min.apply(Math,u(n)))}function qn(e,t,n,r){var i=e,s=e.filter(function(e){return e.primary});s.length&&(i=s);var a=i.length?i[0].language:"";if(i=i.filter(function(e){return e.language==a}),t){var o=We(Be(t),e.map(function(e){return e.language}));o&&(i=e.filter(function(e){return Be(e.language)==o}))}if(i=i.filter(function(e){return e.forced==r}),n){if((e=zn(i,n)).length)return e}else if((e=i.filter(function(e){return 0==e.roles.length})).length)return e;return(e=i.map(function(e){return e.roles}).reduce(Te,[])).length?zn(i,e[0]):i}function zn(e,t){return e.filter(function(e){return e.roles.includes(t)})}function Kn(e){var t=[];return e.audio&&t.push(Yn(e.audio)),e.video&&t.push(Yn(e.video)),t.join(", ")}function Yn(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}var Qn=0,Xn="smooth",Zn="powerEfficient",Jn="bandwidth";function er(){var e=this;this.j=null,this.h=!1,this.g=new tt,navigator.connection&&navigator.connection.addEventListener("change",function(){if(e.m.useNetworkInformation&&e.h){e.g=new tt,e.m&&e.g.configure(e.m.advanced);var t=e.chooseVariant();t&&e.j(t)}}),this.i=[],this.s=1,this.B=!1,this.m=this.l=null}function tr(e){var t=e.m.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.m.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function nr(e,t){return e&&(t=t.filter(function(t){return wn(t,e,{width:1/0,height:1/0})})),t.sort(function(e,t){return e.bandwidth-t.bandwidth})}function rr(e,t){this.h=e,this.g=new Set([e]);for(var n=c(t=t||[]),r=n.next();!r.done;r=n.next())this.add(r.value)}function ir(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var r=t.audio;n=!((!(!n.channelsCount||!r.channelsCount||2<n.channelsCount||2<r.channelsCount)||n.channelsCount==r.channelsCount)&&sr(n,r)&&ar(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(n=!(sr(n=e.video,r=t.video)&&ar(n.roles,r.roles))),!n}function sr(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map(function(e){return sn(e)}),r=t.codecs.split(",").map(function(e){return sn(e)});if(n.length!=r.length)return!1;n.sort(),r.sort();for(var i=c(ne(n.length)),s=i.next();!s.done;s=i.next())if(n[s=s.value]!=r[s])return!1;return!0}function ar(e,t){var n=new Set(e),r=new Set(t);if(n.delete("main"),r.delete("main"),n.size!=r.size)return!1;for(var i=(n=c(n)).next();!i.done;i=n.next())if(!r.has(i.value))return!1;return!0}function or(e){this.g=e,this.h=new lr(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function lr(e,t,n,r){this.i=e,this.j=t,this.g=n,this.h=void 0===r?"":r}function cr(){this.g=hr,this.h=(new Map).set(hr,2).set(dr,1)}function ur(e,t,n){e.h.set(hr,n).set(dr,t)}(r=er.prototype).stop=function(){this.j=null,this.h=!1,this.i=[],this.s=1,this.l=null},r.init=function(e){this.j=e},r.chooseVariant=function(){var e=nr(this.m.restrictions,this.i),t=this.g.getBandwidthEstimate(tr(this));this.i.length&&!e.length&&(e=[(e=nr(null,this.i))[0]]);for(var n=e[0]||null,r=(e=c(re(e))).next();!r.done;r=e.next()){var i=r.value;r=i.item;var s=isNaN(this.s)?1:Math.abs(this.s);i=s*(i.next||{bandwidth:1/0}).bandwidth/this.m.bandwidthUpgradeTarget,t>=s*r.bandwidth/this.m.bandwidthDowngradeTarget&&t<=i&&(n=r)}return this.l=Date.now(),n},r.enable=function(){this.h=!0},r.disable=function(){this.h=!1},r.segmentDownloaded=function(e,t){var n=this.g;if(!(t<n.l)){var r=8e3*t/e,i=e/1e3;n.g+=t,Je(n.h,i,r),Je(n.j,i,r)}if(null!=this.l&&this.h)e:{if(this.B){if(Date.now()-this.l<1e3*this.m.switchInterval)break e}else{if(!((n=this.g).g>=n.i))break e;this.B=!0}n=this.chooseVariant(),this.g.getBandwidthEstimate(tr(this)),n&&this.j(n)}},r.getBandwidthEstimate=function(){return this.g.getBandwidthEstimate(this.m.defaultBandwidthEstimate)},r.setVariants=function(e){this.i=e},r.playbackRateChanged=function(e){this.s=e},r.configure=function(e){this.m=e,this.g&&this.m&&this.g.configure(this.m.advanced)},B("shaka.abr.SimpleAbrManager",er),er.prototype.configure=er.prototype.configure,er.prototype.playbackRateChanged=er.prototype.playbackRateChanged,er.prototype.setVariants=er.prototype.setVariants,er.prototype.getBandwidthEstimate=er.prototype.getBandwidthEstimate,er.prototype.segmentDownloaded=er.prototype.segmentDownloaded,er.prototype.disable=er.prototype.disable,er.prototype.enable=er.prototype.enable,er.prototype.chooseVariant=er.prototype.chooseVariant,er.prototype.init=er.prototype.init,er.prototype.stop=er.prototype.stop,rr.prototype.add=function(e){return!!ir(this.h,e)&&(this.g.add(e),!0)},rr.prototype.values=function(){return this.g.values()},or.prototype.create=function(e){var t=this,n=e.filter(function(e){return ir(t.g,e)});return n.length?new rr(n[0],n):this.h.create(e)},lr.prototype.create=function(e){var t=[];t=function(e,t){var n=Be(t),r=We(n,e.map(function(e){return He(e)}));return r?e.filter(function(e){return r==He(e)}):[]}(e,this.i);var n=e.filter(function(e){return e.primary});for(e=function(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})}(t=t.length?t:n.length?n:e,this.j),e.length&&(t=e),this.g&&(e=Wn(t,this.g)).length&&(t=e),this.h&&(e=function(e,t){return e.filter(function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()})}(t,this.h),e.length&&(t=e)),e=new rr(t[0]),n=(t=c(t)).next();!n.done;n=t.next())n=n.value,ir(e.h,n)&&e.add(n);return e};var dr=0,hr=1;function pr(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.B=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.s=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function mr(e){var t,n;return P(function(r){if(1==r.g){if(e.g>=e.l){if(!e.i)throw new ye(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?r.return():(n=e.h*(1+(2*Math.random()-1)*e.B),_(r,new Promise(function(e){new mn(e).U(n/1e3)}),2))}e.h*=e.s,E(r)})}function fr(e,t){this.promise=e,this.i=t,this.g=!1}function gr(e){return new fr(Promise.reject(e),function(){return Promise.resolve()})}function xr(){var e=Promise.reject(new ye(2,7,7001));return e.catch(function(){}),new fr(e,function(){return Promise.resolve()})}function vr(e){return new fr(Promise.resolve(e),function(){return Promise.resolve()})}function yr(e){return new fr(e,function(){return e.catch(function(){})})}function _r(e){return new fr(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function Er(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;t.add(n);var i,s=r?[]:{};for(i in n)s[i]=e(n[i]);return r&&(s.length=n.length),s}}(e)}function br(e){var t,n={};for(t in e)n[t]=e[t];return n}function Cr(){this.g=[]}function Sr(e,t){e.g.push(t.finally(function(){rt(e.g,t)}))}function Tr(e,t,n){J.call(this),this.i=!1,this.s=new Cr,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.C=n||null,this.B=!1}function Rr(e,t,n,r){n=n||Mr;var i=Pr[e];(!i||n>=i.priority)&&(Pr[e]={priority:n,Xg:t,Zg:void 0!==r&&r})}function jr(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,streamDataCallback:void 0===n?null:n}}function wr(e,t,n,r,i,s,a){e.B&&(n.uris[i]=n.uris[i].replace("http://","https://"));var o=new se(n.uris[i]),l=o.ab,c=!1;l||(ae(o,l=(l=location.protocol).slice(0,-1)),n.uris[i]=o.toString()),l=l.toLowerCase();var u=(l=Pr[l])?l.Xg:null;if(!u)return gr(new ye(2,1,1e3,o));var d,h=l.Zg,p=null,m=null,f=!1,g=!1;return yr(mr(r)).va(function(){if(e.i)return xr();d=Date.now();var r=u(n.uris[i],n,t,function(n,r,i){p&&p.stop(),m&&m.U(o/1e3),e.l&&t==kr&&(e.l(n,r),c=!0,a.g=i)},function(r){e.j&&e.j(r,n,t),g=!0});if(!h)return r;var s=n.retryParameters.connectionTimeout;s&&(p=new mn(function(){f=!0,r.abort()})).U(s/1e3);var o=n.retryParameters.stallTimeout;return o&&(m=new mn(function(){f=!0,r.abort()})),r}).va(function(r){p&&p.stop(),m&&m.stop(),null==r.timeMs&&(r.timeMs=Date.now()-d);var i={response:r,Kg:c};return!g&&e.j&&e.j(r.headers,n,t),i},function(o){if(p&&p.stop(),m&&m.stop(),e.C){var l=null,c=0;o instanceof ye&&(l=o,1001==o.code&&(c=o.data[1])),e.C(n,l,c,f)}if(e.i)return xr();if(f&&(o=new ye(1,1,1003,n.uris[i],t)),o instanceof ye){if(7001==o.code)throw o;if(1010==o.code)throw s;if(1==o.severity)return l=new U("retry",l=(new Map).set("error",o)),e.dispatchEvent(l),i=(i+1)%n.uris.length,wr(e,t,n,r,i,o,a)}throw o})}function Ar(){this.g=0}function Ir(e,t,n){fr.call(this,e,t),this.h=n}fr.prototype.abort=function(){return this.g=!0,this.i()},fr.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},fr.prototype.va=function(e,t){function n(n){return function(o){if(i.g&&n)s.reject(a);else{var l=n?e:t;l?r=function(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}(l,o,s):(n?s.resolve:s.reject)(o)}}}function r(){return s.reject(a),i.abort()}var i=this,s=new Ot,a=new ye(2,7,7001);return this.promise.then(n(!0),n(!1)),new fr(s,function(){return r()})},B("shaka.util.AbortableOperation",fr),fr.prototype.chain=fr.prototype.va,fr.prototype.finally=fr.prototype.finally,fr.all=_r,fr.prototype.abort=fr.prototype.abort,fr.notAbortable=yr,fr.completed=vr,fr.aborted=xr,fr.failed=gr,Cr.prototype.destroy=function(){for(var e=[],t=c(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},g(Tr,J),(r=Tr.prototype).Ee=function(e){this.B=e},r.$g=function(e){this.g.add(e)},r.qh=function(e){this.g.delete(e)},r.Vf=function(){this.g.clear()},r.ah=function(e){this.h.add(e)},r.rh=function(e){this.h.delete(e)},r.Wf=function(){this.h.clear()},r.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),J.prototype.release.call(this),this.s.destroy()},r.request=function(e,t){var n=this,r=new Ar;if(this.i){var i=Promise.reject(new ye(2,7,7001));return i.catch(function(){}),new Ir(i,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Er(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=Er(t.uris),i=function(e,t,n){for(var r=vr(void 0),i={},s=(e=c(e.g)).next();!s.done;i={Rd:i.Rd},s=e.next())i.Rd=s.value,r=r.va(function(e){return function(){return n.body&&(n.body=At(n.body)),e.Rd(t,n)}}(i));return r.va(void 0,function(e){if(e instanceof ye&&7001==e.code)throw e;throw new ye(2,1,1006,e)})}(this,e,t);var s=i.va(function(){return wr(n,e,t,new pr(t.retryParameters,!1),0,null,r)}),a=s.va(function(t){return function(e,t,n){for(var r=vr(void 0),i={},s=(e=c(e.h)).next();!s.done;i={Sd:i.Sd},s=e.next())i.Sd=s.value,r=r.va(function(e){return function(){var r=n.response;return r.data&&(r.data=At(r.data)),e.Sd(t,r)}}(i));return r.va(function(){return n},function(e){var t=2;if(e instanceof ye){if(7001==e.code)throw e;t=e.severity}throw new ye(t,1,1007,e)})}(n,e,t)}),o=Date.now(),l=0;i.promise.then(function(){l=Date.now()-o},function(){});var u=0;s.promise.then(function(){u=Date.now()},function(){});var d=a.va(function(t){var r=Date.now()-u,i=t.response;return i.timeMs+=l,i.timeMs+=r,t.Kg||!n.l||i.fromCache||e!=kr||n.l(i.timeMs,i.data.byteLength),i},function(e){throw e&&(e.severity=2),e});return i=new Ir(d.promise,function(){return d.abort()},r),Sr(this.s,i),i},B("shaka.net.NetworkingEngine",Tr),Tr.prototype.request=Tr.prototype.request,Tr.prototype.destroy=Tr.prototype.destroy,Tr.makeRequest=jr,Tr.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},Tr.prototype.clearAllResponseFilters=Tr.prototype.Wf,Tr.prototype.unregisterResponseFilter=Tr.prototype.rh,Tr.prototype.registerResponseFilter=Tr.prototype.ah,Tr.prototype.clearAllRequestFilters=Tr.prototype.Vf,Tr.prototype.unregisterRequestFilter=Tr.prototype.qh,Tr.prototype.registerRequestFilter=Tr.prototype.$g,Tr.unregisterScheme=function(e){delete Pr[e]},Tr.registerScheme=Rr,Tr.prototype.setForceHTTPS=Tr.prototype.Ee,Tr.NumBytesRemainingClass=Ar,g(Ir,fr),Tr.PendingRequest=Ir;var kr=1;Tr.RequestType={MANIFEST:0,SEGMENT:kr,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5};var Mr=3;Tr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Mr};var Pr={};function Lr(e){this.g=!1,this.h=new Ot,this.i=e}function Dr(e,t){if(e.g){if(t instanceof ye&&7003==t.code)throw t;throw new ye(2,7,7003,t)}}function Or(){this.g=new X}function $r(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),function(e){var t=Nr;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(e2){t=!1}Nr=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.g)}Lr.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},(r=Or.prototype).release=function(){this.Yb(),this.g=null},r.o=function(e,t,n,r){this.g&&(e=new $r(e,t,n,r),this.g.push(t,e))},r.Qa=function(e,t,n,r){var i=this;this.o(e,t,function r(s){i.Ta(e,t,r),n(s)},r)},r.Ta=function(e,t,n){if(this.g)for(var r=this.g.get(t)||[],i=(r=c(r)).next();!i.done;i=r.next())(i=i.value).target!=e||n!=i.listener&&n||(i.Ta(),this.g.remove(t,i))},r.Yb=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,u(t.g[e]));for(n=(t=c(n)).next();!n.done;n=t.next())n.value.Ta();this.g.g={}}},B("shaka.util.EventManager",Or),Or.prototype.removeAll=Or.prototype.Yb,Or.prototype.unlisten=Or.prototype.Ta,Or.prototype.listenOnce=Or.prototype.Qa,Or.prototype.listen=Or.prototype.o,Or.prototype.release=Or.prototype.release,$r.prototype.Ta=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var Nr=void 0;function Fr(){}function Br(e){return new se(e=Ut(e)).eb}function Ur(e,t,n){function r(e){kt(s).setUint32(a,e.byteLength,!0),a+=4,s.set(It(e),a),a+=e.byteLength}if(!n||!n.byteLength)throw new ye(2,6,6015);var i;i="string"==typeof t?Vt(t,!0):t,e=Vt(e=Ut(e),!0);var s=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),a=0;return r(e),r(i),r(n),s}function Gr(e){for(var t=new Map,n=c(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Vr(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function Hr(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=c(e),r=n.next();!r.done;r=n.next()){var i=c(r.value);if(r=i.next().value,i=i.next().value,!t.has(r))return!1;if((r=t.get(r))!=i||null==r)return!1}return!0}function Wr(e,t){var n=this;t=void 0===t?1:t,this.F=e,this.G=new Set,this.g=this.s=null,this.ia=this.ea=!1,this.I=0,this.i=null,this.h=new Or,this.j=new Map,this.C=[],this.B=new Ot,this.m=null,this.l=function(t){n.B.reject(t),e.onError(t)},this.ka=new Map,this.$=new Map,this.P=new mn(function(){return function(e){var t=e.ka,n=e.$;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),(t=Array.from(n.values())).length&&t.every(function(e){return"expired"==e})&&e.l(new ye(2,6,6014)),e.F.wd(Vr(n))}(n)}),this.L=!1,this.J=[],this.M=!1,this.ha=new mn(function(){!function(e){e.j.forEach(function(t,n){var r=t.pe,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.F.onExpirationUpdated(n.sessionId,i),t.pe=i)})}(n)}).na(t),this.B.catch(function(){}),this.N=new Lr(function(){return function(e){return P(function(t){switch(t.g){case 1:return e.h.release(),e.h=null,e.B.reject(),e.ha.stop(),e.ha=null,e.P.stop(),e.P=null,_(t,ii(e),2);case 2:if(!e.g){t.D(3);break}return b(t,4),_(t,e.g.setMediaKeys(null),6);case 6:S(t,5);break;case 4:T(t);case 5:e.g=null;case 3:e.i=null,e.G.clear(),e.s=null,e.C=[],e.m=null,e.l=function(){},e.F=null,e.S=!1,E(t)}})}(n)}),this.S=!1}function qr(e,t,n){return e.C=n,e.L=0<n.length,zr(e,t)}function zr(t,n){var r,i,s,a,o,l,u,d,h,p,m,f;return P(function(g){if(1==g.g){if(r=function(t){if(0==(t=Gr(t.m.clearKeys)).size)return null;var n=[],r=[];t.forEach(function(e,t){var i=Yt(t),s=Yt(e);i={kty:"oct",kid:zt(i,!1),k:zt(s,!1)},n.push(i),r.push(i.kid)}),t=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:It(Gt(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i,keyIds:new Set(r)}}(t))for(i=c(n),s=i.next();!s.done;s=i.next())(a=s.value).video&&(a.video.drmInfos=[r]),a.audio&&(a.audio.drmInfos=[r]);for((o=n.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}))||(l=Gr(t.m.servers),function(e,t){var n=[];t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})});for(var r=c(e),i=r.next();!i.done;i=r.next())(i=i.value).video&&(i.video.drmInfos=n),i.audio&&(i.audio.drmInfos=n)}(n,l)),u=c(n),s=u.next();!s.done;s=u.next())for(d=s.value,h=ai(d),p=c(h),m=p.next();!m.done;m=p.next())ci(m.value,Gr(t.m.servers),Gr(t.m.advanced||{}));return _(g,kn(n,t.L,t.S),2)}return o||Object.keys(t.m.servers).length?(f=Jr(t,void 0,n),g.return(o?f:f.catch(function(){}))):(t.ea=!0,g.return(Promise.resolve()))})}function Kr(e){var t,n;return P(function(r){switch(r.g){case 1:if(!e.s||!e.i)return r.return();if(!e.i.serverCertificateUri||e.i.serverCertificate&&e.i.serverCertificate.length){r.D(2);break}return t=jr([e.i.serverCertificateUri],e.m.retryParameters),b(r,3),_(r,e.F.Wb.request(5,t).promise,5);case 5:n=r.h,e.i.serverCertificate=It(n.data),S(r,4);break;case 3:throw new ye(2,6,6017,T(r));case 4:if(e.N.g)return r.return();case 2:return e.i.serverCertificate&&e.i.serverCertificate.length?(b(r,6),_(r,e.s.setServerCertificate(e.i.serverCertificate),8)):r.return();case 8:S(r,0);break;case 6:throw new ye(2,6,6004,T(r).message)}})}function Yr(e){for(var t=(e.i?e.i.initData:[])||[],n=c(t),r=n.next();!r.done;r=n.next())Qr(e,(r=r.value).initDataType,r.initData);for(r=(n=c(e.C)).next();!r.done;r=n.next())ei(e,r.value);return t.length||e.C.length||e.B.resolve(),e.B}function Qr(e,t,n){for(var r=e.j.values(),i=(r=c(r)).next();!i.done;i=r.next())if(jt(n,i.value.initData)&&!En("Tizen 2"))return;!function(e,t,n,r){try{var i=e.s.createSession(r)}catch(s){return void e.l(new ye(2,6,6005,s.message))}e.h.o(i,"message",function(t){e.g&&e.m.delayLicenseRequestUntilPlayed&&e.g.paused&&!e.M?e.J.push(t):ni(e,t)}),e.h.o(i,"keystatuseschange",function(t){return ri(e,t)}),e.j.set(i,{initData:n,loaded:!1,pe:1/0,jb:null,type:r});try{n=e.m.initDataTransform(n,t,e.i)}catch(s){return t=s,s instanceof ye||(t=new ye(2,6,6016,s)),void e.l(t)}e.m.logLicenseExchange&&zt(n),i.generateRequest(t,n).catch(function(t){if(!e.N.g){e.j.delete(i);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;0>r&&(r+=Math.pow(2,32)),r="0x"+r.toString(16)}e.l(new ye(2,6,6006,t.message,t,r))}})}(e,t,n,e.i.sessionType)}function Xr(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function Zr(e){return e=ee(e=e.j.keys(),function(e){return e.sessionId}),Array.from(e)}function Jr(e,t,n){var r,i,s,a,o,l,u,d,h,p,m,f,g;return P(function(x){switch(x.g){case 1:if(r=new Map,n.length){i=function(e,t,n){for(var r=c(t),i=r.next();!i.done;i=r.next()){var s=c(ai(i.value));for(i=s.next();!i.done;i=s.next())i=i.value,n.has(i.keySystem)||n.set(i.keySystem,[]),n.get(i.keySystem).push(i)}if(1==n.size&&n.has(""))throw new ye(2,6,6e3);for(r={},e=c(e.m.preferredKeySystems),i=e.next();!i.done;r={Pd:r.Pd},i=e.next())for(r.Pd=i.value,s=c(t),i=s.next();!i.done;i=s.next())if(i=i.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Pd}}(r)))return i.keySystemAccess;for(e=c([!0,!1]),i=e.next();!i.done;i=e.next())for(r=i.value,s=c(t),i=s.next();!i.done;i=s.next()){var a=c(i.value.decodingInfos);for(i=a.next();!i.done;i=a.next()){var o=i.value;if(o.supported&&o.keySystemAccess){var l=c(i=n.get(o.keySystemAccess.keySystem));for(i=l.next();!i.done;i=l.next())if(!!i.value.licenseServerUri==r)return o.keySystemAccess}}}return null}(e,n,r),x.D(2);break}return _(x,function(e,t){var n,r,i,s,a,o,l,u,d,h,p,m,f,g,x;return P(function(v){switch(v.g){case 1:if(1==t.size&&t.has(""))throw new ye(2,6,6e3);for(r=c(t.values()),i=r.next();!i.done;i=r.next())0==(s=i.value).audioCapabilities.length&&delete s.audioCapabilities,0==s.videoCapabilities.length&&delete s.videoCapabilities;a=c(e.m.preferredKeySystems),o=a.next();case 2:if(o.done){v.D(4);break}if(l=o.value,!t.has(l)){v.D(3);break}return u=t.get(l),b(v,6),_(v,navigator.requestMediaKeySystemAccess(l,[u]),8);case 8:return n=v.h,v.return(n);case 6:T(v);case 7:Dr(e.N);case 3:o=a.next(),v.D(2);break;case 4:d=c([!0,!1]),h=d.next();case 9:if(h.done){v.D(11);break}p=h.value,m=c(t.keys()),o=m.next();case 12:if(o.done){h=d.next(),v.D(9);break}if(f=o.value,g=t.get(f),x=g.drmInfos.some(function(e){return!!e.licenseServerUri}),x!=p){v.D(13);break}return b(v,15),_(v,navigator.requestMediaKeySystemAccess(f,[g]),17);case 17:return n=v.h,v.return(n);case 15:T(v);case 16:Dr(e.N);case 13:o=m.next(),v.D(12);break;case 11:return v.return(n)}})}(e,t),3);case 3:i=x.h;case 2:if(!(s=i))throw new ye(2,6,6001);for(Dr(e.N),b(x,4),e.G.clear(),a=s.getConfiguration(),o=a.audioCapabilities||[],l=a.videoCapabilities||[],u=c(o),d=u.next();!d.done;d=u.next())h=d.value,e.G.add(h.contentType.toLowerCase());for(p=c(l),d=p.next();!d.done;d=p.next())m=d.value,e.G.add(m.contentType.toLowerCase());if(n.length){var v=s.keySystem,y=r.get(s.keySystem),E=[],C=[],R=[],j=[],w=new Set;li(y,E,R,C,j,w);var A=e.L?"persistent-license":"temporary";for(v={keySystem:v,licenseServerUri:E[0],distinctiveIdentifierRequired:y[0].distinctiveIdentifierRequired,persistentStateRequired:y[0].persistentStateRequired,sessionType:y[0].sessionType||A,audioRobustness:y[0].audioRobustness||"",videoRobustness:y[0].videoRobustness||"",serverCertificate:R[0],serverCertificateUri:C[0],initData:j,keyIds:w},E=(y=c(y)).next();!E.done;E=y.next())(E=E.value).distinctiveIdentifierRequired&&(v.distinctiveIdentifierRequired=E.distinctiveIdentifierRequired),E.persistentStateRequired&&(v.persistentStateRequired=E.persistentStateRequired);y=v}else y=s.keySystem,v=t.get(s.keySystem),E=[],C=[],R=[],j=[],w=new Set,li(v.drmInfos,E,R,C,j,w),y={keySystem:y,licenseServerUri:E[0],distinctiveIdentifierRequired:"required"==v.distinctiveIdentifier,persistentStateRequired:"required"==v.persistentState,sessionType:v.sessionTypes[0]||"temporary",audioRobustness:(v.audioCapabilities?v.audioCapabilities[0].robustness:"")||"",videoRobustness:(v.videoCapabilities?v.videoCapabilities[0].robustness:"")||"",serverCertificate:R[0],serverCertificateUri:C[0],initData:j,keyIds:w};if(e.i=y,!e.i.licenseServerUri)throw new ye(2,6,6012,e.i.keySystem);return _(x,s.createMediaKeys(),6);case 6:return f=x.h,Dr(e.N),e.s=f,e.ea=!0,_(x,Kr(e),7);case 7:Dr(e.N),S(x,0);break;case 4:if(g=T(x),Dr(e.N,g),e.i=null,e.G.clear(),g instanceof ye)throw g;throw new ye(2,6,6002,g.message)}})}function ei(e,t){var n,r,i,s,a;return P(function(o){switch(o.g){case 1:try{n=e.s.createSession("persistent-license")}catch(l){return r=new ye(2,6,6005,l.message),e.l(r),o.return(Promise.reject(r))}return e.h.o(n,"message",function(t){e.g&&e.m.delayLicenseRequestUntilPlayed&&e.g.paused&&!e.M?e.J.push(t):ni(e,t)}),e.h.o(n,"keystatuseschange",function(t){return ri(e,t)}),i={initData:null,loaded:!1,pe:1/0,jb:null,type:"persistent-license"},e.j.set(n,i),b(o,2),_(o,n.load(t),4);case 4:return s=o.h,Dr(e.N),s?(i.loaded=!0,oi(e)&&e.B.resolve(),o.return(n)):(e.j.delete(n),e.l(new ye(2,6,6013)),o.return(Promise.resolve()));case 2:a=T(o),Dr(e.N,a),e.j.delete(n),e.l(new ye(2,6,6005,a.message));case 3:return o.return(Promise.resolve())}})}function ti(e,t,n){return"skd"==t&&(t=n.serverCertificate,e=Ur(e,n=Br(e),t)),e}function ni(e,t){var n,r,i,s,a,o,l,u,d,h,p,m;P(function(f){switch(f.g){case 1:return n=t.target,e.m.logLicenseExchange&&zt(t.message),r=e.j.get(n),i=e.i.licenseServerUri,s=e.m.advanced[e.i.keySystem],"individualization-request"==t.messageType&&s&&s.individualizationServer&&(i=s.individualizationServer),(a=jr([i],e.m.retryParameters)).body=t.message,a.method="POST",a.licenseRequestType=t.messageType,a.sessionId=n.sessionId,Xr(e.i.keySystem)&&function(e){var t=Bt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=c((t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader")),r=n.next();!r.done;r=n.next())r=r.value,e.headers[r.getElementsByTagName("name")[0].textContent]=r.getElementsByTagName("value")[0].textContent;e.body=Kt(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(a),o=Date.now(),b(f,2),_(f,e.F.Wb.request(2,a).promise,4);case 4:l=f.h,S(f,3);break;case 2:return u=T(f),d=new ye(2,6,6007,u),e.l(d),r&&r.jb&&r.jb.reject(d),f.return();case 3:return e.N.g?f.return():(e.I+=(Date.now()-o)/1e3,e.m.logLicenseExchange&&zt(l.data),b(f,5),_(f,n.update(l.data),7));case 7:S(f,6);break;case 5:return h=T(f),p=new ye(2,6,6008,h.message),e.l(p),r&&r.jb&&r.jb.reject(p),f.return();case 6:m=new U("drmsessionupdate"),e.F.onEvent(m),r&&(r.jb&&r.jb.resolve(),new mn(function(){r.loaded=!0,oi(e)&&e.B.resolve()}).U(di)),E(f)}})}function ri(e,t){var n=t.target,r=e.j.get(n),i=!1;n.keyStatuses.forEach(function(t,n){if("string"==typeof n){var s=n;n=t,t=s}if(Xr(e.i.keySystem)&&16==n.byteLength&&navigator.userAgent.match(/Edge?\//)){var a=(s=kt(n)).getUint32(0,!0),o=s.getUint16(4,!0),l=s.getUint16(6,!0);s.setUint32(0,a,!1),s.setUint16(4,o,!1),s.setUint16(6,l,!1)}"status-pending"!=t&&(r.loaded=!0),"expired"==t&&(i=!0),s=Qt(n),e.ka.set(s,t)});var s=n.expiration-Date.now();(0>s||i&&1e3>s)&&r&&!r.jb&&(e.j.delete(n),n.close().catch(function(){})),oi(e)&&(e.B.resolve(),e.P.U(hi))}function ii(e){var t;return P(function(n){return t=Array.from(e.j.entries()),e.j.clear(),_(n,Promise.all(t.map(function(t){var n=(t=c(t)).next().value,r=t.next().value;return P(function(t){return 1==t.g?(b(t,2),e.ia||e.C.includes(n.sessionId)||"persistent-license"!==r.type?_(t,function(e){var t;return P(function(n){return 1==n.g?(t=new Promise(function(e,t){new mn(t).U(ui)}),b(n,2),_(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?S(n,0):(T(n),void E(n))})}(n),5):_(t,n.remove(),5)):2!=t.g?S(t,0):(T(t),void E(t))})})),0)})}function si(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=c(e),i=r.next();!i.done;i=r.next()){i=i.value;for(var s={},a=c(t),o=a.next();!o.done;s={Za:s.Za},o=a.next())if(o=o.value,i.keySystem==o.keySystem){s.Za=[],s.Za=s.Za.concat(i.initData||[]),s.Za=s.Za.concat(o.initData||[]),s.Za=s.Za.filter(function(e){return function(t,n){return void 0===t.keyId||n===e.Za.findIndex(function(e){return e.keyId===t.keyId})}}(s)),a=i.keyIds&&o.keyIds?new Set([].concat(u(i.keyIds),u(o.keyIds))):i.keyIds||o.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||o.persistentStateRequired,videoRobustness:i.videoRobustness||o.videoRobustness,audioRobustness:i.audioRobustness||o.audioRobustness,serverCertificate:i.serverCertificate||o.serverCertificate,serverCertificateUri:i.serverCertificateUri||o.serverCertificateUri,initData:s.Za,keyIds:a});break}}return n}function ai(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function oi(e){return function(e,t){for(var n=c(e),r=n.next();!r.done;r=n.next())if(!t(r.value))return!1;return!0}(e=e.j.values(),function(e){return e.loaded})}function li(e,t,n,r,i,s){for(var a={},o=(e=c(e)).next();!o.done;a={La:a.La},o=e.next()){if(a.La=o.value,t.includes(a.La.licenseServerUri)||t.push(a.La.licenseServerUri),r.includes(a.La.serverCertificateUri)||r.push(a.La.serverCertificateUri),a.La.serverCertificate&&(n.some(function(e){return function(t){return jt(t,e.La.serverCertificate)}}(a))||n.push(a.La.serverCertificate)),a.La.initData){o={};for(var l=c(a.La.initData),u=l.next();!u.done;o={dd:o.dd},u=l.next())o.dd=u.value,i.some(function(e){return function(t){var n=e.dd;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&jt(t.initData,n.initData)}}(o))||i.push(o.dd)}if(a.La.keyIds)for(l=(o=c(a.La.keyIds)).next();!l.done;l=o.next())s.add(l.value)}}function ci(t,n,r){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(r=r.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate),r.sessionType&&(t.sessionType=r.sessionType),t.serverCertificateUri||(t.serverCertificateUri=r.serverCertificateUri)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}B("shaka.util.FairPlayUtils",Fr),Fr.initDataTransform=Ur,Fr.defaultGetContentId=Br,(r=Wr.prototype).destroy=function(){return this.N.destroy()},r.configure=function(e){this.m=e},r.Hc=function(e){var t,n=this;return P(function(r){if(1==r.g)return n.s?(n.g=e,n.h.Qa(n.g,"play",function(){for(var e=c(n.J),t=e.next();!t.done;t=e.next())ni(n,t.value);n.M=!0,n.J=[]}),"webkitCurrentPlaybackTargetIsWireless"in n.g&&n.h.o(n.g,"webkitcurrentplaybacktargetiswirelesschanged",function(){return ii(n)}),_(r,n.g.setMediaKeys(n.s).catch(function(e){return Promise.reject(new ye(2,6,6003,e.message))}),2)):(n.h.Qa(e,"encrypted",function(){n.l(new ye(2,6,6010))}),r.return());Dr(n.N),Yr(n),n.i.initData.length||n.C.length||(t=function(e){return Qr(n,e.initDataType,It(e.initData))},n.h.o(n.g,"encrypted",t)),E(r)})},r.Lc=function(){for(var e=1/0,t=this.j.keys(),n=(t=c(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},r.qd=function(){return Vr(this.$)};var ui=1,di=5,hi=.5,pi=new $t(function(){return At(new Uint8Array([0]))});function mi(){}function fi(e,t,n,r){var i,s,a,o;return P(function(l){if(1==l.g)return r&&(i=vi[r.toLowerCase()])?l.return(i):(s=xi(e))&&(a=yi[s])?l.return(a):r?l.D(2):_(l,gi(e,t,n),3);if(2!=l.g&&(r=l.h)&&(o=vi[r]))return l.return(o);throw new ye(2,4,4e3,e)})}function gi(e,t,n){var r,i,s;return P(function(a){return 1==a.g?((r=jr([e],n)).method="HEAD",_(a,t.request(0,r).promise,2)):(i=a.h,s=i.headers["content-type"],a.return(s?s.toLowerCase().split(";").shift():""))})}function xi(e){return 1==(e=new se(e).Sa.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}B("shaka.media.ManifestParser",mi),mi.unregisterParserByMime=function(e){delete vi[e]},mi.registerParserByMime=function(e,t){vi[e]=t},mi.registerParserByExtension=function(e,t){yi[e]=t};var vi={},yi={};function _i(e,t){this.X=kt(e),this.h=t==bi,this.g=0}function Ei(){return new ye(2,3,3e3)}(r=_i.prototype).Ia=function(){return this.g<this.X.byteLength},r.qa=function(){return this.g},r.og=function(){return this.X.byteLength},r.ra=function(){try{var e=this.X.getUint8(this.g);return this.g+=1,e}catch(t){throw Ei()}},r.wc=function(){try{var e=this.X.getUint16(this.g,this.h);return this.g+=2,e}catch(t){throw Ei()}},r.T=function(){try{var e=this.X.getUint32(this.g,this.h);return this.g+=4,e}catch(t){throw Ei()}},r.wf=function(){try{var e=this.X.getInt32(this.g,this.h);return this.g+=4,e}catch(t){throw Ei()}},r.xc=function(){try{if(this.h)var e=this.X.getUint32(this.g,!0),t=this.X.getUint32(this.g+4,!0);else t=this.X.getUint32(this.g,!1),e=this.X.getUint32(this.g+4,!1)}catch(n){throw Ei()}if(2097151<t)throw new ye(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},r.Lb=function(e){if(this.g+e>this.X.byteLength)throw Ei();var t=It(this.X,this.g,e);return this.g+=e,t},r.skip=function(e){if(this.g+e>this.X.byteLength)throw Ei();this.g+=e},r.yf=function(e){if(this.g<e)throw Ei();this.g-=e},r.seek=function(e){if(0>e||e>this.X.byteLength)throw Ei();this.g=e},r.Wc=function(){for(var e=this.g;this.Ia()&&0!=this.X.getUint8(this.g);)this.g+=1;return e=It(this.X,e,this.g-e),this.g+=1,Ft(e)},B("shaka.util.DataViewReader",_i),_i.prototype.readTerminatedString=_i.prototype.Wc,_i.prototype.seek=_i.prototype.seek,_i.prototype.rewind=_i.prototype.yf,_i.prototype.skip=_i.prototype.skip,_i.prototype.readBytes=_i.prototype.Lb,_i.prototype.readUint64=_i.prototype.xc,_i.prototype.readInt32=_i.prototype.wf,_i.prototype.readUint32=_i.prototype.T,_i.prototype.readUint16=_i.prototype.wc,_i.prototype.readUint8=_i.prototype.ra,_i.prototype.getLength=_i.prototype.og,_i.prototype.getPosition=_i.prototype.qa,_i.prototype.hasMoreData=_i.prototype.Ia;var bi=1;function Ci(){this.i=[],this.h=[],this.g=!1}function Si(e){for(var t=Ai(e);e.reader.Ia()&&!e.parser.g;)e.parser.yd(e.start+t,e.reader,e.partialOkay)}function Ti(e){for(var t=Ai(e),n=e.reader.T(),r=(n=c(ne(n))).next();!r.done&&(e.parser.yd(e.start+t,e.reader,e.partialOkay),!e.parser.g);r=n.next());}function Ri(e){return function(t){e(t.reader.Lb(t.reader.X.byteLength-t.reader.qa()))}}function ji(e){for(var t=0,n=(e=c(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function wi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Ai(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}_i.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:bi},(r=Ci.prototype).box=function(e,t){var n=ji(e);return this.i[n]=Ii,this.h[n]=t,this},r.Z=function(e,t){var n=ji(e);return this.i[n]=ki,this.h[n]=t,this},r.stop=function(){this.g=!0},r.parse=function(e,t,n){for(e=new _i(e,0),this.g=!1;e.Ia()&&!this.g;)this.yd(0,e,t,n)},r.yd=function(e,t,n,r){var i=t.qa();if(r&&i+8>t.X.byteLength)this.g=!0;else{var s=t.T(),a=t.T(),o=!1;switch(s){case 0:s=t.X.byteLength-i;break;case 1:if(r&&t.qa()+8>t.X.byteLength)return void(this.g=!0);s=t.xc(),o=!0}var l=this.h[a];if(l){var c=null,u=null;if(this.i[a]==ki){if(r&&t.qa()+4>t.X.byteLength)return void(this.g=!0);c=(u=t.T())>>>24,u&=16777215}a=i+s,n&&a>t.X.byteLength&&(a=t.X.byteLength),r&&a>t.X.byteLength?this.g=!0:(r=a-t.qa(),l({parser:this,partialOkay:n||!1,version:c,flags:u,reader:t=new _i(t=0<r?t.Lb(r):new Uint8Array(0),0),size:s,start:i+e,has64BitSize:o}))}else t.skip(Math.min(i+s-t.qa(),t.X.byteLength-t.qa()))}},B("shaka.util.Mp4Parser",Ci),Ci.headerSize=Ai,Ci.typeToString=wi,Ci.allData=Ri,Ci.sampleDescription=Ti,Ci.children=Si,Ci.prototype.parseNext=Ci.prototype.yd,Ci.prototype.parse=Ci.prototype.parse,Ci.prototype.stop=Ci.prototype.stop,Ci.prototype.fullBox=Ci.prototype.Z,Ci.prototype.box=Ci.prototype.box;var Ii=0,ki=1;function Mi(e,t,n,r,i){var s=Li.value(),a=e.subarray(n.start,n.start+n.size),o=kt(a),l=new Uint8Array(n.size+s.byteLength);for(l.set(a,0),(a=kt(l)).setUint32(4,i),l.set(s,n.size),i=o.getUint32(4),a.setUint32(n.size+16,i),Pi(l,0,l.byteLength),i=new Uint8Array(e.byteLength+l.byteLength),n=En("Xbox One")?n.start:n.start+n.size,s=e.subarray(n),i.set(e.subarray(0,n)),i.set(l,n),i.set(s,n+l.byteLength),r=(e=c(r)).next();!r.done;r=e.next())Pi(i,(r=r.value).start,r.size+l.byteLength);return l=kt(i,t.start),t=Ai(t),e=l.getUint32(t),l.setUint32(t,e+1),i}function Pi(e,t,n){0!=(t=(e=kt(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var Li=new $t(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Di(e,t,n,r,i){if(r>=i)return null;for(var s=-1,a=-1,o=0;o<n.length;o++)if(n[o].some(function(e){return null!=e&&""!=e.g.trim()})){s=o;break}for(o=n.length-1;0<=o;o--)if(n[o].some(function(e){return null!=e&&""!=e.g.trim()})){a=o;break}if(-1===s||-1===a)return null;for(var l=o=!1,c="white",u="black",d=Oi(r,i,o,l,c,u);s<=a;s++){for(var h=n[s],p=-1,m=-1,f=0;f<h.length;f++)if(null!=h[f]&&""!==h[f].g.trim()){p=f;break}for(f=h.length-1;0<=f;f--)if(null!=h[f]&&""!==h[f].g.trim()){m=f;break}if(-1===p||-1===m)h=$i(r,i),e.nestedCues.push(h);else{for(;p<=m;p++)if(f=h[p]){var g=f.l,x=f.i,v=f.j,y=f.h;g==o&&x==l&&v==c&&y==u||(d.payload&&e.nestedCues.push(d),d=Oi(r,i,g,x,v,y),o=g,l=x,c=v,u=y),d.payload+=f.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),s!==a&&(d=$i(r,i),e.nestedCues.push(d)),d=Oi(r,i,o,l,c,u)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Oi(e,t,n,r,i,s){return e=new at(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=i,e.backgroundColor=s,e}function $i(e,t){var n=new at(e,t,"");return n.lineBreak=!0,n}function Ni(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function Fi(e,t){this.i=[],this.g=1,this.h=0,this.G=e,this.C=t,this.j=this.s=!1,this.l="white",this.B="black",Ui(this)}function Bi(e,t,n){return Di(new at(t,n,""),"CC"+(e.G<<1|e.C+1),e.i,t,n)}function Ui(e){Hi(e,0,15),e.g=1}function Gi(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case Wi:r=Yi.has(n)?Yi.get(n):String.fromCharCode(n);break;case qi:r=Qi.get(n);break;case zi:e.i[e.g].pop(),r=Xi.get(n);break;case Ki:e.i[e.g].pop(),r=Zi.get(n)}r&&e.i[e.g].push(new Ni(r,e.s,e.j,e.B,e.l))}}function Vi(e,t,n,r){if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(e){return e});else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map(function(e){return e})}function Hi(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var Wi=0,qi=1,zi=2,Ki=3,Yi=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Qi=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Xi=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Zi=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]);function Ji(e,t){this.h=rs,this.B=new Fi(e,t),this.i=new Fi(e,t),this.l=new Fi(e,t),this.g=this.i,this.j=0,this.s=null}function es(e,t,n){e.g=e.i;var r=e.g,i=null;return e.h!==ss&&e.h!==as&&(i=Bi(r,e.j,n),(n=e.i).g=0<n.h?n.h:0,Hi(n,0,15),(n=e.l).g=0<n.h?n.h:0,Hi(n,0,15),r.g=15),e.h=ss,r.h=t,i}function ts(e){e.h=is,e.g=e.l,e.g.h=0}function ns(e){q("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.B,e.h=as}var rs=0,is=1,ss=3,as=4,os="black green blue cyan red yellow magenta black".split(" "),ls="white green blue cyan red yellow magenta white_italics".split(" ");function cs(){this.l=!1,this.I=this.L=0,this.J=xs,this.i=[],this.g=this.h=this.j=0,this.G=this.B=!1,this.C="white",this.s="black",us(this)}function us(e){e.i=[];for(var t=0;15>t;t++)e.i.push(ds())}function ds(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function hs(e,t){ps(e)&&(e.i[e.h][e.g]=new Ni(t,e.G,e.B,e.s,e.C),e.g++)}function ps(e){var t=e.g<e.I&&0<=e.g;return e.h<e.L&&0<=e.h&&t}function ms(e,t,n){var r=new at(e.j,t,"");return r.textAlign=e.J===fs?"left":e.J===gs?"right":ct,(n=Di(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}cs.prototype.isVisible=function(){return this.l};var fs=0,gs=1,xs=2;function vs(){this.i=[],this.h=null,this.g=0}function ys(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new _s(e.h)),e.h=null,e.g=0))}function _s(e){this.g=0,this.h=e}function Es(e){if(!e.Ia())throw new ye(2,2,3e3);return e.h[e.g++]}function bs(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Cs(e,t,n,r){if(128<=n&&135>=n)r=7&n,e.h[r]&&(e.g=e.h[r]);else{if(136===n){n=Es(t).value,t=null;for(var i=(n=c(Ss(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=ms(i,r,e.i)),us(i);return t}if(137===n)for(t=Es(t).value,n=(t=c(Ss(e,t))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=r),n.l=!0;else{if(138===n){for(n=Es(t).value,t=null,i=(n=c(Ss(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=ms(i,r,e.i)),i.l=!1;return t}if(139===n){for(n=Es(t).value,t=null,i=(n=c(Ss(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()?t=ms(i,r,e.i):i.j=r,i.l=!i.l;return t}if(140===n)return Ts(e,t=Es(t).value,r);if(143===n)return r=Ts(e,255,r),Rs(e),r;if(144===n)t.skip(1),r=Es(t).value,e.g&&(e.g.B=0<(128&r),e.g.G=0<(64&r));else if(145===n)r=Es(t).value,n=Es(t).value,t.skip(1),e.g&&(t=js((48&n)>>4,(12&n)>>2,3&n),e.g.C=js((48&r)>>4,(12&r)>>2,3&r),e.g.s=t);else if(146===n)r=Es(t).value,t=Es(t).value,e.g&&((e=e.g).h=15&r,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),r=Es(t).value,t.skip(1),e.g&&(e.g.J=3&r);else if(152<=n&&159>=n){if(n=(15&n)-8,!(i=null!==e.h[n])){var s=new cs;s.j=r,e.h[n]=s}r=Es(t).value,Es(t),Es(t),s=Es(t).value;var a=Es(t).value;t=Es(t).value,i&&!(7&t)||((t=e.h[n]).h=0,t.g=0,t.G=!1,t.B=!1,t.C="white",t.s="black"),(t=e.h[n]).l=0<(32&r),t.L=1+(15&s),t.I=1+(63&a),e.g=e.h[n]}}}return null}_s.prototype.Ia=function(){return this.g<this.h.length},_s.prototype.qa=function(){return this.g},_s.prototype.skip=function(e){if(this.g+e>this.h.length)throw new ye(2,2,3e3);this.g+=e};var Ss=function e(t,n){var r;return M(e,function(e){return 1==e.g&&(r=0),5!=e.g?8>r?1&~n||!t.h[r]?e.D(5):_(e,r,5):e.D(0):(n>>=1,r++,e.D(2))})};function Ts(e,t,n){for(var r=null,i=(t=c(Ss(e,t))).next();!i.done;i=t.next()){i=i.value;var s=e.h[i];s.isVisible()&&(r=ms(s,n,e.i)),e.h[i]=null}return r}function Rs(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function js(e,t,n){var r={0:0,1:0,2:1,3:1};return As[(e=r[e])<<2|(t=r[t])<<1|(n=r[n])]}var ws=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),As="black blue green cyan red magenta yellow white".split(" ");function Is(){this.h=[],this.g=[],this.i=new vs,this.l=0,this.C=new Map([["CC1",new Ji(0,0)],["CC2",new Ji(0,1)],["CC3",new Ji(1,0)],["CC4",new Ji(1,1)]]),this.B=this.s=0,this.j=new Map,ks(this)}function ks(e){e.s=0,e.B=0;for(var t=(e=c(e.C.values())).next();!t.done;t=e.next())(t=t.value).h=2,t.g=t.i,t.s=null,Ui(t.i),Ui(t.l),Ui(t.B)}function Ms(e,t){var n=t.type;if(16==(112&t.Wa)){var r=t.Wa>>3&1;0===n?e.s=r:e.B=r}if(n=e.C.get("CC"+(n<<1|(n?e.B:e.s)+1)),255===t.Wa&&255===t.rb||!t.Wa&&!t.rb||!Ls(t.Wa)||!Ls(t.rb))return 45<=++e.l&&ks(e),null;if(e.l=0,t.Wa&=127,t.rb&=127,!t.Wa&&!t.rb)return null;if(r=null,16==(112&t.Wa))e:{var i=t.Wa;if(r=t.rb,n.s===(i<<8|r))n.s=null;else if(n.s=i<<8|r,16==(240&i)&&64==(192&r)){i=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&i)<<1|r>>5&1];var s=(30&r)>>1,a="white",o=!1;if(7>s?a=ls[s]:7===s&&(o=!0),r=!(1&~r),n.h!==as){if(s=n.g,n.h===ss&&i!==s.g){var l=1+i-s.h;Vi(s,l,1+s.g-s.h,s.h),Hi(s,0,l-1),Hi(s,i+1,15-i)}s.g=i,n.g.s=r,n.g.j=o,n.g.l=a,n.g.B="black"}}else if(17==(247&i)&&32==(240&r))n.g.s=!1,n.g.j=!1,n.g.l="white",Gi(n.g,Wi,32),a=!1,"white_italics"===(i=ls[(14&r)>>1])&&(i="white",a=!0),n.g.s=!(1&~r),n.g.j=a,n.g.l=i;else if(16==(247&i)&&32==(240&r)||23==(247&i)&&45==(255&r))a="black",!(7&i)&&(a=os[(14&r)>>1]),n.g.B=a;else if(17==(247&i)&&48==(240&r))Gi(n.g,qi,r);else if(18==(246&i)&&32==(224&r))Gi(n.g,1&i?Ki:zi,r);else if(20==(246&i)&&32==(240&r)){switch(r=t.pts,i=null,t.rb){case 32:ts(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:i=es(n,2,r);break;case 38:i=es(n,3,r);break;case 39:i=es(n,4,r);break;case 40:Gi(n.g,Wi,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.j=r;break;case 42:Ui(n.B),ns(n);break;case 43:ns(n);break;case 44:i=n.i,a=null,n.h!==as&&(a=Bi(i,n.j,r)),Hi(i,0,15),i=a;break;case 45:i=n.g,n.h!==ss?i=null:(a=Bi(i,n.j,r),Vi(i,(o=i.g-i.h+1)-1,o,i.h),Hi(i,0,o-1),Hi(i,i.g,15-i.g),n.j=r,i=a);break;case 46:Hi(n.l,0,15);break;case 47:i=null,n.h!==as&&(i=Bi(n.i,n.j,r)),a=n.l,n.l=n.i,n.i=a,ts(n),n.j=r}r=i;break e}r=null}else i=t.rb,Gi(n.g,Wi,t.Wa),Gi(n.g,Wi,i);return r}function Ps(e,t){var n=[];try{for(;t.Ia();){var r=Es(t).value,i=(224&r)>>5,s=31&r;if(7===i&&0!=s&&(i=63&Es(t).value),0!=i){e.j.has(i)||e.j.set(i,new bs(i));for(var a=e.j.get(i),o=t.qa();t.qa()-o<s;){var l=Es(i=t),c=l.value,u=l.pts;if(16===c&&(c=c<<16|Es(i).value),0<=c&&31>=c){var d=u;if(a.g){var h=a.g;switch(i=null,c){case 8:!ps(h)||0>=h.g&&0>=h.h||(0>=h.g?(h.g=h.I-1,h.h--):h.g--,h.i[h.h][h.g]=null);break;case 13:if(h.isVisible()&&(i=ms(h,d,a.i)),h.h+1>=h.L){d=h;for(var p=0,m=1;15>m;m++,p++)d.i[p]=d.i[m];for(m=0;1>m;m++,p++)d.i[p]=ds()}else h.h++;h.g=0;break;case 14:h.isVisible()&&(i=ms(h,d,a.i)),h.i[h.h]=ds(),h.g=0;break;case 12:h.isVisible()&&(i=ms(h,d,a.i)),us(h),(d=h).h=0,d.g=0}var f=i}else f=null}else if(128<=c&&159>=c)f=Cs(a,i,c,u);else{if(4096<=c&&4127>=c)8<=(d=255&c)&&15>=d?i.skip(1):16<=d&&23>=d?i.skip(2):24<=d&&31>=d&&i.skip(3);else if(4224<=c&&4255>=c)128<=(d=255&c)&&135>=d?i.skip(4):136<=d&&143>=d&&i.skip(5);else if(32<=c&&127>=c)i=c,a.g&&hs(a.g,127===i?"":String.fromCharCode(i));else if(160<=c&&255>=c)a.g&&hs(a.g,String.fromCharCode(c));else if(4128<=c&&4223>=c){if(i=255&c,a.g)if(ws.has(i)){var g=ws.get(i);hs(a.g,g)}else hs(a.g,"_")}else 4256<=c&&4351>=c&&a.g&&hs(a.g,160!=(255&c)?"_":"[CC]");f=null}(i=f)&&n.push(i)}}}}catch(x){if(!(x instanceof ye&&3e3===x.code))throw x;q("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function Ls(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function Ds(){}var Os=function e(t,n){var r,i,s,a;return M(e,function(e){if(1==e.g){for(var t=n,o=0,l=0;l<t.length;)2==o&&3==t[l]?(o=0,(t=[].concat(u(t))).splice(l,1),t=new Uint8Array(t)):0==t[l]?o++:o=0,l++;r=t,i=0}if(4!=e.g){if(!(i<r.length))return e.D(0);for(s=0;255==r[i];)s+=255,i++;for(s+=r[i++],a=0;255==r[i];)a+=255,i++;return a+=r[i++],4!=s?e.D(4):_(e,r.subarray(i,i+a),4)}return i+=a,e.D(2)})};function $s(e,t){var n=null,r=null,i=e.T();return 1&t&&e.skip(8),2&t&&e.skip(4),8&t&&(n=e.T()),16&t&&(r=e.T()),{trackId:i,cf:n,Yf:r}}function Ns(e,t){return{Xd:1==t?e.xc():e.T()}}function Fs(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.T()}}function Bs(e,t,n){var r=e.T(),i=[];1&n&&e.skip(4),4&n&&e.skip(4);for(var s=c(ne(r)),a=s.next();!a.done;a=s.next())a={ye:null,sampleSize:null,Cd:null},256&n&&(a.ye=e.T()),512&n&&(a.sampleSize=e.T()),1024&n&&e.skip(4),2048&n&&(a.Cd=0==t?e.T():e.wf()),i.push(a);return{Vi:r,zf:i}}function Us(){this.j=new Ds,this.i=new Map,this.h=this.g=0}function Gs(){this.h=new Us,this.g=new Is}function Vs(e,t){for(var n=e.h.parse(t),r=(n=c(n)).next();!r.done;r=n.next()){var i=r.value,s=It(i.Wg);if(0<s.length&&(r=e.g,i=i.pts,181===(s=new _i(s,0)).ra()&&49===s.wc()&&1195456820===s.T()&&3===s.ra())){var a=s.ra();if(64&a){a&=31,s.skip(1);for(var o=0;o<a;o++){var l=s.ra(),d=(4&l)>>2,h=s.ra(),p=s.ra();d&&(0==(l&=3)||1===l?r.h.push({pts:i,type:l,Wa:h,rb:p,order:r.h.length}):(r.g.push({pts:i,type:l,value:h,order:r.g.length}),r.g.push({pts:i,type:2,value:p,order:r.g.length})))}}}}return function(e){function t(e,t){return e.pts-t.pts||e.order-t.order}var n=[];e.h.sort(t),e.g.sort(t);for(var r=c(e.h),i=r.next();!i.done;i=r.next())(i=Ms(e,i.value))&&n.push(i);for(i=(r=c(e.g)).next();!i.done;i=r.next())ys(e.i,i.value);for(i=(r=c(e.i.i)).next();!i.done;i=r.next())i=Ps(e,i.value),n.push.apply(n,u(i));return e.i.i=[],e.h=[],e.g=[],n}(e.g)}function Hs(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ws(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function qs(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=c(zs(e)),i=r.next();!i.done;i=r.next()){var s=i.value;i=s.start,(s=s.end)>t&&(n+=s-Math.max(i,t))}return n}function zs(e){if(!e)return[];for(var t=[],n=c(ne(e.length)),r=n.next();!r.done;r=n.next())r=r.value,t.push({start:e.start(r),end:e.end(r)});return t}function Ks(e,t,n,r){var i=this;this.g=e,this.s=n,this.j={},this.L={},this.i=null,this.M=r||function(){},this.l={},this.h=new Or,this.C={},this.G=t,this.I=new Ot,this.B=function(e,t){var n=new MediaSource;return e.h.Qa(n,"sourceopen",function(){URL.revokeObjectURL(e.J),t.resolve()}),e.J=la(n),e.g.src=e.J,n}(this,this.I),this.N=new Lr(function(){return function(e){var t,n,r,i,s,a,o;return P(function(l){if(1==l.g){for(n in t=[],e.l)for(r=e.l[n],i=r[0],e.l[n]=r.slice(0,1),i&&t.push(i.p.catch(Re)),s=c(r.slice(1)),a=s.next();!a.done;a=s.next())a.value.p.reject(new ye(2,7,7003,void 0));for(o in e.i&&t.push(e.i.destroy()),e.s&&t.push(e.s.destroy()),e.C)t.push(e.C[o].destroy());return _(l,Promise.all(t),2)}e.h&&(e.h.release(),e.h=null),e.g&&(e.g.removeAttribute("src"),e.g.load(),e.g=null),e.B=null,e.i=null,e.s=null,e.j={},e.C={},e.G=null,e.l={},E(l)})}(i)}),this.J=""}function Ys(e,t){e.i||(e.i=new on(e.s)),"application/cea-608"!=t&&"application/cea-708"!=t&&(e.i.C=we(hn[t]))}function Qs(e){return!e.B||"ended"==e.B.readyState}function Xs(e,t){if(t==Pe)var n=e.i.g;else n=!(n=Js(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function Zs(e,t){return t==Pe?e.i.h:Hs(Js(e,t))}function Js(e,t){try{return e.j[t].buffered}catch(n){return null}}function ea(e,t,n,r,i,s){var a,o,l,u,d,h,p,m;return P(function(f){return 1==f.g?t==(a=Le).ua?_(f,function(e,t,n,r){var i,s,a;return P(function(o){return 1==o.g?_(o,Promise.resolve(),2):e.C&&e.i?null==n||null==r?(e.C.parseInit(It(t)),o.return()):(i={periodStart:e.G,segmentStart:n,segmentEnd:r},s=e.C.parseMedia(It(t),i),a=s.filter(function(t){return t.startTime>=e.j&&t.startTime<e.l}),e.i.append(a),null==e.g&&(e.g=Math.max(n,e.j)),e.h=Math.min(r,e.l),void E(o)):o.return()})}(e.i,n,r,i),0):e.C[t]?_(f,function(e,t){e.l=!0,e.h=new Ot,e.s=[],e.j=[],e.i=[];var n=It(t);return e.g.push(n),e.g.flush(),e.l&&e.h.reject(new ye(2,3,3018)),e.h}(e.C[t],n),10):s?(e.i||Ys(e,"text/vtt"),null==r&&null==i?e.G.init(n):(o=Vs(e.G,n)).length&&(l=e.j[a.mb].timestampOffset,dn(e.i,o,r,i,l)),n=oa(e,n,r,t),_(f,ra(e,t,function(){e.j[t].appendBuffer(n)}),0)):(n=oa(e,n,r,t),_(f,ra(e,t,function(){e.j[t].appendBuffer(n)}),0)):(u=f.h,e.i||Ys(e,"text/vtt"),u.metadata&&(d=e.j[t].timestampOffset,e.M(u.metadata,d,i)),u.captions&&u.captions.length&&(h=e.j[a.mb].timestampOffset,p=function(e){for(var t=[],n=(e=c(e)).next();!n.done;n=e.next())n=n.value,t.push({stream:n.stream,cue:new at(n.startTime,n.endTime,n.text)});return t}(u.captions),dn(e.i,p,r,i,h)),m=u.data,m=oa(e,m,r,t),_(f,ra(e,t,function(){e.j[t].appendBuffer(m)}),0))})}function ta(e,t){return P(function(n){return t==Le.ua?e.i?_(n,e.i.remove(0,1/0),0):n.return():_(n,ra(e,t,function(){var n=e.B.duration;0>=n?na(e,t):e.j[t].remove(0,n)}),0)})}function na(e,t){var n=e.l[t][0];n&&(n.p.resolve(),sa(e,t))}function ra(e,t,n){return Dr(e.N),n={start:n,p:new Ot},e.l[t].push(n),1==e.l[t].length&&aa(e,t),n.p}function ia(e,t){var n,r,i,s,a;return P(function(o){switch(o.g){case 1:for(i in Dr(e.N),n=[],r={},e.j)r.Dc=new Ot,s={start:function(e){return function(){return e.Dc.resolve()}}(r),p:r.Dc},e.l[i].push(s),n.push(r.Dc),1==e.l[i].length&&s.start(),r={Dc:r.Dc};return b(o,2),_(o,Promise.all(n),4);case 4:S(o,3);break;case 2:throw T(o);case 3:try{t()}catch(l){throw new ye(2,3,3015,l)}finally{for(a in e.j)sa(e,a)}E(o)}})}function sa(e,t){e.l[t].shift(),aa(e,t)}function aa(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new ye(2,3,3017,t)):n.p.reject(new ye(2,3,3015,r)),sa(e,t)}}function oa(e,t,n,r){var i=e.g.mediaKeys;return null==n&&i&&(xn()||En("Xbox One"))&&"mp4"==e.L[r].split(";")[0].split("/")[1]&&(t=function(e){function t(){i=!0}function n(e){s.push(e),Si(e)}e=It(e);var r,i=!1,s=[],a=[];if((new Ci).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).Z("stsd",function(e){r=e,s.push(e),Ti(e)}).Z("encv",t).Z("enca",t).Z("avc1",function(e){a.push({box:e,Sc:1701733238})}).Z("avc3",function(e){a.push({box:e,Sc:1701733238})}).Z("ac-3",function(e){a.push({box:e,Sc:1701733217})}).Z("ec-3",function(e){a.push({box:e,Sc:1701733217})}).Z("mp4a",function(e){a.push({box:e,Sc:1701733217})}).parse(e),i)return e;if(0==a.length||!r)throw Qt(e),new ye(2,3,3019);a.reverse();for(var o=c(a),l=o.next();!l.done;l=o.next())l=l.value,e=Mi(e,r,l.box,s,l.Sc);return e}(t)),t}Us.prototype.init=function(e){var t=this,n=[],r=[];if((new Ci).box("moov",Si).box("mvex",Si).Z("trex",function(e){var n=e.reader;n.skip(4),n.skip(4),e=n.T(),n=n.T(),t.g=e,t.h=n}).box("trak",Si).Z("tkhd",function(e){var t=e.reader;1==e.version?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4)),e=t.T(),n.push(e)}).box("mdia",Si).Z("mdhd",function(e){e=Fs(e.reader,e.version),r.push(e.timescale)}).parse(e,!0),!n.length||!r.length||n.length!=r.length)throw new ye(2,2,2010);n.forEach(function(e,n){t.i.set(e,r[n])})},Us.prototype.parse=function(e){var t=this,n=[],r=this.g,i=this.h,s=[],a=null,o=9e4;return(new Ci).box("moof",Si).box("traf",Si).Z("trun",function(e){s=Bs(e.reader,e.version,e.flags).zf}).Z("tfhd",function(e){e=$s(e.reader,e.flags),r=e.cf||t.g,i=e.Yf||t.h,e=e.trackId,t.i.has(e)&&(o=t.i.get(e))}).Z("tfdt",function(e){a=Ns(e.reader,e.version).Xd}).box("mdat",function(e){if(null===a)throw new ye(2,2,2010);e=e.reader;var l=a,u=o,d=r,h=i,p=s,m=0,f=h;for(p.length&&(f=p[0].sampleSize||h);e.Ia();){var g=e.T();if(6==(31&e.ra())){var x=0;p.length>m&&(x=p[m].Cd||0),x=(l+x)/u;for(var v=c(Os(t.j,e.Lb(g-1))),y=v.next();!y.done;y=v.next())n.push({Wg:y.value,pts:x})}else e.skip(g-1);0==(f-=g+4)&&(l=p.length>m?l+(p[m].ye||d):l+d,m++,f=p.length>m&&p[m].sampleSize||h)}}).parse(e,!1),n},Gs.prototype.init=function(e){this.h.init(e)},(r=Ks.prototype).destroy=function(){return this.N.destroy()},r.init=function(e,t){var n,r,i,s,a,o,l,u=this;return P(function(d){if(1==d.g)return n=Le,_(d,u.I,2);for(r={},i=c(e.keys()),s=i.next();!s.done;r={Oa:r.Oa},s=i.next())r.Oa=s.value,a=e.get(r.Oa),o=nn(a.mimeType,a.codecs),r.Oa==n.ua?Ys(u,o):(!t&&MediaSource.isTypeSupported(o)||!Jt(o,r.Oa)||(u.C[r.Oa]=new Zt,o=tn(r.Oa,o)),l=u.B.addSourceBuffer(o),u.h.o(l,"error",function(e){return function(){u.l[e.Oa][0].p.reject(new ye(2,3,3014,u.g.error?u.g.error.code:0))}}(r)),u.h.o(l,"updateend",function(e){return function(){return na(u,e.Oa)}}(r)),u.j[r.Oa]=l,u.L[r.Oa]=o,u.l[r.Oa]=[]);E(d)})},r.Ib=function(){var e={total:zs(this.g.buffered),audio:zs(Js(this,"audio")),video:zs(Js(this,"video")),text:[]};if(this.i){var t=this.i.g,n=this.i.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},r.remove=function(e,t,n){var r=this;return P(function(i){return _(i,e==Le.ua?r.i.remove(t,n):ra(r,e,function(){n<=t?na(r,e):r.j[e].remove(t,n)}),0)})},r.flush=function(e){var t=this;return P(function(n){return e==Le.ua?n.return():_(n,ra(t,e,function(){t.g.currentTime-=.001,na(t,e)}),0)})},r.endOfStream=function(e){var t=this;return P(function(n){return _(n,ia(t,function(){Qs(t)||(e?t.B.endOfStream(e):t.B.endOfStream())}),0)})},r.ib=function(e){var t=this;return P(function(n){return _(n,ia(t,function(){t.B.duration=e}),0)})},r.getDuration=function(){return this.B.duration};var la=e.URL.createObjectURL;function ca(e,t,n,r){this.Ma=e,this.Ka=t,this.Da=n,this.ge=void 0===r?null:r}function ua(e,t,n,r,i,s,a,o,l,c,u,d){c=void 0===c?[]:c,this.startTime=e,this.l=this.endTime=t,this.j=n,this.Ka=r,this.Da=i,this.g=s,this.timestampOffset=a,this.appendWindowStart=o,this.appendWindowEnd=l,this.h=c,this.tilesLayout=void 0===u?"":u,this.i=void 0===d?null:d}function da(e,t,n){this.j=e,this.zd=t,this.s=this.l=1/0,this.g=1,this.h=this.i=null,this.B=0,this.C=!0,this.G=0,this.I=void 0===n||n,this.J=0}function ha(e,t){this.j=e,this.s=ma(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.h=!1,this.B=t,this.i=function(){}}function pa(e){this.g=e}function ma(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=c(zs(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function fa(e,t,n,r,i){var s=this;this.g=e,this.G=t,this.m=n,this.C=i,this.h=new Or,this.B=!1,this.I=e.readyState,this.j=!1,this.i=r,this.s=!1,this.h.o(e,"waiting",function(){return ga(s)}),this.l=new mn(function(){ga(s)}).na(.25)}function ga(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.B)return}else e.B=!1;if(!e.g.paused||0==e.g.currentTime&&(e.g.autoplay||0!=e.g.currentTime)){var t;if(e.g.readyState!=e.I&&(e.j=!1,e.I=e.g.readyState),!(t=!e.i)){var n=(t=e.i).j,r=ma(n),i=n.g.currentTime,s=Date.now()/1e3;t.g==i&&t.s==r||(t.l=s,t.g=i,t.s=r,t.h=!1),(r=(i=s-t.l)>=t.B&&r&&!t.h)&&(t.i(t.g,i),t.h=!0,t.g=n.g.currentTime),t=!r}if(t){i=e.m.smallGapLimit;var a=e.g.currentTime;if(n=function(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:0<=(e=zs(e).findIndex(function(e,r,i){return e.start>t&&(0==r||i[r-1].end-t<=n)}))?e:null}(t=e.g.buffered,a,e.m.gapDetectionThreshold),!(null==n||0==n&&!e.s||(r=t.start(n),r>=e.G.sb()))){var o=r-a;i=o<=i,s=!1,.001>o||(i||e.j||(e.j=!0,(a=new U("largegap",a=(new Map).set("currentTime",a).set("gapSize",o))).cancelable=!0,e.C(a),e.m.jumpLargeGaps&&!a.defaultPrevented&&(s=!0)),!i&&!s)||(0!=n&&t.end(n-1),e.g.currentTime=r)}}}}}function xa(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=va.value().get(t),n.Qa(e,t,r))}ca.prototype.Oc=function(){return this.Ka},ca.prototype.Kc=function(){return this.Da},B("shaka.media.InitSegmentReference",ca),ca.prototype.getEndByte=ca.prototype.Kc,ca.prototype.getStartByte=ca.prototype.Oc,(r=ua.prototype).Ma=function(){return this.j()},r.Bg=function(){return this.startTime},r.mg=function(){return this.endTime},r.Oc=function(){return this.Ka},r.Kc=function(){return this.Da},r.Hg=function(){return this.tilesLayout},r.Gg=function(){return this.i},B("shaka.media.SegmentReference",ua),ua.prototype.getTileDuration=ua.prototype.Gg,ua.prototype.getTilesLayout=ua.prototype.Hg,ua.prototype.getEndByte=ua.prototype.Kc,ua.prototype.getStartByte=ua.prototype.Oc,ua.prototype.getEndTime=ua.prototype.mg,ua.prototype.getStartTime=ua.prototype.Bg,ua.prototype.getUris=ua.prototype.Ma,(r=da.prototype).getDuration=function(){return this.l},r.vg=function(){return this.g},r.ib=function(e){this.l=e},r.zg=function(){return this.j},r.Cf=function(e){this.B=e},r.Zc=function(e){this.C=e},r.Ie=function(e){this.s=e},r.nh=function(e){this.zd=e},r.lg=function(){return this.zd},r.tc=function(e){if(0!=e.length){var t=e[e.length-1].endTime;this.me(e[0].startTime),this.g=e.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.g),this.h=Math.max(this.h,t),null!=this.j&&this.I&&(this.j=(Date.now()+this.B)/1e3-this.h-this.g)}},r.me=function(e){this.i=null==this.i?e:Math.min(this.i,e)},r.le=function(e){this.g=Math.max(this.g,e)},r.offset=function(e){null!=this.i&&(this.i+=e),null!=this.h&&(this.h+=e)},r.W=function(){return 1/0==this.l&&!this.C},r.Tb=function(){return 1/0!=this.l&&!this.C},r.ub=function(){return Math.max(this.G,this.Qb()-this.s)},r.Ff=function(e){this.G=e},r.Qb=function(){return this.W()||this.Tb()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.j)+this.J,this.l):this.h||this.l},r.Nc=function(e){var t=Math.max(this.i,this.G);return 1/0==this.s?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Qb()-this.s+e,this.sb()))},r.mc=function(){return this.Nc(0)},r.sb=function(){return Math.max(0,this.Qb()-(this.W()||this.Tb()?this.zd:0))},r.Kf=function(){return!(null==this.j||null!=this.h&&this.I)},r.Bf=function(e){this.J=e},B("shaka.media.PresentationTimeline",da),da.prototype.setAvailabilityTimeOffset=da.prototype.Bf,da.prototype.usingPresentationStartTime=da.prototype.Kf,da.prototype.getSeekRangeEnd=da.prototype.sb,da.prototype.getSeekRangeStart=da.prototype.mc,da.prototype.getSafeSeekRangeStart=da.prototype.Nc,da.prototype.getSegmentAvailabilityEnd=da.prototype.Qb,da.prototype.setUserSeekStart=da.prototype.Ff,da.prototype.getSegmentAvailabilityStart=da.prototype.ub,da.prototype.isInProgress=da.prototype.Tb,da.prototype.isLive=da.prototype.W,da.prototype.offset=da.prototype.offset,da.prototype.notifyMaxSegmentDuration=da.prototype.le,da.prototype.notifyMinSegmentStartTime=da.prototype.me,da.prototype.notifySegments=da.prototype.tc,da.prototype.getDelay=da.prototype.lg,da.prototype.setDelay=da.prototype.nh,da.prototype.setSegmentAvailabilityDuration=da.prototype.Ie,da.prototype.setStatic=da.prototype.Zc,da.prototype.setClockOffset=da.prototype.Cf,da.prototype.getPresentationStartTime=da.prototype.zg,da.prototype.setDuration=da.prototype.ib,da.prototype.getMaxSegmentDuration=da.prototype.vg,da.prototype.getDuration=da.prototype.getDuration,ha.prototype.release=function(){this.j=null,this.i=function(){}},fa.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.l&&(this.l.stop(),this.l=null),this.i&&(this.i.release(),this.i=null),this.g=this.G=this.C=null},fa.prototype.qe=function(){this.s=!0,ga(this)};var va=new $t(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function ya(e,t,n){var r=this;this.g=e,this.l=t,this.j=n,this.s=!1,this.h=new Or,this.i=new Sa(e),xa(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){ba(r,r.j)})}function _a(e){return e.s?e.g.currentTime:e.j}function Ea(e,t){0<e.g.readyState?Ta(e.i,t):xa(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){ba(e,e.j)})}function ba(e,t){.001>Math.abs(e.g.currentTime-t)?Ca(e):(e.h.Qa(e.g,"seeking",function(){Ca(e)}),Ta(e.i,0==e.g.currentTime?t:e.g.currentTime))}function Ca(e){e.s=!0,e.h.o(e.g,"seeking",function(){return e.l()})}function Sa(e){var t=this;this.h=e,this.s=10,this.l=this.j=this.i=0,this.g=new mn(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}function Ta(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.s,e.h.currentTime=t,e.g.na(.1)}function Ra(e){var t=this;this.g=e,this.j=!1,this.i=null,this.h=new Or,xa(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.h,function(){null==t.i||0==t.i?t.j=!0:(t.h.Qa(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.i))})}function ja(e,t,n,r,i,s){var a=this;this.i=e,this.g=t.presentationTimeline,this.J=t.minBufferTime||0,this.m=n,this.G=i,this.C=null,this.j=new fa(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,r=new ha(new pa(e),t.stallThreshold);return function(e,t){e.i=t}(r,function(){n?e.currentTime+=n:(e.pause(),e.play())}),r}(e,n),s),this.h=new ya(e,function(){var e=a.j;e.B=!0,e.s=!1,e.j=!1;var t=_a(a.h);return e=Aa(a,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!a.C||a.C<t-1)?(a.C=t,Ea(a.h,e),e=void 0):(a.G(),e=void 0),e},function(e,t){return null==t?t=1/0>e.g.getDuration()?e.g.mc():e.g.sb():0>t&&(t=e.g.sb()+t),wa(e,Ia(e,t))}(this,r)),this.B=new mn(function(){if(0!=a.i.readyState&&!a.i.paused){var e=_a(a.h),t=a.g.mc(),n=a.g.sb();3>n-t&&(t=n-3),e<t&&(e=Aa(a,e),a.i.currentTime=e)}}).na(.25)}function wa(e,t){var n=e.g.getDuration();return t>=n?n-e.m.durationBackoff:t}function Aa(e,t){var n=Math.max(e.J,e.m.rebufferingGoal),r=e.m.safeSeekOffset,i=e.g.mc(),s=e.g.sb(),a=e.g.getDuration();3>s-i&&(i=s-3);var o=e.g.Nc(n),l=e.g.Nc(r);return n=e.g.Nc(n+r),t>=a?wa(e,t):t>s?s:t<i?Ws(e.i.buffered,l)?l:n:t>=o||Ws(e.i.buffered,t)?t:n}function Ia(e,t){var n=e.g.mc();return t<n||t>(n=e.g.sb())?n:t}function ka(e){this.R=e,this.g=null,this.h=0,this.i=!1}function Ma(e,t,n){return new ka([new ua(e,e+t,function(){return n},0,null,null,e,e,e+t)])}function Pa(e,t,n){this.i=e,this.h=t,this.g=n}function La(){ka.call(this,[]),this.j=[]}function Da(e){var t=this;this.g=e,this.j=!1,this.i=this.g.sd(),this.h=new mn(function(){t.g.uf(.25*t.i)})}function Oa(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.sd()!=t&&e.g.Ge(t))}catch(n){}e.h.na(.25),0!=e.g.sd()&&e.g.Ge(0)}function $a(e){var t=this;this.h=e,this.g=new Set,this.i=new mn(function(){Na(t,!1)}).na(.25)}function Na(e,t){for(var n=c(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function Fa(e){J.call(this),this.g=new Map,this.h=e}function Ba(e){J.call(this);var t=this;this.g=new Set,this.i=e,this.h=new mn(function(){for(var e=t.i(),n=c(t.g),r=n.next();!r.done;r=n.next())(r=r.value).endTime<e.start&&(t.g.delete(r),r=new U("regionremove",new Map([["region",r]])),t.dispatchEvent(r))}).na(2)}function Ua(e){J.call(this);var t=this;this.i=e,this.g=new Map,this.l=[{cc:null,bc:Ha,Sb:function(e,n){return Ga(t,"enter",e,n)}},{cc:Va,bc:Ha,Sb:function(e,n){return Ga(t,"enter",e,n)}},{cc:Wa,bc:Ha,Sb:function(e,n){return Ga(t,"enter",e,n)}},{cc:Ha,bc:Va,Sb:function(e,n){return Ga(t,"exit",e,n)}},{cc:Ha,bc:Wa,Sb:function(e,n){return Ga(t,"exit",e,n)}},{cc:Va,bc:Wa,Sb:function(e,n){return Ga(t,"skip",e,n)}},{cc:Wa,bc:Va,Sb:function(e,n){return Ga(t,"skip",e,n)}}],this.h=new Or,this.h.o(this.i,"regionremove",function(e){t.g.delete(e.region)})}function Ga(e,t,n,r){t=new U(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}ya.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},Sa.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},Ra.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.g=null},Ra.prototype.s=function(e){this.i=this.j?this.i:e},Ra.prototype.l=function(){return(this.j?this.g.currentTime:this.i)||0},Ra.prototype.I=function(){},ja.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.B&&(this.B.stop(),this.B=null),this.i=this.h=this.g=this.m=null,this.G=function(){}},ja.prototype.s=function(e){Ea(this.h,e)},ja.prototype.l=function(){var e=_a(this.h);return 0<this.i.readyState&&!this.i.paused?Ia(this,e):e},ja.prototype.I=function(){this.j.qe()},(r=ka.prototype).destroy=function(){return Ee("shaka.media.SegmentIndex","Please use release() instead of destroy()."),this.release(),Promise.resolve()},r.release=function(){this.i||(this.R=[],this.g&&this.g.stop(),this.g=null)},r.Qg=function(){this.i=!0},r.find=function(e){for(var t=this.R.length-1,n=t;0<=n;--n){var r=this.R[n],i=n<t?this.R[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return n+this.h}return this.R.length&&e<this.R[0].startTime?this.h:null},r.get=function(e){return 0==this.R.length||0>(e-=this.h)||e>=this.R.length?null:this.R[e]},r.offset=function(e){if(!this.i)for(var t=c(this.R),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.timestampOffset+=e},r.rc=function(e){!this.i&&e.length&&(this.R=this.R.filter(function(t){return t.startTime<e[0].startTime}),this.R.push.apply(this.R,u(e)))},r.sc=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.R.length||e.endTime>n.R[0].startTime)}),this.rc(e),this.Ob(t)},r.Ob=function(e){if(!this.i){var t=this.R.length;this.R=this.R.filter(function(t){return t.endTime>e}),this.h+=t-this.R.length}},r.Hb=function(e,t,n){if(n=void 0!==n&&n,!this.i){for(;this.R.length&&this.R[this.R.length-1].startTime>=t;)this.R.pop();for(;this.R.length&&this.R[0].endTime<=e;)this.R.shift(),n||this.h++;0!=this.R.length&&(e=this.R[this.R.length-1],this.R[this.R.length-1]=new ua(e.startTime,t,e.j,e.Ka,e.Da,e.g,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.h,e.tilesLayout,e.i))}},r.Ed=function(e,t){var n=this;this.i||(this.g&&this.g.stop(),this.g=new mn(function(){var e=t();e?n.R.push.apply(n.R,u(e)):(n.g.stop(),n.g=null)}),this.g.na(e))},ka.prototype[Symbol.iterator]=function(){return this.kc(0)},ka.prototype.kc=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),r=-1;if(n&&0<n.h.length)for(var i=n.h.length-1;0<=i;--i){var s=n.h[i];if(e>=s.startTime&&e<s.endTime){t++,r=i-1;break}}return new Pa(this,t,r)},B("shaka.media.SegmentIndex",ka),ka.forSingleSegment=Ma,ka.prototype.getIteratorForTime=ka.prototype.kc,ka.prototype.updateEvery=ka.prototype.Ed,ka.prototype.fit=ka.prototype.Hb,ka.prototype.evict=ka.prototype.Ob,ka.prototype.mergeAndEvict=ka.prototype.sc,ka.prototype.merge=ka.prototype.rc,ka.prototype.offset=ka.prototype.offset,ka.prototype.get=ka.prototype.get,ka.prototype.find=ka.prototype.find,ka.prototype.markImmutable=ka.prototype.Qg,ka.prototype.release=ka.prototype.release,ka.prototype.destroy=ka.prototype.destroy,Pa.prototype.seek=function(e){return Ee("shaka.media.SegmentIterator","Please use SegmentIndex.getIteratorForTime instead of seek()."),(e=this.i.kc(e))?(this.h=e.h,this.g=e.g):(this.h=Number.MAX_VALUE,this.g=0),this.next().value},Pa.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.h.length&&e.Ma().length&&this.g>=e.h.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.h.length?e.h[this.g]:e},Pa.prototype.next=function(){var e=this.i.get(this.h);return e&&0<e.h.length?(this.g++,e.Ma().length&&this.g==e.h.length&&(this.h++,this.g=0)):(this.h++,this.g=0),{value:e=this.current(),done:!e}},B("shaka.media.SegmentIterator",Pa),Pa.prototype.next=Pa.prototype.next,Pa.prototype.current=Pa.prototype.current,Pa.prototype.seek=Pa.prototype.seek,g(La,ka),(r=La.prototype).clone=function(){var e=new La;return e.j=this.j.slice(),e},r.release=function(){for(var e=c(this.j),t=e.next();!t.done;t=e.next())t.value.release();this.j=[]},r.find=function(e){for(var t=0,n=c(this.j),r=n.next();!r.done;r=n.next()){var i=(r=r.value).find(e);if(null!=i)return i+t;t+=r.h+r.R.length}return null},r.get=function(e){for(var t=0,n=c(this.j),r=n.next();!r.done;r=n.next()){var i=(r=r.value).get(e-t);if(i)return i;t+=r.h+r.R.length}return null},r.offset=function(){},r.rc=function(){},r.Ob=function(){},r.sc=function(){},r.Hb=function(){},r.Ed=function(){},B("shaka.media.MetaSegmentIndex",La),La.prototype.updateEvery=La.prototype.Ed,La.prototype.fit=La.prototype.Hb,La.prototype.mergeAndEvict=La.prototype.sc,La.prototype.evict=La.prototype.Ob,La.prototype.merge=La.prototype.rc,La.prototype.offset=La.prototype.offset,La.prototype.get=La.prototype.get,La.prototype.find=La.prototype.find,La.prototype.release=La.prototype.release,Da.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},Da.prototype.set=function(e){this.i=e,Oa(this)},Da.prototype.pd=function(){return this.g.pd()},$a.prototype.release=function(){this.i.stop();for(var e=c(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},g(Fa,J),Fa.prototype.release=function(){this.g.clear(),J.prototype.release.call(this)},Fa.prototype.j=function(e){for(var t=c(this.g.values()),n=t.next();!n.done;n=t.next()){e:{for(var r=(n=n.value).Vc,i=r.length-1;0<=i;i--){var s=r[i];if(s.position<=e){r=s.ge;break e}}r=null}if((i=r)&&(i=!((i=n.$e)===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width)),i)e:{if(i=e,s=r.contentType,(s=this.h()[s])&&0<s.length){var a=s[s.length-1].end;if(i>=s[0].start&&i<a){i=!0;break e}}i=!1}i&&(n.$e=r,JSON.stringify(r),n=new U("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}},g(Ba,J),Ba.prototype.release=function(){this.g.clear(),this.h.stop(),J.prototype.release.call(this)},g(Ua,J),Ua.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,J.prototype.release.call(this)},Ua.prototype.j=function(e,t){for(var n=c(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),s=e<r.startTime?Va:e>r.endTime?Wa:Ha;this.g.set(r,s);for(var a=c(this.l),o=a.next();!o.done;o=a.next())(o=o.value).cc==i&&o.bc==s&&o.Sb(r,t)}};var Va=1,Ha=2,Wa=3;function qa(e,t,n,r,i){return e=jr(e,r,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function za(e,t){var n=this;this.F=t,this.H=e,this.m=null,this.l=1,this.i=this.h=null,this.g=new Map,this.s=!1,this.B=null,this.j=!1,this.N=new Lr(function(){return function(e){var t,n,r,i;return P(function(s){if(1==s.g){for(t=[],n=c(e.g.values()),r=n.next();!r.done;r=n.next())so(i=r.value),t.push(ao(i));return _(s,Promise.all(t),2)}e.g.clear(),e.F=null,e.H=null,e.m=null,E(s)})}(n)})}function Ka(e,t){var n=e.g.get("video");if(n){var r=n.stream;if(r)if(t){var i=r.trickModeVideo;i&&!n.Zb&&(Xa(e,i,!1,0,!1),n.Zb=r)}else(r=n.Zb)&&(n.Zb=null,Xa(e,r,!0,0,!1))}}function Ya(e,t,n,r,i){n=void 0!==n&&n,r=void 0===r?0:r,i=void 0!==i&&i,e.h=t,e.s&&(t.video&&Xa(e,t.video,n,r,i),t.audio&&Xa(e,t.audio,n,r,i))}function Qa(e,t){e.i=t,e.s&&Xa(e,t,!0,0,!1)}function Xa(e,t,n,r,i){var s=e.g.get(t.type);s||t.type!=Pe?s&&(s.Zb&&(t.trickModeVideo?(s.Zb=t,t=t.trickModeVideo):s.Zb=null),s.stream!=t||i)&&(t.type==Pe&&Ys(e.F.Y,nn(t.mimeType,t.codecs)),s.stream.closeSegmentIndex&&s.stream.closeSegmentIndex(),s.stream=t,s.za=null,n&&(s.Ic?s.Hd=!0:s.hb?(s.ac=!0,s.md=r,s.Hd=!0):(so(s),ro(e,s,!0,r).catch(function(t){e.F&&e.F.onError(t)}))),function(e,t){var n,r;return P(function(i){if(1==i.g)return t.Ra?(n=t.stream,r=t.Ra,n.segmentIndex?i.D(2):_(i,n.createSegmentIndex(),2)):i.return();if(t.Ra!=r||t.stream!=n)return i.return();var s=e.F.rd(),a=Zs(e.F.Y,t.type),o=t.stream.segmentIndex.find(t.Xa?t.Xa.endTime:s),l=null==o?null:t.stream.segmentIndex.get(o);o=l&&l.Da?l.Da-l.Ka:null,l&&!o&&(o=(l.endTime-l.startTime)*(t.stream.bandwidth||0)/8),o?((l=l.g)&&(o+=(l.Da?l.Da-l.Ka:null)||0),s=8*o/(l=e.F.getBandwidthEstimate())<(a||0)-s-Math.max(e.H.minBufferTime||0,e.m.rebufferingGoal)||t.Ra.h.g>o):s=!1,s&&t.Ra.abort(),E(i)})}(e,s).catch(function(t){e.F&&e.F.onError(t)})):function(e,t){var n,r,i,s;P(function(a){switch(a.g){case 1:return n=Le,b(a,2),_(a,ta(e.F.Y,n.ua),4);case 4:S(a,3);break;case 2:r=T(a),e.F&&e.F.onError(r);case 3:i=nn(t.mimeType,t.codecs),Ys(e.F.Y,i),(e.F.Y.s.isTextVisible()||e.m.alwaysStreamText)&&(s=Ja(t),e.g.set(n.ua,s),io(e,s,0)),E(a)}})}(e,t)}function Za(e,t){t.Ic||t.ac||(t.hb?(t.ac=!0,t.md=0):null==Xs(e.F.Y,t.type)?null==t.kb&&io(e,t,0):(so(t),ro(e,t,!1,0).catch(function(t){e.F&&e.F.onError(t)})))}function Ja(e){return{stream:e,type:e.type,za:null,Xa:null,td:null,ee:null,ce:null,be:null,Zb:null,endOfStream:!1,hb:!1,kb:null,ac:!1,md:0,Hd:!1,Ic:!1,ve:!1,Pc:!1,Ra:null}}function eo(e,t,n,r,i,s){var a;return P(function(o){return 1==o.g?(a=r.closedCaptions&&0<r.closedCaptions.size,(null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length||e.m.dispatchAllEmsgBoxes)&&(new Ci).Z("emsg",function(t){var n=r.emsgSchemeIdUris;if(0===t.version)var s=t.reader.Wc(),a=t.reader.Wc(),o=t.reader.T(),l=t.reader.T(),c=t.reader.T(),u=t.reader.T(),d=i.startTime+l/o;else o=t.reader.T(),l=(d=t.reader.xc()/o+i.timestampOffset)-i.startTime,c=t.reader.T(),u=t.reader.T(),s=t.reader.Wc(),a=t.reader.Wc();t=t.reader.Lb(t.reader.X.byteLength-t.reader.qa()),(n&&n.includes(s)||e.m.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==s?e.F.Vg():(n=(new Map).set("detail",{startTime:d,endTime:d+c/o,schemeIdUri:s,value:a,timescale:o,presentationTimeDelta:l,eventDuration:c,id:u,messageData:t}),n=new U(Ql,n),e.F.onEvent(n)))}).parse(s),_(o,function(e,t,n){var r,i,s;return P(function(a){if(1==a.g)return r=Math.max(e.m.bufferBehind,e.H.presentationTimeline.g),null==(i=Xs(e.F.Y,t.type))||.01>=(s=n-i-r)?a.return():_(a,e.F.Y.remove(t.type,i,i+s),2);Dr(e.N),E(a)})}(e,t,n),2)):3!=o.g?(Dr(e.N),_(o,ea(e.F.Y,t.type,s,i.startTime,i.endTime,a),3)):(Dr(e.N),void E(o))})}function to(e){return e&&e.type==Pe&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function no(e,t,n,r){var i,s,a,o,l;return P(function(c){return 1==c.g?(i=kr,s=qa(n.Ma(),n.Ka,n.Da,e.m.retryParameters,r),a=t.stream,e.F.modifySegmentRequest(s,{type:a.type,init:n instanceof ca,duration:n.endTime-n.startTime,mimeType:a.mimeType,codecs:a.codecs,bandwidth:a.bandwidth}),o=e.F.Wb.request(i,s),t.Ra=o,_(c,o.promise,2)):(l=c.h,t.Ra=null,c.return(l.data))})}function ro(e,t,n,r){var i,s;return P(function(a){return 1==a.g?(t.ac=!1,t.Hd=!1,t.md=0,t.Ic=!0,t.Xa=null,t.td=null,t.za=null,r?(i=e.F.rd(),s=e.F.Y.getDuration(),_(a,e.F.Y.remove(t.type,i+r,s),3)):_(a,ta(e.F.Y,t.type),4)):3!=a.g?(Dr(e.N),n?_(a,e.F.Y.flush(t.type),3):a.D(3)):(Dr(e.N),t.Ic=!1,t.endOfStream=!1,io(e,t,0),void E(a))})}function io(e,t,n){var r=t.type;(r!=Pe||e.g.has(r))&&(t.kb=new pn(function(){var n;return P(function(r){return 1==r.g?(b(r,2),_(r,e.Tc(t),4)):2!=r.g?S(r,0):(n=T(r),e.F&&e.F.onError(n),void E(r))})}).U(n))}function so(e){null!=e.kb&&(e.kb.stop(),e.kb=null)}function ao(e){return P(function(t){return e.Ra?_(t,e.Ra.abort(),0):t.D(0)})}function oo(e,t){return P(function(n){if(1==n.g)return _(n,mr(e.B),2);Dr(e.N),e.F.onError(t),t.handled||e.m.failureCallback(t),E(n)})}function lo(e,t){var n={K:null,mimeType:null,startTime:null,Le:NaN,uri:null},r=this;this.j=t,this.i=e,this.l=n,this.B=null,this.s=[],this.h=this.g=null,this.C=Promise.resolve().then(function(){return function(e){return P(function(t){if(e.N.g)t=t.D(0);else{if(0==e.s.length||e.g&&!e.g.Rb)var n=!1;else{e.g&&(e.g.gb.Xb(),e.g=null);var r=(n=e.s.shift()).create(e.l);r?(n.gb.uc(),e.g={node:r.node,payload:r.payload,Rb:r.Rb,gb:n.gb}):n.gb.xd(),n=!0}n?n=Promise.resolve():e.g?n=function(e){var t,n;return P(function(r){switch(r.g){case 1:return e.i=e.j.xg(e.i,e.l,e.g.node,e.g.payload),b(r,2),e.h=e.j.$f(e.i,e.l,e.g.payload),_(r,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.gb.vd(),e.g=null),S(r,0);break;case 2:return 7001==(t=T(r)).code?e.g.gb.Xb():e.g.gb.onError(t),e.g=null,e.h=null,n=e,_(r,e.j.handleError(e.l,t),5);case 5:n.i=r.h,E(r)}})}(e):(e.j.Tg(e.i),e.B=new Ot,n=e.B),t=_(t,n,1)}return t})}(r)}),this.N=new Lr(function(){return function(e){var t,n;return P(function(r){if(1==r.g)return e.h&&e.h.abort(),uo(e),_(r,e.C,2);for(e.g&&e.g.gb.Xb(),t=c(e.s),n=t.next();!n.done;n=t.next())n.value.gb.Xb();e.g=null,e.s=[],e.j=null,E(r)})}(r)})}function co(e,t){var n={uc:function(){},vd:function(){},Xb:function(){},onError:function(){},xd:function(){},Ui:function(){}};return e.s.push({create:t,gb:n}),e.h&&e.h.abort(),uo(e),n}function uo(e){e.B&&(e.B.resolve(),e.B=null)}function ho(e){this.g=null;for(var t=c(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function po(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function mo(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=c(Array.from(e.cues)),i=r.next();!i.done;i=r.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=n}function fo(){}function go(e){return document.createElement(e)}function xo(){return document.createElement("button")}function vo(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function yo(t,n){var r=this;this.s=!1,this.l=[],this.g=t,this.C=n,this.i=go("div"),this.i.classList.add("shaka-text-container"),this.i.style.textAlign="center",this.i.style.display="flex",this.i.style.flexDirection="column",this.i.style.alignItems="center",this.i.style.justifyContent="flex-end",this.C.appendChild(this.i),this.G=new mn(function(){Eo(r)}).na(.25),this.j=new Map,this.h=new Or,this.h.o(document,"fullscreenchange",function(){Eo(r,!0)}),this.B=null,"ResizeObserver"in e&&(this.B=new ResizeObserver(function(){Eo(r,!0)}),this.B.observe(this.i))}function _o(e,t,n,r,i){for(var s=!1,a=[],o=[],l=(t=c(t)).next();!l.done;l=t.next()){l=l.value,i.push(l);var u=e.j.get(l),d=l.startTime<=r&&l.endTime>r,h=u?u.Mf:null;u&&(a.push(u.Ze),d||(s=!0,e.j.delete(l),u=null)),d&&(o.push(l),u||(bo(e,l,i),h=(u=e.j.get(l)).Mf,s=!0)),0<l.nestedCues.length&&h&&_o(e,l.nestedCues,h,r,i),i.pop()}if(s){for(i=(r=c(a)).next();!i.done;i=r.next())n.removeChild(i.value);for(o.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),l=(o=c(o)).next();!l.done;l=o.next())r=e.j.get(l.value),n.appendChild(r.Ze)}}function Eo(e,t){if(e.i){var n=e.g.currentTime;if((!e.s||void 0!==t&&t)&&0<e.j.size&&(vo(e.i),e.j.clear()),e.s){for(var r=new Map,i=c(e.j.keys()),s=i.next();!s.done;s=i.next())s=s.value,r.set(s,e.j.get(s));_o(e,e.l,e.i,n,[])}}}function bo(e,t,n){var r=1<n.length,i=r?"span":"div";(t.lineBreak||t.spacer)&&(t.spacer&&Ee("shaka.extern.Cue","Please use lineBreak instead of spacer."),i="br"),r=!r&&0<t.nestedCues.length;var s=go(i);"br"!=i&&function(e,t,n,r,i){var s=t.style,a=0==n.nestedCues.length,o=1<r.length;s.whiteSpace="pre-wrap";var l=n.payload.replace(/\s+$/g,function(e){return"".repeat(e.length)});if(s.webkitTextStrokeColor=n.textStrokeColor,s.webkitTextStrokeWidth=n.textStrokeWidth,s.color=n.color,s.direction=n.direction,s.opacity=n.opacity,s.paddingLeft=Co(n.linePadding,n,e.C),s.paddingRight=Co(n.linePadding,n,e.C),n.backgroundImage)s.backgroundImage="url('"+n.backgroundImage+"')",s.backgroundRepeat="no-repeat",s.backgroundSize="contain",s.backgroundPosition="center";else{if(n.nestedCues.length)var c=t;else c=go("span"),t.appendChild(c);n.border&&(c.style.border=n.border),i||((t=function(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||0===r)return r}return null}(r,function(e){return e.backgroundColor}))?c.style.backgroundColor=t:l&&(c.style.backgroundColor="rgba(0, 0, 0, 0.8)")),l&&(c.textContent=l)}o&&!r[r.length-1].isContainer?s.display="inline":(s.display="flex",s.flexDirection="column",s.alignItems="center",s.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),a||(s.margin="0"),s.fontFamily=n.fontFamily,s.fontWeight=n.fontWeight.toString(),s.fontStyle=n.fontStyle,s.letterSpacing=n.letterSpacing,s.fontSize=Co(n.fontSize,n,e.C),n.line?1==n.lineInterpretation&&(s.position="absolute",s.left="0",s.top="0",n.writingMode==mt?(s.width="100%",n.lineAlign==gt?s.top=n.line+"%":"end"==n.lineAlign&&(s.bottom=n.line+"%")):"vertical-lr"==n.writingMode?(s.height="100%",n.lineAlign==gt?s.left=n.line+"%":"end"==n.lineAlign&&(s.right=n.line+"%")):(s.height="100%",n.lineAlign==gt?s.right=n.line+"%":"end"==n.lineAlign&&(s.left=n.line+"%"))):n.region&&n.region.id&&(e=n.region.widthUnits==St?"%":"px",r=n.region.viewportAnchorUnits==St?"%":"px",s.height=n.region.height+(n.region.heightUnits==St?"%":"px"),s.width=n.region.width+e,s.position="absolute",s.top=n.region.viewportAnchorY+r,s.left=n.region.viewportAnchorX+r),s.lineHeight=n.lineHeight,n.position&&(n.writingMode==mt?s.paddingLeft=n.position:s.paddingTop=n.position),"line-left"==n.positionAlign?s.cssFloat="left":"line-right"==n.positionAlign&&(s.cssFloat="right"),s.textAlign=n.textAlign,s.textDecoration=n.textDecoration.join(" "),s.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&s.writingMode==n.writingMode||(s.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==mt?s.width=n.size+"%":s.height=n.size+"%")}(e,s,t,n,r),n=s,r&&((n=go("span")).classList.add("shaka-text-wrapper"),n.style.backgroundColor=t.backgroundColor,s.appendChild(n)),e.j.set(t,{Ze:s,Mf:n})}function Co(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),ph:r[2]}:null;if(!r)return e;var i=r.value;switch(r.ph){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return e}}function So(e,t){this.F=e,this.m=t,this.h="",this.l=void 0,this.g=!1,this.j=!0,this.i=!1}function To(e,t,n){try{if(e.m.enabled){var r={d:1e3*n.duration,st:e.F.W()?Fo:No};r.ot=function(e){var t=e.type;return e.init?Do:"video"==t?e.codecs.includes(",")?Lo:Po:"audio"==t?Mo:"text"==t?"application/mp4"===e.mimeType?$o:Oo:void 0}(n);var i=r.ot===Po||r.ot===Mo||r.ot===Lo||r.ot===$o;i&&(r.bl=function(e,t){var n=e.F.Ib()[t];if(!n.length)return NaN;var r=e.F.kg();return(n=n.find(function(e){return e.start<=r&&e.end>=r}))?1e3*(n.end-r):NaN}(e,n.type)),n.bandwidth&&(r.br=n.bandwidth/1e3),i&&r.ot!==$o&&(r.tb=function(e,t){var n=e.F.fb();if(!n.length)return NaN;for(var r=n[0],i=(n=c(n)).next();!i.done;i=n.next())"variant"===(i=i.value).type&&i.bandwidth>r.bandwidth&&(r=i);switch(t){case Po:return r.videoBandwidth||NaN;case Mo:return r.audioBandwidth||NaN;default:return r.bandwidth}}(e,r.ot)/1e3),wo(e,t,r)}}catch(s){q("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",s)}}function Ro(e,t){try{if(!e.m.enabled)return t;var n=jo(e);return n.ot=Oo,n.su=!0,Io(t,Ao(n))}catch(e2){return q("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e2),t}}function jo(t){return t.h||(t.h=t.m.sessionId||e.crypto.randomUUID()),{v:1,sf:t.l,sid:t.h,cid:t.m.contentId,mtp:t.F.getBandwidthEstimate()/1e3}}function wo(e,t,n){n=void 0===n?{}:n;var r=void 0===r?e.m.useHeaders:r;if(e.m.enabled){Object.assign(n,jo(e)),n.pr=e.F.Jb();var i=n.ot===Po||n.ot===Lo;if(e.i&&i&&(n.bs=!0,n.su=!0,e.i=!1),null==n.su&&(n.su=e.j),r)e=function(e){for(var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],s={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},a=(t=c(t)).next();!a.done;a=t.next())a=a.value,i[null!=s[a]?s[a]:1][a]=e[a];for(e=0;e<i.length;e++)(s=Ao(i[e]))&&(n["CMCD-"+r[e]]=s);return n}(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var s=Ao(n);s&&(t.uris=t.uris.map(function(e){return Io(e,s)}))}}}function Ao(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function r(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}for(var i=[],s={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},a=Object.keys(e||{}).sort(),o=(a=c(a)).next();!o.done;o=a.next()){var l=e[o=o.value];if(r(l)&&("v"!==o||1!==l)&&("pr"!=o||1!==l)){var u,d=s[o];d&&(l=d(l)),u="string"==(d=typeof l)&&"ot"!==o&&"sf"!==o&&"st"!==o?o+"="+JSON.stringify(l):"boolean"===d?o:"symbol"===d?o+"="+l.description:o+"="+l,i.push(u)}}return i.join(",")}function Io(e,t){if(!t||e.includes("offline:"))return e;var n=new se(e);return n.g.set("CMCD",t),n.toString()}za.prototype.destroy=function(){return this.N.destroy()},za.prototype.configure=function(e){this.m=e,this.B=new pr({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0)},za.prototype.start=function(){var e=this;return P(function(t){if(1==t.g)return _(t,function(e){var t,n,r,i,s,a,o,l,u,d;return P(function(h){if(1==h.g){if(t=Le,!e.h)throw new ye(2,5,5006);return n=new Map,r=new Set,e.h.audio&&(n.set(t.Nb,e.h.audio),r.add(e.h.audio)),e.h.video&&(n.set(t.mb,e.h.video),r.add(e.h.video)),e.i&&(n.set(t.ua,e.i),r.add(e.i)),i=e.F.Y,s=e.m.forceTransmuxTS,_(h,i.init(n,s),2)}Dr(e.N);var p=e.H.presentationTimeline.getDuration();for(1/0>p?e.F.Y.ib(p):e.F.Y.ib(Math.pow(2,32)),a=c(n.keys()),o=a.next();!o.done;o=a.next())l=o.value,u=n.get(l),e.g.has(l)||(d=Ja(u),e.g.set(l,d),io(e,d,0));E(h)})}(e),2);Dr(e.N),e.s=!0,E(t)})},za.prototype.Tc=function(t){var n,r,i,s,a,o=this;return P(function(l){switch(l.g){case 1:if(Dr(o.N),t.hb||null==t.kb||t.Ic)return l.return();if(t.kb=null,!t.ac){l.D(2);break}return _(l,ro(o,t,t.Hd,t.md),3);case 3:return l.return();case 2:if(t.stream.segmentIndex){l.D(4);break}return n=t.stream,_(l,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),null==t.kb&&io(o,t,0),l.return();case 4:b(l,6),r=function(t,n){if(to(n))return function(e,t){var n=Zs(e,"video")||0;cn(e.i,t,n)}(t.F.Y,n.stream.originalId||""),null;n.type==Pe&&function(e){e.i&&cn(e.i,"",0)}(t.F.Y);var r=t.F.rd(),i=n.Xa?n.Xa.endTime:r,s=function(e,t,n){return t==Pe?null==(e=e.i).h||e.h<n?0:e.h-Math.max(n,e.g):qs(e=Js(e,t),n)}(t.F.Y,n.type,r),a=Math.max(t.H.minBufferTime||0,t.m.rebufferingGoal,t.m.bufferingGoal)*t.l;if(1e-6>t.H.presentationTimeline.getDuration()-i)return n.endOfStream=!0,"video"==n.type&&(r=t.g.get(Pe))&&to(r)&&(r.endOfStream=!0),null;if(n.endOfStream=!1,s>=a)return t.m.updateIntervalSeconds/2;if(s=Zs(t.F.Y,n.type),s=function(e,t,n,r){if(t.za)return t.za.current();if(t.Xa||r)return t.za=t.stream.segmentIndex.kc(t.Xa?t.Xa.endTime:r),t.za&&t.za.next().value;e=e.m.inaccurateManifestTolerance,r=Math.max(n-e,0);var i=null;return e&&(t.za=t.stream.segmentIndex.kc(r),i=t.za&&t.za.next().value),i||(t.za=t.stream.segmentIndex.kc(n),i=t.za&&t.za.next().value),i}(t,n,r,s),!s)return t.m.updateIntervalSeconds;a=1/0;for(var o=Array.from(t.g.values()),l=(o=c(o)).next();!l.done;l=o.next())to(l=l.value)||l.za&&!l.za.current()||(a=Math.min(a,l.Xa?l.Xa.endTime:r));return i>=a+t.H.presentationTimeline.g?t.m.updateIntervalSeconds:(function(t,n,r,i){var s,a,o,l,c,u,d,h,p,m,f;return P(function(g){switch(g.g){case 1:return s=Le,a=n.stream,o=n.za,n.hb=!0,b(g,2),_(g,function(e,t,n){var r,i,s,a,o,l,c;return P(function(u){return r=[],i=Math.max(0,n.appendWindowStart-.1),s=n.appendWindowEnd+.01,(a=n.timestampOffset)==t.ee&&i==t.ce&&s==t.be||(o=function(){var n;return P(function(r){if(1==r.g)return b(r,2),t.ce=i,t.be=s,t.ee=a,_(r,function(e,t,n,r,i){return P(function(s){return t==Le.ua?(e.i.G=n,function(e,t,n){e.j=t,e.l=n}(e.i,r,i),s.return()):_(s,Promise.all([ra(e,t,function(){var n=e.j[t].appendWindowStart,r=e.j[t].appendWindowEnd;e.j[t].abort(),e.j[t].appendWindowStart=n,e.j[t].appendWindowEnd=r,na(e,t)}),ra(e,t,function(){var r=n;0>r&&(r+=.001),e.j[t].timestampOffset=r,na(e,t)}),ra(e,t,function(){e.j[t].appendWindowStart=0,e.j[t].appendWindowEnd=i,e.j[t].appendWindowStart=r,na(e,t)})]),0)})}(e.F.Y,t.type,a,i,s),4);if(2!=r.g)return S(r,0);throw n=T(r),t.ce=null,t.be=null,t.ee=null,n})},r.push(o())),!function(e,t){return e&&t?e.Oc()==t.Oc()&&e.Kc()==t.Kc()&&st(e.Ma(),t.Ma()):e==t}(n.g,t.td)&&(t.td=n.g)&&(l=no(e,t,n.g),c=function(){var n,r,i;return P(function(s){switch(s.g){case 1:return b(s,2),_(s,l,4);case 4:return n=s.h,Dr(e.N),r=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,_(s,ea(e.F.Y,t.type,n,null,null,r),5);case 5:S(s,0);break;case 2:throw i=T(s),t.td=null,i}})},e.F.Ug(n.startTime,n.g),r.push(c())),_(u,Promise.all(r),0)})}(t,n,i),4);case 4:return Dr(t.N),t.j?g.return():(l="video/mp4"==a.mimeType||"audio/mp4"==a.mimeType,c=e.ReadableStream,t.m.lowLatencyMode&&c&&l?(d=new Uint8Array(0),h=function(e){var s,o,l;return P(function(c){return Dr(t.N),t.j?c.return():(d=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(d,e),s=!1,o=0,(new Ci).box("mdat",function(e){o=e.size+e.start,s=!0}).parse(d,!1,!0),s?(l=d.subarray(0,o),d=d.subarray(o),_(c,eo(t,n,r,a,i,l),0)):c.D(0))})},_(g,no(t,n,i,h),6)):_(g,no(t,n,i),7));case 7:return u=g.h,Dr(t.N),t.j?g.return():n.ac?(n.hb=!1,io(t,n,0),g.return()):_(g,eo(t,n,r,a,i,u),6);case 6:if(Dr(t.N),t.j)return g.return();n.Xa=i,o.next(),n.hb=!1,n.ve=!1,p=t.F.Y.Ib(),m=p[n.type],JSON.stringify(m),n.ac||t.F.qe(),io(t,n,0),S(g,0);break;case 2:if(f=T(g),Dr(t.N,f),t.j)return g.return();if(n.hb=!1,7001==f.code)n.hb=!1,n.kb=null,io(t,n,0),g.D(0);else if(n.type==s.ua&&t.m.ignoreTextStreamFailures)t.g.delete(s.ua),g.D(0);else if(3017==f.code)(function(e,t,n){if(!Array.from(e.g.values()).some(function(e){return e!=t&&e.ve})){var r=Math.round(100*e.l);if(20<r)e.l-=.2;else{if(!(4<r))return t.Pc=!0,e.j=!0,void e.F.onError(n);e.l-=.04}t.ve=!0}io(e,t,4)})(t,n,f),g.D(0);else{if(1001!=f.code||!f.data||404!=f.data[1])return n.Pc=!0,f.severity=2,_(g,oo(t,f),0);n.hb=!1,n.kb=null,io(t,n,1),g.D(0)}}})}(t,n,r,s).catch(function(){}),null)}(o,t),null!=r&&(io(o,t,r),t.Pc=!1),S(l,7);break;case 6:return i=T(l),_(l,oo(o,i),8);case 8:return l.return();case 7:if(s=Array.from(o.g.values()),!o.s||!s.every(function(e){return e.endOfStream})){l.D(0);break}return _(l,o.F.Y.endOfStream(),10);case 10:Dr(o.N),0!=(a=o.F.Y.getDuration())&&a<o.H.presentationTimeline.getDuration()&&o.H.presentationTimeline.ib(a),E(l)}})},lo.prototype.destroy=function(){return this.N.destroy()},(r=ho.prototype).remove=function(e,t){return!!this.g&&(mo(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},r.append=function(e){function t(e){var n=[],r=700<=e.fontWeight,i="italic"==e.fontStyle,s=e.textDecoration.includes("underline");return r&&n.push("b"),i&&n.push("i"),s&&n.push("u"),r=n.reduce(function(e,t){return e+"<"+t+">"},""),n=n.reduceRight(function(e,t){return e+"</"+t+">"},""),e.lineBreak||e.spacer?(e.spacer&&Ee("shaka.extern.Cue","Please use lineBreak instead of spacer."),"\n"):e.nestedCues.length?e.nestedCues.map(t).join(""):r+e.payload+n}var n=e.map(function(e){if(e.nestedCues.length){var n=e.clone();return n.nestedCues=[],n.payload=t(e),n}return e}),r=[];e=this.g.cues?Array.from(this.g.cues):[];for(var i={},s=(n=c(n)).next();!s.done;i={dc:i.dc},s=n.next())i.dc=s.value,e.some(function(e){return function(t){return t.startTime==e.dc.startTime&&t.endTime==e.dc.endTime&&t.text==e.dc.payload}}(i))||(s=po(i.dc))&&r.push(s);for(i=(e=c(e=r.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?r.indexOf(t)-r.indexOf(e):r.indexOf(e)-r.indexOf(t)}))).next();!i.done;i=e.next())this.g.addCue(i.value)},r.destroy=function(){return this.g&&(mo(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},r.isTextVisible=function(){return"showing"==this.g.mode},r.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},B("shaka.text.SimpleTextDisplayer",ho),ho.prototype.setTextVisibility=ho.prototype.setTextVisibility,ho.prototype.isTextVisible=ho.prototype.isTextVisible,ho.prototype.destroy=ho.prototype.destroy,ho.prototype.append=ho.prototype.append,ho.prototype.remove=ho.prototype.remove,B("shaka.util.Dom",fo),fo.removeAllChildren=vo,(r=yo.prototype).append=function(e){for(var t=[].concat(u(this.l)),n={},r=(e=c(e)).next();!r.done;n={$c:n.$c},r=e.next())n.$c=r.value,t.some(function(e){return function(t){return ot(t,e.$c)}}(n))||this.l.push(n.$c);Eo(this)},r.destroy=function(){this.C.removeChild(this.i),this.i=null,this.s=!1,this.l=[],this.G&&this.G.stop(),this.j.clear(),this.h&&(this.h.release(),this.h=null),this.B&&(this.B.disconnect(),this.B=null)},r.remove=function(e,t){if(!this.i)return!1;var n=this.l.length;return this.l=this.l.filter(function(n){return n.startTime<e||n.endTime>=t}),Eo(this,n>this.l.length),!0},r.isTextVisible=function(){return this.s},r.setTextVisibility=function(e){this.s=e},B("shaka.text.UITextDisplayer",yo),yo.prototype.setTextVisibility=yo.prototype.setTextVisibility,yo.prototype.isTextVisible=yo.prototype.isTextVisible,yo.prototype.remove=yo.prototype.remove,yo.prototype.destroy=yo.prototype.destroy,yo.prototype.append=yo.prototype.append,B("shaka.text.WebVttGenerator",function(){});var ko="m",Mo="a",Po="v",Lo="av",Do="i",Oo="c",$o="tt",No="v",Fo="l";function Bo(){}function Uo(e,t,n,r,i){var s,a=i in r,o=!0;for(s in t){var l=i+"."+s,c=a?r[i]:n[s];a||s in n?void 0===t[s]?void 0===c||a?delete e[s]:e[s]=Er(c):c.constructor==Object&&t[s]&&t[s].constructor==Object?(e[s]||(e[s]=Er(c)),l=Uo(e[s],t[s],c,r,l),o=o&&l):typeof t[s]!=typeof c||null==t[s]||"function"!=typeof t[s]&&t[s].constructor!=c.constructor?(H("Invalid config, wrong type for "+l),o=!1):("function"==typeof n[s]&&n[s].length!=t[s].length&&W("Unexpected number of arguments for "+l),e[s]=t[s]):(H("Invalid config, unrecognized key "+l),o=!1)}return o}function Go(e,t){for(var n={},r=n,i=0,s=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(r[s=e.substring(s,i).replace(/\\\./g,".")]={},r=r[s],s=i+1),i+=1;return r[e.substring(s).replace(/\\\./g,".")]=t,n}function Vo(){}function Ho(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:ti,logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[]},n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return e}},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,useFullSegmentsForStartTime:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E"}},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1};(navigator.userAgent.match(/Edge\//)||xn()||vn())&&(r.gapDetectionThreshold=.5),(En("Web0S")||xn()||vn())&&(r.stallSkip=0);var i={trackSelectionCallback:function(e){return P(function(t){return t.return(e)})},downloadSizeCallback:function(e){var t;return P(function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?_(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))})},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},s={drm:t,manifest:n,streaming:r,offline:i,abrFactory:function(){return new er},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1}};return i.trackSelectionCallback=function(e){return P(function(t){return t.return(function(e,t){var n=e.filter(function(e){return"variant"==e.type}),r=[],i=We(t,n.map(function(e){return e.language}));i&&(r=n.filter(function(e){return Be(e.language)==i})),0==r.length&&(r=n.filter(function(e){return e.primary})),0==r.length&&(n.map(function(e){return e.language}),r=n);var s=r.filter(function(e){return e.height&&480>=e.height});if(s.length&&(s.sort(function(e,t){return t.height-e.height}),r=s.filter(function(e){return e.height==s[0].height})),n=[],r.length){var a=Math.floor(r.length/2);r.sort(function(e,t){return e.bandwidth-t.bandwidth}),n.push(r[a])}for(r=c(e),a=r.next();!a.done;a=r.next())(a=a.value).type!=Pe&&"image"!=a.type||n.push(a);return n}(e,s.preferredAudioLanguage))})},s}function Wo(e,t,n){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Uo(e,t,n||Ho(),r,"")}function qo(){this.g=null,this.h=[]}function zo(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function Ko(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var r=c(e.h),i=r.next();!i.done;i=r.next())n+=(i=i.value).state==t?i.duration:0;return n}function Yo(){this.i=this.h=null,this.g=[]}function Qo(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Xo(){this.B=this.C=this.L=this.I=this.s=this.j=this.J=this.l=this.i=this.M=this.P=this.S=this.G=this.ea=NaN,this.g=new qo,this.h=new Yo}function Zo(t,n){J.call(this);var r=this;this.l=vc,this.Db=this.g=null,this.ha=!1,this.h=new Or,this.nc=this.B=this.bb=this.H=this.Eb=this.C=this.i=this.ia=this.P=this.Gb=this.L=this.zb=this.J=this.Ca=this.I=this.M=this.s=this.V=null,this.se=1e9,this.m=ml(this),this.oe={width:1/0,height:1/0},this.j=null,this.sa=new lr(this.m.preferredAudioLanguage,this.m.preferredVariantRole,this.m.preferredAudioChannelCount),this.Aa=this.m.preferredTextLanguage,this.ob=this.m.preferredTextRole,this.cb=this.m.preferForcedSubs,this.Zd=[],this.pb=null,n&&n(this),this.V=function(e){return new Tr(function(t,n){e.B&&e.B.segmentDownloaded(t,n)},function(t,n,r){t=(new Map).set("headers",t).set("request",n).set("requestType",r),e.dispatchEvent(Jo(Kl,t))},function(t,n,r,i){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",r).set("aborted",i),e.dispatchEvent(Jo(zl,t))})}(this),this.V.Ee(this.m.streaming.forceHTTPS),this.G=null,Sc&&(this.G=we(Sc)),this.h.o(e,"online",function(){r.we()}),this.Pa={name:"detach"},this.qb={name:"attach"},this.$={name:"unload"},this.ue={name:"manifest-parser"},this.ke={name:"manifest"},this.Ba={name:"media-source"},this.ae={name:"drm-engine"},this.S={name:"load"},this.xe={name:"src-equals-drm-engine"},this.Ua={name:"src-equals"};var i=new Map;i.set(this.qb,function(e,t){return yr(function(e,t,n){return null==t.K&&(t.K=n.K,e.h.o(t.K,"error",function(){var t=Ml(e);t&&Il(e,t)})),e.g=t.K,Promise.resolve()}(r,e,t))}),i.set(this.Pa,function(e){return e.K&&(r.h.Ta(e.K,"error"),e.K=null),r.G&&r.G.release(),r.g=null,yr(e=Promise.resolve())}),i.set(this.$,function(e){return yr(tl(r,e))}),i.set(this.Ba,function(e){return e=function(e,t){var n,r,i,s;return P(function(a){if(1==a.g)return n=new Gs,r=e.m.textDisplayFactory,i=we(r),e.fe=r,s=function(e,t,n,r){return new Ks(e,t,n,r)}(t.K,n,i,function(t,n,r){for(var i=(t=c(t)).next();!i.done;i=t.next())if((i=i.value).data&&i.cueTime&&i.frames){for(var s=i.cueTime+n,a=r,o=c(i.frames),l=o.next();!l.done;l=o.next())nl(e,s,a,"ID3",l.value);e.G&&e.G.onHlsTimedMetadata(i,s)}}),_(a,s.I,2);e.M=s,E(a)})}(r,e),yr(e)}),i.set(this.ue,function(e,t){var n=function(e,t,n){var r,i,s,a;return P(function(o){if(1==o.g)return t.mimeType=n.mimeType,t.uri=n.uri,r=t.uri,i=e.V,e.bb=r,s=e,_(o,fi(r,i,e.m.manifest.retryParameters,t.mimeType),2);s.Eb=o.h,e.C=we(e.Eb),a=Er(e.m.manifest),n.K&&"AUDIO"===n.K.nodeName&&(a.disableVideo=!0),e.C.configure(a),E(o)})}(r,e,t);return yr(n)}),i.set(this.ke,function(e){return function(e,t){var n=t.uri,r=e.V;e.Gb=new Ba(function(){return e.Na()}),e.Gb.addEventListener("regionadd",function(t){t=t.region,kl(e,uc,t),e.G&&e.G.onDashTimedMetadata(t)}),e.ia=null,e.m.streaming.observeQualityChanges&&(e.ia=new Fa(function(){return e.Ib()}),e.ia.addEventListener("qualitychange",function(t){var n=t.quality;t=t.position,n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t),e.dispatchEvent(Jo(nc,n))}));var i,s,a,o,l={networkingEngine:r,modifyManifestRequest:function(t,n){var r=e.P;try{r.m.enabled&&(r.l=n.format,wo(r,t,{ot:ko,su:!r.g}))}catch(o){q("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",o)}},modifySegmentRequest:function(t,n){To(e.P,t,n)},filter:function(t){return fl(e,t)},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,r=c(t.textStreams),i=r.next();!i.done;i=r.next())"application/cea-608"!=(i=i.value).mimeType&&"application/cea-708"!=i.mimeType||n.add(i.originalId);for(r=c(t.variants),i=r.next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions)for(var s=c(i.closedCaptions.keys()),a=s.next();!a.done;a=s.next())if(a=a.value,!n.has(a)){var o=a.startsWith("CC")?"application/cea-608":"application/cea-708",l=new La;o={id:e.se++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:o,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:i.closedCaptions.get(a),label:null,type:Pe,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},t.textStreams.push(o),n.add(a)}}(e,t)},onTimelineRegionAdded:function(t){var n=e.Gb;e:{for(var r=c(n.g),i=r.next();!i.done;i=r.next())if((i=i.value).schemeIdUri==t.schemeIdUri&&i.id==t.id&&i.startTime==t.startTime&&i.endTime==t.endTime){r=i;break e}r=null}null==r&&(n.g.add(t),t=new U("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return Il(e,t)},isLowLatencyMode:function(){return e.m.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.m.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)}},u=Date.now()/1e3;return new fr(P(function(t){if(1==t.g)return i=e,_(t,e.C.start(n,l),2);if(i.H=t.h,s=Jo(tc),e.dispatchEvent(s),0==e.H.variants.length)throw new ye(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.H),a=Date.now()/1e3,o=a-u,e.j.J=o,E(t)}),function(){return e.C.stop()})}(r,e)}),i.set(this.ae,function(e){return e=function(e,t){var n,r;return P(function(i){return 1==i.g?(n=Date.now()/1e3,r=!0,e.s=il(e,{Wb:e.V,onError:function(t){Il(e,t)},wd:function(t){Pl(e,t)},onExpirationUpdated:function(t,n){Ll(e,t,n)},onEvent:function(t){e.dispatchEvent(t),t.type==Yl&&r&&(r=!1,e.j.j=Date.now()/1e3-n)}}),e.s.configure(e.m.drm),_(i,qr(e.s,e.H.variants,e.H.offlineSessionIds),2)):3!=i.g?_(i,e.s.Hc(t.K),3):_(i,fl(e,e.H),0)})}(r,e),yr(e)}),i.set(this.S,function(e,t){return yr(function(e,t,n){var r,i,s,a,o,l,u,d,h,p;return P(function(m){switch(m.g){case 1:if(t.startTime=n.startTime,null!=e.pb&&(t.startTime=e.pb,e.pb=null),r=t.K,i=t.uri,e.bb=i,e.J=new Da({sd:function(){return t.K.playbackRate},pd:function(){return t.K.defaultPlaybackRate},Ge:function(e){t.K.playbackRate=e},uf:function(e){t.K.currentTime+=e}}),s=function(){return yl(e)},a=function(){return vl(e)},e.h.o(r,"playing",s),e.h.o(r,"pause",s),e.h.o(r,"ended",s),e.h.o(r,"ratechange",a),o=e.m.abrFactory,e.B&&e.nc==o||(e.nc=o,e.B=we(o),"function"!=typeof e.B.playbackRateChanged&&(Ee("AbrManager","Please use an AbrManager with playbackRateChanged function."),e.B.playbackRateChanged=function(){}),e.B.configure(e.m.abr)),e.sa=new lr(e.m.preferredAudioLanguage,e.m.preferredVariantRole,e.m.preferredAudioChannelCount),e.Aa=e.m.preferredTextLanguage,e.ob=e.m.preferredTextRole,e.cb=e.m.preferForcedSubs,Dl(e.H.presentationTimeline,e.m.playRangeStart,e.m.playRangeEnd),e.B.init(function(t,n,r){e.i&&t!=e.i.h&&bl(e,t,!0,void 0!==n&&n,void 0===r?0:r)}),e.I=function(e,t){return new ja(e.g,e.H,e.m.streaming,t,function(){if(e.Ca&&Na(e.Ca,!0),e.i)for(var t=e.i,n=t.F.rd(),r=t.m.smallGapLimit,i=c(t.g.keys()),s=i.next();!s.done;s=i.next()){s=s.value;var a=t.g.get(s);a.za=null;var o=t.F.Y;if(!(o=s==Pe?null!=(o=o.i).g&&null!=o.h&&n>=o.g&&n<o.h:Ws(o=Js(o,s),n,r))&&((null!=Zs(t.F.Y,s)||a.hb)&&Za(t,a),a.Ra&&(a.Ra.abort(),a.Ra=null),s===Pe))for((s=t.F.Y.G.g).l=0,s.h=[],s.g=[],(a=s.i).i=[],a.h=[],a.g=0,ks(s),a=(s=c(s.j.values())).next();!a.done;a=s.next())Rs(a.value)}e.L&&al(e)},function(t){return e.dispatchEvent(t)})}(e,t.startTime),e.Ca=function(e){var t=new Ua(e.Gb);t.addEventListener("enter",function(t){kl(e,dc,t.region)}),t.addEventListener("exit",function(t){kl(e,hc,t.region)}),t.addEventListener("skip",function(t){var n=t.region;t.seeking||(kl(e,dc,n),kl(e,hc,n))});var n=new $a(e.g);return n.g.add(t),e.ia&&n.g.add(e.ia),n}(e),l=Math.max(e.H.minBufferTime,e.m.streaming.rebufferingGoal),sl(e,l),Tn(e.H,e.m.preferredVideoCodecs,e.m.preferredAudioCodecs,e.m.preferredAudioChannelCount,e.m.preferredDecodingAttributes),e.i=function(e){return new za(e.H,{rd:function(){return e.I.l()},getBandwidthEstimate:function(){return e.B.getBandwidthEstimate()},modifySegmentRequest:function(t,n){To(e.P,t,n)},Y:e.M,Wb:e.V,onError:function(t){return Il(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Vg:function(){e.C&&e.C.update&&e.C.update()},qe:function(){e.I&&e.I.I(),al(e)},Ug:function(t,n){var r=n.ge;r&&e.ia&&function(e,t,n){var r=function(e,t){var n=e.g.get(t);return n||(n={Vc:[],$e:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){var n=e.h()[t.contentType];if(n&&0<n.length){var r=n[0].start,i=n[n.length-1].end,s=t.Vc;t.Vc=s.filter(function(e,t){return!(e.position<=r&&t+1<s.length&&s[t+1].position<=r||e.position>=i)})}else t.Vc=[]}(e,r),e={ge:t,position:n},0<=(t=(r=r.Vc).findIndex(function(e){return e.position>=n}))?r.splice(t,r[t].position==n?1:0,e):r.push(e)}(e.ia,r,t)}})}(e),e.i.configure(e.m.streaming),e.l=yc,e.dispatchEvent(Jo(oc)),u=null,e.fb().find(function(e){return e.active})){m.D(2);break}if(u=_l(e)?e.B.chooseVariant():null,bl(e,u,!0,!1,0),!e.m.streaming.startAtSegmentBoundary){m.D(3);break}return d=e.I.l(),_(m,function(e,t){var n,r,i,s,a;return P(function(o){return 1==o.g?(n=e.audio,r=e.video,i=function(e,t){var n,r;return P(function(i){return 1==i.g?e?_(i,e.createSegmentIndex(),2):i.return(null):(n=e.segmentIndex[Symbol.iterator]().seek(t))?(r=n.startTime,i.return(r)):i.return(null)})},_(o,i(n,t),2)):3!=o.g?(s=o.h,_(o,i(r,t),3)):null!=(a=o.h)&&null!=s?o.return(Math.max(a,s)):null!=a?o.return(a):null!=s?o.return(s):o.return(t)})}(u,d),4);case 4:h=m.h,e.I.s(h);case 3:Sl(e,null,$n(u));case 2:return e.vb().find(function(e){return e.active})||((p=qn(e.H.textStreams,e.Aa,e.ob,e.cb)[0]||null)&&Qo(e.j.h,p,!0),u&&(p?(u.audio&&function(e,t,n){return e=Be(e.m.preferredTextLanguage),t=Be(t.language),$e(n=Be(n.language),e)&&!$e(t,n)}(e,u.audio,p)&&(e.ha=!0),e.ha&&e.M.s.setTextVisibility(!0),wl(e)):e.ha=!1),p&&(e.m.streaming.alwaysStreamText||e.Vb())&&Qa(e.i,p)),_(m,e.i.start(),5);case 5:e.m.abr.enabled&&(e.B.enable(),Al(e)),Dn(e.i?e.i.h:null,e.H),$l(e.H),Tl(e),_l(e),e.H.variants.some(function(e){return e.primary}),e.h.Qa(r,"loadedmetadata",function(){e.j.l=Date.now()/1e3-n.Le}),E(m)}})}(r,e,t))}),i.set(this.xe,function(e,t){var n=function(e,t,n){var r,i,s,a,o,l,c;return P(function(u){return 1==u.g?(r=Le,i=Date.now()/1e3,s=!0,e.s=il(e,{Wb:e.V,onError:function(t){Il(e,t)},wd:function(t){Pl(e,t)},onExpirationUpdated:function(t,n){Ll(e,t,n)},onEvent:function(t){e.dispatchEvent(t),t.type==Yl&&s&&(s=!1,e.j.j=Date.now()/1e3-i)}}),e.s.configure(e.m.drm),a=n.uri||"",o=xi(a),"application/x-mpegurl"==(l=Tc[o])&&yn()&&(l="application/vnd.apple.mpegurl"),l||(l="video/mp4"),c={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:l,codecs:n.mimeType?an(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:r.mb,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.s.S=!0,_(u,qr(e.s,[c],[]),2)):_(u,e.s.Hc(t.K),0)})}(r,e,t);return yr(n)}),i.set(this.Ua,function(e,t){return function(e,t,n){function r(){return yl(e)}t.uri=n.uri,t.startTime=n.startTime,e.bb=t.uri,e.I=new Ra(t.K),null!=t.startTime&&e.I.s(t.startTime),e.J=new Da({sd:function(){return t.K.playbackRate},pd:function(){return t.K.defaultPlaybackRate},Ge:function(e){t.K.playbackRate=e},uf:function(e){t.K.currentTime+=e}}),sl(e,e.m.streaming.rebufferingGoal),e.h.o(t.K,"playing",r),e.h.o(t.K,"pause",r),e.h.o(t.K,"ended",r),e.h.o(t.K,"ratechange",function(){return vl(e)}),"none"!=e.g.preload&&e.h.Qa(e.g,"loadedmetadata",function(){e.j.l=Date.now()/1e3-n.Le}),e.g.audioTracks&&(e.h.o(e.g.audioTracks,"addtrack",function(){return Tl(e)}),e.h.o(e.g.audioTracks,"removetrack",function(){return Tl(e)}),e.h.o(e.g.audioTracks,"change",function(){return Tl(e)})),e.g.textTracks&&(e.h.o(e.g.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){"metadata"==t.kind&&(t.mode="hidden",e.h.o(t,"cuechange",function(){if(t.activeCues)for(var n=c(t.activeCues),r=n.next();!r.done;r=n.next())r=r.value,nl(e,r.startTime,r.endTime,r.type,r.value),e.G&&e.G.onCueMetadataChange(r.value)}),new mn(function(){for(var t=function(e){return Array.from(e.g.textTracks).filter(function(e){return"metadata"==e.kind})}(e),n=(t=c(t)).next();!n.done;n=t.next())n.value.mode="hidden"}).Ga().U(.5))}(e,t);break;case"chapters":rl(e,t);break;default:Tl(e)}}),e.h.o(e.g.textTracks,"removetrack",function(){return Tl(e)}),e.h.o(e.g.textTracks,"change",function(){return Tl(e)}));var i=xi(t.uri);t.K.src=function(e,t,n){try{if(!e.m.enabled)return t;var r=jo(e);e:{switch(n){case"video/webm":case"video/mp4":var i=Lo;break e;case"application/x-mpegurl":i=ko;break e}i=void 0}return r.ot=i,r.su=!0,Io(t,Ao(r))}catch(a){return q("CMCD_SRC_ERROR","Could not generate src CMCD data.",a),t}}(e.P,t.uri,Tc[i]),(xn()||En("Web0S"))&&t.K.load(),e.l=_c,e.dispatchEvent(Jo(oc));var s=new Ot;xa(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){s.resolve()});var a=!1;return e.Zd.push(function(){a=!0}),xa(e.g,HTMLMediaElement.HAVE_CURRENT_DATA,e.h,function(){return P(function(t){return 1==t.g?a?t.return():(function(e){var t=e.m.preferredAudioLanguage;if(""!=t){e.Dd(t);var n=e.m.preferredVariantRole;""!=n&&e.Dd(t,n)}}(e),ll(e).find(function(e){return"disabled"!=e.mode})?t.D(2):_(t,new Promise(function(t){e.h.Qa(e.g.textTracks,"change",t),new mn(t).U(1)}),2)):a?t.return():(function(e){var t=e.m.preferredTextLanguage,n=e.m.preferForcedSubs;if(""!=t){e.ze(t,"",n);var r=e.m.preferredTextRole;""!=r&&e.ze(t,r,n)}}(e),void E(t))})}),e.g.error?s.reject(Ml(e)):"none"==e.g.preload&&(W('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),s.resolve()),e.h.Qa(e.g,"error",function(){s.reject(Ml(e))}),new fr(s,function(){return s.reject(new ye(2,7,7001)),Promise.resolve()})}(r,e,t)}),this.ka=new lo(this.Pa,{xg:function(e,t,n,i){var s=null;return e==r.Pa&&(s=n==r.Pa?r.Pa:r.qb),e==r.qb&&(s=n==r.Pa||t.K!=i.K?r.Pa:n==r.qb?r.qb:n==r.Ba||n==r.S?r.Ba:n==r.Ua?r.xe:null),e==r.Ba&&(s=n==r.S&&t.K==i.K?r.ue:r.$),e==r.ue&&(s=Gl(r.S,r.ke,r.$,n,t,i)),e==r.ke&&(s=Gl(r.S,r.ae,r.$,n,t,i)),e==r.ae&&(s=Gl(r.S,r.S,r.$,n,t,i)),e==r.xe&&(s=n==r.Ua&&t.K==i.K?r.Ua:r.$),e!=r.S&&e!=r.Ua||(s=r.$),e==r.$&&(s=i.K&&t.K==i.K?r.qb:r.Pa),s},$f:function(e,t,n){return r.dispatchEvent(Jo(ic,(new Map).set("state",e.name))),i.get(e)(t,n)},handleError:function(e){return P(function(t){return 1==t.g?_(t,tl(r,e),2):t.return(e.K?r.qb:r.Pa)})},Tg:function(e){r.dispatchEvent(Jo(sc,(new Map).set("state",e.name)))}}),t&&this.Hc(t,!0)}function Jo(e,t){return new U(e,t)}function el(){if(e.Promise||W("A Promise implementation or polyfill is required"),e.TextDecoder&&e.TextEncoder||W("A TextDecoder/TextEncoder implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&e.TextDecoder&&e.TextEncoder&&Array.prototype.forEach)||En("Trident/"))return!1;var t=_n();return!(t&&12>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!fn()||gn("application/x-mpegurl"))}function tl(e,t){var n,r,i,s,a,o,l,u,d;return P(function(h){switch(h.g){case 1:return e.l!=xc&&(e.l=vc),n=e.Zd.map(function(e){return e()}),e.Zd=[],_(h,Promise.all(n),2);case 2:if(e.dispatchEvent(Jo(mc)),t.mimeType=null,t.startTime=null,t.uri=null,t.K&&(e.h.Ta(t.K,"loadedmetadata"),e.h.Ta(t.K,"playing"),e.h.Ta(t.K,"pause"),e.h.Ta(t.K,"ended"),e.h.Ta(t.K,"ratechange")),e.Ca&&(e.Ca.release(),e.Ca=null),e.zb&&(e.zb.stop(),e.zb=null),!e.C){h.D(3);break}return _(h,e.C.stop(),4);case 4:e.C=null,e.Eb=null;case 3:if(!e.B){h.D(5);break}return _(h,e.B.stop(),5);case 5:if(!e.i){h.D(7);break}return _(h,e.i.destroy(),8);case 8:e.i=null;case 7:if(e.J&&(e.J.release(),e.J=null),e.I&&(e.I.release(),e.I=null),!e.M){h.D(9);break}return _(h,e.M.destroy(),10);case 10:e.M=null;case 9:if(e.G&&e.G.onAssetUnload(),!t.K||!t.K.src){h.D(11);break}return _(h,new Promise(function(e){return new mn(e).U(.1)}),12);case 12:for(t.K.removeAttribute("src"),t.K.load();t.K.lastChild;)t.K.removeChild(t.K.firstChild);case 11:if(!e.s){h.D(13);break}return _(h,e.s.destroy(),14);case 14:e.s=null;case 13:if(e.bb=null,e.L=null,e.H){for(r=c(e.H.variants),i=r.next();!i.done;i=r.next())for(s=i.value,a=c([s.audio,s.video]),o=a.next();!o.done;o=a.next())(l=o.value)&&l.segmentIndex&&l.segmentIndex.release();for(u=c(e.H.textStreams),o=u.next();!o.done;o=u.next())(d=o.value).segmentIndex&&d.segmentIndex.release()}e.H=null,e.j=new Xo,e.fe=null,xl(e),E(h)}})}function nl(e,t,n,r,i){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",i),e.dispatchEvent(Jo(rc,t))}function rl(e,t){t&&"chapters"==t.kind&&(t.mode="hidden",new mn(function(){for(var t=cl(e),n=(t=c(t)).next();!n.done;n=t.next())n.value.mode="hidden"}).Ga().U(.5))}function il(e,t){return new Wr(t,e.m.drm.updateExpirationTime)}function sl(e,t){e.L=new cr,e.L.g=dr,ur(e.L,t,Math.min(.5,t/2)),xl(e),e.zb=new mn(function(){al(e)}).na(.25)}function al(e){switch(e.l){case _c:if(e.g.ended)var t=!0;else{var n=Hs(e.g.buffered);t=null!=n&&n>=e.g.duration-1}break;case yc:e:if(e.g.ended||Qs(e.M))t=!0;else{if(e.H.presentationTimeline.W()){n=e.H.presentationTimeline.Qb();var r=Hs(e.g.buffered);if(null!=r&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=qs(e.g.buffered,e.g.currentTime);var i=t,s=(n=e.L).h.get(n.g);t=n.g,r=i||r>=s?hr:dr,n.g=r,t!=r&&xl(e)}function ol(e){if(e.C){var t=Er(e.m.manifest);e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.C.configure(t)}if(e.s&&e.s.configure(e.m.drm),e.i){e.i.configure(e.m.streaming);try{gl(e,e.H)}catch(s){Il(e,s)}e.B&&_l(e),!(t=e.i.h)||t.allowedByApplication&&t.allowedByKeySystem||El(e)}if(e.V&&e.V.Ee(e.m.streaming.forceHTTPS),e.M&&(t=e.m.textDisplayFactory,e.fe!=t)){var n=we(t),r=e.M,i=r.s;r.s=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),r.i&&(r.i.i=n),e.fe=t,e.i&&(n=(t=e.i).g.get(Pe))&&Xa(t,n.stream,!0,0,!0)}e.B&&(e.B.configure(e.m.abr),e.m.abr.enabled?e.B.enable():e.B.disable(),Al(e)),e.L&&(t=e.m.streaming.rebufferingGoal,e.H&&(t=Math.max(t,e.H.minBufferTime)),ur(e.L,t,Math.min(.5,t/2))),e.H&&Dl(e.H.presentationTimeline,e.m.playRangeStart,e.m.playRangeEnd)}function ll(e){return Array.from(e.g.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function cl(e){return Array.from(e.g.textTracks).filter(function(e){return"chapters"==e.kind})}function ul(e,t){var n,r;return P(function(i){switch(i.g){case 1:return n=xi(t),(r=Rc[n])?i.return(r):(b(i,2),_(i,gi(t,e.V,e.m.streaming.retryParameters),4));case 4:r=i.h,S(i,3);break;case 2:T(i);case 3:if(r)return i.return(r);throw new ye(1,2,2011,n)}})}function dl(e,t,n,r,i,s,a){var o,l,c,u;return P(function(d){if(1==d.g)return"text/vtt"!=i||a.length?_(d,hl(e,t,e.V,e.m.streaming.retryParameters),3):d.D(2);2!=d.g&&(o=d.h,l=pl(e,o,i,a),c=new Blob([l],{type:"text/vtt"}),t=la(c),i="text/vtt"),(u=document.createElement("track")).src=Ro(e.P,t),u.label=s,u.kind=r,u.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(u),E(d)})}function hl(e,t,n,r){var i,s,a;return P(function(o){if(1==o.g){i=kr,(s=jr([t],r)).method="GET";var l=e.P;try{l.m.enabled&&wo(l,s,{ot:Oo,su:!0})}catch(c){q("CMCD_TEXT_ERROR","Could not generate text CMCD data.",c)}return _(o,n.request(i,s).promise,2)}return a=o.h,o.return(a.data)})}function pl(e,t,n,r){var i=hn[n];if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration},t=It(t),function(e,t){function n(e){for(var n=e,r=c(t),i=r.next();!i.done;i=r.next())(i=i.value).end&&i.start<e&&(n+=i.end-i.start);return(10>(e=Math.floor(n/3600))?"0":"")+e+":"+(10>(r=Math.floor(n/60%60))?"0":"")+r+":"+(10>(i=Math.floor(n%60))?"0":"")+i+"."+(100>(n=Math.floor(1e3*n%1e3))?10>n?"00":"0":"")+n}function r(e){var t=[],n=700<=e.fontWeight,i="italic"==e.fontStyle,s=e.textDecoration.includes("underline");return n&&t.push("b"),i&&t.push("i"),s&&t.push("u"),n=t.reduce(function(e,t){return e+"<"+t+">"},""),t=t.reduceRight(function(e,t){return e+"</"+t+">"},""),e.lineBreak||e.spacer?(e.spacer&&Ee("shaka.text.Cue","Please use lineBreak instead of spacer."),"\n"):e.nestedCues.length?e.nestedCues.map(r).join(""):n+e.payload+t}for(var i=e.map(function(e){if(e.nestedCues.length){var t=e.clone();return t.nestedCues=[],t.payload=r(e),t}return e}),s="WEBVTT\n\n",a=(i=c(i)).next();!a.done;a=i.next())s+=n((a=a.value).startTime)+" --\x3e "+n(a.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case ct:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(a)+"\n",s+=a.payload+"\n\n";return s}(t=n.parseMedia(t,e),r);throw new ye(2,2,2014,n)}function ml(e){var t=Ho();return t.streaming.failureCallback=function(t){e.W()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.we())},t.textDisplayFactory=function(){return e.Db?new yo(e.g,e.Db):new ho(e.g)},t}function fl(e,t){return P(function(n){if(1==n.g)return _(n,function(e,t){return P(function(n){if(1==n.g)return _(n,An(e.i?e.i.h:null,t),2);$l(t),E(n)})}(e,t),2);gl(e,t),E(n)})}function gl(e,t){if(e.l!=xc){for(var n=e.m.restrictions,r=e.oe,i=!1,s=c(t.variants),a=s.next();!a.done;a=s.next()){var o=(a=a.value).allowedByApplication;a.allowedByApplication=wn(a,n,r),o!=a.allowedByApplication&&(i=!0)}if(i&&e.i&&Tl(e),(n=e.s?e.s.i:null)&&e.s.s)for(i=(r=c(t.variants)).next();!i.done;i=r.next())for(s=(i=c(((i=i.value).video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[]))).next();!s.done;s=i.next())if((s=s.value).keySystem==n.keySystem)for(a=(s=c(s.initData||[])).next();!a.done;a=s.next())a=a.value,Qr(e.s,a.initDataType,a.initData);Ol(e,t)}}function xl(e){var t=e.Rc();if(e.j&&e.L&&e.I){var n=e.J;n.j=t,Oa(n),e.P&&(n=e.P,t||n.g||(n.g=!0),n.g&&t&&(n.i=!0),n.j=t),yl(e)}t=(new Map).set("buffering",t),e.dispatchEvent(Jo(ql,t))}function vl(e){var t=e.g.playbackRate;0!=t&&(e.J&&e.J.set(t),t=Jo(ac),e.dispatchEvent(t))}function yl(e){if(e.j&&e.L){var t=e.j.g;e.L.g==dr?zo(t,"buffering"):e.g.paused?zo(t,"paused"):e.g.ended?zo(t,"ended"):zo(t,"playing")}}function _l(e){try{Ol(e,e.H)}catch(n){return Il(e,n),!1}var t=e.H.variants.filter(function(e){return Hn(e)});return t=e.sa.create(t),e.B.setVariants(Array.from(t.values())),!0}function El(e){var t;(t=_l(e)?e.B.chooseVariant():null)&&bl(e,t,!0,!0,0)}function bl(e,t,n,r,i){var s=e.i.h;if(t==s)r&&Ya(e.i,t,r,i,!0);else{var a=e.j.h;a.h!=t&&(a.h=t,a.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Ya(e.i,t,r,i),r=null,s&&(r=$n(s)),t=$n(t),n?Sl(e,r,t):Rl(e,r,t)}}function Cl(e,t){var n=Array.from(e.g.audioTracks).find(function(e){return e.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),Rl(e,n=Gn(n),Gn(t))}function Sl(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),Nl(e,t=Jo(Wl,t))}function Tl(e){Nl(e,Jo(pc))}function Rl(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),Nl(e,t=Jo(fc,t))}function jl(e){Nl(e,Jo(lc))}function wl(e){Nl(e,Jo(cc))}function Al(e){var t=(new Map).set("newStatus",e.m.abr.enabled);Nl(e,Jo(Hl,t))}function Il(e,t){if(e.l!=xc){var n=Jo(Xl,(new Map).set("detail",t));e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function kl(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(Jo(t,n))}function Ml(e){if(!e.g.error)return null;var t=e.g.error.code;if(1==t)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new ye(2,3,3016,t,n,e.g.error.message)}function Pl(e,t){if(e.i){var n=Object.keys(t),r=1==n.length&&"00"==n[0],i=!1;if(n.length)for(var s=(n=c(e.H.variants)).next();!s.done;s=n.next()){var a=[];(s=s.value).audio&&a.push(s.audio),s.video&&a.push(s.video);for(var o=(a=c(a)).next();!o.done;o=a.next()){var l=o.value;if(o=s.allowedByKeySystem,l.keyIds.size){s.allowedByKeySystem=!0;for(var u=(l=c(l.keyIds)).next();!u.done;u=l.next())u=u.value,u=t[r?"00":u],s.allowedByKeySystem=s.allowedByKeySystem&&!!u&&!bc.includes(u)}o!=s.allowedByKeySystem&&(i=!0)}}i&&_l(e),(r=e.i.h)&&!r.allowedByKeySystem&&El(e),i&&Tl(e)}}function Ll(e,t,n){e.C&&e.C.onExpirationUpdated&&e.C.onExpirationUpdated(t,n),t=Jo(Zl),e.dispatchEvent(t)}function Dl(e,t,n){0<t&&(e.W()||e.Ff(t)),n<(t=e.getDuration())&&(e.W()||e.ib(n))}function Ol(e,t){var n=e.s?e.s.qd():{},r=Object.keys(n);r=r.length&&"00"==r[0];for(var i=!1,s=!1,a=new Set,o=new Set,l=c(t.variants),u=l.next();!u.done;u=l.next()){var d=[];(u=u.value).audio&&d.push(u.audio),u.video&&d.push(u.video);for(var h=(d=c(d)).next();!h.done;h=d.next())if((h=h.value).keyIds.size)for(var p=(h=c(h.keyIds)).next();!p.done;p=h.next()){p=p.value;var m=n[r?"00":p];m?bc.includes(m)&&o.add(m):a.add(p)}u.allowedByApplication?u.allowedByKeySystem&&(i=!0):s=!0}if(!i)throw new ye(2,4,4012,n={hasAppRestrictions:s,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(o)})}function $l(e){if(!e.variants.some(Hn))throw new ye(2,4,4032)}function Nl(e,t){P(function(n){if(1==n.g)return _(n,Promise.resolve(),2);e.l!=xc&&e.dispatchEvent(t),E(n)})}function Fl(e){for(var t=new Set,n=(e=c(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(Be(n.language)):t.add("und");return t}function Bl(e){for(var t=new Map,n=new Map,r=(e=c(e)).next();!r.done;r=e.next()){var i="und",s=[];(r=r.value).language&&(i=Be(r.language)),(s="variant"==r.type?r.audioRoles:r.roles)&&s.length||(s=[""]),t.has(i)||t.set(i,new Set);for(var a=(s=c(s)).next();!a.done;a=s.next())a=a.value,t.get(i).add(a),r.label&&(n.has(i)||n.set(i,new Map),n.get(i).set(a,r.label))}var o=[];return t.forEach(function(e,t){for(var r=c(e),i=r.next();!i.done;i=r.next()){i=i.value;var s=null;n.has(t)&&n.get(t).has(i)&&(s=n.get(t).get(i)),o.push({language:t,role:i,label:s})}}),o}function Ul(){return new ye(2,7,7e3)}function Gl(e,t,n,r,i,s){return r==e&&i.K==s.K&&i.uri==s.uri&&i.mimeType==s.mimeType?t:n}function Vl(e){return new Promise(function(t,n){e.Xb=function(){return n(Ul())},e.vd=function(){return t()},e.onError=function(e){return n(e)},e.xd=function(){return n(Ul())}})}B("shaka.util.CmcdManager.StreamingFormat",{Hh:"d",Vh:"h",Ci:"s",ki:"o"}),B("shaka.util.ConfigUtils",Bo),Bo.convertToConfigObject=Go,Bo.mergeConfigObjects=Uo,B("shaka.util.PlayerConfiguration",Vo),Vo.mergeConfigObjects=Wo,g(Zo,J),(r=Zo.prototype).destroy=function(){var e,t=this;return P(function(n){switch(n.g){case 1:return t.l==xc?n.return():(t.l=xc,e=co(t.ka,function(){return{node:t.Pa,payload:{K:null,mimeType:null,startTime:null,Le:NaN,uri:null},Rb:!1}}),_(n,new Promise(function(t){e.uc=function(){},e.vd=function(){t()},e.Xb=function(){t()},e.onError=function(){t()},e.xd=function(){t()}}),2));case 2:return _(n,t.ka.destroy(),3);case 3:if(t.h&&(t.h.release(),t.h=null),t.nc=null,t.B=null,t.m=null,t.j=null,t.Db=null,t.P=null,!t.V){n.D(4);break}return _(n,t.V.destroy(),5);case 5:t.V=null;case 4:J.prototype.release.call(t),E(n)}})},r.Hc=function(e,t){if(t=void 0===t||t,this.l==xc)return Promise.reject(Ul());var n={K:null,mimeType:null,startTime:null,Le:NaN,uri:null};n.K=e,fn()||(t=!1);var r=t?this.Ba:this.qb,i=co(this.ka,function(){return{node:r,payload:n,Rb:!1}});return i.uc=function(){},Vl(i)},r.detach=function(){var e=this;if(this.l==xc)return Promise.reject(Ul());var t=co(this.ka,function(){return{node:e.Pa,payload:{K:null,mimeType:null,startTime:null,Le:NaN,uri:null},Rb:!1}});return t.uc=function(){},Vl(t)},r.Qe=function(e){var t=this;if(e=void 0===e||e,this.l==xc)return Promise.reject(Ul());fn()||(e=!1);var n={K:null,mimeType:null,startTime:null,Le:NaN,uri:null},r=co(this.ka,function(r){var i=r.K&&e?t.Ba:r.K?t.qb:t.Pa;return n.K=r.K,{node:i,payload:n,Rb:!1}});return r.uc=function(){},Vl(r)},r.vh=function(e){this.pb=e},r.load=function(e,t,n){var r=this;if(this.pb=null,this.l==xc)return Promise.reject(Ul());this.dispatchEvent(Jo(ec));var i={K:null,mimeType:null,startTime:null,Le:NaN,uri:null};i.uri=e,i.Le=Date.now()/1e3,n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var s=function(e,t){if(!fn())return!0;var n=t.mimeType,r=t.uri||"";if(n||(n=xi(r),n=Tc[n]),n){if(""==(t.K||bn()).canPlayType(n))return!1;if(!fn()||!(n in vi)&&!(xi(r)in yi)||e.m.streaming.preferNativeHls)return!0;if(yn())return e.m.streaming.useNativeHlsOnSafari}return!1}(this,i)?this.Ua:this.S,a=co(this.ka,function(e){return null==e.K?null:(i.K=e.K,{node:s,payload:i,Rb:!0})});return this.j=new Xo,this.P=function(e){return new So({getBandwidthEstimate:function(){return e.B?e.B.getBandwidthEstimate():NaN},Ib:function(){return e.Ib()},kg:function(){return e.g?e.g.currentTime:0},fb:function(){return e.fb()},Jb:function(){return e.Jb()},W:function(){return e.W()}},e.m.cmcd)}(this),a.uc=function(){},new Promise(function(e,t){a.xd=function(){return t(new ye(2,7,7002))},a.vd=function(){e(),r.dispatchEvent(Jo(Jl))},a.Xb=function(){return t(Ul())},a.onError=function(e){return t(e)}})},r.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Go(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(Ee("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01));var n=Wo(this.m,e,ml(this));return ol(this),n},r.getConfiguration=function(){var e=ml(this);return Wo(e,this.m,ml(this)),e},r.dg=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.g.currentTime+t,this.Na().end)))return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},r.gh=function(){for(var e in this.m)delete this.m[e];Wo(this.m,ml(this),ml(this)),ol(this)},r.kf=function(){return this.l},r.wg=function(){return this.g},r.Mc=function(){return this.V},r.Yd=function(){return this.bb},r.od=function(){return this.G?this.G:null},r.W=function(){return this.H?this.H.presentationTimeline.W():!(!this.g||!this.g.src)&&1/0==this.g.duration},r.Tb=function(){return!!this.H&&this.H.presentationTimeline.Tb()},r.pf=function(){if(this.H){var e=this.H.variants;return!!e.length&&!e[0].video}return!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},r.Na=function(){if(this.H){var e=this.H.presentationTimeline;return{start:e.mc(),end:e.sb()}}return this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},r.Jg=function(){this.W()&&(this.g.currentTime=this.Na().end)},r.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},r.drmInfo=function(){return this.s?this.s.i:null},r.Lc=function(){return this.s?this.s.Lc():1/0},r.qd=function(){return this.s?this.s.qd():{}},r.Rc=function(){return!!this.L&&this.L.g==dr},r.Jb=function(){return this.g?this.J?this.J.i:1:0},r.Pe=function(e){0==e?W("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.J.set(e),this.l==yc&&(this.B.playbackRateChanged(e),Ka(this.i,1<Math.abs(e))))},r.Ue=function(){var e=this.J.pd();this.l==_c&&this.J.set(e),this.l==yc&&(this.J.set(e),this.B.playbackRateChanged(e),Ka(this.i,!1))},r.fb=function(){if(this.H){for(var e=this.i?this.i.h:null,t=[],n=0,r=c(this.H.variants),i=r.next();!i.done;i=r.next())if(Hn(i=i.value)){var s=$n(i);s.active=i==e,s.active||1==n||null==e||i.video!=e.video||i.audio!=e.audio||(s.active=!0),s.active&&n++,t.push(s)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(e){return Gn(e)}):[]},r.vb=function(){if(this.H){for(var e=this.i?this.i.i:null,t=[],n=c(this.H.textStreams),r=n.next();!r.done;r=n.next()){var i=Nn(r=r.value);i.active=r==e,t.push(i)}return t}return this.g&&this.g.src&&this.g.textTracks?ll(this).map(function(e){return Un(e)}):[]},r.ng=function(){return this.H?this.H.imageStreams.map(function(e){return Fn(e)}):[]},r.Fg=function(e,t){var n,r,i,s,a,o,l,c,u,d,h,p,m,f,g,x,v,y,E=this;return P(function(b){return 1==b.g?E.H?(n=E.H.imageStreams.find(function(t){return t.id==e}))?n.segmentIndex?b.D(3):_(b,n.createSegmentIndex(),3):b.return(null):b.D(2):2!=b.g?null==(r=n.segmentIndex.find(t))?b.return(null):(i=n.segmentIndex.get(r),s=i.tilesLayout||n.tilesLayout,(a=/(\d+)x(\d+)/.exec(s))?(o=n.width||0,l=n.height||0,c=parseInt(a[1],10),u=parseInt(a[2],10),d=o/c,h=l/u,p=c*u,m=i.l-i.startTime,f=i.i||m/p,g=i.startTime,v=x=0,1<p&&(y=Math.floor((t-i.startTime)/f),g=i.startTime+y*f,x=y%c*d,v=Math.floor(y/c)*h),b.return({imageHeight:l,imageWidth:o,height:h,positionX:x,positionY:v,startTime:g,duration:f,uris:i.Ma(),width:d})):b.return(null)):b.return(null)})},r.Ae=function(e){if(this.H&&this.i){var t=this.H.textStreams.find(function(t){return t.id==e.id});t&&t!=this.i.i&&(Qo(this.j.h,t,!1),Qa(this.i,t),jl(this),this.Aa=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){for(var n=(t=c(t=ll(this))).next();!n.done;n=t.next())Bn(n=n.value)==e.id?n.mode=this.ha?"showing":"hidden":n.mode="disabled";jl(this)}},r.Be=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.H&&this.i){this.m.abr.enabled&&W("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.H.variants.find(function(t){return t.id==e.id});r&&Hn(r)&&(bl(this,r,!1,t,n),this.sa=new or(r),_l(this))}else if(this.g&&this.g.audioTracks)for(n=(t=c(t=Array.from(this.g.audioTracks))).next();!n.done;n=t.next())if(Bn(n=n.value)==e.id){Cl(this,n);break}},r.cg=function(){return Bl(this.fb())},r.Eg=function(){return Bl(this.vb())},r.ag=function(){return Array.from(Fl(this.fb()))},r.Dg=function(){return Array.from(Fl(this.vb()))},r.Dd=function(e,t){if(this.H&&this.I){this.sa=new lr(e,t||"",0,"");for(var n=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},r=this.i.h,i=this.sa.create(this.H.variants),s=null,a=(i=c(i.values())).next();!a.done;a=i.next())a=a.value,(!s||n(s,r)>n(a,r))&&(s=a);s?(n=$n(s),this.Be(n,!0)):El(this)}else if(this.g&&this.g.audioTracks){for(i=Array.from(this.g.audioTracks),n=Be(e),s=r=null,a=(i=c(i)).next();!a.done;a=i.next()){var o=Gn(a=a.value);Be(o.language)==n&&(r=a,t?o.roles.includes(t)&&(s=a):0==o.roles.length&&(s=a))}s?Cl(this,s):r&&Cl(this,r)}},r.ze=function(e,t,n){if(n=void 0!==n&&n,this.H&&this.I)this.Aa=e,this.ob=t||"",this.cb=n,(e=qn(this.H.textStreams,this.Aa,this.ob,this.cb)[0]||null)&&e!=this.i.i&&(Qo(this.j.h,e,!1),this.m.streaming.alwaysStreamText||this.Vb())&&(Qa(this.i,e),jl(this));else{var r=Be(e);(e=this.vb().find(function(e){return Be(e.language)==r&&(!t||e.roles.includes(t))&&e.forced==n}))&&this.Ae(e)}},r.ih=function(e){if(this.H&&this.I){for(var t=null,n=c(this.H.variants),r=n.next();!r.done;r=n.next())if((r=r.value).audio.label==e){t=r;break}null!=t&&(this.sa=new lr(t.language,"",0,e),El(this))}},r.Vb=function(){var e=this.ha;return this.M?this.M.s.isTextVisible():this.g&&this.g.src&&this.g.textTracks?ll(this).some(function(e){return"showing"==e.mode}):e},r.hf=function(){return this.g&&this.g.src&&this.g.textTracks?cl(this).map(function(e){return Un(e)}):[]},r.fg=function(e){var t=Be(e),n=cl(this).filter(function(e){return Be(e.language)==t});if(!n||!n.length)return[];e=[];for(var r=(n=c(n)).next();!r.done;r=n.next())if((r=r.value)&&r.cues)for(var i=(r=c(r.cues)).next();!i.done;i=r.next())i=i.value,e.push({title:i.text,startTime:i.startTime,endTime:i.endTime});return e},r.Je=function(e){if(e=!!e,this.ha!=e){if(this.ha=e,this.l==yc)this.M.s.setTextVisibility(e),this.m.streaming.alwaysStreamText||(e?this.i.i||0<(e=qn(this.H.textStreams,this.Aa,this.ob,this.cb)).length&&(Qa(this.i,e[0]),jl(this)):function(e){var t=e.g.get(Pe);t&&(so(t),ao(t).catch(function(){}),e.g.delete(Pe)),e.i=null}(this.i));else if(this.g&&this.g.src&&this.g.textTracks)for(var t=ll(this),n=(t=c(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");wl(this)}},r.yg=function(){if(!this.W())return null;var e=this.ka.l,t=0;if(this.I)t=this.I.l();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.H?new Date(1e3*(this.H.presentationTimeline.j+t)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},r.lf=function(){if(!this.W())return null;if(this.H)return new Date(1e3*this.H.presentationTimeline.j);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},r.Ib=function(){if(this.l==yc)return this.M.Ib();var e={total:[],audio:[],video:[],text:[]};return this.l==_c&&(e.total=zs(this.g.buffered)),e},r.getStats=function(){if(this.l!=yc&&this.l!=_c)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};yl(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.j;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}e.getVideoPlaybackQuality&&(e=e.getVideoPlaybackQuality(),n=this.j,t=Number(e.totalVideoFrames),n.S=Number(e.droppedVideoFrames),n.P=t,this.j.M=Number(e.corruptedVideoFrames)),e=this.s&&(e=this.s).I?e.I:NaN,this.j.s=e,this.l==yc&&((e=this.i.h)&&(this.j.C=(this.J?this.J.i:1)*e.bandwidth),e&&e.video&&(n=this.j,t=e.video.height||NaN,n.ea=e.video.width||NaN,n.G=t),this.W()&&(e=this.lf().valueOf()+1e3*this.Na().end,this.j.I=(Date.now()-e)/1e3),this.H&&this.H.presentationTimeline&&(this.j.L=this.H.presentationTimeline.g),e=this.B.getBandwidthEstimate(),this.j.B=e);var r=this.j;e=r.ea,n=r.G,t=r.C;for(var i=r.P,s=r.S,a=r.M,o=r.B,l=r.i,u=r.l,d=r.J,h=r.j,p=Ko(r.g,"playing"),m=Ko(r.g,"paused"),f=Ko(r.g,"buffering"),g=r.s,x=r.I,v=r.L,y=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=c(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}(r.g),_=[],E=(r=c(r.h.g)).next();!E.done;E=r.next())E=E.value,_.push({timestamp:E.timestamp,id:E.id,type:E.type,fromAdaptation:E.fromAdaptation,bandwidth:E.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:s,corruptedFrames:a,estimatedBandwidth:o,completionPercent:l,loadLatency:u,manifestTimeSeconds:d,drmTimeSeconds:h,playTime:p,pauseTime:m,bufferingTime:f,licenseTime:g,liveLatency:x,maxSegmentDuration:v,stateHistory:y,switchHistory:_}},r.addTextTrack=function(e,t,n,r,i,s,a){if(a=void 0!==a&&a,Ee("addTextTrack","Please use an addTextTrackAsync."),this.l!=yc&&this.l!=_c)throw new ye(1,7,7004);if(!r){var o=xi(e);if(!(r=Rc[o]))throw new ye(1,2,2011,o)}if(this.l==_c){if("text/vtt"!=r)throw new ye(1,2,2013,r);if(a&&(n="forced"),(r=document.createElement("track")).src=Ro(this.P,e),r.label=s||"",r.kind=n,r.srclang=t,this.g.getAttribute("crossorigin")||this.g.setAttribute("crossorigin","anonymous"),this.g.appendChild(r),e=this.vb().find(function(e){return e.language==t&&e.label==(s||"")&&e.kind==n}))return Tl(this),e;throw new ye(1,2,2012)}if(1/0==(o=this.H.presentationTimeline.getDuration()))throw new ye(1,4,4033);if(!ln(nn((e={id:this.se++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ma(0,o,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:s||null,type:Pe,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!a,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}).mimeType,e.codecs)))throw new ye(2,2,2014,r);return this.H.textStreams.push(e),Tl(this),Nn(e)},r.Rf=function(e,t,n,r,i,s,a){a=void 0!==a&&a;var o,l,c,u,d,h,p,m,f,g=this;return P(function(x){switch(x.g){case 1:if(g.l!=yc&&g.l!=_c)throw new ye(1,7,7004);if(r){x.D(2);break}return _(x,ul(g,e),3);case 3:r=x.h;case 2:if(o=[],g.G)try{o=g.G.getServerSideCuePoints()}catch(v){}if(g.l!=_c){x.D(4);break}return a&&(n="forced"),_(x,dl(g,e,t,n,r,s||"",o),5);case 5:if(l=g.vb(),c=l.find(function(e){return e.language==t&&e.label==(s||"")&&e.kind==n}))return Tl(g),x.return(c);throw new ye(1,2,2012);case 4:if(u=Le,1/0==(d=g.H.presentationTimeline.getDuration()))throw new ye(1,4,4033);if(!o.length){x.D(6);break}return _(x,hl(g,e,g.V,g.m.streaming.retryParameters),7);case 7:h=x.h,p=pl(g,h,r,o),m=new Blob([p],{type:"text/vtt"}),e=la(m),r="text/vtt";case 6:if(f={id:g.se++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ma(0,d,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:s||null,type:u.ua,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!a,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},!ln(nn(f.mimeType,f.codecs)))throw new ye(2,2,2014,r);return g.H.textStreams.push(f),Tl(g),x.return(Nn(f))}})},r.Qf=function(e,t,n){var r,i,s,a,o,l,u,d=this;return P(function(h){switch(h.g){case 1:if(d.l!=yc&&d.l!=_c)throw new ye(1,7,7004);if(n){h.D(2);break}return _(h,ul(d,e),3);case 3:n=h.h;case 2:if(r=[],d.G)try{r=d.G.getServerSideCuePoints()}catch(p){}return _(h,dl(d,e,t,"chapters",n,"",r),4);case 4:if(i=d.hf(),s=i.find(function(e){return e.language==t})){for(a=cl(d),o=c(a),l=o.next();!l.done;l=o.next())u=l.value,rl(d,u);return h.return(s)}throw new ye(1,2,2012)}})},r.Fe=function(e,t){this.oe.width=e,this.oe.height=t},r.we=function(){if(this.l==yc){var e=this.i;if(e.N.g)e=!1;else if(e.j)e=!1;else{for(var t=c(e.g.values()),n=t.next();!n.done;n=t.next())(n=n.value).Pc&&(n.Pc=!1,io(e,n,.1));e=!0}}else e=!1;return e},r.sg=function(){return W("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.H},r.ug=function(){return this.Eb},r.Ke=function(e){this.Db=e},B("shaka.Player",Zo),Zo.prototype.setVideoContainer=Zo.prototype.Ke,Zo.prototype.getManifestParserFactory=Zo.prototype.ug,Zo.prototype.getManifest=Zo.prototype.sg,Zo.prototype.retryStreaming=Zo.prototype.we,Zo.prototype.setMaxHardwareResolution=Zo.prototype.Fe,Zo.prototype.addChaptersTrack=Zo.prototype.Qf,Zo.prototype.addTextTrackAsync=Zo.prototype.Rf,Zo.prototype.addTextTrack=Zo.prototype.addTextTrack,Zo.prototype.getStats=Zo.prototype.getStats,Zo.prototype.getBufferedInfo=Zo.prototype.Ib,Zo.prototype.getPresentationStartTimeAsDate=Zo.prototype.lf,Zo.prototype.getPlayheadTimeAsDate=Zo.prototype.yg,Zo.prototype.setTextTrackVisibility=Zo.prototype.Je,Zo.prototype.getChapters=Zo.prototype.fg,Zo.prototype.getChaptersTracks=Zo.prototype.hf,Zo.prototype.isTextTrackVisible=Zo.prototype.Vb,Zo.prototype.selectVariantsByLabel=Zo.prototype.ih,Zo.prototype.selectTextLanguage=Zo.prototype.ze,Zo.prototype.selectAudioLanguage=Zo.prototype.Dd,Zo.prototype.getTextLanguages=Zo.prototype.Dg,Zo.prototype.getAudioLanguages=Zo.prototype.ag,Zo.prototype.getTextLanguagesAndRoles=Zo.prototype.Eg,Zo.prototype.getAudioLanguagesAndRoles=Zo.prototype.cg,Zo.prototype.selectVariantTrack=Zo.prototype.Be,Zo.prototype.selectTextTrack=Zo.prototype.Ae,Zo.prototype.getThumbnails=Zo.prototype.Fg,Zo.prototype.getImageTracks=Zo.prototype.ng,Zo.prototype.getTextTracks=Zo.prototype.vb,Zo.prototype.getVariantTracks=Zo.prototype.fb,Zo.prototype.cancelTrickPlay=Zo.prototype.Ue,Zo.prototype.trickPlay=Zo.prototype.Pe,Zo.prototype.getPlaybackRate=Zo.prototype.Jb,Zo.prototype.isBuffering=Zo.prototype.Rc,Zo.prototype.getKeyStatuses=Zo.prototype.qd,Zo.prototype.getExpiration=Zo.prototype.Lc,Zo.prototype.drmInfo=Zo.prototype.drmInfo,Zo.prototype.keySystem=Zo.prototype.keySystem,Zo.prototype.goToLive=Zo.prototype.Jg,Zo.prototype.seekRange=Zo.prototype.Na,Zo.prototype.isAudioOnly=Zo.prototype.pf,Zo.prototype.isInProgress=Zo.prototype.Tb,Zo.prototype.isLive=Zo.prototype.W,Zo.prototype.getAdManager=Zo.prototype.od,Zo.prototype.getAssetUri=Zo.prototype.Yd,Zo.prototype.getNetworkingEngine=Zo.prototype.Mc,Zo.prototype.getMediaElement=Zo.prototype.wg,Zo.prototype.getLoadMode=Zo.prototype.kf,Zo.prototype.resetConfiguration=Zo.prototype.gh,Zo.prototype.getBufferFullness=Zo.prototype.dg,Zo.prototype.getConfiguration=Zo.prototype.getConfiguration,Zo.prototype.configure=Zo.prototype.configure,Zo.prototype.load=Zo.prototype.load,Zo.prototype.updateStartTime=Zo.prototype.vh,Zo.prototype.unload=Zo.prototype.Qe,Zo.prototype.detach=Zo.prototype.detach,Zo.prototype.attach=Zo.prototype.Hc,Zo.probeSupport=function(e){var t,n,r,i,s;return e=void 0===e||e,P(function(a){if(1==a.g)return t={},e?_(a,function(){var e,t,n,r,i,s;return P(function(a){return 1==a.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:t}],r=new Map,i=function(e){var t,i,s;return P(function(a){switch(a.g){case 1:return b(a,2),_(a,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return t=a.h,s=!!(i=t.getConfiguration().sessionTypes)&&i.includes("persistent-license"),En("Tizen 3")&&(s=!1),r.set(e,{persistentState:s}),_(a,t.createMediaKeys(),5);case 5:S(a,0);break;case 2:T(a),r.set(e,null),E(a)}})},s=e.map(function(e){return i(e)}),_(a,Promise.all(s),2)):a.return(Vr(r))})}(),3):a.D(2);2!=a.g&&(t=a.h);var o={};if(fn()){for(var l in vi)o[l]=!0;for(var u in yi)o[u]=!0}l={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var d=(u=c(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!d.done;d=u.next())o[d=d.value]=fn()?!!vi[d]:gn(d);for(var h in l)o[h]=fn()?!!yi[h]:gn(l[h]);for(n=o,o={},l=(h=c('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(","))).next();!l.done;l=h.next())o[l=l.value]=fn()?!!ln(l)||MediaSource.isTypeSupported(l)||Jt(l):gn(l),o[u=l.split(";")[0]]=o[u]||o[l];for(s in r={manifest:n,media:o,drm:t},i=Cc)r[s]=i[s]();return a.return(r)})},Zo.isBrowserSupported=el,Zo.setAdManagerFactory=function(e){Sc=e},Zo.registerSupportPlugin=function(e,t){Cc[e]=t},Zo.prototype.destroy=Zo.prototype.destroy;var Hl="abrstatuschanged",Wl="adaptation",ql="buffering",zl="downloadfailed",Kl="downloadheadersreceived",Yl="drmsessionupdate",Ql="emsg",Xl="error",Zl="expirationupdated",Jl="loaded",ec="loading",tc="manifestparsed",nc="mediaqualitychanged",rc="metadata",ic="onstatechange",sc="onstateidle",ac="ratechange",oc="streaming",lc="textchanged",cc="texttrackvisibility",uc="timelineregionadded",dc="timelineregionenter",hc="timelineregionexit",pc="trackschanged",mc="unloading",fc="variantchanged",gc={Ch:Hl,Dh:Wl,Eh:ql,Ih:zl,Jh:Kl,Kh:Yl,Rh:Ql,Error:Xl,Sh:Zl,Yh:"largegap",Zh:Jl,$h:ec,di:tc,ei:nc,Metadata:rc,li:ic,mi:sc,xi:ac,Ei:"sessiondata",Fi:oc,Gi:lc,Hi:cc,Ii:uc,Ji:dc,Ki:hc,Li:pc,Pi:mc,Ri:fc},xc=0,vc=1,yc=2,_c=3;Zo.LoadMode={DESTROYED:xc,NOT_LOADED:vc,MEDIA_SOURCE:yc,SRC_EQUALS:_c},Zo.version="v3.3.2";var Ec=["3","3"];Se=new function(e){this.g=e,this.i=be,this.h=Ce}(new _e(Number(Ec[0]),Number(Ec[1])));var bc=["output-restricted","internal-error"],Cc={},Sc=null,Tc={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Rc={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function jc(){this.h=[],this.j=this.i=this.g=0}function wc(e,t){var n=this;this.i=e,this.g=t,this.j=!1,this.l=this.g.getVolume(),this.h=new Or,this.h.o(this.g,google.ima.AdEvent.Type.PAUSED,function(){n.j=!0}),this.h.o(this.g,google.ima.AdEvent.Type.RESUMED,function(){n.j=!1})}function Ac(t,n,r,i){var s=this;this.B=t,this.g=n,this.C=null,this.G=NaN,this.j=i,this.s=null,this.h=new Or,google.ima.settings.setLocale(r),(t=new google.ima.AdDisplayContainer(this.B,this.g)).initialize(),this.l=new google.ima.AdsLoader(t),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v3.3.2"),this.i=null,this.h.Qa(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){!function(n,r){n.j(new U("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-n.G))),n.i=r.getAdsManager(n.g),n.j(new U("ima-ad-manager-loaded",(new Map).set("imaAdManager",n.i)));var i=n.i.getCuePoints();if(i.length){for(var s=[],a=(i=c(i)).next();!a.done;a=i.next())s.push({start:a.value,end:null});n.j(new U("ad-cue-points-changed",(new Map).set("cuepoints",s)))}!function(e){function t(t,n){var r=(new Map).set("originalEvent",t);e.j(new U(n,r))}e.h.o(e.i,google.ima.AdErrorEvent.Type.AD_ERROR,function(t){Ic(e,t)}),e.h.o(e.i,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){kc(e,t)}),e.h.o(e.i,google.ima.AdEvent.Type.STARTED,function(t){kc(e,t)}),e.h.o(e.i,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t(e,"ad-first-quartile")}),e.h.o(e.i,google.ima.AdEvent.Type.MIDPOINT,function(e){t(e,"ad-midpoint")}),e.h.o(e.i,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t(e,"ad-third-quartile")}),e.h.o(e.i,google.ima.AdEvent.Type.COMPLETE,function(e){t(e,"ad-complete")}),e.h.o(e.i,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){Mc(e,t)}),e.h.o(e.i,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(t){Mc(e,t)}),e.h.o(e.i,google.ima.AdEvent.Type.SKIPPED,function(e){t(e,"ad-skipped")}),e.h.o(e.i,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t(e,"ad-volume-changed")}),e.h.o(e.i,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t(e,"ad-muted")}),e.h.o(e.i,google.ima.AdEvent.Type.PAUSED,function(n){e.s.j=!0,t(n,"ad-paused")}),e.h.o(e.i,google.ima.AdEvent.Type.RESUMED,function(n){e.s.j=!1,t(n,"ad-resumed")}),e.h.o(e.i,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(e){t(e,"ad-skip-state-changed")}),e.h.o(e.i,google.ima.AdEvent.Type.CLICK,function(e){t(e,"ad-clicked")}),e.h.o(e.i,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t(e,"ad-progress")}),e.h.o(e.i,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t(e,"ad-buffering")}),e.h.o(e.i,google.ima.AdEvent.Type.IMPRESSION,function(e){t(e,"ad-impression")}),e.h.o(e.i,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t(e,"ad-duration-changed")}),e.h.o(e.i,google.ima.AdEvent.Type.USER_CLOSE,function(e){t(e,"ad-closed")}),e.h.o(e.i,google.ima.AdEvent.Type.LOADED,function(e){t(e,"ad-loaded")}),e.h.o(e.i,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t(e,"all-ads-completed")}),e.h.o(e.i,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t(e,"ad-linear-changed")}),e.h.o(e.i,google.ima.AdEvent.Type.AD_METADATA,function(e){t(e,"ad-metadata")}),e.h.o(e.i,google.ima.AdEvent.Type.LOG,function(e){t(e,"ad-recoverable-error")}),e.h.o(e.i,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t(e,"ad-break-ready")}),e.h.o(e.i,google.ima.AdEvent.Type.INTERACTION,function(e){t(e,"ad-interaction")})}(n);try{n.i.init(n.g.offsetWidth,n.g.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),n.h.o(n.g,"loadeddata",function(){n.i.resize(n.g.offsetWidth,n.g.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in e&&(n.C=new ResizeObserver(function(){n.i.resize(n.g.offsetWidth,n.g.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),n.C.observe(n.g)),n.i.start()}catch(t){Mc(n,null)}}(s,t)}),this.h.o(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){Ic(s,e)}),this.g.onended=function(){s.l.contentComplete()}}function Ic(e,t){t.getError(),Mc(e,null),e.j(new U("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function kc(e,t){var n=t.getAd();e.s=new wc(n,e.i),n=(new Map).set("ad",e.s).set("sdkAdObject",n).set("originalEvent",t),e.j(new U("ad-started",n)),e.s.isLinear()&&(e.B.setAttribute("ad-active","true"),e.g.pause())}function Mc(e,t){e.j(new U("ad-stopped",(new Map).set("originalEvent",t))),e.s.isLinear()&&(e.B.removeAttribute("ad-active"),e.g.play())}function Pc(e,t){this.i=e,this.h=null,this.g=t}function Lc(e,t,n,r){var i=this;this.C=e,this.g=t,this.l=null,this.M=NaN,this.j=r,this.L=!1,this.G=this.s=this.B=null,this.I="",this.J=[],this.h=new Or,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.i=new google.ima.dai.api.StreamManager(this.g,this.C,e),this.j(new U("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.i))),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){!function(e,t){e.j(new U("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.M)));var n=t.getStreamData().url;e.l.resolve(n),e.l=null,e.L||e.h.o(e.g,"seeked",function(){var t=e.g.currentTime;if(0!=t){e.i.streamTimeForContentTime(t);var n=e.i.previousCuePointForStreamTime(t);n&&!n.played&&(e.B=t,e.g.currentTime=n.start)}})}(i,e)}),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.ERROR,function(){i.I.length?i.l.resolve(i.I):i.l.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.l=null}),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){e=e.getAd(),i.s=new Pc(e,i.g),i.G&&(i.s.h=i.G),i.j(new U("ad-started",(new Map).set("ad",i.s))),i.C.setAttribute("ad-active","true")}),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){i.C.removeAttribute("ad-active");var e=i.g.currentTime;i.B&&i.B>e&&(i.g.currentTime=i.B,i.B=null)}),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){i.G=e.getStreamData().adProgressData,i.s&&(i.s.h=i.G)}),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){i.j(new U("ad-first-quartile"))}),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){i.j(new U("ad-midpoint"))}),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){i.j(new U("ad-third-quartile"))}),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){i.j(new U("ad-complete")),i.j(new U("ad-stopped")),i.C.removeAttribute("ad-active"),i.s=null}),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){i.j(new U("ad-skipped")),i.j(new U("ad-stopped"))}),this.h.o(this.i,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){var t=e.getStreamData();e=[];for(var n=(t=c(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});i.J=e,i.j(new U("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function Dc(){J.call(this),this.g=this.h=null,this.j=new jc,this.i=navigator.language}function Oc(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof U){var n={};for(i in t){var r=t[i];r&&"object"==typeof r?"detail"==i&&(n[i]=r):i in Event||(n[i]=r)}return n}if(t instanceof Error){var i=new Set(["name","message","stack"]);for(n in t)i.add(n);for(n=(r=c(Object.getOwnPropertyNames(t))).next();!n.done;n=r.next())i.add(n.value);for(r={},n=(i=c(i)).next();!n.done;n=i.next())r[n=n.value]=t[n];i={__type__:"Error",contents:r}}else if(t instanceof TimeRanges)for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},r=(n=c(zs(t))).next();!r.done;r=n.next()){var s=(r=r.value).end;i.start.push(r.start),i.end.push(s)}else i=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return i}})}function $c(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var r,i=Error(n.message);for(r in n)i[r]=n[r];n=i}else n=t;return n})}(r=wc.prototype).getDuration=function(){return this.i.getDuration()},r.getMinSuggestedDuration=function(){return this.i.getMinSuggestedDuration()},r.getRemainingTime=function(){return this.g.getRemainingTime()},r.isPaused=function(){return this.j},r.isSkippable=function(){return 0<=this.i.getSkipTimeOffset()},r.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},r.canSkipNow=function(){return this.g.getAdSkippableState()},r.skip=function(){return this.g.skip()},r.pause=function(){return this.g.pause()},r.play=function(){return this.g.resume()},r.getVolume=function(){return this.g.getVolume()},r.setVolume=function(e){return this.g.setVolume(e)},r.isMuted=function(){return 0==this.g.getVolume()},r.isLinear=function(){return this.i.isLinear()},r.resize=function(e,t){this.g.resize(e,t,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},r.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},r.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},r.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},r.release=function(){this.g=this.i=null},B("shaka.ads.ClientSideAd",wc),wc.prototype.release=wc.prototype.release,wc.prototype.getPositionInSequence=wc.prototype.getPositionInSequence,wc.prototype.getSequenceLength=wc.prototype.getSequenceLength,wc.prototype.setMuted=wc.prototype.setMuted,wc.prototype.resize=wc.prototype.resize,wc.prototype.isLinear=wc.prototype.isLinear,wc.prototype.isMuted=wc.prototype.isMuted,wc.prototype.setVolume=wc.prototype.setVolume,wc.prototype.getVolume=wc.prototype.getVolume,wc.prototype.play=wc.prototype.play,wc.prototype.pause=wc.prototype.pause,wc.prototype.skip=wc.prototype.skip,wc.prototype.canSkipNow=wc.prototype.canSkipNow,wc.prototype.getTimeUntilSkippable=wc.prototype.getTimeUntilSkippable,wc.prototype.isSkippable=wc.prototype.isSkippable,wc.prototype.isPaused=wc.prototype.isPaused,wc.prototype.getRemainingTime=wc.prototype.getRemainingTime,wc.prototype.getMinSuggestedDuration=wc.prototype.getMinSuggestedDuration,wc.prototype.getDuration=wc.prototype.getDuration,Ac.prototype.stop=function(){this.i&&this.i.stop(),this.B&&vo(this.B)},Ac.prototype.release=function(){this.stop(),this.C&&this.C.disconnect(),this.h&&this.h.release(),this.i&&this.i.destroy(),this.l.destroy()},(r=Pc.prototype).getDuration=function(){return this.h?this.h.duration:-1},r.getMinSuggestedDuration=function(){return this.getDuration()},r.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},r.isPaused=function(){return this.g.paused},r.isSkippable=function(){return this.i.isSkippable()},r.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},r.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},r.skip=function(){this.g.currentTime+=this.getRemainingTime()},r.pause=function(){return this.g.pause()},r.play=function(){return this.g.play()},r.getVolume=function(){return this.g.volume},r.setVolume=function(e){this.g.volume=e},r.isMuted=function(){return this.g.muted},r.isLinear=function(){return!0},r.resize=function(){},r.setMuted=function(e){this.g.muted=e},r.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},r.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},r.release=function(){this.g=this.h=this.i=null},B("shaka.ads.ServerSideAd",Pc),Pc.prototype.release=Pc.prototype.release,Pc.prototype.getPositionInSequence=Pc.prototype.getPositionInSequence,Pc.prototype.getSequenceLength=Pc.prototype.getSequenceLength,Pc.prototype.setMuted=Pc.prototype.setMuted,Pc.prototype.resize=Pc.prototype.resize,Pc.prototype.isLinear=Pc.prototype.isLinear,Pc.prototype.isMuted=Pc.prototype.isMuted,Pc.prototype.setVolume=Pc.prototype.setVolume,Pc.prototype.getVolume=Pc.prototype.getVolume,Pc.prototype.play=Pc.prototype.play,Pc.prototype.pause=Pc.prototype.pause,Pc.prototype.skip=Pc.prototype.skip,Pc.prototype.canSkipNow=Pc.prototype.canSkipNow,Pc.prototype.getTimeUntilSkippable=Pc.prototype.getTimeUntilSkippable,Pc.prototype.isSkippable=Pc.prototype.isSkippable,Pc.prototype.isPaused=Pc.prototype.isPaused,Pc.prototype.getRemainingTime=Pc.prototype.getRemainingTime,Pc.prototype.getMinSuggestedDuration=Pc.prototype.getMinSuggestedDuration,Pc.prototype.getDuration=Pc.prototype.getDuration,Lc.prototype.stop=function(){this.I="",this.B=null,this.J=[]},Lc.prototype.release=function(){this.stop(),this.h&&this.h.release()},Lc.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.i.onTimedMetadata(t)}},g(Dc,J),(r=Dc.prototype).setLocale=function(e){this.i=e},r.initClientSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new ye(2,10,1e4);this.h&&this.h.release(),this.h=new Ac(t,n,this.i,function(e){if(e&&e.type)switch(e.type){case"ads-loaded":r.j.h.push(e.loadTime);break;case"ad-started":r.j.g++;break;case"ad-complete":r.j.i++;break;case"ad-skipped":r.j.j++}r.dispatchEvent(e)})},r.release=function(){this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),J.prototype.release.call(this)},r.onAssetUnload=function(){this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new U("ad-stopped")),this.j=new jc},r.requestClientSideAds=function(e){if(!this.h)throw new ye(1,10,10001);var t=this.h;t.G=Date.now()/1e3,t.l.requestAds(e)},r.initServerSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.dai)throw new ye(2,10,10002);this.g&&this.g.release(),this.g=new Lc(t,n,this.i,function(e){if(e&&e.type)switch(e.type){case"ads-loaded":r.j.h.push(e.loadTime);break;case"ad-started":r.j.g++;break;case"ad-complete":r.j.i++;break;case"ad-skipped":r.j.j++}r.dispatchEvent(e)})},r.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new ye(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;(n.mpt||n.mpv)&&W('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v3.3.2";var r=t;return(n=this.g).l?n=Promise.reject(new ye(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.L=!0),n.l=new Ot,n.i.requestStream(e),n.I=r||"",n.M=Date.now()/1e3,n=n.l),n},r.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new ye(1,10,10003);(e.mpt||e.mpv)&&W('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v3.3.2",this.g.i.replaceAdTagParameters(e)},r.getServerSideCuePoints=function(){if(!this.g)throw new ye(1,10,10003);return this.g.J},r.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},r.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.i.processMetadata(t,n,e.startTime)}},r.onHlsTimedMetadata=function(e,t){this.g&&this.g.i.processMetadata("ID3",e.data,t)},r.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},B("shaka.ads.AdManager",Dc),Dc.prototype.onCueMetadataChange=Dc.prototype.onCueMetadataChange,Dc.prototype.onHlsTimedMetadata=Dc.prototype.onHlsTimedMetadata,Dc.prototype.onDashTimedMetadata=Dc.prototype.onDashTimedMetadata,Dc.prototype.getStats=Dc.prototype.getStats,Dc.prototype.getServerSideCuePoints=Dc.prototype.getServerSideCuePoints,Dc.prototype.replaceServerSideAdTagParameters=Dc.prototype.replaceServerSideAdTagParameters,Dc.prototype.requestServerSideStream=Dc.prototype.requestServerSideStream,Dc.prototype.initServerSide=Dc.prototype.initServerSide,Dc.prototype.requestClientSideAds=Dc.prototype.requestClientSideAds,Dc.prototype.onAssetUnload=Dc.prototype.onAssetUnload,Dc.prototype.release=Dc.prototype.release,Dc.prototype.initClientSide=Dc.prototype.initClientSide,Dc.prototype.setLocale=Dc.prototype.setLocale,Dc.ADS_LOADED="ads-loaded",Dc.AD_STARTED="ad-started",Dc.AD_FIRST_QUARTILE="ad-first-quartile",Dc.AD_MIDPOINT="ad-midpoint",Dc.AD_THIRD_QUARTILE="ad-third-quartile",Dc.AD_COMPLETE="ad-complete",Dc.AD_STOPPED="ad-stopped",Dc.AD_SKIPPED="ad-skipped",Dc.AD_VOLUME_CHANGED="ad-volume-changed",Dc.AD_MUTED="ad-muted",Dc.AD_PAUSED="ad-paused",Dc.AD_RESUMED="ad-resumed",Dc.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Dc.CUEPOINTS_CHANGED="ad-cue-points-changed",Dc.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Dc.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Dc.AD_CLICKED="ad-clicked",Dc.AD_PROGRESS="ad-progress",Dc.AD_BUFFERING="ad-buffering",Dc.AD_IMPRESSION="ad-impression",Dc.AD_DURATION_CHANGED="ad-duration-changed",Dc.AD_CLOSED="ad-closed",Dc.AD_LOADED="ad-loaded",Dc.ALL_ADS_COMPLETED="all-ads-completed",Dc.AD_LINEAR_CHANGED="ad-linear-changed",Dc.AD_METADATA="ad-metadata",Dc.AD_RECOVERABLE_ERROR="ad-recoverable-error",Dc.AD_BREAK_READY="ad-break-ready",Dc.AD_INTERACTION="ad-interaction",Sc=function(){return new Dc};var Nc="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Fc="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Bc=["loop","playbackRate"],Uc=["pause","play"],Gc={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getConfiguration:4,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getTextTracks:2,getStats:5,getVariantTracks:2,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},Vc={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Hc=[["getConfiguration","configure"]],Wc=[["isTextTrackVisible","setTextTrackVisibility"]],qc="addChaptersTrack addTextTrack addTextTrackAsync cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),zc=["attach","detach","load","unload"];function Kc(e,t,n,r,i,s){var a=this;this.M=e,this.j=new mn(t),this.$=n,this.G=!1,this.C=r,this.L=i,this.S=s,this.h=this.s=!1,this.ea="",this.B=null,this.I=function(){return Jc(a)},this.J=function(e,t){var n=$c(t);switch(n.type){case"event":var r=n.targetName;n=G(n.event),a.C(r,n);break;case"update":for(var i in r=n.update)for(var s in n=a.g[i]||{},r[i])n[s]=r[i][s];a.G&&(a.$(),a.G=!1);break;case"asyncComplete":if(i=n.id,n=n.error,s=a.i[i],delete a.i[i],s)if(n){for(r in i=new ye(n.severity,n.category,n.code),n)i[r]=n[r];s.reject(i)}else s.resolve()}},this.g={video:{},player:{}},this.P=0,this.i={},this.l=null,su.add(this)}function Yc(e,t,n){iu=n,n.addUpdateListener(e.I),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.J),Jc(e),tu(e,{type:"init",initState:t,appData:e.B}),e.l.resolve()}function Qc(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new ye(2,8,n,t))}function Xc(e,t){var n=e.S();e.l=new Ot,e.G=!0,Yc(e,n,t)}function Zc(e){var t=iu;t.removeUpdateListener(e.I),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.J)}function Jc(e){var t=!!iu&&"connected"==iu.status;if(e.h&&!t){for(var n in e.L(),e.g)e.g[n]={};eu(e)}e.h=t,e.ea=t?iu.receiver.friendlyName:"",e.j.Ga()}function eu(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new ye(1,7,7e3))}}function tu(e,t){var n=Oc(t),r=iu;try{r.sendMessage("urn:x-cast:com.google.shaka.v2",n,function(){},z)}catch(e2){throw n=new ye(2,8,8005,e2),r=new U("error",(new Map).set("detail",n)),e.C("player",r),e.ic(),n}}(r=Kc.prototype).destroy=function(){return su.delete(this),eu(this),iu&&Zc(this),this.j&&(this.j.stop(),this.j=null),this.L=this.C=null,this.h=this.s=!1,this.J=this.I=this.l=this.i=this.g=this.B=null,Promise.resolve()},r.xa=function(){return this.h},r.Bd=function(){return this.ea},r.init=function(){if(this.M.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.s=!0,this.j.Ga();var t=new chrome.cast.SessionRequest(this.M);t=new chrome.cast.ApiConfig(t,function(e){for(var t=c(su),n=t.next();!n.done;n=t.next())Xc(n.value,e)},function(e){for(var t=c(su),n=t.next();!n.done;n=t.next())n=n.value,ru="available"==e,n.j.Ga()},"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),ru&&this.j.U(nu),(t=iu)&&t.status!=chrome.cast.SessionStatus.STOPPED?Xc(this,t):iu=null}else e.__onGCastApiAvailable||(e.__onGCastApiAvailable=au),e.__onGCastApiAvailable!=au&&W("A global Cast SDK hook is already installed! Shaka Player will be unable to receive a notification when the Cast SDK is ready.")},r.Ce=function(e){this.B=e,this.h&&tu(this,{type:"appData",appData:this.B})},r.cast=function(e){var t=this;return P(function(n){if(!t.s)throw new ye(1,8,8e3);if(!ru)throw new ye(1,8,8001);if(t.h)throw new ye(1,8,8002);return t.l=new Ot,chrome.cast.requestSession(function(n){return Yc(t,e,n)},function(e){return Qc(t,e)}),_(n,t.l,0)})},r.ic=function(){if(this.h){if(eu(this),iu){Zc(this);try{iu.stop(function(){},function(){})}catch(Oy){}iu=null}Jc(this)}},r.get=function(e,t){var n=this;if("video"==e){if(Uc.includes(t))return function(r){for(var i=[],s=0;s<arguments.length;++s)i[s]=arguments[s];return n.xf.apply(n,[e,t].concat(u(i)))}}else if("player"==e){if(Vc[t]&&!this.get("player","isLive")())return function(){};if(qc.includes(t))return function(r){for(var i=[],s=0;s<arguments.length;++s)i[s]=arguments[s];return n.xf.apply(n,[e,t].concat(u(i)))};if(zc.includes(t))return function(r){for(var i=[],s=0;s<arguments.length;++s)i[s]=arguments[s];return n.dh.apply(n,[e,t].concat(u(i)))};if(Gc[t])return function(){return n.g[e][t]}}return this.g[e][t]},r.set=function(e,t,n){this.g[e][t]=n,tu(this,{type:"set",targetName:e,property:t,value:n})},r.xf=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];tu(this,{type:"call",targetName:e,methodName:t,args:r})},r.dh=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];i=new Ot;var s=this.P.toString();this.P++,this.i[s]=i;try{tu(this,{type:"asyncCall",targetName:e,methodName:t,args:r,id:s})}catch(a){i.reject(a)}return i};var nu=.02,ru=!1,iu=null,su=new Set;function au(e){if(e)for(var t=(e=c(su)).next();!t.done;t=e.next())t.value.init()}function ou(e,t,n){J.call(this);var r=this;this.j=e,this.i=t,this.h=this.B=this.l=this.C=this.s=null,this.I=n,this.G=new Map,this.g=new Kc(n,function(){return uu(r)},function(){return du(r)},function(e,t){return mu(r,e,t)},function(){return hu(r)},function(){return cu(r)}),function(e){e.g.init(),e.h=new Or;for(var t=c(Nc),n=t.next();!n.done;n=t.next())e.h.o(e.j,n.value,function(t){e.g.xa()||(t=G(t),e.l.dispatchEvent(t))});for(var r in gc)e.h.o(e.i,gc[r],function(t){e.g.xa()||e.B.dispatchEvent(t)});for(var i in e.s={},t={},e.j)t.zc=i,Object.defineProperty(e.s,t.zc,{configurable:!1,enumerable:!0,get:function(t){return function(){return pu(e,t.zc)}}(t),set:function(t){return function(n){var r=t.zc;e.g.xa()?e.g.set("video",r,n):e.j[r]=n}}(t)}),t={zc:t.zc};e.C={},lu(e,function(t){Object.defineProperty(e.C,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.G.has(t)&&(t=e.G.get(t)),"addEventListener"==t)return function(t,n,r){return e.B.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.B.removeEventListener(t,n,r)};if("getMediaElement"==t)return function(){return e.s};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.i.Mc()};if("getDrmEngine"==t)return function(){return e.i.s};if("getAdManager"==t)return function(){return e.i.od()};if("setVideoContainer"==t)return function(t){return e.i.Ke(t)};if(e.g.xa()){if("getManifest"==t||"drmInfo"==t)return function(){return W(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return W(t+"() does not work while casting!"),Promise.resolve()}}return e.g.xa()&&0==Object.keys(e.g.g.video).length&&Gc[t]||!e.g.xa()?e.i[t].bind(e.i):e.g.get("player",t)}(e,t)}})}),function(e){var t=new Map;lu(e,function(n,r){if(t.has(r)){var i=t.get(r);n.length<i.length?e.G.set(n,i):e.G.set(i,n)}else t.set(r,n)})}(e),e.l=new J,e.l.hd=e.s,e.B=new J,e.B.hd=e.C}(this)}function lu(e,t){function n(e){return"constructor"!=e&&"function"==typeof r[e]&&!i.has(e)}var r=e.i,i=new Set;for(s in r)n(s)&&(i.add(s),t(s,r[s]));for(var s=Object.getPrototypeOf(r),a=Object.getPrototypeOf({});s&&s!=a;){for(var o=c(Object.getOwnPropertyNames(s)),l=o.next();!l.done;l=o.next())n(l=l.value)&&(i.add(l),t(l,r[l]));s=Object.getPrototypeOf(s)}}function cu(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.i.Yd(),startTime:null};e.j.pause();for(var n=c(Bc),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.j[r];for(e.j.ended||(t.startTime=e.j.currentTime),r=(n=c(Hc)).next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.i[i[0]](),t.player[r]=i}for(r=(n=c(Wc)).next();!r.done;r=n.next())r=(i=r.value)[1],i=e.i[i[0]](),t.playerAfterLoad[r]=i;return t}function uu(e){var t=new U("caststatuschanged");e.dispatchEvent(t)}function du(e){var t=new U(e.s.paused?"pause":"play");e.l.dispatchEvent(t)}function hu(e){for(var t=c(Hc),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.i[n](r)}var i=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var s=e.j.autoplay;r=null,n||(r=e.g.get("video","currentTime")),i&&(e.j.autoplay=!1,t=e.i.load(i,r));var a={};for(r=(n=c(Bc)).next();!r.done;r=n.next())r=r.value,a[r]=e.g.get("video",r);t.then(function(){if(e.j){for(var t=c(Bc),n=t.next();!n.done;n=t.next())n=n.value,e.j[n]=a[n];for(n=(t=c(Wc)).next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.i[n](r)}e.j.autoplay=s,i&&e.j.play()}},function(t){t=(new Map).set("detail",t),t=new U(Xl,t),e.i.dispatchEvent(t)})}function pu(e,t){if("addEventListener"==t)return function(t,n,r){return e.l.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.l.removeEventListener(t,n,r)};if(e.g.xa()&&0==Object.keys(e.g.g.video).length){var n=e.j[t];if("function"!=typeof n)return n}return e.g.xa()?e.g.get("video",t):("function"==typeof(n=e.j[t])&&(n=n.bind(e.j)),n)}function mu(e,t,n){e.g.xa()&&("video"==t?e.l.dispatchEvent(n):"player"==t&&e.B.dispatchEvent(n))}function fu(e,t,n,r){J.call(this);var i=this;this.g=e,this.i=t,this.h=new Or,this.P={video:e,player:t},this.J=n||function(){},this.S=r||function(e){return e},this.j=null,this.L=!1,this.B=!0,this.s=0,this.I=!1,this.G=!0,this.C=this.l=null,this.M=new mn(function(){yu(i)}),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return gu(e)},t.onSenderDisconnected=function(){return gu(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Cu(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Cu(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.C=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.C.onMessage=function(t){return function(e,t){var n=$c(t.data);switch(n.type){case"PLAY":e.g.play(),Su(e);break;case"PAUSE":e.g.pause(),Su(e);break;case"SEEK":var r=n.currentTime,i=n.resumeState;null!=r&&(e.g.currentTime=Number(r)),i&&"PLAYBACK_START"==i?(e.g.play(),Su(e)):i&&"PLAYBACK_PAUSE"==i&&(e.g.pause(),Su(e));break;case"STOP":e.i.Qe().then(function(){e.i&&Su(e)});break;case"GET_STATUS":Eu(e,Number(n.requestId));break;case"VOLUME":r=(i=n.volume).level,i=i.muted;var s=e.g.volume,a=e.g.muted;null!=r&&(e.g.volume=Number(r)),null!=i&&(e.g.muted=i),s==e.g.volume&&a==e.g.muted||Su(e);break;case"LOAD":e.s=0,e.I=!1,e.G=!1,r=n.media,i=n.currentTime,s=e.S(r.contentId),a=n.autoplay||!0,e.J(r.customData),a&&(e.g.autoplay=!0),e.i.load(s,i).then(function(){e.i&&Eu(e)}).catch(function(t){var r="LOAD_FAILED";7==t.category&&7e3==t.code&&(r="LOAD_CANCELLED"),Cu(e,{requestId:Number(n.requestId),type:r},e.C)});break;default:Cu(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.C)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=$c(t.data);switch(n.type){case"init":e.s=0,e.I=!1,e.G=!0,function(e,t,n){var r,i,s,a,o,l,c,u,d,h,p;P(function(m){switch(m.g){case 1:for(r in t.player)i=t.player[r],e.i[r](i);return e.J(n),s=e.g.autoplay,t.manifest?(e.g.autoplay=!1,b(m,5),_(m,e.i.load(t.manifest,t.startTime),7)):_(m,Promise.resolve(),3);case 7:S(m,3);break;case 5:return a=T(m),o=Xl,l=(new Map).set("detail",a),c=new U(o,l),e.i&&e.i.dispatchEvent(c),m.return();case 3:if(!e.i)return m.return();for(u in t.video)d=t.video[u],e.g[u]=d;for(h in t.playerAfterLoad)p=t.playerAfterLoad[h],e.i[h](p);e.g.autoplay=s,t.manifest&&(e.g.play(),Su(e)),E(m)}})}(e,n.initState,n.appData),yu(e);break;case"appData":e.J(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,"video"==r){var s=cast.receiver.CastReceiverManager.getInstance();if("volume"==i){s.setSystemVolumeLevel(n);break}if("muted"==i){s.setSystemVolumeMuted(n);break}}e.P[r][i]=n;break;case"call":(r=e.P[n.targetName])[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,"player"==r&&"load"==i&&(e.s=0,e.I=!1);var a=n.id,o=t.senderId;n=(s=e.P[r])[i].apply(s,n.args),"player"==r&&"load"==i&&(n=n.then(function(){e.G=!0})),n.then(function(){return bu(e,o,a,null)},function(t){return bu(e,o,a,t)})}}(e,t)},t.start();for(var n=(t=c(Nc)).next();!n.done;n=t.next())e.h.o(e.g,n.value,function(t){return vu(e,"video",t)});for(var r in gc)e.h.o(e.i,gc[r],function(t){return vu(e,"player",t)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.i.Fe(3840,2160):e.i.Fe(1920,1080),e.h.o(e.g,"loadeddata",function(){e.I=!0}),e.h.o(e.i,"loading",function(){e.B=!1,xu(e)}),e.h.o(e.g,"playing",function(){e.B=!1,xu(e)}),e.h.o(e.g,"pause",function(){xu(e)}),e.h.o(e.i,"unloading",function(){e.B=!0,xu(e)}),e.h.o(e.g,"ended",function(){new mn(function(){e.g&&e.g.ended&&(e.B=!0,xu(e))}).U(Ru)})}(this)}function gu(e){e.s=0,e.G=!0,e.L=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,xu(e)}function xu(e){var t;P(function(n){return 1==n.g?_(n,Promise.resolve(),2):e.i?(t=new U("caststatuschanged"),e.dispatchEvent(t),_u(e)||Su(e),void E(n)):n.return()})}function vu(e,t,n){e.i&&(yu(e),Cu(e,{type:"event",targetName:t,event:n},e.l))}function yu(e){e.M.U(Tu);for(var t={video:{},player:{}},n=c(Fc),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.i.W())for(var i in Vc)0==e.s%Vc[i]&&(t.player[i]=e.i[i]());for(var s in Gc)0==e.s%Gc[s]&&(t.player[s]=e.i[s]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.I&&(e.s+=1),Cu(e,{type:"update",update:t},e.l),_u(e)}function _u(e){return!(!e.G||!e.g.duration&&!e.i.W()||(Eu(e),e.G=!1,0))}function Eu(e,t){var n={contentId:e.i.Yd(),streamType:e.i.W()?"LIVE":"BUFFERED",contentType:""};e.i.W()||(n.duration=e.g.duration),e.j&&(n.metadata=e.j),Su(e,void 0===t?0:t,n)}function bu(e,t,n,r){e.i&&Cu(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function Cu(e,t,n,r){e.L&&(e=Oc(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Su(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.B?ju:e.i.Rc()?Au:e.g.paused?Iu:wu,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),Cu(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.C)}g(ou,J),(r=ou.prototype).destroy=function(e){return e&&this.g.ic(),this.h&&(this.h.release(),this.h=null),e=[],this.i&&(e.push(this.i.destroy()),this.i=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.C=this.s=this.j=null,J.prototype.release.call(this),Promise.all(e)},r.Kb=function(){return this.s},r.lc=function(){return this.C},r.Te=function(){return this.g.s&&ru},r.xa=function(){return this.g.xa()},r.Bd=function(){return this.g.Bd()},r.cast=function(){var e,t=this;return P(function(n){return 1==n.g?(e=cu(t),_(n,t.g.cast(e),2)):t.i?_(n,t.i.Qe(),0):n.return()})},r.Ce=function(e){this.g.Ce(e)},r.Hf=function(){!function(e){if(e.h){var t=e.S();chrome.cast.requestSession(function(n){return Yc(e,t,n)},function(t){return Qc(e,t)})}}(this.g)},r.ic=function(){this.g.ic()},r.Xe=function(e){var t=this;return P(function(n){if(1==n.g)return e==t.I?n.return():(t.I=e,t.g.ic(),_(n,t.g.destroy(),2));t.g=null,t.g=new Kc(e,function(){return uu(t)},function(){return du(t)},function(e,n){return mu(t,e,n)},function(){return hu(t)},function(){return cu(t)}),t.g.init(),E(n)})},B("shaka.cast.CastProxy",ou),ou.prototype.changeReceiverId=ou.prototype.Xe,ou.prototype.forceDisconnect=ou.prototype.ic,ou.prototype.suggestDisconnect=ou.prototype.Hf,ou.prototype.setAppData=ou.prototype.Ce,ou.prototype.cast=ou.prototype.cast,ou.prototype.receiverName=ou.prototype.Bd,ou.prototype.isCasting=ou.prototype.xa,ou.prototype.canCast=ou.prototype.Te,ou.prototype.getPlayer=ou.prototype.lc,ou.prototype.getVideo=ou.prototype.Kb,ou.prototype.destroy=ou.prototype.destroy,g(fu,J),(r=fu.prototype).isConnected=function(){return this.L},r.Mg=function(){return this.B},r.lh=function(e){this.j=e},r.Xf=function(){this.j=null},r.mh=function(e){this.j||(this.j={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.j.title=e},r.kh=function(e){this.j||(this.j={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.j.images=[{url:e}]},r.jh=function(e){this.j||(this.j={}),this.j.artist=e,this.j.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},r.destroy=function(){var e,t=this;return P(function(n){if(1==n.g)return t.h&&(t.h.release(),t.h=null),e=[],t.i&&(e.push(t.i.destroy()),t.i=null),t.M&&(t.M.stop(),t.M=null),t.g=null,t.P=null,t.J=null,t.L=!1,t.B=!0,t.l=null,t.C=null,J.prototype.release.call(t),_(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),E(n)})},B("shaka.cast.CastReceiver",fu),fu.prototype.destroy=fu.prototype.destroy,fu.prototype.setContentArtist=fu.prototype.jh,fu.prototype.setContentImage=fu.prototype.kh,fu.prototype.setContentTitle=fu.prototype.mh,fu.prototype.clearContentMetadata=fu.prototype.Xf,fu.prototype.setContentMetadata=fu.prototype.lh,fu.prototype.isIdle=fu.prototype.Mg,fu.prototype.isConnected=fu.prototype.isConnected;var Tu=.5,Ru=5,ju="IDLE",wu="PLAYING",Au="BUFFERING",Iu="PAUSED";function ku(e){var t=this;this.g=[],this.h=[],this.data=[],(new Ci).box("moov",Si).Z("pssh",function(e){if(!(1<e.version)){var n=It(e.reader.X,-12,e.size);if(t.data.push(n),t.g.push(Qt(e.reader.Lb(16))),0<e.version){n=e.reader.T();for(var r=(n=c(ne(n))).next();!r.done;r=n.next())r=Qt(e.reader.Lb(16)),t.h.push(r)}}}).parse(e)}function Mu(e,t){var n=e.length,r=t.length+16+n,i=new Uint8Array(r),s=kt(i),a=0;return s.setUint32(a,r),a+=4,s.setUint32(a,1886614376),a+=4,s.setUint32(a,0),a+=4,i.set(t,a),a+=t.length,s.setUint32(a,n),i.set(e,a+4),i}function Pu(e,t){var n=Du(e,t);return 1!=n.length?null:n[0]}function Lu(e,t,n){return 1!=(e=Ou(e,t,n)).length?null:e[0]}function Du(e,t){return Array.from(e.childNodes).filter(function(e){return e instanceof Element&&e.tagName==t})}function Ou(e,t,n){return Array.from(e.childNodes).filter(function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t})}function $u(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Nu(e,t,n){for(var r=(t=c(t)).next();!r.done;r=t.next())if(r=r.value,e.hasAttributeNS(r,n))return e.getAttributeNS(r,n);return null}function Fu(e){return Array.from(e.childNodes).every(Bu)?e.textContent.trim():null}function Bu(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function Uu(e,t,n,r){r=void 0===r?null:r;var i=null;return null!=(e=e.getAttribute(t))&&(i=n(e)),null==i?r:i}function Gu(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function Vu(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function Hu(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function Wu(e){return 0==(e=Number(e))%1?e:null}function qu(e){return 0==(e=Number(e))%1&&0<e?e:null}function zu(e){return 0==(e=Number(e))%1&&0<=e?e:null}function Ku(e){return e=Number(e),isNaN(e)?null:e}function Yu(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e}function Qu(e,t){var n=new DOMParser,r=null;try{r=n.parseFromString(e,"text/xml")}catch(e2){return null}return!(n=r.documentElement)||n.getElementsByTagName("parsererror").length||r.documentElement.tagName!=t?null:n}function Xu(e,t){try{return Qu(Ft(e),t)}catch(n){return null}}function Zu(e,t,n){var r=function(e){for(var t=[],n=(e=c(e)).next();!n.done;n=e.next())(n=ed(n.value))&&t.push(n);return t}(e),i=null;e=[];var s=[],a=new Set(r.map(function(e){return e.keyId}));if(a.delete(null),1<a.size)throw new ye(2,4,4010);if(t||(s=r.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Af||(i=e.init||i,!1)})).length&&(e=function(e,t,n){for(var r=[],i=(t=c(t)).next();!i.done;i=t.next()){var s,a=n[(i=i.value).Af];if(a)s=(s=Lu(i.node,"urn:microsoft:playready","pro"))?[{initData:Mu(s=Kt(s.textContent),new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149])),initDataType:"cenc",keyId:i.keyId}]:null,s=Ie(a,i.init||e||s),(a=nd.get(a))&&(s.licenseServerUri=a(i)),r.push(s)}return r}(i,s,n),0==e.length&&(e=[Ie("",i)])),r.length&&(t||!s.length))for(e=[],n=(t=c(Object.values(n))).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Ie(n,i));if(a=Array.from(a)[0]||null)for(n=(t=c(e)).next();!n.done;n=t.next())for(r=(n=c(n.value.initData)).next();!r.done;r=n.next())r.value.keyId=a;return{bf:a,Si:i,drmInfos:e,gf:!0}}function Ju(e){return(e=Lu(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=kt(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,1&i||i+e>n.byteLength){n=[];break e}var s=It(n,e,i);t.push({type:r,value:s}),e+=i}n=t}return n}(e=Kt(e.textContent)).filter(function(e){return e.type===td})[0])&&(e=Qu(e=Bt(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=c(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=c(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""}function ed(e){var t=e.getAttribute("schemeIdUri"),n=$u(e,"urn:mpeg:cenc:2013","default_KID"),r=Ou(e,"urn:mpeg:cenc:2013","pssh").map(Fu);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new ye(2,4,4009);var i=[];try{i=r.map(function(e){return{initDataType:"cenc",initData:Kt(e),keyId:null}})}catch(s){throw new ye(2,4,4007)}return{node:e,Af:t,keyId:n,init:0<i.length?i:null}}var td=1,nd=(new Map).set("com.widevine.alpha",function(e){return(e=Lu(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",Ju).set("com.microsoft.playready.recommendation",Ju).set("com.microsoft.playready.software",Ju).set("com.microsoft.playready.hardware",Ju);function rd(t,n,r,i,s){var a={RepresentationID:n,Number:r,Bandwidth:i,Time:s};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(t,n,r,i){if("$$"==t)return"$";var s=a[n];if(null==s)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&(s=Math.round(s)),i){case void 0:case"d":case"i":case"u":t=s.toString();break;case"o":t=s.toString(8);break;case"x":t=s.toString(16);break;case"X":t=s.toString(16).toUpperCase();break;default:t=s.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t})}function id(e,t){var n=sd(e,t,"timescale"),r=1;n&&(r=qu(n)||1);var i=sd(e,t,"duration");n=qu(i||""),"image"==e.O.contentType&&(n=Ku(i||"")),n&&(n/=r);var s=sd(e,t,"startNumber");i=Number(sd(e,t,"presentationTimeOffset"))||0;var a=zu(s||"");null!=s&&null!=a||(a=1);var o=ad(e,t,"SegmentTimeline");if(s=null,o){s=r;var l=e.ba.duration||1/0,u=Du(o,"S");o=[];for(var d=-i,h=(u=c(re(u))).next();!h.done;h=u.next()){var p=(h=h.value).item,m=h.next,f=Uu(p,"t",zu);h=Uu(p,"d",zu);var g=Uu(p,"r",Wu);if(null!=f&&(f-=i),!h)break;if(p=null!=f?f:d,0>(f=g||0))if(m){if(null==(m=Uu(m,"t",zu)))break;if(p>=m)break;f=Math.ceil((m-p)/h)-1}else{if(1/0==l)break;if(p/s>=l)break;f=Math.ceil((l*s-p)/h)-1}for(0<o.length&&p!=d&&(o[o.length-1].end=p/s),f=(m=c(ne(f+1))).next();!f.done;f=m.next())d=p+h,o.push({start:p/s,end:d/s,sh:p}),p=d}s=o}return{timescale:r,Fa:n,yc:a,xb:i/r||0,Re:i,timeline:s}}function sd(e,t,n){return[t(e.O),t(e.Ha),t(e.ya)].filter(je).map(function(e){return e.getAttribute(n)}).reduce(function(e,t){return e||t})}function ad(e,t,n){return[t(e.O),t(e.Ha),t(e.ya)].filter(je).map(function(e){return Pu(e,n)}).reduce(function(e,t){return e||t})}function od(e,t,n,r,i,s){if(s=void 0===s?0:s,$u(e,"http://www.w3.org/1999/xlink","href")){var a=function(e,t,n,r,i,s){for(var a=$u(e,"http://www.w3.org/1999/xlink","href"),o=$u(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=c(Array.from(e.attributes)),u=l.next();!u.done;u=l.next())"http://www.w3.org/1999/xlink"==(u=u.value).namespaceURI&&e.removeAttributeNS(u.namespaceURI,u.localName);if(5<=s)return gr(new ye(2,4,4028));if("onLoad"!=o)return gr(new ye(2,4,4027));var d=Ae([r],[a]);return i.request(0,jr(d,t)).va(function(r){if(!(r=Xu(r.data,e.tagName)))return gr(new ye(2,4,4001,a));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var o=r.childNodes[0];r.removeChild(o),e.appendChild(o)}for(o=(r=c(Array.from(r.attributes))).next();!o.done;o=r.next())e.setAttributeNode(o.value.cloneNode(!1));return od(e,t,n,d[0],i,s+1)})}(e,t,n,r,i,s);return n&&(a=a.va(void 0,function(){return od(e,t,n,r,i,s)})),a}a=[];for(var o=c(Array.from(e.childNodes)),l=o.next();!l.done;l=o.next())(l=l.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==$u(l,"http://www.w3.org/1999/xlink","href")?e.removeChild(l):"SegmentTimeline"!=l.tagName&&a.push(od(l,t,n,r,i,s)));return _r(a).va(function(){return e})}function ld(e,t,n,r,i,s,a){var o,l=(new Ci).Z("sidx",function(e){o=function(e,t,n,r,i,s,a){var o=[];a.reader.skip(4);var l=a.reader.T();if(0==l)throw new ye(2,3,3005);if(0==a.version)var u=a.reader.T(),d=a.reader.T();else u=a.reader.xc(),d=a.reader.xc();a.reader.skip(2);var h=a.reader.wc();for(e=e+a.size+d,h=c(ne(h)),d=h.next();!d.done;d=h.next()){var p=a.reader.T();d=(2147483648&p)>>>31,p&=2147483647;var m=a.reader.T();if(a.reader.skip(4),1==d)throw new ye(2,3,3006);o.push(new ua(u/l+n,(u+m)/l+n,function(){return s},e,e+p-1,t,n,r,i)),u+=m,e+=p}return a.parser.stop(),o}(t,r,i,s,a,n,e)});if(e&&l.parse(e),o)return o;throw new ye(2,3,3004)}function cd(e){this.h=kt(e),this.g=new _i(this.h,0)}function ud(e){var t=dd(e);if(7<t.length)throw new ye(2,3,3002);for(var n=0,r=(t=c(t)).next();!r.done;r=t.next())n=256*n+r.value;t=dd(e);e:{for(var i=(r=c(hd)).next();!i.done;i=r.next())if(jt(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.qa();else{if(8==t.length&&224&t[1])throw new ye(2,3,3001);r=0;for(var s=(i=c(re(t))).next();!s.done;s=i.next()){var a=(s=s.value).item;r=0==s.wa?a&(1<<8-t.length)-1:256*r+a}t=r}return t=e.g.qa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.qa(),r=kt(e.h,e.g.qa(),t),e.g.skip(t),new pd(n,r)}function dd(e){var t=e.g.qa(),n=e.g.ra();if(0==n)throw new ye(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),It(e.h,t,n)}cd.prototype.Ia=function(){return this.g.Ia()};var hd=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function pd(e,t){this.id=e,this.g=t}function md(e){if(8<e.g.byteLength)throw new ye(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new ye(2,3,3001);for(var t=0,n=c(ne(e.g.byteLength)),r=n.next();!r.done;r=n.next())t=256*t+(r=e.g.getUint8(r.value));return t}function fd(e){var t=new cd(e.g);if(179!=(e=ud(t)).id)throw new ye(2,3,3013);if(e=md(e),183!=(t=ud(t)).id)throw new ye(2,3,3012);t=new cd(t.g);for(var n=0;t.Ia();){var r=ud(t);if(241==r.id){n=md(r);break}}return{uh:e,bh:n}}function gd(e,t){var n=ad(e,t,"Initialization");if(!n)return null;var r=e.O.Va,i=n.getAttribute("sourceURL");i&&(r=Ae(e.O.Va,[i])),i=0;var s=null;return(n=Uu(n,"range",Hu))&&(i=n.start,s=n.end),new ca(function(){return r},i,s,bd(e))}function xd(e,t){var n=Number(sd(e,yd,"presentationTimeOffset"))||0,r=sd(e,yd,"timescale"),i=1;r&&(i=qu(r)||1);var s=n/i||0,a=gd(e,yd);!function(e,t){if(Ed(e,t),!_d(e))throw new ye(2,4,4002)}(e,a);var o=br(e);return{jc:function(){var e=ad(o,yd,"RepresentationIndex"),n=o.O.Va;return e&&(e=e.getAttribute("sourceURL"))&&(n=Ae(o.O.Va,[e])),e=_d(o),vd(o,t,a,n,e.start,e.end,s)}}}function vd(e,t,n,r,i,s,a){var o,l,c,u,d,h,p,m,f,g,x,v,y,E,b;return P(function(C){if(1==C.g)return o=e.presentationTimeline,l=!e.Fb||!e.ba.rf,c=e.ba.start,u=e.ba.duration,d=e.O.mimeType.split("/")[1],p=null,m=[(h=t)(r,i,s),"webm"==d?h(n.Ma(),n.Ka,n.Da):null],h=null,_(C,Promise.all(m),2);if(f=C.h,g=f[0],x=f[1]||null,y=c-a,E=c,b=u?c+u:1/0,"mp4"==d)var S=ld(g,i,r,n,y,E,b);else{if(440786851!=ud(S=new cd(x)).id)throw new ye(2,3,3008);var T=ud(S);if(408125543!=T.id)throw new ye(2,3,3009);S=T.g.byteOffset,T=new cd(T.g);for(var R=null;T.Ia();){var j=ud(T);if(357149030==j.id){R=j;break}}if(!R)throw new ye(2,3,3010);for(R=new cd(R.g),j=1e6,T=null;R.Ia();){var w=ud(R);if(2807729==w.id)j=md(w);else if(17545==w.id)if(4==w.g.byteLength)T=w.g.getFloat32(0);else{if(8!=w.g.byteLength)throw new ye(2,3,3003);T=w.g.getFloat64(0)}}if(null==T)throw new ye(2,3,3011);if(T*=R=j/1e9,475249515!=(j=ud(new cd(g))).id)throw new ye(2,3,3007);S=function(e,t,n,r,i,s,a,o,l){function c(){return i}var u=[];e=new cd(e.g);for(var d=null,h=null;e.Ia();){var p=ud(e);if(187==p.id){var m=fd(p);m&&(p=n*m.uh,m=t+m.bh,null!=d&&u.push(new ua(d+a,p+a,c,h,m-1,s,a,o,l)),d=p,h=m)}}return null!=d&&u.push(new ua(d+a,r+a,c,h,null,s,a,o,l)),u}(j,S,R,T,r,n,y,E,b)}return v=S,o.tc(v),p=new ka(v),l&&p.Hb(E,b,!0),C.return(p)})}function yd(e){return e.Xc}function _d(e){var t=ad(e,yd,"RepresentationIndex");return e=Hu((e=sd(e,yd,"indexRange"))||""),t&&(e=Uu(t,"range",Hu,e)),e}function Ed(e,t){var n=e.O.mimeType.split("/")[1];if(e.O.contentType!=Pe&&"mp4"!=n&&"webm"!=n)throw new ye(2,4,4006);if("webm"==n&&!t)throw new ye(2,4,4005)}function bd(e){var t=e.O;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.ud,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function Cd(e,t){var n=gd(e,Sd),r=function(e){var t=function(e){return[e.O.Mb,e.Ha.Mb,e.ya.Mb].filter(je).map(function(e){return Du(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){return t.getAttribute("indexRange")&&!e.nf&&(e.nf=!0),{Sg:t.getAttribute("media"),start:(t=Uu(t,"mediaRange",Hu,{start:0,end:null})).start,end:t.end}})}(e),n=(e=id(e,Sd)).yc;0==n&&(n=1);var r=0;return e.Fa?r=e.Fa*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Fa:e.Fa,startTime:r,yc:n,xb:e.xb,timeline:e.timeline,qc:t}}(e);if(!r.Fa&&!r.timeline&&1<r.qc.length)throw new ye(2,4,4002);if(!r.Fa&&!e.ba.duration&&!r.timeline&&1==r.qc.length)throw new ye(2,4,4002);if(r.timeline&&0==r.timeline.length)throw new ye(2,4,4002);var i=null,s=null;e.ya.id&&e.O.id&&(s=t[e.ya.id+","+e.O.id])&&(i=s.segmentIndex);var a=function(e,t,n,r,i){var s=r.qc.length;r.timeline&&r.timeline.length!=r.qc.length&&(s=Math.min(r.timeline.length,r.qc.length));for(var a=e-r.xb,o=t?e+t:1/0,l=[],u=r.startTime,d={},h=(s=c(ne(s))).next();!h.done;d={Nd:d.Nd},h=s.next()){h=h.value;var p=r.qc[h];d.Nd=Ae(n,[p.Sg]);var m=void 0;m=null!=r.Fa?u+r.Fa:r.timeline?r.timeline[h].end:u+t,l.push(new ua(e+u,e+m,function(e){return function(){return e.Nd}}(d),p.start,p.end,i,a,e,o)),u=m}return l}(e.ba.start,e.ba.duration,e.O.Va,r,n);return n=!i,i?i.sc(a,e.presentationTimeline.ub()):i=new ka(a),e.presentationTimeline.tc(a),e.Fb&&e.ba.rf||i.Hb(e.ba.start,e.ba.duration?e.ba.start+e.ba.duration:1/0,n),s&&(s.segmentIndex=i),{jc:function(){return i&&0!=i.R.length||i.rc(a),Promise.resolve(i)}}}function Sd(e){return e.Mb}function Td(e,t,n,r,i,s){var a=function(e){var t=sd(e,Rd,"initialization");if(!t)return null;var n=e.O.id,r=e.bandwidth||null,i=e.O.Va;return new ca(function(){var e=rd(t,n,null,r,null);return Ae(i,[e])},0,null,bd(e))}(e),o=function(e){var t=id(e,Rd),n=sd(e,Rd,"media");return e=sd(e,Rd,"index"),{Fa:t.Fa,timescale:t.timescale,yc:t.yc,xb:t.xb,Re:t.Re,timeline:t.timeline,je:n,Qc:e}}(e);!function(e){var t=e.Qc?1:0;if(t+=e.timeline?1:0,0==(t+=e.Fa?1:0))throw new ye(2,4,4002);if(1!=t&&(e.Qc&&(e.timeline=null),e.Fa=null),!e.Qc&&!e.je)throw new ye(2,4,4002)}(o);var l=br(e);if(o.Qc)return Ed(e,a),{jc:function(){var e=rd(o.Qc,l.O.id,null,l.bandwidth||null,null);return e=Ae(l.O.Va,[e]),vd(l,t,a,e,0,null,o.xb)}};if(o.Fa)return r||(e.presentationTimeline.le(o.Fa),e.presentationTimeline.me(e.ba.start)),{jc:function(){return function(e,t,n,r,i){function s(e){var n=(e-m)*p,i=n+t.xb,s=n+u;return n=s+p,(s=new ua(s,Math.min(n,o()),function(){var t=rd(g,v,e,x,i*f);return Ae(y,[t])},0,null,r,_,u,o())).l=n,s}function a(){var e=[Math.max(l.ub(),u),Math.min(l.Qb(),o())].map(function(e){return e-u});return[Math.ceil(e[0]/p),Math.ceil(e[1]/p)-1].map(function(e){return e+m})}function o(){var e=null!=d&&i[d]||h;return e?u+e:1/0}var l=e.presentationTimeline,u=e.ba.start,d=e.ya.id,h=e.ba.duration,p=t.Fa,m=t.yc,f=t.timescale,g=t.je,x=e.bandwidth||null,v=e.O.id,y=e.O.Va,_=u-t.xb,E=a();e=e.Fb?Math.max(E[0],E[1]-n+1):E[0],E=E[1],n=[];for(var b=e;b<=E;++b){var C=s(b);n.push(C)}var S=new ka(n);if(n=l.Qb()<o(),b=l.W(),n||b){var T=Math.max(e,E+1);S.Ed(p,function(){var e=l.ub();S.Ob(e);var t=c(a());t.next(),t=t.next().value;for(var n=[];T<=t;){var r=s(T);n.push(r),T++}return e>o()&&!n.length?null:n})}return Promise.resolve(S)}(l,o,i,a,s)}};var u=null;r=r=null,e.ya.id&&e.O.id&&(r=n[r=e.ya.id+","+e.O.id])&&(u=r.segmentIndex);var d=function(e,t,n){var r=e.ba.start,i=e.ba.duration,s=r-t.xb;i=i?r+i:1/0;for(var a=[],o={},l=c(re(t.timeline)),u=l.next();!u.done;o={Md:o.Md,Qd:o.Qd,Td:o.Td,Jd:o.Jd,Vd:o.Vd,Kd:o.Kd},u=l.next()){var d=(u=u.value).item,h=d.start,p=d.sh;d=d.end,o.Td=u.wa+t.yc,o.Vd=p+t.Re,o.Qd=e.O.id,o.Jd=e.bandwidth||null,o.Md=t.je,o.Kd=e.O.Va,a.push(new ua(r+h,r+d,function(e){return function(){var t=rd(e.Md,e.Qd,e.Td,e.Jd||null,e.Vd);return Ae(e.Kd,[t]).map(function(e){return e.toString()})}}(o),0,null,n,s,r,i))}return a}(l,o,a);n=e.ba.start;var h=e.ba.duration?e.ba.start+e.ba.duration:1/0,p=1/0!=h;return u?(p&&new ka(d).Hb(n,h,!0),u.sc(d,e.presentationTimeline.ub())):u=new ka(d),e.presentationTimeline.tc(d),p&&u.Hb(n,h),r&&e.Fb&&(r.segmentIndex=u),{jc:function(){return u&&0!=u.R.length||u.rc(d),Promise.resolve(u)}}}function Rd(e){return e.Yc}function jd(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.s=new Set}function wd(e,t,n){var r,i,s,a,o,l,u,d,h,p,m,f,g,x,v,y,b,C,S,T,R,j,w,A,I,k,M,L,D,O,$;return P(function(P){switch(P.g){case 1:if(r=Le,function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).kd),i=r.next();!i.done;i=r.next()){i=i.value;for(var s=!1,a=c(n),o=a.next();!o.done;o=a.next())o=o.value,i.id!=o.id&&i.channelsCount==o.channelsCount&&i.language==o.language&&i.bandwidth==o.bandwidth&&i.label==o.label&&i.codecs==o.codecs&&i.mimeType==o.mimeType&&it(i.roles,o.roles)&&i.audioSamplingRate==o.audioSamplingRate&&i.primary==o.primary&&(s=!0);s||n.push(i)}t.kd=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).Gd),i=r.next();!i.done;i=r.next()){i=i.value;for(var s=!1,a=c(n),o=a.next();!o.done;o=a.next())o=o.value,i.id!=o.id&&i.width==o.width&&i.frameRate==o.frameRate&&i.codecs==o.codecs&&i.mimeType==o.mimeType&&i.label==o.label&&it(i.roles,o.roles)&&Hr(i.closedCaptions,o.closedCaptions)&&i.bandwidth==o.bandwidth&&(s=!0);s||n.push(i)}t.Gd=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).textStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var s=!1,a=c(n),o=a.next();!o.done;o=a.next())o=o.value,i.id!=o.id&&i.language==o.language&&i.label==o.label&&i.codecs==o.codecs&&i.mimeType==o.mimeType&&it(i.roles,o.roles)&&(s=!0);s||n.push(i)}t.textStreams=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],r=c((t=t.value).imageStreams),i=r.next();!i.done;i=r.next()){i=i.value;for(var s=!1,a=c(n),o=a.next();!o.done;o=a.next())o=o.value,i.id!=o.id&&i.width==o.width&&i.codecs==o.codecs&&i.mimeType==o.mimeType&&(s=!0);s||n.push(i)}t.imageStreams=n}}(t),!n&&1==t.length){i=t[0],e.g=i.kd,e.h=i.Gd,e.j=i.textStreams,e.i=i.imageStreams,P.D(2);break}for(s=-1,a=c(re(t)),o=a.next();!o.done;o=a.next())l=o.value,u=l.wa,d=l.item,e.s.has(d.id)||(e.s.add(d.id),-1==s&&(s=u));if(-1==s)return P.return();for(h=t.map(function(e){return e.kd}),p=t.map(function(e){return e.Gd}),m=t.map(function(e){return e.textStreams}),f=t.map(function(e){return e.imageStreams}),g=c(m),x=g.next();!x.done;x=g.next())x.value.push(zd(r.ua));for(v=c(f),y=v.next();!y.done;y=v.next())y.value.push(zd(r.Gc));return _(P,Id(e.g,h,s,Ld,Od),3);case 3:return _(P,Id(e.h,p,s,Ld,Od),4);case 4:return _(P,Id(e.j,m,s,Ld,Od),5);case 5:return _(P,Id(e.i,f,s,Ld,Od),2);case 2:if(b=0,C=[],e.h.length&&e.g.length)for(A=c(e.g),I=A.next();!I.done;I=A.next())for(k=I.value,M=c(e.h),L=M.next();!L.done;L=M.next())D=L.value,O=si(k.drmInfos,D.drmInfos),k.drmInfos.length&&D.drmInfos.length&&!O.length||($=b++,C.push({id:$,language:k.language,primary:k.primary,audio:k,video:D,bandwidth:(k.bandwidth||0)+(D.bandwidth||0),drmInfos:O,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(S=e.h.concat(e.g),T=c(S),R=T.next();!R.done;R=T.next())j=R.value,w=b++,C.push({id:w,language:j.language,primary:j.primary,audio:j.type==r.Nb?j:null,video:j.type==r.mb?j:null,bandwidth:j.bandwidth||0,drmInfos:j.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=C,E(P)}})}function Ad(e){var t,n,r,i,s,a,o,l,u,d,h,p,m,f,g,x,v,y,E,b,C,S,T,R;return P(function(j){switch(j.g){case 1:if(t=Le,1==e.length)return j.return(e[0]);for(n=e.map(function(e){return e.filter(function(e){return e.type==t.Nb})}),r=e.map(function(e){return e.filter(function(e){return e.type==t.mb})}),i=e.map(function(e){return e.filter(function(e){return e.type==t.ua})}),s=e.map(function(e){return e.filter(function(e){return e.type==t.Gc})}),a=c(i),o=a.next();!o.done;o=a.next())o.value.push(qd(t.ua));for(l=c(s),u=l.next();!u.done;u=l.next())u.value.push(qd(t.Gc));return _(j,Id([],n,0,Dd,$d),2);case 2:return d=j.h,_(j,Id([],r,0,Dd,$d),3);case 3:return h=j.h,_(j,Id([],i,0,Dd,$d),4);case 4:return p=j.h,_(j,Id([],s,0,Dd,$d),5);case 5:if(m=j.h,f=0,h.length&&d.length)for(y=c(d),E=y.next();!E.done;E=y.next())for(b=E.value,C=c(h),S=C.next();!S.done;S=C.next())T=S.value,R=f++,T.variantIds.push(R),b.variantIds.push(R);else for(g=h.concat(d),x=c(g),v=x.next();!v.done;v=x.next())v.value.variantIds=[f++];return j.return(h.concat(d).concat(p).concat(m))}})}function Id(e,t,n,r,i){var s,a,o,l,u,d,h,p,m,f,g,x,v,y,E,b,C,S,T,R,j,w;return P(function(A){switch(A.g){case 1:for(s=Le,a=[],o=c(re(t)),l=o.next();!l.done;l=o.next())u=l.value,d=u.wa,h=u.item,d>=n?a.push(new Set(h)):a.push(new Set);p=c(e),m=p.next();case 2:if(m.done){A.D(4);break}return _(A,function(e,t,n,r,i){return P(function(s){return 1==s.g?(Nd(t,e),e.matchedStreams?e.segmentIndex?_(s,kd(e,n),2):s.D(2):s.return(!1)):(Pd(e,n,r,i),s.return(!0))})}(m.value,t,n,i,a),5);case 5:if(!A.h)throw new ye(2,4,4037);m=p.next(),A.D(2);break;case 4:for(f=c(a),g=f.next();!g.done;g=f.next())for(x=g.value,v=c(x),y=v.next();!y.done;y=v.next())E=y.value,(b=Md(E,t,r,i,a))&&e.push(b);for(C=c(a),g=C.next();!g.done;g=C.next())for(S=g.value,T={},R=c(S),y=R.next();!y.done;T={Cb:T.Cb},y=R.next())if(T.Cb=y.value,j=T.Cb.type==s.ua&&!T.Cb.language,w=T.Cb.type==s.Gc&&!T.Cb.tilesLayout,!j&&!w&&e.some(function(e){return function(t){return t.mimeType==e.Cb.mimeType&&sn(t.codecs)==sn(e.Cb.codecs)}}(T)))throw new ye(2,4,4037);return A.return(e)}})}function kd(e,t){var n,r,i,s,a,o,l,u,d,h;return P(function(p){if(1==p.g){for(n=[],r=e.matchedStreams,i=c(r),s=i.next();!s.done;s=i.next())a=s.value,n.push(a.createSegmentIndex()),a.trickModeVideo&&!a.trickModeVideo.segmentIndex&&n.push(a.trickModeVideo.createSegmentIndex());return _(p,Promise.all(n),2)}if(e.segmentIndex instanceof La)for(o=c(re(r)),l=o.next();!l.done;l=o.next())u=l.value,d=u.wa,(h=u.item).segmentIndex&&d>=t&&e.segmentIndex.j.push(h.segmentIndex);E(p)})}function Md(e,t,n,r,i){var s=n(e);return Nd(t,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return P(function(e){return s.segmentIndex?e.D(0):(s.segmentIndex=new La,_(e,kd(s,0),0))})}),s.matchedStreams?(Pd(s,0,r,i),s):null}function Pd(e,t,n,r){for(var i=c(re(e.matchedStreams)),s=i.next();!s.done;s=i.next()){var a=s.value;if(s=a.wa,a=a.item,s>=t){n(e,a);var o=!0;"audio"==e.type&&0==Ge(e.language,a.language)&&(o=!1),o&&r[s].delete(a)}}}function Ld(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=c(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Dd(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Od(e,t){var n,r;e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=(n=e.keyIds,r=t.keyIds,new Set([].concat(u(n),u(r)))),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var i=si(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new ye(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var s=(i=c(t.closedCaptions)).next();!s.done;s=i.next()){var a=c(s.value);s=a.next().value,a=a.next().value,e.closedCaptions.set(s,a)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Ld(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Od(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Od(e.trickModeVideo,t)}function $d(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(u(e.keyIds),u(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,u(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var r=(n=c(t.closedCaptions)).next();!r.done;r=n.next()){var i=c(r.value);r=i.next().value,i=i.next().value,e.closedCaptions.set(r,i)}}}function Nd(e,t){for(var n=[],r=c(e),i=r.next();!i.done;i=r.next()){for(var s=t,a={audio:Fd,video:Fd,text:Bd,image:Ud}[s.type],o={audio:Gd,video:Vd,text:Hd,image:Wd}[s.type],l=null,u=(i=c(i.value)).next();!u.done;u=i.next())!a(s,u=u.value)||l&&!o(s,l,u)||(l=u);if(!(s=l))return;n.push(s)}t.matchedStreams=n}function Fd(e,t){var n;if(!(n=t.mimeType!=e.mimeType||sn(t.codecs)!=sn(e.codecs))&&(n=e.drmInfos)){n=e.drmInfos;var r=t.drmInfos;n=!(!n.length||!r.length||0<si(n,r).length)}return!n}function Bd(e,t){return!!e.language&&(!t.language||0!=Ge(e.language,t.language)&&t.kind==e.kind)}function Ud(e){return!!e.tilesLayout}function Gd(e,t,n){if(e.id==n.id)return!0;var r=Ge(e.language,t.language),i=Ge(e.language,n.language);return i>r||!(i<r)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&(e.roles.length?(r=t.roles.filter(function(t){return e.roles.includes(t)}),(i=n.roles.filter(function(t){return e.roles.includes(t)})).length>r.length||!(i.length<r.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&((r=Kd(e.channelsCount,t.channelsCount,n.channelsCount))==Qd||r!=Zd&&((r=Kd(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==Qd||r!=Zd&&!(!e.bandwidth||Yd(e.bandwidth,t.bandwidth,n.bandwidth)!=Qd)))))}function Vd(e,t,n){if(e.id==n.id)return!0;var r=Kd(e.width*e.height,t.width*t.height,n.width*n.height);if(r==Qd)return!0;if(r==Zd)return!1;if(e.frameRate){if((r=Kd(e.frameRate,t.frameRate,n.frameRate))==Qd)return!0;if(r==Zd)return!1}return!(!e.bandwidth||Yd(e.bandwidth,t.bandwidth,n.bandwidth)!=Qd)}function Hd(e,t,n){if(e.id==n.id)return!0;var r=Ge(e.language,t.language),i=Ge(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(r=t.roles.filter(function(t){return e.roles.includes(t)}),(i=n.roles.filter(function(t){return e.roles.includes(t)})).length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Wd(e,t,n){return e.id==n.id||Kd(e.width*e.height,t.width*t.height,n.width*n.height)==Qd}function qd(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function zd(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ka([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Kd(e,t,n){if(t==e&&e!=n)return Zd;if(n==e&&e!=t)return Qd;if(t>e){if(n<=e||n-e<t-e)return Qd;if(n-e>t-e)return Zd}else{if(n>e)return Zd;if(e-n<e-t)return Qd;if(e-n>e-t)return Zd}return Xd}function Yd(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?Qd:t<e?Zd:Xd}jd.prototype.release=function(){for(var e=c(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var Qd=1,Xd=0,Zd=-1;function Jd(){var e=this;this.F=this.m=null,this.h=[],this.H=null,this.G=1,this.yb={},this.L={},this.g=new jd,this.C=0,this.I=new Ze(5),this.B=new mn(function(){e.Tc()}),this.i=new Cr,this.j=null,this.J=[],this.l=1/0,this.s=!1}function eh(e){var t,n,r,i,s,a,o;return P(function(l){return 1==l.g?(t=jr(e.h,e.m.retryParameters),n=e.F.networkingEngine,e.F.modifyManifestRequest(t,{format:"d"}),r=Date.now(),i=n.request(0,t),Sr(e.i,i),_(l,i.promise,2)):3!=l.g?(s=l.h,e.F?(s.uri&&!e.h.includes(s.uri)&&e.h.unshift(s.uri),_(l,function(e,t,n){var r,i,s,a;return P(function(o){if(1==o.g){if(!(r=Xu(t,"MPD")))throw new ye(2,4,4001,n);return e.m.dash.disableXlinkProcessing?o.return(th(e,r,n)):(i=e.m.dash.xlinkFailGracefully,s=od(r,e.m.retryParameters,i,n,e.F.networkingEngine),Sr(e.i,s),_(o,s.promise,2))}return a=o.h,o.return(th(e,a,n))})}(e,s.data,s.uri),3)):l.return(0)):(a=Date.now(),o=(a-r)/1e3,Je(e.I,1,o),l.return(o))})}function th(e,t,n){var r,i,s,a,o,l,u,d,h,p,m,f,g,x,v,y,C,R,j,w,A,I,k,M,L,D,O,$,N;return P(function(F){switch(F.g){case 1:if((r=e.m.dash.manifestPreprocessor)&&r(t),i=[n],0<(s=Du(t,"Location").map(Fu).filter(je)).length&&(a=Ae(i,s),i=e.h=a),o=Du(t,"BaseURL"),l=o.map(Fu),u=Ae(i,l),d=0,o&&o.length&&(d=Uu(o[0],"availabilityTimeOffset",Ku)||0),h=e.m.dash.ignoreMinBufferTime,p=0,h||(p=Uu(t,"minBufferTime",Vu)||0),e.C=Uu(t,"minimumUpdatePeriod",Vu,-1),m=Uu(t,"availabilityStartTime",Gu),f=Uu(t,"timeShiftBufferDepth",Vu),g=e.m.dash.ignoreSuggestedPresentationDelay,x=null,g||(x=Uu(t,"suggestedPresentationDelay",Vu)),v=e.m.dash.ignoreMaxSegmentDuration,y=null,v||(y=Uu(t,"maxSegmentDuration",Vu)),C=t.getAttribute("type")||"static",e.H)for(R=e.H.presentationTimeline,j=c(Object.values(e.yb)),w=j.next();!w.done;w=j.next())(A=w.value).segmentIndex&&A.segmentIndex.Ob(R.ub());else I=e.m.defaultPresentationDelay||1.5*p,R=new da(m,null!=x?x:I,e.m.dash.autoCorrectDrift);return R.Zc("static"==C),R.W()&&!isNaN(e.m.availabilityWindowOverride)&&(f=e.m.availabilityWindowOverride),null==f&&(f=1/0),R.Ie(f),k=t.getAttribute("profiles")||"",M={Fb:"static"!=C,presentationTimeline:R,ya:null,ba:null,Ha:null,O:null,bandwidth:0,nf:!1,hc:d,profiles:k.split(",")},L=function(e,t,n,r){var i=Uu(r,"mediaPresentationDuration",Vu),s=[],a=0;r=Du(r,"Period");for(var o=c(re(r)),l=o.next();!l.done;l=o.next()){var u=l.value;l=u.wa;var d=u.item,h=u.next;u=Uu(d,"start",Vu,a);var p=d.id,m=Uu(d,"duration",Vu),f=null;if(h){var g=Uu(h,"start",Vu);null!=g&&(f=g-u)}else null!=i&&(f=i-u);if(null==f&&(f=m),!(null!==e.j&&null!==p&&null!==u&&u<e.j)||e.J.includes(p)||l+1==r.length){if(null!==u&&(null===e.j||u>e.j)&&(e.j=u),a=nh(e,t,n,{start:u,duration:f,node:d,rf:null==f||!h}),s.push(a),t.ya.id&&f&&(e.L[t.ya.id]=f),null==f){a=null;break}a=u+f}}return e.J=s.map(function(e){return e.id}),null!=i?{periods:s,duration:i,df:!1}:{periods:s,duration:a,df:!0}}(e,M,u,t),D=L.duration,O=L.periods,"static"!=C&&L.df||R.ib(D||1/0),e.l&&!e.s&&e.F.isAutoLowLatencyMode()&&(e.F.enableLowLatencyMode(),e.s=e.F.isLowLatencyMode()),e.s?R.Bf(e.l):e.l&&W("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),R.le(y||1),_(F,wd(e.g,O,M.Fb),2);case 2:if(e.H){e.H.variants=e.g.l,e.H.textStreams=e.g.j.slice(),e.H.imageStreams=e.g.i,e.F.filter(e.H),F.D(3);break}if(e.H={presentationTimeline:R,variants:e.g.l,textStreams:e.g.j.slice(),imageStreams:e.g.i,offlineSessionIds:[],minBufferTime:p||0},!R.Kf()){F.D(3);break}return $=Du(t,"UTCTiming"),_(F,function(e,t,n){var r,i,s,a,o,l,u,d;return P(function(h){switch(h.g){case 1:r=n.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}),i=e.m.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),s=c(r),a=s.next();case 2:if(a.done){h.D(4);break}switch(o=a.value,b(h,5),l=o.scheme,u=o.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.D(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.D(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(u),h.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":W("NTP UTCTiming scheme is not supported");break;default:W("Unrecognized scheme in UTCTiming element",l)}h.D(9);break;case 7:return _(h,ah(e,t,u,"HEAD"),10);case 10:return h.return(h.h);case 8:return _(h,ah(e,t,u,"GET"),11);case 11:return h.return(h.h);case 9:S(h,3);break;case 5:T(h);case 3:a=s.next(),h.D(2);break;case 4:return W("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}})}(e,u,$),5);case 5:if(N=F.h,!e.F)return F.return();R.Cf(N);case 3:e.F.makeTextStreamsForClosedCaptions(e.H),E(F)}})}function nh(e,t,n,r){t.ya=sh(r.node,null,n),t.ba=r,t.ya.hc=t.hc,t.ya.id||(t.ya.id="__shaka_period_"+r.start);var i=Du(r.node,"EventStream");n=t.presentationTimeline.ub();for(var s=(i=c(i)).next();!s.done;s=i.next())oh(e,r.start,r.duration,s.value,n);if(n=Du(r.node,"AdaptationSet").map(function(n){return function(e,t,n){function r(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.Ha=sh(n,t.ya,null);var i,s=!1,a=Du(n,"Role"),o=a.map(function(e){return e.getAttribute("value")}).filter(je),l=void 0,d=t.Ha.contentType==Pe;d&&(l="subtitle");for(var h=(a=c(a)).next();!h.done;h=a.next()){var p=(h=h.value).getAttribute("schemeIdUri");if(null==p||"urn:mpeg:dash:role:2011"==p)switch(h=h.getAttribute("value"),h){case"main":s=!0;break;case"caption":case"subtitle":l=h}}p=Du(n,"EssentialProperty"),a=null,h=!1;for(var m=(p=c(p)).next();!m.done;m=p.next()){var f=(m=m.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==f?a=m.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==f?i=r(parseInt(m.getAttribute("value"),10)):h=!0}for(p=c(p=Du(n,"SupplementalProperty")),m=p.next();!m.done;m=p.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(m=m.value).getAttribute("schemeIdUri")&&(i=r(parseInt(m.getAttribute("value"),10)));p=Du(n,"Accessibility");var g=new Map;for(p=c(p),m=p.next();!m.done;m=p.next())if(f=m.value,m=f.getAttribute("schemeIdUri"),f=f.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==m)if(m=1,null!=f)for(var x=c(f=f.split(";")),v=x.next();!v.done;v=x.next()){var y=v.value,b=v=void 0;y.includes("=")?(v=(y=y.split("="))[0].startsWith("CC")?y[0]:"CC"+y[0],b=y[1]||"und"):(v="CC"+m,2==f.length?m+=2:m++,b=y),g.set(v,Be(b))}else g.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==m)if(m=1,null!=f)for(f=c(f.split(";")),v=f.next();!v.done;v=f.next())v=v.value,y=x=void 0,v.includes("=")?(v=v.split("="),x="svc"+v[0],y=v[1].split(",")[0].split(":").pop()):(x="svc"+m,m++,y=v),g.set(x,Be(y));else g.set("svc1","und");else"urn:mpeg:dash:role:2011"==m&&null!=f&&(o.push(f),"captions"==f&&(l="caption"));if(h)return null;var C=Zu(h=Du(n,"ContentProtection"),e.m.dash.ignoreDrmInfo,e.m.dash.keySystemsByURI),S=Be(n.getAttribute("lang")||"und"),T=n.getAttribute("label");if((h=Du(n,"Label"))&&h.length&&((h=h[0]).textContent&&(T=h.textContent)),h=Du(n,"Representation"),n=h.map(function(n){return(n=function(e,t,n,r,i,s,a,o,l,c){if(t.O=sh(c,t.Ha,null),e.l=Math.min(e.l,t.O.hc),!function(e){var t=e.Xc?1:0;return t+=e.Mb?1:0,0==(t+=e.Yc?1:0)?e.contentType==Pe||"application"==e.contentType:(1!=t&&(e.Xc&&(e.Mb=null),e.Yc=null),!0)}(t.O))return null;var u=t.ba.start;t.bandwidth=Uu(c,"bandwidth",qu)||0;var d=t.O.contentType,h=d==Pe||"application"==d;d="image"==d;try{var p=function(t,n,r){return function(e,t,n,r){var i,s,a,o,l;return P(function(c){return 1==c.g?(i=kr,s=qa(t,n,r,e.m.retryParameters),a=e.F.networkingEngine,o=a.request(i,s),Sr(e.i,o),_(c,o.promise,2)):(l=c.h,c.return(l.data))})}(e,t,n,r)};if(t.O.Xc)var m=xd(t,p);else if(t.O.Mb)m=Cd(t,e.yb);else if(t.O.Yc)m=Td(t,p,e.yb,!!e.H,e.m.dash.initialSegmentLimit,e.L);else{var f=t.O.Va,g=t.ba.duration||0;m={jc:function(){return Promise.resolve(Ma(u,g,f))}}}}catch(T){if((h||d)&&4002==T.code)return null;throw T}p=function(e,t,n,r){var i=Zu(e,n,r);if(t.gf)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.gf=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(e){return i.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==t.drmInfos.length))throw new ye(2,4,4008);return i.bf||t.bf}(p=Du(c,"ContentProtection"),n,e.m.dash.ignoreDrmInfo,e.m.dash.keySystemsByURI),p=new Set(p?[p]:[]);var x=!1;Du(c,"SupplementalProperty").some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")})&&(t.O.mimeType="audio/eac3-joc",x=!0);var v,y,b=!1;if(h&&(b=o.includes("forced_subtitle")||o.includes("forced-subtitle")),d&&((c=Du(c,"EssentialProperty").find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))}))&&(v=c.getAttribute("value")),!v))return null;c=t.O.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(y="PQ");var C=t.O.id?t.ya.id+","+t.O.id:"",S={id:e.G++,originalId:t.O.id,createSegmentIndex:function(){var n,r;return P(function(i){if(1==i.g)return(n=C&&t.Fb&&e.yb[C]?e.yb[C]:S).segmentIndex?i.D(0):(r=n,_(i,m.jc(),3));r.segmentIndex=i.h,E(i)})},closeSegmentIndex:function(){S.segmentIndex&&(S.segmentIndex.release(),S.segmentIndex=null)},segmentIndex:null,mimeType:t.O.mimeType,codecs:t.O.codecs,frameRate:t.O.frameRate,pixelAspectRatio:t.O.pixelAspectRatio,bandwidth:t.bandwidth,width:t.O.width,height:t.O.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:p,language:i,label:s,type:t.Ha.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:t.O.emsgSchemeIdUris,roles:o,forced:b,channelsCount:t.O.ud,audioSamplingRate:t.O.audioSamplingRate,spatialAudio:x,closedCaptions:l,hdr:y,tilesLayout:v,matchedStreams:[]};return C&&t.Fb&&!e.yb[C]&&(e.yb[C]=S),S}(e,t,C,l,S,T,s,o,g,n))&&(n.hdr=n.hdr||i),n}).filter(function(e){return!!e}),0==n.length){if(a="image"==t.Ha.contentType,e.m.dash.ignoreEmptyAdaptationSet||d||a)return null;throw new ye(2,4,4003)}if(!t.Ha.contentType||"application"==t.Ha.contentType)for(t.Ha.contentType=lh(n[0].mimeType,n[0].codecs),d=c(n),p=d.next();!p.done;p=d.next())p.value.type=t.Ha.contentType;for(d=c(n),p=d.next();!p.done;p=d.next())for(p=p.value,m=c(C.drmInfos),f=m.next();!f.done;f=m.next())(f=f.value).keyIds=f.keyIds&&p.keyIds?new Set([].concat(u(f.keyIds),u(p.keyIds))):f.keyIds||p.keyIds;return d=h.map(function(e){return e.getAttribute("id")}).filter(je),{id:t.Ha.id||"__fake__"+e.G++,contentType:t.Ha.contentType,language:S,Ti:s,streams:n,drmInfos:C.drmInfos,Oe:a,fh:d}}(e,t,n)}).filter(je),t.Fb){for(r=[],s=(i=c(n)).next();!s.done;s=i.next())for(var a=(s=c(s.value.fh)).next();!a.done;a=s.next())r.push(a.value);if(r.length!=new Set(r).size)throw new ye(2,4,4018)}for(r=n.filter(function(e){return!e.Oe}),i=(n=c(n=n.filter(function(e){return e.Oe}))).next();!i.done;i=n.next()){s=(i=i.value).Oe.split(" ");for(var o=(a=c(r)).next();!o.done;o=a.next()){var l=o.value;if(s.includes(l.id)){o={};for(var d=(l=c(l.streams)).next();!d.done;o={gd:o.gd},d=l.next())o.gd=d.value,o.gd.trickModeVideo=i.streams.find(function(e){return function(t){return sn(e.gd.codecs)==sn(t.codecs)}}(o))}}}if(i=e.m.disableAudio?[]:rh(r,"audio"),a=e.m.disableVideo?[]:rh(r,"video"),s=e.m.disableText?[]:rh(r,Pe),n=e.m.disableThumbnails?[]:rh(r,"image"),!a.length&&!i.length)throw new ye(2,4,4004);for(r=[],o=(i=c(i)).next();!o.done;o=i.next())r.push.apply(r,u(o.value.streams));for(i=[],o=(a=c(a)).next();!o.done;o=a.next())i.push.apply(i,u(o.value.streams));for(a=[],o=(s=c(s)).next();!o.done;o=s.next())a.push.apply(a,u(o.value.streams));for(s=[],o=(n=c(n)).next();!o.done;o=n.next())s.push.apply(s,u(o.value.streams));return{id:t.ya.id,kd:r,Gd:i,textStreams:a,imageStreams:s}}function rh(e,t){return e.filter(function(e){return e.contentType==t})}function ih(e,t){0>e.C||e.B.U(Math.max(3,e.C-t,et(e.I)))}function sh(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,ud:null,audioSamplingRate:null,hc:0},n=n||t.Va;for(var r=Du(e,"BaseURL"),i=r.map(Fu),s=e.getAttribute("contentType")||t.contentType,a=e.getAttribute("mimeType")||t.mimeType,o=e.getAttribute("codecs")||t.codecs,l=Uu(e,"frameRate",Yu)||t.frameRate,u=e.getAttribute("sar")||t.pixelAspectRatio,d=Du(e,"InbandEventStream"),h=t.emsgSchemeIdUris.slice(),p=(d=c(d)).next();!p.done;p=d.next())p=p.value.getAttribute("schemeIdUri"),h.includes(p)||h.push(p);d=function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(d=Du(e,"AudioChannelConfiguration"))||t.ud,p=Uu(e,"audioSamplingRate",zu)||t.audioSamplingRate,s||(s=lh(a,o));var m=Pu(e,"SegmentBase"),f=Pu(e,"SegmentTemplate"),g=m&&Uu(m,"availabilityTimeOffset",Ku)||0,x=f&&Uu(f,"availabilityTimeOffset",Ku)||0;return r=r&&r.length&&Uu(r[0],"availabilityTimeOffset",Ku)||0,r=t.hc+r+g+x,{Va:Ae(n,i),Xc:m||t.Xc,Mb:Pu(e,"SegmentList")||t.Mb,Yc:f||t.Yc,width:Uu(e,"width",zu)||t.width,height:Uu(e,"height",zu)||t.height,contentType:s,mimeType:a,codecs:o,frameRate:l,pixelAspectRatio:u,emsgSchemeIdUris:h,id:e.getAttribute("id"),ud:d,audioSamplingRate:p,hc:r}}function ah(e,t,n,r){var i,s,a,o,l,c;return P(function(u){if(1==u.g)return i=Ae(t,[n]),(s=jr(i,e.m.retryParameters)).method=r,a=e.F.networkingEngine.request(4,s),Sr(e.i,a),_(u,a.promise,2);if(o=u.h,"HEAD"==r){if(!o.headers||!o.headers.date)return u.return(0);l=o.headers.date}else l=Ft(o.data);return c=Date.parse(l),isNaN(c)?u.return(0):u.return(c-Date.now())})}function oh(e,t,n,r,i){for(var s=r.getAttribute("schemeIdUri")||"",a=r.getAttribute("value")||"",o=Uu(r,"timescale",zu)||1,l=(r=c(Du(r,"Event"))).next();!l.done;l=r.next()){var u=Uu(l=l.value,"presentationTime",zu)||0,d=Uu(l,"duration",zu)||0;d=(u=u/o+t)+d/o,null!=n&&(u=Math.min(u,t+n),d=Math.min(d,t+n)),d<i||(l={schemeIdUri:s,value:a,startTime:u,endTime:d,id:l.getAttribute("id")||"",eventElement:l},e.F.onTimelineRegionAdded(l))}}function lh(e,t){return ln(nn(e,t))?Pe:e.split("/")[0]}function ch(e,t,n,r){this.g=e,this.type=t,this.aa=n,this.segments=r||null}function uh(e,t,n,r){this.id=e,this.name=t,this.g=n,this.value=void 0===r?null:r}function dh(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function hh(e,t){var n=e.getAttribute(t);if(!n)throw new ye(2,4,4023,t);return n.value}function ph(e,t,n){n=void 0===n?[]:n,this.aa=t,this.g=e,this.h=n}function mh(e,t){this.name=e,this.value=t}function fh(e,t){return e.filter(function(e){return e.name==t})}function gh(e,t){return e.filter(function(e){return hh(e,"TYPE")==t})}function xh(e,t){var n=fh(e,t);return n.length?n[0]:null}function vh(e,t,n){return n=void 0===n?0:n,(e=xh(e,t))?Number(e.value):n}function yh(e){this.h=e,this.g=0}function _h(e){Eh(e,/[ \t]+/gm)}function Eh(e,t){t.lastIndex=e.g;var n=t.exec(e.h);return n=null==n?null:{position:n.index,length:n[0].length,results:n},e.g==e.h.length||null==n||n.position!=e.g?null:(e.g+=n.length,n.results)}function bh(e){return e.g==e.h.length?null:(e=Eh(e,/[^ \t\n]*/gm))?e[0]:null}function Ch(){this.g=0}function Sh(e,t,n){var r=(t=(t=Ft(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new ye(2,4,4015);t=0;for(var i=!0,s=c(r),a=s.next();!a.done;a=s.next())if(a=a.value,/^#(?!EXT)/m.test(a)||i)i=!1;else{if(a=Th(e.g++,a),--e.g,Rh.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(i=!0)}s=[],i=!0;for(var o=(a=c(re(r))).next();!o.done;o=a.next()){var l=o.value;o=l.wa;var u=l.item;if(l=l.next,/^#(?!EXT)/m.test(u)||i)i=!1;else{if(u=Th(e.g++,u),jh.includes(u.name)){if(1!=t)throw new ye(2,4,4017);l=r.splice(o,r.length-o),r=n,i=[],a=[],o=[],u=null;for(var d=(l=c(l)).next();!d.done;d=l.next())d=d.value,/^(#EXT)/.test(d)?(d=Th(e.g++,d),Rh.includes(d.name)?s.push(d):"EXT-X-MAP"==d.name?u=d:"EXT-X-PART"==d.name?o.push(d):"EXT-X-PRELOAD-HINT"==d.name?"PART"==dh(d,"TYPE")?o.push(d):"MAP"==dh(d,"TYPE")&&(d.name="EXT-X-MAP",u=d):a.push(d)):/^#(?!EXT)/m.test(d)||(d=Ae([r],[d.trim()])[0],u&&a.push(u),i.push(new ph(d,a,o)),a=[],o=[]);return o.length&&(u&&a.push(u),i.push(new ph("",a,o))),new ch(n,t,s,i)}s.push(u),"EXT-X-STREAM-INF"==u.name&&(u.g.push(new mh("URI",l)),i=!0)}}return new ch(n,t,s)}function Th(e,t){var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new ye(2,4,4016,t);var r,i=n[1],s=n[2];if(n=[],s){var a;(a=Eh(s=new yh(s),/^([^,=]+)(?:,|$)/g))&&(r=a[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=Eh(s,o);)n.push(new mh(a[1],a[2]||a[3])),_h(s)}return new uh(e,i,n,r)}(r=Jd.prototype).configure=function(e){this.m=e},r.start=function(e,t){var n,r=this;return P(function(i){if(1==i.g)return r.s=t.isLowLatencyMode(),r.h=[e],r.F=t,_(i,eh(r),2);if(n=i.h,r.F&&ih(r,n),!r.F)throw new ye(2,7,7001);return i.return(r.H)})},r.stop=function(){for(var e=c(Object.values(this.yb)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.g&&this.g.release(),this.m=this.F=null,this.h=[],this.H=null,this.yb={},this.g=null,null!=this.B&&(this.B.stop(),this.B=null),this.i.destroy()},r.update=function(){var e,t=this;return P(function(n){return 1==n.g?(b(n,2),_(n,eh(t),4)):2!=n.g?S(n,0):(e=T(n),t.F&&e?(t.F.onError(e),void E(n)):n.return())})},r.onExpirationUpdated=function(){},r.Tc=function(){var e,t,n=this;return P(function(r){switch(r.g){case 1:return e=0,b(r,2),_(r,eh(n),4);case 4:e=r.h,S(r,3);break;case 2:t=T(r),n.F&&(t.severity=1,n.F.onError(t));case 3:if(!n.F)return r.return();ih(n,e),E(r)}})},B("shaka.dash.DashParser",Jd),yi.mpd=function(){return new Jd},vi["application/dash+xml"]=function(){return new Jd},vi["video/vnd.mpeg.dash.mpd"]=function(){return new Jd},uh.prototype.toString=function(){var e="#"+this.name,t=this.g?this.g.map(function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},uh.prototype.getAttribute=function(e){var t=this.g.filter(function(t){return t.name==e});return t.length?t[0]:null};var Rh="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),jh="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function wh(){}function Ah(e){try{var t=Ih(e);return vr({uri:e,vf:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return gr(n)}}function Ih(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new ye(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new ye(2,1,1004,t);var r=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=r.split(";"),r=n[0];var i=!1;return 1<n.length&&"base64"==n[n.length-1]&&(i=!0,n.pop()),{data:i?Kt(t):Gt(t),contentType:r}}function kh(){var e=this;this.m=this.F=null,this.Aa=1,this.l=new Map,this.B=new Map,this.sa=new Set,this.g=new Map,this.h=null,this.M="",this.$=new Ch,this.ka=0,this.C=new mn(function(){e.Tc()}),this.j=Zh,this.H=null,this.ia=0,this.I=1/0,this.ea=this.Ca=0,this.G=new Cr,this.S=[],this.L=new Map,this.Ba=!1,this.s=new Map,this.P=null,this.ha=new Map,this.J=new Map,this.i=!1}function Mh(e,t){var n,r,i,s,a,o,l,c,u,d,h,p;return P(function(m){if(1==m.g)return n=tp,r=t.Pf,i=new se(r),e.i&&t.Uf&&le(i,new xe("_HLS_skip=YES")),_(m,qh(e,i.toString()),2);if(3!=m.g){if(s=m.h,1!=(a=Sh(e.$,s.data,s.uri)).type)throw new ye(2,4,4017);return o=fh(a.aa,"EXT-X-DEFINE"),l=Ph(e,o),c=t.stream,_(m,Gh(e,t.Fd,a,c.type,c.mimeType,t.ie,l,t.Zf,c.codecs,c.bandwidth),3)}u=m.h,c.segmentIndex.sc(u,e.h.ub()),u.length&&(d=vh(a.aa,"EXT-X-MEDIA-SEQUENCE",0),h=t.ie.get(d),c.segmentIndex.Ob(h)),p=u[u.length-1],xh(a.aa,"EXT-X-ENDLIST")&&(zh(e,n.Of),e.h.ib(p.endTime)),E(m)})}function Ph(e,t){for(var n=new Map,r=c(t),i=r.next();!i.done;i=r.next()){var s=i.value;i=dh(s,"NAME");var a=dh(s,"VALUE");s=dh(s,"IMPORT"),i&&a&&n.set(i,a),s&&(i=e.l.get(s))&&n.set(s,i)}return n}function Lh(e,t){var n=[];e.m.disableVideo||n.push(e.m.hls.defaultVideoCodec),e.m.disableAudio||n.push(e.m.hls.defaultAudioCodec);var r=dh(t,"CODECS",n.join(",")).split(/\s*,\s*/);n=new Set;for(var i=[],s=(r=c(r)).next();!s.done;s=r.next()){var a=sn(s=s.value);n.has(a)||(i.push(s),n.add(a))}return i}function Dh(e){return Be(e=dh(e,"LANGUAGE")||"und")}function Oh(e,t){var n,r,i,s,a,o,l,c,u,d,h,p,m;return P(function(f){if(1==f.g){n=hh(t,"GROUP-ID"),r="";var g=hh(t,"TYPE").toLowerCase();return"subtitles"==g&&(g=Pe),(i=g)!=Pe&&n&&e.s.has(n)&&(r=e.s.get(n)),s=Wh(hh(t,"URI"),e.l),e.g.has(s)?f.return(e.g.get(s)):(a=Dh(t),o=dh(t,"NAME"),l=dh(t,"DEFAULT"),c="YES"==l,g="audio"==i&&(g=dh(t,"CHANNELS"))?parseInt(g.split("/")[0],10):null,u=g,g="audio"==i&&!!(g=dh(t,"CHANNELS"))&&g.includes("/JOC"),d=g,h=dh(t,"CHARACTERISTICS"),p=dh(t,"FORCED"),_(f,$h(e,s,r,i,a,c,o,u,null,h,"YES"==p,d),2))}return m=f.h,e.B.has(n)?e.B.get(n).push(m):e.B.set(n,[m]),null==m?f.return(null):e.g.has(s)?f.return(e.g.get(s)):(e.g.set(s,m),f.return(m))})}function $h(e,t,n,r,i,s,a,o,l,d,h,p,m){var f,g,x,v,y,E,C,R,j,w,A,I,k,M,L,D,O,$,N,F,B,U,G,V,H,q,z,K,Y,Q,X,Z,J,ee,te,ne,re,ie,ae;return P(function(oe){switch(oe.g){case 1:return f=Ae([e.M],[t])[0],_(oe,qh(e,f),2);case 2:if(g=oe.h,f=g.uri,1!=(x=Sh(e.$,g.data,f)).type)throw new ye(2,4,4017);if(v=[],x.segments)for(y=c(x.segments),E=y.next();!E.done;E=y.next())C=E.value,R=fh(C.aa,"EXT-X-KEY"),v.push.apply(v,u(R));for(j=!1,w=[],A=new Set,I=c(v),k=I.next();!k.done;k=I.next())if(M=k.value,"NONE"!=(L=hh(M,"METHOD"))){if(j=!0,"AES-128"==L)return e.Ba=!0,oe.return(null);if(D=hh(M,"KEYFORMAT"),$=(O=Xh[D])?O(M):null){if($.keyIds)for(N=c($.keyIds),F=N.next();!F.done;F=N.next())B=F.value,A.add(B);w.push($)}}if(j&&!w.length)throw new ye(2,4,4026);return U=fh(x.aa,"EXT-X-DEFINE"),G=Ph(e,U),function(e,t){var n=xh(t.aa,"EXT-X-PLAYLIST-TYPE"),r=xh(t.aa,"EXT-X-ENDLIST");if(r=n&&"VOD"==n.value||r,n=n&&"EVENT"==n.value&&!r,n=!r&&!n,r)zh(e,Zh);else{if(zh(e,n?ep:Jh),!(r=xh(t.aa,"EXT-X-TARGETDURATION")))throw new ye(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),n=xh(t.aa,"EXT-X-PART-INF"),e.i&&n?(e.Ca=Number(hh(n,"PART-TARGET")),e.I=Math.min(e.Ca,e.I),n=xh(t.aa,"EXT-X-SERVER-CONTROL"),e.ea=n?Number(hh(n,"PART-HOLD-BACK")):0):e.I=Math.min(r,e.I),e.ia=Math.max(r,e.ia)}}(e,x),_(oe,function(e,t,n,r,i){var s,a,o,l,c,u,d,h,p,m,f;return P(function(g){return 1==g.g?(s=Le,a=kr,o=Wh(r.segments[0].g,i),l=new se(o),c=l.Sa.split(".").pop(),u=Qh[t],(d=u[c])?g.return(d):t==s.ua?n&&"vtt"!=n&&"wvtt"!=n?g.return("application/mp4"):g.return("text/vtt"):t!=s.Gc||n&&"jpeg"!=n?((h=jr([o],e.m.retryParameters)).method="HEAD",_(g,Kh(e,h,a),2)):g.return("image/jpeg")):(p=g.h,(m=p.headers["content-type"])?g.return(m.split(";")[0]):(f=u.mp4,g.return(f)))})}(e,r,n,x,G),3);case 3:return V=oe.h,Yh.includes(V)&&(n=""),H=new Map,q=new Map,b(oe,4),_(oe,Gh(e,t,x,r,V,H,G,q,n,m),6);case 6:z=oe.h,S(oe,5);break;case 4:if(4035==(K=T(oe)).code)return W("Skipping unsupported HLS stream",V,t),oe.return(null);throw K;case 5:if(Y=z[0].startTime,Q=z[z.length-1].endTime,X=new ka(z),Z=r==Pe?"subtitle":void 0,J=[],d)for(ee=c(d.split(",")),te=ee.next();!te.done;te=ee.next())ne=te.value,J.push(ne);return ie=!!(re=xh(x.aa,"EXT-X-SERVER-CONTROL"))&&null!=re.getAttribute("CAN-SKIP-UNTIL"),ae={id:e.Aa++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:X,mimeType:V,codecs:n,kind:Z,encrypted:j,drmInfos:w,keyIds:A,language:i,label:a,type:r,primary:s,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:J,forced:h,channelsCount:o,audioSamplingRate:null,spatialAudio:p,closedCaptions:l,hdr:void 0,tilesLayout:void 0},oe.return({stream:ae,Fd:t,Pf:f,tf:Y,Rg:Q,ie:H,Zf:q,Uf:ie})}})}function Nh(e,t,n,r){return(n=xh(n,"EXT-X-MAP"))?(t=[r=Wh(Ae([t],[hh(n,"URI")])[0],r),dh(n,"BYTERANGE","")].join("-"),e.ha.has(t)||(n=function(e,t){var n=0,r=null,i=dh(t,"BYTERANGE");return i&&(n=i.split("@"),r=Number(n[0]),n=Number(n[1]),r=n+r-1),new ca(function(){return[e]},n,r)}(r,n),e.ha.set(t,n)),e.ha.get(t)):null}function Fh(e,t,n,r,i,s,a,o,l){var u=r.aa,d=Wh(r.g,a),h=xh(u,"EXTINF"),p=a=0,m=null,f=[];if(e.i&&r.h.length){e={};for(var g=(r=c(re(r.h))).next();!g.done;e={Od:e.Od},g=r.next()){var x=(g=g.value).wa;g=g.item;var v=0==x?n:f[f.length-1];x=0==x?i:v.endTime;var y=Number(dh(g,"DURATION"));y=x+y;var _=0,E=null;"EXT-X-PRELOAD-HINT"==g.name?_=(v=dh(g,"BYTERANGE-START"))?Number(v):0:(_=(v=c(Bh(v,_=dh(g,"BYTERANGE")))).next().value,E=v.next().value),g=dh(g,"URI"),e.Od=Ae([o],[g])[0],f.push(new ua(x,y,function(e){return function(){return[e.Od]}}(e),_,E,t,s,0,1/0))}}else if(!h)throw new ye(2,4,4024,"EXTINF");return a=h?i+Number(h.value.split(",")[0]):f[f.length-1].endTime,(o=xh(u,"EXT-X-BYTERANGE"))?(p=(m=c(Bh(n,o.value))).next().value,m=m.next().value):f.length&&(p=f[0].Ka,m=f[f.length-1].Da),n="",o=null,"image"==l&&(n="1x1",l=xh(u,"EXT-X-TILES"))&&(n=hh(l,"LAYOUT"),(l=dh(l,"DURATION"))&&(o=Number(l))),new ua(i,a,function(){return d.length?[d]:[]},p,m,t,s,0,1/0,f,n,o)}function Bh(e,t){var n=0,r=null;return t&&(n=t.split("@"),r=Number(n[0]),r=(n=n[1]?Number(n[1]):e.Da+1)+r-1),[n,r]}function Uh(e){if(e.h){for(var t=c(e.S),n=t.next();!n.done;n=t.next())e.h.tc(n.value);e.S=[]}}function Gh(e,t,n,r,i,s,a,o,l,u){var d,h,p,m,f,g,x,v,y,E,b,C,S,T,R,j,w,A,I,k;return P(function(M){switch(M.g){case 1:if(d=n.segments,p=vh(n.aa,"EXT-X-MEDIA-SEQUENCE",0),f=(m=xh(n.aa,"EXT-X-SKIP"))?Number(dh(m,"SKIPPED-SEGMENTS")):0,g=p+f,e.j!=Zh&&s.has(g)){x=s.get(g),M.D(2);break}if(null!=e.P){M.D(3);break}return h=Nh(e,n.g,d[0].aa,a),v=e,_(M,Hh(e,t,h,i,g,!1,d[0],a,r,l,u),4);case 4:v.P=M.h;case 3:x=e.P;case 2:if(d[0].g.split("/").pop(),y=vh(n.aa,"EXT-X-DISCONTINUITY-SEQUENCE"),e.i&&(o.has(y)||o.set(y,g),f))for(;o.has(y+1)&&o.get(y+1)<g;)y++;E=e.J.get(y)||0,b=[],C=c(re(d)),S=C.next();case 5:if(S.done){M.D(7);break}if(T=S.value,R=T.wa,j=T.item,w=b[b.length-1],A=0==R?x:w.endTime,g=p+f+R,s.set(g,A),h=Nh(e,n.g,j.aa,a),!xh(j.aa,"EXT-X-DISCONTINUITY")){M.D(8);break}return y++,o.set(y,g),_(M,function(e,t,n,r,i,s,a,o,l,c,u,d){var h,p;return P(function(m){return 1==m.g?(h=0,e.J.has(t)?(h=e.J.get(t),m.D(2)):_(m,Hh(e,n,r,i,s,!0,a,o,c,u,d),3)):(2!=m.g&&(p=m.h,h=l-p,e.J.set(t,h)),m.return(h))})}(e,y,t,h,i,g,j,a,A,r,l,u),9);case 9:E=M.h;case 8:!e.i&&e.F.isAutoLowLatencyMode()&&(e.F.enableLowLatencyMode(),e.i=e.F.isLowLatencyMode()),I=xh(j.aa,"EXTINF"),e.i||I?(k=Fh(e,h,w,j,A,E,a,n.g,r),b.push(k)):e.i||W("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),S=C.next(),M.D(5);break;case 7:return M.return(b)}})}function Vh(e,t,n,r,i,s){var a,o,l,c,u,d;return P(function(h){switch(h.g){case 1:return a=kr,o=qa(t.Ma(),t.Ka,t.Da,e.m.retryParameters),e.F.modifySegmentRequest(o,{type:n,init:t instanceof ca,duration:t.endTime-t.startTime,mimeType:r,codecs:i,bandwidth:s}),e.m.hls.useFullSegmentsForStartTime?h.return(Kh(e,o,a)):(l=qa(t.Ma(),t.Ka,t.Ka+2048-1,e.m.retryParameters),e.F.modifySegmentRequest(l,{type:n,init:t instanceof ca,duration:t.endTime-t.startTime,mimeType:r,codecs:i,bandwidth:s}),b(h,2),_(h,Kh(e,l,a),4));case 4:return c=h.h,h.return(c);case 2:if(7001==(u=T(h)).code)throw u;return W("Unable to fetch the starting part of HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",l.uris[0]),_(h,Kh(e,o,a),5);case 5:return d=h.h,h.return(d)}})}function Hh(e,t,n,r,i,s,a,o,l,c,u){var d,h,p,m,f,g,x,v;return P(function(y){switch(y.g){case 1:if(d=Fh(e,n,null,a,0,0,o,"",l),e.H&&!s&&(h=e.g.get(t),null!=(p=h.ie.get(i))))return y.return(p);if(r=r.toLowerCase(),Yh.includes(r))throw W("Raw formats are not yet supported.  Skipping "+r),new ye(1,4,4035);if("video/webm"==r)throw W("WebM in HLS is not yet supported.  Skipping."),new ye(1,4,4035);if("video/mp4"!=r&&"audio/mp4"!=r){y.D(2);break}return m=[Vh(e,d,l,r,c,u)],n&&m.push(Vh(e,n,l,r,c,u)),_(y,Promise.all(m),3);case 3:return f=y.h,g=f[0],x=f[1]||f[0],y.return(function(e,t,n,r){var i=0;if((new Ci).box("moov",Si).box("trak",Si).box("mdia",Si).Z("mdhd",function(e){i=Fs(e.reader,e.version).timescale,e.parser.stop()}).parse(r,!0),!i)throw new ye(2,4,4030,e,t);var s=0,a=!1;if((new Ci).box("moof",Si).box("traf",Si).Z("tfdt",function(e){s=Ns(e.reader,e.version).Xd/i,a=!0,e.parser.stop()}).parse(n,!0),!a)throw new ye(2,4,4030,e,t);return s}(t,g.uri,g.data,x.data));case 2:if("video/mp2t"!=r){y.D(4);break}return _(y,Vh(e,d,l,r,c,u),5);case 5:return v=y.h,y.return(function(e,t,n){function r(){s.seek(a+188),71!=(o=s.ra())&&(s.seek(a+192),o=s.ra()),71!=o&&(s.seek(a+204),o=s.ra()),71!=o&&i(),s.yf(1)}function i(){throw new ye(2,4,4030,e,t)}var s=new _i(n,0),a=0,o=0;for(n=Math.min(s.X.byteLength-188,940);;){if(a=s.qa(),71!=(o=s.ra())){if(0<n){--n;continue}i()}n=0;var l=s.wc();if(8191&~l)if(16384&l){if(0!=(l=(48&s.ra())>>4)&&2!=l||i(),3==l&&(l=s.ra(),s.skip(l)),1==s.T()>>8)return s.skip(3),0!=(n=s.ra()>>6)&&1!=n||i(),0==s.ra()&&i(),(1073741824*((14&(n=s.ra()))>>1)+((65534&(l=s.wc()))<<14|(65534&s.wc())>>1))/9e4;r()}else r();else r()}}(t,v.uri,v.data));case 4:throw new ye(2,4,4030,t)}})}function Wh(e,t){var n=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),r=n.match(/{\$\w*}/g);if(r)for(var i=(r=c(r)).next();!i.done;i=r.next()){var s=(i=i.value).slice(2,i.length-1),a=t.get(s);if(!a)throw new ye(2,4,4039,s);n=n.replace(i,a)}return n}function qh(e,t){var n=jr([t],e.m.retryParameters);return e.F.modifyManifestRequest(n,{format:"h"}),Kh(e,n,0)}function zh(e,t){e.j=t,e.h&&e.h.Zc(e.j==Zh),e.j!=Zh||e.C.stop()}function Kh(e,t,n){if(!e.G)throw new ye(2,7,7001);return t=e.F.networkingEngine.request(n,t),Sr(e.G,t),t.promise}B("shaka.net.DataUriPlugin",wh),wh.parse=Ah,Rr("data",Ah),(r=kh.prototype).configure=function(e){this.m=e},r.start=function(e,t){var n,r,i=this;return P(function(s){return 1==s.g?(i.F=t,i.i=t.isLowLatencyMode(),_(s,qh(i,e),2)):3!=s.g?(n=s.h,i.M=n.uri,_(s,function(e,t){var n,r,i,s,a,o,l,u,d,h,p,m,f,g,x,v,y,C,S,R,j,w,A,I,k,M,L,D,O,$,N,F,B,G,V,H;return P(function(W){switch(W.g){case 1:if(0!=(n=Sh(e.$,t,e.M)).type)throw new ye(2,4,4022);for(r=fh(n.aa,"EXT-X-DEFINE"),function(e,t){for(var n=c(t),r=n.next();!r.done;r=n.next()){var i=r.value;r=dh(i,"NAME"),i=dh(i,"VALUE"),r&&i&&(e.l.has(r)||e.l.set(r,i))}}(e,r),i=fh(n.aa,"EXT-X-MEDIA"),s=fh(n.aa,"EXT-X-STREAM-INF"),a=fh(n.aa,"EXT-X-IMAGE-STREAM-INF"),function(e,t){for(var n=c(t),r=n.next();!r.done;r=n.next()){var i=r.value,s=dh(i,"AUDIO");r=dh(i,"VIDEO");var a=dh(i,"SUBTITLES");if(i=Lh(e,i),a){var o=Me(Pe,i);e.s.set(a,o),rt(i,o)}s&&(a=ke("audio",i),e.s.set(s,a)),r&&(s=ke("video",i),e.s.set(r,s))}}(e,s),o=fh(n.aa,"EXT-X-SESSION-DATA"),l=c(o),u=l.next();!u.done;u=l.next())d=u.value,h=dh(d,"DATA-ID"),p=dh(d,"URI"),m=dh(d,"LANGUAGE"),f=dh(d,"VALUE"),g=(new Map).set("id",h),p&&g.set("uri",Ae([e.M],[p])[0]),m&&g.set("language",m),f&&g.set("value",f),x=new U("sessiondata",g),e.F&&e.F.onEvent(x);return _(W,function(e,t){var n;return P(function(r){return 1==r.g?(t=t.filter(function(e){var t=dh(e,"URI")||"";return"SUBTITLES"!=dh(e,"TYPE")&&""!=t}),t.length?_(r,Oh(e,t[0]),2):r.D(2)):(n=t.slice(1).map(function(t){return Oh(e,t)}),_(r,Promise.all(n),0))})}(e,i),2);case 2:return function(e,t){for(var n=gh(t,"CLOSED-CAPTIONS"),r=(n=c(n)).next();!r.done;r=n.next()){var i=r.value;r=Dh(i);var s=hh(i,"GROUP-ID");i=hh(i,"INSTREAM-ID"),e.L.get(s)||e.L.set(s,new Map),e.L.get(s).set(i,r)}}(e,i),_(W,function(e,t){var n,r,i;return P(function(s){return 1==s.g?(n=t.map(function(t){var n,r,i,s,a,o,l,u;return P(function(d){if(1==d.g)return n=dh(t,"FRAME-RATE"),r=Number(dh(t,"AVERAGE-BANDWIDTH"))||Number(hh(t,"BANDWIDTH")),i=dh(t,"RESOLUTION"),s=c(i?i.split("x"):[null,null]),a=s.next().value,o=s.next().value,l=dh(t,"VIDEO-RANGE"),_(d,function(e,t,n){var r,i,s,a,o,l,u,d,h,p,m,f,g,x;return P(function(v){if(1==v.g)return r=Le,i=Lh(e,t),s=dh(t,"AUDIO"),a=dh(t,"VIDEO"),l=(o=s||a)&&e.B.has(o)?e.B.get(o):[],u={audio:s?l:[],video:a?l:[]},h=!1,p=hh(t,"URI"),m=u.audio.find(function(e){return e&&e.Fd==p}),f=Me(r.mb,i),(g=Me(r.Nb,i))&&!f?d=r.Nb:!l.length&&g&&f?(d=r.mb,i=[[f,g].join()]):u.audio.length&&m?(d=r.Nb,h=!0):d=u.video.length?r.Nb:r.mb,h?v.D(2):_(v,function(e,t,n,r,i){var s,a,o,l;return P(function(c){if(1==c.g){if(s=Wh(hh(t,"URI"),e.l),e.g.has(s))return c.return(e.g.get(s));var u=dh(t,"CLOSED-CAPTIONS");return a="video"==r&&u&&"NONE"!=u?e.L.get(u):null,o=ke(r,n),_(c,$h(e,s,o,r,"und",!1,null,null,a,null,!1,!1,i),2)}return null==(l=c.h)?c.return(null):e.g.has(s)?c.return(e.g.get(s)):(e.g.set(s,l),c.return(l))})}(e,t,i,d,n),3);if(2!=v.g&&(x=v.h),x)u[x.stream.type]=[x];else if(null===x)return v.return(null);return function(e){for(var t=(e=c(e.audio.concat(e.video))).next();!t.done;t=e.next())if(t=t.value){var n=t.stream.codecs.split(",");n=n.filter(function(e){return"mp4a.40.34"!=e}),t.stream.codecs=n.join(",")}}(u),v.return(u)})}(e,t,r),2);if(u=d.h){for(var h=d.return,p=u.audio,m=u.video,f=c(m),g=f.next();!g.done;g=f.next())(g=g.value.stream)&&(g.width=Number(a)||void 0,g.height=Number(o)||void 0,g.frameRate=Number(n)||void 0,g.hdr=l||void 0);for(f=e.m.disableAudio,p.length&&!f||(p=[null]),f=e.m.disableVideo,m.length&&!f||(m=[null]),f=[],g=(p=c(p)).next();!g.done;g=p.next()){g=g.value;for(var x=c(m),v=x.next();!v.done;v=x.next()){var y=v.value;v=g?g.stream:null;var E=y?y.stream:null,b=g?g.stream.drmInfos:null,C=y?y.stream.drmInfos:null;y=(y?y.Fd:"")+" - "+(g?g.Fd:""),v&&E&&b.length&&C.length&&!(0<si(b,C).length)||e.sa.has(y)||(v={id:e.Aa++,language:v?v.language:"und",primary:!!v&&v.primary||!!E&&E.primary,audio:v,video:E,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},f.push(v),e.sa.add(y))}}d=h.call(d,f)}else d=d.return([]);return d})}),_(s,Promise.all(n),2)):(r=s.h,i=(i=r.reduce(Te,[])).filter(function(e){return null!=e}),s.return(i))})}(e,s),3);case 3:return v=W.h,_(W,function(e,t){var n,r,i,s,a,o,l,u,d,h,p;return P(function(m){if(1==m.g)return n=gh(t,"SUBTITLES"),r=n.map(function(t){var n,r;return P(function(i){if(1==i.g)return e.m.disableText?i.return(null):(b(i,2),_(i,Oh(e,t),4));if(2!=i.g)return n=i.h,i.return(n.stream);if(r=T(i),e.m.hls.ignoreTextStreamFailures)return i.return(null);throw r})}),_(m,Promise.all(r),2);for(i=m.h,s=c(n),a=s.next();!a.done;a=s.next())if(o=a.value,l=hh(o,"GROUP-ID"),(u=e.s.get(l))&&(d=e.B.get(l)))for(h=c(d),p=h.next();!p.done;p=h.next())p.value.stream.codecs=u;return m.return(i.filter(function(e){return e}))})}(e,i),4);case 4:return y=W.h,_(W,function(e,t){var n,r;return P(function(i){return 1==i.g?(n=t.map(function(t){var n,r;return P(function(i){if(1==i.g)return e.m.disableThumbnails?i.return(null):(b(i,2),_(i,function(e,t){var n,r,i,s,a,o,l,c,u,d;return P(function(h){return 1==h.g?(n=Wh(hh(t,"URI"),e.l),r=dh(t,"CODECS","jpeg")||"",e.g.has(n)?h.return(e.g.get(n)):(i=Dh(t),s=dh(t,"NAME"),a=dh(t,"CHARACTERISTICS"),_(h,$h(e,n,r,"image",i,!1,s,null,null,a,!1,!1),2))):null==(o=h.h)?h.return(null):e.g.has(n)?h.return(e.g.get(n)):((l=dh(t,"RESOLUTION"))&&(c=o.stream.segmentIndex.get(0),(u=c.tilesLayout)&&(o.stream.width=Number(l.split("x")[0])*Number(u.split("x")[0]),o.stream.height=Number(l.split("x")[1])*Number(u.split("x")[1]))),(d=dh(t,"BANDWIDTH"))&&(o.stream.bandwidth=Number(d)),e.g.set(n,o),h.return(o))})}(e,t),4));if(2!=i.g)return n=i.h,i.return(n.stream);if(r=T(i),e.m.hls.ignoreImageStreamFailures)return i.return(null);throw r})}),_(i,Promise.all(n),2)):(r=i.h,i.return(r.filter(function(e){return e})))})}(e,a),5);case 5:if(C=W.h,!e.F)throw new ye(2,7,7001);if(e.Ba&&0==v.length)throw new ye(2,4,4034);for(R=S=1/0,j=c(e.g.values()),w=j.next();!w.done;w=j.next())A=w.value,S=Math.min(S,A.tf),"text"!=A.stream.type&&(R=Math.min(R,A.Rg-A.tf));if(e.j!=Zh?(e.h=new da(0,e.m.defaultPresentationDelay?e.m.defaultPresentationDelay:e.ea?e.ea:3*e.ia),e.h.Zc(!1)):(e.h=new da(null,0),e.h.Zc(!0)),Uh(e),e.j!=Zh)e.ka=e.I,I=tp,e.j==I.Se&&(k=e.h.zd,isNaN(e.m.availabilityWindowOverride)||(k=e.m.availabilityWindowOverride),e.h.Ie(k));else for(e.h.ib(R),e.h.offset(-S),M=c(e.g.values()),w=M.next();!w.done;w=M.next())(L=w.value).stream.segmentIndex.offset(-S),L.stream.segmentIndex.Hb(0,R);for(e.S=[],D=[],O=c(v),$=O.next();!$.done;$=O.next())for(N=$.value,F=c([N.video,N.audio]),B=F.next();!B.done;B=F.next())(G=B.value)&&D.push(G);return _(W,Promise.all(D.map(function(e){return P(function(t){return _(t,e.createSegmentIndex(),0)})})),6);case 6:for(V=c(D),B=V.next();!B.done;B=V.next())H=B.value,e.S.push(H.segmentIndex.R);Uh(e),e.H={presentationTimeline:e.h,variants:v,textStreams:y,imageStreams:C,offlineSessionIds:[],minBufferTime:0},e.F.makeTextStreamsForClosedCaptions(e.H),E(W)}})}(i,n.data),3)):(0<(r=i.ka)&&i.C.U(r),s.return(i.H))})},r.stop=function(){this.C&&(this.C.stop(),this.C=null);var e=[];return this.G&&(e.push(this.G.destroy()),this.G=null),this.m=this.F=null,this.sa.clear(),this.H=null,this.g.clear(),this.B.clear(),this.s.clear(),this.l.clear(),Promise.all(e)},r.update=function(){var e,t,n,r=this;return P(function(i){if(1==i.g)return r.j==Zh?i.return():(e=[],r.P=null,(t=Array.from(r.g.values())).length?_(i,Mh(r,t[0]),2):i.D(2));for(n=1;n<t.length;n++)e.push(Mh(r,t[n]));return _(i,Promise.all(e),0)})},r.onExpirationUpdated=function(){},r.Tc=function(){var e,t,n=this;return P(function(r){return 1==r.g?n.F?(b(r,2),_(r,n.update(),4)):r.return():2!=r.g?(e=n.ka,n.C.U(e),S(r,0)):(t=T(r),n.F?(t.severity=1,n.F.onError(t),n.C.U(.1),void E(r)):r.return())})},B("shaka.hls.HlsParser",kh);var Yh=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],Qh={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Xh={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=hh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Ie("com.widevine.alpha",[{initDataType:"cenc",initData:t=It((t=Ih(t=hh(e,"URI"))).data)}]),(e=dh(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=hh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?Ie("com.microsoft.playready",[{initDataType:"cenc",initData:e=Mu(e=It((e=Ih(e=hh(e,"URI"))).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]))}]):null}},Zh="VOD",Jh="EVENT",ep="LIVE",tp={Of:Zh,Nh:Jh,Se:ep};function np(e,t,n,r,i,s){if(200<=n&&299>=n&&202!=n)return{uri:i||r,vf:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=Ut(t)}catch(a){}throw new ye(401==n||403==n?2:1,1,1001,r,n,i,e,s)}function rp(){}function ip(e,t,n,r,i){var s=new up;Gr(t.headers).forEach(function(e,t){s.append(t,e)});var a=new lp,o={Ve:!1,If:!1};if(e=function(e,t,n,r,i,s,a){var o,l,c,u,d,h,p,m,f,g,x,v;return P(function(y){switch(y.g){case 1:return o=op,l=cp,h=d=0,p=Date.now(),b(y,2),_(y,o(e,n),4);case 4:return c=y.h,s(sp(c.headers)),m=c.clone().body.getReader(),g=(f=c.headers.get("Content-Length"))?parseInt(f,10):0,new l({start:function(e){function t(){var n,r;return P(function(s){switch(s.g){case 1:return b(s,2),_(s,m.read(),4);case 4:n=s.h,S(s,3);break;case 2:return T(s),s.return();case 3:if(n.done){s.D(5);break}if(d+=n.value.byteLength,!a){s.D(5);break}return _(s,a(n.value),5);case 5:(100<(r=Date.now())-p||n.done)&&(i(r-p,d-h,g-d),h=d,p=r),n.done?e.close():(e.enqueue(n.value),t()),E(s)}})}t()}}),_(y,c.arrayBuffer(),5);case 5:u=y.h,S(y,3);break;case 2:if(x=T(y),r.Ve)throw new ye(1,1,7001,e,t);if(r.If)throw new ye(1,1,1003,e,t);throw new ye(1,1,1002,e,x,t);case 3:return v=sp(c.headers),y.return(np(v,u,c.status,e,c.url,t))}})}(e,n,{body:t.body||void 0,headers:s,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,r,i,t.streamDataCallback),e=new fr(e,function(){return o.Ve=!0,a.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var l=new mn(function(){o.If=!0,a.abort()});l.U(t/1e3),e.finally(function(){l.stop()})}return e}function sp(e){var t={};return e.forEach(function(e,n){t[n.trim()]=e}),t}function ap(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(Oy){return!1}return!(!e.fetch||!e.AbortController)}yi.m3u8=function(){return new kh},vi["application/x-mpegurl"]=function(){return new kh},vi["application/vnd.apple.mpegurl"]=function(){return new kh},B("shaka.net.HttpFetchPlugin",rp),rp.isSupported=ap,rp.parse=ip;var op=e.fetch,lp=e.AbortController,cp=e.ReadableStream,up=e.Headers;function dp(){}function hp(e,t,n,r,i){var s=new mp,a=Date.now(),o=0;return new fr(new Promise(function(l,c){s.open(t.method,e,!0),s.responseType="arraybuffer",s.timeout=t.retryParameters.timeout,s.withCredentials=t.allowCrossSiteCredentials,s.onabort=function(){c(new ye(1,1,7001,e,n))};var u=!1;for(var d in s.onreadystatechange=function(){if(2==s.readyState&&!u){var e=pp(s);i(e),u=!0}},s.onload=function(){var t=pp(s),r=s.response;try{var i=np(t,r,s.status,e,s.responseURL,n);l(i)}catch(a){c(a)}},s.onerror=function(t){c(new ye(1,1,1002,e,t,n))},s.ontimeout=function(){c(new ye(1,1,1003,e,n))},s.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(r(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)s.setRequestHeader(d.toLowerCase(),t.headers[d]);s.send(t.body)}),function(){return s.abort(),Promise.resolve()})}function pp(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=c(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}ap()&&(Rr("http",ip,2,!0),Rr("https",ip,2,!0),Rr("blob",ip,2,!0)),B("shaka.net.HttpXHRPlugin",dp),dp.parse=hp;var mp=e.XMLHttpRequest;function fp(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function gp(e){return e.Ma().map(function(e){return"{"+encodeURI(e)+"}"}).join("")+":"+e.Ka+":"+e.Da}function xp(e,t){return qa(e.g.Ma(),e.g.Ka,e.g.Da,t.streaming.retryParameters)}function vp(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function yp(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function _p(e){var t=this;this.V=e,this.g=new Map,this.N=new Lr(function(){return Ep(t).catch(function(){})}),this.h=[],this.Lf=function(){},this.Jf=function(){},this.fc=new vp}function Ep(e){var t=e.h.map(function(e){return e()});return e.h=[],Promise.all(t)}function bp(e,t,n,r,i,s){Dr(e.N);var a=(e.g.get(t)||Promise.resolve()).then(function(){var t,a,o,l,c,u,d;return P(function(h){if(1==h.g)return _(h,function(e,t){var n,r,i,s;return P(function(a){return 1==a.g?(n=kr,r=e.V.request(n,t),i=function(){return r.abort()},e.h.push(i),_(a,r.promise,2)):(s=a.h,rt(e.h,i),a.return(s.data))})}(e,n),2);if(t=h.h,e.N.g)throw new ye(2,9,7001);if(i)for(l in a=It(t),(o=new ku(a)).data)c=Number(l),u=o.data[c],d=o.g[c],e.Jf(u,d);e.fc.close(r,t.byteLength);var p=e.fc;return e.Lf(0==p.i?0:p.j/p.i,e.fc.h),h.return(s(t))})});e.g.set(t,a)}function Cp(e,t,n){Dr(e.N);var r=(e.g.get(t)||Promise.resolve()).then(function(){return P(function(e){return _(e,n(),0)})});e.g.set(t,r)}function Sp(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Ot,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function Tp(e,t){return new Promise(function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var e;return P(function(r){if(1==r.g)return null==i.result?(n(),r.return()):(e=i.result,_(r,t(e.key,e.value,e),2));e.continue(),E(r)})}})}function Rp(e){this.h=e,this.g=[]}function jp(e,t){return wp(e,t,"readwrite")}function wp(e,t,n){var r=new Sp(n=e.h.transaction([t],n),t);return e.g.push(r),r.promise().then(function(){rt(e.g,r)},function(){rt(e.g,r)}),r}function Ap(e,t,n){this.h=new Rp(e),this.i=t,this.g=n}function Ip(e){return Promise.reject(new ye(2,9,9011,"Cannot add new value to "+e))}function kp(e,t,n,r){t=(e=jp(e.h,t)).store();for(var i={},s=(n=c(n)).next();!s.done;i={ed:i.ed},s=n.next())i.ed=s.value,t.delete(i.ed).onsuccess=function(e){return function(){return r(e.ed)}}(i);return e.promise()}function Mp(e,t,n){var r,i,s,a,o,l,u;return P(function(d){if(1==d.g){for(r=wp(e.h,t,"readonly"),i=r.store(),s={},a=[],o={},l=c(n),u=l.next();!u.done;o={Ec:o.Ec,Ac:o.Ac},u=l.next())o.Ac=u.value,o.Ec=i.get(o.Ac),o.Ec.onsuccess=function(e){return function(){null==e.Ec.result&&a.push(e.Ac),s[e.Ac]=e.Ec.result}}(o);return _(d,r.promise(),2)}if(a.length)throw new ye(2,9,9012,"Could not find values for "+a);return d.return(n.map(function(e){return s[e]}))})}function Pp(e){this.g=new Rp(e)}function Lp(){this.g=new Map}function Dp(e){var t=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){e.hasFixedKeySpace()||t||(t={path:{Ya:n,oa:r},oa:e})})}),t)return t;throw new ye(2,9,9013,"Could not find a cell that supports add-operations")}function Op(e,t,n){if(!(e=e.g.get(t)))throw new ye(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new ye(2,9,9013,"Could not find cell with name "+n);return t}function $p(e,t){Np.set(e,t)}Rr("http",hp,1,!0),Rr("https",hp,1,!0),Rr("blob",hp,1,!0),vp.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},_p.prototype.destroy=function(){return this.N.destroy()},Sp.prototype.abort=function(){var e=this;return P(function(t){if(1==t.g){try{e.i.abort()}catch(n){}return b(t,2),_(t,e.g,4)}if(2!=t.g)return S(t,0);T(t),E(t)})},Sp.prototype.store=function(){return this.h},Sp.prototype.promise=function(){return this.g},Rp.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},(r=Ap.prototype).destroy=function(){return this.h.destroy()},r.hasFixedKeySpace=function(){return!0},r.addSegments=function(){return Ip(this.i)},r.removeSegments=function(e,t){return kp(this,this.i,e,t)},r.getSegments=function(e){var t,n=this;return P(function(r){return 1==r.g?_(r,Mp(n,n.i,e),2):(t=r.h,r.return(t.map(function(e){return n.Ye(e)})))})},r.addManifests=function(){return Ip(this.g)},r.updateManifest=function(){return Promise.reject(new ye(2,9,9016,"Cannot modify values in "+this.g))},r.updateManifestExpiration=function(e,t){var n=jp(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},r.removeManifests=function(e,t){return kp(this,this.g,e,t)},r.getManifests=function(e){var t,n=this;return P(function(r){return 1==r.g?_(r,Mp(n,n.g,e),2):(t=r.h,r.return(Promise.all(t.map(function(e){return n.Jc(e)}))))})},r.getAllManifests=function(){var e,t,n=this;return P(function(r){return 1==r.g?(e=wp(n.h,n.g,"readonly"),t=new Map,_(r,Tp(e,function(e,r){var i;return P(function(s){if(1==s.g)return _(s,n.Jc(r),2);i=s.h,t.set(e,i),E(s)})}),2)):3!=r.g?_(r,e.promise(),3):r.return(t)})},r.Ye=function(e){return e},r.Jc=function(e){return Promise.resolve(e)},r.add=function(e,t){var n,r,i,s,a,o,l,u=this;return P(function(d){if(1==d.g){for(n=jp(u.h,e),r=n.store(),i=[],s={},a=c(t),o=a.next();!o.done;s={fd:s.fd},o=a.next())l=o.value,s.fd=r.add(l),s.fd.onsuccess=function(e){return function(){i.push(e.fd.result)}}(s);return _(d,n.promise(),2)}return d.return(i)})},Pp.prototype.destroy=function(){return this.g.destroy()},Pp.prototype.getAll=function(){var e,t,n=this;return P(function(r){return 1==r.g?(e=wp(n.g,"session-ids","readonly"),t=[],_(r,Tp(e,function(e,n){t.push(n)}),2)):3!=r.g?_(r,e.promise(),3):r.return(t)})},Pp.prototype.add=function(e){for(var t=jp(this.g,"session-ids"),n=t.store(),r=(e=c(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},Pp.prototype.remove=function(e){var t,n=this;return P(function(r){return 1==r.g?_(r,Tp(t=jp(n.g,"session-ids"),function(t,n,r){e.includes(n.sessionId)&&r.delete()}),2):_(r,t.promise(),0)})},Lp.prototype.destroy=function(){for(var e=[],t=c(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Lp.prototype.init=function(){var e=this;Np.forEach(function(t,n){var r=t();r&&e.g.set(n,r)});for(var t=[],n=c(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},B("shaka.offline.StorageMuxer",Lp),Lp.unregister=function(e){Np.delete(e)},Lp.register=$p,Lp.prototype.destroy=Lp.prototype.destroy;var Np=new Map;function Fp(){Ap.apply(this,arguments)}function Bp(e,t){!function(e){var t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=c(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(r=(n=c(e)).next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var i=n++,s=c(e);for(r=s.next();!r.done;r=s.next())r.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,r=(s=c(t)).next();!r.done;r=s.next())r.value.variantIds.push(i);if(e.length&&t.length)for(r=(t=c(t)).next();!r.done;r=t.next())for(r=r.value,s=(i=c(e)).next();!s.done;s=i.next()){s=s.value;var a=n++;r.variantIds.push(a),s.variantIds.push(a)}}}(e);for(var n=c(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(n){return function(e,t,n){var r=e.initSegmentUri?Up(e.initSegmentUri):null,i=t+e.presentationTimeOffset,s=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var n=Up(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:s,timestampOffset:i,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}(n,e.startTime,t)})}function Up(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new ye(2,9,9004,"Could not parse uri "+e)}function Gp(){Ap.apply(this,arguments)}function Vp(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function Hp(){Ap.apply(this,arguments)}function Wp(){this.s=this.j=this.i=this.h=this.g=this.l=null}function qp(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}function zp(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new qp(t,n,r,Number(e[4])):null}function Kp(e,t){this.h=e,this.g=t}function Yp(e,t){var n=new da(null,0);n.ib(t.duration);var r=t.streams.filter(function(e){return"audio"==e.type}),i=t.streams.filter(function(e){return"video"==e.type});r=function(e,t,n,r){for(var i=new Set,s=c(t),a=s.next();!a.done;a=s.next()){var o=c(a.value.variantIds);for(a=o.next();!a.done;a=o.next())i.add(a.value)}for(s=c(n),a=s.next();!a.done;a=s.next())for(o=c(a.value.variantIds),a=o.next();!a.done;a=o.next())i.add(a.value);for(s=new Map,i=c(i),a=i.next();!a.done;a=i.next())a=a.value,s.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=c(t),i=t.next();!i.done;i=t.next())for(i=i.value,a=Qp(e,i,r),o=c(i.variantIds),i=o.next();!i.done;i=o.next())(i=s.get(i.value)).language=a.language,i.primary=i.primary||a.primary,i.audio=a;for(n=c(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=Qp(e,i,r),a=c(i.variantIds),i=a.next();!i.done;i=a.next())(i=s.get(i.value)).primary=i.primary||t.primary,i.video=t;return s}(e,r,i,n),i=t.streams.filter(function(e){return e.type==Pe}).map(function(t){return Qp(e,t,n)});var s=t.streams.filter(function(e){return"image"==e.type}).map(function(t){return Qp(e,t,n)}),a=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var o=c(r.values()),l=o.next();!l.done;l=o.next())(l=l.value).audio&&l.audio.encrypted&&(l.audio.drmInfos=a),l.video&&l.video.encrypted&&(l.video.drmInfos=a);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:s}}function Qp(e,t,n){var r=t.segments.map(function(t){return function(e,t){var n=new qp("segment",e.h,e.g,t.dataKey);return new ua(t.startTime,t.endTime,function(){return[n.toString()]},0,null,null!=t.initSegmentKey?function(e,t){var n=new qp("segment",e.h,e.g,t);return new ca(function(){return[n.toString()]},0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}(e,t)});return n.tc(r),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ka(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout}}function Xp(){this.g=null}function Zp(){}function Jp(e){var t=zp(e);return e=t&&"manifest"==t.g?vr(e={uri:e,vf:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):t&&"segment"==t.g?function(e,t){var n=new Lp;return vr(void 0).va(function(){return n.init()}).va(function(){return Op(n,t.Ya(),t.oa())}).va(function(e){return e.getSegments([t.key()])}).va(function(e){return{uri:t,data:e[0].data,headers:{}}}).finally(function(){return n.destroy()})}(t.key(),t):gr(new ye(2,1,9004,e))}function em(e,t,n){var r,i,s,a,o,l;return P(function(u){switch(u.g){case 1:r=[];for(var d=[],h=c(n),p=h.next();!p.done;p=h.next()){p=p.value;for(var m=!1,f=c(d),g=f.next();!g.done;g=f.next())if(tm((g=g.value).info,p)){g.sessionIds.push(p.sessionId),m=!0;break}m||d.push({info:p,sessionIds:[p.sessionId]})}i=c(d),s=i.next();case 2:if(s.done){u.D(4);break}return a=s.value,o=function(e,t,n){var r,i;return P(function(s){switch(s.g){case 1:return r=new Wr({Wb:t,onError:function(){},wd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),b(s,2),r.configure(e),_(s,function(e,t,n,r,i,s){var a=new Map;return(i={audioCapabilities:i,videoCapabilities:s,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],a.set(t,i),Jr(e,a,[])}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:S(s,3);break;case 2:return T(s),_(s,r.destroy(),5);case 5:case 9:return s.return([]);case 3:return b(s,6),_(s,Kr(r),8);case 8:S(s,7);break;case 6:return T(s),_(s,r.destroy(),9);case 7:return i=[],_(s,Promise.all(n.sessionIds.map(function(e){return P(function(t){return 1==t.g?(b(t,2),_(t,function(e,t){var n,r,i;return P(function(s){return 1==s.g?_(s,ei(e,t),2):3!=s.g?(n=s.h)?(r=[],(i=e.j.get(n))&&(i.jb=new Ot,r.push(i.jb)),r.push(n.remove()),_(s,Promise.all(r),3)):s.return():(e.j.delete(n),void E(s))})}(r,e),4)):2!=t.g?(i.push(e),S(t,0)):(T(t),void E(t))})})),10);case 10:return _(s,r.destroy(),11);case 11:return s.return(i)}})}(e,t,a),_(u,o,5);case 5:l=u.h,r=r.concat(l),s=i.next(),u.D(2);break;case 4:return u.return(r)}})}function tm(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&it(e.audioCapabilities,t.audioCapabilities,n)&&it(e.videoCapabilities,t.videoCapabilities,n)}function nm(e,t){var n=Yp(new Kp(e.Ya(),e.oa()),t),r=t.appMetadata||{};return n=rm(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function rm(e){for(var t=[],n=function(e){return e.filter(function(e){return Hn(e)})}(e.variants),r=(n=c(n)).next();!r.done;r=n.next())t.push($n(r.value));for(n=(e=c(e.textStreams)).next();!n.done;n=e.next())t.push(Nn(n.value));return t}function im(){this.g={}}function sm(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,s=r.bandwidth||t.bandwidth-i;0>=s&&(s=t.bandwidth),e.g[n.id]=i,e.g[r.id]=s}}function am(e,t){e.g[t.id]=t.bandwidth||2048}function om(e,t){var n=e.g[t];return null==n&&(n=0),n}function lm(){this.h=[],this.g=this.i=0}function cm(e){var t=this;if(e&&e.constructor!=Zo)throw new ye(2,9,9008);this.V=this.m=null,e?(this.m=e.m,this.V=e.Mc()):(this.m=Ho(),this.V=new Tr),this.Uc=[],this.re=[];var n=!e;this.N=new Lr(function(){var e,r,i,s,a;return P(function(o){switch(o.g){case 1:return _(o,Promise.all(t.re.map(function(e){return Ep(e)})),2);case 2:for(e=function(){},r=[],i=c(t.Uc),s=i.next();!s.done;s=i.next())a=s.value,r.push(a.then(e,e));return _(o,Promise.all(r),3);case 3:if(!n){o.D(4);break}return _(o,t.V.destroy(),4);case 4:t.m=null,t.V=null,E(o)}})})}function um(){if(fn())e:{for(var e=c(Np.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function dm(e){var t,n,r;return P(function(i){switch(i.g){case 1:return _(i,(t=new Lp).init(),2);case 2:return _(i,Dp(t),3);case 3:return n=i.h,r=new qp("manifest",n.path.Ya,n.path.oa,e),_(i,t.destroy(),4);case 4:return _(i,(new cm).remove(r.toString()),0)}})}function hm(e,t,n,r){var i,s,a,o,l,u,d,h,p,m,f,g,x,v,y,E,C;return P(function(S){switch(S.g){case 1:return i=new Lp,s=gp(t),a=!1,d=0,b(S,2,3),_(S,i.init(),5);case 5:return _(S,Dp(i),6);case 6:return _(S,(l=S.h).oa.addSegments([n]),7);case 7:return h=S.h,o=h[0],r(),_(S,function(){var e,t=Cm;return P(function(n){return 1==n.g?(e=++t.i,t.g?_(n,new Promise(function(n){t.h.push(function(){t.g=e,n()})}),2):(t.g=e,n.D(2))):n.return(e)})}(),8);case 8:return d=S.h,r(),_(S,l.oa.getManifests([e]),9);case 9:for(p=S.h,r(),u=p[0],m=!0,f=c(u.streams),g=f.next();!g.done;g=f.next())for(x=g.value,v=c(x.segments),y=v.next();!y.done;y=v.next())(E=y.value).pendingSegmentRefId==s&&(E.dataKey=o,E.pendingSegmentRefId=void 0),E.pendingInitSegmentRefId==s&&(E.initSegmentKey=o,E.pendingInitSegmentRefId=void 0),E.pendingSegmentRefId&&(m=!1),E.pendingInitSegmentRefId&&(m=!1);return u.size+=n.data.byteLength,m&&(u.isIncomplete=!1),_(S,l.oa.updateManifest(e,u),10);case 10:a=!0,r();case 3:return R(S),_(S,i.destroy(),11);case 11:Cm.release(d),j(S,4);break;case 2:return C=T(S),_(S,dm(e),12);case 12:if(!l||a||!o){S.D(13);break}return _(S,l.oa.removeSegments([o],function(){}),13);case 13:throw C;case 4:return S.return(u)}})}function pm(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function mm(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function fm(e,t){for(var n=[],r=c(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&"video"==i.type?n.push({contentType:nn(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:nn(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function gm(e,t,n){return P(function(r){return _(r,function(e,t,n,r){var i,s,a;return P(function(o){return 1==o.g?r.drmInfo?(i=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new ye(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),s=r.sessionIds.map(function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:fm(r,!1),videoCapabilities:fm(r,!0)}}),_(o,em(t,e,s),2)):o.return():3!=o.g?(a=o.h,_(o,i.remove(a),3)):_(o,i.add(s.filter(function(e){return!a.includes(e.sessionId)})),0)})}(e.V,e.m.drm,n,t),0)})}function xm(e,t,n){function r(){}var i=function(e){for(var t=new Set,n=(e=c(e.streams)).next();!n.done;n=e.next())for(var r=(n=c(n.value.segments)).next();!r.done;r=n.next())null!=(r=r.value).initSegmentKey&&t.add(r.initSegmentKey),t.add(r.dataKey);return Array.from(t)}(n);return nm(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}function vm(e,t,n,r,i){var s={id:r.id,originalId:r.originalId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,kind:r.kind,language:r.language,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout};return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}(r,n.presentationTimeline.ub(),function(n){var a=gp(n),o=void 0;if(!i.has(a)){var l=n.endTime-n.startTime;l=om(t,r.id)*l,l=yp(e.fc,l),i.set(a,new fp(n,l,r.id,!1))}n.g&&(o=gp(n.g),i.has(o)||(l=.5*om(t,r.id),l=yp(e.fc,l),i.set(o,new fp(n.g,l,r.id,!0)))),s.segments.push({pendingInitSegmentRefId:o,initSegmentKey:o?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:a,dataKey:0})}),s}function ym(e){if(e.N.g)throw new ye(2,9,7001)}function _m(){if(!um())throw new ye(2,9,9e3)}function Em(e,t){return P(function(n){return 1==n.g?(e.Uc.push(t),C(n),_(n,t,4)):2!=n.g?n.return(n.h):(R(n),rt(e.Uc,t),j(n,0))})}function bm(e){for(var t=new Set,n=c(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(r=(n=c(e.imageStreams)).next();!r.done;r=n.next())t.add(r.value);for(n=(e=c(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}g(Fp,Ap),Fp.prototype.updateManifestExpiration=function(e,t){var n,r,i,s=this;return P(function(a){return n=jp(s.h,s.g),r=n.store(),i=new Ot,r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new ye(2,9,9012,"Could not find values for "+e))},_(a,Promise.all([n.promise(),i]),0)})},Fp.prototype.Jc=function(e){var t,n,r,i,s,a;return P(function(o){if(1==o.g){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,s=Bp(e.periods[n],i),t.push(s);return _(o,Ad(t),2)}return a=o.h,o.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:a,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata})})},Fp.prototype.Ye=function(e){return{data:e.data}},g(Gp,Ap),Gp.prototype.Jc=function(e){var t,n,r,i,s,a;return P(function(o){if(1==o.g){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var l=e.periods[n],u=[],d=c(l.streams),h=d.next();!h.done;h=d.next())0!=(h=h.value).variantIds.length&&u.push(Vp(h,l.startTime,l.startTime+i));s=u,t.push(s)}return _(o,Ad(t),2)}return a=o.h,o.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:a})})},g(Hp,Ap),(r=Hp.prototype).hasFixedKeySpace=function(){return!1},r.addSegments=function(e){return this.add(this.i,e)},r.addManifests=function(e){return this.add(this.g,e)},r.updateManifest=function(e,t){return function(e,t,n){var r=(e=jp(e.h,e.g)).store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}(this,e,t)},r.Jc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(r=Wp.prototype).init=function(){var t=this,n=new Ot,r=e.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){var e=r.result;t.l=e;var i=e.objectStoreNames;i=i.contains("manifest")&&i.contains("segment")?new Fp(e,"segment","manifest"):null,t.g=i,i=(i=e.objectStoreNames).contains("manifest-v2")&&i.contains("segment-v2")?new Gp(e,"segment-v2","manifest-v2"):null,t.h=i,i=(i=e.objectStoreNames).contains("manifest-v3")&&i.contains("segment-v3")?new Gp(e,"segment-v3","manifest-v3"):null,t.i=i,i=(i=e.objectStoreNames).contains("manifest-v5")&&i.contains("segment-v5")?new Hp(e,"segment-v5","manifest-v5"):null,t.j=i,e=e.objectStoreNames.contains("session-ids")?new Pp(e):null,t.s=e,n.resolve()},r.onupgradeneeded=function(){for(var e=r.result,t=c(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},r.onerror=function(e){n.reject(new ye(2,9,9001,r.error)),e.preventDefault()},n},r.destroy=function(){var e=this;return P(function(t){switch(t.g){case 1:if(!e.g){t.D(2);break}return _(t,e.g.destroy(),2);case 2:if(!e.h){t.D(4);break}return _(t,e.h.destroy(),4);case 4:if(!e.i){t.D(6);break}return _(t,e.i.destroy(),6);case 6:if(!e.j){t.D(8);break}return _(t,e.j.destroy(),8);case 8:if(!e.s){t.D(10);break}return _(t,e.s.destroy(),10);case 10:e.l&&e.l.close(),E(t)}})},r.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},r.getEmeSessionCell=function(){return this.s},r.erase=function(){var t=this;return P(function(n){switch(n.g){case 1:if(!t.g){n.D(2);break}return _(n,t.g.destroy(),2);case 2:if(!t.h){n.D(4);break}return _(n,t.h.destroy(),4);case 4:if(!t.i){n.D(6);break}return _(n,t.i.destroy(),6);case 6:if(!t.j){n.D(8);break}return _(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),_(n,function(){var t=new Ot,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new ye(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,_(n,t.init(),0)}})},$p("idb",function(){return vn()||!e.indexedDB?null:new Wp}),qp.prototype.Ya=function(){return this.i},qp.prototype.oa=function(){return this.h},qp.prototype.key=function(){return this.l},qp.prototype.toString=function(){return this.j},(r=Xp.prototype).configure=function(){},r.start=function(e,t){var n,r,i,s,a,o,l=this;return P(function(c){switch(c.g){case 1:if(n=zp(e),l.g=n,null==n||"manifest"!=n.g)throw new ye(2,1,9004,e);return r=new Lp,C(c),_(c,r.init(),4);case 4:return _(c,Op(r,n.Ya(),n.oa()),5);case 5:return _(c,c.h.getManifests([n.key()]),6);case 6:return i=c.h,s=i[0],a=new Kp(n.Ya(),n.oa()),o=Yp(a,s),t.makeTextStreamsForClosedCaptions(o),c.return(o);case 2:return R(c),_(c,r.destroy(),7);case 7:j(c,0)}})},r.stop=function(){return Promise.resolve()},r.update=function(){},r.onExpirationUpdated=function(e,t){var n,r,i,s,a,o,l,c=this;return P(function(u){switch(u.g){case 1:return n=c.g,r=new Lp,b(u,2,3),_(u,r.init(),5);case 5:return _(u,Op(r,n.Ya(),n.oa()),6);case 6:return _(u,(i=u.h).getManifests([n.key()]),7);case 7:if(s=u.h,a=s[0],o=a.sessionIds.includes(e),l=null==a.expiration||a.expiration>t,!o||!l){u.D(3);break}return _(u,i.updateManifestExpiration(n.key(),t),3);case 3:return R(u),_(u,r.destroy(),10);case 10:j(u,0);break;case 2:T(u),u.D(3)}})},vi["application/x-offline-manifest"]=function(){return new Xp},B("shaka.offline.OfflineScheme",Zp),Zp.plugin=Jp,Rr("offline",Jp),lm.prototype.release=function(e){e==this.g&&(this.g=0,0<this.h.length&&this.h.shift()())},(r=cm.prototype).destroy=function(){return this.N.destroy()},r.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Go(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(Ee("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),Wo(this.m,e)},r.getConfiguration=function(){var e=Ho();return Wo(e,this.m,Ho()),e},r.Mc=function(){return this.V},r.store=function(e,t,n){var r=this,i=this.getConfiguration(),s=new _p(this.V);this.re.push(s),t=function(e,t,n,r,i,s){var a,o,l,u,d,h,p,m,f,g,x,v,y;return P(function(C){switch(C.g){case 1:return _m(),o=a=null,l=new Lp,h=d=u=null,b(C,2,3),_(C,r(),5);case 5:return a=C.h,_(C,function(e,t,n,r){var i,s,a,o,l;return P(function(c){if(1==c.g)return i=null,s=e.V,a={networkingEngine:s,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){}},n.configure(r.manifest),ym(e),_(c,n.start(t,a),2);if(3!=c.g)return o=c.h,ym(e),l=bm(o),_(c,Promise.all(ee(l,function(e){return e.createSegmentIndex()})),3);if(ym(e),i)throw i;return c.return(o)})}(e,t,a,i),6);case 6:if(p=C.h,ym(e),p.presentationTimeline.W()||p.presentationTimeline.Tb())throw new ye(2,9,9005,t);return _(C,function(e,t,n,r){var i;return P(function(s){switch(s.g){case 1:return(i=new Wr({Wb:e.V,onError:n,wd:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(r.drm),_(s,function(e,t,n){return e.ia=!0,e.C=[],e.L=n,zr(e,t)}(i,t.variants,r.offline.usePersistentLicense),2);case 2:return _(s,Kr(i),3);case 3:return _(s,Yr(i),4);case 4:return s.return(i)}})}(e,p,function(e){h=h||e},i),7);case 7:if(o=C.h,ym(e),h)throw h;return _(C,function(e,t){var n,r,i,s,a,o,l,u,d,h,p,m,f,g,x,v,y,C,R,j,w,A,I,k,M,L,D,O;return P(function(P){switch(P.g){case 1:return n={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter(function(e){return wn(e,t,n)})}(e,t.restrictions,n),_(P,In(e,t.offline.usePersistentLicense),2);case 2:for(r=[],i=t.preferredAudioChannelCount,s=t.preferredDecodingAttributes,a=t.preferredVideoCodecs,o=t.preferredAudioCodecs,Tn(e,a,o,i,s),l=c(e.variants),u=l.next();!u.done;u=l.next())d=u.value,r.push($n(d));for(h=c(e.textStreams),p=h.next();!p.done;p=h.next())m=p.value,r.push(Nn(m));for(f=c(e.imageStreams),g=f.next();!g.done;g=f.next())x=g.value,r.push(Fn(x));return _(P,t.offline.trackSelectionCallback(r),3);case 3:for(v=P.h,y=e.presentationTimeline.getDuration(),C=0,R=c(v),j=R.next();!j.done;j=R.next())w=j.value,A=w.bandwidth*y/8,C+=A;return b(P,4),_(P,t.offline.downloadSizeCallback(C),6);case 6:if(!P.h)throw new ye(2,9,9014);S(P,5);break;case 4:if((I=T(P))instanceof ye)throw I;throw new ye(2,9,9015);case 5:for(k=new Set,M=new Set,L=new Set,D=c(v),j=D.next();!j.done;j=D.next())"variant"==(O=j.value).type&&k.add(O.id),"text"==O.type&&M.add(O.id),"image"==O.type&&L.add(O.id);e.variants=e.variants.filter(function(e){return k.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return M.has(e.id)}),e.imageStreams=e.imageStreams.filter(function(e){return L.has(e.id)}),function(e){e.variants.map(function(e){return e.video});var t=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams;for(var n=c(t),r=n.next();!r.done;r=n.next())for(var i=(r=c(t)).next();!i.done;i=r.next());for(t=c(e),n=t.next();!n.done;n=t.next())for(n=c(e),r=n.next();!r.done;r=n.next());}(e),E(P)}})}(p,i),8);case 8:return _(C,l.init(),9);case 9:return ym(e),_(C,Dp(l),10);case 10:return u=C.h,ym(e),m=function(e,t,n,r,i,s){var a=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=rm(t),appMetadata:n,isIncomplete:!1}}(n,t,r),o=i.offline.progressCallback;!function(e,t,n){e.Lf=t,e.Jf=n}(s,function(e,t){a.size=t,o(a,e)},function(t,n){l&&i.offline.usePersistentLicense&&u==n&&Qr(e,"cenc",t)});var l=pm(t)&&!mm(t),u=null;l&&(u=Sm.get(e.i.keySystem));for(var d=new im,h=c(t.textStreams),p=h.next();!p.done;p=h.next())d.g[p.value.id]=52;for(h=c(t.imageStreams),p=h.next();!p.done;p=h.next())am(d,p.value);for(p=c(t.variants),h=p.next();!h.done;h=p.next())sm(d,h.value);return d=function(e,t,n){for(var r=new Map,i=bm(n),s=new Map,a=(i=c(i)).next();!a.done;a=i.next()){var o=vm(e,t,n,a=a.value,r);s.set(a.id,o)}for(e=c(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),Me:Array.from(r.values())}}(s,d,t),s=d.streams,d=d.Me,p=e.i,h=i.offline.usePersistentLicense,p&&h&&(p.initData=[]),{Pg:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Lc(),streams:s,sessionIds:h?Zr(e):[],drmInfo:p,appMetadata:r,isIncomplete:!0},Me:d}}(o,p,t,n,i,s),f=m.Pg,g=m.Me,_(C,u.oa.addManifests([f]),11);case 11:if(x=C.h,ym(e),d=x[0],ym(e),h)throw h;return _(C,function(e,t,n,r,i,s,a,o,l){var u,d;return P(function(h){switch(h.g){case 1:if(u=function(t,u){var d,h,p,m,f,g,x,v;return P(function(y){if(1==y.g){for(d=function(){ym(e)},h={},p=c(t),m=p.next();!m.done;h={bd:h.bd,Ab:h.Ab},m=p.next())h.Ab=m.value,h.bd=void 0,f=xp(h.Ab,s),g=h.Ab.i,x=h.Ab.h,v=function(e){return function(t){return e.bd=t,Promise.resolve()}}(h),bp(i,h.Ab.groupId,f,g,x,v),Cp(i,h.Ab.groupId,function(e){return function(){var t;return P(function(i){if(1==i.g)return t=e.Ab.g,_(i,hm(n,t,{data:e.bd},d),2);r=i.h||r,E(i)})}}(h));return _(y,function(e){return P(function(t){return 1==t.g?_(t,Promise.all(e.g.values()),2):t.return(e.fc.h)})}(i),2)}return u?(ym(e),function(e,t,n,r){if(t.expiration=n.Lc(),n=Zr(n),t.sessionIds=r.offline.usePersistentLicense?n:[],pm(e)&&r.offline.usePersistentLicense&&!n.length)throw new ye(2,9,9007)}(o,r,l,s),_(y,a.updateManifest(n,r),0)):y.D(0)})},d=!1,!pm(o)||!d||mm(o)){h.D(2);break}return _(h,u(t.filter(function(e){return e.h}),!0),3);case 3:ym(e),t=t.filter(function(e){return!e.h});case 2:if(d){h.D(0);break}return _(h,u(t,!1),5);case 5:ym(e),E(h)}})}(e,g,d,f,s,i,u.oa,p,o),12);case 12:return ym(e),v=new qp("manifest",u.path.Ya,u.path.oa,d),C.return(nm(v,f));case 3:return R(C),_(C,l.destroy(),13);case 13:if(!a){C.D(14);break}return _(C,a.stop(),14);case 14:if(!o){C.D(16);break}return _(C,o.destroy(),16);case 16:j(C,0);break;case 2:if(y=T(C),null==d){C.D(18);break}return _(C,dm(d),18);case 18:throw h||y}})}(this,e,t||{},function(){var t;return P(function(s){return 1==s.g?_(s,fi(e,r.V,i.manifest.retryParameters,n||null),2):(t=s.h,s.return(we(t)))})},i,s);var a=new fr(t,function(){return Ep(s)});return a.finally(function(){rt(r.re,s)}),a.then=function(e){return Ee("shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead."),a.promise.then(e)},function(e,t){var n=t.promise;return e.Uc.push(n),t.finally(function(){rt(e.Uc,n)})}(this,a)},r.Cg=function(){return Ee("shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported."),!1},r.remove=function(e){return Em(this,function(e,t){var n,r,i,s,a,o;return P(function(l){switch(l.g){case 1:if(_m(),null==(n=zp(t))||"manifest"!=n.g)throw new ye(2,9,9004,t);return r=n,i=new Lp,C(l),_(l,i.init(),4);case 4:return _(l,Op(i,r.Ya(),r.oa()),5);case 5:return _(l,(s=l.h).getManifests([r.key()]),6);case 6:return a=l.h,o=a[0],_(l,Promise.all([gm(e,o,i),xm(s,r,o)]),2);case 2:return R(l),_(l,i.destroy(),8);case 8:j(l,0)}})}(this,e))},r.eh=function(){return Em(this,(e=this,P(function(h){switch(h.g){case 1:return _m(),t=e.V,n=e.m.drm,r=new Lp,i=!1,C(h),_(h,r.init(),4);case 4:s=[],function(e,t){e.g.forEach(function(e){t(e.getEmeSessionCell())})}(r,function(e){return s.push(e)}),a=c(s),o=a.next();case 5:if(o.done){h.D(2);break}return _(h,(l=o.value).getAll(),8);case 8:return u=h.h,_(h,em(n,t,u),9);case 9:return d=h.h,_(h,l.remove(d),10);case 10:d.length!=u.length&&(i=!0),o=a.next(),h.D(5);break;case 2:return R(h),_(h,r.destroy(),11);case 11:j(h,3);break;case 3:return h.return(!i)}})));var e,t,n,r,i,s,a,o,l,u,d},r.list=function(){return Em(this,P(function(r){switch(r.g){case 1:return _m(),e=[],t=new Lp,C(r),_(r,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){t({Ya:n,oa:r},e)})})}(t,function(t,r){n=n.then(function(){return P(function(n){if(1==n.g)return _(n,r.getAllManifests(),2);n.h.forEach(function(n,r){var i=nm(new qp("manifest",t.Ya,t.oa,r),n);e.push(i)}),E(n)})})}),_(r,n,2);case 2:return R(r),_(r,t.destroy(),6);case 6:j(r,3);break;case 3:return r.return(e)}}));var e,t,n},B("shaka.offline.Storage",cm),cm.deleteAll=function(){var e;return P(function(t){return 1==t.g?(e=new Lp,C(t),_(t,function(e){var t,n;return P(function(r){return 1==r.g?(t=Array.from(e.g.values()),(n=0<t.length)||Np.forEach(function(e){(e=e())&&t.push(e)}),_(r,Promise.all(t.map(function(e){return e.erase()})),2)):n?r.D(0):_(r,Promise.all(t.map(function(e){return e.destroy()})),0)})}(e),2)):5!=t.g?(R(t),_(t,e.destroy(),5)):j(t,0)})},cm.prototype.list=cm.prototype.list,cm.prototype.removeEmeSessions=cm.prototype.eh,cm.prototype.remove=cm.prototype.remove,cm.prototype.getStoreInProgress=cm.prototype.Cg,cm.prototype.store=cm.prototype.store,cm.prototype.getNetworkingEngine=cm.prototype.Mc,cm.prototype.getConfiguration=cm.prototype.getConfiguration,cm.prototype.configure=cm.prototype.configure,cm.prototype.destroy=cm.prototype.destroy,cm.support=um;var Cm=new lm,Sm=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function Tm(){}function Rm(){for(var e=c(wm),t=e.next();!t.done;t=e.next()){t=t.value;try{t.Tf()}catch(n){W("Error installing polyfill!",n)}}}function jm(e,t){for(var n={priority:t||0,Tf:e},r=c(re(wm)),i=r.next();!i.done;i=r.next()){var s=(i=i.value).wa;if(i.item.priority<n.priority)return void wm.splice(s,0,n)}wm.push(n)}Cc.offline=um,B("shaka.polyfill",Tm),Tm.register=jm,Tm.installAll=Rm;var wm=[];function Am(){}function Im(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=c(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())km(t.value)}function km(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function Mm(){}function Pm(){Ex()}function Lm(){}function Dm(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Om),document.addEventListener("webkitfullscreenerror",Om),document.addEventListener("mozfullscreenchange",Om),document.addEventListener("mozfullscreenerror",Om),document.addEventListener("MSFullscreenChange",Om),document.addEventListener("MSFullscreenError",Om)}}function Om(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function $m(){}function Nm(){}function Fm(){}function Bm(){(vn()||yn()||En("PlayStation 5")||!navigator.mediaCapabilities)&&(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Gm=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Um)}function Um(e){var t,n,r,i,s,a,o,l,c,u;return P(function(d){switch(d.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return d.return(t);if("media-source"==e.type){if(!fn()||e.video&&(n=e.video.contentType,!MediaSource.isTypeSupported(n))||e.audio&&(r=e.audio.contentType,!MediaSource.isTypeSupported(r)))return d.return(t)}else{if("file"!=e.type)return d.return(t);if(e.video&&!gn(e.video.contentType)||e.audio&&!gn(e.audio.contentType))return d.return(t)}return e.keySystemConfiguration?(i=e.keySystemConfiguration,s=[],a=[],i.audio&&(o={robustness:i.audio.robustness||"",contentType:e.audio.contentType},s.push(o)),i.video&&(l={robustness:i.video.robustness||"",contentType:e.video.contentType},a.push(l)),c={initDataTypes:[i.initDataType],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},s.length&&(c.audioCapabilities=s),a.length&&(c.videoCapabilities=a),b(d,3),_(d,navigator.requestMediaKeySystemAccess(i.keySystem,[c]),5)):(t.supported=!0,d.return(Promise.resolve(t)));case 5:u=d.h,S(d,4);break;case 3:T(d);case 4:u&&(t.supported=!0,t.keySystemAccess=u);case 2:return d.return(t)}})}Tm.Aria=Am,Am.install=Im,jm(Im),Tm.EncryptionScheme=Mm,Mm.install=Pm,jm(Pm,-2),Tm.Fullscreen=Lm,Lm.install=Dm,jm(Dm),Tm.MathRound=$m,$m.install=Nm,jm(Nm),Tm.MediaCapabilities=Fm,Fm.install=Bm;var Gm=null;function Vm(){}function Hm(){var t=_n();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some(function(e){return e.startsWith("codecs=")})?cast.__platform__.canDisplayType(t):e(t)}}():t?(function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),12>=t?(Wm(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):Wm()):(En("Tizen 2")||En("Tizen 3")||En("Tizen 4"))&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=sn(t)&&e(t)}}()),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;En("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(e){return e.startsWith("codecs=")});if(0>r)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),s=i.findIndex(function(e){return e.startsWith("vp09")});return 0<=s&&(i[s]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}()}function Wm(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return(n=e.apply(this,n)).abort=function(){},n}}function qm(){}function zm(){screen.orientation||null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new Km;screen.orientation=n,t(),e.addEventListener("orientationchange",function(){t();var e=new U("change");n.dispatchEvent(e)})}()}function Km(){J.call(this),this.type="",this.angle=0}function Ym(){}function Qm(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Zm,e.MediaKeys=tf,e.MediaKeySystemAccess=ef,navigator.requestMediaKeySystemAccess=Xm)}function Xm(e,t){try{var n=new ef(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function Zm(e){var t=this.mediaKeys;return t&&t!=e&&nf(t,null),delete this.mediaKeys,(this.mediaKeys=e)?nf(e,this):Promise.resolve()}function Jm(e){if(kt(e=It(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Gt(e=Bt(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=At(e),this.dispatchEvent(t)}function ef(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=c(t),r=n.next();!r.done;r=n.next()){var i=r.value;if("required"==i.persistentState)r=null;else{r={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label};var s=!1,a=!1;if(i.audioCapabilities)for(var o=c(i.audioCapabilities),l=o.next();!l.done;l=o.next())(l=l.value).contentType&&(s=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(r.audioCapabilities.push(l),a=!0));if(i.videoCapabilities)for(l=(i=c(i.videoCapabilities)).next();!l.done;l=i.next())(o=l.value).contentType&&(s=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(r.videoCapabilities.push(o),a=!0));s||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),r=a?r:null}if(r)return void(this.g=r)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function tf(e){this.g=new WebKitMediaKeys(e),this.h=new Or}function nf(e,t){if(e.h.Yb(),!t)return Promise.resolve();e.h.o(t,"webkitneedkey",Jm);try{return xa(t,HTMLMediaElement.HAVE_METADATA,e.h,function(){t.webkitSetMediaKeys(e.g)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function rf(e){J.call(this),this.j=null,this.l=e,this.i=this.g=null,this.h=new Or,this.sessionId="",this.expiration=NaN,this.closed=new Ot,this.keyStatuses=new af}function sf(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new U("keystatuseschange"),e.dispatchEvent(n)}function af(){this.size=0,this.g=void 0}function of(){}function lf(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,e.MediaKeys=pf,e.MediaKeySystemAccess=df,navigator.requestMediaKeySystemAccess=cf,HTMLMediaElement.prototype.setMediaKeys=hf)}function cf(e,t){try{var n=new df(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function uf(e){if(e.initData){var t=new CustomEvent("encrypted");t.initDataType="cenc",t.initData=At(function(e){if(!e)return e;var t=new ku(e);if(1>=t.data.length)return e;e=[];for(var n={},r=(t=c(t.data)).next();!r.done;n={cd:n.cd},r=t.next())n.cd=r.value,e.some(function(e){return function(t){return jt(t,e.cd)}}(n))||e.push(n.cd);return Xt.apply(Wt,u(e))}(e.initData)),this.dispatchEvent(t)}}function df(e,t){this.keySystem=e;for(var n=!1,r=c(t),i=r.next();!i.done;i=r.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(i=i.value).initDataTypes,sessionTypes:["temporary"],label:i.label},a=!1;if(i.audioCapabilities)for(var o=c(i.audioCapabilities),l=o.next();!l.done;l=o.next())(l=l.value).contentType&&(a=!0,MSMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(s.audioCapabilities.push(l),n=!0));if(i.videoCapabilities)for(l=(o=c(i.videoCapabilities)).next();!l.done;l=o.next())(l=l.value).contentType&&(a=!0,MSMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(s.videoCapabilities.push(l),n=!0));if(a||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(n=!1),n)return void(this.g=s)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function hf(e){var t=this.mediaKeys;return t&&t!=e&&mf(t,null),delete this.mediaKeys,(this.mediaKeys=e)?mf(e,this):Promise.resolve()}function pf(e){this.g=new MSMediaKeys(e),this.h=new Or}function mf(e,t){if(e.h.Yb(),!t)return Promise.resolve();e.h.o(t,"msneedkey",uf);try{return xa(t,HTMLMediaElement.HAVE_METADATA,e.h,function(){t.msSetMediaKeys(e.g)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function ff(e){J.call(this),this.j=null,this.l=e,this.i=this.g=null,this.h=new Or,this.sessionId="",this.expiration=NaN,this.closed=new Ot,this.keyStatuses=new xf}function gf(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new U("keystatuseschange"),e.dispatchEvent(n)}function xf(){this.size=0,this.g=void 0}function vf(){}function yf(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=_f,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Ef,e.MediaKeys=bf,e.MediaKeySystemAccess=Cf)}function _f(){return Promise.reject(Error("The key system specified is not supported."))}function Ef(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function bf(){throw new TypeError("Illegal constructor.")}function Cf(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Sf(){}function Tf(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Nf="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=jf,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=wf,e.MediaKeys=If,e.MediaKeySystemAccess=Af}}function Rf(e){return Nf?Nf+e.charAt(0).toUpperCase()+e.slice(1):e}function jf(e,t){try{var n=new Af(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function wf(e){var t=this.mediaKeys;return t&&t!=e&&kf(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&kf(e,this),Promise.resolve()}function Af(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var s=c(t),a=s.next();!a.done;a=s.next()){var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(a=a.value).initDataTypes,sessionTypes:["temporary"],label:a.label},l=!1;if(a.audioCapabilities)for(var u=c(a.audioCapabilities),d=u.next();!d.done;d=u.next())(d=d.value).contentType&&(l=!0,i.canPlayType(d.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(d),r=!0));if(a.videoCapabilities)for(d=(u=c(a.videoCapabilities)).next();!d.done;d=u.next())(d=d.value).contentType&&(l=!0,i.canPlayType(d.contentType,this.g)&&(o.videoCapabilities.push(d),r=!0));if(l||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==a.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=o)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function If(e){this.l=e,this.g=null,this.h=new Or,this.i=[],this.j=new Map}function kf(e,t){e.g=t,e.h.Yb();var n=Nf;t&&(e.h.o(t,n+"needkey",function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=At(t.initData),e.g.dispatchEvent(n)}),e.h.o(t,n+"keymessage",function(t){var n=Mf(e,t.sessionId);n&&(t=new U("message",t=(new Map).set("messageType",null==n.keyStatuses.g?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))}),e.h.o(t,n+"keyadded",function(t){(t=Mf(e,t.sessionId))&&(Of(t,"usable"),t.g&&t.g.resolve(),t.g=null)}),e.h.o(t,n+"keyerror",function(t){var n=Mf(e,t.sessionId);n&&n.handleError(t)}))}function Mf(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Pf(e,t,n){J.call(this),this.j=e,this.s=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Ot,this.keyStatuses=new $f}function Lf(e,t,n){if(e.s)return Promise.reject(Error("The session is already initialized."));e.s=!0;try{if("persistent-license"==e.l)if(n)var r=It(Gt("LOAD_SESSION|"+n));else{var i=Gt("PERSISTENT|");r=Xt(i,t)}else r=It(t)}catch(a){return Promise.reject(a)}e.h=new Ot;var s=Rf("generateKeyRequest");try{e.j[s](e.i,r)}catch(a){if("InvalidStateError"!=a.name)return e.h=null,Promise.reject(a);new mn(function(){try{e.j[s](e.i,r)}catch(t){e.h.reject(t),e.h=null}}).U(.01)}return e.h}function Df(e,t,n){if(e.g)e.g.then(function(){return Df(e,t,n)}).catch(function(){return Df(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var r=Ft(n),i=JSON.parse(r);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Kt(i.keys[0].k),i=Kt(i.keys[0].kid)}else r=It(n),i=null;var s=Rf("addKey");try{e.j[s](e.i,r,i,e.sessionId)}catch(a){e.g.reject(a),e.g=null}}}function Of(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new U("keystatuseschange"),e.dispatchEvent(n)}function $f(){this.size=0,this.g=void 0}Fm.originalMcap=Gm,jm(Bm,-1),Tm.MediaSource=Vm,Vm.install=Hm,jm(Hm),Tm.Orientation=qm,qm.install=zm,g(Km,J),Km.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Km.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},jm(zm),Tm.PatchedMediaKeysApple=Ym,Ym.install=Qm,ef.prototype.createMediaKeys=function(){var e=new tf(this.keySystem);return Promise.resolve(e)},ef.prototype.getConfiguration=function(){return this.g},tf.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new rf(this.g)},tf.prototype.setServerCertificate=function(){return Promise.resolve(!1)},g(rf,J),(r=rf.prototype).generateRequest=function(e,t){var n=this;this.g=new Ot;try{var r=this.l.createSession("video/mp4",It(t));this.j=r,this.sessionId=r.sessionId||"",this.h.o(this.j,"webkitkeymessage",function(e){n.g&&(n.g.resolve(),n.g=null),e=new U("message",e=(new Map).set("messageType",null==n.keyStatuses.g?"license-request":"license-renewal").set("message",At(e.message))),n.dispatchEvent(e)}),this.h.o(r,"webkitkeyadded",function(){n.i&&(sf(n,"usable"),n.i.resolve(),n.i=null)}),this.h.o(r,"webkitkeyerror",function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.j.error,null!=n.g)n.g.reject(e),n.g=null;else if(null!=n.i)n.i.reject(e),n.i=null;else switch(n.j.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:sf(n,"output-not-allowed");break;default:sf(n,"internal-error")}}),sf(this,"status-pending")}catch(e2){this.g.reject(e2)}return this.g},r.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},r.update=function(e){this.i=new Ot;try{this.j.update(It(e))}catch(t){this.i.reject(t)}return this.i},r.close=function(){try{this.j.close(),this.closed.resolve(),this.h.Yb()}catch(Oy){this.closed.reject(Oy)}return this.closed},r.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(r=af.prototype).forEach=function(e){this.g&&e(this.g,pi.value())},r.get=function(e){if(this.has(e))return this.g},r.has=function(e){var t=pi.value();return!(!this.g||!jt(e,t))},r.entries=function(){},r.keys=function(){},r.values=function(){},jm(Qm),Tm.PatchedMediaKeysMs=of,of.install=lf,df.prototype.createMediaKeys=function(){var e=new pf(this.keySystem);return Promise.resolve(e)},df.prototype.getConfiguration=function(){return this.g},pf.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new ff(this.g)},pf.prototype.setServerCertificate=function(){return Promise.resolve(!1)},g(ff,J),(r=ff.prototype).generateRequest=function(e,t){var n=this;this.g=new Ot;try{this.j=this.l.createSession("video/mp4",It(t),null),this.h.o(this.j,"mskeymessage",function(e){n.g&&(n.g.resolve(),n.g=null),e=new U("message",e=(new Map).set("messageType",null==n.keyStatuses.g?"license-request":"license-renewal").set("message",At(e.message))),n.dispatchEvent(e)}),this.h.o(this.j,"mskeyadded",function(){n.g?(gf(n,"usable"),n.g.resolve(),n.g=null):n.i&&(gf(n,"usable"),n.i.resolve(),n.i=null)}),this.h.o(this.j,"mskeyerror",function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=n.j.error,null!=n.g)n.g.reject(e),n.g=null;else if(null!=n.i)n.i.reject(e),n.i=null;else switch(n.j.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:gf(n,"output-not-allowed");break;default:gf(n,"internal-error")}}),gf(this,"status-pending")}catch(r){this.g.reject(r)}return this.g},r.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},r.update=function(e){this.i=new Ot;try{this.j.update(It(e))}catch(t){this.i.reject(t)}return this.i},r.close=function(){try{this.j.close(),this.closed.resolve(),this.h.Yb()}catch(Oy){this.closed.reject(Oy)}return this.closed},r.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(r=xf.prototype).forEach=function(e){this.g&&e(this.g,pi.value())},r.get=function(e){if(this.has(e))return this.g},r.has=function(e){var t=pi.value();return!(!this.g||!jt(e,t))},r.entries=function(){},r.keys=function(){},r.values=function(){},jm(lf),Tm.PatchedMediaKeysNop=vf,vf.install=yf,bf.prototype.createSession=function(){},bf.prototype.setServerCertificate=function(){},Cf.prototype.getConfiguration=function(){},Cf.prototype.createMediaKeys=function(){},jm(yf,-10),Tm.PatchedMediaKeysWebkit=Sf,Sf.install=Tf,Af.prototype.createMediaKeys=function(){var e=new If(this.g);return Promise.resolve(e)},Af.prototype.getConfiguration=function(){return this.h},If.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.g||document.createElement("video");return t.src||(t.src="about:blank"),e=new Pf(t,this.l,e),this.i.push(e),e},If.prototype.setServerCertificate=function(){return Promise.resolve(!1)},g(Pf,J),(r=Pf.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Of(this,"output-restricted"):Of(this,1==t?"expired":"internal-error"))},r.generateRequest=function(e,t){return Lf(this,t,null)},r.load=function(e){return"persistent-license"==this.l?Lf(this,null,e):Promise.reject(Error("Not a persistent session."))},r.update=function(e){var t=new Ot;return Df(this,t,e),t},r.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Rf("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},r.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(r=$f.prototype).forEach=function(e){this.g&&e(this.g,pi.value())},r.get=function(e){if(this.has(e))return this.g},r.has=function(e){var t=pi.value();return!(!this.g||!jt(e,t))},r.entries=function(){},r.keys=function(){},r.values=function(){};var Nf="";function Ff(){}function Bf(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Gf,Object.defineProperty(t,"disablePictureInPicture",{get:Hf,set:Wf,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Vf,document.addEventListener("webkitpresentationmodechanged",Uf,!0))}}function Uf(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Gf(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Vf(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Hf(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Wf(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function qf(){}function zf(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=Kf))}function Kf(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function Yf(){}function Qf(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=Xf)}function Xf(){return new Promise(function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(t,n){e({usage:t,quota:n})},t)})}function Zf(){}function Jf(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}function eg(){}function tg(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=ng)}}function ng(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function rg(){}function ig(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=sg;else if(6==n)t=ag;else{try{var r=!!sg(1,2,"")}catch(i){r=!1}r&&(t=sg)}t&&(e.VTTCue=function(e,n,r){return t(e,n,r)})}}function sg(t,n,r){return new e.TextTrackCue(t,n,r)}function ag(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function og(){}jm(Tf),Tm.PiPWebkit=Ff,Ff.install=Bf,jm(Bf),Tm.RandomUUID=qf,qf.install=zf,jm(zf),Tm.StorageEstimate=Yf,Yf.install=Qf,jm(Qf),Tm.VideoPlayPromise=Zf,Zf.install=Jf,jm(Jf),Tm.VideoPlaybackQuality=eg,eg.install=tg,jm(tg),Tm.VTTCue=rg,rg.install=ig,jm(ig),og.prototype.parseInit=function(){},og.prototype.parseMedia=function(e,t){for(var n=null,r=[],i=Ft(e).split(/\r?\n/),s=(i=c(i)).next();!s.done;s=i.next())if((s=s.value)&&!/^\s+$/.test(s)&&(s=lg.exec(s))){var a=cg.exec(s[1]);s=new at(a=60*parseInt(a[1],10)+parseFloat(a[2].replace(",",".")),t.segmentEnd?t.segmentEnd:a+2,s[2]),n&&(n.endTime=a,r.push(n)),n=s}return n&&r.push(n),r},B("shaka.text.LrcTextParser",og),og.prototype.parseMedia=og.prototype.parseMedia,og.prototype.parseInit=og.prototype.parseInit;var lg=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,cg=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function ug(){}function dg(e,t,n,r,i,s,a,o,l,u,d){var h=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!d)return null;var p=document.createElement("span");p.textContent=e.textContent}else p=e;for(var m=null,f=c($g),g=f.next();!g.done&&!(m=xg(p,"backgroundImage",r,"#",g.value)[0]);g=f.next());if(f=d,("p"==e.nodeName||m)&&(d=!0),o="default"==(p.getAttribute("xml:space")||(o?"default":"preserve")),e=[],!(g=Array.from(p.childNodes).every(function(e){return e.nodeType==Node.TEXT_NODE})))for(var x=c(p.childNodes),v=x.next();!v.done;v=x.next())(v=dg(v.value,t,n,r,i,s,a,o,l,p,d))&&e.push(v);r=null!=u,x=/\S/.test(p.textContent);var y=p.hasAttribute("begin")||p.hasAttribute("end")||p.hasAttribute("dur");if(!(y||x||"br"==p.tagName||0!=e.length||r&&!o))return null;for(x=(v=yg(p,n)).start,v=v.end;h&&h.nodeType==Node.ELEMENT_NODE&&"tt"!=h.tagName;)x=(v=vg(h,n,x,v)).start,v=v.end,h=h.parentNode;if(null==x&&(x=0),x+=t,v=null==v?1/0:v+t,!y&&0<e.length)for(x=1/0,v=0,n=(t=c(e)).next();!n.done;n=t.next())n=n.value,x=Math.min(x,n.startTime),v=Math.max(v,n.endTime);if("br"==p.tagName)return(i=new at(x,v,"")).lineBreak=!0,i;if(t="",g&&(t=p.textContent,o&&(t=(t=t.trim()).replace(/\s+/g," "))),(t=new at(x,v,t)).nestedCues=e,d||(t.isContainer=!0),l&&(t.cellResolution=l),l=xg(p,"region",s,"")[0],p.hasAttribute("region")&&l&&l.getAttribute("xml:id")){var _=l.getAttribute("xml:id");t.region=a.filter(function(e){return e.id==_})[0]}return a=l,u&&r&&!p.getAttribute("region")&&!p.getAttribute("style")&&(a=xg(u,"region",s,"")[0]),function(e,t,n,r,i,s,a){if("rtl"==pg(t,n,i,"direction",s=s||a)&&(e.direction="rtl"),"tb"==(a=pg(t,n,i,"writingMode",s))||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=pt),(a=pg(t,n,i,"textAlign",!0))?(e.positionAlign=Lg[a],e.lineAlign=Pg[a],e.textAlign=ut[a.toUpperCase()]):e.textAlign="start",(a=pg(t,n,i,"displayAlign",!0))&&(e.displayAlign=ht[a.toUpperCase()]),(a=pg(t,n,i,"color",s))&&(e.color=a),(a=pg(t,n,i,"backgroundColor",s))&&(e.backgroundColor=a),(a=pg(t,n,i,"border",s))&&(e.border=a),(a=pg(t,n,i,"fontFamily",s))&&(e.fontFamily=a),(a=pg(t,n,i,"fontWeight",s))&&"bold"==a&&(e.fontWeight=700),a=pg(t,n,i,"wrapOption",s),e.wrapLine=!a||"noWrap"!=a,(a=pg(t,n,i,"lineHeight",s))&&a.match(Tg)&&(e.lineHeight=a),(a=pg(t,n,i,"fontSize",s))&&(a.match(Tg)||a.match(Sg))&&(e.fontSize=a),(a=pg(t,n,i,"fontStyle",s))&&(e.fontStyle=bt[a.toUpperCase()]),r){a=r.getAttribute("imageType")||r.getAttribute("imagetype");var o=r.getAttribute("encoding");r=r.textContent.trim(),"PNG"==a&&"Base64"==o&&r&&(e.backgroundImage="data:image/png;base64,"+r)}(r=pg(t,n,i,"textOutline",s))&&((r=r.split(" "))[0].match(Tg)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(Tg)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=pg(t,n,i,"letterSpacing",s))&&r.match(Tg)&&(e.letterSpacing=r),(r=pg(t,n,i,"linePadding",s))&&r.match(Tg)&&(e.linePadding=r),(s=pg(t,n,i,"opacity",s))&&(e.opacity=parseFloat(s)),(n=mg(n,i,"textDecoration"))&&hg(e,n),(t=fg(t,i,"textDecoration"))&&hg(e,t)}(t,p,a,m,i,f,0==e.length),t}function hg(e,t){for(var n=c(t.split(" ")),r=n.next();!r.done;r=n.next())switch(r.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&rt(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&rt(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&rt(e.textDecoration,"overline")}}function pg(e,t,n,r,i){return i=void 0===i||i,(e=fg(e,n,r))?e:i?mg(t,n,r):null}function mg(e,t,n){if(!e)return null;var r=Nu(e,Og,n);return r||gg(e,t,n)}function fg(e,t,n){var r=Nu(e,Og,n);return r||gg(e,t,n)}function gg(e,t,n){e=xg(e,"style",t,"");for(var r=null,i=0;i<e.length;i++){var s=$u(e[i],"urn:ebu:tt:style",n);s||(s=Nu(e[i],Og,n)),s||(s=fg(e[i],t,n)),s&&(r=s)}return r}function xg(e,t,n,r,i){var s=[];if(!e||1>n.length)return s;var a=e;for(e=null;a&&!(e=i?$u(a,i,t):a.getAttribute(t))&&(a=a.parentNode)instanceof Element;);if(t=e)for(i=(t=c(t.split(" "))).next();!i.done;i=t.next())for(i=i.value,a=(e=c(n)).next();!a.done;a=e.next())if(r+(a=a.value).getAttribute("xml:id")==i){s.push(a);break}return s}function vg(e,t,n,r){return e=yg(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:n,end:r}}function yg(e,t){var n=_g(e.getAttribute("begin"),t),r=_g(e.getAttribute("end"),t),i=_g(e.getAttribute("dur"),t);return null==r&&null!=i&&(r=n+i),{start:n,end:r}}function _g(e,t){var n=null;if(jg.test(e)){n=jg.exec(e);var r=Number(n[1]),i=Number(n[2]),s=Number(n[3]),a=Number(n[4]);n=(s+=(a+=(Number(n[5])||0)/t.h)/t.frameRate)+60*i+3600*r}else if(wg.test(e))n=Eg(wg,e);else if(Ag.test(e))n=Eg(Ag,e);else if(Ig.test(e))n=Ig.exec(e),n=Number(n[1])/t.frameRate;else if(kg.test(e))n=kg.exec(e),n=Number(n[1])/t.g;else if(Mg.test(e))n=Eg(Mg,e);else if(e)throw new ye(2,2,2001,"Could not parse cue time range in TTML");return n}function Eg(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function bg(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}hn["application/x-subtitle-lrc"]=function(){return new og},ug.prototype.parseInit=function(){},ug.prototype.parseMedia=function(e,t){var n=Ft(e),r=[],i=new DOMParser,s=null;if(""==n)return r;try{s=i.parseFromString(n,"text/xml")}catch(_){throw new ye(2,2,2005,"Failed to parse TTML.")}if(s){if(n=s.getElementsByTagName("parsererror")[0])throw new ye(2,2,2005,n.textContent);var a=s.getElementsByTagName("tt")[0];if(!a)throw new ye(2,2,2005,"TTML does not contain <tt> tag.");if(!(s=a.getElementsByTagName("body")[0]))return[];var o=Nu(a,Dg,"frameRate"),l=Nu(a,Dg,"subFrameRate"),u=Nu(a,Dg,"frameRateMultiplier"),d=Nu(a,Dg,"tickRate"),h=Nu(a,Dg,"cellResolution");if(n=a.getAttribute("xml:space")||"default",i=Nu(a,Og,"extent"),"default"!=n&&"preserve"!=n)throw new ye(2,2,2005,"Invalid xml:space value: "+n);n="default"==n,o=new bg(o,l,u,d),h=h&&(h=/^(\d+) (\d+)$/.exec(h))?{columns:parseInt(h[1],10),rows:parseInt(h[2],10)}:null,l=(l=a.getElementsByTagName("metadata")[0])?function(e){return Array.from(e.childNodes).filter(function(e){return e instanceof Element})}(l):[],u=Array.from(a.getElementsByTagName("style")),d=[];for(var p=c(a=Array.from(a.getElementsByTagName("region"))),m=p.next();!m.done;m=p.next()){var f=m.value;m=new Ct;var g=f.getAttribute("xml:id");if(g){m.id=g;var x,v,y=null;i&&(y=Cg.exec(i)||Rg.exec(i)),g=y?Number(y[1]):null,y=y?Number(y[2]):null,(x=mg(f,u,"extent"))&&null!=(x=(v=Cg.exec(x))||Rg.exec(x))&&(m.width=Number(x[1]),m.height=Number(x[2]),v||(null!=g&&(m.width=100*m.width/g),null!=y&&(m.height=100*m.height/y)),m.widthUnits=v||null!=g?St:0,m.heightUnits=v||null!=y?St:0),(f=mg(f,u,"origin"))&&null!=(x=(v=Cg.exec(f))||Rg.exec(f))&&(m.viewportAnchorX=Number(x[1]),m.viewportAnchorY=Number(x[2]),v||(null!=y&&(m.viewportAnchorY=100*m.viewportAnchorY/y),null!=g&&(m.viewportAnchorX=100*m.viewportAnchorX/g)),m.viewportAnchorUnits=v||null!=g?St:0)}else m=null;m&&d.push(m)}if(Du(s,"p").length)throw new ye(2,2,2001,"<p> can only be inside <div> in TTML");for(p=(i=c(Du(s,"div"))).next();!p.done;p=i.next())if(Du(p.value,"span").length)throw new ye(2,2,2001,"<span> can only be inside <p> in TTML");(s=dg(s,t.periodStart,o,l,u,a,d,n,h,null,!1))&&r.push(s)}return r},B("shaka.text.TtmlTextParser",ug),ug.prototype.parseMedia=ug.prototype.parseMedia,ug.prototype.parseInit=ug.prototype.parseInit;var Cg=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Sg=/^(\d{1,2}(?:\.\d+)?|100)%$/,Tg=/^(\d+px|\d+em|\d*\.?\d+c)$/,Rg=/^(\d+)px (\d+)px$/,jg=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,wg=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Ag=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Ig=/^(\d*(?:\.\d*)?)f$/,kg=/^(\d*(?:\.\d*)?)t$/,Mg=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Pg={left:gt,center:"center",right:"end",start:gt,end:"end"},Lg={left:"line-left",center:"center",right:"line-right"},Dg=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Og=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],$g=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function Ng(){this.C=new ug}function Fg(){}function Bg(e){for(var t=c(Object.entries(vt)),n=t.next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value;var i=new at(0,0,"");i.color=r,e.set(n,i)}for(n=(t=c(Object.entries(yt))).next();!n.done;n=t.next())n=(r=c(n.value)).next().value,r=r.next().value,(i=new at(0,0,"")).backgroundColor=r,e.set(n,i)}function Ug(e,t,n){0===n.size&&Bg(n),e=function(e){for(var t=[],n=-1,r="",i=0;i<e.length;i++)if("/"===e[i]){var s=e.indexOf(">",i);if(s<=i)return e;s=e.substring(i+1,s);var a=t.pop();if(!s||!a)return e;if(a===s)r+="/"+s+">";else{if(!a.startsWith("c.")||"c"!==s)return e;r+="/"+a+">"}i+=s.length+1}else"<"===e[i]?n=i+1:">"===e[i]&&0<n&&(t.push(e.substr(n,i-n)),n=-1),r+=e[i];return r}(e);var r=Qu("<span>"+e+"</span>","span");if(r){var i=[];if(1==(r=r.childNodes).length){var s=r[0];if(s.nodeType==Node.TEXT_NODE||s.nodeType==Node.CDATA_SECTION_NODE)return void(t.payload=e)}for(r=(e=c(r)).next();!r.done;r=e.next())Vg(r.value,t,i,n);t.nestedCues=i}else t.payload=e}function Gg(e,t){return e&&0<e.length?e:t}function Vg(e,t,n,r){var i=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var s=c(e.nodeName.split(/[ .]+/)),a=s.next();!a.done;a=s.next()){if(a=a.value,r.has(a)){var o=r.get(a);o&&(i.backgroundColor=Gg(o.backgroundColor,i.backgroundColor),i.color=Gg(o.color,i.color),i.fontFamily=Gg(o.fontFamily,i.fontFamily),i.fontSize=Gg(o.fontSize,i.fontSize),i.fontWeight=o.fontWeight,i.fontStyle=o.fontStyle,i.opacity=o.opacity,i.wrapLine=o.wrapLine)}switch(a){case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline")}}if(Bu(e))for(s=!0,r=c(e.textContent.split("\n")),e=r.next();!e.done;e=r.next())e=e.value,s||((s=t.clone()).lineBreak=!0,n.push(s)),0<e.length&&((s=i.clone()).payload=e,n.push(s)),s=!1;else for(e=(t=c(e.childNodes)).next();!e.done;e=t.next())Vg(e.value,i,n,r)}function Hg(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?ct:ut[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(r=/^region:(.*)$/.exec(t))?(t=function(e,t){var n=e.filter(function(e){return e.id==t});return n.length?n[0]:null}(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=xt[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=ft,e.line=Number(n[1]),n[2]&&(e.lineAlign=xt[n[2].toUpperCase()]))}function Wg(e){if(null==(e=Eh(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function qg(){this.g=null}function zg(e,t,n){var r,i,s;return(new Ci).box("payl",Ri(function(e){r=Ft(e)})).box("iden",Ri(function(e){i=Ft(e)})).box("sttg",Ri(function(e){s=Ft(e)})).parse(e),r?function(e,t,n,r,i){if(r=new at(r,i,""),Ug(e,r,new Map),t&&(r.id=t),n)for(e=new yh(n),t=bh(e);t;)Hg(r,t,[]),_h(e),t=bh(e);return r}(r,i,s,t,n):null}function Kg(){}function Yg(e){if(null==(e=Eh(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Qg(){this.C=new Fg}function Xg(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=c((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n")+"\n\n";return t}function Zg(){}function Jg(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=ex(n))&&(e.color=n),(n=t.BackColour)&&(n=ex(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=dt,e.textAlign="start";break;case 2:e.displayAlign=dt,e.textAlign=ct;break;case 3:e.displayAlign=dt,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=ct;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=ct;break;case 11:e.displayAlign="center",e.textAlign="end"}(n=t.AlphaLevel)&&(e.opacity=parseFloat(n))}function ex(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function tx(e){return 3600*((e=ox.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}hn["application/ttml+xml"]=function(){return new ug},Ng.prototype.parseInit=function(e){var t=!1;if((new Ci).box("moov",Si).box("trak",Si).box("mdia",Si).box("minf",Si).box("stbl",Si).Z("stsd",Ti).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new ye(2,2,2007)},Ng.prototype.parseMedia=function(e,t){var n=this,r=!1,i=[];if((new Ci).box("mdat",Ri(function(e){r=!0,i=i.concat(n.C.parseMedia(e,t))})).parse(e,!1),!r)throw new ye(2,2,2007);return i},B("shaka.text.Mp4TtmlParser",Ng),Ng.prototype.parseMedia=Ng.prototype.parseMedia,Ng.prototype.parseInit=Ng.prototype.parseInit,hn['application/mp4; codecs="stpp"']=function(){return new Ng},hn['application/mp4; codecs="stpp.ttml"']=function(){return new Ng},hn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Ng},hn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Ng},Fg.prototype.parseInit=function(){},Fg.prototype.parseMedia=function(e,t){var n=Ft(e),r=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(r[0]))throw new ye(2,2,2e3);if(n=t.periodStart,r[0].includes("X-TIMESTAMP-MAP")){var i=r[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),s=r[0].match(/MPEGTS:(\d+)/m);if(i&&s){if(null==(n=Wg(new yh(i[1]))))throw new ye(2,2,2e3);for(s=Number(s[1]),i=t.segmentStart;95443.7176888889<=i;)i-=95443.7176888889,s+=8589934592;n=t.periodStart+s/9e4-n}}s=[];for(var a=(i=c(r[0].split("\n"))).next();!a.done;a=i.next())if(a=a.value,/^Region:/.test(a)){a=new yh(a);var o=new Ct;bh(a),_h(a);for(var l=bh(a);l;){var u=o,d=l;(l=/^id=(.*)$/.exec(d))?u.id=l[1]:(l=/^width=(\d{1,2}|100)%$/.exec(d))?u.width=Number(l[1]):(l=/^lines=(\d+)$/.exec(d))?(u.height=Number(l[1]),u.heightUnits=2):(l=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(u.regionAnchorX=Number(l[1]),u.regionAnchorY=Number(l[2])):(l=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(u.viewportAnchorX=Number(l[1]),u.viewportAnchorY=Number(l[2])):/^scroll=up$/.exec(d)&&(u.scroll="up"),_h(a),l=bh(a)}s.push(o)}for(Bg(i=new Map),a=[],o=(r=c(r.slice(1))).next();!o.done;o=r.next()){if((1!=(o=o.value.split("\n")).length||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&"STYLE"==o[0]&&o[1].includes("::cue")){u="global",(l=o[1].match(/\((.*)\)/))&&(u=l.pop()),l=o.slice(2,-1),o[1].includes("}")&&(d=/\{(.*?)\}/.exec(o[1]))&&(l=d[1].split(";")),d=new at(0,0,"");for(var h=!1,p=0;p<l.length;p++){var m=/^\s*([^:]+):\s*(.*)/.exec(l[p]);if(m){var f=m[2].trim().replace(";","");switch(m[1].trim()){case"background-color":h=!0,d.backgroundColor=f;break;case"color":h=!0,d.color=f;break;case"font-family":h=!0,d.fontFamily=f;break;case"font-size":h=!0,d.fontSize=f;break;case"font-weight":700<=parseInt(f,10)&&(h=!0,d.fontWeight=700);break;case"font-style":switch(f){case"normal":h=!0,d.fontStyle=Et;break;case"italic":h=!0,d.fontStyle="italic";break;case"oblique":h=!0,d.fontStyle="oblique"}break;case"opacity":h=!0,d.opacity=parseFloat(f);break;case"white-space":h=!0,d.wrapLine="noWrap"!=f}}}h&&i.set(u,d)}if(p=n,1==o.length&&!o[0]||/^NOTE($|[ \t])/.test(o[0])||"STYLE"==o[0])o=null;else{if(u=null,o[0].includes("--\x3e")||(u=o[0],o.splice(0,1)),d=Wg(l=new yh(o[0])),m=Eh(l,/[ \t]+--\x3e[ \t]+/g),h=Wg(l),null==d||null==m||null==h)throw new ye(2,2,2001,"Could not parse cue time range in WebVTT");for(d+=p,h+=p,p=o.slice(1).join("\n").trim(),i.has("global")?((o=i.get("global").clone()).startTime=d,o.endTime=h,o.payload=""):o=new at(d,h,""),Ug(p,o,i),_h(l),d=bh(l);d;)Hg(o,d,s),_h(l),d=bh(l);null!=u&&(o.id=u)}o&&a.push(o)}return a},B("shaka.text.VttTextParser",Fg),Fg.prototype.parseMedia=Fg.prototype.parseMedia,Fg.prototype.parseInit=Fg.prototype.parseInit,hn["text/vtt"]=function(){return new Fg},hn['text/vtt; codecs="vtt"']=function(){return new Fg},hn['text/vtt; codecs="wvtt"']=function(){return new Fg},qg.prototype.parseInit=function(e){var t=this,n=!1;if((new Ci).box("moov",Si).box("trak",Si).box("mdia",Si).Z("mdhd",function(e){e=Fs(e.reader,e.version),t.g=e.timescale}).box("minf",Si).box("stbl",Si).Z("stsd",Ti).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new ye(2,2,2008);if(!n)throw new ye(2,2,2008)},qg.prototype.parseMedia=function(e,t){if(!this.g)throw new ye(2,2,2008);var n,r=0,i=[],s=[],a=!1,o=!1,l=!1,u=null;if((new Ci).box("moof",Si).box("traf",Si).Z("tfdt",function(e){a=!0,r=Ns(e.reader,e.version).Xd}).Z("tfhd",function(e){u=$s(e.reader,e.flags).cf}).Z("trun",function(e){o=!0,i=Bs(e.reader,e.version,e.flags).zf}).box("mdat",Ri(function(e){l=!0,n=e})).parse(e,!1),!l&&!a&&!o)throw new ye(2,2,2008);for(var d=r,h=new _i(n,0),p=c(i),m=p.next();!m.done;m=p.next()){var f=(m=m.value).ye||u,g=m.Cd?r+m.Cd:d;d=g+(f||0);var x=0;do{var v=h.T();x+=v;var y=null;"vttc"==wi(h.T())?8<v&&(y=h.Lb(v-8)):h.skip(v-8),f&&y&&(v=zg(y,t.periodStart+g/this.g,t.periodStart+d/this.g),s.push(v))}while(m.sampleSize&&x<m.sampleSize)}return s.filter(je)},B("shaka.text.Mp4VttParser",qg),qg.prototype.parseMedia=qg.prototype.parseMedia,qg.prototype.parseInit=qg.prototype.parseInit,hn['application/mp4; codecs="wvtt"']=function(){return new qg},Kg.prototype.parseInit=function(){},Kg.prototype.parseMedia=function(e){var t=Ft(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=c(t.split("\n\n"))).next();!n.done;n=t.next()){var r=new yh((n=n.value.split("\n"))[0]),i=Yg(r),s=Eh(r,/,/g);if(r=Yg(r),null==i||null==s||null==r)throw new ye(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new at(i,r,n.slice(1).join("\n").trim()))}return e},B("shaka.text.SbvTextParser",Kg),Kg.prototype.parseMedia=Kg.prototype.parseMedia,Kg.prototype.parseInit=Kg.prototype.parseInit,hn["text/x-subviewer"]=function(){return new Kg},Qg.prototype.parseInit=function(){},Qg.prototype.parseMedia=function(e,t){var n=Ft(e);return n=It(Gt(n=Xg(n))),this.C.parseMedia(n,t)},B("shaka.text.SrtTextParser",Qg),Qg.srt2webvtt=Xg,Qg.prototype.parseMedia=Qg.prototype.parseMedia,Qg.prototype.parseInit=Qg.prototype.parseInit,hn["text/srt"]=function(){return new Qg},Zg.prototype.parseInit=function(){},Zg.prototype.parseMedia=function(e){for(var t="",n="",r=(e=c(e=Ft(e).split(/\r?\n\s*\r?\n/))).next();!r.done;r=e.next()){var i=ix.exec(r.value);i&&(r=i[1],i=i[2],"V4 Styles"==r||"V4+ Styles"==r?t=i:"Events"==r&&(n=i))}e=[],r=null;for(var s=(t=c(t.split(/\r?\n/))).next();!s.done;s=t.next())if(i=s.value,!/^\s*;/.test(i)&&(s=sx.exec(i)))if(i=s[1].trim(),s=s[2].trim(),"Format"==i)r=s.split(ax);else if("Style"==i){i=s.split(ax),s={};for(var a=0;a<r.length&&a<i.length;a++)s[r[a]]=i[a];e.push(s)}for(r=[],t=null,i={},s=(n=c(n.split(/\r?\n/))).next();!s.done;i={Ud:i.Ud},s=n.next())if(s=s.value,!/^\s*;/.test(s)&&(a=sx.exec(s)))if(s=a[1].trim(),a=a[2].trim(),"Format"==s)t=a.split(ax);else if("Dialogue"==s){a=a.split(ax),s={};for(var o=0;o<t.length&&o<a.length;o++)s[t[o]]=a[o];a=new at(o=tx(s.Start),tx(s.End),a.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),i.Ud=s.Style,(s=e.find(function(e){return function(t){return t.Name==e.Ud}}(i)))&&Jg(a,s),r.push(a)}return r},B("shaka.text.SsaTextParser",Zg),Zg.prototype.parseMedia=Zg.prototype.parseMedia,Zg.prototype.parseInit=Zg.prototype.parseInit;var nx,rx,ix=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,sx=/^\s*([^:]+):\s*(.*)/,ax=/\s*,\s*/,ox=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
/*
       @license
       EME Encryption Scheme Polyfill
       Copyright 2019 Google LLC
       SPDX-License-Identifier: Apache-2.0
      */
function lx(){}function cx(){nx?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(nx=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=ux):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function ux(e,t){var n,r=this;return P(function(i){return 1==i.g?(console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),_(i,nx.call(r,e,t),2)):yx(n=i.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=nx,i.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=dx,i.return(dx.call(r,e,t)))})}function dx(e,t){var n,r,i,s,a,o,l,u,d,h,p=this;return P(function(m){if(1==m.g){for(console.assert(p==navigator,'bad "this" for requestMediaKeySystemAccess'),n=vx(e),r=[],i=c(t),s=i.next();!s.done;s=i.next())a=s.value,o=hx(a.videoCapabilities,n),l=hx(a.audioCapabilities,n),a.videoCapabilities&&a.videoCapabilities.length&&!o.length||a.audioCapabilities&&a.audioCapabilities.length&&!l.length||((u=Object.assign({},a)).videoCapabilities=o,u.audioCapabilities=l,r.push(u));if(!r.length)throw(d=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return _(m,nx.call(p,e,r),2)}return h=m.h,m.return(new xx(h,n))})}function hx(e,t){return e?e.filter(function(e){return!e.encryptionScheme||e.encryptionScheme==t}):e}function px(){}function mx(){rx?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(rx=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=fx):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function fx(e){var t,n,r=this;return P(function(i){return 1==i.g?(console.assert(r==navigator.mediaCapabilities,'bad "this" for decodingInfo'),_(i,rx.call(r,e),2)):(t=i.h,e.keySystemConfiguration?(n=t.keySystemAccess)&&yx(n)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=rx,i.return(t)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=gx,i.return(gx.call(r,e))):i.return(t))})}function gx(e){var t,n,r,i,s,a,o,l,c,u=this;return P(function(d){switch(d.g){case 1:return console.assert(u==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,r=n.keySystem,i=n.audio&&n.audio.encryptionScheme,s=n.video&&n.video.encryptionScheme,t=vx(r),a={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},i&&i!=t||s&&s!=t)?d.return(a):_(d,rx.call(u,e),2);case 2:if((o=d.h).keySystemAccess){o.keySystemAccess=new xx(o.keySystemAccess,t),d.D(3);break}if(!e.keySystemConfiguration){d.D(3);break}var h=e.keySystemConfiguration,p=[],m=[];return h.audio&&p.push({robustness:h.audio.robustness||"",contentType:e.audio.contentType}),h.video&&m.push({robustness:h.video.robustness||"",contentType:e.video.contentType}),h={initDataTypes:h.initDataType?[h.initDataType]:[],distinctiveIdentifier:h.distinctiveIdentifier,persistentState:h.persistentState,sessionTypes:h.sessionTypes},p.length&&(h.audioCapabilities=p),m.length&&(h.videoCapabilities=m),l=h,c=o,_(d,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[l]),5);case 5:c.keySystemAccess=d.h;case 3:return d.return(o)}})}function xx(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function vx(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function yx(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function _x(){}function Ex(){cx(),mx()}hn["text/x-ssa"]=function(){return new Zg},B("EmeEncryptionSchemePolyfill",lx),lx.install=cx,B("McEncryptionSchemePolyfill",px),px.install=mx,xx.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=c(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=c(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},xx.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},B("EncryptionSchemePolyfills",_x),_x.install=Ex,void 0!==n&&n.exports&&(n.exports=_x);
/*
       @license
       Copyright 2013 Ali Al Dallal
      
       Licensed under the MIT license.
      
       Permission is hereby granted, free of charge, to any person obtaining a copy
       of this software and associated documentation files (the "Software"), to deal
       in the Software without restriction, including without limitation the rights
       to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
       copies of the Software, and to permit persons to whom the Software is
       furnished to do so, subject to the following conditions:
      
       The above copyright notice and this permission notice shall be included in
       all copies or substantial portions of the Software.
      
       THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
       IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
       FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
       AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
       LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
       OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
       SOFTWARE.
      */
for(var bx={ach:{u:"Lwo",A:"Acholi"},ady:{u:"",A:"Adyghe"},af:{u:"Afrikaans",A:"Afrikaans"},"af-NA":{u:"Afrikaans (Namibia)",A:"Afrikaans (Namibia)"},"af-ZA":{u:"Afrikaans (South Africa)",A:"Afrikaans (South Africa)"},ak:{u:"Ti",A:"Akan"},ar:{u:"",A:"Arabic"},"ar-AR":{u:"",A:"Arabic"},"ar-MA":{u:"",A:"Arabic (Morocco)"},"ar-SA":{u:" ()",A:"Arabic (Saudi Arabia)"},"ay-BO":{u:"Aymar aru",A:"Aymara"},az:{u:"Azrbaycan dili",A:"Azerbaijani"},"az-AZ":{u:"Azrbaycan dili",A:"Azerbaijani"},"be-BY":{u:"",A:"Belarusian"},bg:{u:"",A:"Bulgarian"},"bg-BG":{u:"",A:"Bulgarian"},bn:{u:"",A:"Bengali"},"bn-IN":{u:" ()",A:"Bengali (India)"},"bn-BD":{u:"()",A:"Bengali (Bangladesh)"},"bs-BA":{u:"Bosanski",A:"Bosnian"},ca:{u:"Catal",A:"Catalan"},"ca-ES":{u:"Catal",A:"Catalan"},cak:{u:"Maya Kaqchikel",A:"Kaqchikel"},"ck-US":{u:" (tsalagi)",A:"Cherokee"},cs:{u:"etina",A:"Czech"},"cs-CZ":{u:"etina",A:"Czech"},cy:{u:"Cymraeg",A:"Welsh"},"cy-GB":{u:"Cymraeg",A:"Welsh"},da:{u:"Dansk",A:"Danish"},"da-DK":{u:"Dansk",A:"Danish"},de:{u:"Deutsch",A:"German"},"de-AT":{u:"Deutsch (sterreich)",A:"German (Austria)"},"de-DE":{u:"Deutsch (Deutschland)",A:"German (Germany)"},"de-CH":{u:"Deutsch (Schweiz)",A:"German (Switzerland)"},dsb:{u:"Dolnoserbina",A:"Lower Sorbian"},el:{u:"",A:"Greek"},"el-GR":{u:"",A:"Greek (Greece)"},en:{u:"English",A:"English"},"en-GB":{u:"English (UK)",A:"English (UK)"},"en-AU":{u:"English (Australia)",A:"English (Australia)"},"en-CA":{u:"English (Canada)",A:"English (Canada)"},"en-IE":{u:"English (Ireland)",A:"English (Ireland)"},"en-IN":{u:"English (India)",A:"English (India)"},"en-PI":{u:"English (Pirate)",A:"English (Pirate)"},"en-UD":{u:"English (Upside Down)",A:"English (Upside Down)"},"en-US":{u:"English (US)",A:"English (US)"},"en-ZA":{u:"English (South Africa)",A:"English (South Africa)"},"en@pirate":{u:"English (Pirate)",A:"English (Pirate)"},eo:{u:"Esperanto",A:"Esperanto"},"eo-EO":{u:"Esperanto",A:"Esperanto"},es:{u:"Espaol",A:"Spanish"},"es-AR":{u:"Espaol (Argentine)",A:"Spanish (Argentina)"},"es-419":{u:"Espaol (Latinoamrica)",A:"Spanish (Latin America)"},"es-CL":{u:"Espaol (Chile)",A:"Spanish (Chile)"},"es-CO":{u:"Espaol (Colombia)",A:"Spanish (Colombia)"},"es-EC":{u:"Espaol (Ecuador)",A:"Spanish (Ecuador)"},"es-ES":{u:"Espaol (Espaa)",A:"Spanish (Spain)"},"es-LA":{u:"Espaol (Latinoamrica)",A:"Spanish (Latin America)"},"es-NI":{u:"Espaol (Nicaragua)",A:"Spanish (Nicaragua)"},"es-MX":{u:"Espaol (Mxico)",A:"Spanish (Mexico)"},"es-US":{u:"Espaol (Estados Unidos)",A:"Spanish (United States)"},"es-VE":{u:"Espaol (Venezuela)",A:"Spanish (Venezuela)"},et:{u:"eesti keel",A:"Estonian"},"et-EE":{u:"Eesti (Estonia)",A:"Estonian (Estonia)"},eu:{u:"Euskara",A:"Basque"},"eu-ES":{u:"Euskara",A:"Basque"},fa:{u:"",A:"Persian"},"fa-IR":{u:"",A:"Persian"},"fb-LT":{u:"Leet Speak",A:"Leet"},ff:{u:"Fulah",A:"Fulah"},fi:{u:"Suomi",A:"Finnish"},"fi-FI":{u:"Suomi",A:"Finnish"},"fo-FO":{u:"Froyskt",A:"Faroese"},fr:{u:"Franais",A:"French"},"fr-CA":{u:"Franais (Canada)",A:"French (Canada)"},"fr-FR":{u:"Franais (France)",A:"French (France)"},"fr-BE":{u:"Franais (Belgique)",A:"French (Belgium)"},"fr-CH":{u:"Franais (Suisse)",A:"French (Switzerland)"},"fy-NL":{u:"Frysk",A:"Frisian (West)"},ga:{u:"Gaeilge",A:"Irish"},"ga-IE":{u:"Gaeilge (Gaelic)",A:"Irish (Gaelic)"},gl:{u:"Galego",A:"Galician"},"gl-ES":{u:"Galego",A:"Galician"},"gn-PY":{u:"Avae'",A:"Guarani"},"gu-IN":{u:"",A:"Gujarati"},"gx-GR":{u:" ",A:"Classical Greek"},he:{u:"",A:"Hebrew"},"he-IL":{u:"",A:"Hebrew"},hi:{u:"",A:"Hindi"},"hi-IN":{u:"",A:"Hindi"},hr:{u:"Hrvatski",A:"Croatian"},"hr-HR":{u:"Hrvatski",A:"Croatian"},hsb:{u:"Hornjoserbina",A:"Upper Sorbian"},ht:{u:"Kreyl",A:"Haitian Creole"},hu:{u:"Magyar",A:"Hungarian"},"hu-HU":{u:"Magyar",A:"Hungarian"},"hy-AM":{u:"",A:"Armenian"},id:{u:"Bahasa Indonesia",A:"Indonesian"},"id-ID":{u:"Bahasa Indonesia",A:"Indonesian"},is:{u:"slenska",A:"Icelandic"},"is-IS":{u:"slenska (Iceland)",A:"Icelandic (Iceland)"},it:{u:"Italiano",A:"Italian"},"it-IT":{u:"Italiano",A:"Italian"},ja:{u:"",A:"Japanese"},"ja-JP":{u:"",A:"Japanese"},"jv-ID":{u:"Basa Jawa",A:"Javanese"},"ka-GE":{u:"",A:"Georgian"},"kk-KZ":{u:"",A:"Kazakh"},km:{u:"",A:"Khmer"},"km-KH":{u:"",A:"Khmer"},kab:{u:"Taqbaylit",A:"Kabyle"},kn:{u:"",A:"Kannada"},"kn-IN":{u:" (India)",A:"Kannada (India)"},ko:{u:"",A:"Korean"},"ko-KR":{u:" ()",A:"Korean (Korea)"},ku:{u:"Kurd",A:"Kurdish"},"ku-TR":{u:"Kurd",A:"Kurdish"},la:{u:"Latin",A:"Latin"},"la-VA":{u:"Latin",A:"Latin"},lb:{u:"Ltzebuergesch",A:"Luxembourgish"},"li-NL":{u:"Lmbrgs",A:"Limburgish"},lt:{u:"Lietuvi",A:"Lithuanian"},"lt-LT":{u:"Lietuvi",A:"Lithuanian"},lv:{u:"Latvieu",A:"Latvian"},"lv-LV":{u:"Latvieu",A:"Latvian"},mai:{u:", ",A:"Maithili"},"mg-MG":{u:"Malagasy",A:"Malagasy"},mk:{u:"",A:"Macedonian"},"mk-MK":{u:" ()",A:"Macedonian (Macedonian)"},ml:{u:"",A:"Malayalam"},"ml-IN":{u:"",A:"Malayalam"},"mn-MN":{u:"",A:"Mongolian"},mr:{u:"",A:"Marathi"},"mr-IN":{u:"",A:"Marathi"},ms:{u:"Bahasa Melayu",A:"Malay"},"ms-MY":{u:"Bahasa Melayu",A:"Malay"},mt:{u:"Malti",A:"Maltese"},"mt-MT":{u:"Malti",A:"Maltese"},my:{u:"",A:"Burmese"},nb:{u:"Norsk (bokml)",A:"Norwegian (bokmal)"},"nb-NO":{u:"Norsk (bokml)",A:"Norwegian (bokmal)"},ne:{u:"",A:"Nepali"},"ne-NP":{u:"",A:"Nepali"},nl:{u:"Nederlands",A:"Dutch"},"nl-BE":{u:"Nederlands (Belgi)",A:"Dutch (Belgium)"},"nl-NL":{u:"Nederlands (Nederland)",A:"Dutch (Netherlands)"},"nn-NO":{u:"Norsk (nynorsk)",A:"Norwegian (nynorsk)"},no:{u:"Norsk",A:"Norwegian"},oc:{u:"Occitan",A:"Occitan"},"or-IN":{u:"",A:"Oriya"},pa:{u:"",A:"Punjabi"},"pa-IN":{u:" ( )",A:"Punjabi (India)"},pl:{u:"Polski",A:"Polish"},"pl-PL":{u:"Polski",A:"Polish"},"ps-AF":{u:"",A:"Pashto"},pt:{u:"Portugus",A:"Portuguese"},"pt-BR":{u:"Portugus (Brasil)",A:"Portuguese (Brazil)"},"pt-PT":{u:"Portugus (Portugal)",A:"Portuguese (Portugal)"},"qu-PE":{u:"Qhichwa",A:"Quechua"},"rm-CH":{u:"Rumantsch",A:"Romansh"},ro:{u:"Romn",A:"Romanian"},"ro-RO":{u:"Romn",A:"Romanian"},ru:{u:"",A:"Russian"},"ru-RU":{u:"",A:"Russian"},"sa-IN":{u:"",A:"Sanskrit"},"se-NO":{u:"Davvismegiella",A:"Northern Smi"},"si-LK":{u:"",A:"Sinhala (Sri Lanka)"},sk:{u:"Slovenina",A:"Slovak"},"sk-SK":{u:"Slovenina (Slovakia)",A:"Slovak (Slovakia)"},sl:{u:"Slovenina",A:"Slovenian"},"sl-SI":{u:"Slovenina",A:"Slovenian"},"so-SO":{u:"Soomaaliga",A:"Somali"},sq:{u:"Shqip",A:"Albanian"},"sq-AL":{u:"Shqip",A:"Albanian"},sr:{u:"",A:"Serbian"},"sr-RS":{u:" (Serbia)",A:"Serbian (Serbia)"},su:{u:"Basa Sunda",A:"Sundanese"},sv:{u:"Svenska",A:"Swedish"},"sv-SE":{u:"Svenska",A:"Swedish"},sw:{u:"Kiswahili",A:"Swahili"},"sw-KE":{u:"Kiswahili",A:"Swahili (Kenya)"},ta:{u:"",A:"Tamil"},"ta-IN":{u:"",A:"Tamil"},te:{u:"",A:"Telugu"},"te-IN":{u:"",A:"Telugu"},tg:{u:" ",A:"Tajik"},"tg-TJ":{u:"",A:"Tajik"},th:{u:"",A:"Thai"},"th-TH":{u:" ()",A:"Thai (Thailand)"},tl:{u:"Filipino",A:"Filipino"},"tl-PH":{u:"Filipino",A:"Filipino"},tlh:{u:"tlhIngan-Hol",A:"Klingon"},tr:{u:"Trke",A:"Turkish"},"tr-TR":{u:"Trke",A:"Turkish"},"tt-RU":{u:"",A:"Tatar"},uk:{u:"",A:"Ukrainian"},"uk-UA":{u:"",A:"Ukrainian"},ur:{u:"",A:"Urdu"},"ur-PK":{u:"",A:"Urdu"},uz:{u:"O'zbek",A:"Uzbek"},"uz-UZ":{u:"O'zbek",A:"Uzbek"},vi:{u:"Ting Vit",A:"Vietnamese"},"vi-VN":{u:"Ting Vit",A:"Vietnamese"},"xh-ZA":{u:"isiXhosa",A:"Xhosa"},yi:{u:"",A:"Yiddish"},"yi-DE":{u:" (German)",A:"Yiddish (German)"},zh:{u:"",A:"Chinese"},"zh-HANS":{u:"",A:"Chinese Simplified"},"zh-HANT":{u:"",A:"Chinese Traditional"},"zh-CN":{u:"",A:"Chinese Simplified (China)"},"zh-HK":{u:"",A:"Chinese Traditional (Hong Kong)"},"zh-SG":{u:"",A:"Chinese Simplified (Singapore)"},"zh-TW":{u:"",A:"Chinese Traditional (Taiwan)"},"zu-ZA":{u:"isiZulu",A:"Zulu"}},Cx=c(Object.keys(bx)),Sx=Cx.next();!Sx.done;Sx=Cx.next()){var Tx=Sx.value;bx[Tx.toLowerCase()]=bx[Tx]}function Rx(e,t){var n=this;this.parent=e,this.controls=t,this.eventManager=new Or,this.localization=this.controls.bb,this.player=this.controls.lc(),this.video=this.controls.Kb(),this.adManager=this.player.od(),this.ad=t.getAd(),this.eventManager.o(this.adManager,"ad-started",function(e){n.ad=e.ad}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.ad=null})}function jx(e){return wx(e,"shaka-back-to-overflow-button")}function wx(e,t){var n=e.getElementsByClassName(t);return n.length?n[0]:null}function Ax(e){e&&(e=wx(e,"shaka-chosen-item"))&&e.parentElement.focus()}function Ix(){var e=go("i");return e.classList.add("material-icons-round"),e.classList.add("shaka-chosen-item"),e.textContent="done",e.ariaHidden="true",e}function kx(e,t){e&&(t?e.classList.remove("shaka-hidden"):e.classList.add("shaka-hidden"))}function Mx(e,t){var n=Math.floor(e/3600),r=Math.floor(e/60%60),i=Math.floor(e%60);return 10>i&&(i="0"+i),i=r+":"+i,t&&(10>r&&(i="0"+i),i=n+":"+i),i}function Px(e,t){Rx.call(this,e,t);var n=this;this.i=go("div"),this.i.classList.add("shaka-ad-counter"),this.parent.appendChild(this.i),this.h=go("span"),this.h.classList.add("shaka-ad-counter-span"),this.i.appendChild(this.h),this.g=new mn(function(){var e=Math.round(n.ad.getRemainingTime()),t=n.ad.getDuration();-1!=e&&-1!=t&&(0<e?(e=Mx(t-e,!1)+" / "+Mx(t,!1),1<n.ad.getSequenceLength()?n.h.textContent=e:(t=n.localization.resolve("AD_TIME"),n.h.textContent=t.replace("[AD_TIME]",e))):(n.g.stop(),n.h.textContent=""))}),this.eventManager.o(this.localization,"locale-updated",function(){}),this.eventManager.o(this.localization,"locale-changed",function(){}),this.eventManager.o(this.adManager,"ad-started",function(){n.g.Ga(),n.g.na(.5)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.g.stop(),n.h.textContent=""}),this.ad&&(this.g.Ga(),this.g.na(.5))}function Lx(e,t){Rx.call(this,e,t);var n=this;this.g=go("div"),this.g.classList.add("shaka-ad-position"),kx(this.g,!1),this.parent.appendChild(this.g),this.h=go("span"),this.h.classList.add("shaka-ad-position-span"),this.g.appendChild(this.h),this.eventManager.o(this.localization,"locale-updated",function(){n.ad&&Dx(n)}),this.eventManager.o(this.localization,"locale-changed",function(){n.ad&&Dx(n)}),this.eventManager.o(this.adManager,"ad-started",function(){Dx(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.h.textContent="",kx(n.g,!1)}),this.ad&&Dx(this)}function Dx(e){var t=e.ad.getSequenceLength();if(1<t){var n=e.ad.getPositionInSequence();e.h.textContent=e.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(n)).replace("[NUM_ADS]",String(t)),kx(e.g,!0)}}function Ox(e,t){Rx.call(this,e,t);var n=this;this.button=xo(),this.parent.appendChild(this.button),this.eventManager.o(this.localization,"locale-updated",function(){n.g()}),this.eventManager.o(this.localization,"locale-changed",function(){n.g()}),this.eventManager.o(this.video,"play",function(){n.g(),n.h()}),this.eventManager.o(this.video,"pause",function(){n.g(),n.h()}),this.eventManager.o(this.video,"seeking",function(){n.g(),n.h()}),this.eventManager.o(this.adManager,"ad-paused",function(){n.g(),n.h()}),this.eventManager.o(this.adManager,"ad-resumed",function(){n.g(),n.h()}),this.eventManager.o(this.adManager,"ad-started",function(){n.g(),n.h()}),this.eventManager.o(this.button,"click",function(){n.ad&&n.ad.isLinear()?Jx(n.controls):Zx(n.controls)}),this.ad&&(this.g(),this.h())}function $x(e,t){Ox.call(this,e,t),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),this.h(),this.g()}function Nx(t,n){Rx.call(this,t,n);var r=this;this.m=this.controls.m,this.h=this.controls.i,this.i=[],this.g=go("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-context-menu"),this.g.classList.add("shaka-hidden"),this.h.appendChild(this.g),this.eventManager.o(this.h,"contextmenu",function(e){if(r.g.classList.contains("shaka-hidden")){e.preventDefault();var t=r.h.getBoundingClientRect();r.g.style.left=e.clientX-t.left+"px",r.g.style.top=e.clientY-t.top+"px",kx(r.g,!0)}else kx(r.g,!1)}),this.eventManager.o(e,"click",function(){kx(r.g,!1)}),function(e){for(var t=c(e.m.contextMenuElements),n=t.next();!n.done;n=t.next()){n=n.value;var r=Bx.get(n);r?e.i.push(r.create(e.g,e.controls)):W("Unrecognized context menu element:",n)}}(this)}function Fx(e,t){Bx.set(e,t)}Rx.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},B("shaka.ui.Element",Rx),Rx.prototype.release=Rx.prototype.release,g(Px,Rx),Px.prototype.release=function(){this.g.stop(),this.g=null,Rx.prototype.release.call(this)},B("shaka.ui.AdCounter",Px),g(Lx,Rx),B("shaka.ui.AdPosition",Lx),g(Ox,Rx),Ox.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var e=this.ad.isPaused();else e=(e=this.controls).g.paused&&!e.ka;return e},Ox.prototype.g=function(){},Ox.prototype.h=function(){},B("shaka.ui.PlayButton",Ox),g($x,Ox),$x.prototype.h=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},$x.prototype.g=function(){var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)},B("shaka.ui.BigPlayButton",$x),g(Nx,Rx),Nx.prototype.release=function(){this.h=null;for(var e=c(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[],Rx.prototype.release.call(this)},B("shaka.ui.ContextMenu",Nx),Nx.registerElement=Fx;var Bx=new Map;function Ux(e,t,n,r){Rx.call(this,e,t);var i=this;this.container=go("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,u(n)),this.g=!1,this.bar=document.createElement("input"),this.l=new mn(function(){i.onChangeEnd(),i.g=!1}),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,u(r)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.eventManager.o(this.bar,"mousedown",function(){i.controls.Ub()&&(i.g=!0,i.onChangeStart())}),this.eventManager.o(this.bar,"touchstart",function(e){i.controls.Ub()&&(i.g=!0,Gx(i,e),i.onChangeStart())}),this.eventManager.o(this.bar,"input",function(){i.onChange()}),this.eventManager.o(this.bar,"touchmove",function(e){i.g&&(Gx(i,e),i.onChange())}),this.eventManager.o(this.bar,"touchend",function(e){i.g&&(i.g=!1,Gx(i,e),i.onChangeEnd())}),this.eventManager.o(this.bar,"mouseup",function(){i.g&&(i.g=!1,i.onChangeEnd())})}function Gx(e,t){t.preventDefault();var n=t.changedTouches[0],r=e.bar.getBoundingClientRect(),i=parseFloat(e.bar.min),s=parseFloat(e.bar.max);(n=i+(s-i)/r.width*(n.clientX-r.left))<i?n=i:n>s&&(n=s),e.bar.value=n}function Vx(e,t){Ux.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var n=this;this.j=go("div"),this.j.classList.add("shaka-ad-markers"),this.container.insertBefore(this.j,this.container.childNodes[0]),this.m=this.controls.m,this.h=new mn(function(){n.video.currentTime=n.getValue()}),this.s=new mn(function(){Hx(n)}),this.B=!1,this.i=[],this.eventManager.o(this.localization,"locale-updated",function(){return zx(n)}),this.eventManager.o(this.localization,"locale-changed",function(){return zx(n)}),this.eventManager.o(this.adManager,"ad-started",function(){qx(n)||kx(n.container,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){qx(n)&&kx(n.container,!0)}),this.eventManager.o(this.adManager,"ad-cue-points-changed",function(e){n.i=e.cuepoints,Wx(n)}),this.eventManager.o(this.player,"unloading",function(){n.i=[],Wx(n)}),this.setValue(this.video.currentTime),this.update(),zx(this),this.ad&&kx(this.container,!1)}function Hx(e){if(e.i.length){for(var t=e.player.Na(),n=t.end-t.start,r=["to right"],i=[],s=e.m.seekBarColors.adBreaks,a=!1,o=c(e.i),l=o.next();!l.done;l=o.next())if(-1!=(l=l.value).start||l.end||(a=!0),l.start>=t.start&&l.start<t.end&&!(l.end&&l.end>t.end)){var u=(l.start-t.start)/n||0,d=u+.01;l.end&&(d=(l.end-t.start)/n||0),i.push({start:u,end:d})}for(l=(t=c(i)).next();!l.done;l=t.next())n=l.value,r.push("transparent "+100*n.start+"%"),r.push(s+" "+100*n.start+"%"),r.push(s+" "+100*n.end+"%"),r.push("transparent "+100*n.end+"%");a&&(r.push("transparent 99%"),r.push(s+" 99%")),e.j.style.background="linear-gradient("+r.join(",")+")"}else e.j.style.background="transparent"}function Wx(e){Hx(e);var t=e.player.Na();t=t.end-t.start,e.player.W()&&5<t&&e.s.na(1)}function qx(e){var t=e.player.Na();return t=t.end-t.start,!(e.player.W()&&5>t||null!=e.ad&&e.ad.isLinear())}function zx(e){e.bar.ariaLabel=e.localization.resolve("SEEK")}function Kx(){}function Yx(t,n,r,i){J.call(this);var s=this;this.ha=!0,this.m=i,this.B=new ou(r,t,this.m.castReceiverAppId),this.Db=!0,this.g=this.B.Kb(),this.C=r,this.G=this.B.lc(),this.Ua=t,this.j=n,this.ob=this.G.od(),this.s=this.l=null,this.ka=!1,this.I=[],this.nc=[],this.Gb=!1,this.sa=new mn(function(){s.j.style.cursor="none",s.Gb=!1,tv(s)}),this.Ba=new mn(function(){s.i.removeAttribute("shown"),s.L.U(2)}),this.L=new mn(function(){for(var e=c(s.I),t=e.next();!t.done;t=e.next())kx(t.value,!1)}),this.cb=new mn(function(){s.Ub()&&av(s)}),this.M=null,this.J=[],this.bb=function(){var e=new ze("en");return e.ma("ar",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS"," "],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS","  "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION"," "],["REWIND",""],["SEEK"," "],["SKIP_AD"," "],["SKIP_TO_LIVE","   "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME"," "]])),e.ma("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung[AD_ON] von[NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Suche"],["SKIP_AD","berspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstrke"]])),e.ma("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.ma("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),e.ma("es",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el vdeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vdeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rpidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Ms ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vdeo en directo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.ma("es-419",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repeticin indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Ms opciones de configuracin"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisin en vivo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.ma("fr",new Map([["AD_DURATION","Dure de l'annonce"],["AD_PROGRESS","Annonce[AD_ON] sur[NUM_ADS]"],["AD_TIME","Annonce: [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster"],["ENTER_LOOP_MODE","Lire en boucle la vido en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_LOOP_MODE","Arrter la lecture en boucle de la vido en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le modePIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Rpter"],["MORE_SETTINGS","Plus de paramtres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","Active"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accder  la partie la plus rcente du direct"],["UNDETERMINED_LANGUAGE","Langue indtermine"],["UNMUTE","Ractiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),e.ma("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocit di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),e.ma("ja",new Map([["AD_DURATION",""],["AD_PROGRESS","[AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.ma("ko",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","   "],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","    "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD"," "],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD"," "],["SKIP_TO_LIVE","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]])),e.ma("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),e.ma("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama[AD_ON] z[NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyaj..."],["ENTER_LOOP_MODE","Odtwarzaj biecy film wptli"],["ENTER_PICTURE_IN_PICTURE","Wcz tryb obrazu wobrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_LOOP_MODE","Wycz odtwarzanie biecego filmu wptli"],["EXIT_PICTURE_IN_PICTURE","Wycz tryb obrazu wobrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["LOOP","Odtwarzaj wptli"],["MORE_SETTINGS","Wicej ustawie"],["MULTIPLE_LANGUAGES","Wiele jzykw"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","Wczone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz wobrazie"],["PLAY","Odtwrz"],["PLAYBACK_RATE","Szybko odtwarzania"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Szukaj"],["SKIP_AD","Pomi reklam"],["SKIP_TO_LIVE","Przejd do transmisji na ywo"],["UNDETERMINED_LANGUAGE","Nie okrelono"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Gono"]])),e.ma("pt-BR",new Map([["AD_DURATION","Durao do anncio"],["AD_PROGRESS","Anncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anncio: [AD_TIME]"],["AUTO_QUALITY","Automtica"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o vdeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetio do vdeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definies"],["MULTIPLE_LANGUAGES","Vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reproduo"],["RESOLUTION","Resoluo"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anncio"],["SKIP_TO_LIVE","Pular para transmisso ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]])),e.ma("ru",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE"," "],["LOOP",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF","."],["ON","."],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND"," "],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE","     "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]])),e.ma("th",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.ma("tr",new Map([["AD_DURATION","Reklam sresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["ENTER_LOOP_MODE","Mevcut videoyu dngye al"],["ENTER_PICTURE_IN_PICTURE","Pencere iinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_LOOP_MODE","Mevcut videonun dngsn durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere inde Pencereden k"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["LOOP","Dng"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden ok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geerli deil"],["OFF","Kapal"],["ON","Ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere inde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","alma hz"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklam Atla"],["SKIP_TO_LIVE","Canl yayna atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Tannmayan"],["VOLUME","Ses"]])),e.ma("zh",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.ma("zh-TW",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.We(navigator.languages||[]),e}(),this.h=new Or,this.configure(this.m),function(t){t.h.o(t.G,"buffering",function(){t.ha&&kx(t.Aa,t.G.Rc())}),t.ha&&kx(t.Aa,t.G.Rc()),t.h.o(e,"keydown",function(n){!function(t,n){t.Ca.add(n.key);var r=t.jd();"Tab"==n.key&&(t.i.classList.add("shaka-keyboard-navigation"),tv(t),t.h.o(e,"mousedown",function(){t.h.Ta(e,"mousedown")})),"Escape"==n.key&&t.L.Ga(),r&&t.Ca.has("Tab")&&function(e,t){var n=e.I.filter(function(e){return!e.classList.contains("shaka-hidden")});if(n.length){var r=n[0];if(r.childNodes.length){for(n=r.firstElementChild;n&&n.classList.contains("shaka-hidden");)n=n.nextElementSibling;for(r=r.lastElementChild;r&&r.classList.contains("shaka-hidden");)r=r.previousElementSibling;var i=document.activeElement;e.Ca.has("Shift")?i==n&&(t.preventDefault(),r.focus()):i==r&&(t.preventDefault(),n.focus())}}}(t,n)}(t,n)}),t.h.o(e,"click",function(){return t.pc()}),t.h.o(t,"submenuopen",function(){t.pc()}),t.h.o(t.g,"play",function(){tv(t)}),t.h.o(t.g,"pause",function(){tv(t)}),t.h.o(t.j,"mousemove",function(e){ev(t,e)}),t.h.o(t.j,"touchmove",function(e){ev(t,e)},{passive:!0}),t.h.o(t.j,"touchend",function(e){ev(t,e)},{passive:!0}),t.h.o(t.j,"mouseleave",function(){t.M||t.sa.Ga()}),t.h.o(t.B,"caststatuschanged",function(){iv(t)}),t.h.o(t.j,"keydown",function(e){var n=document.activeElement,r=!(!n||!n.classList)&&n.classList.contains("shaka-volume-bar"),i=n&&n.classList&&n.classList.contains("shaka-seek-bar");if(t.i.contains(n)&&ev(t,e),t.m.enableKeyboardPlaybackControls)switch(e.key){case"ArrowLeft":t.s&&!r&&(e.preventDefault(),sv(t,t.s.getValue()-5));break;case"ArrowRight":t.s&&!r&&(e.preventDefault(),sv(t,t.s.getValue()+5));break;case"Home":t.s&&sv(t,t.G.Na().start);break;case"End":t.s&&sv(t,t.G.Na().end);break;case" ":i&&rv(t)}}),t.h.o(t.j,"keyup",function(e){t.Ca.delete(e.key)}),t.h.o(t.ob,"ad-started",function(e){t.l=e.ad,t.Gf()}),t.h.o(t.ob,"ad-stopped",function(){t.l=null,t.mf()}),screen.orientation&&t.h.o(screen.orientation,"change",function(){return P(function(e){return _(e,function(e){return P(function(t){return e.g&&0!=e.g.readyState&&!e.B.xa()&&e.m.enableFullscreenOnRotation?screen.orientation.type.includes("landscape")&&!document.fullscreenElement?_(t,e.j.requestFullscreen({navigationUI:"hide"}),0):screen.orientation.type.includes("portrait")&&document.fullscreenElement?_(t,document.exitFullscreen(),0):t.D(0):t.return()})}(t),0)})}),t.h.o(document,"fullscreenchange",function(){t.l&&t.l.resize(t.C.offsetWidth,t.C.offsetHeight)})}(this),this.Ca=new Set,iv(this),this.cb.na(.125),this.h.o(this.bb,"locale-changed",function(e){s.ob.setLocale(e.locales[0])})}function Qx(e){for(var t=c(e.J),n=t.next();!n.done;n=t.next())n.value.release();e.J=[]}function Xx(e,t){ov.set(e,t)}function Zx(e){e.ha&&e.g.duration&&(e.G.Ue(),e.g.paused&&!e.ka?e.g.play():e.g.pause())}function Jx(e){e.l&&e.l.isPaused()?e.l.play():e.l&&e.l.pause()}function ev(e,t){"mousemove"==t.type&&(e.i.classList.remove("shaka-keyboard-navigation"),tv(e)),"touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"keyup"==t.type?e.M=Date.now():e.M+1e3<Date.now()&&(e.M=null),e.M&&"mousemove"==t.type||(e.j.style.cursor="",e.Gb=!0,e.L.stop(),e.Ub()||(av(e),tv(e)),e.sa.stop(),"touchend"!=t.type&&"keyup"!=t.type&&e.M||e.sa.U(3))}function tv(t){var n=!!t.l&&t.l.isPaused(),r=t.g.paused&&!t.ka,i=t.i.classList.contains("shaka-keyboard-navigation");n||(!t.l||!t.l.isLinear())&&r||t.Gb||i||function(t){return!!e.matchMedia("hover: hover").matches&&t.nc.some(function(e){return e.matches(":hover")})}(t)?(av(t),t.i.setAttribute("shown","true"),t.Ba.stop()):t.Ba.U(t.m.fadeDelay)}function nv(e){e.ha&&(e.jd()?e.L.Ga():e.m.singleClickForPlayAndPause&&rv(e))}function rv(e){e.l&&e.l.isLinear()?Jx(e):Zx(e)}function iv(e){var t=e.B.xa();e.dispatchEvent(new U("caststatuschanged",(new Map).set("newStatus",t))),t?e.i.setAttribute("casting","true"):e.i.removeAttribute("casting")}function sv(e,t){e.s.changeTo(t),e.Ub()&&av(e)}function av(e){if(e.s)if(e.s.setValue(e.g.currentTime),e.s.update(),e.s.isShowing())for(var t=c(e.I),n=t.next();!n.done;n=t.next())n.value.classList.remove("shaka-low-position");else for(n=(t=c(e.I)).next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");e.dispatchEvent(new U("timeandseekrangeupdated"))}g(Ux,Rx),(r=Ux.prototype).release=function(){this.l&&(this.l.stop(),this.l=null),Rx.prototype.release.call(this)},r.setRange=function(e,t){this.bar.min=e,this.bar.max=t},r.onChangeStart=function(){},r.onChange=function(){},r.onChangeEnd=function(){},r.changeTo=function(e){this.g||(this.g=!0,this.onChangeStart());var t=parseFloat(this.bar.min),n=parseFloat(this.bar.max);this.bar.value=e>n?n:e<t?t:e,this.onChange(),this.l.U(.5)},r.getValue=function(){return parseFloat(this.bar.value)},r.setValue=function(e){this.g||(this.bar.value=e)},B("shaka.ui.RangeElement",Ux),Ux.prototype.setValue=Ux.prototype.setValue,Ux.prototype.getValue=Ux.prototype.getValue,Ux.prototype.changeTo=Ux.prototype.changeTo,Ux.prototype.onChangeEnd=Ux.prototype.onChangeEnd,Ux.prototype.onChange=Ux.prototype.onChange,Ux.prototype.onChangeStart=Ux.prototype.onChangeStart,Ux.prototype.setRange=Ux.prototype.setRange,g(Vx,Ux),(r=Vx.prototype).release=function(){this.h&&(this.h.stop(),this.h=null,this.s.stop(),this.s=null),Ux.prototype.release.call(this)},r.onChangeStart=function(){this.B=!this.video.paused,this.controls.He(!0),this.video.pause()},r.onChange=function(){this.video.duration&&(this.update(),this.h.U(.125))},r.onChangeEnd=function(){this.h.Ga(),this.controls.He(!1),this.B&&this.video.play()},r.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},r.update=function(){var e=this.m.seekBarColors,t=this.getValue(),n=this.video.buffered.length,r=n?this.video.buffered.start(0):0,i=n?this.video.buffered.end(n-1):0,s=this.player.Na(),a=s.end-s.start;this.setRange(s.start,s.end),qx(this)?(kx(this.container,!0),0==n?this.container.style.background=e.base:(n=(Math.max(r,s.start)-s.start)/a||0,i=(Math.min(i,s.end)-s.start)/a||0,t=(Math.min(Math.max(t,s.start),s.end)-s.start)/a||0,this.container.style.background="linear-gradient("+["to right",(this.m.showUnbufferedStart?e.base:e.played)+" "+100*n+"%",e.played+" "+100*n+"%",e.played+" "+100*t+"%",e.buffered+" "+100*t+"%",e.buffered+" "+100*i+"%",e.base+" "+100*i+"%"].join()+")")):kx(this.container,!1)},B("shaka.ui.SeekBar",Vx),Kx.prototype.create=function(e,t){return new Vx(e,t)},Vx.Factory=Kx,g(Yx,J),(r=Yx.prototype).destroy=function(){var e=this;return P(function(t){switch(t.g){case 1:if(document.pictureInPictureElement!=e.C){t.D(2);break}return _(t,document.exitPictureInPicture(),2);case 2:if(e.h&&(e.h.release(),e.h=null),e.sa&&(e.sa.stop(),e.sa=null),e.Ba&&(e.Ba.stop(),e.Ba=null),e.L&&(e.L.stop(),e.L=null),e.cb&&(e.cb.stop(),e.cb=null),Qx(e),e.i&&(e.j.removeChild(e.i),e.i=null),!e.B){t.D(4);break}return _(t,e.B.destroy(),5);case 5:e.B=null;case 4:if(!e.Ua){t.D(6);break}return _(t,e.Ua.destroy(),7);case 7:e.Ua=null;case 6:e.G=null,e.C=null,e.g=null,e.bb=null,e.Ca.clear(),J.prototype.release.call(e),E(t)}})},r.Sf=function(e){this.Db=e,iv(this)},r.Og=function(){tv(this)},r.configure=function(e){this.m=e,this.B.Xe(e.castReceiverAppId),this.s&&(this.s=null),this.Eb&&(this.Eb=null),this.pb&&(this.pb=null),this.i?(vo(this.i),Qx(this)):(function(e){e.i=go("div"),e.i.classList.add("shaka-controls-container"),e.j.appendChild(e.i),e.j.setAttribute("shaka-controls","true"),e.h.o(e.i,"touchstart",function(t){e.g.duration&&(e.Ub()?e.M=Date.now():(ev(e,t),t.preventDefault()))},{passive:!1}),e.h.o(e.i,"click",function(){nv(e)}),e.h.o(e.i,"dblclick",function(){e.m.doubleClickForFullscreen&&document.fullscreenEnabled&&e.Ne()})}(this),function(e){e.$=go("div"),e.$.classList.add("shaka-client-side-ad-container"),kx(e.$,!1),e.h.o(e.$,"click",function(){nv(e)}),e.j.appendChild(e.$)}(this)),this.j.classList.add("shaka-video-container"),this.C.classList.add("shaka-video"),function(e){var t=go("div");t.classList.add("shaka-scrim-container"),e.i.appendChild(t)}(this),this.m.addBigPlayButton&&function(e){var t=go("div");t.classList.add("shaka-play-button-container"),e.i.appendChild(t),e.Eb=new $x(t,e),e.J.push(e.Eb)}(this),this.m.customContextMenu&&(this.pb=new Nx(this.ia,this),this.J.push(this.pb)),this.Aa||function(e){e.Aa=go("div"),e.Aa.classList.add("shaka-spinner-container"),e.j.appendChild(e.Aa);var t=go("div");t.classList.add("shaka-spinner"),e.Aa.appendChild(t),(e=document.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("shaka-spinner-svg"),e.setAttribute("viewBox","0 0 30 30"),t.appendChild(e),(t=document.createElementNS("http://www.w3.org/2000/svg","circle")).classList.add("shaka-spinner-path"),t.setAttribute("cx","15"),t.setAttribute("cy","15"),t.setAttribute("r","14.5"),t.setAttribute("fill","none"),t.setAttribute("stroke-width","1"),t.setAttribute("stroke-miterlimit","10"),e.appendChild(t)}(this),this.zb=go("div"),this.zb.classList.add("shaka-server-side-ad-container"),this.i.appendChild(this.zb),function(e){e.S=go("div"),e.S.classList.add("shaka-bottom-controls"),e.S.classList.add("shaka-no-propagation"),e.i.appendChild(e.S),e.h.o(e.S,"click",function(t){t.target.closest(".shaka-overflow-button")||e.pc()}),function(e){e.P=go("div"),e.P.classList.add("shaka-ad-controls");var t=null!=e.l&&e.l.isLinear();kx(e.P,t),e.S.appendChild(e.P),t=new Lx(e.P,e),e.J.push(t),t=new Px(e.P,e),e.J.push(t)}(e),e.ia=go("div"),e.ia.classList.add("shaka-controls-button-panel"),e.ia.classList.add("shaka-show-controls-on-mouse-over"),e.m.enableTooltips&&e.ia.classList.add("shaka-tooltips-on"),e.S.appendChild(e.ia);for(var t={},n=c(e.m.controlPanelElements),r=n.next();!r.done;t={Bc:t.Bc},r=n.next())r=r.value,ov.get(r)?("function"!=typeof(r=ov.get(r).create(e.ia,e)).release&&(Ee("shaka.extern.IUIElement","Please update UI elements to have a release() method."),t.Bc=r,t.Bc.release=function(e){return function(){e.Bc.destroy&&e.Bc.destroy()}}(t)),e.J.push(r)):W("Unrecognized control panel element requested:",r)}(this),this.I=Array.from(this.j.getElementsByClassName("shaka-settings-menu")),this.I.push.apply(this.I,u(Array.from(this.j.getElementsByClassName("shaka-overflow-menu")))),function(e){if(e.m.addSeekBar)e.s=lv.create(e.S,e),e.J.push(e.s);else for(var t=(e=c(e.I)).next();!t.done;t=e.next())t.value.classList.add("shaka-low-position")}(this),this.nc=Array.from(this.j.getElementsByClassName("shaka-show-controls-on-mouse-over")),tv(this);for(var t=(e=c(this.j.getElementsByClassName("shaka-no-propagation"))).next();!t.done;t=e.next()){t=t.value;var n=function(e){return e.stopPropagation()};this.h.o(t,"click",n),this.h.o(t,"dblclick",n)}},r.De=function(e){(this.ha=e)?(this.j.setAttribute("shaka-controls","true"),this.C.tabIndex=-1,this.C.controls=!1):this.j.removeAttribute("shaka-controls"),tv(this)},r.Df=function(e){this.C.controls=e,this.C.tabIndex=e?0:-1,e&&this.De(!1)},r.getAd=function(){return this.l},r.eg=function(){return this.B},r.rg=function(){return this.bb},r.Ig=function(){return this.j},r.Kb=function(){return this.g},r.qg=function(){return this.C},r.lc=function(){return this.G},r.pg=function(){return this.Ua},r.jg=function(){return this.i},r.Ag=function(){return this.zb},r.gg=function(){return this.$},r.hg=function(){return this.m},r.Ng=function(){return this.ka},r.He=function(e){this.ka=e},r.Lg=function(){return this.Db},r.jf=function(){return this.s?this.s.getValue():this.g.currentTime},r.Ef=function(e){this.M=e},r.jd=function(){return this.I.some(function(e){return!e.classList.contains("shaka-hidden")})},r.pc=function(){this.L.Ga()},r.Ne=function(){var e,t=this;return P(function(n){switch(n.g){case 1:if(document.fullscreenElement)return screen.orientation&&screen.orientation.unlock(),_(n,document.exitFullscreen(),0);if(b(n,4),!document.pictureInPictureElement){n.D(6);break}return _(n,document.exitPictureInPicture(),6);case 6:return _(n,t.j.requestFullscreen({navigationUI:"hide"}),8);case 8:if(!t.m.forceLandscapeOnFullscreen||!screen.orientation){n.D(9);break}return b(n,10),_(n,screen.orientation.lock("landscape"),12);case 12:S(n,9,4);break;case 10:T(n,4);case 9:S(n,0);break;case 4:e=T(n),t.dispatchEvent(new U("error",(new Map).set("detail",e))),n.D(0)}})},r.Gf=function(){kx(this.P,!0),kx(this.$,!0),this.i.setAttribute("ad-active","true")},r.mf=function(){kx(this.P,!1),kx(this.$,!1),this.i.removeAttribute("ad-active")},r.Ub=function(){return!!this.ha&&(null!=this.i.getAttribute("shown")||null!=this.i.getAttribute("casting"))},B("shaka.ui.Controls",Yx),Yx.prototype.isOpaque=Yx.prototype.Ub,Yx.prototype.hideAdUI=Yx.prototype.mf,Yx.prototype.showAdUI=Yx.prototype.Gf,Yx.prototype.toggleFullScreen=Yx.prototype.Ne,Yx.prototype.hideSettingsMenus=Yx.prototype.pc,Yx.prototype.anySettingsMenusAreOpen=Yx.prototype.jd,Yx.prototype.setLastTouchEventTime=Yx.prototype.Ef,Yx.prototype.getDisplayTime=Yx.prototype.jf,Yx.prototype.isCastAllowed=Yx.prototype.Lg,Yx.prototype.setSeeking=Yx.prototype.He,Yx.prototype.isSeeking=Yx.prototype.Ng,Yx.prototype.getConfig=Yx.prototype.hg,Yx.prototype.getClientSideAdContainer=Yx.prototype.gg,Yx.prototype.getServerSideAdContainer=Yx.prototype.Ag,Yx.prototype.getControlsContainer=Yx.prototype.jg,Yx.prototype.getLocalPlayer=Yx.prototype.pg,Yx.prototype.getPlayer=Yx.prototype.lc,Yx.prototype.getLocalVideo=Yx.prototype.qg,Yx.prototype.getVideo=Yx.prototype.Kb,Yx.prototype.getVideoContainer=Yx.prototype.Ig,Yx.prototype.getLocalization=Yx.prototype.rg,Yx.prototype.getCastProxy=Yx.prototype.eg,Yx.prototype.getAd=Yx.prototype.getAd,Yx.prototype.setEnabledNativeControls=Yx.prototype.Df,Yx.prototype.setEnabledShakaControls=Yx.prototype.De,Yx.prototype.configure=Yx.prototype.configure,Yx.prototype.loadComplete=Yx.prototype.Og,Yx.prototype.allowCast=Yx.prototype.Sf,Yx.registerSeekBar=function(e){lv=e},Yx.registerElement=Xx,Yx.prototype.destroy=Yx.prototype.destroy;var ov=new Map,lv=new Kx;function cv(e,t){Rx.call(this,e,t);var n=this;this.m=this.controls.m,this.j=this.controls.i,this.i=[],this.g=xo(),this.g.classList.add("shaka-overflow-menu-button"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.g.textContent="more_vert",this.parent.appendChild(this.g),this.h=go("div"),this.h.classList.add("shaka-overflow-menu"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("shaka-show-controls-on-mouse-over"),this.h.classList.add("shaka-hidden"),this.j.appendChild(this.h),function(e){for(var t=c(e.m.overflowMenuButtons),n=t.next();!n.done;n=t.next())n=n.value,pv.get(n)?(n=pv.get(n),e.i.push(n.create(e.h,e.controls))):W("Unrecognized overflow menu element requested:",n)}(this),this.eventManager.o(this.localization,"locale-updated",function(){dv(n)}),this.eventManager.o(this.localization,"locale-changed",function(){dv(n)}),this.eventManager.o(this.adManager,"ad-started",function(){n.ad&&n.ad.isLinear()&&kx(n.g,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){kx(n.g,!0)}),this.eventManager.o(this.controls,"submenuopen",function(){kx(n.h,!1)}),this.eventManager.o(this.h,"touchstart",function(e){n.controls.Ef(Date.now()),e.stopPropagation()}),this.eventManager.o(this.g,"click",function(){!function(e){if(e.controls.jd())e.controls.pc();else{kx(e.h,!0),tv(e.controls);var t=function(e){return 0==e.classList.contains("shaka-hidden")};(function(e,t){for(var n=c(e),r=n.next();!r.done;r=n.next())if(t(r.value))return!0;return!1})(e.h.childNodes,t)&&te(e.h.childNodes,t)[0].focus()}}(n)}),dv(this),this.ad&&this.ad.isLinear()&&kx(this.g,!1)}function uv(e,t){pv.set(e,t)}function dv(e){e.g.ariaLabel=e.localization.resolve("MORE_SETTINGS")}function hv(){}g(cv,Rx),cv.prototype.release=function(){this.j=null;for(var e=c(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[],Rx.prototype.release.call(this)},B("shaka.ui.OverflowMenu",cv),cv.registerElement=uv,hv.prototype.create=function(e,t){return new cv(e,t)},Xx("overflow_menu",new hv);var pv=new Map;function mv(t,n){Rx.call(this,t,n);var r=this;this.g=xo(),this.g.classList.add("shaka-airplay-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=go("i"),this.h.classList.add("material-icons-round"),this.h.textContent="airplay",this.g.appendChild(this.h),e.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden");var i=go("label");i.classList.add("shaka-overflow-button-label"),i.classList.add("shaka-overflow-menu-only"),this.j=go("span"),i.appendChild(this.j),this.i=go("span"),this.i.classList.add("shaka-current-selection-span"),i.appendChild(this.i),this.g.appendChild(i),this.parent.appendChild(this.g),gv(this),fv(this),this.eventManager.o(this.localization,"locale-updated",function(){gv(r)}),this.eventManager.o(this.localization,"locale-changed",function(){gv(r)}),this.eventManager.o(this.g,"click",function(){r.controls.Kb().webkitShowPlaybackTargetPicker()}),i=this.controls.Kb(),this.eventManager.o(i,"webkitplaybacktargetavailabilitychanged",function(e){var t=r.player.kf()==_c;kx(r.g,"available"==e.availability&&t)}),this.eventManager.o(i,"webkitcurrentplaybacktargetiswirelesschanged",function(){fv(r)})}function fv(e){var t=e.controls.Kb();e.g.ariaPressed=t&&t.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function gv(e){e.g.ariaLabel=e.localization.resolve("AIRPLAY"),e.j.textContent=e.localization.resolve("AIRPLAY")}function xv(){}function vv(e,t,n){this.h=e,this.m=yv(this),t.dataset.shakaPlayerContainer="",t.ui=this,this.$d()&&t.classList.add("shaka-mobile"),this.g=new Yx(e,t,n,this.m),this.configure({}),n.controls||e.Ke(t),t.ui=this,n.ui=this}function yv(t){var n={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),statisticsList:"width height corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent".split(" "),contextMenuElements:["loop","picture_in_picture","statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:Cv,fadeDelay:0,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0,enableTooltips:!1};return e.WebKitPlaybackTargetAvailabilityEvent&&n.overflowMenuButtons.push("airplay"),t.$d()&&(n.addBigPlayButton=!0,n.controlPanelElements=n.controlPanelElements.filter(function(e){return"play_pause"!=e&&"volume"!=e})),n}function _v(){var e,t,n,r,i,s,a,o,l,u,d,h;return P(function(p){switch(p.g){case 1:if(Rm(),!el())return Ev("shaka-ui-load-failed",Sv),p.return();if(e=document.querySelectorAll("[data-shaka-player-container]"),!(t=document.querySelectorAll("[data-shaka-player]")).length&&!e.length){p.D(2);break}if(t.length&&!e.length){for(n=c(t),r=n.next();!r.done;r=n.next())(i=r.value).ui||(s=document.createElement("div"),i.parentElement.replaceChild(s,i),s.appendChild(i),bv(s,i));p.D(2);break}a=c(e),o=a.next();case 4:if(o.done){p.D(2);break}if((l=o.value).ui){p.D(5);break}for(u=null,d=c(t),r=d.next();!r.done;r=d.next())if((h=r.value).parentElement==l){u=h;break}return u||((u=document.createElement("video")).setAttribute("playsinline",""),l.appendChild(u)),b(p,7),_(p,bv(l,u),9);case 9:S(p,5);break;case 7:return T(p),Ev("shaka-ui-load-failed",Tv),p.return();case 5:o=a.next(),p.D(4);break;case 2:Ev("shaka-ui-loaded"),E(p)}})}function Ev(e,t){var n=null;null!=t&&(n={reasonCode:t}),n=new CustomEvent(e,{detail:n}),document.dispatchEvent(n)}function bv(e,t){var n,r,i,s,a,o,l,u;return P(function(d){switch(d.g){case 1:n=new Zo(t),r=new vv(n,e,t),i="",e.dataset&&e.dataset.shakaPlayerCastReceiverId?i=e.dataset.shakaPlayerCastReceiverId:t.dataset&&t.dataset.shakaPlayerCastReceiverId&&(i=t.dataset.shakaPlayerCastReceiverId),i.length&&r.configure({castReceiverAppId:i}),t.controls&&r.g.Df(!0),(s=t.getAttribute("src"))&&((a=document.createElement("source")).setAttribute("src",s),t.appendChild(a),t.removeAttribute("src")),o=c(t.querySelectorAll("source")),l=o.next();case 2:if(l.done){d.D(0);break}return u=l.value,b(d,5),_(d,r.g.lc().load(u.getAttribute("src")),7);case 7:d.D(0);break;case 5:T(d);case 3:l=o.next(),d.D(2)}})}g(mv,Rx),B("shaka.ui.AirPlayButton",mv),xv.prototype.create=function(e,t){return new mv(e,t)},uv("airplay",new xv),Xx("airplay",new xv),(r=vv.prototype).destroy=function(){var e=this;return P(function(t){return 1==t.g?e.g?_(t,e.g.destroy(),2):t.D(2):4!=t.g?(e.g=null,e.h?_(t,e.h.destroy(),4):t.D(4)):(e.h=null,void E(t))})},r.$d=function(){return!!/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)||yn()&&1<navigator.maxTouchPoints},r.getConfiguration=function(){var e=yv(this);return Uo(e,this.m,yv(this),{},""),e},r.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Go(e,t)),Uo(this.m,e,yv(this),{},""),this.m.castReceiverAppId&&!this.m.overflowMenuButtons.includes("cast")&&this.m.overflowMenuButtons.push("cast"),this.g.configure(this.m),this.g.dispatchEvent(new U("uiupdated"))},r.ig=function(){return this.g},r.oh=function(e){this.g.De(e)},B("shaka.ui.Overlay",vv),vv.prototype.setEnabled=vv.prototype.oh,vv.prototype.getControls=vv.prototype.ig,vv.prototype.configure=vv.prototype.configure,vv.prototype.getConfiguration=vv.prototype.getConfiguration,vv.prototype.isMobile=vv.prototype.$d,vv.prototype.destroy=vv.prototype.destroy;var Cv=0;vv.TrackLabelFormat={LANGUAGE:Cv,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var Sv=0,Tv=1;function Rv(e,t,n,r,i,s,a){function o(e,t){return e+": "+t}function l(e){return"variant"==e.type?e.audioRoles?e.audioRoles.join(", "):void 0:e.roles.join(", ")}var u=e.find(function(e){return 1==e.active}),d=jx(t);vo(t),t.appendChild(d),d=new Map;for(var h=c(e),p=h.next();!p.done;p=h.next())p=p.value,d.has(p.language)||d.set(p.language,new Set),d.get(p.language).add(l(p));for(d=new Set,u=u?o(u.language,l(u)):"",h={},p=(e=c(e)).next();!p.done;h={$a:h.$a},p=e.next()){h.$a=p.value,p=h.$a.language;var m=h.$a.forced,f=s.resolve(Xe),g=l(h.$a),x=o(p,g);if(!d.has(x)){d.add(x);var v=xo();v.addEventListener("click",function(e){return function(){n(e.$a)}}(h));var y=go("span");switch(v.appendChild(y),y.textContent=jv(p,s),a){case Cv:m&&(y.textContent+=" ("+f+")");break;case 1:g?y.textContent=g:(W("Track #"+h.$a.id+" does not have a role, but the UI is configured to only show role."),y.textContent="?"),m&&(y.textContent+=" ("+f+")");break;case 2:g&&(y.textContent+=": "+g),m&&(y.textContent+=" ("+f+")");break;case 3:h.$a.label?y.textContent=h.$a.label:(W("Track #"+h.$a.id+" does not have a label, but the UI is configured to only show labels."),y.textContent="?")}r&&x==u&&(v.appendChild(Ix()),y.classList.add("shaka-chosen-item"),v.ariaSelected="true",i.textContent=y.textContent),t.appendChild(v)}}}function jv(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var n=Ve(e);return e in bx?bx[e].u:n in bx?bx[n].u+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function wv(e,t,n){Rx.call(this,e,t);var r=this;!function(e,t){e.button=xo(),e.button.classList.add("shaka-overflow-button"),e.icon=go("i"),e.icon.classList.add("material-icons-round"),e.icon.textContent=t,e.button.appendChild(e.icon);var n=go("label");n.classList.add("shaka-overflow-button-label"),n.classList.add("shaka-overflow-menu-only"),e.nameSpan=go("span"),n.appendChild(e.nameSpan),e.currentSelection=go("span"),e.currentSelection.classList.add("shaka-current-selection-span"),n.appendChild(e.currentSelection),e.button.appendChild(n),e.parent.appendChild(e.button)}(this,n),function(e){e.menu=go("div"),e.menu.classList.add("shaka-no-propagation"),e.menu.classList.add("shaka-show-controls-on-mouse-over"),e.menu.classList.add("shaka-settings-menu"),e.menu.classList.add("shaka-hidden"),e.backButton=xo(),e.backButton.classList.add("shaka-back-to-overflow-button"),e.menu.appendChild(e.backButton),e.eventManager.o(e.backButton,"click",function(){e.controls.pc()});var t=go("i");t.classList.add("material-icons-round"),t.textContent="close",e.backButton.appendChild(t),e.backSpan=go("span"),e.backButton.appendChild(e.backSpan),e.controls.i.appendChild(e.menu)}(this),function(e){e.parent.classList.contains("shaka-overflow-menu")&&(e.backButton.firstChild.textContent="arrow_back",e.eventManager.o(e.backButton,"click",function(){kx(e.parent,!0),e.parent.childNodes[0].focus(),tv(e.controls)}))}(this),this.eventManager.o(this.button,"click",function(){r.menu.classList.contains("shaka-hidden")?(r.controls.dispatchEvent(new U("submenuopen")),kx(r.menu,!0),Ax(r.menu)):kx(r.menu,!1)})}function Av(e,t){wv.call(this,e,t,"language");var n=this;this.button.classList.add("shaka-language-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.o(this.localization,"locale-updated",function(){kv(n)}),this.eventManager.o(this.localization,"locale-changed",function(){kv(n)}),this.eventManager.o(this.player,"trackschanged",function(){var e=0<n.player.fb().length;kx(n.button,e),Iv(n)}),this.eventManager.o(this.player,"variantchanged",function(){Iv(n)}),kv(this),Iv(this)}function Iv(e){Rv(e.player.fb(),e.menu,function(t){e.player.Dd(t.language,t.roles[0])},!0,e.currentSelection,e.localization,e.controls.m.trackLabelFormat),Ax(e.menu),e.controls.dispatchEvent(new U("languageselectionupdated")),e.button.setAttribute("shaka-status",e.currentSelection.innerText)}function kv(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("LANGUAGE"),e.nameSpan.textContent=e.localization.resolve("LANGUAGE"),e.backSpan.textContent=e.localization.resolve("LANGUAGE")}function Mv(){}function Pv(e,t){Rx.call(this,e,t);var n=this;this.h=this.controls.B,this.g=xo(),this.g.classList.add("shaka-cast-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=go("i"),this.i.classList.add("material-icons-round"),this.i.textContent="cast",this.g.appendChild(this.i);var r=go("label");r.classList.add("shaka-overflow-button-label"),r.classList.add("shaka-overflow-menu-only"),this.l=go("span"),r.appendChild(this.l),this.j=go("span"),this.j.classList.add("shaka-current-selection-span"),r.appendChild(this.j),this.g.appendChild(r),this.parent.appendChild(this.g),Ov(this),Lv(this),this.eventManager.o(this.localization,"locale-updated",function(){Ov(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Ov(n)}),this.eventManager.o(this.g,"click",function(){!function(e){var t;P(function(n){return 1==n.g?e.h.xa()?(e.h.Hf(),n.D(0)):(b(n,3),e.g.disabled=!0,_(n,e.h.cast(),5)):3!=n.g?(e.g.disabled=!1,S(n,0)):(t=T(n),e.g.disabled=!1,8004!=t.code&&e.controls.dispatchEvent(new U("error",(new Map).set("detail",t))),void E(n))})}(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){Lv(n)})}function Lv(e){var t=e.h.Te()&&e.controls.Db,n=e.h.xa();kx(e.g,t),e.i.textContent=n?"cast_connected":"cast",t&&(e.g.ariaPressed=n?"true":"false"),Dv(e)}function Dv(e){e.j.textContent=e.h.xa()?e.h.Bd():e.localization.resolve("OFF")}function Ov(e){e.g.ariaLabel=e.localization.resolve("CAST"),e.l.textContent=e.localization.resolve("CAST"),Dv(e)}function $v(){}function Nv(e,t){Rx.call(this,e,t);var n=this;this.g=xo(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-fast-forward-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status","1x"),this.g.textContent="fast_forward",this.parent.appendChild(this.g),Fv(this),this.h=this.controls.m.fastForwardRates,this.eventManager.o(this.localization,"locale-updated",function(){Fv(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Fv(n)}),this.eventManager.o(this.g,"click",function(){if(n.video.duration){var e=n.h.indexOf(n.player.Jb())+1;e=e!=n.h.length?n.h[e]:n.h[0],n.player.Pe(e),n.g.setAttribute("shaka-status",e+"x")}})}function Fv(e){e.g.ariaLabel=e.localization.resolve("FAST_FORWARD")}function Bv(){}function Uv(e,t){Rx.call(this,e,t);var n=this;this.g=xo(),this.g.classList.add("shaka-fullscreen-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),document.fullscreenEnabled||this.g.classList.add("shaka-hidden"),this.g.textContent="fullscreen",this.parent.appendChild(this.g),Gv(this),this.eventManager.o(this.localization,"locale-updated",function(){Gv(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Gv(n)}),this.eventManager.o(this.g,"click",function(){return P(function(e){return _(e,n.controls.Ne(),0)})}),this.eventManager.o(document,"fullscreenchange",function(){n.g.textContent=document.fullscreenElement?"fullscreen_exit":"fullscreen",Gv(n)})}function Gv(e){e.g.ariaLabel=e.localization.resolve(document.fullscreenElement?"EXIT_FULL_SCREEN":"FULL_SCREEN")}function Vv(){}function Hv(e,t){Rx.call(this,e,t);var n=this;this.g=xo(),this.g.classList.add("shaka-loop-button"),this.g.classList.add("shaka-tooltip"),this.i=go("i"),this.i.classList.add("material-icons-round"),this.i.textContent="repeat",this.g.appendChild(this.i);var r=go("label");r.classList.add("shaka-overflow-button-label"),r.classList.add("shaka-overflow-menu-only"),this.j=go("span"),this.j.textContent=this.localization.resolve("LOOP"),r.appendChild(this.j),this.l=go("span"),this.l.classList.add("shaka-current-selection-span"),r.appendChild(this.l),this.g.appendChild(r),Wv(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){Wv(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Wv(n)}),this.eventManager.o(this.g,"click",function(){n.video.loop=!n.video.loop,n.h.Ga(),n.h.na(1)}),this.s=this.video.loop,this.h=new mn(function(){n.s!=n.video.loop&&(Wv(n),n.s=n.video.loop)}),this.h.na(1)}function Wv(e){e.j.textContent=e.localization.resolve("LOOP"),e.l.textContent=e.localization.resolve(e.video.loop?"ON":"OFF"),e.i.textContent=e.video.loop?"repeat_on":"repeat",e.g.ariaLabel=e.localization.resolve(e.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}function qv(){}function zv(e,t){Rx.call(this,e,t);var n=this;this.g=xo(),this.g.classList.add("shaka-mute-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.parent.appendChild(this.g),Kv(this),Yv(this),this.eventManager.o(this.localization,"locale-updated",function(){Kv(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Kv(n)}),this.eventManager.o(this.g,"click",function(){n.ad&&n.ad.isLinear()?n.ad.setMuted(!n.ad.isMuted()):n.video.muted=!n.video.muted}),this.eventManager.o(this.video,"volumechange",function(){Kv(n),Yv(n)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){Kv(n),Yv(n)}),this.eventManager.o(this.adManager,"ad-muted",function(){Kv(n),Yv(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.ad=null,Kv(n),Yv(n)})}function Kv(e){var t=e.ad?e.ad.isMuted()?"UNMUTE":"MUTE":e.video.muted?"UNMUTE":"MUTE";e.g.ariaLabel=e.localization.resolve(t)}function Yv(e){var t=e.ad?e.ad.isMuted()?"volume_off":"volume_up":e.video.muted?"volume_off":"volume_up";e.g.textContent=t}function Qv(){}function Xv(e,t){Rx.call(this,e,t);var n=this;this.l=this.controls.C,this.g=xo(),this.g.classList.add("shaka-pip-button"),this.g.classList.add("shaka-tooltip"),this.i=go("i"),this.i.classList.add("material-icons-round"),this.i.textContent="picture_in_picture_alt",this.g.appendChild(this.i);var r=go("label");r.classList.add("shaka-overflow-button-label"),r.classList.add("shaka-overflow-menu-only"),this.j=go("span"),this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),r.appendChild(this.j),this.h=go("span"),this.h.classList.add("shaka-current-selection-span"),r.appendChild(this.h),this.g.appendChild(r),Zv(this),this.parent.appendChild(this.g),document.pictureInPictureEnabled&&!this.video.disablePictureInPicture||kx(this.g,!1),this.eventManager.o(this.localization,"locale-updated",function(){Zv(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Zv(n)}),this.eventManager.o(this.g,"click",function(){!function(e){var t;P(function(n){return 1==n.g?(b(n,2),document.pictureInPictureElement?_(n,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),_(n,e.video.requestPictureInPicture(),5))):2!=n.g?S(n,0):(t=T(n),e.controls.dispatchEvent(new U("error",(new Map).set("detail",t))),void E(n))})}(n)}),this.eventManager.o(this.l,"enterpictureinpicture",function(){n.i.textContent="branding_watermark",n.g.ariaLabel=n.localization.resolve("EXIT_PICTURE_IN_PICTURE"),n.h.textContent=n.localization.resolve("ON")}),this.eventManager.o(this.l,"leavepictureinpicture",function(){n.i.textContent="picture_in_picture_alt",n.g.ariaLabel=n.localization.resolve("ENTER_PICTURE_IN_PICTURE"),n.h.textContent=n.localization.resolve("OFF")}),this.eventManager.o(this.controls,"caststatuschanged",function(e){e.newStatus?document.pictureInPictureEnabled&&!n.video.disablePictureInPicture&&kx(n.g,!1):document.pictureInPictureEnabled&&!n.video.disablePictureInPicture&&kx(n.g,!0)}),this.eventManager.o(this.player,"trackschanged",function(){!function(e){P(function(t){return!document.pictureInPictureEnabled||e.video.disablePictureInPicture?(kx(e.g,!1),t.D(0)):e.player&&e.player.pf()?(kx(e.g,!1),document.pictureInPictureElement?_(t,document.exitPictureInPicture(),0):t.D(0)):(kx(e.g,!0),t.D(0))})}(n)})}function Zv(e){e.j.textContent=e.localization.resolve("PICTURE_IN_PICTURE"),e.g.ariaLabel=e.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}function Jv(){}function ey(e,t){wv.call(this,e,t,"slow_motion_video");var n=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.button.classList.add("shaka-tooltip-status"),this.eventManager.o(this.localization,"locale-updated",function(){ty(n)}),this.eventManager.o(this.localization,"locale-changed",function(){ty(n)}),this.eventManager.o(this.player,"ratechange",function(){ny(n,n.player.Jb())}),this.g=new Map(this.controls.m.playbackRates.map(function(e){return[e+"x",e]})),ty(this),function(e){for(var t={},n=c(e.g.keys()),r=n.next();!r.done;t={Cc:t.Cc},r=n.next()){t.Cc=r.value,r=xo();var i=go("span");i.textContent=t.Cc,r.appendChild(i),e.eventManager.o(r,"click",function(t){return function(){e.video.playbackRate=e.g.get(t.Cc),e.video.defaultPlaybackRate=e.g.get(t.Cc)}}(t)),e.menu.appendChild(r)}Ax(e.menu)}(this),ny(this,this.player.Jb())}function ty(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("PLAYBACK_RATE"),e.nameSpan.textContent=e.localization.resolve("PLAYBACK_RATE"),e.backSpan.textContent=e.localization.resolve("PLAYBACK_RATE")}function ny(e,t){var n=wx(e.menu,"material-icons-round shaka-chosen-item");if(n){var r=n.parentElement;r.removeAttribute("aria-selected"),r.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),r.removeChild(n)}(n=Array.from(e.menu.querySelectorAll("span")).find(function(n){return e.g.get(n.textContent)==t}))&&((r=n.parentElement).appendChild(Ix()),r.ariaSelected="true",n.classList.add("shaka-chosen-item")),e.currentSelection.textContent=t+"x",e.button.setAttribute("shaka-status",t+"x")}function ry(){}function iy(e,t){Rx.call(this,e,t);var n=this;this.g=xo(),this.g.classList.add("shaka-current-time"),sy(this,"0:00"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"click",function(){n.player.W()&&(n.video.currentTime=n.player.Na().end)}),this.eventManager.o(this.controls,"timeandseekrangeupdated",function(){var e=n.controls.ka,t=n.controls.jf(),r=n.video.duration,i=n.player.Na(),s=i.end-i.start;n.player.W()?(r=3600<=s,1<=(t=Math.max(0,Math.floor(i.end-t)))||e?(sy(n,"- "+Mx(t,r)),n.g.disabled=!1):(sy(n,n.localization.resolve("LIVE")),n.g.disabled=!0)):(t=Mx(t,e=3600<=r),r&&(t+=" / "+Mx(r,e)),sy(n,t),n.g.disabled=!0)}),this.eventManager.o(this.player,"trackschanged",function(){n.player.W()&&(n.g.ariaLabel=n.localization.resolve("SKIP_TO_LIVE"))})}function sy(e,t){t!=e.g.textContent&&(e.g.textContent=t)}function ay(){}function oy(e,t){wv.call(this,e,t,"settings");var n=this;this.button.classList.add("shaka-resolution-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-resolutions"),this.eventManager.o(this.localization,"locale-updated",function(){cy(n)}),this.eventManager.o(this.localization,"locale-changed",function(){cy(n)}),this.eventManager.o(this.player,"variantchanged",function(){ly(n)}),this.eventManager.o(this.player,"trackschanged",function(){ly(n)}),this.eventManager.o(this.player,"abrstatuschanged",function(){ly(n)}),ly(this),cy(this)}function ly(e){var t=e.player.fb();if(t.length&&!t[0].height)kx(e.menu,!1),kx(e.button,!1);else{kx(e.button,!0),t.sort(function(e,t){return t.height-e.height});var n=t.find(function(e){return e.active});n&&(t=t.filter(function(e){return e.language==n.language&&e.channelsCount==n.channelsCount})),t=t.filter(function(e,n){return t.findIndex(function(t){return t.height==e.height})==n});var r=jx(e.menu);vo(e.menu),e.menu.appendChild(r),r=e.player.getConfiguration().abr.enabled;for(var i={},s=c(t),a=s.next();!a.done;i={Fc:i.Fc},a=s.next()){i.Fc=a.value,(a=xo()).classList.add("explicit-resolution"),e.eventManager.o(a,"click",function(t){return function(){var n=t.Fc;e.player.configure({abr:{enabled:!1}}),e.player.Be(n,e.controls.m.clearBufferOnQualityChange)}}(i));var o=go("span");o.textContent=i.Fc.height+"p",a.appendChild(o),r||i.Fc!=n||(a.ariaSelected="true",a.appendChild(Ix()),o.classList.add("shaka-chosen-item"),e.currentSelection.textContent=o.textContent),e.menu.appendChild(a)}(i=xo()).classList.add("shaka-enable-abr-button"),e.eventManager.o(i,"click",function(){e.player.configure({abr:{enabled:!0}}),ly(e)}),e.g=go("span"),e.g.classList.add("shaka-auto-span"),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),i.appendChild(e.g),r&&(i.ariaSelected="true",i.appendChild(Ix()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),e.menu.appendChild(i),Ax(e.menu),e.controls.dispatchEvent(new U("resolutionselectionupdated"))}}function cy(e){e.button.ariaLabel=e.localization.resolve("RESOLUTION"),e.backButton.ariaLabel=e.localization.resolve("RESOLUTION"),e.backSpan.textContent=e.localization.resolve("RESOLUTION"),e.nameSpan.textContent=e.localization.resolve("RESOLUTION"),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}function uy(){}function dy(e,t){Rx.call(this,e,t);var n=this;this.g=xo(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-rewind-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status",this.localization.resolve("OFF")),this.g.textContent="fast_rewind",this.parent.appendChild(this.g),hy(this),this.h=this.controls.m.rewindRates,this.eventManager.o(this.localization,"locale-updated",function(){hy(n)}),this.eventManager.o(this.localization,"locale-changed",function(){hy(n)}),this.eventManager.o(this.g,"click",function(){if(n.video.duration){var e=n.h.indexOf(n.player.Jb())+1;e=e!=n.h.length?n.h[e]:n.h[0],n.player.Pe(e),n.g.setAttribute("shaka-status",e+"x")}})}function hy(e){e.g.ariaLabel=e.localization.resolve("REWIND")}function py(){}function my(e,t){Rx.call(this,e,t);var n=this;this.j=go("div"),this.j.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.j),this.h=go("div"),this.h.classList.add("shaka-skip-ad-counter"),kx(this.h,!1),this.j.appendChild(this.h),this.g=xo(),this.g.classList.add("shaka-skip-ad-button"),this.g.disabled=!0,kx(this.g,!1),this.g.classList.add("shaka-no-propagation"),this.j.appendChild(this.g),fy(this),this.i=new mn(function(){var e=Math.round(n.ad.getTimeUntilSkippable());0<e?n.h.textContent=e:(n.i.stop(),kx(n.h,!1))}),this.eventManager.o(this.localization,"locale-updated",function(){fy(n)}),this.eventManager.o(this.localization,"locale-changed",function(){fy(n)}),this.eventManager.o(this.adManager,"ad-started",function(){gy(n)}),this.eventManager.o(this.adManager,"ad-skip-state-changed",function(){n.ad.canSkipNow()&&(n.g.disabled=!1,n.i.stop(),kx(n.h,!1))}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.i.stop(),n.g.disabled=!0,kx(n.g,!1),kx(n.h,!1)}),this.eventManager.o(this.g,"click",function(){n.ad.skip()}),this.ad&&gy(this)}function fy(e){e.g.textContent=e.localization.resolve("SKIP_AD")}function gy(e){e.ad.isSkippable()&&(kx(e.g,!0),kx(e.h,!0),e.h.textContent="",e.i.Ga(),e.i.na(.5))}function xy(e,t){Ox.call(this,e,t),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.button.classList.add("shaka-tooltip"),this.h(),this.g()}function vy(){}function yy(e,t){Rx.call(this,e,t);var n=go("div");n.classList.add("shaka-spacer"),n.ariaHidden="true",this.parent.appendChild(n)}function _y(){}function Ey(e,t){function n(e){return Mx(o.h[e],!1)+" (m)"}function r(e){return Math.round(o.h[e]/1e3)+" (kbits/s)"}function i(e){return o.h[e].toFixed(2)+" (s)"}function s(e){return o.h[e]+" (frames)"}function a(e){return o.h[e]+" (px)"}Rx.call(this,e,t);var o=this;this.i=xo(),this.i.classList.add("shaka-statistics-button"),this.j=go("i"),this.j.classList.add("material-icons-round"),this.j.textContent="insert_chart_outlined",this.i.appendChild(this.j);var l=go("label");l.classList.add("shaka-overflow-button-label"),this.B=go("span"),l.appendChild(this.B),this.s=go("span"),this.s.classList.add("shaka-current-selection-span"),l.appendChild(this.s),this.i.appendChild(l),this.parent.appendChild(this.i),this.g=go("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-statistics-container"),this.g.classList.add("shaka-hidden"),this.controls.i.appendChild(this.g),this.I=[],this.J=["stateHistory","switchHistory"],this.h=this.player.getStats(),this.C={},this.G={width:a,height:a,completionPercent:function(e){return o.h[e]+" (%)"},bufferingTime:i,drmTimeSeconds:i,licenseTime:i,liveLatency:i,loadLatency:i,manifestTimeSeconds:i,estimatedBandwidth:r,streamBandwidth:r,maxSegmentDuration:n,pauseTime:n,playTime:n,corruptedFrames:s,decodedFrames:s,droppedFrames:s},this.l=new mn(function(){o.h=o.player.getStats();for(var e=c(o.I),t=e.next();!t.done;t=e.next())t=t.value,o.C[t].textContent=o.G[t](t)}),by(this),function(e){for(var t=c(e.controls.m.statisticsList),n=t.next();!n.done;n=t.next())if((n=n.value)in e.h&&!e.J.includes(n)){var r=e.g,i=r.appendChild,s=e,a=go("div"),o=go("label");o.textContent=n+":",a.appendChild(o),(o=go("span")).textContent=s.G[n](n),a.appendChild(o),s.C[n]=o,i.call(r,a),e.I.push(n)}else W("Unrecognized statistic element:",n)}(this),this.eventManager.o(this.localization,"locale-updated",function(){by(o)}),this.eventManager.o(this.localization,"locale-changed",function(){by(o)}),this.eventManager.o(this.i,"click",function(){kx(o.parent,!1),o.g.classList.contains("shaka-hidden")?(o.j.textContent="insert_chart",o.l.na(.1),kx(o.g,!0)):(o.j.textContent="insert_chart_outlined",o.l.stop(),kx(o.g,!1)),by(o)})}function by(e){e.B.textContent=e.localization.resolve("STATISTICS"),e.i.ariaLabel=e.localization.resolve("STATISTICS"),e.s.textContent=e.localization.resolve(e.g.classList.contains("shaka-hidden")?"OFF":"ON")}function Cy(){}function Sy(e,t){wv.call(this,e,t,"closed_caption");var n=this;this.button.classList.add("shaka-caption-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.Vb()?this.button.ariaPressed="true":this.button.ariaPressed="false",function(e){var t=xo();t.ariaSelected="true",e.menu.appendChild(t),t.appendChild(Ix()),e.g=go("span"),e.g.classList.add("shaka-auto-span"),t.appendChild(e.g)}(this),this.eventManager.o(this.localization,"locale-updated",function(){jy(n),Ry(n)}),this.eventManager.o(this.localization,"locale-changed",function(){jy(n),Ry(n)}),this.eventManager.o(this.player,"texttrackvisibility",function(){Ty(n),Ry(n)}),this.eventManager.o(this.player,"textchanged",function(){Ry(n)}),this.eventManager.o(this.player,"trackschanged",function(){wy(n)}),Ty(this),jy(this),Ry(this),wy(this)}function Ty(e){e.player.Vb()?(e.icon.textContent="closed_caption_disabled",e.button.ariaPressed="true"):(e.icon.textContent="closed_caption",e.button.ariaPressed="false"),e.controls.dispatchEvent(new U("captionselectionupdated"))}function Ry(e){var t=e.player.vb();Rv(t,e.menu,function(t){return function(e,t){return P(function(n){return e.player.Ae(t),_(n,e.player.Je(!0),0)})}(e,t)},e.player.Vb(),e.currentSelection,e.localization,e.controls.m.trackLabelFormat),(t=xo()).classList.add("shaka-turn-captions-off-button"),e.eventManager.o(t,"click",function(){e.player.Je(!1),Ry(e)}),t.appendChild(e.g),e.menu.appendChild(t),e.player.Vb()||(t.ariaSelected="true",t.appendChild(Ix()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("OFF")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),Ax(e.menu),e.controls.dispatchEvent(new U("captionselectionupdated"))}function jy(e){e.button.ariaLabel=e.localization.resolve("CAPTIONS"),e.backButton.ariaLabel=e.localization.resolve("BACK"),e.nameSpan.textContent=e.localization.resolve("CAPTIONS"),e.backSpan.textContent=e.localization.resolve("CAPTIONS"),e.g.textContent=e.localization.resolve("OFF")}function wy(e){var t=0<e.player.vb().length;kx(e.button,t),Ry(e)}function Ay(){}function Iy(e,t){Ux.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var n=this;this.m=this.controls.m,this.eventManager.o(this.video,"volumechange",function(){return ky(n)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){return My(n)}),this.eventManager.o(this.adManager,"ad-muted",function(){return My(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){return ky(n)}),this.eventManager.o(this.localization,"locale-updated",function(){return Ly(n)}),this.eventManager.o(this.localization,"locale-changed",function(){return Ly(n)}),ky(this),Ly(this),this.ad&&this.onChange()}function ky(e){e.video.muted?e.setValue(0):e.setValue(e.video.volume),Py(e)}function My(e){var t=e.ad.getVolume();e.setValue(t),Py(e)}function Py(e){var t=e.m.volumeBarColors,n=["to right"];n.push(t.level+100*e.getValue()+"%"),n.push(t.base+100*e.getValue()+"%"),n.push(t.base+"100%"),e.container.style.background="linear-gradient("+n.join(",")+")"}function Ly(e){e.bar.ariaLabel=e.localization.resolve("VOLUME")}function Dy(){}vv.FailReasonCode={NO_BROWSER_SUPPORT:Sv,PLAYER_FAILED_TO_LOAD:Tv},"complete"==document.readyState?P(function(e){if(1==e.g)return _(e,Promise.resolve(),2);_v(),E(e)}):e.addEventListener("load",_v),g(wv,Rx),B("shaka.ui.SettingsMenu",wv),g(Av,wv),B("shaka.ui.AudioLanguageSelection",Av),Mv.prototype.create=function(e,t){return new Av(e,t)},uv("language",new Mv),Xx("language",new Mv),g(Pv,Rx),B("shaka.ui.CastButton",Pv),$v.prototype.create=function(e,t){return new Pv(e,t)},uv("cast",new $v),Xx("cast",new $v),g(Nv,Rx),B("shaka.ui.FastForwardButton",Nv),Bv.prototype.create=function(e,t){return new Nv(e,t)},Xx("fast_forward",new Bv),g(Uv,Rx),B("shaka.ui.FullscreenButton",Uv),Vv.prototype.create=function(e,t){return new Uv(e,t)},Xx("fullscreen",new Vv),g(Hv,Rx),Hv.prototype.release=function(){this.h.stop(),this.h=null,Rx.prototype.release.call(this)},B("shaka.ui.LoopButton",Hv),qv.prototype.create=function(e,t){return new Hv(e,t)},uv("loop",new qv),Xx("loop",new qv),Fx("loop",new qv),g(zv,Rx),B("shaka.ui.MuteButton",zv),Qv.prototype.create=function(e,t){return new zv(e,t)},Xx("mute",new Qv),g(Xv,Rx),B("shaka.ui.PipButton",Xv),Jv.prototype.create=function(e,t){return new Xv(e,t)},uv("picture_in_picture",new Jv),Xx("picture_in_picture",new Jv),Fx("picture_in_picture",new Jv),g(ey,wv),B("shaka.ui.PlaybackRateSelection",ey),ry.prototype.create=function(e,t){return new ey(e,t)},uv("playback_rate",new ry),Xx("playback_rate",new ry),g(iy,Rx),B("shaka.ui.PresentationTimeTracker",iy),ay.prototype.create=function(e,t){return new iy(e,t)},Xx("time_and_duration",new ay),g(oy,wv),B("shaka.ui.ResolutionSelection",oy),uy.prototype.create=function(e,t){return new oy(e,t)},uv("quality",new uy),Xx("quality",new uy),g(dy,Rx),B("shaka.ui.RewindButton",dy),py.prototype.create=function(e,t){return new dy(e,t)},Xx("rewind",new py),g(my,Rx),my.prototype.release=function(){this.i.stop(),this.i=null,Rx.prototype.release.call(this)},B("shaka.ui.SkipAdButton",my),g(xy,Ox),xy.prototype.h=function(){this.button.textContent=this.video.ended?"replay":this.isPaused()?"play_arrow":"pause"},xy.prototype.g=function(){if(this.video.ended)this.button.ariaLabel=this.localization.resolve("REPLAY");else{var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)}},B("shaka.ui.SmallPlayButton",xy),vy.prototype.create=function(e,t){return new xy(e,t)},Xx("play_pause",new vy),g(yy,Rx),B("shaka.ui.Spacer",yy),_y.prototype.create=function(e,t){return new yy(e,t)},Xx("spacer",new _y),g(Ey,Rx),Ey.prototype.release=function(){this.l.stop(),this.l=null,Rx.prototype.release.call(this)},B("shaka.ui.StatisticsButton",Ey),Cy.prototype.create=function(e,t){return new Ey(e,t)},uv("statistics",new Cy),Fx("statistics",new Cy),g(Sy,wv),B("shaka.ui.TextSelection",Sy),Ay.prototype.create=function(e,t){return new Sy(e,t)},uv("captions",new Ay),Xx("captions",new Ay),g(Iy,Ux),Iy.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()):(this.video.volume=this.getValue(),this.video.muted=0==this.video.volume)},B("shaka.ui.VolumeBar",Iy),Dy.prototype.create=function(e,t){return new Iy(e,t)},Xx("volume",new Dy)}.call(t,e,e,void 0),t.shaka)exports[n]=t.shaka[n]}();var _excluded$7=["src","config","chromeless","className"];function ShakaPlayer$1(e,t){var n=e.src,r=e.config,i=e.chromeless,s=e.className,a=_objectWithoutProperties$1(e,_excluded$7),o=React__default.default.useRef(null),l=React__default.default.useRef(null),c=_slicedToArray$1(React__default.default.useState(null),2),u=c[0],d=c[1],h=_slicedToArray$1(React__default.default.useState(null),2),p=h[0],m=h[1];return React__default.default.useEffect(function(){var e=new shakaPlayer_ui.Player(l.current);if(d(e),!i){var t=new shakaPlayer_ui.ui.Overlay(e,o.current,l.current);m(t)}return function(){e.destroy()}},[]),React__default.default.useEffect(function(){u&&r&&u.configure(r)},[u,r]),React__default.default.useEffect(function(){u&&n&&u.load(n)},[u,n]),React__default.default.useImperativeHandle(t,function(){return{get player(){return u},get ui(){return p},get videoElement(){return l.current}}},[u,p]),React__default.default.createElement("div",{ref:o,className:s},React__default.default.createElement("video",_extends({ref:l,style:{maxWidth:"100%",width:"100%"}},a)))}var index$1=React__default.default.forwardRef(ShakaPlayer$1),cjs=index$1;const ShakaPlayerReact=getDefaultExportFromCjs$1(cjs),ShakaPlayer=({streamUrl:e,channelName:t,onError:n,onReady:r})=>jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx(ShakaPlayerReact,{autoPlay:!0,src:e,width:"100%",height:"100%",poster:null,title:t,onErrorEvent:n,onLoad:r,style:{borderRadius:8,background:"#000",width:"100%",height:"100%"}})}),PopUnderAdsterra=()=>useLocation().pathname.startsWith("/admin")?null:jsxRuntimeExports.jsx(Helmet,{children:jsxRuntimeExports.jsx("script",{type:"text/javascript",src:"//pl27452424.profitableratecpm.com/5c/03/31/5c0331c76eb3917efd1fc7670eaac336.js"})}),FavouriteToggle=({channel:e,size:t=28,variant:n="icon"})=>{const{isFavorite:r,toggleFavorite:i}=useFavorites(),s=r((null==e?void 0:e._id)||(null==e?void 0:e.id)),a=s?"Remove from favourites":"Add to favourites";return e?"pill"===n?jsxRuntimeExports.jsxs("button",{onClick:()=>i(e),className:"fav-pill "+(s?"active":""),"aria-label":a,children:[s?jsxRuntimeExports.jsx(default_1$5,{sx:{fontSize:t-4}}):jsxRuntimeExports.jsx(default_1$1,{sx:{fontSize:t-4}}),jsxRuntimeExports.jsx("span",{className:"fav-pill-text",children:s?"Favourited":"Add Favourite"})]}):jsxRuntimeExports.jsx(Tooltip,{title:a,arrow:!0,disableInteractive:!0,children:jsxRuntimeExports.jsxs(IconButton,{onClick:()=>i(e),className:"fav-heart "+(s?"active":""),size:"small","aria-label":a,sx:{width:t+8,height:t+8,borderRadius:"50%",position:"relative"},children:[s?jsxRuntimeExports.jsx(default_1$5,{sx:{fontSize:t}}):jsxRuntimeExports.jsx(default_1$1,{sx:{fontSize:t}}),jsxRuntimeExports.jsx("span",{className:"fav-pulse"})]})}):null},__channelPlayCache=new Map,ChannelPlayer=()=>{var e,t,n;const{id:r,slug:i}=useParams(),s=useNavigate(),a=useTheme(),o=useMediaQuery(a.breakpoints.down("md")),[l,c]=reactExports.useState(null),[u,d]=reactExports.useState([]),[h,p]=reactExports.useState(!0),[m,f]=reactExports.useState(""),[g,x]=reactExports.useState(!1),[v,y]=reactExports.useState(!1),[_,E]=reactExports.useState(!1),[b,C]=reactExports.useState(""),{user:S}=useAuth(),{checkChannelAccess:T,hasAnyActivePackage:R}=usePremiumAccess(),[j,w]=reactExports.useState(!1),[A,I]=reactExports.useState(!1),[k,M]=reactExports.useState(!1),P=reactExports.useMemo(()=>!S||!R(),[S,R]),{trackVideoStart:L,trackVideoError:D}=useVideoAnalytics(),{trackChannelView:O}=useChannelAnalytics(),{settings:$,fetchSettings:N}=useSettings();reactExports.useEffect(()=>{N&&N()},[]);const[F,B]=reactExports.useState("vidstack");reactExports.useEffect(()=>{$&&$.playerSelection&&("user"===$.playerSelection?B("vidstack"):B($.playerSelection))},[$]);const{toggleFavorite:U,isFavorite:G}=useFavorites(),V=reactExports.useMemo(()=>{if(console.log("Parsing channel ID from params:",{id:r,slug:i}),r)return console.log("Using ID from params:",r),r;const e=parseChannelIdFromUrl(window.location.pathname);return console.log("Parsed ID from URL:",e),e},[r,i]),H=reactExports.useRef(null),W=reactExports.useRef(null);reactExports.useEffect(()=>{const e=()=>{E(!0),v&&y(!1)};return document.addEventListener("touchstart",e,{once:!0}),document.addEventListener("click",e,{once:!0}),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("click",e)}},[v]);const q=e=>{if(!e)return"";if(e.startsWith("http"))return e;return`https://ipapi.bdstream.site${e}`},z=reactExports.useRef(!1),K=reactExports.useRef(null),Y=reactExports.useRef(O);reactExports.useEffect(()=>{Y.current=O},[O]);const Q=reactExports.useCallback(async()=>{var e;if(!V)return console.error("No channel ID provided"),f("No channel ID provided"),void p(!1);if(!z.current&&K.current!==V){if(__channelPlayCache.has(V)){const e=__channelPlayCache.get(V);return c(e.channelData),d(e.allChannels||[]),K.current=V,void p(!1)}z.current=!0,p(!0),f("");try{const[e,t]=await Promise.all([channelsAPI.play(V),channelsAPI.getAll()]),n=e.data;if(window.__playFetchCount||(window.__playFetchCount=0),window.__playFetchCount+=1,(null==n?void 0:n.channel)&&!n.channel._id&&n.channel.id&&(n.channel._id=n.channel.id),c(e=>{var t,r;return(null==(t=null==e?void 0:e.channel)?void 0:t._id)&&(null==(r=null==n?void 0:n.channel)?void 0:r._id)&&e.channel._id===n.channel._id?{...e,...n}:n}),d(t.data||[]),__channelPlayCache.set(V,{channelData:n,allChannels:t.data||[]}),null==n?void 0:n.channel){const e=n.channel._id||n.channel.id;try{Y.current(n.channel.name,n.channel.category||"Unknown")}catch(e2){console.warn("trackChannelView failed:",e2)}const t=window.location.pathname,r=generateChannelUrl(e,n.channel.name);e&&t===`/channels/play/${e}`&&r!==t&&s(r,{replace:!0});(async()=>{const e=await isContentPremium("channel",n.channel._id);if(w(e),e){if(!S)return console.log(`Redirecting to login for premium channel: ${n.channel.name}`),void s(`/login?redirect=${encodeURIComponent(window.location.pathname)}`);console.log(`Checking access for premium channel: ${n.channel.name}`);const e=await T(n.channel._id);console.log("Channel access result:",e);const t=e.hasAccess;I(t),t||(console.log(`Blocking premium channel: ${e.reason}`),M(!0))}else I(!0)})()}K.current=V}catch(err){console.error("Error loading channel data:",err);let n="Failed to load channel data";err.response?n+=`: ${err.response.status} - ${(null==(e=err.response.data)?void 0:e.message)||err.response.statusText}`:err.request?n+=": Network error - Backend might not be running":n+=`: ${err.message}`,f(n)}finally{z.current=!1,p(!1)}}},[V,s,T]);reactExports.useEffect(()=>{Q()},[V]),reactExports.useEffect(()=>()=>{},[V]);const X=()=>{x(!0),C(""),console.log("Vidstack player ready"),(null==l?void 0:l.channel)&&L({title:l.channel.name,url:l.channel.stream_url,duration:0,quality:"HD"}),o&&setTimeout(()=>{ee()},200)},Z=e=>{C(e),console.error("Vidstack player error:",e),(null==l?void 0:l.channel)&&D({title:l.channel.name,url:l.channel.stream_url,duration:0,quality:"HD"},e)};reactExports.useEffect(()=>{/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&y(!0)},[]),reactExports.useEffect(()=>{H.current},[]),reactExports.useEffect(()=>{if(!V||h||!l)return;const e=setTimeout(()=>{ee()},o?300:150);return()=>clearTimeout(e)},[V,l,h,o]);const J=()=>{s("/channels")},ee=()=>{if(console.log("scrollToPlayer called, isMobile:",o,"playerSectionRef:",!!W.current),W.current){setTimeout(()=>{try{console.log("Attempting to scroll to player section..."),W.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch(e){console.log("Scroll error:",e),window.scrollTo({top:0,behavior:"smooth"})}},o?100:50)}else console.log("playerSectionRef.current is null")};if(h)return jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{py:3},children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",height:400,sx:{mb:2}}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"60%",height:40})]});if(!h&&m&&!l)return jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{py:3},children:[jsxRuntimeExports.jsx(Button$2,{onClick:J,startIcon:jsxRuntimeExports.jsx(ArrowBack,{}),sx:{mb:2},children:"Back to Channels"}),jsxRuntimeExports.jsx(Alert,{severity:"error",children:m})]});if(!h&&!l)return jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{py:3},children:[jsxRuntimeExports.jsx(Button$2,{onClick:J,startIcon:jsxRuntimeExports.jsx(ArrowBack,{}),sx:{mb:2},children:"Back to Channels"}),jsxRuntimeExports.jsx(Alert,{severity:"warning",children:"No channel data available"})]});if(!l||!l.channel)return jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{py:3},children:[jsxRuntimeExports.jsx(Button$2,{onClick:J,startIcon:jsxRuntimeExports.jsx(ArrowBack,{}),sx:{mb:2},children:"Back to Channels"}),jsxRuntimeExports.jsx(Alert,{severity:"warning",children:"Invalid channel data"})]});const{channel:te}=l,ne=l?u.filter(e=>{var t,n;return(null==(t=e.category)?void 0:t._id)===(null==(n=l.channel.category)?void 0:n._id)&&e._id!==l.channel._id}):[],re=generateChannelMetaTags({name:te.name,category:(null==(e=te.category)?void 0:e.name)||"entertainment",logo:te.logoUrl||te.logo,_id:te._id,slug:te.slug||generateSlug(te.name),region:te.region||""},$),ie=re.siteTitle||(null==$?void 0:$.websiteTitle)||(null==$?void 0:$.websiteName)||(null==$?void 0:$.title)||"BDStream",se=re.title,ae=re.description,oe=renderChannelStructuredData({name:te.name,category:(null==(t=te.category)?void 0:t.name)||"entertainment",logo:te.logo,stream_url:te.stream_url,slug:te.slug||generateSlug(te.name),_id:te._id,region:te.region||"Worldwide",channelNumber:te.channelNumber});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:se}),jsxRuntimeExports.jsx("meta",{name:"description",content:ae}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:re.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:re.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:re.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"video.other"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:re.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:re.ogImage}),jsxRuntimeExports.jsx("meta",{property:"og:site_name",content:ie}),jsxRuntimeExports.jsx("meta",{property:"og:locale",content:"en_US"}),jsxRuntimeExports.jsx("meta",{property:"og:locale:alternate",content:"bn_BD"}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:re.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:re.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"player"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:re.twitterImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:site",content:"@bdstreamsite"}),jsxRuntimeExports.jsx("meta",{name:"twitter:creator",content:"@bdstreamsite"}),jsxRuntimeExports.jsx("meta",{name:"robots",content:"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"}),jsxRuntimeExports.jsx("meta",{name:"author",content:ie}),jsxRuntimeExports.jsx("meta",{name:"language",content:"English"}),jsxRuntimeExports.jsx("meta",{name:"revisit-after",content:"1 days"}),jsxRuntimeExports.jsx("meta",{name:"distribution",content:"global"}),jsxRuntimeExports.jsx("meta",{name:"rating",content:"general"}),jsxRuntimeExports.jsx("meta",{name:"classification",content:"Entertainment"}),jsxRuntimeExports.jsx("meta",{name:"category",content:"Streaming Service"}),jsxRuntimeExports.jsx("meta",{name:"coverage",content:"Worldwide"}),jsxRuntimeExports.jsx("meta",{name:"target",content:"all"}),jsxRuntimeExports.jsx("meta",{name:"HandheldFriendly",content:"true"}),jsxRuntimeExports.jsx("meta",{name:"format-detection",content:"telephone=no"}),jsxRuntimeExports.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),jsxRuntimeExports.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),jsxRuntimeExports.jsx("meta",{name:"apple-mobile-web-app-title",content:ie}),jsxRuntimeExports.jsx("meta",{name:"application-name",content:ie}),jsxRuntimeExports.jsx("meta",{name:"theme-color",content:"#1976d2"}),jsxRuntimeExports.jsx("meta",{name:"msapplication-TileColor",content:"#1976d2"}),jsxRuntimeExports.jsx("meta",{name:"geo.region",content:"BD"}),jsxRuntimeExports.jsx("meta",{name:"geo.placename",content:"Bangladesh"}),jsxRuntimeExports.jsx("meta",{name:"geo.position",content:"23.6850;90.3563"}),jsxRuntimeExports.jsx("meta",{name:"ICBM",content:"23.6850, 90.3563"}),jsxRuntimeExports.jsx("meta",{name:"DC.title",content:se}),jsxRuntimeExports.jsx("meta",{name:"DC.description",content:ae}),jsxRuntimeExports.jsx("meta",{name:"DC.subject",content:re.keywords}),jsxRuntimeExports.jsx("meta",{name:"DC.creator",content:ie}),jsxRuntimeExports.jsx("meta",{name:"DC.publisher",content:ie}),jsxRuntimeExports.jsx("meta",{name:"DC.contributor",content:ie}),jsxRuntimeExports.jsx("meta",{name:"DC.date",content:(new Date).toISOString()}),jsxRuntimeExports.jsx("meta",{name:"DC.type",content:"InteractiveResource"}),jsxRuntimeExports.jsx("meta",{name:"DC.format",content:"text/html"}),jsxRuntimeExports.jsx("meta",{name:"DC.identifier",content:re.ogUrl}),jsxRuntimeExports.jsx("meta",{name:"DC.language",content:"en"}),jsxRuntimeExports.jsx("meta",{name:"DC.coverage",content:"Worldwide"}),jsxRuntimeExports.jsx("meta",{name:"DC.rights",content:`Copyright ${(new Date).getFullYear()} ${ie}`}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:re.ogUrl}),oe]}),jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{py:3},children:[jsxRuntimeExports.jsx(Box,{ref:W,className:"video-player-container",sx:{mb:3},children:jsxRuntimeExports.jsxs(Box,{sx:{background:"dark"===a.palette.mode?"linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%)":"linear-gradient(135deg, rgba(0, 0, 0, 0.02) 0%, rgba(0, 0, 0, 0.01) 100%)",borderRadius:"16px",padding:"20px",border:"dark"===a.palette.mode?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.06)",backdropFilter:"blur(8px)",boxShadow:"dark"===a.palette.mode?"0 4px 20px rgba(0, 0, 0, 0.2)":"0 4px 20px rgba(0, 0, 0, 0.05)",mb:2,display:"flex",flexDirection:"column",gap:"8px"},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{color:"dark"===a.palette.mode?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.6)",fontSize:"0.85rem",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"4px"},children:"Navigation"}),jsxRuntimeExports.jsx(Button$2,{onClick:J,startIcon:jsxRuntimeExports.jsx(ArrowBack,{}),variant:"contained",sx:{background:"dark"===a.palette.mode?"linear-gradient(135deg, rgba(0, 188, 212, 0.9) 0%, rgba(124, 77, 255, 0.9) 100%)":"linear-gradient(135deg, rgba(0, 188, 212, 0.8) 0%, rgba(124, 77, 255, 0.8) 100%)",color:"white",fontWeight:600,fontSize:"0.95rem",padding:"12px 24px",borderRadius:"12px",boxShadow:"dark"===a.palette.mode?"0 8px 32px rgba(0, 188, 212, 0.3)":"0 8px 32px rgba(0, 188, 212, 0.2)",border:"dark"===a.palette.mode?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",textTransform:"none","&:hover":{background:"dark"===a.palette.mode?"linear-gradient(135deg, rgba(0, 188, 212, 1) 0%, rgba(124, 77, 255, 1) 100%)":"linear-gradient(135deg, rgba(0, 188, 212, 0.9) 0%, rgba(124, 77, 255, 0.9) 100%)",transform:"translateY(-2px)",boxShadow:"dark"===a.palette.mode?"0 12px 40px rgba(0, 188, 212, 0.4)":"0 12px 40px rgba(0, 188, 212, 0.3)"},"&:active":{transform:"translateY(0px)",boxShadow:"dark"===a.palette.mode?"0 4px 20px rgba(0, 188, 212, 0.3)":"0 4px 20px rgba(0, 188, 212, 0.2)"},"& .MuiButton-startIcon":{marginRight:"8px","& .MuiSvgIcon-root":{fontSize:"1.2rem",transition:"transform 0.3s ease"}},"&:hover .MuiButton-startIcon .MuiSvgIcon-root":{transform:"translateX(-3px)"}},children:"Back to Channels"})]})}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:3,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,lg:7,children:jsxRuntimeExports.jsxs(Box,{sx:{mb:3},children:[jsxRuntimeExports.jsx(Box,{ref:H,sx:{width:"100%",aspectRatio:"16/9",backgroundColor:"#000",borderRadius:2,mb:3,boxShadow:3,position:"relative",overflow:"hidden"},children:l&&(j&&!A?jsxRuntimeExports.jsx(PremiumGate,{contentType:"channel",contentName:l.channel.name,onUpgrade:()=>M(!0)}):"shaka"===(null==$?void 0:$.playerSelection)||"user"===(null==$?void 0:$.playerSelection)&&"shaka"===F?jsxRuntimeExports.jsx(ShakaPlayer,{streamUrl:l.channel.stream_url||l.streamUrl,channelName:l.channel.name,onError:Z,onReady:X}):jsxRuntimeExports.jsx(SimpleVidstackPlayer,{streamUrl:l.channel.stream_url||l.streamUrl,channelName:l.channel.name,onError:Z,onReady:X,isMobileMuted:v,onUnmute:()=>{y(!1),console.log("Video unmuted")}}))}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,boxShadow:"dark"===a.palette.mode?"0 4px 16px 0 rgba(0, 0, 0, 0.3)":"0 4px 16px 0 rgba(0, 0, 0, 0.1)",backgroundColor:"dark"===a.palette.mode?"rgba(255, 255, 255, 0.08)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:"dark"===a.palette.mode?"1px solid rgba(255, 255, 255, 0.12)":"1px solid rgba(0, 0, 0, 0.08)"},children:jsxRuntimeExports.jsx(CardContent,{sx:{p:2},children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,alignItems:"center",sx:{position:"relative"},children:[jsxRuntimeExports.jsx(Grid,{item:!0,children:jsxRuntimeExports.jsx(Avatar,{src:q(te.logoUrl),alt:te.name,sx:{width:80,height:80,border:"2px solid",borderColor:a.palette.primary.main},onError:e=>{console.error("Failed to load channel logo:",te.name,"URL:",q(te.logoUrl)),e.target.style.display="none"}})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:!0,children:[jsxRuntimeExports.jsx(Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:jsxRuntimeExports.jsx(Typography,{variant:"h5",component:"div",fontWeight:"bold",sx:{textTransform:"uppercase",color:a.palette.text.primary},children:te.name})}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:1,mt:1.5},children:[jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(Category,{sx:{color:"dark"===a.palette.mode?"white":"inherit"}}),label:(null==(n=te.category)?void 0:n.name)||"N/A",sx:{backgroundColor:a.palette.primary.main,color:a.palette.primary.contrastText,"& .MuiChip-label":{color:a.palette.primary.contrastText}},variant:"filled",size:"small"}),te.region&&jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(Public,{sx:{color:"dark"===a.palette.mode?"white":"inherit"}}),label:te.region,sx:{backgroundColor:a.palette.success.main,color:a.palette.success.contrastText,"& .MuiChip-label":{color:a.palette.success.contrastText}},variant:"filled",size:"small"}),jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(ConfirmationNumber,{sx:{color:"dark"===a.palette.mode?"white":"inherit"}}),label:`CH ${te.channelNumber}`,sx:{backgroundColor:a.palette.secondary.main,color:a.palette.secondary.contrastText,"& .MuiChip-label":{color:a.palette.secondary.contrastText}},variant:"filled",size:"small"}),jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(ViewIcon,{sx:{color:"dark"===a.palette.mode?"white":"inherit"}}),label:`${te.views||0} total views`,sx:{backgroundColor:a.palette.info.main,color:a.palette.info.contrastText,"& .MuiChip-label":{color:a.palette.info.contrastText}},variant:"filled",size:"small"})]})]}),jsxRuntimeExports.jsx(Grid,{item:!0,sx:{display:{xs:"none",md:"block"}},children:jsxRuntimeExports.jsx(FavouriteToggle,{channel:te,variant:"pill"})}),jsxRuntimeExports.jsx(Box,{sx:{display:{xs:"flex",md:"none"},position:"absolute",top:"50%",right:8,transform:"translateY(-50%)",zIndex:2},children:jsxRuntimeExports.jsx(FavouriteToggle,{channel:te,size:30})})]})})})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,lg:5,children:jsxRuntimeExports.jsx(RelatedChannelsCarousel,{channels:ne,onChannelClick:e=>{s(generateChannelUrl(e._id,e.name)),setTimeout(()=>{ee()},100)}})})]}),P&&jsxRuntimeExports.jsx(DesktopBannerAd,{})]}),P&&jsxRuntimeExports.jsx(PopUnderAdsterra,{}),jsxRuntimeExports.jsx(PurchasePackage,{open:k,onClose:()=>M(!1)})]})},Events=()=>{const[e,t]=reactExports.useState([]),[n,r]=reactExports.useState(!0),[i,s]=reactExports.useState(0);reactExports.useEffect(()=>{(async()=>{var e;try{r(!0);const n=await eventsAPI.getAll();console.log("Events API response:",{data:n.data,isArray:Array.isArray(n.data),type:typeof n.data,length:null==(e=n.data)?void 0:e.length}),t(Array.isArray(n.data)?n.data:[])}catch(n){console.error("Error fetching events:",n),t([])}finally{r(!1)}})()},[]);const a=new Date,o=new Date(a.getFullYear(),a.getMonth(),a.getDate()),l=Array.isArray(e)?e.filter(e=>new Date(e.startDate)>=o):[],c=Array.isArray(e)?e.filter(e=>new Date(e.startDate)<o):[],u=e=>{if(!e)return"";if(e.startsWith("http"))return e;return`https://ipapi.bdstream.site${e}`},d=(e,t)=>{const n=new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return t?`${n} at ${t}`:n},h=e=>{const t=new Date,n=new Date(e.startDate),r=new Date(e.endDate);return t>=n&&t<=r},p=e=>Array.isArray(e)&&0!==e.length?jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:e.map(e=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",display:"flex",flexDirection:"column","&:hover":{transform:"translateY(-4px)",transition:"transform 0.3s ease",boxShadow:"0 8px 25px rgba(0,0,0,0.15)"}},children:[e.imageUrl&&jsxRuntimeExports.jsx(CardMedia,{component:"img",height:"200",image:u(e.imageUrl),alt:e.title,sx:{objectFit:"cover"}}),jsxRuntimeExports.jsxs(CardContent,{sx:{flexGrow:1},children:[jsxRuntimeExports.jsx(Box,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:h(e)&&jsxRuntimeExports.jsx(Chip,{label:"LIVE",size:"small",color:"error",sx:{fontWeight:"bold"}})}),jsxRuntimeExports.jsx(Typography,{gutterBottom:!0,variant:"h6",component:"h3",sx:{fontWeight:"bold"},children:e.title}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",paragraph:!0,sx:{mb:2},children:e.description}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[jsxRuntimeExports.jsx(CalendarToday,{fontSize:"small",color:"action"}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:[d(e.startDate,e.startTime)," - ",d(e.endDate,e.endTime)]})]}),e.startTime&&e.endTime&&jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[jsxRuntimeExports.jsx(AccessTime,{fontSize:"small",color:"action"}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:[e.startTime," - ",e.endTime]})]}),e.linkedChannel&&jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[jsxRuntimeExports.jsx(PlayArrow,{fontSize:"small",color:"primary"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"primary",sx:{fontWeight:500},children:e.linkedChannel.name})]})]}),e.linkedChannel&&jsxRuntimeExports.jsx(Box,{sx:{p:2,pt:0},children:jsxRuntimeExports.jsx(Button$2,{fullWidth:!0,variant:"contained",component:Link,to:generateChannelUrl(e.linkedChannel._id,e.linkedChannel.name),startIcon:jsxRuntimeExports.jsx(PlayArrow,{}),sx:{backgroundColor:h(e)?"#ff4444":"#2196f3","&:hover":{backgroundColor:h(e)?"#d32f2f":"#1976d2"}},children:h(e)?"Watch Live":"Watch Channel"})})]})},e._id))}):jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",py:8},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No events found"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:0===i?"No upcoming events scheduled":"No past events found"})]});if(n)return jsxRuntimeExports.jsx(Container,{children:jsxRuntimeExports.jsxs(Box,{sx:{mb:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",gutterBottom:!0,children:"Events"}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:[...Array(6)].map((e,t)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",height:200}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"60%"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"40%"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"80%"})]})]})},t))})]})});if(!Array.isArray(e))return console.error("Events state validation failed:",{events:Array.isArray(e),type:typeof e,value:e}),t([]),jsxRuntimeExports.jsx(Container,{children:jsxRuntimeExports.jsxs(Box,{sx:{mb:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",gutterBottom:!0,children:"Events"}),jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"error",gutterBottom:!0,children:"Error loading events. Please refresh the page."})]})});const{settings:m}=useSettings(),f=generateEventsPageMetaTags(m);return jsxRuntimeExports.jsxs(Container,{children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:f.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:f.description}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:f.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:f.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:f.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:f.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:f.ogImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:f.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:f.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:f.twitterImage}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:f.ogUrl})]}),jsxRuntimeExports.jsxs(Box,{sx:{mb:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",gutterBottom:!0,children:"Events"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Stay updated with upcoming events and browse through past events"}),jsxRuntimeExports.jsx(Box,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:jsxRuntimeExports.jsxs(Tabs,{value:i,onChange:(e,t)=>{s(t)},children:[jsxRuntimeExports.jsx(Tab,{label:`Upcoming (${Array.isArray(l)?l.length:0})`,icon:jsxRuntimeExports.jsx(Event$2,{}),iconPosition:"start"}),jsxRuntimeExports.jsx(Tab,{label:`Past (${Array.isArray(c)?c.length:0})`,icon:jsxRuntimeExports.jsx(Event$2,{}),iconPosition:"start"})]})}),jsxRuntimeExports.jsx(Box,{sx:{mt:3},children:p(0===i?l:c)})]})]})};var Delete={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(Delete,"__esModule",{value:!0});var default_1=Delete.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;default_1=Delete.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");const Favorites=()=>{const{favorites:e,removeFavorite:t}=useFavorites();useTheme();const n=reactExports.useMemo(()=>[...e].sort((e,t)=>e.name.localeCompare(t.name)),[e]),r=e=>{if(!e)return"";if(e.startsWith("http"))return e;return`https://bdstream-backend.onrender.com/${e}`};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:"Favourite Channels"}),jsxRuntimeExports.jsx("meta",{name:"description",content:"Your favourite TV channels for quick access."})]}),jsxRuntimeExports.jsxs(Box,{sx:{mb:4},children:[jsxRuntimeExports.jsxs(Typography,{variant:"h4",fontWeight:800,sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(default_1$8,{sx:{color:"#ffb300"}})," Favourites"]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{mt:1,opacity:.7},children:"Channels you have starred will appear here."})]}),0===n.length&&jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",py:10},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"No favourites yet"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{mb:2},children:'Browse channels and click "Add Favourite" to save them here.'}),jsxRuntimeExports.jsx(Button$2,{component:Link,to:"/channels",variant:"contained",children:"Browse Channels"})]}),n.length>0&&jsxRuntimeExports.jsx(Box,{sx:{display:"grid",gap:{xs:2,sm:3},gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(auto-fill, minmax(170px, 1fr))"},alignItems:"stretch"},children:n.map(e=>jsxRuntimeExports.jsxs(Card,{sx:{borderRadius:3,overflow:"hidden",position:"relative",background:"var(--glass-bg)",backdropFilter:"blur(12px)",border:"1px solid var(--glass-border)",height:"100%",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs(CardActionArea,{component:Link,to:generateChannelUrl(e._id,e.name),sx:{flex:1},children:[jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",height:120,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.05) 100%)"},children:[e.logoUrl&&jsxRuntimeExports.jsx(CardMedia,{component:"img",image:r(e.logoUrl),alt:e.name,sx:{objectFit:"contain",maxHeight:"80%",maxWidth:"80%"},onError:e=>{e.currentTarget.style.display="none"}}),jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",top:8,left:8,display:"flex",gap:.5},children:jsxRuntimeExports.jsx(Chip,{icon:jsxRuntimeExports.jsx(default_1$8,{sx:{color:"#ffb300 !important"}}),label:"Fav",size:"small",sx:{fontSize:"0.65rem",height:20}})})]}),jsxRuntimeExports.jsxs(CardContent,{sx:{p:1.5},children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",fontWeight:700,sx:{mb:.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.name}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",sx:{opacity:.6,display:"block"},children:["CH ",e.channelNumber||"-"]})]})]}),jsxRuntimeExports.jsx(Box,{sx:{px:1.5,pb:1.5},children:jsxRuntimeExports.jsx(Button$2,{onClick:()=>t(e._id),size:"small",variant:"outlined",color:"error",startIcon:jsxRuntimeExports.jsx(default_1,{fontSize:"small"}),sx:{textTransform:"none",fontSize:"0.65rem",py:.5},children:"Remove"})})]},e._id))})]})},IMGBB_CONFIG={API_KEY:"4903f2567bdeba57b300b332e3c7ce51",BASE_URL:"https://api.imgbb.com/1/upload",DEFAULT_OPTIONS:{maxSize:5242880,allowedTypes:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],compressionQuality:.8,maxWidth:1920,maxHeight:1080},LOGO_OPTIONS:{maxSize:1048576,maxWidth:400,maxHeight:400,compressionQuality:.9},EVENT_OPTIONS:{maxSize:2097152,maxWidth:800,maxHeight:600,compressionQuality:.8}},getImgBBUploadUrl=()=>`${IMGBB_CONFIG.BASE_URL}?key=${IMGBB_CONFIG.API_KEY}`,validateImgBBConfig=()=>(32!==IMGBB_CONFIG.API_KEY.length&&console.warn("ImgBB API key format may be incorrect (expected 32 characters)"),!0),getUploadOptions=(e="default")=>{let t;switch(e){case"logo":t=IMGBB_CONFIG.LOGO_OPTIONS;break;case"event":t=IMGBB_CONFIG.EVENT_OPTIONS;break;default:t={}}return{...IMGBB_CONFIG.DEFAULT_OPTIONS,...t}},uploadImageToImgBB=async(e,t={})=>{validateImgBBConfig();const n=getUploadOptions(t.uploadType),r={...n,...t},{maxSize:i=n.maxSize,allowedTypes:s=n.allowedTypes,onProgress:a=null}=r,o=Array.isArray(s)&&s.length>0?s:n.allowedTypes;if(!e)throw new Error("No file provided");if(!e.type)throw new Error("Unable to determine file type");if(Array.isArray(o)&&0!==o.length){if(!o.includes(e.type))throw new Error(`Invalid file type. Allowed types: ${o.join(", ")}`)}else console.warn("ImgBB upload allowedTypes configuration is missing. Falling back to generic image check.");if(e.size>i){const e=Math.round(i/1048576);throw new Error(`File size too large. Maximum size: ${e}MB`)}const l=new FormData;l.append("image",e);try{const e=new XMLHttpRequest;return new Promise((t,n)=>{e.upload.addEventListener("progress",e=>{if(e.lengthComputable&&a){const t=e.loaded/e.total*100;a(t)}}),e.addEventListener("load",()=>{var r,i,s;if(200===e.status)try{const a=JSON.parse(e.responseText);console.log("ImgBB API Response:",a),a.success&&a.data?t({success:!0,data:{id:a.data.id,url:a.data.url,displayUrl:a.data.display_url,thumbUrl:null==(r=a.data.thumb)?void 0:r.url,mediumUrl:null==(i=a.data.medium)?void 0:i.url,deleteUrl:a.data.delete_url,size:a.data.size,width:a.data.width,height:a.data.height,filename:a.data.title,expiration:a.data.expiration||null}}):(console.error("ImgBB Upload Error:",a.error),n(new Error((null==(s=a.error)?void 0:s.message)||"Upload failed - ImgBB returned unsuccessful response")))}catch(a){console.error("ImgBB Response Parse Error:",a,"Raw response:",e.responseText),n(new Error("Invalid response from ImgBB"))}else console.error("ImgBB HTTP Error:",e.status,e.statusText,"Response:",e.responseText),n(new Error(`HTTP Error: ${e.status} - ${e.statusText}`))}),e.addEventListener("error",()=>{n(new Error("Network error during upload"))}),e.addEventListener("timeout",()=>{n(new Error("Upload timeout"))}),e.open("POST",getImgBBUploadUrl()),e.timeout=3e4,e.send(l)})}catch(c){throw new Error(`Upload failed: ${c.message}`)}},AdminChannels=()=>{var e;const[t,n]=reactExports.useState([]),[r,i]=reactExports.useState([]),[s,a]=reactExports.useState([]),[o,l]=reactExports.useState(!0),[c,u]=reactExports.useState(!1),[d,h]=reactExports.useState(null),[p,m]=reactExports.useState({channelNumber:"",name:"",region:"",category:"",streamUrl:"",logoUrl:""}),[f,g]=reactExports.useState(""),[x,v]=reactExports.useState(""),[y,_]=reactExports.useState(!1),[E,b]=reactExports.useState(null),[C,S]=reactExports.useState(""),[T,R]=reactExports.useState(""),[j,w]=reactExports.useState(0),[A,I]=reactExports.useState(!1),[k,M]=reactExports.useState(""),[P,L]=reactExports.useState(""),[D,O]=reactExports.useState(!1),[$,N]=reactExports.useState(null),[F,B]=reactExports.useState(null),[U,G]=reactExports.useState([]),[V,H]=reactExports.useState(!1),[W,q]=reactExports.useState({region:"__NO_CHANGE__",category:"__NO_CHANGE__"}),[z,K]=reactExports.useState(!1),[Y,Q]=reactExports.useState([]),[X,Z]=reactExports.useState([]),[J,ee]=reactExports.useState(""),[te,ne]=reactExports.useState(""),[re,ie]=reactExports.useState(""),[se,ae]=reactExports.useState(!1),[oe,le]=reactExports.useState("channelNumber"),[ce,ue]=reactExports.useState("asc"),de=e=>{if(!e)return"";if(e.startsWith("http"))return e;return`${"https://api.bdstream.site".replace(/\/$/,"")}/${e.replace(/^\//,"")}`},he=async()=>{try{const e=(await channelsAPI.getAll()).data||[];if(0===e.length)return;const t=e.map(e=>({...e,channelNumber:parseInt(e.channelNumber)||0})).sort((e,t)=>e.channelNumber-t.channelNumber);let n=!1;for(let r=0;r<t.length;r++)if(t[r].channelNumber!==r+1){n=!0;break}if(n){console.log("Rearranging channel numbers...");const e=t.map((e,t)=>{const n=(t+1).toString();return e.channelNumber.toString()!==n?channelsAPI.update(e._id,{channelNumber:n}):Promise.resolve()});await Promise.all(e),console.log("Channel numbers rearranged successfully")}}catch(e){console.error("Error rearranging channel numbers:",e)}};reactExports.useEffect(()=>{pe()},[]);const pe=async()=>{var e,t;try{const[s,o]=await Promise.all([channelsAPI.getAll(),categoriesAPI.getAll()]);console.log("AdminChannels API responses:",{channels:{data:s.data,isArray:Array.isArray(s.data),type:typeof s.data,length:null==(e=s.data)?void 0:e.length},categories:{data:o.data,isArray:Array.isArray(o.data),type:typeof o.data,length:null==(t=o.data)?void 0:t.length}}),n(Array.isArray(s.data)?s.data:[]),i(Array.isArray(o.data)?o.data:[]);try{const e=await regionsAPI.getAll();a(Array.isArray(e.data)?e.data:[])}catch(r){console.log("Regions API not available, using empty array:",r.message),a([])}}catch(s){console.error("Error fetching data:",s),g("Failed to fetch data"),n([]),i([]),a([])}finally{l(!1)}},me=async(e=null)=>{var n;if(e){h(e);let t=e.streamUrl;try{const n=await channelsAPI.getAdminById(e._id);n.data&&n.data.originalStreamUrl&&(t=n.data.originalStreamUrl)}catch(r){console.log("Could not fetch decrypted URL from admin endpoint, trying play endpoint:",r.message);try{const n=await channelsAPI.play(e._id);n.data&&n.data.channel&&n.data.channel.streamUrl&&(t=n.data.channel.streamUrl)}catch(i){console.log("Could not fetch decrypted URL, using encrypted URL:",i.message)}}m({channelNumber:e.channelNumber,name:e.name,region:e.region,category:(null==(n=e.category)?void 0:n._id)||"",streamUrl:t,logoUrl:e.logoUrl})}else{h(null);const e=(()=>{if(!Array.isArray(t)||0===t.length)return 1;const e=t.map(e=>parseInt(e.channelNumber)).filter(e=>!isNaN(e)&&e>0);return 0===e.length?1:Math.max(...e)+1})();m({channelNumber:e.toString(),name:"",region:"",category:"",streamUrl:"",logoUrl:""})}u(!0)},fe=()=>{u(!1),h(null),ae(!1),m({channelNumber:"",name:"",region:"",category:"",streamUrl:"",logoUrl:""}),g("")},ge=e=>{m({...p,[e.target.name]:e.target.value})},xe=async e=>{var t,n;e.preventDefault(),g(""),v("");try{d?(await channelsAPI.update(d._id,p),v("Channel updated successfully")):(await channelsAPI.create(p),v("Channel created successfully")),pe(),fe()}catch(r){g((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||"Operation failed")}},ve=()=>{A?window.confirm("Import is in progress. Are you sure you want to cancel?")&&(I(!1),w(0),_(!1)):_(!1)},ye=()=>{H(!1)},_e=e=>{q({...W,[e.target.name]:e.target.value})},Ee=()=>{K(!1),Q([]),Z([])},be=async e=>{var t,n;let r;for(let i=0;i<2;i++){try{const n=await channelsAPI.getAdminById(e._id);if(null==(t=null==n?void 0:n.data)?void 0:t.originalStreamUrl)return n.data.originalStreamUrl}catch(e2){r=e2}try{const t=await channelsAPI.play(e._id);if(null==(n=null==t?void 0:t.data)?void 0:n.streamUrl)return t.data.streamUrl}catch(e2){r=e2}await new Promise(e=>setTimeout(e,150))}return r&&console.warn(`Failed to decrypt URL for ${e.name}:`,(null==r?void 0:r.message)||r),e.streamUrl},Ce=async(e,t,n=8)=>{const r=new Array(e.length);let i=0;const s=new Array(Math.min(n,e.length)).fill(0).map(async()=>{for(;;){const n=i++;if(n>=e.length)break;r[n]=await t(e[n],n)}});return await Promise.all(s),r},Se=e=>{let t="#EXTM3U\n\n",n=0,r=0,i=0;return e.forEach(e=>{var s;const a=e.logoUrl||"",o=(null==(s=e.category)?void 0:s.name)||"Uncategorized",l=e.region||"Unknown",c=e.name||"Unknown Channel",u=e.streamUrl||"";if(!u||""===u.trim())return console.warn(`Channel ${c} has no stream URL`),void i++;/^https?:\/\//i.test(u)?(r++,console.log(`Exporting ${c} with decrypted URL: ${u.substring(0,50)}...`),t+=`#EXTINF:-1 tvg-logo="${a}" group-title="${o}" region="${l}", ${c}\n`,t+=`${u}\n\n`):(console.warn(`Channel ${c} still has non-HTTP URL (likely encrypted) - decryption failed`),n++,t+=`#EXTINF:-1 tvg-logo="${a}" group-title="${o}" region="${l}", ${c} [ENCRYPTED]\n`,t+=`# ${u} - Could not decrypt\n\n`)}),console.log(`M3U Export Summary: ${r} decrypted URLs, ${n} encrypted URLs, ${i} empty URLs`),t},Te=(e,t)=>{const n=new Blob([e],{type:"application/x-mpegurl"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)};if(reactExports.useEffect(()=>{if(A&&$&&(null==E?void 0:E.channelCount)>50){const e=setInterval(()=>{const e=((e,t)=>{if(e<=0||!t)return null;const n=Date.now()-t,r=n/e*100-n;if(r<=0)return"Almost done";const i=Math.floor(r/6e4),s=Math.floor(r%6e4/1e3);return i>0?`${i}m ${s}s`:`${s}s`})(j,$,E.channelCount);B(e)},5e3);return()=>clearInterval(e)}},[A,$,j,null==E?void 0:E.channelCount]),o)return jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:[...Array(6)].map((e,t)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",height:140}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"60%"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"40%"})]})]})},t))});if(!Array.isArray(t)||!Array.isArray(r)||!Array.isArray(s))return console.error("AdminChannels state validation failed:",{channels:Array.isArray(t),categories:Array.isArray(r),backendRegions:Array.isArray(s)}),Array.isArray(t)||n([]),Array.isArray(r)||i([]),Array.isArray(s)||a([]),jsxRuntimeExports.jsx(Box,{sx:{textAlign:"center",py:8},children:jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"error",gutterBottom:!0,children:"Error loading data. Please refresh the page."})});const Re=Array.isArray(t)?Array.from(new Set(t.map(e=>e.region).filter(e=>e))).sort():[],je=Array.isArray(t)?t.filter(e=>{var t;const n=!J||(e.name||"").toLowerCase().includes(J.toLowerCase()),r=!te||(null==(t=e.category)?void 0:t._id)===te,i=!re||e.region===re;return n&&r&&i}).sort((e,t)=>{var n,r;let i,s;switch(oe){case"channelNumber":default:i=parseInt(e.channelNumber)||0,s=parseInt(t.channelNumber)||0;break;case"name":i=(e.name||"").toLowerCase(),s=(t.name||"").toLowerCase();break;case"category":i=((null==(n=e.category)?void 0:n.name)||"").toLowerCase(),s=((null==(r=t.category)?void 0:r.name)||"").toLowerCase();break;case"region":i=(e.region||"").toLowerCase(),s=(t.region||"").toLowerCase()}return"asc"===ce?i>s?1:-1:i<s?1:-1}):[];return jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Box,{sx:{mb:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold",color:"primary.main"},children:"Channel Management"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Manage your IPTV channels, import/export playlists, and organize content"})]}),jsxRuntimeExports.jsxs(Box,{sx:{mb:3},children:[jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,alignItems:"center",children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:6,children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[jsxRuntimeExports.jsx(Button$2,{variant:"contained",startIcon:jsxRuntimeExports.jsx(Add,{}),onClick:()=>me(),sx:{bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:"Add Channel"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",startIcon:jsxRuntimeExports.jsx(UploadFile,{}),onClick:()=>{_(!0),S(""),R(""),b(null),w(0),I(!1),M(""),L(""),O(!1),N(null),B(null)},sx:{bgcolor:"success.main","&:hover":{bgcolor:"success.dark"}},children:"Bulk Import"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",color:"warning",onClick:()=>{const e=(()=>{if(!Array.isArray(t)||0===t.length)return[];const e={};return t.forEach(t=>{var n;const r=`${t.name}_${(null==(n=t.category)?void 0:n._id)||"no-category"}`;e[r]||(e[r]=[]),e[r].push(t)}),Object.values(e).filter(e=>e.length>1).map(e=>{var t;return{channels:e.sort((e,t)=>parseInt(e.channelNumber)-parseInt(t.channelNumber)),name:e[0].name,category:(null==(t=e[0].category)?void 0:t.name)||"No Category",count:e.length}})})();Q(e),Z([]),K(!0)},sx:{borderColor:"warning.main",color:"warning.main"},children:"Manage Duplicates"})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:6,children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:1,flexWrap:"wrap",justifyContent:{xs:"flex-start",md:"flex-end"}},children:[jsxRuntimeExports.jsx(Button$2,{variant:"text",onClick:()=>{Array.isArray(je)&&(U.length===je.length&&je.length>0?G([]):G(je.map(e=>e._id)))},sx:{color:"primary.main",fontWeight:"bold"},children:Array.isArray(je)&&U.length===je.length&&je.length>0?"Clear All":"Select All"}),jsxRuntimeExports.jsxs(Button$2,{variant:"outlined",onClick:async()=>{if(0!==U.length)try{v("Exporting channels with decrypted URLs...");const e=t.filter(e=>U.includes(e._id)),n=await Ce(e,async e=>{const t=await be(e);return{...e,streamUrl:t}},8),r=Se(n);Te(r,`selected-channels-${U.length}.m3u`),v(`Successfully exported ${U.length} channels with decrypted URLs`)}catch(e){console.error("Export error:",e),g("Failed to export channels: "+e.message)}else g("Please select channels to export")},disabled:0===U.length,sx:{borderColor:"info.main",color:"info.main"},children:["Export Selected (",U.length,")"]}),jsxRuntimeExports.jsxs(Button$2,{variant:"outlined",onClick:async()=>{try{v("Exporting all channels with decrypted URLs...");const e=await Ce(t,async e=>{const t=await be(e);return{...e,streamUrl:t}},8),n=Se(e);Te(n,`all-channels-${t.length}.m3u`),v(`Successfully exported all ${t.length} channels with decrypted URLs`)}catch(e){console.error("Export error:",e),g("Failed to export channels: "+e.message)}},sx:{borderColor:"info.main",color:"info.main"},children:["Export All (",t.length,")"]})]})})]}),U.length>0&&jsxRuntimeExports.jsxs(Box,{sx:{mt:2,p:2,bgcolor:"primary.50",borderRadius:2,border:"1px solid",borderColor:"primary.200"},children:[jsxRuntimeExports.jsxs(Typography,{variant:"subtitle2",color:"primary.main",sx:{mb:1,fontWeight:"bold"},children:["Bulk Actions for ",U.length," selected channel(s):"]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[jsxRuntimeExports.jsx(Button$2,{variant:"outlined",onClick:()=>{q({region:"__NO_CHANGE__",category:"__NO_CHANGE__"}),H(!0)},sx:{borderColor:"secondary.main",color:"secondary.main"},children:"Bulk Edit"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",color:"error",onClick:async()=>{var e,t;if(0!==U.length&&window.confirm(`Delete ${U.length} selected channel(s)?`))try{await channelsAPI.bulkDelete(U),v("Selected channels deleted successfully"),G([]),await he(),pe()}catch(n){g((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Bulk delete failed")}},sx:{borderColor:"error.main",color:"error.main"},children:"Bulk Delete"})]})]})]}),jsxRuntimeExports.jsx(Box,{sx:{mb:3},children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,alignItems:"center",children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:8,children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[jsxRuntimeExports.jsx(TextField,{label:"Search by name",value:J,onChange:e=>ee(e.target.value),size:"small",sx:{minWidth:200},placeholder:"Search channels..."}),jsxRuntimeExports.jsxs(FormControl,{sx:{minWidth:150},size:"small",children:[jsxRuntimeExports.jsx(InputLabel,{children:"Category"}),jsxRuntimeExports.jsxs(Select$1,{label:"Category",value:te,onChange:e=>ne(e.target.value),children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"",children:"All Categories"}),Array.isArray(r)&&r.map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e._id,children:e.name},e._id))]})]}),jsxRuntimeExports.jsxs(FormControl,{sx:{minWidth:140},size:"small",children:[jsxRuntimeExports.jsx(InputLabel,{children:"Region"}),jsxRuntimeExports.jsxs(Select$1,{label:"Region",value:re,onChange:e=>ie(e.target.value),children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"",children:"All Regions"}),Array.isArray(s)&&Array.isArray(Re)&&[...new Set([...s,...Re])].map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e,children:e},e))]})]}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"small",onClick:()=>{ee(""),ne(""),ie("")},sx:{borderColor:"grey.400",color:"grey.600"},children:"Clear Filters"})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:4,children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:1,justifyContent:{xs:"flex-start",md:"flex-end"}},children:[jsxRuntimeExports.jsxs(FormControl,{sx:{minWidth:140},size:"small",children:[jsxRuntimeExports.jsx(InputLabel,{children:"Sort By"}),jsxRuntimeExports.jsxs(Select$1,{label:"Sort By",value:oe,onChange:e=>le(e.target.value),children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"channelNumber",children:"Channel Number"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"name",children:"Name"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"category",children:"Category"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"region",children:"Region"})]})]}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"small",onClick:()=>ue("asc"===ce?"desc":"asc"),sx:{minWidth:50,borderColor:"primary.main",color:"primary.main"},children:"asc"===ce?"":""})]})})]})}),jsxRuntimeExports.jsxs(Box,{sx:{mb:3},children:[(J||te||re)&&jsxRuntimeExports.jsxs(Box,{sx:{mb:2,p:2,bgcolor:"info.50",borderRadius:2,border:"1px solid",borderColor:"info.200"},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"info.700",sx:{fontWeight:"bold",mb:.5},children:" Active Filters:"}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[J&&jsxRuntimeExports.jsx(Chip,{label:`Name: ${J}`,size:"small",color:"info",variant:"outlined"}),te&&jsxRuntimeExports.jsx(Chip,{label:`Category: ${(null==(e=r.find(e=>e._id===te))?void 0:e.name)||te}`,size:"small",color:"info",variant:"outlined"}),re&&jsxRuntimeExports.jsx(Chip,{label:`Region: ${re}`,size:"small",color:"info",variant:"outlined"})]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"info.600",sx:{mt:1,display:"block"},children:[jsxRuntimeExports.jsx("strong",{children:"Tip:"}),' The "Select All" button will only select channels that match your current filters.']})]}),jsxRuntimeExports.jsxs(Box,{sx:{p:2,bgcolor:"success.50",borderRadius:2,border:"1px solid",borderColor:"success.200"},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"success.700",sx:{fontWeight:"bold",mb:.5},children:" Current Sorting:"}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(Chip,{label:`${"channelNumber"===oe?"Channel Number":oe.charAt(0).toUpperCase()+oe.slice(1)}`,size:"small",color:"success",variant:"outlined"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"success.600",children:"asc"===ce?" Ascending":" Descending"})]})]})]}),f&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},onClose:()=>g(""),children:f}),x&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},onClose:()=>v(""),children:x}),T&&jsxRuntimeExports.jsxs(Alert,{severity:"success",sx:{mt:2},onClose:()=>R(""),children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",component:"div",children:jsxRuntimeExports.jsx("strong",{children:"Import Successful!"})}),jsxRuntimeExports.jsx(Typography,{variant:"body2",component:"div",children:T}),E&&E.channelCount&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",component:"div",sx:{mt:1},children:[jsxRuntimeExports.jsx("strong",{children:"File processed:"})," ",E.name," (",E.channelCount," channels detected)"]}),jsxRuntimeExports.jsx(Typography,{variant:"caption",component:"div",sx:{mt:1,fontStyle:"italic"},children:"The channel list has been updated. You can now view and manage the imported channels."})]}),C&&jsxRuntimeExports.jsxs(Alert,{severity:"error",sx:{mt:2},onClose:()=>S(""),children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",component:"div",children:jsxRuntimeExports.jsx("strong",{children:"Import Failed:"})}),jsxRuntimeExports.jsx(Typography,{variant:"body2",component:"div",children:C}),P&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",component:"div",sx:{mt:1},children:[jsxRuntimeExports.jsx("strong",{children:"Details:"})," ",P]}),jsxRuntimeExports.jsx(Typography,{variant:"caption",component:"div",sx:{mt:1,fontStyle:"italic"},children:"Please check your file format and try again. Make sure the M3U file contains valid channel entries."}),E&&E.channelCount>100&&jsxRuntimeExports.jsxs(Box,{sx:{mt:1,p:1,bgcolor:"error.50",borderRadius:1},children:[jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"error.700",sx:{fontWeight:"bold"},children:["Large File Detected (",E.channelCount," channels):"]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",component:"div",color:"error.600",sx:{mt:.5},children:[" Consider splitting your file into smaller chunks (50-100 channels each)",jsxRuntimeExports.jsx("br",{})," Large imports may take several minutes to complete",jsxRuntimeExports.jsx("br",{})," Ensure stable internet connection during import",jsxRuntimeExports.jsx("br",{})," Contact support if timeout issues persist"]})]}),jsxRuntimeExports.jsxs(Box,{sx:{mt:2,display:"flex",gap:1},children:[jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"small",onClick:()=>{S(""),L(""),M(""),w(0)},children:"Clear Error"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"small",onClick:()=>{b(null),S(""),L(""),M(""),w(0),I(!1)},children:"Reselect File"})]})]}),jsxRuntimeExports.jsxs(Box,{sx:{mb:3},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[jsxRuntimeExports.jsxs(Typography,{variant:"h6",color:"text.primary",sx:{fontWeight:"bold"},children:["Channels (",je.length,")"]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Showing ",je.length," of ",t.length," total channels"]})]}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:Array.isArray(je)&&je.map(e=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,lg:3,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:4,borderColor:"primary.main"},border:U.includes(e._id)?"2px solid":"1px solid",borderColor:U.includes(e._id)?"primary.main":"divider"},children:[e.logoUrl&&jsxRuntimeExports.jsx(CardMedia,{component:"img",height:"160",image:de(e.logoUrl),alt:e.name,sx:{objectFit:"contain",bgcolor:"background.default",borderBottom:"1px solid",borderColor:"divider"},onError:t=>{console.error("Failed to load channel logo in admin:",e.name,"URL:",de(e.logoUrl)),t.target.style.display="none"}}),jsxRuntimeExports.jsxs(CardContent,{sx:{flexGrow:1,pb:1},children:[jsxRuntimeExports.jsx(Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:jsxRuntimeExports.jsx(Typography,{variant:"h6",sx:{fontWeight:"bold",fontSize:"1rem"},children:e.name})}),jsxRuntimeExports.jsx(Box,{sx:{display:"flex",alignItems:"center",mb:1},children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:["#",e.channelNumber]})}),e.region&&jsxRuntimeExports.jsx(Box,{sx:{display:"flex",alignItems:"center",mb:.5},children:jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"text.secondary",children:[" ",e.region]})}),e.category&&jsxRuntimeExports.jsx(Box,{sx:{display:"flex",alignItems:"center"},children:jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"text.secondary",children:[" ",e.category.name]})})]}),jsxRuntimeExports.jsx(CardActions,{sx:{pt:0,pb:1,px:2},children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",width:"100%",gap:1},children:[jsxRuntimeExports.jsx(Checkbox,{checked:U.includes(e._id),onChange:()=>{return t=e._id,void G(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},size:"small"}),jsxRuntimeExports.jsx(Box,{sx:{flexGrow:1}}),jsxRuntimeExports.jsx(Button$2,{size:"small",startIcon:jsxRuntimeExports.jsx(Edit,{}),onClick:()=>me(e),variant:"outlined",sx:{borderColor:"secondary.main",color:"secondary.main","&:hover":{bgcolor:"secondary.main",color:"white"}},children:"Edit"}),jsxRuntimeExports.jsx(Button$2,{size:"small",color:"error",startIcon:jsxRuntimeExports.jsx(DeleteIcon,{}),onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this channel?"))try{await channelsAPI.delete(e),v("Channel deleted successfully"),await he(),pe()}catch(t){g("Failed to delete channel")}})(e._id),variant:"outlined",sx:{borderColor:"error.main",color:"error.main","&:hover":{bgcolor:"error.main",color:"white"}},children:"Delete"})]})})]})},e._id))}),0===je.length&&jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",py:8},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No channels found"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:J||te||re?"Try adjusting your filters or search terms.":'No channels have been added yet. Click "Add Channel" to get started.'})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:c,onClose:fe,maxWidth:"sm",fullWidth:!0,children:[jsxRuntimeExports.jsx(DialogTitle,{children:d?"Edit Channel":"Add New Channel"}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsx(Box,{component:"form",onSubmit:xe,sx:{mt:2},children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Channel Number",name:"channelNumber",type:"number",value:p.channelNumber,onChange:ge,required:!0,helperText:d?"":"Auto-filled with next available number"})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,sm:6,children:[se?jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Region",name:"region",value:p.region,onChange:ge,helperText:"Enter custom region name"}):jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Region"}),jsxRuntimeExports.jsxs(Select$1,{name:"region",value:p.region,label:"Region",onChange:e=>{"__MANUAL__"===e.target.value?(ae(!0),m({...p,region:""})):m({...p,region:e.target.value})},children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"",children:"No Region"}),[...new Set([...s,...Re])].map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e,children:e},e)),jsxRuntimeExports.jsx(MenuItem$1,{value:"__MANUAL__",sx:{fontStyle:"italic",color:"text.secondary"},children:"+ Add Custom Region"})]})]}),se&&jsxRuntimeExports.jsx(Button$2,{size:"small",variant:"text",onClick:()=>{ae(!1),m({...p,region:""})},sx:{mt:.5,fontSize:"0.75rem"},children:"Use Existing Regions"})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Channel Name",name:"name",value:p.name,onChange:ge,required:!0})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Category"}),jsxRuntimeExports.jsxs(Select$1,{name:"category",value:p.category,label:"Category",onChange:ge,children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"",children:"No Category"}),r.map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e._id,children:e.name},e._id))]})]})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Stream URL",name:"streamUrl",value:p.streamUrl,onChange:ge,required:!0,placeholder:"Enter stream URL",helperText:d?"Decrypted URL from database":"This will be encrypted automatically for security",sx:{"& .MuiInputBase-input":{fontFamily:"monospace",fontSize:"0.875rem"}}}),d&&p.streamUrl&&p.streamUrl.startsWith("encrypted:")&&jsxRuntimeExports.jsxs(Box,{sx:{mt:.5},children:[jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"warning.main",sx:{display:"block",mb:1},children:" Could not decrypt URL. Enter a new URL to update it."}),jsxRuntimeExports.jsx(Button$2,{size:"small",variant:"outlined",color:"secondary",onClick:()=>m({...p,streamUrl:""}),sx:{fontSize:"0.75rem"},children:"Clear URL Field"})]})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Logo URL",name:"logoUrl",value:p.logoUrl,onChange:ge})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsxs(Button$2,{variant:"outlined",component:"label",fullWidth:!0,children:["Upload Logo",jsxRuntimeExports.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.type.startsWith("image/"))try{l(!0);const e=await uploadImageToImgBB(t,{uploadType:"logo"});e.success&&(m({...p,logoUrl:e.data.url}),console.log("Channel logo uploaded to ImgBB successfully"))}catch(n){console.error("Error uploading channel logo:",n),g(`Logo upload failed: ${n.message}`)}finally{l(!1)}else try{const e=await uploadAPI.uploadFile(t);console.log("M3U file uploaded:",e)}catch(n){g("Failed to upload file")}}})]})})]})})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:fe,children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{onClick:xe,variant:"contained",children:d?"Update":"Create"})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:y,onClose:ve,maxWidth:"sm",fullWidth:!0,disableEscapeKeyDown:A,children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Bulk Import Channels (M3U)"}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Upload an M3U file to import multiple channels at once."}),jsxRuntimeExports.jsxs(Box,{sx:{mb:2,p:2,bgcolor:"info.50",borderRadius:1,border:"1px solid",borderColor:"info.200"},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"info.700",sx:{mb:1},children:jsxRuntimeExports.jsx("strong",{children:"Expected M3U Format:"})}),jsxRuntimeExports.jsx(Box,{sx:{bgcolor:"grey.100",p:2,borderRadius:1,fontFamily:"monospace",fontSize:"0.75rem",lineHeight:1.4,overflowX:"auto",border:"1px solid",borderColor:"grey.300"},children:jsxRuntimeExports.jsx(Typography,{variant:"caption",component:"div",sx:{color:"grey.700",whiteSpace:"pre-line"},children:'#EXTM3U\n\n#EXTINF:-1 tvg-logo="https://s3.aynaott.com/storage/28931315743beff50fc2c1312b1f8261" group-title="Entertainment" region="Bangladeshi", Channel I\nhttps://tvsen6.aynaott.com/channeli/index.m3u8\n\n#EXTINF:-1 tvg-logo="https://s3.aynaott.com/storage/73c39182782a201338070c2f4429e449" group-title="Entertainment" region="Bangladeshi", NTV\nhttps://tvsen5.aynaott.com/xV4jEKf3D9zc/index.fmp4.m3u8'})}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"info.600",sx:{mt:1,display:"block"},children:[jsxRuntimeExports.jsx("strong",{children:"Format includes:"})," Channel name, logo URL, category (group-title), region, and stream URL"]}),jsxRuntimeExports.jsxs(Box,{sx:{mt:1,p:1,bgcolor:"info.25",borderRadius:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"info.700",component:"div",sx:{mb:.5},children:jsxRuntimeExports.jsx("strong",{children:"Attribute Details:"})}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"info.600",component:"div",children:[" ",jsxRuntimeExports.jsx("strong",{children:"tvg-logo:"})," Channel logo image URL"]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"info.600",component:"div",children:[" ",jsxRuntimeExports.jsx("strong",{children:"group-title:"})," Channel category (e.g., Entertainment, News, Sports)"]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"info.600",component:"div",children:[" ",jsxRuntimeExports.jsx("strong",{children:"region:"})," Channel region (e.g., Bangladeshi, International)"]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"info.600",component:"div",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Stream URL:"})," Direct link to the channel stream"]})]}),jsxRuntimeExports.jsx(Box,{sx:{mt:1,p:1,bgcolor:"warning.25",borderRadius:1,border:"1px solid",borderColor:"warning.200"},children:jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"warning.700",component:"div",children:[jsxRuntimeExports.jsx("strong",{children:"Validation Note:"})," Files are validated for proper M3U format. If the header is missing but the file contains valid channel entries and stream URLs, it will still be accepted."]})}),jsxRuntimeExports.jsxs(Box,{sx:{mt:1,p:1,bgcolor:"warning.25",borderRadius:1,border:"1px solid",borderColor:"warning.200"},children:[jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"warning.700",component:"div",children:[jsxRuntimeExports.jsx("strong",{children:"Processing Time:"})," Large files with many channels (50+ channels) may take several minutes to process. Please be patient and do not close the dialog during import."]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"warning.600",component:"div",sx:{mt:.5},children:[jsxRuntimeExports.jsx("strong",{children:"Timeout:"})," Bulk imports have a 10-minute timeout to handle large files."]})]}),jsxRuntimeExports.jsx(Box,{sx:{mt:1,p:1,bgcolor:"success.25",borderRadius:1,border:"1px solid",borderColor:"success.200"},children:jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"success.700",component:"div",children:[jsxRuntimeExports.jsx("strong",{children:"Duplicate Prevention:"})," Channels with the same name and category will be updated instead of creating duplicates. You can control this setting in the Settings tab."]})}),jsxRuntimeExports.jsx(Box,{sx:{mt:1,display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"small",onClick:()=>{const e=new Blob(['#EXTM3U\n\n#EXTINF:-1 tvg-logo="https://s3.aynaott.com/storage/28931315743beff50fc2c1312b1f8261" group-title="Entertainment" region="Bangladeshi", Channel I\nhttps://tvsen6.aynaott.com/channeli/index.m3u8\n\n#EXTINF:-1 tvg-logo="https://s3.aynaott.com/storage/73c39182782a201338070c2f4429e449" group-title="Entertainment" region="Bangladeshi", NTV\nhttps://tvsen5.aynaott.com/xV4jEKf3D9zc/index.fmp4.m3u8'],{type:"application/x-mpegurl"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="sample-channels.m3u",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)},sx:{fontSize:"0.75rem"},children:" Download Sample M3U File"})})]}),jsxRuntimeExports.jsxs(Button$2,{variant:"outlined",component:"label",fullWidth:!0,startIcon:jsxRuntimeExports.jsx(UploadFile,{}),disabled:A,children:[E?E.name:"Select M3U File",jsxRuntimeExports.jsx("input",{type:"file",hidden:!0,accept:".m3u,.m3u8",onChange:e=>{const t=e.target.files[0];if(console.log("File object received:",t),console.log("File name:",null==t?void 0:t.name),console.log("File size:",null==t?void 0:t.size),console.log("File type:",null==t?void 0:t.type),console.log("File properties:",Object.keys(t||{})),console.log("Is File object:",t instanceof File),console.log("Is Blob object:",t instanceof Blob),!(t&&t instanceof File&&t instanceof Blob))return console.error("Invalid file object received:",t),void S("Invalid file selected. Please choose a valid file.");const n={name:(null==t?void 0:t.name)||"Unknown",size:(null==t?void 0:t.size)||0,type:(null==t?void 0:t.type)||"Unknown",lastModified:(null==t?void 0:t.lastModified)||Date.now()};if(console.log("Stored file info:",n),b(e=>({...e,...n,fileName:n.name,fileType:n.type,fileSize:n.size,originalFile:t})),console.log("Selected file:",t),t){const e=new FileReader;e.onload=e=>{var r,i;const s=e.target.result,a=s.split("\n"),o=a.filter(e=>e.trim().startsWith("#EXTINF:")).length;console.log("Detected channels in file:",o);const l=n.size||t.size,c=l?(l/1024).toFixed(1):null,u=l?(l/1024/1024).toFixed(2):null,d=s.trim(),h=null==(r=a[0])?void 0:r.trim(),p=null==(i=a[1])?void 0:i.trim(),m=d.startsWith("#EXTM3U")||"#EXTM3U"===h||s.includes("#EXTM3U")||"#EXTM3U"===h&&""===p||s.toLowerCase().includes("#extm3u"),f=a.some(e=>e.trim().startsWith("#EXTINF:")),g=a.some(e=>e.trim().startsWith("http")),x=f&&g&&o>0,v=m||x,y=o>0,_=a.some(e=>e.trim().startsWith("http")),E=s.includes("tvg-logo="),C=s.includes("group-title="),S=s.includes("region="),T=a.some(e=>e.trim().startsWith("#EXTINF:")&&e.includes("tvg-logo=")&&e.includes("group-title=")&&e.includes("region="));console.log("File content preview:",s.substring(0,100)),console.log("First line:",h),console.log("Second line:",p),console.log("Contains #EXTM3U:",s.includes("#EXTM3U")),console.log("Trimmed starts with #EXTM3U:",d.startsWith("#EXTM3U")),console.log("First line equals #EXTM3U:","#EXTM3U"===h),console.log("Has EXTINF lines:",f),console.log("Has HTTP URLs:",g),console.log("Fallback validation:",x),console.log("Final validation result:",v),console.log("File size details:",{bytes:l,KB:c,MB:u}),console.log("File object in reader:",t),console.log("File name in reader:",t.name),console.log("Stored file info in reader:",n),console.log("Is File object in reader:",t instanceof File),console.log("Is Blob object in reader:",t instanceof Blob),b(e=>{const r={...e,channelCount:o,isValidM3U:v,hasValidChannels:y,hasStreamUrls:_,hasTvgLogo:E,hasGroupTitle:C,hasRegion:S,hasValidExtinf:T,fileSize:l,fileSizeKB:c,fileSizeMB:u,contentPreview:s.substring(0,200)+(s.length>200?"...":""),firstLines:a.slice(0,5).map(e=>e.trim()),fileName:n.name,fileType:n.type,originalFile:t};return console.log("Updated file object:",r),console.log("File name check:",r.fileName),console.log("File type check:",r.fileType),console.log("File size check:",r.fileSize),console.log("Original file preserved:",r.originalFile),console.log("Original file is Blob:",r.originalFile instanceof Blob),r}),v||console.warn("File does not start with #EXTM3U header or has no channels/stream URLs."),_||console.warn("No HTTP stream URLs found in file."),E||console.warn("No tvg-logo attributes found in file."),C||console.warn("No group-title attributes found in file."),S||console.warn("No region attributes found in file.")},e.readAsText(t)}}})]}),E&&jsxRuntimeExports.jsxs(Box,{sx:{mt:1,p:1,bgcolor:"background.paper",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:[jsxRuntimeExports.jsx("strong",{children:"File:"})," ",E.fileName||E.name||"Unknown"]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:[jsxRuntimeExports.jsx("strong",{children:"Size:"})," ",E.fileSizeMB?parseFloat(E.fileSizeMB)>=1?`${E.fileSizeMB} MB`:`${E.fileSizeKB} KB`:"Unknown"]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:[jsxRuntimeExports.jsx("strong",{children:"Type:"})," ",E.fileType||E.type||"M3U Playlist"]}),E.channelCount&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:[jsxRuntimeExports.jsx("strong",{children:"Channels detected:"})," ",E.channelCount]}),(!E.fileName||!E.fileType)&&jsxRuntimeExports.jsxs(Box,{sx:{mt:1,p:1,bgcolor:"warning.50",borderRadius:1,border:"1px solid",borderColor:"warning.200"},children:[jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"warning.700",sx:{fontWeight:"bold"},children:"File Information Backup:"}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",component:"div",color:"warning.600",children:["Raw name: ",E.name||"Not available",jsxRuntimeExports.jsx("br",{}),"Raw type: ",E.type||"Not available",jsxRuntimeExports.jsx("br",{}),"Raw size: ",E.size||"Not available"," bytes",jsxRuntimeExports.jsx("br",{}),"Stored name: ",E.fileName||"Not available",jsxRuntimeExports.jsx("br",{}),"Stored type: ",E.fileType||"Not available",jsxRuntimeExports.jsx("br",{}),"Stored size: ",E.fileSize||"Not available"," bytes"]})]}),void 0!==E.isValidM3U&&jsxRuntimeExports.jsxs(Box,{sx:{mt:1},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",children:jsxRuntimeExports.jsx("strong",{children:"Validation Results:"})}),jsxRuntimeExports.jsx(Button$2,{size:"small",variant:"text",onClick:()=>O(!D),sx:{fontSize:"0.7rem",minWidth:"auto",p:.5},children:D?" Hide Debug":" Show Debug"})]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",component:"div",sx:{display:"flex",alignItems:"center",gap:.5},children:[E.isValidM3U?"":""," M3U Header"]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",component:"div",sx:{display:"flex",alignItems:"center",gap:.5},children:[E.hasValidChannels?"":""," Channel Entries"]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",component:"div",sx:{display:"flex",alignItems:"center",gap:.5},children:[E.hasStreamUrls?"":""," Stream URLs"]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",component:"div",sx:{display:"flex",alignItems:"center",gap:.5},children:[E.hasTvgLogo?"":""," Logo URLs"]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",component:"div",sx:{display:"flex",alignItems:"center",gap:.5},children:[E.hasGroupTitle?"":""," Categories"]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",component:"div",sx:{display:"flex",alignItems:"center",gap:.5},children:[E.hasRegion?"":""," Regions"]}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",component:"div",sx:{display:"flex",alignItems:"center",gap:.5},children:[E.hasValidExtinf?"":""," Valid EXTINF Format"]}),E.isValidM3U&&jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"success.main",sx:{mt:1,fontStyle:"italic"},children:" File format validated successfully"}),D&&jsxRuntimeExports.jsxs(Box,{sx:{mt:1,p:1,bgcolor:"grey.50",borderRadius:1,border:"1px solid",borderColor:"grey.300"},children:[jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"grey.700",sx:{fontWeight:"bold",mb:.5},children:"Debug Information:"}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",component:"div",color:"grey.600",sx:{fontFamily:"monospace",fontSize:"0.65rem"},children:["File size: ",E.fileSize||"Unknown"," bytes",jsxRuntimeExports.jsx("br",{}),"File size: ",E.fileSizeKB||"Unknown"," KB",jsxRuntimeExports.jsx("br",{}),"File size: ",E.fileSizeMB||"Unknown"," MB",jsxRuntimeExports.jsx("br",{}),"Channel count: ",E.channelCount||0,jsxRuntimeExports.jsx("br",{}),"Has M3U header: ",E.isValidM3U?"Yes":"No",jsxRuntimeExports.jsx("br",{}),"Validation method: ",E.isValidM3U?"Standard":"Fallback",jsxRuntimeExports.jsx("br",{}),"File type: ",E.fileType||E.type||"Unknown",jsxRuntimeExports.jsx("br",{}),"File name: ",E.fileName||E.name||"Unknown",jsxRuntimeExports.jsx("br",{}),"Raw file object: ",JSON.stringify({name:E.name,fileName:E.fileName,type:E.type,fileType:E.fileType,size:E.size,fileSize:E.fileSize},null,2)]}),E.contentPreview&&jsxRuntimeExports.jsxs(Box,{sx:{mt:1,p:1,bgcolor:"grey.100",borderRadius:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"grey.700",sx:{fontWeight:"bold",mb:.5},children:"Content Preview (first 200 chars):"}),jsxRuntimeExports.jsx(Typography,{variant:"caption",component:"div",color:"grey.600",sx:{fontFamily:"monospace",fontSize:"0.65rem",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:E.contentPreview})]}),E.firstLines&&E.firstLines.length>0&&jsxRuntimeExports.jsxs(Box,{sx:{mt:1,p:1,bgcolor:"grey.100",borderRadius:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"grey.700",sx:{fontWeight:"bold",mb:.5},children:"First 5 Lines:"}),jsxRuntimeExports.jsx(Typography,{variant:"caption",component:"div",color:"grey.600",sx:{fontFamily:"monospace",fontSize:"0.65rem",whiteSpace:"pre-wrap"},children:E.firstLines.map((e,t)=>jsxRuntimeExports.jsxs("span",{children:[t+1,": ",e||"(empty line)",jsxRuntimeExports.jsx("br",{})]},t))})]})]})]}),0===E.channelCount&&jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mt:1},children:"No channels detected in this file. Please check the file format."}),!1===E.isValidM3U&&jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mt:1},children:"File does not appear to be a valid M3U playlist. Missing #EXTM3U header."}),!1===E.hasStreamUrls&&jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mt:1},children:"No HTTP stream URLs found in the file. Check that your M3U file contains valid stream links."}),!1===E.hasTvgLogo&&jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mt:1},children:"No logo URLs found. Your M3U file should include tvg-logo attributes for channel logos."}),!1===E.hasGroupTitle&&jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mt:1},children:"No categories found. Your M3U file should include group-title attributes for channel categories."}),!1===E.hasRegion&&jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mt:1},children:"No regions found. Your M3U file should include region attributes for channel regions."}),!1===E.hasValidExtinf&&jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mt:1},children:"Invalid EXTINF format. Each channel should have tvg-logo, group-title, and region attributes."})]}),C&&jsxRuntimeExports.jsxs(Alert,{severity:"error",sx:{mt:2},onClose:()=>S(""),children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",component:"div",children:jsxRuntimeExports.jsx("strong",{children:"Import Failed:"})}),jsxRuntimeExports.jsx(Typography,{variant:"body2",component:"div",children:C}),P&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",component:"div",sx:{mt:1},children:[jsxRuntimeExports.jsx("strong",{children:"Details:"})," ",P]}),jsxRuntimeExports.jsx(Typography,{variant:"caption",component:"div",sx:{mt:1,fontStyle:"italic"},children:"Please check your file format and try again. Make sure the M3U file contains valid channel entries."}),jsxRuntimeExports.jsxs(Box,{sx:{mt:2,display:"flex",gap:1},children:[jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"small",onClick:()=>{S(""),L(""),M(""),w(0)},children:"Clear Error"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"small",onClick:()=>{b(null),S(""),L(""),M(""),w(0),I(!1)},children:"Reselect File"})]})]}),T&&jsxRuntimeExports.jsxs(Alert,{severity:"success",sx:{mt:2},onClose:()=>R(""),children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",component:"div",children:jsxRuntimeExports.jsx("strong",{children:"Import Successful!"})}),jsxRuntimeExports.jsx(Typography,{variant:"body2",component:"div",children:T}),E&&E.channelCount&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",component:"div",sx:{mt:1},children:[jsxRuntimeExports.jsx("strong",{children:"File processed:"})," ",E.name," (",E.channelCount," channels detected)"]}),jsxRuntimeExports.jsx(Typography,{variant:"caption",component:"div",sx:{mt:1,fontStyle:"italic"},children:"The channel list has been updated. You can now view and manage the imported channels."})]}),!A&&T&&jsxRuntimeExports.jsxs(Box,{sx:{mt:2,p:2,bgcolor:"success.50",borderRadius:1,border:"1px solid",borderColor:"success.200"},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"success.800",sx:{mb:1},children:jsxRuntimeExports.jsx("strong",{children:"Import Summary"})}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"success.700",children:[jsxRuntimeExports.jsx("strong",{children:"Status:"})," ",k]}),P&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"success.700",children:[jsxRuntimeExports.jsx("strong",{children:"Details:"})," ",P]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"success.700",children:[jsxRuntimeExports.jsx("strong",{children:"Progress:"})," ",j,"% Complete"]})]}),A&&jsxRuntimeExports.jsxs(Box,{sx:{mt:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:k||"Processing..."}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",mb:1},children:[jsxRuntimeExports.jsx(Box,{sx:{width:"100%",mr:1},children:jsxRuntimeExports.jsx(LinearProgress,{variant:"determinate",value:j,sx:{height:8,borderRadius:4,"& .MuiLinearProgress-bar":{borderRadius:4}}})}),jsxRuntimeExports.jsx(Box,{sx:{minWidth:35},children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:[j,"%"]})})]}),P&&jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic"},children:P}),E&&E.channelCount&&E.channelCount>50&&jsxRuntimeExports.jsxs(Box,{sx:{mt:1,p:1,bgcolor:"info.50",borderRadius:1,border:"1px solid",borderColor:"info.200"},children:[jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"info.700",children:[jsxRuntimeExports.jsx("strong",{children:"Large Import in Progress:"})," ",E.channelCount," channels detected. This may take several minutes to complete. Please be patient and do not close this dialog."]}),$&&jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"info.600",sx:{mt:.5,display:"block"},children:[jsxRuntimeExports.jsx("strong",{children:"Started:"})," ",new Date($).toLocaleTimeString(),F&&jsxRuntimeExports.jsxs("span",{children:["  ",jsxRuntimeExports.jsx("strong",{children:"Estimated remaining:"})," ",F]})]})]})]})]}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:ve,disabled:A,children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{onClick:async()=>{if(!E)return S("Please select an M3U file."),void console.log("No file selected.");const e=E.originalFile||E;if(!(e&&e instanceof Blob))return S("Invalid file object. The file may have been corrupted. Please select the file again."),void console.error("Invalid file object for import:",e);if(e.size>10485760)return void S("File size too large. Please select a file smaller than 10MB.");const r=e.name.toLowerCase().substring(e.name.lastIndexOf("."));if(![".m3u",".m3u8"].includes(r))return void S("Invalid file type. Please select an M3U or M3U8 file.");S(""),R(""),I(!0),w(0),N(Date.now()),B(null);const i=t.length;console.log("Initial channel count:",i),console.log("Attempting to import file:",e.name),console.log("File size:",(e.size/1024/1024).toFixed(2),"MB");try{const e=new FileReader,t=E.originalFile||E;if(!(t&&t instanceof Blob))throw new Error("Invalid file object. Please select a valid file.");console.log("File object for import:",t),console.log("Is File object:",t instanceof File),console.log("Is Blob object:",t instanceof Blob),console.log("File name for import:",t.name),e.onload=async e=>{const t=e.target.result;console.log("M3U file content loaded.",t.substring(0,200)+"..."),w(5),M("Reading and parsing M3U file..."),L(`Processing ${E.fileName}...`);try{w(15),M("Preparing channels for import..."),L("Validating file content and preparing import...");const e=new Promise((e,t)=>setTimeout(()=>t(new Error("Import timeout - request took too long")),6e5)),r=channelsAPI.bulkImport(t),s=setInterval(()=>{w(e=>{if(e<85){const t=E.channelCount>100?2:5;return Math.min(e+t,85)}return e})},1e4),a=await Promise.race([r,e]);if(clearInterval(s),console.log("Bulk import API response:",a),console.log("Response type:",typeof a),console.log("Response keys:",Object.keys(a||{})),console.log("Response.data:",null==a?void 0:a.data),console.log("Response.data type:",typeof(null==a?void 0:a.data)),console.log("Response.data keys:",(null==a?void 0:a.data)?Object.keys(a.data):"No data"),w(90),M("Importing channels to database..."),L("Processing server response and updating database..."),a&&a.data){const e=a.data;let t="",r=e.importedCount||0,i=e.updatedCount||0,s=e.skippedCount||0,o=e.totalProcessed||0;e.message?t=e.message:o>0?(t=`Successfully processed ${o} channels.`,r>0&&(t+=` ${r} new channels imported.`),i>0&&(t+=` ${i} existing channels updated.`),s>0&&(t+=` ${s} channels skipped due to errors.`)):t="Channels imported successfully.",R(t),console.log("Bulk import successful:",e),w(100),M("Verifying import results..."),L("Checking imported channels and updating display..."),setTimeout(async()=>{try{const[e]=await Promise.all([channelsAPI.getAll()]),t=e.data.length;console.log("New channel count:",t);const a=r,o=i,l=s;if(a>0||o>0){let e="";a>0&&(e+=`${a} new channels imported. `),o>0&&(e+=`${o} existing channels updated. `),l>0&&(e+=`${l} channels skipped due to errors.`),M(" Import completed successfully!"),L(e.trim()),console.log(`Verified: ${a} imported, ${o} updated, ${l} skipped`)}else console.log("Warning: No channels were processed despite success response"),M(" Import completed with warning"),L("The import process completed, but no channels were processed.");n(e.data),setTimeout(()=>{ve()},2e3)}catch(e){console.error("Error verifying import:",e),ve()}},1e3)}else a&&a.message?(R(a.message),w(100),M("Verifying import results..."),L("Checking imported channels and updating display..."),setTimeout(async()=>{try{const[e]=await Promise.all([channelsAPI.getAll()]),t=e.data.length;if(console.log("New channel count:",t),t>i){R(`Successfully imported ${t-i} channels.`)}n(e.data),setTimeout(()=>{ve()},2e3)}catch(e){console.error("Error verifying import:",e),ve()}},1e3)):!a||"success"!==a.status&&200!==a.status?a&&!1===a.error?(R("Channels imported successfully."),w(100),M("Verifying import results..."),L("Checking imported channels and updating display..."),setTimeout(async()=>{try{const[e]=await Promise.all([channelsAPI.getAll()]),t=e.data.length;if(console.log("New channel count:",t),t>i){R(`Successfully imported ${t-i} channels.`)}n(e.data),setTimeout(()=>{ve()},2e3)}catch(e){console.error("Error verifying import:",e),ve()}},1e3)):(console.log("Assuming success based on response structure:",a),R("Channels imported successfully."),w(100),M("Verifying import results..."),L("Checking imported channels and updating display..."),setTimeout(async()=>{try{const[e]=await Promise.all([channelsAPI.getAll()]),t=e.data.length;if(console.log("New channel count:",t),t>i){R(`Successfully imported ${t-i} channels.`)}n(e.data),setTimeout(()=>{ve()},2e3)}catch(e){console.error("Error verifying import:",e),ve()}},1e3)):(R("Channels imported successfully."),w(100),M("Verifying import results..."),L("Checking imported channels and updating display..."),setTimeout(async()=>{try{const[e]=await Promise.all([channelsAPI.getAll()]),t=e.data.length;if(console.log("New channel count:",t),t>i){R(`Successfully imported ${t-i} channels.`)}n(e.data),setTimeout(()=>{ve()},2e3)}catch(e){console.error("Error verifying import:",e),ve()}},1e3))}catch(r){console.error("Bulk import API error:",r);let e="Bulk import failed.",t="";r.response?r.response.data?(r.response.data.message?e=r.response.data.message:r.response.data.error?e=r.response.data.error:"string"==typeof r.response.data&&(e=r.response.data),r.response.data.partialSuccess&&(e=`Partial import: ${r.response.data.importedCount||0} channels imported successfully.`,t=r.response.data.message||"Some channels could not be imported.")):500===r.response.status?(e="Server error occurred during import.",t="The server encountered an error while processing your request."):400===r.response.status?(e="Invalid file format or content.",t="Please check that your M3U file follows the correct format."):413===r.response.status?(e="File too large.",t="The file size exceeds the server limit."):422===r.response.status&&(e="Validation error.",t="The file content could not be validated."):r.message&&(e=r.message,r.message.includes("timeout")&&(t="The import request took too long and timed out. This usually happens with large files containing many channels. Try importing a smaller file or contact support if the issue persists.")),S(e),t&&L(t),w(0),M("Import failed")}finally{I(!1)}},e.onerror=e=>{console.error("FileReader error:",e),S("Failed to read file."),I(!1),w(0)},e.readAsText(t)}catch(s){console.error("Unexpected error in handleBulkImportSubmit:",s);let e="An unexpected error occurred.",t="";s.message.includes("Blob")?(e="File reading error: The file object is corrupted.",t="This usually happens when the file object loses its properties. Please try selecting the file again."):s.message.includes("FileReader")?(e="File reading error: Unable to read the selected file.",t="Please ensure you have selected a valid M3U file and try again."):e=s.message||"An unexpected error occurred.",S(e),t&&L(t),I(!1),w(0)}},variant:"contained",disabled:!E||A||E&&0===E.channelCount||E&&!1===E.isValidM3U||E&&!1===E.hasStreamUrls||E&&!1===E.hasTvgLogo||E&&!1===E.hasGroupTitle||E&&!1===E.hasRegion||E&&!1===E.hasValidExtinf,children:A?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CircularProgress,{size:16,sx:{mr:1,color:"inherit"}}),"Importing..."]}):"Import"})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:V,onClose:ye,maxWidth:"sm",fullWidth:!0,children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Bulk Edit Channels"}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Set fields below to apply to all selected channels. Leave blank to keep unchanged."}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,sx:{mt:1},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Region"}),jsxRuntimeExports.jsxs(Select$1,{name:"region",value:W.region,label:"Region",onChange:_e,children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"",children:"No Change"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"__CLEAR__",children:"No Region"}),Array.isArray(s)&&Array.isArray(Re)&&[...new Set([...s,...Re])].map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e,children:e},e))]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Category"}),jsxRuntimeExports.jsxs(Select$1,{name:"category",value:W.category,label:"Category",onChange:_e,children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"__NO_CHANGE__",children:"No Change"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"__CLEAR__",children:"No Category"}),Array.isArray(r)&&r.map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e._id,children:e.name},e._id))]})]})})]})]}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:ye,children:"Cancel"}),jsxRuntimeExports.jsxs(Button$2,{onClick:async()=>{var e,t;const n={};if(""!==W.region&&"__NO_CHANGE__"!==W.region&&(n.region="__CLEAR__"===W.region?null:W.region),W.category&&"__NO_CHANGE__"!==W.category&&(n.category="__CLEAR__"===W.category?null:W.category),0!==Object.keys(n).length)try{await channelsAPI.bulkUpdate(U,n),v("Selected channels updated successfully"),H(!1),G([]),pe()}catch(r){g((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Bulk update failed")}else g("Please set at least one field to update")},variant:"contained",disabled:0===U.length,children:["Apply to ",U.length," selected"]})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:z,onClose:Ee,maxWidth:"lg",fullWidth:!0,children:[jsxRuntimeExports.jsxs(DialogTitle,{children:["Manage Duplicate Channels",jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Found ",Y.length," groups of duplicate channels"]})]}),jsxRuntimeExports.jsx(DialogContent,{children:0===Y.length?jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",py:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"success.main",gutterBottom:!0,children:" No Duplicates Found"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"All channels have unique names and categories."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Box,{sx:{mb:2,p:2,bgcolor:"warning.25",borderRadius:1,border:"1px solid",borderColor:"warning.200"},children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"warning.700",sx:{mb:1},children:[jsxRuntimeExports.jsx("strong",{children:"Duplicate Detection:"})," Channels are considered duplicates if they have the same name and category."]}),jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"warning.600",children:"Select duplicate groups below and choose an action to manage them."})]}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"small",onClick:()=>{X.length===Y.length?Z([]):Z(Y.map((e,t)=>t))},sx:{minWidth:"auto",px:2},children:X.length===Y.length?"Clear All":"Select All"})]})}),jsxRuntimeExports.jsx(Box,{sx:{maxHeight:400,overflowY:"auto"},children:Y.map((e,t)=>jsxRuntimeExports.jsx(Card,{sx:{mb:2,border:X.includes(t)?"2px solid":"1px solid",borderColor:X.includes(t)?"primary.main":"divider"},children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(Checkbox,{checked:X.includes(t),onChange:()=>(e=>{Y[e].channels.map(e=>e._id),Z(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(t)}),jsxRuntimeExports.jsx(Typography,{variant:"h6",children:e.name}),jsxRuntimeExports.jsx(Chip,{label:`${e.count} duplicates`,color:"warning",size:"small"})]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Category: ",e.category]})]}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:1,children:e.channels.map((t,n)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Box,{sx:{p:1,border:"1px solid",borderRadius:1,bgcolor:0===n?"success.25":"background.paper",borderColor:0===n?"success.200":"divider"},children:[jsxRuntimeExports.jsxs(Typography,{variant:"body2",sx:{fontWeight:"bold"},children:["Channel ",t.channelNumber]}),jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",children:t.region||"No Region"}),0===n&&jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"success.main",sx:{display:"block",fontWeight:"bold"},children:" Lowest Number (Keep)"}),n===e.channels.length-1&&0!==n&&jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"info.main",sx:{display:"block",fontWeight:"bold"},children:" Highest Number"})]})},t._id))})]})},t))}),X.length>0&&jsxRuntimeExports.jsxs(Box,{sx:{mt:2,p:2,bgcolor:"info.25",borderRadius:1,border:"1px solid",borderColor:"info.200"},children:[jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"info.700",sx:{mb:1},children:[jsxRuntimeExports.jsx("strong",{children:"Selected Actions:"})," ",X.length," duplicate group(s) selected"]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[jsxRuntimeExports.jsx(Button$2,{variant:"outlined",color:"warning",size:"small",onClick:async()=>{var e,t;const n=[];if(X.forEach(e=>{const t=Y[e].channels.slice(1);n.push(...t.map(e=>e._id))}),0!==n.length){if(window.confirm(`Delete ${n.length} duplicate channels with higher channel numbers?`))try{await channelsAPI.bulkDelete(n),v(`Successfully deleted ${n.length} duplicate channels`),Ee(),await he(),pe()}catch(r){g((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Failed to delete duplicate channels")}}else g("No channels selected for deletion")},children:"Delete Higher Numbers"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",color:"warning",size:"small",onClick:async()=>{var e,t;const n=[];if(X.forEach(e=>{const t=Y[e].channels.slice(0,-1);n.push(...t.map(e=>e._id))}),0!==n.length){if(window.confirm(`Delete ${n.length} duplicate channels with lower channel numbers?`))try{await channelsAPI.bulkDelete(n),v(`Successfully deleted ${n.length} duplicate channels`),Ee(),await he(),pe()}catch(r){g((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Failed to delete duplicate channels")}}else g("No channels selected for deletion")},children:"Delete Lower Numbers"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",color:"error",size:"small",onClick:async()=>{var e,t;const n=[];if(X.forEach(e=>{const t=Y[e];n.push(...t.channels.map(e=>e._id))}),0!==n.length){if(window.confirm(`Delete all ${n.length} duplicate channels?`))try{await channelsAPI.bulkDelete(n),v(`Successfully deleted ${n.length} duplicate channels`),Ee(),await he(),pe()}catch(r){g((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Failed to delete duplicate channels")}}else g("No channels selected for deletion")},children:"Delete All Duplicates"})]})]})]})}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button$2,{onClick:Ee,children:"Close"})})]})]})},AdminCategories=()=>{const[e,t]=reactExports.useState([]),[n,r]=reactExports.useState(!0),[i,s]=reactExports.useState(!1),[a,o]=reactExports.useState(null),[l,c]=reactExports.useState({name:"",description:""}),[u,d]=reactExports.useState(""),[h,p]=reactExports.useState("");reactExports.useEffect(()=>{m()},[]);const m=async()=>{var e;try{const n=await categoriesAPI.getAll();console.log("AdminCategories API response:",{data:n.data,isArray:Array.isArray(n.data),type:typeof n.data,length:null==(e=n.data)?void 0:e.length}),t(Array.isArray(n.data)?n.data:[])}catch(n){console.error("Error fetching categories:",n),d("Failed to fetch categories"),t([])}finally{r(!1)}},f=(e=null)=>{e?(o(e),c({name:e.name,description:e.description})):(o(null),c({name:"",description:""})),s(!0)},g=()=>{s(!1),o(null),c({name:"",description:""}),d("")},x=async e=>{var t,n;e.preventDefault(),d(""),p("");try{a?(await categoriesAPI.update(a._id,l),p("Category updated successfully")):(await categoriesAPI.create(l),p("Category created successfully")),m(),g()}catch(r){d((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||"Operation failed")}};return n?jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:[...Array(6)].map((e,t)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"60%"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"40%"})]})})},t))}):Array.isArray(e)?jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",children:"Manage Categories"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",startIcon:jsxRuntimeExports.jsx(Add,{}),onClick:()=>f(),children:"Add Category"})]}),u&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},onClose:()=>d(""),children:u}),h&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},onClose:()=>p(""),children:h}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:Array.isArray(e)&&e.map(e=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:e.name}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:e.description||"No description"})]}),jsxRuntimeExports.jsxs(CardActions,{children:[jsxRuntimeExports.jsx(Button$2,{size:"small",startIcon:jsxRuntimeExports.jsx(Edit,{}),onClick:()=>f(e),children:"Edit"}),jsxRuntimeExports.jsx(Button$2,{size:"small",color:"error",startIcon:jsxRuntimeExports.jsx(DeleteIcon,{}),onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this category?"))try{await categoriesAPI.delete(e),p("Category deleted successfully"),m()}catch(t){d("Failed to delete category")}})(e._id),children:"Delete"})]})]})},e._id))}),jsxRuntimeExports.jsxs(Dialog,{open:i,onClose:g,maxWidth:"sm",fullWidth:!0,children:[jsxRuntimeExports.jsx(DialogTitle,{children:a?"Edit Category":"Add New Category"}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsxs(Box,{component:"form",onSubmit:x,sx:{mt:2},children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Category Name",name:"name",value:l.name,onChange:e=>c({...l,name:e.target.value}),required:!0,sx:{mb:2}}),jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Description",name:"description",value:l.description,onChange:e=>c({...l,description:e.target.value}),multiline:!0,rows:3})]})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:g,children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{onClick:x,variant:"contained",children:a?"Update":"Create"})]})]})]}):(console.error("AdminCategories state validation failed:",{categories:Array.isArray(e),type:typeof e,value:e}),t([]),jsxRuntimeExports.jsx(Box,{sx:{textAlign:"center",py:8},children:jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"error",gutterBottom:!0,children:"Error loading categories. Please refresh the page."})}))};function _defineProperty(e,t,n){return(t=toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,i=_objectWithoutPropertiesLoose$3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _excluded$6=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function useStateManager(e){var t=e.defaultInputValue,n=void 0===t?"":t,r=e.defaultMenuIsOpen,i=void 0!==r&&r,s=e.defaultValue,a=void 0===s?null:s,o=e.inputValue,l=e.menuIsOpen,c=e.onChange,u=e.onInputChange,d=e.onMenuClose,h=e.onMenuOpen,p=e.value,m=_objectWithoutProperties(e,_excluded$6),f=_slicedToArray(reactExports.useState(void 0!==o?o:n),2),g=f[0],x=f[1],v=_slicedToArray(reactExports.useState(void 0!==l?l:i),2),y=v[0],_=v[1],E=_slicedToArray(reactExports.useState(void 0!==p?p:a),2),b=E[0],C=E[1],S=reactExports.useCallback(function(e,t){"function"==typeof c&&c(e,t),C(e)},[c]),T=reactExports.useCallback(function(e,t){var n;"function"==typeof u&&(n=u(e,t)),x(void 0!==n?n:e)},[u]),R=reactExports.useCallback(function(){"function"==typeof h&&h(),_(!0)},[h]),j=reactExports.useCallback(function(){"function"==typeof d&&d(),_(!1)},[d]),w=void 0!==o?o:g,A=void 0!==l?l:y,I=void 0!==p?p:b;return _objectSpread2(_objectSpread2({},m),{},{inputValue:w,menuIsOpen:A,onChange:S,onInputChange:T,onMenuClose:j,onMenuOpen:R,value:I})}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!e})()}function _possibleConstructorReturn(e,t){if(t&&("object"==_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var index=reactExports.useLayoutEffect,_excluded$4=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],noop=function(){};function applyPrefixToName(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function classNames(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=[].concat(r);if(t&&e)for(var a in t)t.hasOwnProperty(a)&&t[a]&&s.push("".concat(applyPrefixToName(e,a)));return s.filter(function(e){return e}).map(function(e){return String(e).trim()}).join(" ")}var cleanValue=function(e){return isArray(e)?e.filter(Boolean):"object"===_typeof(e)&&null!==e?[e]:[]},cleanCommonProps=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,_objectSpread2({},_objectWithoutProperties(e,_excluded$4))},getStyleProps=function(e,t,n){var r=e.cx,i=e.getStyles,s=e.getClassNames,a=e.className;return{css:i(t,e),className:r(null!=n?n:{},s(t,e),a)}};function isDocumentElement(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function normalizedHeight(e){return isDocumentElement(e)?window.innerHeight:e.clientHeight}function getScrollTop(e){return isDocumentElement(e)?window.pageYOffset:e.scrollTop}function scrollTo(e,t){isDocumentElement(e)?window.scrollTo(0,t):e.scrollTop=t}function getScrollParent(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}function easeOutCubic(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}function animatedScrollTo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:noop,i=getScrollTop(e),s=t-i,a=0;!function t(){var o=easeOutCubic(a+=10,i,s,n);scrollTo(e,o),a<n?window.requestAnimationFrame(t):r(e)}()}function scrollIntoView(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?scrollTo(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&scrollTo(e,Math.max(t.offsetTop-i,0))}function getBoundingClientObj(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function isTouchCapable(){try{return document.createEvent("TouchEvent"),!0}catch(e2){return!1}}function isMobileDevice(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e2){return!1}}var passiveOptionAccessed=!1,options={get passive(){return passiveOptionAccessed=!0}},w="undefined"!=typeof window?window:{};w.addEventListener&&w.removeEventListener&&(w.addEventListener("p",noop,options),w.removeEventListener("p",noop,!1));var supportsPassiveEvents=passiveOptionAccessed;function notNullish(e){return null!=e}function isArray(e){return Array.isArray(e)}function valueTernary(e,t,n){return e?t:n}function singleValueAsValue(e){return e}function multiValueAsValue(e){return e}var removeProps=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.entries(e).filter(function(e){var t=_slicedToArray(e,1)[0];return!n.includes(t)}).reduce(function(e,t){var n=_slicedToArray(t,2),r=n[0],i=n[1];return e[r]=i,e},{})},_excluded$3=["children","innerProps"],_excluded2$1=["children","innerProps"];function getMenuPlacement(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,s=e.shouldScroll,a=e.isFixedPosition,o=e.controlHeight,l=getScrollParent(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var u=l.getBoundingClientRect().height,d=n.getBoundingClientRect(),h=d.bottom,p=d.height,m=d.top,f=n.offsetParent.getBoundingClientRect().top,g=a?window.innerHeight:normalizedHeight(l),x=getScrollTop(l),v=parseInt(getComputedStyle(n).marginBottom,10),y=parseInt(getComputedStyle(n).marginTop,10),_=f-y,E=g-m,b=_+x,C=u-x-m,S=h-g+x+v,T=x+m-y,R=160;switch(i){case"auto":case"bottom":if(E>=p)return{placement:"bottom",maxHeight:t};if(C>=p&&!a)return s&&animatedScrollTo(l,S,R),{placement:"bottom",maxHeight:t};if(!a&&C>=r||a&&E>=r)return s&&animatedScrollTo(l,S,R),{placement:"bottom",maxHeight:a?E-v:C-v};if("auto"===i||a){var j=t,w=a?_:b;return w>=r&&(j=Math.min(w-v-o,t)),{placement:"top",maxHeight:j}}if("bottom"===i)return s&&scrollTo(l,S),{placement:"bottom",maxHeight:t};break;case"top":if(_>=p)return{placement:"top",maxHeight:t};if(b>=p&&!a)return s&&animatedScrollTo(l,T,R),{placement:"top",maxHeight:t};if(!a&&b>=r||a&&_>=r){var A=t;return(!a&&b>=r||a&&_>=r)&&(A=a?_-y:b-y),s&&animatedScrollTo(l,T,R),{placement:"top",maxHeight:A}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}function alignToControl(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}var coercePlacement=function(e){return"auto"===e?"bottom":e},menuCSS=function(e,t){var n,r=e.placement,i=e.theme,s=i.borderRadius,a=i.spacing,o=i.colors;return _objectSpread2((_defineProperty(n={label:"menu"},alignToControl(r),"100%"),_defineProperty(n,"position","absolute"),_defineProperty(n,"width","100%"),_defineProperty(n,"zIndex",1),n),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},PortalPlacementContext=reactExports.createContext(null),MenuPlacer=function(e){var t=e.children,n=e.minMenuHeight,r=e.maxMenuHeight,i=e.menuPlacement,s=e.menuPosition,a=e.menuShouldScrollIntoView,o=e.theme,l=(reactExports.useContext(PortalPlacementContext)||{}).setPortalPlacement,c=reactExports.useRef(null),u=_slicedToArray(reactExports.useState(r),2),d=u[0],h=u[1],p=_slicedToArray(reactExports.useState(null),2),m=p[0],f=p[1],g=o.spacing.controlHeight;return index(function(){var e=c.current;if(e){var t="fixed"===s,o=getMenuPlacement({maxHeight:r,menuEl:e,minHeight:n,placement:i,shouldScroll:a&&!t,isFixedPosition:t,controlHeight:g});h(o.maxHeight),f(o.placement),null==l||l(o.placement)}},[r,i,s,a,n,l,g]),t({ref:c,placerProps:_objectSpread2(_objectSpread2({},e),{},{placement:m||coercePlacement(i),maxHeight:d})})},Menu=function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return jsx("div",_extends$2({},getStyleProps(e,"menu",{menu:!0}),{ref:n},r),t)},Menu$1=Menu,menuListCSS=function(e,t){var n=e.maxHeight,r=e.theme.spacing.baseUnit;return _objectSpread2({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},MenuList=function(e){var t=e.children,n=e.innerProps,r=e.innerRef,i=e.isMulti;return jsx("div",_extends$2({},getStyleProps(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},n),t)},noticeCSS=function(e,t){var n=e.theme,r=n.spacing.baseUnit,i=n.colors;return _objectSpread2({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},noOptionsMessageCSS=noticeCSS,loadingMessageCSS=noticeCSS,NoOptionsMessage=function(e){var t=e.children,n=void 0===t?"No options":t,r=e.innerProps,i=_objectWithoutProperties(e,_excluded$3);return jsx("div",_extends$2({},getStyleProps(_objectSpread2(_objectSpread2({},i),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},LoadingMessage=function(e){var t=e.children,n=void 0===t?"Loading...":t,r=e.innerProps,i=_objectWithoutProperties(e,_excluded2$1);return jsx("div",_extends$2({},getStyleProps(_objectSpread2(_objectSpread2({},i),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},menuPortalCSS=function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},MenuPortal=function(e){var t=e.appendTo,n=e.children,r=e.controlElement,i=e.innerProps,s=e.menuPlacement,a=e.menuPosition,o=reactExports.useRef(null),l=reactExports.useRef(null),c=_slicedToArray(reactExports.useState(coercePlacement(s)),2),u=c[0],d=c[1],h=reactExports.useMemo(function(){return{setPortalPlacement:d}},[]),p=_slicedToArray(reactExports.useState(null),2),m=p[0],f=p[1],g=reactExports.useCallback(function(){if(r){var e=getBoundingClientObj(r),t="fixed"===a?0:window.pageYOffset,n=e[u]+t;n===(null==m?void 0:m.offset)&&e.left===(null==m?void 0:m.rect.left)&&e.width===(null==m?void 0:m.rect.width)||f({offset:n,rect:e})}},[r,a,u,null==m?void 0:m.offset,null==m?void 0:m.rect.left,null==m?void 0:m.rect.width]);index(function(){g()},[g]);var x=reactExports.useCallback(function(){"function"==typeof l.current&&(l.current(),l.current=null),r&&o.current&&(l.current=autoUpdate(r,o.current,g,{elementResize:"ResizeObserver"in window}))},[r,g]);index(function(){x()},[x]);var v=reactExports.useCallback(function(e){o.current=e,x()},[x]);if(!t&&"fixed"!==a||!m)return null;var y=jsx("div",_extends$2({ref:v},getStyleProps(_objectSpread2(_objectSpread2({},e),{},{offset:m.offset,position:a,rect:m.rect}),"menuPortal",{"menu-portal":!0}),i),n);return jsx(PortalPlacementContext.Provider,{value:h},t?reactDomExports.createPortal(y,t):y)},containerCSS=function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},SelectContainer=function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,i=e.isRtl;return jsx("div",_extends$2({},getStyleProps(e,"container",{"--is-disabled":r,"--is-rtl":i}),n),t)},valueContainerCSS=function(e,t){var n=e.theme.spacing,r=e.isMulti,i=e.hasValue,s=e.selectProps.controlShouldRenderValue;return _objectSpread2({alignItems:"center",display:r&&i&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})},ValueContainer=function(e){var t=e.children,n=e.innerProps,r=e.isMulti,i=e.hasValue;return jsx("div",_extends$2({},getStyleProps(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),n),t)},indicatorsContainerCSS=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},IndicatorsContainer=function(e){var t=e.children,n=e.innerProps;return jsx("div",_extends$2({},getStyleProps(e,"indicatorsContainer",{indicators:!0}),n),t)},_templateObject,_excluded$2=["size"],_excluded2=["innerProps","isRtl","size"],_ref2$2={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Svg=function(e){var t=e.size,n=_objectWithoutProperties(e,_excluded$2);return jsx("svg",_extends$2({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:_ref2$2},n))},CrossIcon=function(e){return jsx(Svg,_extends$2({size:20},e),jsx("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},DownChevron=function(e){return jsx(Svg,_extends$2({size:20},e),jsx("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},baseCSS=function(e,t){var n=e.isFocused,r=e.theme,i=r.spacing.baseUnit,s=r.colors;return _objectSpread2({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?s.neutral60:s.neutral20,padding:2*i,":hover":{color:n?s.neutral80:s.neutral40}})},dropdownIndicatorCSS=baseCSS,DropdownIndicator=function(e){var t=e.children,n=e.innerProps;return jsx("div",_extends$2({},getStyleProps(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||jsx(DownChevron,null))},clearIndicatorCSS=baseCSS,ClearIndicator=function(e){var t=e.children,n=e.innerProps;return jsx("div",_extends$2({},getStyleProps(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||jsx(CrossIcon,null))},indicatorSeparatorCSS=function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing.baseUnit,s=r.colors;return _objectSpread2({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?s.neutral10:s.neutral20,marginBottom:2*i,marginTop:2*i})},IndicatorSeparator=function(e){var t=e.innerProps;return jsx("span",_extends$2({},t,getStyleProps(e,"indicatorSeparator",{"indicator-separator":!0})))},loadingDotAnimations=keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),loadingIndicatorCSS=function(e,t){var n=e.isFocused,r=e.size,i=e.theme,s=i.colors,a=i.spacing.baseUnit;return _objectSpread2({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?s.neutral60:s.neutral20,padding:2*a})},LoadingDot=function(e){var t=e.delay,n=e.offset;return jsx("span",{css:css({animation:"".concat(loadingDotAnimations," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},LoadingIndicator=function(e){var t=e.innerProps,n=e.isRtl,r=e.size,i=void 0===r?4:r,s=_objectWithoutProperties(e,_excluded2);return jsx("div",_extends$2({},getStyleProps(_objectSpread2(_objectSpread2({},s),{},{innerProps:t,isRtl:n,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),jsx(LoadingDot,{delay:0,offset:n}),jsx(LoadingDot,{delay:160,offset:!0}),jsx(LoadingDot,{delay:320,offset:!n}))},css$1=function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.theme,s=i.colors,a=i.borderRadius;return _objectSpread2({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?s.neutral5:s.neutral0,borderColor:n?s.neutral10:r?s.primary:s.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:r?s.primary:s.neutral30}})},Control=function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.innerRef,s=e.innerProps,a=e.menuIsOpen;return jsx("div",_extends$2({ref:i},getStyleProps(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":a}),s,{"aria-disabled":n||void 0}),t)},Control$1=Control,_excluded$1=["data"],groupCSS=function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},Group=function(e){var t=e.children,n=e.cx,r=e.getStyles,i=e.getClassNames,s=e.Heading,a=e.headingProps,o=e.innerProps,l=e.label,c=e.theme,u=e.selectProps;return jsx("div",_extends$2({},getStyleProps(e,"group",{group:!0}),o),jsx(s,_extends$2({},a,{selectProps:u,theme:c,getStyles:r,getClassNames:i,cx:n}),l),jsx("div",null,t))},groupHeadingCSS=function(e,t){var n=e.theme,r=n.colors,i=n.spacing;return _objectSpread2({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},GroupHeading=function(e){var t=cleanCommonProps(e);t.data;var n=_objectWithoutProperties(t,_excluded$1);return jsx("div",_extends$2({},getStyleProps(e,"groupHeading",{"group-heading":!0}),n))},Group$1=Group,_excluded$5=["innerRef","isDisabled","isHidden","inputClassName"],inputCSS=function(e,t){var n=e.isDisabled,r=e.value,i=e.theme,s=i.spacing,a=i.colors;return _objectSpread2(_objectSpread2({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},containerStyle),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:a.neutral80})},spacingStyle={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},containerStyle={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":_objectSpread2({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},spacingStyle)},inputStyle=function(e){return _objectSpread2({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},spacingStyle)},Input=function(e){var t=e.cx,n=e.value,r=cleanCommonProps(e),i=r.innerRef,s=r.isDisabled,a=r.isHidden,o=r.inputClassName,l=_objectWithoutProperties(r,_excluded$5);return jsx("div",_extends$2({},getStyleProps(e,"input",{"input-container":!0}),{"data-value":n||""}),jsx("input",_extends$2({className:t({input:!0},o),ref:i,style:inputStyle(a),disabled:s},l)))},Input$1=Input,multiValueCSS=function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,s=n.colors;return _objectSpread2({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},multiValueLabelCSS=function(e,t){var n=e.theme,r=n.borderRadius,i=n.colors,s=e.cropWithEllipsis;return _objectSpread2({overflow:"hidden",textOverflow:s||void 0===s?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemoveCSS=function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,s=n.colors,a=e.isFocused;return _objectSpread2({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:a?s.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},MultiValueGeneric=function(e){var t=e.children,n=e.innerProps;return jsx("div",n,t)},MultiValueContainer=MultiValueGeneric,MultiValueLabel=MultiValueGeneric;function MultiValueRemove(e){var t=e.children,n=e.innerProps;return jsx("div",_extends$2({role:"button"},n),t||jsx(CrossIcon,{size:14}))}var MultiValue=function(e){var t=e.children,n=e.components,r=e.data,i=e.innerProps,s=e.isDisabled,a=e.removeProps,o=e.selectProps,l=n.Container,c=n.Label,u=n.Remove;return jsx(l,{data:r,innerProps:_objectSpread2(_objectSpread2({},getStyleProps(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),i),selectProps:o},jsx(c,{data:r,innerProps:_objectSpread2({},getStyleProps(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),jsx(u,{data:r,innerProps:_objectSpread2(_objectSpread2({},getStyleProps(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},a),selectProps:o}))},MultiValue$1=MultiValue,optionCSS=function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.isSelected,s=e.theme,a=s.spacing,o=s.colors;return _objectSpread2({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?o.primary:r?o.primary25:"transparent",color:n?o.neutral20:i?o.neutral0:"inherit",padding:"".concat(2*a.baseUnit,"px ").concat(3*a.baseUnit,"px"),":active":{backgroundColor:n?void 0:i?o.primary:o.primary50}})},Option=function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.isSelected,s=e.innerRef,a=e.innerProps;return jsx("div",_extends$2({},getStyleProps(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":i}),{ref:s,"aria-disabled":n},a),t)},Option$1=Option,placeholderCSS=function(e,t){var n=e.theme,r=n.spacing,i=n.colors;return _objectSpread2({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},Placeholder=function(e){var t=e.children,n=e.innerProps;return jsx("div",_extends$2({},getStyleProps(e,"placeholder",{placeholder:!0}),n),t)},Placeholder$1=Placeholder,css2=function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing,s=r.colors;return _objectSpread2({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?s.neutral40:s.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},SingleValue=function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return jsx("div",_extends$2({},getStyleProps(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},SingleValue$1=SingleValue,components={ClearIndicator:ClearIndicator,Control:Control$1,DropdownIndicator:DropdownIndicator,DownChevron:DownChevron,CrossIcon:CrossIcon,Group:Group$1,GroupHeading:GroupHeading,IndicatorsContainer:IndicatorsContainer,IndicatorSeparator:IndicatorSeparator,Input:Input$1,LoadingIndicator:LoadingIndicator,Menu:Menu$1,MenuList:MenuList,MenuPortal:MenuPortal,LoadingMessage:LoadingMessage,NoOptionsMessage:NoOptionsMessage,MultiValue:MultiValue$1,MultiValueContainer:MultiValueContainer,MultiValueLabel:MultiValueLabel,MultiValueRemove:MultiValueRemove,Option:Option$1,Placeholder:Placeholder$1,SelectContainer:SelectContainer,SingleValue:SingleValue$1,ValueContainer:ValueContainer},defaultComponents=function(e){return _objectSpread2(_objectSpread2({},components),e.components)},safeIsNaN=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function isEqual(e,t){return e===t||!(!safeIsNaN(e)||!safeIsNaN(t))}function areInputsEqual(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!isEqual(e[n],t[n]))return!1;return!0}function memoizeOne(e,t){void 0===t&&(t=areInputsEqual);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var s=e.apply(this,r);return n={lastResult:s,lastArgs:r,lastThis:this},s}return r.clear=function(){n=null},r}for(var _ref={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},A11yText=function(e){return jsx("span",_extends$2({css:_ref},e))},A11yText$1=A11yText,defaultAriaLiveMessages={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.tabSelectsValue,i=e.context,s=e.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,i=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return"option ".concat(r,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,i=e.label,s=void 0===i?"":i,a=e.selectValue,o=e.isDisabled,l=e.isSelected,c=e.isAppleDevice,u=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&a)return"value ".concat(s," focused, ").concat(u(a,n),".");if("menu"===t&&c){var d=o?" disabled":"",h="".concat(l?" selected":"").concat(d);return"".concat(s).concat(h,", ").concat(u(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},LiveRegion=function(e){var t=e.ariaSelection,n=e.focusedOption,r=e.focusedValue,i=e.focusableOptions,s=e.isFocused,a=e.selectValue,o=e.selectProps,l=e.id,c=e.isAppleDevice,u=o.ariaLiveMessages,d=o.getOptionLabel,h=o.inputValue,p=o.isMulti,m=o.isOptionDisabled,f=o.isSearchable,g=o.menuIsOpen,x=o.options,v=o.screenReaderStatus,y=o.tabSelectsValue,_=o.isLoading,E=o["aria-label"],b=o["aria-live"],C=reactExports.useMemo(function(){return _objectSpread2(_objectSpread2({},defaultAriaLiveMessages),u||{})},[u]),S=reactExports.useMemo(function(){var e,n="";if(t&&C.onChange){var r=t.option,i=t.options,s=t.removedValue,o=t.removedValues,l=t.value,c=s||r||(e=l,Array.isArray(e)?null:e),u=c?d(c):"",h=i||o||void 0,p=h?h.map(d):[],f=_objectSpread2({isDisabled:c&&m(c,a),label:u,labels:p},t);n=C.onChange(f)}return n},[t,C,m,a,d]),T=reactExports.useMemo(function(){var e="",t=n||r,s=!!(n&&a&&a.includes(n));if(t&&C.onFocus){var o={focused:t,label:d(t),isDisabled:m(t,a),isSelected:s,options:i,context:t===n?"menu":"value",selectValue:a,isAppleDevice:c};e=C.onFocus(o)}return e},[n,r,d,m,C,i,a,c]),R=reactExports.useMemo(function(){var e="";if(g&&x.length&&!_&&C.onFilter){var t=v({count:i.length});e=C.onFilter({inputValue:h,resultsMessage:t})}return e},[i,h,g,C,x,v,_]),j="initial-input-focus"===(null==t?void 0:t.action),w=reactExports.useMemo(function(){var e="";if(C.guidance){var t=r?"value":g?"menu":"input";e=C.guidance({"aria-label":E,context:t,isDisabled:n&&m(n,a),isMulti:p,isSearchable:f,tabSelectsValue:y,isInitialFocus:j})}return e},[E,n,r,p,m,f,g,C,a,y,j]),A=jsx(reactExports.Fragment,null,jsx("span",{id:"aria-selection"},S),jsx("span",{id:"aria-focused"},T),jsx("span",{id:"aria-results"},R),jsx("span",{id:"aria-guidance"},w));return jsx(reactExports.Fragment,null,jsx(A11yText$1,{id:l},j&&A),jsx(A11yText$1,{"aria-live":b,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!j&&A))},LiveRegion$1=LiveRegion,diacritics=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],anyDiacritic=new RegExp("["+diacritics.map(function(e){return e.letters}).join("")+"]","g"),diacriticToBase={},i=0;i<diacritics.length;i++)for(var diacritic=diacritics[i],j=0;j<diacritic.letters.length;j++)diacriticToBase[diacritic.letters[j]]=diacritic.base;var stripDiacritics=function(e){return e.replace(anyDiacritic,function(e){return diacriticToBase[e]})},memoizedStripDiacriticsForInput=memoizeOne(stripDiacritics),trimString=function(e){return e.replace(/^\s+|\s+$/g,"")},defaultStringify=function(e){return"".concat(e.label," ").concat(e.value)},createFilter=function(e){return function(t,n){if(t.data.__isNew__)return!0;var r=_objectSpread2({ignoreCase:!0,ignoreAccents:!0,stringify:defaultStringify,trim:!0,matchFrom:"any"},e),i=r.ignoreCase,s=r.ignoreAccents,a=r.stringify,o=r.trim,l=r.matchFrom,c=o?trimString(n):n,u=o?trimString(a(t)):a(t);return i&&(c=c.toLowerCase(),u=u.toLowerCase()),s&&(c=memoizedStripDiacriticsForInput(c),u=stripDiacritics(u)),"start"===l?u.substr(0,c.length)===c:u.indexOf(c)>-1}},_excluded=["innerRef"];function DummyInput(e){var t=e.innerRef,n=_objectWithoutProperties(e,_excluded),r=removeProps(n,"onExited","in","enter","exit","appear");return jsx("input",_extends$2({ref:t},r,{css:css({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var cancelScroll=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function useScrollCapture(e){var t=e.isEnabled,n=e.onBottomArrive,r=e.onBottomLeave,i=e.onTopArrive,s=e.onTopLeave,a=reactExports.useRef(!1),o=reactExports.useRef(!1),l=reactExports.useRef(0),c=reactExports.useRef(null),u=reactExports.useCallback(function(e,t){if(null!==c.current){var l=c.current,u=l.scrollTop,d=l.scrollHeight,h=l.clientHeight,p=c.current,m=t>0,f=d-h-u,g=!1;f>t&&a.current&&(r&&r(e),a.current=!1),m&&o.current&&(s&&s(e),o.current=!1),m&&t>f?(n&&!a.current&&n(e),p.scrollTop=d,g=!0,a.current=!0):!m&&-t>u&&(i&&!o.current&&i(e),p.scrollTop=0,g=!0,o.current=!0),g&&cancelScroll(e)}},[n,r,i,s]),d=reactExports.useCallback(function(e){u(e,e.deltaY)},[u]),h=reactExports.useCallback(function(e){l.current=e.changedTouches[0].clientY},[]),p=reactExports.useCallback(function(e){var t=l.current-e.changedTouches[0].clientY;u(e,t)},[u]),m=reactExports.useCallback(function(e){if(e){var t=!!supportsPassiveEvents&&{passive:!1};e.addEventListener("wheel",d,t),e.addEventListener("touchstart",h,t),e.addEventListener("touchmove",p,t)}},[p,h,d]),f=reactExports.useCallback(function(e){e&&(e.removeEventListener("wheel",d,!1),e.removeEventListener("touchstart",h,!1),e.removeEventListener("touchmove",p,!1))},[p,h,d]);return reactExports.useEffect(function(){if(t){var e=c.current;return m(e),function(){f(e)}}},[t,m,f]),function(e){c.current=e}}var STYLE_KEYS=["boxSizing","height","overflow","paddingRight","position"],LOCK_STYLES={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function preventTouchMove(e){e.cancelable&&e.preventDefault()}function allowTouchMove(e){e.stopPropagation()}function preventInertiaScroll(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),activeScrollLocks=0,listenerOptions={capture:!1,passive:!1};function useScrollLock(e){var t=e.isEnabled,n=e.accountForScrollbars,r=void 0===n||n,i=reactExports.useRef({}),s=reactExports.useRef(null),a=reactExports.useCallback(function(e){if(canUseDOM){var t=document.body,n=t&&t.style;if(r&&STYLE_KEYS.forEach(function(e){var t=n&&n[e];i.current[e]=t}),r&&activeScrollLocks<1){var s=parseInt(i.current.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,o=window.innerWidth-a+s||0;Object.keys(LOCK_STYLES).forEach(function(e){var t=LOCK_STYLES[e];n&&(n[e]=t)}),n&&(n.paddingRight="".concat(o,"px"))}t&&isTouchDevice()&&(t.addEventListener("touchmove",preventTouchMove,listenerOptions),e&&(e.addEventListener("touchstart",preventInertiaScroll,listenerOptions),e.addEventListener("touchmove",allowTouchMove,listenerOptions))),activeScrollLocks+=1}},[r]),o=reactExports.useCallback(function(e){if(canUseDOM){var t=document.body,n=t&&t.style;activeScrollLocks=Math.max(activeScrollLocks-1,0),r&&activeScrollLocks<1&&STYLE_KEYS.forEach(function(e){var t=i.current[e];n&&(n[e]=t)}),t&&isTouchDevice()&&(t.removeEventListener("touchmove",preventTouchMove,listenerOptions),e&&(e.removeEventListener("touchstart",preventInertiaScroll,listenerOptions),e.removeEventListener("touchmove",allowTouchMove,listenerOptions)))}},[r]);return reactExports.useEffect(function(){if(t){var e=s.current;return a(e),function(){o(e)}}},[t,a,o]),function(e){s.current=e}}var blurSelectInput=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},_ref2$1={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ScrollManager(e){var t=e.children,n=e.lockEnabled,r=e.captureEnabled,i=useScrollCapture({isEnabled:void 0===r||r,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=useScrollLock({isEnabled:n});return jsx(reactExports.Fragment,null,n&&jsx("div",{onClick:blurSelectInput,css:_ref2$1}),t(function(e){i(e),s(e)}))}var _ref2={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},RequiredInput=function(e){var t=e.name,n=e.onFocus;return jsx("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:_ref2,value:"",onChange:function(){}})},RequiredInput$1=RequiredInput;function testPlatform(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function isIPhone(){return testPlatform(/^iPhone/i)}function isMac(){return testPlatform(/^Mac/i)}function isIPad(){return testPlatform(/^iPad/i)||isMac()&&navigator.maxTouchPoints>1}function isIOS(){return isIPhone()||isIPad()}function isAppleDevice(){return isMac()||isIOS()}var formatGroupLabel=function(e){return e.label},getOptionLabel$1=function(e){return e.label},getOptionValue$1=function(e){return e.value},isOptionDisabled=function(e){return!!e.isDisabled},defaultStyles={clearIndicator:clearIndicatorCSS,container:containerCSS,control:css$1,dropdownIndicator:dropdownIndicatorCSS,group:groupCSS,groupHeading:groupHeadingCSS,indicatorsContainer:indicatorsContainerCSS,indicatorSeparator:indicatorSeparatorCSS,input:inputCSS,loadingIndicator:loadingIndicatorCSS,loadingMessage:loadingMessageCSS,menu:menuCSS,menuList:menuListCSS,menuPortal:menuPortalCSS,multiValue:multiValueCSS,multiValueLabel:multiValueLabelCSS,multiValueRemove:multiValueRemoveCSS,noOptionsMessage:noOptionsMessageCSS,option:optionCSS,placeholder:placeholderCSS,singleValue:css2,valueContainer:valueContainerCSS},colors={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},borderRadius=4,baseUnit=4,controlHeight=38,menuGutter=2*baseUnit,spacing={baseUnit:baseUnit,controlHeight:controlHeight,menuGutter:menuGutter},defaultTheme={borderRadius:borderRadius,colors:colors,spacing:spacing},defaultProps={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:isTouchCapable(),captureMenuScroll:!isTouchCapable(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:createFilter(),formatGroupLabel:formatGroupLabel,getOptionLabel:getOptionLabel$1,getOptionValue:getOptionValue$1,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:isOptionDisabled,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!isMobileDevice(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function toCategorizedOption(e,t,n,r){return{type:"option",data:t,isDisabled:_isOptionDisabled(e,t,n),isSelected:_isOptionSelected(e,t,n),label:getOptionLabel2(e,t),value:getOptionValue2(e,t),index:r}}function buildCategorizedOptions(e,t){return e.options.map(function(n,r){if("options"in n){var i=n.options.map(function(n,r){return toCategorizedOption(e,n,t,r)}).filter(function(t){return isFocusable(e,t)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var s=toCategorizedOption(e,n,t,r);return isFocusable(e,s)?s:void 0}).filter(notNullish)}function buildFocusableOptionsFromCategorizedOptions(e){return e.reduce(function(e,t){return"group"===t.type?e.push.apply(e,_toConsumableArray(t.options.map(function(e){return e.data}))):e.push(t.data),e},[])}function buildFocusableOptionsWithIds(e,t){return e.reduce(function(e,n){return"group"===n.type?e.push.apply(e,_toConsumableArray(n.options.map(function(e){return{data:e.data,id:"".concat(t,"-").concat(n.index,"-").concat(e.index)}}))):e.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),e},[])}function buildFocusableOptions(e,t){return buildFocusableOptionsFromCategorizedOptions(buildCategorizedOptions(e,t))}function isFocusable(e,t){var n=e.inputValue,r=void 0===n?"":n,i=t.data,s=t.isSelected,a=t.label,o=t.value;return(!shouldHideSelectedOptions(e)||!s)&&_filterOption(e,{label:a,value:o,data:i},r)}function getNextFocusedValue(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}function getNextFocusedOption(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}var getFocusedOptionId=function(e,t){var n;return(null===(n=e.find(function(e){return e.data===t}))||void 0===n?void 0:n.id)||null},getOptionLabel2=function(e,t){return e.getOptionLabel(t)},getOptionValue2=function(e,t){return e.getOptionValue(t)};function _isOptionDisabled(e,t,n){return"function"==typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function _isOptionSelected(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"==typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=getOptionValue2(e,t);return n.some(function(t){return getOptionValue2(e,t)===r})}function _filterOption(e,t,n){return!e.filterOption||e.filterOption(t,n)}var shouldHideSelectedOptions=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},instanceId=1,Select=function(e){_inherits(n,reactExports.Component);var t=_createSuper(n);function n(e){var r;if(_classCallCheck(this,n),(r=t.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},r.blockOptionHover=!1,r.isComposing=!1,r.commonProps=void 0,r.initialTouchX=0,r.initialTouchY=0,r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.controlRef=null,r.getControlRef=function(e){r.controlRef=e},r.focusedOptionRef=null,r.getFocusedOptionRef=function(e){r.focusedOptionRef=e},r.menuListRef=null,r.getMenuListRef=function(e){r.menuListRef=e},r.inputRef=null,r.getInputRef=function(e){r.inputRef=e},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(e,t){var n=r.props,i=n.onChange,s=n.name;t.name=s,r.ariaOnChange(e,t),i(e,t)},r.setValue=function(e,t,n){var i=r.props,s=i.closeMenuOnSelect,a=i.isMulti,o=i.inputValue;r.onInputChange("",{action:"set-value",prevInputValue:o}),s&&(r.setState({inputIsHiddenAfterUpdate:!a}),r.onMenuClose()),r.setState({clearFocusValueOnUpdate:!0}),r.onChange(e,{action:t,option:n})},r.selectOption=function(e){var t=r.props,n=t.blurInputOnSelect,i=t.isMulti,s=t.name,a=r.state.selectValue,o=i&&r.isOptionSelected(e,a),l=r.isOptionDisabled(e,a);if(o){var c=r.getOptionValue(e);r.setValue(multiValueAsValue(a.filter(function(e){return r.getOptionValue(e)!==c})),"deselect-option",e)}else{if(l)return void r.ariaOnChange(singleValueAsValue(e),{action:"select-option",option:e,name:s});i?r.setValue(multiValueAsValue([].concat(_toConsumableArray(a),[e])),"select-option",e):r.setValue(singleValueAsValue(e),"select-option")}n&&r.blurInput()},r.removeValue=function(e){var t=r.props.isMulti,n=r.state.selectValue,i=r.getOptionValue(e),s=n.filter(function(e){return r.getOptionValue(e)!==i}),a=valueTernary(t,s,s[0]||null);r.onChange(a,{action:"remove-value",removedValue:e}),r.focusInput()},r.clearValue=function(){var e=r.state.selectValue;r.onChange(valueTernary(r.props.isMulti,[],null),{action:"clear",removedValues:e})},r.popValue=function(){var e=r.props.isMulti,t=r.state.selectValue,n=t[t.length-1],i=t.slice(0,t.length-1),s=valueTernary(e,i,i[0]||null);n&&r.onChange(s,{action:"pop-value",removedValue:n})},r.getFocusedOptionId=function(e){return getFocusedOptionId(r.state.focusableOptionsWithIds,e)},r.getFocusableOptionsWithIds=function(){return buildFocusableOptionsWithIds(buildCategorizedOptions(r.props,r.state.selectValue),r.getElementId("option"))},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return classNames.apply(void 0,[r.props.classNamePrefix].concat(t))},r.getOptionLabel=function(e){return getOptionLabel2(r.props,e)},r.getOptionValue=function(e){return getOptionValue2(r.props,e)},r.getStyles=function(e,t){var n=r.props.unstyled,i=defaultStyles[e](t,n);i.boxSizing="border-box";var s=r.props.styles[e];return s?s(i,t):i},r.getClassNames=function(e,t){var n,i;return null===(n=(i=r.props.classNames)[e])||void 0===n?void 0:n.call(i,t)},r.getElementId=function(e){return"".concat(r.state.instancePrefix,"-").concat(e)},r.getComponents=function(){return defaultComponents(r.props)},r.buildCategorizedOptions=function(){return buildCategorizedOptions(r.props,r.state.selectValue)},r.getCategorizedOptions=function(){return r.props.menuIsOpen?r.buildCategorizedOptions():[]},r.buildFocusableOptions=function(){return buildFocusableOptionsFromCategorizedOptions(r.buildCategorizedOptions())},r.getFocusableOptions=function(){return r.props.menuIsOpen?r.buildFocusableOptions():[]},r.ariaOnChange=function(e,t){r.setState({ariaSelection:_objectSpread2({value:e},t)})},r.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(e){r.blockOptionHover=!1},r.onControlMouseDown=function(e){if(!e.defaultPrevented){var t=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&r.onMenuClose():t&&r.openMenu("first"):(t&&(r.openAfterFocus=!0),r.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},r.onDropdownIndicatorMouseDown=function(e){if(!(e&&"mousedown"===e.type&&0!==e.button||r.props.isDisabled)){var t=r.props,n=t.isMulti,i=t.menuIsOpen;r.focusInput(),i?(r.setState({inputIsHiddenAfterUpdate:!n}),r.onMenuClose()):r.openMenu("first"),e.preventDefault()}},r.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(r.clearValue(),e.preventDefault(),r.openAfterFocus=!1,"touchend"===e.type?r.focusInput():setTimeout(function(){return r.focusInput()}))},r.onScroll=function(e){"boolean"==typeof r.props.closeMenuOnScroll?e.target instanceof HTMLElement&&isDocumentElement(e.target)&&r.props.onMenuClose():"function"==typeof r.props.closeMenuOnScroll&&r.props.closeMenuOnScroll(e)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(e){var t=e.touches,n=t&&t.item(0);n&&(r.initialTouchX=n.clientX,r.initialTouchY=n.clientY,r.userIsDragging=!1)},r.onTouchMove=function(e){var t=e.touches,n=t&&t.item(0);if(n){var i=Math.abs(n.clientX-r.initialTouchX),s=Math.abs(n.clientY-r.initialTouchY);r.userIsDragging=i>5||s>5}},r.onTouchEnd=function(e){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(e.target)&&r.menuListRef&&!r.menuListRef.contains(e.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(e){r.userIsDragging||r.onControlMouseDown(e)},r.onClearIndicatorTouchEnd=function(e){r.userIsDragging||r.onClearIndicatorMouseDown(e)},r.onDropdownIndicatorTouchEnd=function(e){r.userIsDragging||r.onDropdownIndicatorMouseDown(e)},r.handleInputChange=function(e){var t=r.props.inputValue,n=e.currentTarget.value;r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange(n,{action:"input-change",prevInputValue:t}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(e){r.props.onFocus&&r.props.onFocus(e),r.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(e){var t=r.props.inputValue;r.menuListRef&&r.menuListRef.contains(document.activeElement)?r.inputRef.focus():(r.props.onBlur&&r.props.onBlur(e),r.onInputChange("",{action:"input-blur",prevInputValue:t}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1}))},r.onOptionHover=function(e){if(!r.blockOptionHover&&r.state.focusedOption!==e){var t=r.getFocusableOptions().indexOf(e);r.setState({focusedOption:e,focusedOptionId:t>-1?r.getFocusedOptionId(e):null})}},r.shouldHideSelectedOptions=function(){return shouldHideSelectedOptions(r.props)},r.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),r.focus()},r.onKeyDown=function(e){var t=r.props,n=t.isMulti,i=t.backspaceRemovesValue,s=t.escapeClearsValue,a=t.inputValue,o=t.isClearable,l=t.isDisabled,c=t.menuIsOpen,u=t.onKeyDown,d=t.tabSelectsValue,h=t.openMenuOnFocus,p=r.state,m=p.focusedOption,f=p.focusedValue,g=p.selectValue;if(!(l||"function"==typeof u&&(u(e),e.defaultPrevented))){switch(r.blockOptionHover=!0,e.key){case"ArrowLeft":if(!n||a)return;r.focusValue("previous");break;case"ArrowRight":if(!n||a)return;r.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(f)r.removeValue(f);else{if(!i)return;n?r.popValue():o&&r.clearValue()}break;case"Tab":if(r.isComposing)return;if(e.shiftKey||!c||!d||!m||h&&r.isOptionSelected(m,g))return;r.selectOption(m);break;case"Enter":if(229===e.keyCode)break;if(c){if(!m)return;if(r.isComposing)return;r.selectOption(m);break}return;case"Escape":c?(r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange("",{action:"menu-close",prevInputValue:a}),r.onMenuClose()):o&&s&&r.clearValue();break;case" ":if(a)return;if(!c){r.openMenu("first");break}if(!m)return;r.selectOption(m);break;case"ArrowUp":c?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":c?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!c)return;r.focusOption("pageup");break;case"PageDown":if(!c)return;r.focusOption("pagedown");break;case"Home":if(!c)return;r.focusOption("first");break;case"End":if(!c)return;r.focusOption("last");break;default:return}e.preventDefault()}},r.state.instancePrefix="react-select-"+(r.props.instanceId||++instanceId),r.state.selectValue=cleanValue(e.value),e.menuIsOpen&&r.state.selectValue.length){var i=r.getFocusableOptionsWithIds(),s=r.buildFocusableOptions(),a=s.indexOf(r.state.selectValue[0]);r.state.focusableOptionsWithIds=i,r.state.focusedOption=s[a],r.state.focusedOptionId=getFocusedOptionId(i,s[a])}return r}return _createClass(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&scrollIntoView(this.menuListRef,this.focusedOptionRef),isAppleDevice()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,i=this.state.isFocused;(i&&!n&&e.isDisabled||i&&r&&!e.menuIsOpen)&&this.focusInput(),i&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(scrollIntoView(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,i=n.isFocused,s=this.buildFocusableOptions(),a="first"===e?0:s.length-1;if(!this.props.isMulti){var o=s.indexOf(r[0]);o>-1&&(a=o)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:s[a],focusedOptionId:this.getFocusedOptionId(s[a])},function(){return t.onMenuOpen()})}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=n.indexOf(r);r||(i=-1);var s=n.length-1,a=-1;if(n.length){switch(e){case"previous":a=0===i?0:-1===i?s:i-1;break;case"next":i>-1&&i<s&&(a=i+1)}this.setState({inputIsHidden:-1!==a,focusedValue:n[a]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var i=0,s=r.indexOf(n);n||(s=-1),"up"===e?i=s>0?s-1:r.length-1:"down"===e?i=(s+1)%r.length:"pageup"===e?(i=s-t)<0&&(i=0):"pagedown"===e?(i=s+t)>r.length-1&&(i=r.length-1):"last"===e&&(i=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[i],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[i])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(defaultTheme):_objectSpread2(_objectSpread2({},defaultTheme),this.props.theme):defaultTheme}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,i=this.getValue,s=this.selectOption,a=this.setValue,o=this.props,l=o.isMulti,c=o.isRtl,u=o.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:i,hasValue:this.hasValue(),isMulti:l,isRtl:c,options:u,selectOption:s,selectProps:o,setValue:a,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return _isOptionDisabled(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return _isOptionSelected(this.props,e,t)}},{key:"filterOption",value:function(e,t){return _filterOption(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"==typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,t=e.isDisabled,n=e.isSearchable,r=e.inputId,i=e.inputValue,s=e.tabIndex,a=e.form,o=e.menuIsOpen,l=e.required,c=this.getComponents().Input,u=this.state,d=u.inputIsHidden,h=u.ariaSelection,p=this.commonProps,m=r||this.getElementId("input"),f=_objectSpread2(_objectSpread2(_objectSpread2({"aria-autocomplete":"list","aria-expanded":o,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":l,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},o&&{"aria-controls":this.getElementId("listbox")}),!n&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null==h?void 0:h.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return n?reactExports.createElement(c,_extends$2({},p,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:m,innerRef:this.getInputRef,isDisabled:t,isHidden:d,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:s,form:a,type:"text",value:i},f)):reactExports.createElement(DummyInput,_extends$2({id:m,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:noop,onFocus:this.onInputFocus,disabled:t,tabIndex:s,inputMode:"none",form:a,value:""},f))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,t=this.getComponents(),n=t.MultiValue,r=t.MultiValueContainer,i=t.MultiValueLabel,s=t.MultiValueRemove,a=t.SingleValue,o=t.Placeholder,l=this.commonProps,c=this.props,u=c.controlShouldRenderValue,d=c.isDisabled,h=c.isMulti,p=c.inputValue,m=c.placeholder,f=this.state,g=f.selectValue,x=f.focusedValue,v=f.isFocused;if(!this.hasValue()||!u)return p?null:reactExports.createElement(o,_extends$2({},l,{key:"placeholder",isDisabled:d,isFocused:v,innerProps:{id:this.getElementId("placeholder")}}),m);if(h)return g.map(function(t,a){var o=t===x,c="".concat(e.getOptionLabel(t),"-").concat(e.getOptionValue(t));return reactExports.createElement(n,_extends$2({},l,{components:{Container:r,Label:i,Remove:s},isFocused:o,isDisabled:d,key:c,index:a,removeProps:{onClick:function(){return e.removeValue(t)},onTouchEnd:function(){return e.removeValue(t)},onMouseDown:function(e){e.preventDefault()}},data:t}),e.formatOptionLabel(t,"value"))});if(p)return null;var y=g[0];return reactExports.createElement(a,_extends$2({},l,{data:y,isDisabled:d}),this.formatOptionLabel(y,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,t=this.commonProps,n=this.props,r=n.isDisabled,i=n.isLoading,s=this.state.isFocused;if(!this.isClearable()||!e||r||!this.hasValue()||i)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return reactExports.createElement(e,_extends$2({},t,{innerProps:a,isFocused:s}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,t=this.commonProps,n=this.props,r=n.isDisabled,i=n.isLoading,s=this.state.isFocused;if(!e||!i)return null;return reactExports.createElement(e,_extends$2({},t,{innerProps:{"aria-hidden":"true"},isDisabled:r,isFocused:s}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),t=e.DropdownIndicator,n=e.IndicatorSeparator;if(!t||!n)return null;var r=this.commonProps,i=this.props.isDisabled,s=this.state.isFocused;return reactExports.createElement(n,_extends$2({},r,{isDisabled:i,isFocused:s}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var t=this.commonProps,n=this.props.isDisabled,r=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return reactExports.createElement(e,_extends$2({},t,{innerProps:i,isDisabled:n,isFocused:r}))}},{key:"renderMenu",value:function(){var e=this,t=this.getComponents(),n=t.Group,r=t.GroupHeading,i=t.Menu,s=t.MenuList,a=t.MenuPortal,o=t.LoadingMessage,l=t.NoOptionsMessage,c=t.Option,u=this.commonProps,d=this.state.focusedOption,h=this.props,p=h.captureMenuScroll,m=h.inputValue,f=h.isLoading,g=h.loadingMessage,x=h.minMenuHeight,v=h.maxMenuHeight,y=h.menuIsOpen,_=h.menuPlacement,E=h.menuPosition,b=h.menuPortalTarget,C=h.menuShouldBlockScroll,S=h.menuShouldScrollIntoView,T=h.noOptionsMessage,R=h.onMenuScrollToTop,j=h.onMenuScrollToBottom;if(!y)return null;var w,A=function(t,n){var r=t.type,i=t.data,s=t.isDisabled,a=t.isSelected,o=t.label,l=t.value,h=d===i,p=s?void 0:function(){return e.onOptionHover(i)},m=s?void 0:function(){return e.selectOption(i)},f="".concat(e.getElementId("option"),"-").concat(n),g={id:f,onClick:m,onMouseMove:p,onMouseOver:p,tabIndex:-1,role:"option","aria-selected":e.state.isAppleDevice?void 0:a};return reactExports.createElement(c,_extends$2({},u,{innerProps:g,data:i,isDisabled:s,isSelected:a,key:f,label:o,type:r,value:l,isFocused:h,innerRef:h?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(t.data,"menu"))};if(this.hasOptions())w=this.getCategorizedOptions().map(function(t){if("group"===t.type){var i=t.data,s=t.options,a=t.index,o="".concat(e.getElementId("group"),"-").concat(a),l="".concat(o,"-heading");return reactExports.createElement(n,_extends$2({},u,{key:o,data:i,options:s,Heading:r,headingProps:{id:l,data:t.data},label:e.formatGroupLabel(t.data)}),t.options.map(function(e){return A(e,"".concat(a,"-").concat(e.index))}))}if("option"===t.type)return A(t,"".concat(t.index))});else if(f){var I=g({inputValue:m});if(null===I)return null;w=reactExports.createElement(o,u,I)}else{var k=T({inputValue:m});if(null===k)return null;w=reactExports.createElement(l,u,k)}var M={minMenuHeight:x,maxMenuHeight:v,menuPlacement:_,menuPosition:E,menuShouldScrollIntoView:S},P=reactExports.createElement(MenuPlacer,_extends$2({},u,M),function(t){var n=t.ref,r=t.placerProps,a=r.placement,o=r.maxHeight;return reactExports.createElement(i,_extends$2({},u,M,{innerRef:n,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:f,placement:a}),reactExports.createElement(ScrollManager,{captureEnabled:p,onTopArrive:R,onBottomArrive:j,lockEnabled:C},function(t){return reactExports.createElement(s,_extends$2({},u,{innerRef:function(n){e.getMenuListRef(n),t(n)},innerProps:{role:"listbox","aria-multiselectable":u.isMulti,id:e.getElementId("listbox")},isLoading:f,maxHeight:o,focusedOption:d}),w)}))});return b||"fixed"===E?reactExports.createElement(a,_extends$2({},u,{appendTo:b,controlElement:this.controlRef,menuPlacement:_,menuPosition:E}),P):P}},{key:"renderFormField",value:function(){var e=this,t=this.props,n=t.delimiter,r=t.isDisabled,i=t.isMulti,s=t.name,a=t.required,o=this.state.selectValue;if(a&&!this.hasValue()&&!r)return reactExports.createElement(RequiredInput$1,{name:s,onFocus:this.onValueInputFocus});if(s&&!r){if(i){if(n){var l=o.map(function(t){return e.getOptionValue(t)}).join(n);return reactExports.createElement("input",{name:s,type:"hidden",value:l})}var c=o.length>0?o.map(function(t,n){return reactExports.createElement("input",{key:"i-".concat(n),name:s,type:"hidden",value:e.getOptionValue(t)})}):reactExports.createElement("input",{name:s,type:"hidden",value:""});return reactExports.createElement("div",null,c)}var u=o[0]?this.getOptionValue(o[0]):"";return reactExports.createElement("input",{name:s,type:"hidden",value:u})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,t=this.state,n=t.ariaSelection,r=t.focusedOption,i=t.focusedValue,s=t.isFocused,a=t.selectValue,o=this.getFocusableOptions();return reactExports.createElement(LiveRegion$1,_extends$2({},e,{id:this.getElementId("live-region"),ariaSelection:n,focusedOption:r,focusedValue:i,isFocused:s,selectValue:a,focusableOptions:o,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var e=this.getComponents(),t=e.Control,n=e.IndicatorsContainer,r=e.SelectContainer,i=e.ValueContainer,s=this.props,a=s.className,o=s.id,l=s.isDisabled,c=s.menuIsOpen,u=this.state.isFocused,d=this.commonProps=this.getCommonProps();return reactExports.createElement(r,_extends$2({},d,{className:a,innerProps:{id:o,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:u}),this.renderLiveRegion(),reactExports.createElement(t,_extends$2({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:u,menuIsOpen:c}),reactExports.createElement(i,_extends$2({},d,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),reactExports.createElement(n,_extends$2({},d,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,s=t.ariaSelection,a=t.isFocused,o=t.prevWasFocused,l=t.instancePrefix,c=e.options,u=e.value,d=e.menuIsOpen,h=e.inputValue,p=e.isMulti,m=cleanValue(u),f={};if(n&&(u!==n.value||c!==n.options||d!==n.menuIsOpen||h!==n.inputValue)){var g=d?buildFocusableOptions(e,m):[],x=d?buildFocusableOptionsWithIds(buildCategorizedOptions(e,m),"".concat(l,"-option")):[],v=r?getNextFocusedValue(t,m):null,y=getNextFocusedOption(t,g);f={selectValue:m,focusedOption:y,focusedOptionId:getFocusedOptionId(x,y),focusableOptionsWithIds:x,focusedValue:v,clearFocusValueOnUpdate:!1}}var _=null!=i&&e!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},E=s,b=a&&o;return a&&!b&&(E={value:valueTernary(p,m,m[0]||null),options:m,action:"initial-input-focus"},b=!o),"initial-input-focus"===(null==s?void 0:s.action)&&(E=null),_objectSpread2(_objectSpread2(_objectSpread2({},f),_),{},{prevProps:e,ariaSelection:E,prevWasFocused:b})}}]),n}();Select.defaultProps=defaultProps;var StateManagedSelect=reactExports.forwardRef(function(e,t){var n=useStateManager(e);return reactExports.createElement(Select,_extends$2({ref:t},n))}),StateManagedSelect$1=StateManagedSelect;const AdminEvents=()=>{const[e,t]=reactExports.useState([]),[n,r]=reactExports.useState([]),[i,s]=reactExports.useState(!0),[a,o]=reactExports.useState(!1),[l,c]=reactExports.useState(null),[u,d]=reactExports.useState({title:"",description:"",startDate:"",endDate:"",startTime:"",endTime:"",linkedChannel:"",imageUrl:""}),h=useTheme(),p={control:(e,t)=>({...e,background:"dark"===h.palette.mode?"rgba(255,255,255,0.06)":"#fff",color:h.palette.text.primary,borderColor:t.isFocused?h.palette.primary.main:"dark"===h.palette.mode?"rgba(255,255,255,0.18)":"rgba(0,0,0,0.12)",boxShadow:t.isFocused?`0 0 0 2px ${h.palette.primary.main}22`:"none",borderRadius:12,minHeight:44,"&:hover":{borderColor:h.palette.primary.main}}),menu:e=>({...e,background:"dark"===h.palette.mode?"#23272f":"#fff",color:h.palette.text.primary,borderRadius:12,boxShadow:"dark"===h.palette.mode?"0 8px 32px rgba(0,0,0,0.7)":"0 8px 32px rgba(0,188,212,0.08)",zIndex:1302}),option:(e,t)=>({...e,background:t.isSelected?h.palette.primary.main:t.isFocused?"dark"===h.palette.mode?"rgba(0,188,212,0.12)":"rgba(0,188,212,0.08)":"transparent",color:t.isSelected?h.palette.getContrastText(h.palette.primary.main):h.palette.text.primary,cursor:"pointer",borderRadius:8,margin:"2px 4px"}),singleValue:e=>({...e,color:h.palette.text.primary}),input:e=>({...e,color:h.palette.text.primary}),placeholder:e=>({...e,color:h.palette.text.secondary}),dropdownIndicator:e=>({...e,color:h.palette.text.secondary}),clearIndicator:e=>({...e,color:h.palette.text.secondary}),indicatorSeparator:e=>({...e,background:h.palette.divider})},[m,f]=reactExports.useState(""),[g,x]=reactExports.useState("");reactExports.useEffect(()=>{v()},[]);const v=async()=>{var e,n;try{const[i,s]=await Promise.all([eventsAPI.getAll(),channelsAPI.getAll()]);console.log("AdminEvents API responses:",{events:{data:i.data,isArray:Array.isArray(i.data),type:typeof i.data,length:null==(e=i.data)?void 0:e.length},channels:{data:s.data,isArray:Array.isArray(s.data),type:typeof s.data,length:null==(n=s.data)?void 0:n.length}}),t(Array.isArray(i.data)?i.data:[]),r(Array.isArray(s.data)?s.data:[])}catch(i){console.error("Error fetching data:",i),f("Failed to fetch data"),t([]),r([])}finally{s(!1)}},y=(e=null)=>{var t;if(e){c(e);const n=e.startTime||(e.startDate.includes("T")?e.startDate.split("T")[1].substring(0,5):""),r=e.endTime||(e.endDate.includes("T")?e.endDate.split("T")[1].substring(0,5):"");d({title:e.title,description:e.description,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],startTime:n,endTime:r,linkedChannel:(null==(t=e.linkedChannel)?void 0:t._id)||"",imageUrl:e.imageUrl})}else c(null),d({title:"",description:"",startDate:"",endDate:"",startTime:"",endTime:"",linkedChannel:"",imageUrl:""});o(!0)},_=()=>{o(!1),c(null),d({title:"",description:"",startDate:"",endDate:"",startTime:"",endTime:"",linkedChannel:"",imageUrl:""}),f("")},E=async e=>{var t,n;e.preventDefault(),f(""),x("");try{const e=u.startTime?`${u.startDate}T${u.startTime}:00`:`${u.startDate}T00:00:00`,t=u.endTime?`${u.endDate}T${u.endTime}:00`:`${u.endDate}T23:59:59`,n={...u,startDate:new Date(e).toISOString(),endDate:new Date(t).toISOString(),startTime:u.startTime,endTime:u.endTime};l?(await eventsAPI.update(l._id,n),x("Event updated successfully")):(await eventsAPI.create(n),x("Event created successfully")),v(),_()}catch(r){f((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||"Operation failed")}};return i?jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:[...Array(6)].map((e,t)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"60%"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"40%"})]})})},t))}):Array.isArray(e)&&Array.isArray(n)?jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",children:"Manage Events"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",startIcon:jsxRuntimeExports.jsx(Add,{}),onClick:()=>y(),children:"Add Event"})]}),m&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},onClose:()=>f(""),children:m}),g&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},onClose:()=>x(""),children:g}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:Array.isArray(e)&&e.map(e=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:e.title}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",paragraph:!0,children:e.description}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:[jsxRuntimeExports.jsx("strong",{children:"Start:"})," ",new Date(e.startDate).toLocaleDateString(),e.startTime&&` at ${e.startTime}`]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[jsxRuntimeExports.jsx("strong",{children:"End:"})," ",new Date(e.endDate).toLocaleDateString(),e.endTime&&` at ${e.endTime}`]}),e.linkedChannel&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"primary",children:["Channel: ",e.linkedChannel.name]}),e.imageUrl&&jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:" Image attached"})]}),jsxRuntimeExports.jsxs(CardActions,{children:[jsxRuntimeExports.jsx(Button$2,{size:"small",startIcon:jsxRuntimeExports.jsx(Edit,{}),onClick:()=>y(e),children:"Edit"}),jsxRuntimeExports.jsx(Button$2,{size:"small",color:"error",startIcon:jsxRuntimeExports.jsx(DeleteIcon,{}),onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this event?"))try{await eventsAPI.delete(e),x("Event deleted successfully"),v()}catch(t){f("Failed to delete event")}})(e._id),children:"Delete"})]})]})},e._id))}),jsxRuntimeExports.jsxs(Dialog,{open:a,onClose:_,maxWidth:"sm",fullWidth:!0,children:[jsxRuntimeExports.jsx(DialogTitle,{children:l?"Edit Event":"Add New Event"}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsxs(Box,{component:"form",onSubmit:E,sx:{mt:2},children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Event Title",name:"title",value:u.title,onChange:e=>d({...u,title:e.target.value}),required:!0,sx:{mb:2}}),jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Description",name:"description",value:u.description,onChange:e=>d({...u,description:e.target.value}),multiline:!0,rows:3,sx:{mb:2}}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,sx:{mb:2},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Start Date",name:"startDate",type:"date",value:u.startDate,onChange:e=>d({...u,startDate:e.target.value}),required:!0,InputLabelProps:{shrink:!0}})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"End Date",name:"endDate",type:"date",value:u.endDate,onChange:e=>d({...u,endDate:e.target.value}),required:!0,InputLabelProps:{shrink:!0}})})]}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,sx:{mb:2},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Start Time",name:"startTime",type:"time",value:u.startTime,onChange:e=>d({...u,startTime:e.target.value}),required:!0,InputLabelProps:{shrink:!0}})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"End Time",name:"endTime",type:"time",value:u.endTime,onChange:e=>d({...u,endTime:e.target.value}),required:!0,InputLabelProps:{shrink:!0}})})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:16},children:[jsxRuntimeExports.jsx("label",{style:{marginBottom:8,display:"block",fontWeight:500,color:h.palette.text.primary},children:"Linked Channel"}),jsxRuntimeExports.jsx(StateManagedSelect$1,{name:"linkedChannel",options:Array.isArray(n)?n.map(e=>({value:e._id,label:e.name})):[],value:Array.isArray(n)&&n.find(e=>e._id===u.linkedChannel)?{value:u.linkedChannel,label:(n.find(e=>e._id===u.linkedChannel)||{}).name}:null,onChange:e=>d({...u,linkedChannel:e?e.value:""}),isClearable:!0,placeholder:"Select or search channel...",styles:{...p,menuPortal:e=>({...e,zIndex:1402})},menuPortalTarget:document.body,menuPosition:"fixed"})]}),jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Image URL",name:"imageUrl",value:u.imageUrl,onChange:e=>d({...u,imageUrl:e.target.value}),sx:{mb:2}}),jsxRuntimeExports.jsxs(Button$2,{variant:"outlined",component:"label",fullWidth:!0,children:["Upload Image",jsxRuntimeExports.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)try{s(!0);const e=await uploadImageToImgBB(t,{uploadType:"event"});e.success&&(d({...u,imageUrl:e.data.url}),console.log("Event image uploaded to ImgBB successfully"))}catch(n){console.error("Error uploading event image:",n),f(`Upload failed: ${n.message}`)}finally{s(!1)}}})]})]})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:_,children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{onClick:E,variant:"contained",children:l?"Update":"Create"})]})]})]}):(console.error("AdminEvents state validation failed:",{events:Array.isArray(e),channels:Array.isArray(n)}),Array.isArray(e)||t([]),Array.isArray(n)||r([]),jsxRuntimeExports.jsx(Box,{sx:{textAlign:"center",py:8},children:jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"error",gutterBottom:!0,children:"Error loading data. Please refresh the page."})}))},AdminSettings=()=>{const[e,t]=reactExports.useState(null),[n,r]=reactExports.useState(!0),[i,s]=reactExports.useState(!1),[a,o]=reactExports.useState(null),[l,c]=reactExports.useState({websiteName:"",websiteTitle:"",metaDescription:"",metaKeywords:[],metaTags:"",googleSearchConsoleKey:"",googleAnalyticsKey:"",allowDuplicateChannelImport:!1,websiteLogo:"",siteUrl:""}),[u,d]=reactExports.useState(null),[h,p]=reactExports.useState(""),[m,f]=reactExports.useState(""),g=async()=>{var e,n;try{r(!0),o(null);const e=(await settingsAPI.get()).data;t(e);const n={websiteName:e.websiteName||"",websiteTitle:e.websiteTitle||"",metaDescription:e.metaDescription||"",metaKeywords:e.metaKeywords||[],metaTags:e.metaTags||"",googleSearchConsoleKey:e.googleSearchConsoleKey||"",googleAnalyticsKey:e.googleAnalyticsKey||"",allowDuplicateChannelImport:e.allowDuplicateChannelImport||!1,websiteLogo:e.websiteLogo||"",siteUrl:e.siteUrl||""};c(n),u||d(n)}catch(err){console.error("Error fetching settings:",err),o((null==(n=null==(e=err.response)?void 0:e.data)?void 0:n.message)||"Error loading settings")}finally{r(!1)}};reactExports.useEffect(()=>{g()},[]);const x=e=>{const{name:t,value:n,type:r,checked:i}=e.target;c({...l,[t]:"checkbox"===r?i:n})},v=u&&JSON.stringify(u)!==JSON.stringify(l);return n?jsxRuntimeExports.jsxs(Container,{children:[jsxRuntimeExports.jsx(CircularProgress,{}),jsxRuntimeExports.jsx(Typography,{children:"Loading settings..."})]}):a?jsxRuntimeExports.jsxs(Container,{children:[jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},children:a}),jsxRuntimeExports.jsx(Button$2,{onClick:g,variant:"outlined",children:"Retry"})]}):jsxRuntimeExports.jsx(Container,{children:jsxRuntimeExports.jsxs(Paper,{sx:{p:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",gutterBottom:!0,children:"Website Settings"}),jsxRuntimeExports.jsx("form",{onSubmit:async e=>{var n,r;e.preventDefault(),p(""),f("");try{s(!0);const e=await settingsAPI.update(l);t(e.data),p("Settings saved successfully"),d({...l})}catch(err){console.error("Error saving settings:",err),f((null==(r=null==(n=null==err?void 0:err.response)?void 0:n.data)?void 0:r.message)||"Failed to save settings")}finally{s(!1)}},children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:3,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Website Name",name:"websiteName",value:l.websiteName,onChange:x})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Website Title",name:"websiteTitle",value:l.websiteTitle,onChange:x})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Meta Description",name:"metaDescription",value:l.metaDescription,onChange:x,multiline:!0,rows:3})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Meta Keywords (comma-separated)",name:"metaKeywords",value:l.metaKeywords.join(", "),onChange:e=>{c({...l,metaKeywords:e.target.value.split(",").map(e=>e.trim())})}})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Meta Tags (e.g., <meta.../>)",name:"metaTags",value:l.metaTags,onChange:x,multiline:!0,rows:3})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Google Search Console Key",name:"googleSearchConsoleKey",value:l.googleSearchConsoleKey,onChange:x})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Google Analytics Key",name:"googleAnalyticsKey",value:l.googleAnalyticsKey,onChange:x})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Site Base URL (https://example.com)",name:"siteUrl",value:l.siteUrl,onChange:x,helperText:"Used for canonical URLs & absolute Open Graph links"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Website Logo URL",name:"websiteLogo",value:l.websiteLogo,onChange:x})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Switch,{checked:l.allowDuplicateChannelImport,onChange:x,name:"allowDuplicateChannelImport"}),label:"Allow Duplicate Channel Import/Export"})}),h&&jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(Alert,{severity:"success",onClose:()=>p(""),children:h})}),m&&jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(Alert,{severity:"error",onClose:()=>f(""),children:m})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(Button$2,{type:"submit",variant:"contained",color:"primary",disabled:i||!v,children:i?"Saving...":v?"Save Settings":"No Changes"})})]})})]})})},AdminStats=()=>{useTheme();const[e,t]=reactExports.useState(null),[n,r]=reactExports.useState(!0),[i,s]=reactExports.useState(!1),[a,o]=reactExports.useState(!1),[l,c]=reactExports.useState(""),u=async()=>{var e,n,i,s,a,o;try{const r=await channelsAPI.getOverallStats();console.log("AdminStats API response:",{data:r.data,popularCategories:{data:null==(e=r.data)?void 0:e.popularCategories,isArray:Array.isArray(null==(n=r.data)?void 0:n.popularCategories),type:typeof(null==(i=r.data)?void 0:i.popularCategories)},mostViewedChannels:{data:null==(s=r.data)?void 0:s.mostViewedChannels,isArray:Array.isArray(null==(a=r.data)?void 0:a.mostViewedChannels),type:typeof(null==(o=r.data)?void 0:o.mostViewedChannels)}});const l=r.data||{};t({...l,popularCategories:Array.isArray(l.popularCategories)?l.popularCategories:[],mostViewedChannels:Array.isArray(l.mostViewedChannels)?l.mostViewedChannels:[],totalViews:l.totalViews||0,totalChannels:l.totalChannels||0,totalCategories:l.totalCategories||0})}catch(l){console.error("Error fetching stats:",l),c("Failed to load statistics"),t({popularCategories:[],mostViewedChannels:[],totalViews:0,totalChannels:0,totalCategories:0})}finally{r(!1)}};reactExports.useEffect(()=>{u()},[]);const d=e=>{if(!e)return"";if(e.startsWith("http"))return e;return`https://ipapi.bdstream.site${e}`};return n?jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{py:3},children:[jsxRuntimeExports.jsx(LinearProgress,{}),jsxRuntimeExports.jsx(Typography,{variant:"h6",sx:{mt:2},children:"Loading statistics..."})]}):e?Array.isArray(e.popularCategories)&&Array.isArray(e.mostViewedChannels)?jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{py:3},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",fontWeight:"bold",children:" Statistics Dashboard"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",color:"warning",startIcon:jsxRuntimeExports.jsx(Refresh,{}),onClick:()=>s(!0),children:"Reset Statistics"})]}),l&&jsxRuntimeExports.jsx(Alert,{severity:l.includes("Failed")?"error":"success",sx:{mb:3},children:l}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:3,sx:{mb:4},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsx(Card,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white","&:hover":{transform:"translateY(-4px)",transition:"transform 0.3s ease"}},children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",mb:2},children:[jsxRuntimeExports.jsx(PlayArrow,{sx:{fontSize:40,mr:2}}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",fontWeight:"bold",children:e.totalChannels}),jsxRuntimeExports.jsx(Typography,{variant:"body2",children:"Total Channels"})]})]})})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsx(Card,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white","&:hover":{transform:"translateY(-4px)",transition:"transform 0.3s ease"}},children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",mb:2},children:[jsxRuntimeExports.jsx(ViewIcon,{sx:{fontSize:40,mr:2}}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",fontWeight:"bold",children:e.totalViews.toLocaleString()}),jsxRuntimeExports.jsx(Typography,{variant:"body2",children:"Total Views"})]})]})})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsx(Card,{sx:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white","&:hover":{transform:"translateY(-4px)",transition:"transform 0.3s ease"}},children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",mb:2},children:[jsxRuntimeExports.jsx(Category,{sx:{fontSize:40,mr:2}}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",fontWeight:"bold",children:e.popularCategories.length}),jsxRuntimeExports.jsx(Typography,{variant:"body2",children:"Active Categories"})]})]})})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsx(Card,{sx:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",color:"white","&:hover":{transform:"translateY(-4px)",transition:"transform 0.3s ease"}},children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",mb:2},children:[jsxRuntimeExports.jsx(TrendingUp,{sx:{fontSize:40,mr:2}}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",fontWeight:"bold",children:e.totalChannels>0?Math.round(e.totalViews/e.totalChannels):0}),jsxRuntimeExports.jsx(Typography,{variant:"body2",children:"Avg Views/Channel"})]})]})})})})]}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:3,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:6,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:" Popular Categories"}),jsxRuntimeExports.jsx(TableContainer,{children:jsxRuntimeExports.jsxs(Table,{size:"small",children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Category"}),jsxRuntimeExports.jsx(TableCell,{align:"right",children:"Channels"}),jsxRuntimeExports.jsx(TableCell,{align:"right",children:"Total Views"}),jsxRuntimeExports.jsx(TableCell,{align:"right",children:"Avg Views"})]})}),jsxRuntimeExports.jsx(TableBody,{children:Array.isArray(e.popularCategories)&&e.popularCategories.map((e,t)=>{var n;return jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:0===t?"rgba(255, 215, 0, 0.1)":"inherit"},children:[jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center"},children:[0===t&&jsxRuntimeExports.jsx(Star$1,{sx:{color:"gold",mr:1,fontSize:20}}),jsxRuntimeExports.jsx(Typography,{variant:"body2",fontWeight:0===t?"bold":"normal",children:(null==(n=e.categoryInfo)?void 0:n.name)||"Unknown"})]})}),jsxRuntimeExports.jsx(TableCell,{align:"right",children:e.channelCount}),jsxRuntimeExports.jsx(TableCell,{align:"right",children:e.totalViews.toLocaleString()}),jsxRuntimeExports.jsx(TableCell,{align:"right",children:Math.round(e.totalViews/e.channelCount).toLocaleString()})]},e._id)})})]})})]})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:6,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:" Most Viewed Channels"}),jsxRuntimeExports.jsx(Box,{sx:{maxHeight:400,overflow:"auto"},children:Array.isArray(e.mostViewedChannels)&&e.mostViewedChannels.map((e,t)=>{var n;return jsxRuntimeExports.jsxs(Paper,{sx:{p:2,mb:2,display:"flex",alignItems:"center",backgroundColor:0===t?"rgba(255, 215, 0, 0.1)":"inherit",border:0===t?"2px solid gold":"1px solid #e0e0e0"},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",flex:1},children:[jsxRuntimeExports.jsx(Avatar,{src:d(e.logoUrl),sx:{mr:2,width:50,height:50},onError:t=>{console.error("Failed to load channel logo in stats:",e.name,"URL:",d(e.logoUrl)),t.target.style.display="none"},children:e.name.charAt(0)}),jsxRuntimeExports.jsxs(Box,{sx:{flex:1},children:[jsxRuntimeExports.jsxs(Typography,{variant:"subtitle1",fontWeight:0===t?"bold":"normal",children:[t+1,". ",e.name]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:(null==(n=e.category)?void 0:n.name)||"Uncategorized"})]})]}),jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"right"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"primary",fontWeight:"bold",children:e.views.toLocaleString()}),jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",children:"views"})]})]},e._id)})})]})})})]}),jsxRuntimeExports.jsx(Card,{sx:{mt:3},children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:" View Distribution"}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:2,children:Array.isArray(e.popularCategories)&&e.popularCategories.map(t=>{var n;const r=e.totalViews>0?t.totalViews/e.totalViews*100:0;return jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",mb:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{minWidth:120},children:(null==(n=t.categoryInfo)?void 0:n.name)||"Unknown"}),jsxRuntimeExports.jsx(Box,{sx:{flex:1,mx:2},children:jsxRuntimeExports.jsx(LinearProgress,{variant:"determinate",value:r,sx:{height:8,borderRadius:4,backgroundColor:"rgba(0,0,0,0.1)","& .MuiLinearProgress-bar":{borderRadius:4}}})}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",sx:{minWidth:80},children:[r.toFixed(1),"%"]})]})},t._id)})})]})}),jsxRuntimeExports.jsxs(Dialog,{open:i,onClose:()=>s(!1),children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Reset Statistics"}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsx(Typography,{children:"Are you sure you want to reset all channel view statistics? This will set all view counts to 0 and cannot be undone."})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>s(!1),disabled:a,children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{onClick:async()=>{o(!0);try{await channelsAPI.resetStats(),c("Statistics reset successfully!"),await u(),s(!1)}catch(e){console.error("Error resetting stats:",e),c("Failed to reset statistics")}finally{o(!1)}},color:"warning",variant:"contained",disabled:a,children:a?"Resetting...":"Reset Statistics"})]})]})]}):(console.error("AdminStats state validation failed:",{popularCategories:Array.isArray(e.popularCategories),mostViewedChannels:Array.isArray(e.mostViewedChannels)}),Array.isArray(e.popularCategories)||t(e=>({...e,popularCategories:[]})),Array.isArray(e.mostViewedChannels)||t(e=>({...e,mostViewedChannels:[]})),jsxRuntimeExports.jsx(Container,{maxWidth:"xl",sx:{py:3},children:jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"error",children:"Error loading statistics. Please refresh the page."})})):jsxRuntimeExports.jsx(Container,{maxWidth:"xl",sx:{py:3},children:jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"error",children:"Failed to load statistics"})})},AdminPackages=()=>{const[e,t]=reactExports.useState([]),[n,r]=reactExports.useState([]),[i,s]=reactExports.useState([]),[a,o]=reactExports.useState([]),[l,c]=reactExports.useState(!0),[u,d]=reactExports.useState(!1),[h,p]=reactExports.useState(null),[m,f]=reactExports.useState(""),[g,x]=reactExports.useState(""),[v,y]=reactExports.useState({open:!1,packageId:null,stats:null}),[_,E]=reactExports.useState(!1),[b,C]=reactExports.useState({name:"",description:"",price:"",duration:"",durationUnit:"days",packageType:"basic",channels:[],categories:[],regions:[],features:[""],canUnlockWithAds:!1,requiredAdsToUnlock:1,adCooldownHours:24,adUnlockDuration:1,adUnlockDurationUnit:"days",priority:0,isActive:!0});reactExports.useEffect(()=>{S()},[]);const S=async()=>{var e,n;try{c(!0);const[e,n,i,a]=await Promise.all([packagesAPI.getAll({populate:"true"}),channelsAPI.getAll(),categoriesAPI.getAll(),regionsAPI.getAll()]);t(e.data),r(n.data),s(i.data),o(a.data)}catch(i){f((null==(n=null==(e=i.response)?void 0:e.data)?void 0:n.message)||i.message)}finally{c(!1)}},T=(e=null)=>{e?(p(e),C({name:e.name,description:e.description||"",price:e.price.toString(),duration:e.duration.toString(),durationUnit:e.durationUnit||"days",packageType:e.packageType,channels:e.channels.map(e=>e._id),categories:e.categories.map(e=>e._id),regions:e.regions.map(e=>e._id),features:e.features.length>0?e.features:[""],canUnlockWithAds:e.canUnlockWithAds,requiredAdsToUnlock:e.requiredAdsToUnlock,adCooldownHours:e.adCooldownHours,adUnlockDuration:e.adUnlockDuration,adUnlockDurationUnit:e.adUnlockDurationUnit||"days",priority:e.priority,isActive:e.isActive})):(p(null),C({name:"",description:"",price:"",duration:"",durationUnit:"days",packageType:"basic",channels:[],categories:[],regions:[],features:[""],canUnlockWithAds:!1,requiredAdsToUnlock:1,adCooldownHours:24,adUnlockDuration:1,adUnlockDurationUnit:"days",priority:0,isActive:!0})),d(!0)},R=()=>{d(!1),f(""),x("")};return l?jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",gutterBottom:!0,children:"Premium Packages"}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:[...Array(6)].map((e,t)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text",height:40}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",height:20}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",height:20})]})})},t))})]}):jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",fontWeight:"bold",children:"Premium Packages"}),jsxRuntimeExports.jsxs(Box,{display:"flex",gap:2,children:[jsxRuntimeExports.jsx(Button$2,{variant:"outlined",startIcon:jsxRuntimeExports.jsx(Settings$1,{}),onClick:async()=>{var e,t;if(window.confirm("Are you sure you want to cleanup all expired packages? This will mark them as expired and deactivate them."))try{E(!0),f(""),x("");const e=await userPackagesAPI.cleanupExpired();x(`Successfully cleaned up ${e.data.cleaned} expired packages`)}catch(n){f((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to cleanup expired packages")}finally{E(!1)}},disabled:_,color:"secondary",children:_?"Cleaning...":"Cleanup Expired"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",startIcon:jsxRuntimeExports.jsx(Add,{}),onClick:()=>T(),color:"primary",children:"Add Package"})]})]}),m&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},onClose:()=>f(""),children:m}),g&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},onClose:()=>x(""),children:g}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:e.map(e=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs(CardContent,{sx:{flexGrow:1},children:[jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",fontWeight:"bold",children:e.name}),jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(Chip,{label:e.packageType,color:"primary",size:"small",variant:"outlined"}),jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:()=>(async e=>{var t,n;try{await packagesAPI.toggle(e),x("Package status updated"),S()}catch(r){f((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||r.message)}})(e._id),color:e.isActive?"success":"error",children:e.isActive?jsxRuntimeExports.jsx(ViewIcon,{}):jsxRuntimeExports.jsx(VisibilityOff,{})})]})]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:e.description}),jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:2,my:2,children:[jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(AttachMoney,{fontSize:"small"}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",color:"primary",children:["",e.price]})]}),jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(Schedule,{fontSize:"small"}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",children:[e.duration," ",e.durationUnit||"days"]})]})]}),jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,mb:2,flexWrap:"wrap",children:[jsxRuntimeExports.jsx(Chip,{label:`${e.channels.length} Channels`,size:"small"}),jsxRuntimeExports.jsx(Chip,{label:`${e.categories.length} Categories`,size:"small"}),jsxRuntimeExports.jsx(Chip,{label:`${e.regions.length} Regions`,size:"small"})]}),e.canUnlockWithAds&&jsxRuntimeExports.jsx(Chip,{label:"Ad Unlock Available",color:"secondary",size:"small",sx:{mb:2}}),e.features.length>0&&jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",children:"Features:"}),e.features.slice(0,3).map((e,t)=>jsxRuntimeExports.jsxs(Typography,{variant:"body2",fontSize:"0.8rem",children:[" ",e]},t)),e.features.length>3&&jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"text.secondary",children:["+",e.features.length-3," more"]})]})]}),jsxRuntimeExports.jsxs(CardActions,{children:[jsxRuntimeExports.jsx(Button$2,{size:"small",startIcon:jsxRuntimeExports.jsx(Analytics,{}),onClick:()=>(async e=>{var t,n;try{const t=await packagesAPI.getStats(e);y({open:!0,packageId:e,stats:t.data})}catch(r){f((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||r.message)}})(e._id),color:"info",children:"Stats"}),jsxRuntimeExports.jsx(Button$2,{size:"small",startIcon:jsxRuntimeExports.jsx(Edit,{}),onClick:()=>T(e),color:"primary",children:"Edit"}),jsxRuntimeExports.jsx(Button$2,{size:"small",color:"error",startIcon:jsxRuntimeExports.jsx(DeleteIcon,{}),onClick:()=>(async e=>{var t,n;if(window.confirm("Are you sure you want to delete this package?"))try{await packagesAPI.delete(e),x("Package deleted successfully"),S()}catch(r){f((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||r.message)}})(e._id),children:"Delete"})]})]})},e._id))}),0===e.length&&jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",py:8},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No packages found"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Create your first premium package to get started."})]}),jsxRuntimeExports.jsxs(Dialog,{open:u,onClose:R,maxWidth:"md",fullWidth:!0,children:[jsxRuntimeExports.jsx(DialogTitle,{children:h?"Edit Package":"Add New Package"}),jsxRuntimeExports.jsxs("form",{onSubmit:async e=>{var t,n;e.preventDefault(),f(""),x("");try{const e={...b,price:parseFloat(b.price),duration:parseInt(b.duration),durationUnit:b.durationUnit,features:b.features.filter(e=>""!==e.trim()),requiredAdsToUnlock:parseInt(b.requiredAdsToUnlock),adCooldownHours:parseInt(b.adCooldownHours),adUnlockDuration:parseInt(b.adUnlockDuration),adUnlockDurationUnit:b.adUnlockDurationUnit,priority:parseInt(b.priority)};h?(await packagesAPI.update(h._id,e),x("Package updated successfully")):(await packagesAPI.create(e),x("Package created successfully")),S(),setTimeout(()=>d(!1),1500)}catch(r){f((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||r.message)}},children:[jsxRuntimeExports.jsxs(DialogContent,{children:[m&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},children:m}),g&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},children:g}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,children:[jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsxs(Typography,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:[jsxRuntimeExports.jsx(Settings$1,{sx:{mr:1,verticalAlign:"middle"}}),"Basic Information"]}),jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Package Name",value:b.name,onChange:e=>C({...b,name:e.target.value}),required:!0})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Package Type"}),jsxRuntimeExports.jsxs(Select$1,{value:b.packageType,onChange:e=>C({...b,packageType:e.target.value}),children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"basic",children:"Basic"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"standard",children:"Standard"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"premium",children:"Premium"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"vip",children:"VIP"})]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:3,value:b.description,onChange:e=>C({...b,description:e.target.value})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:4,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Price ()",type:"number",inputProps:{min:0,step:.01},value:b.price,onChange:e=>C({...b,price:e.target.value}),required:!0})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:2,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Duration",type:"number",inputProps:{min:1,max:"minutes"===b.durationUnit?1440:"hours"===b.durationUnit?168:365},value:b.duration,onChange:e=>C({...b,duration:e.target.value}),required:!0})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:2,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Unit"}),jsxRuntimeExports.jsxs(Select$1,{value:b.durationUnit,label:"Unit",onChange:e=>C({...b,durationUnit:e.target.value}),children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"minutes",children:"Minutes"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"hours",children:"Hours"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"days",children:"Days"})]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:4,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Priority",type:"number",inputProps:{min:0},value:b.priority,onChange:e=>C({...b,priority:e.target.value}),helperText:"Higher priority packages shown first"})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Content Access"}),jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:4,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Channels"}),jsxRuntimeExports.jsx(Select$1,{multiple:!0,value:b.channels,onChange:e=>C({...b,channels:e.target.value}),renderValue:e=>jsxRuntimeExports.jsx(Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>{const t=n.find(t=>t._id===e);return jsxRuntimeExports.jsx(Chip,{label:(null==t?void 0:t.name)||e,size:"small"},e)})}),children:n.map(e=>jsxRuntimeExports.jsxs(MenuItem$1,{value:e._id,children:[jsxRuntimeExports.jsx(Checkbox,{checked:b.channels.indexOf(e._id)>-1}),jsxRuntimeExports.jsx(ListItemText,{primary:`${e.name} (${e.channelNumber})`})]},e._id))})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:4,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Categories"}),jsxRuntimeExports.jsx(Select$1,{multiple:!0,value:b.categories,onChange:e=>C({...b,categories:e.target.value}),renderValue:e=>jsxRuntimeExports.jsx(Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>{const t=i.find(t=>t._id===e);return jsxRuntimeExports.jsx(Chip,{label:(null==t?void 0:t.name)||e,size:"small"},e)})}),children:i.map(e=>jsxRuntimeExports.jsxs(MenuItem$1,{value:e._id,children:[jsxRuntimeExports.jsx(Checkbox,{checked:b.categories.indexOf(e._id)>-1}),jsxRuntimeExports.jsx(ListItemText,{primary:e.name})]},e._id))})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:4,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Regions"}),jsxRuntimeExports.jsx(Select$1,{multiple:!0,value:b.regions,onChange:e=>C({...b,regions:e.target.value}),renderValue:e=>jsxRuntimeExports.jsx(Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>{const t=a.find(t=>t._id===e);return jsxRuntimeExports.jsx(Chip,{label:(null==t?void 0:t.name)||e,size:"small"},e)})}),children:a.map(e=>jsxRuntimeExports.jsxs(MenuItem$1,{value:e._id,children:[jsxRuntimeExports.jsx(Checkbox,{checked:b.regions.indexOf(e._id)>-1}),jsxRuntimeExports.jsx(ListItemText,{primary:e.name})]},e._id))})]})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Package Features"}),jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(List$1,{children:b.features.map((e,t)=>jsxRuntimeExports.jsxs(ListItem,{divider:!0,children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:`Feature ${t+1}`,value:e,onChange:e=>((e,t)=>{const n=[...b.features];n[e]=t,C({...b,features:n})})(t,e.target.value),placeholder:"e.g., HD Quality, No Ads, etc."}),jsxRuntimeExports.jsx(ListItemSecondaryAction,{children:jsxRuntimeExports.jsx(IconButton,{edge:"end",onClick:()=>(e=>{const t=b.features.filter((t,n)=>n!==e);C({...b,features:t})})(t),disabled:1===b.features.length,children:jsxRuntimeExports.jsx(DeleteIcon,{})})})]},t))}),jsxRuntimeExports.jsx(Button$2,{startIcon:jsxRuntimeExports.jsx(Add,{}),onClick:()=>{C({...b,features:[...b.features,""]})},sx:{ml:2},children:"Add Feature"})]}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Ad Unlock Settings"}),jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Switch,{checked:b.canUnlockWithAds,onChange:e=>C({...b,canUnlockWithAds:e.target.checked})}),label:"Allow users to unlock this package by viewing ads"})}),b.canUnlockWithAds&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:4,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Required Ads to Unlock",type:"number",inputProps:{min:1,max:10},value:b.requiredAdsToUnlock,onChange:e=>C({...b,requiredAdsToUnlock:e.target.value})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:4,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Ad Cooldown (Hours)",type:"number",inputProps:{min:1,max:168},value:b.adCooldownHours,onChange:e=>C({...b,adCooldownHours:e.target.value})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:2,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Ad Unlock Duration",type:"number",inputProps:{min:1,max:"minutes"===b.adUnlockDurationUnit?1440:"hours"===b.adUnlockDurationUnit?168:30},value:b.adUnlockDuration,onChange:e=>C({...b,adUnlockDuration:e.target.value})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:2,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Unit"}),jsxRuntimeExports.jsxs(Select$1,{value:b.adUnlockDurationUnit,label:"Unit",onChange:e=>C({...b,adUnlockDurationUnit:e.target.value}),children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"minutes",children:"Minutes"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"hours",children:"Hours"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"days",children:"Days"})]})]})})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Switch,{checked:b.isActive,onChange:e=>C({...b,isActive:e.target.checked})}),label:"Package is active and available for purchase"})})]})]}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:R,children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{type:"submit",variant:"contained",children:h?"Update Package":"Create Package"})]})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:v.open,onClose:()=>y({open:!1,packageId:null,stats:null}),maxWidth:"sm",fullWidth:!0,children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Package Statistics"}),jsxRuntimeExports.jsx(DialogContent,{children:v.stats&&jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,children:[jsxRuntimeExports.jsxs(Grid,{item:!0,xs:6,children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",color:"primary",textAlign:"center",children:v.stats.totalSubscriptions}),jsxRuntimeExports.jsx(Typography,{variant:"body2",textAlign:"center",color:"text.secondary",children:"Total Subscriptions"})]}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:6,children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",color:"success.main",textAlign:"center",children:v.stats.activeSubscriptions}),jsxRuntimeExports.jsx(Typography,{variant:"body2",textAlign:"center",color:"text.secondary",children:"Active Subscriptions"})]}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:6,children:[jsxRuntimeExports.jsxs(Typography,{variant:"h4",color:"info.main",textAlign:"center",children:["",v.stats.totalRevenue]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",textAlign:"center",color:"text.secondary",children:"Total Revenue"})]}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:6,children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",color:"secondary.main",textAlign:"center",children:v.stats.adUnlocks}),jsxRuntimeExports.jsx(Typography,{variant:"body2",textAlign:"center",color:"text.secondary",children:"Ad Unlocks"})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsxs(Typography,{variant:"body1",textAlign:"center",children:["Conversion Rate: ",jsxRuntimeExports.jsxs("strong",{children:[v.stats.conversionRate,"%"]})]})})]})}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button$2,{onClick:()=>y({open:!1,packageId:null,stats:null}),children:"Close"})})]})]})},AdminAds=()=>{const[e,t]=reactExports.useState([]),[n,r]=reactExports.useState([]),[i,s]=reactExports.useState(!0),[a,o]=reactExports.useState(!1),[l,c]=reactExports.useState(null),[u,d]=reactExports.useState(""),[h,p]=reactExports.useState(""),[m,f]=reactExports.useState({open:!1,adId:null,stats:null}),[g,x]=reactExports.useState({title:"",description:"",adUrl:"",imageUrl:"",targetPackages:[],minimumViewTime:30,maxDailyViews:1e3,maxTotalViews:"",revenuePerView:0,globalCooldown:6,cooldownUnit:"hours",priority:1,tags:[""],startDate:"",endDate:"",isActive:!0});reactExports.useEffect(()=>{v()},[]);const v=async()=>{var e,n;try{s(!0);const[e,n]=await Promise.all([adsAPI.getAll({populate:"true"}),packagesAPI.getAll({active:"true"})]);t(e.data),r(n.data)}catch(i){d((null==(n=null==(e=i.response)?void 0:e.data)?void 0:n.message)||i.message)}finally{s(!1)}},y=(e=null)=>{e?(c(e),x({title:e.title,description:e.description||"",adUrl:e.adUrl,imageUrl:e.imageUrl||"",targetPackages:e.targetPackages.map(e=>e._id),minimumViewTime:e.minimumViewTime,maxDailyViews:e.maxDailyViews,maxTotalViews:e.maxTotalViews||"",revenuePerView:e.revenuePerView,globalCooldown:e.globalCooldown,cooldownUnit:e.cooldownUnit||"hours",priority:e.priority,tags:e.tags.length>0?e.tags:[""],startDate:e.startDate?new Date(e.startDate).toISOString().split("T")[0]:"",endDate:e.endDate?new Date(e.endDate).toISOString().split("T")[0]:"",isActive:e.isActive})):(c(null),x({title:"",description:"",adUrl:"",imageUrl:"",targetPackages:[],minimumViewTime:30,maxDailyViews:1e3,maxTotalViews:"",revenuePerView:0,globalCooldown:6,cooldownUnit:"hours",priority:1,tags:[""],startDate:"",endDate:"",isActive:!0})),o(!0)},_=()=>{o(!1),d(""),p("")},E=e=>`$${parseFloat(e).toFixed(2)}`;return i?jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",gutterBottom:!0,children:"Ad Management"}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:[...Array(6)].map((e,t)=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text",height:40}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",height:20}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",height:20}),jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",height:100})]})})},t))})]}):jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",fontWeight:"bold",children:"Ad Management"}),jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,children:[jsxRuntimeExports.jsx(Button$2,{variant:"outlined",startIcon:jsxRuntimeExports.jsx(Refresh,{}),onClick:async()=>{var e,t;if(window.confirm("Are you sure you want to reset all ad cooldowns globally? This will allow all users to view ads immediately."))try{s(!0),await adsAPI.resetGlobalCooldowns(),p("Global ad cooldowns reset successfully!"),setTimeout(()=>p(""),3e3)}catch(n){d((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to reset global cooldowns")}finally{s(!1)}},color:"warning",size:"small",children:"Reset Global Cooldowns"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",startIcon:jsxRuntimeExports.jsx(PersonRemove,{}),onClick:async()=>{var e,t;const n=window.prompt("Enter User ID to reset cooldowns for:");if(n&&window.confirm(`Are you sure you want to reset ad cooldowns for user: ${n}?`))try{s(!0),await adsAPI.resetUserCooldowns(n),p(`Ad cooldowns reset successfully for user: ${n}`),setTimeout(()=>p(""),3e3)}catch(r){d((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Failed to reset user cooldowns")}finally{s(!1)}},color:"info",size:"small",children:"Reset User Cooldowns"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",startIcon:jsxRuntimeExports.jsx(Add,{}),onClick:()=>y(),color:"primary",children:"Add Advertisement"})]})]}),u&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},onClose:()=>d(""),children:u}),h&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},onClose:()=>p(""),children:h}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:e.map(e=>jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsxs(Card,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e.imageUrl&&jsxRuntimeExports.jsx(Box,{component:"img",src:e.imageUrl,alt:e.title,sx:{height:120,objectFit:"cover",width:"100%"},onError:e=>{e.target.style.display="none"}}),jsxRuntimeExports.jsxs(CardContent,{sx:{flexGrow:1},children:[jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",fontWeight:"bold",noWrap:!0,children:e.title}),jsxRuntimeExports.jsx(Box,{display:"flex",alignItems:"center",gap:1,children:jsxRuntimeExports.jsx(Tooltip,{title:e.isActive?"Active":"Inactive",children:jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:()=>(async e=>{var t,n;try{await adsAPI.toggle(e),p("Ad status updated"),v()}catch(r){d((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||r.message)}})(e._id),color:e.isActive?"success":"error",children:e.isActive?jsxRuntimeExports.jsx(ViewIcon,{}):jsxRuntimeExports.jsx(VisibilityOff,{})})})})]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:e.description}),jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,mb:2,children:[jsxRuntimeExports.jsx(OpenInNew,{fontSize:"small",color:"primary"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"primary",sx:{textDecoration:"underline",cursor:"pointer",wordBreak:"break-all"},onClick:()=>window.open(e.adUrl,"_blank"),children:e.adUrl.length>30?`${e.adUrl.substring(0,30)}...`:e.adUrl})]}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:1,mb:2,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,children:jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(People,{fontSize:"small"}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",children:[e.currentViews," views"]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,children:jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(MonetizationOn,{fontSize:"small"}),jsxRuntimeExports.jsx(Typography,{variant:"caption",children:E(e.totalRevenue)})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,children:jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(Timer,{fontSize:"small"}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",children:[e.minimumViewTime,"s min"]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,children:jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(TrendingUp,{fontSize:"small"}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",children:["Priority: ",e.priority]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,children:jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(AccessTime,{fontSize:"small"}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",children:["Cooldown: ",e.globalCooldown," ",e.cooldownUnit||"hours"]})]})})]}),jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,mb:2,flexWrap:"wrap",children:[jsxRuntimeExports.jsx(Chip,{label:`${e.targetPackages.length} Packages`,size:"small",color:"primary",variant:"outlined"}),e.maxTotalViews&&jsxRuntimeExports.jsx(Chip,{label:e.maxTotalViews-e.currentViews+" left",size:"small",color:"warning"})]}),e.maxTotalViews&&jsxRuntimeExports.jsxs(Box,{mb:2,children:[jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"text.secondary",children:["Progress: ",e.currentViews,"/",e.maxTotalViews]}),jsxRuntimeExports.jsx(LinearProgress,{variant:"determinate",value:e.currentViews/e.maxTotalViews*100,sx:{mt:.5}})]}),e.tags.length>0&&jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",children:"Tags:"}),jsxRuntimeExports.jsxs(Box,{display:"flex",gap:.5,flexWrap:"wrap",mt:.5,children:[e.tags.slice(0,3).map((e,t)=>jsxRuntimeExports.jsx(Chip,{label:e,size:"small",variant:"outlined"},t)),e.tags.length>3&&jsxRuntimeExports.jsx(Chip,{label:"+"+(e.tags.length-3),size:"small",variant:"outlined"})]})]})]}),jsxRuntimeExports.jsxs(CardActions,{children:[jsxRuntimeExports.jsx(Button$2,{size:"small",startIcon:jsxRuntimeExports.jsx(Analytics,{}),onClick:()=>(async e=>{var t,n;try{const t=await adsAPI.getStats(e);f({open:!0,adId:e,stats:t.data})}catch(r){d((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||r.message)}})(e._id),color:"info",children:"Stats"}),jsxRuntimeExports.jsx(Button$2,{size:"small",startIcon:jsxRuntimeExports.jsx(Edit,{}),onClick:()=>y(e),color:"primary",children:"Edit"}),jsxRuntimeExports.jsx(Button$2,{size:"small",color:"error",startIcon:jsxRuntimeExports.jsx(DeleteIcon,{}),onClick:()=>(async e=>{var t,n;if(window.confirm("Are you sure you want to delete this ad?"))try{await adsAPI.delete(e),p("Ad deleted successfully"),v()}catch(r){d((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||r.message)}})(e._id),children:"Delete"})]})]})},e._id))}),0===e.length&&jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",py:8},children:[jsxRuntimeExports.jsx(PlayCircleOutline,{sx:{fontSize:64,color:"text.secondary",mb:2}}),jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No advertisements found"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Create your first advertisement to start monetizing package unlocks."})]}),jsxRuntimeExports.jsxs(Dialog,{open:a,onClose:_,maxWidth:"md",fullWidth:!0,children:[jsxRuntimeExports.jsx(DialogTitle,{children:l?"Edit Advertisement":"Add New Advertisement"}),jsxRuntimeExports.jsxs("form",{onSubmit:async e=>{var t,n;e.preventDefault(),d(""),p("");try{const e={...g,minimumViewTime:parseInt(g.minimumViewTime),maxDailyViews:parseInt(g.maxDailyViews),maxTotalViews:g.maxTotalViews?parseInt(g.maxTotalViews):null,revenuePerView:parseFloat(g.revenuePerView),globalCooldown:parseInt(g.globalCooldown),priority:parseInt(g.priority),tags:g.tags.filter(e=>""!==e.trim()),startDate:g.startDate||null,endDate:g.endDate||null};l?(await adsAPI.update(l._id,e),p("Ad updated successfully")):(await adsAPI.create(e),p("Ad created successfully")),v(),setTimeout(()=>o(!1),1500)}catch(r){d((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||r.message)}},children:[jsxRuntimeExports.jsxs(DialogContent,{children:[u&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},children:u}),h&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},children:h}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,children:[jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsxs(Typography,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:[jsxRuntimeExports.jsx(Settings$1,{sx:{mr:1,verticalAlign:"middle"}}),"Advertisement Details"]}),jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Ad Title",value:g.title,onChange:e=>x({...g,title:e.target.value}),required:!0})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Priority",type:"number",inputProps:{min:1,max:100},value:g.priority,onChange:e=>x({...g,priority:e.target.value}),helperText:"Higher priority ads shown first"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:3,value:g.description,onChange:e=>x({...g,description:e.target.value})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Ad URL",value:g.adUrl,onChange:e=>x({...g,adUrl:e.target.value}),required:!0,helperText:"URL that will open in new tab"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Image URL",value:g.imageUrl,onChange:e=>x({...g,imageUrl:e.target.value}),helperText:"Optional banner image for the ad"})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Targeting & Settings"}),jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Target Packages"}),jsxRuntimeExports.jsx(Select$1,{multiple:!0,value:g.targetPackages,onChange:e=>x({...g,targetPackages:e.target.value}),renderValue:e=>jsxRuntimeExports.jsx(Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>{const t=n.find(t=>t._id===e);return jsxRuntimeExports.jsx(Chip,{label:(null==t?void 0:t.name)||e,size:"small"},e)})}),children:n.map(e=>jsxRuntimeExports.jsxs(MenuItem$1,{value:e._id,children:[jsxRuntimeExports.jsx(Checkbox,{checked:g.targetPackages.indexOf(e._id)>-1}),jsxRuntimeExports.jsx(ListItemText,{primary:`${e.name} (${e.price})`})]},e._id))})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:4,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Minimum View Time (seconds)",type:"number",inputProps:{min:10,max:300},value:g.minimumViewTime,onChange:e=>x({...g,minimumViewTime:e.target.value})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:2,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Cooldown Value",type:"number",inputProps:{min:1,max:"minutes"===g.cooldownUnit?1440:168},value:g.globalCooldown,onChange:e=>x({...g,globalCooldown:e.target.value})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:2,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Unit"}),jsxRuntimeExports.jsxs(Select$1,{value:g.cooldownUnit,onChange:e=>x({...g,cooldownUnit:e.target.value}),label:"Unit",children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"minutes",children:"Minutes"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"hours",children:"Hours"})]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:4,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Revenue Per View",type:"number",inputProps:{min:0,step:.01},value:g.revenuePerView,onChange:e=>x({...g,revenuePerView:e.target.value})})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"View Limits"}),jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Max Daily Views",type:"number",inputProps:{min:1},value:g.maxDailyViews,onChange:e=>x({...g,maxDailyViews:e.target.value})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Max Total Views",type:"number",inputProps:{min:1},value:g.maxTotalViews,onChange:e=>x({...g,maxTotalViews:e.target.value}),helperText:"Leave empty for unlimited"})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Schedule"}),jsxRuntimeExports.jsx(Divider,{})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Start Date",type:"date",InputLabelProps:{shrink:!0},value:g.startDate,onChange:e=>x({...g,startDate:e.target.value}),helperText:"Leave empty to start immediately"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"End Date",type:"date",InputLabelProps:{shrink:!0},value:g.endDate,onChange:e=>x({...g,endDate:e.target.value}),helperText:"Leave empty for no end date"})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Tags"}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsx(List$1,{children:g.tags.map((e,t)=>jsxRuntimeExports.jsxs(ListItem,{divider:!0,children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:`Tag ${t+1}`,value:e,onChange:e=>((e,t)=>{const n=[...g.tags];n[e]=t,x({...g,tags:n})})(t,e.target.value),placeholder:"e.g., Sports, Entertainment, etc."}),jsxRuntimeExports.jsx(ListItemSecondaryAction,{children:jsxRuntimeExports.jsx(IconButton,{edge:"end",onClick:()=>(e=>{const t=g.tags.filter((t,n)=>n!==e);x({...g,tags:t})})(t),disabled:1===g.tags.length,children:jsxRuntimeExports.jsx(DeleteIcon,{})})})]},t))}),jsxRuntimeExports.jsx(Button$2,{startIcon:jsxRuntimeExports.jsx(Add,{}),onClick:()=>{x({...g,tags:[...g.tags,""]})},sx:{ml:2},children:"Add Tag"})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Switch,{checked:g.isActive,onChange:e=>x({...g,isActive:e.target.checked})}),label:"Advertisement is active and available for viewing"})})]})]}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:_,children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{type:"submit",variant:"contained",children:l?"Update Ad":"Create Ad"})]})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:m.open,onClose:()=>f({open:!1,adId:null,stats:null}),maxWidth:"md",fullWidth:!0,children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Advertisement Statistics"}),jsxRuntimeExports.jsx(DialogContent,{children:m.stats&&jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:3,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{textAlign:"center",p:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",color:"primary",children:m.stats.totalViews}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Total Views"})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{textAlign:"center",p:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",color:"info.main",children:m.stats.todayViews}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Today's Views"})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{textAlign:"center",p:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",color:"success.main",children:E(m.stats.totalRevenue)}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Total Revenue"})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{textAlign:"center",p:2},children:[jsxRuntimeExports.jsxs(Typography,{variant:"h4",color:"secondary.main",children:[m.stats.conversionRate,"%"]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Conversion Rate"})]})}),m.stats.remainingViews&&jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsxs(Alert,{severity:"info",children:[jsxRuntimeExports.jsx("strong",{children:m.stats.remainingViews})," views remaining before limit is reached"]})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Daily Views (Last 7 Days)"}),jsxRuntimeExports.jsx(Box,{sx:{width:"100%"},children:m.stats.dailyViewsHistory.slice(-7).map((e,t)=>jsxRuntimeExports.jsxs(Box,{sx:{mb:1},children:[jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",mb:.5,children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",children:new Date(e.date).toLocaleDateString()}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",fontWeight:"bold",children:[e.count," views"]})]}),jsxRuntimeExports.jsx(LinearProgress,{variant:"determinate",value:e.count/Math.max(...m.stats.dailyViewsHistory.map(e=>e.count))*100})]},t))})]})]})}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button$2,{onClick:()=>f({open:!1,adId:null,stats:null}),children:"Close"})})]})]})},AdminPayments=()=>{var e,t,n,r,i,s,a,o,l,c;const[u,d]=reactExports.useState(0),[h,p]=reactExports.useState([]),[m,f]=reactExports.useState(null),[g,x]=reactExports.useState(!0),[v,y]=reactExports.useState(null),[_,E]=reactExports.useState(!1),[b,C]=reactExports.useState(!1),[S,T]=reactExports.useState(!1),[R,j]=reactExports.useState(""),[w,A]=reactExports.useState(!1),[I,k]=reactExports.useState(""),[M,P]=reactExports.useState("success"),[L,D]=reactExports.useState({page:1,pages:1,total:0}),[O,$]=reactExports.useState({status:"",paymentMethod:""});reactExports.useEffect(()=>{N(),F()},[u,L.page,O]);const N=async()=>{try{x(!0);const e={page:L.page,limit:20,...O};Object.keys(e).forEach(t=>{""!==e[t]&&null!==e[t]&&void 0!==e[t]||delete e[t]});const t=await paymentsAPI.getAll(e);p(t.data.payments||[]),D(t.data.pagination||{page:1,pages:1,total:0})}catch(e){console.error("Failed to load payments:",e),B("Failed to load payments","error")}finally{x(!1)}},F=async()=>{try{const e=await paymentsAPI.getStats();f(e.data)}catch(e){console.error("Failed to load payment stats:",e)}},B=(e,t="success")=>{k(e),P(t),setTimeout(()=>k(""),4e3)},U=e=>{switch(e){case"pending":return"warning";case"approved":return"success";case"declined":return"error";default:return"default"}},G=e=>{switch(e){case"bkash":return"info";case"rocket":return"secondary";case"nagad":return"warning";case"upay":return"error";case"balance":return"primary";default:return"default"}},V=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),H=({title:e,value:t,icon:n,color:r="primary"})=>jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",color:`${r}.main`,fontWeight:600,children:t}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:e})]}),jsxRuntimeExports.jsx(n,{color:r,sx:{fontSize:40}})]})})});return jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",fontWeight:600,children:"Payment Management"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",startIcon:jsxRuntimeExports.jsx(Refresh,{}),onClick:()=>{N(),F()},children:"Refresh"})]}),I&&jsxRuntimeExports.jsx(Alert,{severity:M,sx:{mb:3},onClose:()=>k(""),children:I}),m&&jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:3,sx:{mb:4},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsx(H,{title:"Pending Payments",value:m.statusStats.pending.count,icon:PendingActions,color:"warning"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsx(H,{title:"Approved Payments",value:m.statusStats.approved.count,icon:CheckCircle,color:"success"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsx(H,{title:"Total Revenue",value:`${m.statusStats.approved.totalAmount.toFixed(2)}`,icon:TrendingUp,color:"primary"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsx(H,{title:"Declined Payments",value:m.statusStats.declined.count,icon:CancelIcon,color:"error"})})]}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsxs(Box,{display:"flex",gap:2,mb:3,alignItems:"center",flexWrap:"wrap",children:[jsxRuntimeExports.jsxs(FormControl,{size:"small",sx:{minWidth:120},children:[jsxRuntimeExports.jsx(InputLabel,{children:"Status"}),jsxRuntimeExports.jsxs(Select$1,{value:O.status,label:"Status",onChange:e=>$({...O,status:e.target.value}),children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"",children:"All"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"pending",children:"Pending"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"approved",children:"Approved"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"declined",children:"Declined"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"cancelled",children:"Cancelled"})]})]}),jsxRuntimeExports.jsxs(FormControl,{size:"small",sx:{minWidth:120},children:[jsxRuntimeExports.jsx(InputLabel,{children:"Method"}),jsxRuntimeExports.jsxs(Select$1,{value:O.paymentMethod,label:"Method",onChange:e=>$({...O,paymentMethod:e.target.value}),children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"",children:"All"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"bkash",children:"bKash"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"rocket",children:"Rocket"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"nagad",children:"Nagad"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"upay",children:"Upay"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"balance",children:"Balance"})]})]}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",onClick:()=>$({status:"",paymentMethod:""}),children:"Clear Filters"})]}),jsxRuntimeExports.jsx(TableContainer,{component:Paper,variant:"outlined",children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Date"}),jsxRuntimeExports.jsx(TableCell,{children:"User"}),jsxRuntimeExports.jsx(TableCell,{children:"Package"}),jsxRuntimeExports.jsx(TableCell,{children:"Amount"}),jsxRuntimeExports.jsx(TableCell,{children:"Method"}),jsxRuntimeExports.jsx(TableCell,{children:"Transaction ID"}),jsxRuntimeExports.jsx(TableCell,{children:"Status"}),jsxRuntimeExports.jsx(TableCell,{children:"Actions"})]})}),jsxRuntimeExports.jsx(TableBody,{children:g?Array.from({length:5}).map((e,t)=>jsxRuntimeExports.jsx(TableRow,{children:Array.from({length:8}).map((e,t)=>jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Skeleton,{variant:"text"})},t))},t)):h.length>0?h.map(e=>{var t,n,r,i,s,a;return jsxRuntimeExports.jsxs(TableRow,{hover:!0,children:[jsxRuntimeExports.jsx(TableCell,{children:V(e.createdAt)}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",fontWeight:600,children:null==(t=e.user)?void 0:t.name}),jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",children:null==(n=e.user)?void 0:n.email})]})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{variant:"body2",children:e.isBalanceTopUp?"Balance Top-up":(null==(r=e.package)?void 0:r.name)||"N/A"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",fontWeight:600,children:["",null==(i=e.amount)?void 0:i.toFixed(2)]})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Chip,{label:null==(s=e.paymentMethod)?void 0:s.toUpperCase(),color:G(e.paymentMethod),size:"small"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{variant:"body2",fontFamily:"monospace",children:e.transactionId})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Chip,{label:null==(a=e.status)?void 0:a.toUpperCase(),color:U(e.status),size:"small"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,children:[jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:()=>(async e=>{try{const t=await paymentsAPI.getById(e._id);y(t.data),E(!0)}catch(t){console.error("Failed to load payment details:",t),B("Failed to load payment details","error")}})(e),children:jsxRuntimeExports.jsx(ViewIcon,{})}),"pending"===e.status&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(IconButton,{size:"small",color:"success",onClick:()=>{y(e),C(!0)},children:jsxRuntimeExports.jsx(CheckCircle,{})}),jsxRuntimeExports.jsx(IconButton,{size:"small",color:"error",onClick:()=>{y(e),T(!0)},children:jsxRuntimeExports.jsx(CancelIcon,{})})]})]})})]},e._id)}):jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:8,align:"center",children:jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",py:4,children:"No payments found"})})})})]})}),L.pages>1&&jsxRuntimeExports.jsx(Box,{display:"flex",justifyContent:"center",mt:3,children:jsxRuntimeExports.jsx(Pagination,{count:L.pages,page:L.page,onChange:(e,t)=>D({...L,page:t}),color:"primary"})})]})}),jsxRuntimeExports.jsxs(Dialog,{open:_,onClose:()=>E(!1),maxWidth:"md",fullWidth:!0,children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Payment Details"}),jsxRuntimeExports.jsx(DialogContent,{children:v&&jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,children:[jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,sm:6,children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"User"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:null==(e=v.user)?void 0:e.name}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:null==(t=v.user)?void 0:t.email})]}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,sm:6,children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:v.isBalanceTopUp?"Type":"Package"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:v.isBalanceTopUp?"Balance Top-up":(null==(n=v.package)?void 0:n.name)||"N/A"}),!v.isBalanceTopUp&&jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:null==(r=v.package)?void 0:r.description})]}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,sm:6,children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Amount"}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",color:"primary",children:["",null==(i=v.amount)?void 0:i.toFixed(2)]})]}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,sm:6,children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Payment Method"}),jsxRuntimeExports.jsx(Chip,{label:null==(s=v.paymentMethod)?void 0:s.toUpperCase(),color:G(v.paymentMethod)})]}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,sm:6,children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Transaction ID"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",fontFamily:"monospace",children:v.transactionId})]}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,sm:6,children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Status"}),jsxRuntimeExports.jsx(Chip,{label:null==(a=v.status)?void 0:a.toUpperCase(),color:U(v.status)})]}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,sm:6,children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Submitted"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",children:V(v.createdAt)})]}),v.reviewedAt&&jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,sm:6,children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Reviewed"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",children:V(v.reviewedAt)}),v.reviewedBy&&jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"text.secondary",children:["by ",v.reviewedBy.name]})]}),v.notes&&jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"User Notes"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",children:v.notes})]}),v.adminNotes&&jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Admin Notes"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",children:v.adminNotes})]})]})})}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button$2,{onClick:()=>E(!1),children:"Close"})})]}),jsxRuntimeExports.jsxs(Dialog,{open:b,onClose:()=>C(!1),children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Approve Payment"}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsxs(Typography,{variant:"body1",gutterBottom:!0,children:["Are you sure you want to approve this payment? ",(null==v?void 0:v.isBalanceTopUp)?"This will add the balance to the user's account.":"This will activate the package for the user."]}),v&&jsxRuntimeExports.jsx(Box,{mt:2,children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["User: ",null==(o=v.user)?void 0:o.name,jsxRuntimeExports.jsx("br",{}),v.isBalanceTopUp?"Type: Balance Top-up":`Package: ${null==(l=v.package)?void 0:l.name}`,jsxRuntimeExports.jsx("br",{}),"Amount: ",null==(c=v.amount)?void 0:c.toFixed(2),jsxRuntimeExports.jsx("br",{}),"Transaction ID: ",v.transactionId]})})]}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>C(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",color:"success",onClick:async()=>{var e,t;try{A(!0),await paymentsAPI.approve(v._id),B("Payment approved successfully"),C(!1),N(),F()}catch(n){console.error("Failed to approve payment:",n),B((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to approve payment","error")}finally{A(!1)}},disabled:w,children:w?"Approving...":"Approve"})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:S,onClose:()=>T(!1),maxWidth:"sm",fullWidth:!0,children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Decline Payment"}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"body1",gutterBottom:!0,children:"Please provide a reason for declining this payment:"}),jsxRuntimeExports.jsx(TextField,{fullWidth:!0,multiline:!0,rows:3,label:"Decline Reason",value:R,onChange:e=>j(e.target.value),placeholder:"Enter reason for declining the payment...",sx:{mt:2}})]}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>{T(!1),j("")},children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",color:"error",onClick:async()=>{var e,t;if(R.trim())try{A(!0),await paymentsAPI.decline(v._id,{reason:R.trim()}),B("Payment declined successfully"),T(!1),j(""),N(),F()}catch(n){console.error("Failed to decline payment:",n),B((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to decline payment","error")}finally{A(!1)}else B("Please provide a reason for declining","error")},disabled:w||!R.trim(),children:w?"Declining...":"Decline"})]})]})]})},AdminPaymentMethods=()=>{const[e,t]=reactExports.useState([]),[n,r]=reactExports.useState(!0),[i,s]=reactExports.useState(!1),[a,o]=reactExports.useState(null),[l,c]=reactExports.useState({name:"",mobileNumber:"",accountType:"Personal",isEnabled:!0,color:"#000000",icon:"Phone",logoUrl:"",useCustomLogo:!1,instructions:[]}),[u,d]=reactExports.useState(""),[h,p]=reactExports.useState(""),[m,f]=reactExports.useState("success"),[g,x]=reactExports.useState(!1),[v,y]=reactExports.useState({method:"",name:"",mobileNumber:"",accountType:"Personal",color:"#000000",icon:"Phone",logoUrl:"",useCustomLogo:!1,instructions:[]}),[_,E]=reactExports.useState(""),[b,C]=reactExports.useState(!1),[S,T]=reactExports.useState(""),[R,j]=reactExports.useState("");reactExports.useEffect(()=>{w()},[]);const w=async()=>{try{r(!0);const e=await paymentMethodsAPI.getAdmin();if(!e.data.success)throw new Error(e.data.message||"Failed to load payment methods");t(e.data.data||[])}catch(e){console.error("Failed to load payment methods:",e),A("Failed to load payment methods","error")}finally{r(!1)}},A=(e,t="success")=>{p(e),f(t),setTimeout(()=>p(""),5e3)},I=()=>{_.trim()&&(y({...v,instructions:[...v.instructions,_.trim()]}),E(""))},k=(e,t)=>{y({...v,[e]:t})},M=async(e,t=!1)=>{if(e){if(e.size>5242880)return p("Logo file must be less than 5MB"),void f("error");if(!e.type.startsWith("image/"))return p("Please select a valid image file"),void f("error");C(!0);try{const n=new FileReader;n.onloadend=()=>{t?j(n.result):T(n.result)},n.readAsDataURL(e);const r=await uploadImageToImgBB(e,{uploadType:"payment-method",onProgress:e=>{console.log("Logo upload progress:",e)}});if(!(r&&r.data&&r.data.url))throw new Error("Upload failed - no URL received");t?c({...l,logoUrl:r.data.url,useCustomLogo:!0}):y({...v,logoUrl:r.data.url,useCustomLogo:!0}),p("Logo uploaded successfully!"),f("success")}catch(n){console.error("Logo upload failed:",n),p(`Failed to upload logo: ${n.message}`),f("error"),t?j(""):T("")}finally{C(!1)}}},P=()=>{u.trim()&&(c({...l,instructions:[...l.instructions,u.trim()]}),d(""))},L=e=>{if(e.useCustomLogo&&e.logoUrl)return jsxRuntimeExports.jsx(Box,{component:"img",src:e.logoUrl,alt:e.name,sx:{width:24,height:24,objectFit:"contain"}});const t={sx:{color:e.color||"#000"}};if(e.icon)switch(e.icon.toLowerCase()){case"phone":return jsxRuntimeExports.jsx(Phone,{...t});case"accountbalance":return jsxRuntimeExports.jsx(AccountBalance,{...t});default:return jsxRuntimeExports.jsx(Payment,{...t})}switch(e.method){case"bkash":case"nagad":return jsxRuntimeExports.jsx(Phone,{...t});case"rocket":case"upay":return jsxRuntimeExports.jsx(AccountBalance,{...t});default:return jsxRuntimeExports.jsx(Payment,{...t})}};return jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",fontWeight:600,children:"Payment Methods Management"}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Button$2,{variant:"outlined",startIcon:jsxRuntimeExports.jsx(Refresh,{}),onClick:w,sx:{mr:2},children:"Refresh"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",startIcon:jsxRuntimeExports.jsx(Add,{}),onClick:()=>x(!0),sx:{mr:2},children:"Add New Method"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",startIcon:jsxRuntimeExports.jsx(Add,{}),onClick:async()=>{try{const e=await paymentMethodsAPI.initialize();if(!e.data.success)throw new Error(e.data.message||"Initialize failed");A("Payment methods initialized successfully"),w()}catch(e){console.error("Initialize error:",e),A(e.message||"Failed to initialize payment methods","error")}},children:"Initialize Defaults"})]})]}),h&&jsxRuntimeExports.jsx(Alert,{severity:m,sx:{mb:3},onClose:()=>p(""),children:h}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(TableContainer,{component:Paper,variant:"outlined",children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Method"}),jsxRuntimeExports.jsx(TableCell,{children:"Mobile Number"}),jsxRuntimeExports.jsx(TableCell,{children:"Account Type"}),jsxRuntimeExports.jsx(TableCell,{children:"Status"}),jsxRuntimeExports.jsx(TableCell,{children:"Actions"})]})}),jsxRuntimeExports.jsx(TableBody,{children:n?jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:5,align:"center",children:"Loading..."})}):e.length>0?e.map(e=>{return jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(Avatar,{sx:{bgcolor:e.color,width:32,height:32},children:L(e)}),jsxRuntimeExports.jsx(Typography,{variant:"body2",fontWeight:600,children:e.name})]})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{variant:"body2",fontFamily:"monospace",children:e.mobileNumber})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Chip,{label:e.accountType,color:"primary",size:"small",variant:"outlined"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Chip,{label:e.isEnabled?"Enabled":"Disabled",color:(t=e.isEnabled,t?"success":"default"),size:"small"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,children:[jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:()=>(e=>{o(e),c({name:e.name,mobileNumber:e.mobileNumber,accountType:e.accountType,isEnabled:e.isEnabled,color:e.color,instructions:[...e.instructions],icon:e.icon||"",logoUrl:e.logoUrl||"",useCustomLogo:e.useCustomLogo||!1}),j(""),s(!0)})(e),color:"primary",children:jsxRuntimeExports.jsx(Edit,{})}),jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:()=>(async e=>{try{const t=await paymentMethodsAPI.toggle(e._id);if(!t.data.success)throw new Error(t.data.message||"Toggle failed");A(t.data.message),w()}catch(t){console.error("Toggle error:",t),A(t.message||"Failed to toggle payment method","error")}})(e),color:e.isEnabled?"error":"success",children:jsxRuntimeExports.jsx(ToggleOn,{})}),jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:()=>(async e=>{if(window.confirm(`Are you sure you want to delete ${e.name}? This action cannot be undone.`))try{const t=await paymentMethodsAPI.delete(e._id);if(!t.data.success)throw new Error(t.data.message||"Delete failed");A("Payment method deleted successfully"),w()}catch(t){console.error("Delete error:",t),A(t.message||"Failed to delete payment method","error")}})(e),color:"error",children:jsxRuntimeExports.jsx(DeleteIcon,{})})]})})]},e._id);var t}):jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:5,align:"center",children:jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",py:4,children:'No payment methods found. Click "Initialize Defaults" to add them.'})})})})]})})})}),jsxRuntimeExports.jsxs(Dialog,{open:i,onClose:()=>s(!1),maxWidth:"md",fullWidth:!0,children:[jsxRuntimeExports.jsxs(DialogTitle,{children:["Edit Payment Method: ",null==a?void 0:a.name]}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:3,sx:{mt:1},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Method Name",value:l.name,onChange:e=>c({...l,name:e.target.value})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Mobile Number",value:l.mobileNumber,onChange:e=>c({...l,mobileNumber:e.target.value}),placeholder:"+8801XXXXXXXXX"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Account Type"}),jsxRuntimeExports.jsxs(Select$1,{value:l.accountType,onChange:e=>c({...l,accountType:e.target.value}),label:"Account Type",children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"Personal",children:"Personal"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"Agent",children:"Agent"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"Merchant",children:"Merchant"})]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Color",type:"color",value:l.color,onChange:e=>c({...l,color:e.target.value})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle1",gutterBottom:!0,children:"Payment Method Logo"}),jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Checkbox,{checked:l.useCustomLogo,onChange:e=>{const t=e.target.checked;c({...l,useCustomLogo:t,logoUrl:t?l.logoUrl:"",icon:t?"":l.icon}),t||j("")}}),label:"Use Custom Logo (instead of icon)"}),l.useCustomLogo?jsxRuntimeExports.jsxs(Box,{sx:{mt:2},children:[jsxRuntimeExports.jsx("input",{accept:"image/*",style:{display:"none"},id:"edit-logo-upload",type:"file",onChange:e=>{const t=e.target.files[0];t&&M(t,!0)}}),jsxRuntimeExports.jsx("label",{htmlFor:"edit-logo-upload",children:jsxRuntimeExports.jsx(Button$2,{variant:"outlined",component:"span",disabled:b,startIcon:b?jsxRuntimeExports.jsx(CircularProgress,{size:20}):jsxRuntimeExports.jsx(CloudUpload,{}),sx:{mr:2},children:b?"Uploading...":"Upload Logo"})}),l.logoUrl&&!R&&jsxRuntimeExports.jsxs(Box,{sx:{mt:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Current Logo:"}),jsxRuntimeExports.jsx(Box,{component:"img",src:l.logoUrl,alt:"Current logo",sx:{maxWidth:"100px",maxHeight:"60px",objectFit:"contain",border:"1px solid #ddd",borderRadius:1,p:1}})]}),R&&jsxRuntimeExports.jsxs(Box,{sx:{mt:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"New Logo Preview:"}),jsxRuntimeExports.jsx(Box,{component:"img",src:R,alt:"Logo preview",sx:{maxWidth:"100px",maxHeight:"60px",objectFit:"contain",border:"1px solid #ddd",borderRadius:1,p:1}}),jsxRuntimeExports.jsx(Button$2,{size:"small",color:"error",onClick:()=>{j(""),c({...l,logoUrl:(null==a?void 0:a.logoUrl)||""})},sx:{ml:1},children:"Cancel Change"})]})]}):jsxRuntimeExports.jsx(Box,{sx:{mt:2},children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Icon Name",value:l.icon||"",onChange:e=>c({...l,icon:e.target.value}),placeholder:"Phone, AccountBalance, Payment",helperText:"Material-UI icon name"})})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Switch,{checked:l.isEnabled,onChange:e=>c({...l,isEnabled:e.target.checked})}),label:"Enable Payment Method"})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Payment Instructions"}),jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,mb:2,children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,size:"small",label:"Add instruction step",value:u,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&P()}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",onClick:P,children:"Add"})]}),jsxRuntimeExports.jsx(List$1,{dense:!0,children:l.instructions.map((e,t)=>jsxRuntimeExports.jsxs(ListItem,{divider:!0,children:[jsxRuntimeExports.jsx(ListItemText,{primary:`${t+1}. ${e}`,primaryTypographyProps:{variant:"body2"}}),jsxRuntimeExports.jsx(ListItemSecondaryAction,{children:jsxRuntimeExports.jsx(IconButton,{edge:"end",size:"small",onClick:()=>(e=>{c({...l,instructions:l.instructions.filter((t,n)=>n!==e)})})(t),color:"error",children:jsxRuntimeExports.jsx(DeleteIcon,{})})})]},t))}),0===l.instructions.length&&jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",textAlign:"center",py:2,children:"No instructions added yet"})]})]})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>s(!1),startIcon:jsxRuntimeExports.jsx(CancelIcon,{}),children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",onClick:async()=>{if(a)try{const e=await paymentMethodsAPI.update(a._id,l);if(!e.data.success)throw new Error(e.data.message||"Update failed");A("Payment method updated successfully"),w(),s(!1)}catch(e){console.error("Update error:",e),A(e.message||"Failed to update payment method","error")}},startIcon:jsxRuntimeExports.jsx(Save,{}),children:"Save Changes"})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:g,onClose:()=>x(!1),maxWidth:"md",fullWidth:!0,children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Create New Payment Method"}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:3,sx:{mt:1},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Method Key",value:v.method,onChange:e=>k("method",e.target.value),placeholder:"e.g. bkash, nagad, custom-bank",helperText:"Unique identifier for the payment method (letters, numbers, hyphens, underscores only)"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Display Name",value:v.name,onChange:e=>k("name",e.target.value),placeholder:"e.g. bKash, Nagad, Custom Bank"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Mobile Number",value:v.mobileNumber,onChange:e=>k("mobileNumber",e.target.value),placeholder:"+8801XXXXXXXX"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Account Type"}),jsxRuntimeExports.jsxs(Select$1,{value:v.accountType,label:"Account Type",onChange:e=>k("accountType",e.target.value),children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"Personal",children:"Personal"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"Agent",children:"Agent"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"Merchant",children:"Merchant"})]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Brand Color",type:"color",value:v.color,onChange:e=>k("color",e.target.value)})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle1",gutterBottom:!0,children:"Payment Method Logo"}),jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Checkbox,{checked:v.useCustomLogo,onChange:e=>{const t=e.target.checked;y({...v,useCustomLogo:t,logoUrl:t?v.logoUrl:"",icon:t?"":v.icon}),t||T("")}}),label:"Use Custom Logo (instead of icon)"}),v.useCustomLogo?jsxRuntimeExports.jsxs(Box,{sx:{mt:2},children:[jsxRuntimeExports.jsx("input",{accept:"image/*",style:{display:"none"},id:"create-logo-upload",type:"file",onChange:e=>{const t=e.target.files[0];t&&M(t,!1)}}),jsxRuntimeExports.jsx("label",{htmlFor:"create-logo-upload",children:jsxRuntimeExports.jsx(Button$2,{variant:"outlined",component:"span",disabled:b,startIcon:b?jsxRuntimeExports.jsx(CircularProgress,{size:20}):jsxRuntimeExports.jsx(CloudUpload,{}),sx:{mr:2},children:b?"Uploading...":"Upload Logo"})}),S&&jsxRuntimeExports.jsxs(Box,{sx:{mt:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Logo Preview:"}),jsxRuntimeExports.jsx(Box,{component:"img",src:S,alt:"Logo preview",sx:{maxWidth:"100px",maxHeight:"60px",objectFit:"contain",border:"1px solid #ddd",borderRadius:1,p:1}}),jsxRuntimeExports.jsx(Button$2,{size:"small",color:"error",onClick:()=>{T(""),y({...v,logoUrl:"",useCustomLogo:!1})},sx:{ml:1},children:"Remove"})]})]}):jsxRuntimeExports.jsx(Box,{sx:{mt:2},children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Icon Name",value:v.icon,onChange:e=>k("icon",e.target.value),placeholder:"Phone, AccountBalance, Payment",helperText:"Material-UI icon name"})})]})}),jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,children:[jsxRuntimeExports.jsx(Divider,{sx:{my:2}}),jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Payment Instructions"}),jsxRuntimeExports.jsxs(Box,{display:"flex",gap:2,mb:2,children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Add Instruction",value:_,onChange:e=>E(e.target.value),placeholder:"Enter step-by-step instruction",onKeyPress:e=>"Enter"===e.key&&I()}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",onClick:I,startIcon:jsxRuntimeExports.jsx(Add,{}),children:"Add"})]}),v.instructions.length>0&&jsxRuntimeExports.jsx(List$1,{dense:!0,children:v.instructions.map((e,t)=>jsxRuntimeExports.jsxs(ListItem,{divider:!0,children:[jsxRuntimeExports.jsx(ListItemText,{primary:`${t+1}. ${e}`}),jsxRuntimeExports.jsx(ListItemSecondaryAction,{children:jsxRuntimeExports.jsx(IconButton,{edge:"end",size:"small",onClick:()=>(e=>{y({...v,instructions:v.instructions.filter((t,n)=>n!==e)})})(t),color:"error",children:jsxRuntimeExports.jsx(DeleteIcon,{})})})]},t))})]})]})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>x(!1),startIcon:jsxRuntimeExports.jsx(CancelIcon,{}),children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{onClick:async()=>{try{if(!v.method||!v.name||!v.mobileNumber)return void A("Method key, name, and mobile number are required","error");const e=await paymentMethodsAPI.create(v);if(!e.data.success)throw new Error(e.data.message||"Create failed");A("Payment method created successfully"),w(),x(!1),y({method:"",name:"",mobileNumber:"",accountType:"Personal",color:"#000000",icon:"Phone",instructions:[],logoUrl:"",useCustomLogo:!1}),T("")}catch(e){console.error("Create error:",e),A(e.message||"Failed to create payment method","error")}},variant:"contained",startIcon:jsxRuntimeExports.jsx(Save,{}),children:"Create Payment Method"})]})]})]})},UserRoleManagement=()=>{var e,t,n;const[r,i]=reactExports.useState([]),[s,a]=reactExports.useState([]),{user:o,refreshUser:l}=useAuth(),[c,u]=reactExports.useState(!0),[d,h]=reactExports.useState(!1),[p,m]=reactExports.useState(!1),[f,g]=reactExports.useState(null),[x,v]=reactExports.useState(""),[y,_]=reactExports.useState("all"),[E,b]=reactExports.useState({}),[C,S]=reactExports.useState({}),[T,R]=reactExports.useState(""),[j,w]=reactExports.useState(""),A={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},I={user:0,moderator:1,manager:2,admin:3,superadmin:4},k=()=>{if(!o)return[];switch(o.role){case"superadmin":return["user","moderator","manager","admin","superadmin"];case"admin":return["user","moderator","manager"];case"manager":return["user","moderator"];default:return[]}};reactExports.useEffect(()=>{l(),M()},[]);const M=async()=>{try{u(!0);const e=await axios.get("/api/users",A),t=Array.isArray(e.data)?e.data:[];i(t.map(e=>({...e,permissions:{permissions:{},limits:{},isCustom:!1},usage:{today:{},thisMonth:{}}}))),a([{role:"admin",permissions:{users:{read:!0,write:!0,admin:!0},payments:{read:!0,write:!0,admin:!0},packages:{read:!0,write:!0,admin:!0}}},{role:"manager",permissions:{users:{read:!0,write:!0,admin:!1},payments:{read:!0,write:!0,admin:!1},packages:{read:!0,write:!1,admin:!1}}}])}catch(e){console.error("Error fetching data:",e),R("Failed to load user data")}finally{u(!1)}},P=async(e,t)=>{var n,i;try{const n=r.find(t=>t._id===e);if(!n)return void R("User not found");if(e===o.id||e===o._id)return void R("You cannot change your own role");if(!D(n))return void R("You do not have permission to edit this user");if(!(e=>{if(!o)return!1;const t=I[o.role]||0,n=I[e]||0;return!("superadmin"===e&&"superadmin"!==o.role||"admin"===e&&"superadmin"!==o.role||"superadmin"!==o.role&&n>=t)})(t))return void R(`You cannot assign the ${t} role`);await axios.put(`/api/users/${e}`,{role:t},A),w("Role updated successfully"),M()}catch(s){R((null==(i=null==(n=s.response)?void 0:n.data)?void 0:i.message)||"Failed to update role")}},L=e=>{switch(e){case"superadmin":return"secondary";case"admin":return"error";case"manager":return"warning";case"moderator":return"info";default:return"default"}},D=e=>!(!o||!e)&&(e._id!==o.id&&e._id!==o._id&&("superadmin"===o.role||("admin"===o.role?!["superadmin"].includes(e.role):"manager"===o.role&&["user","moderator"].includes(e.role)))),O=r.filter(e=>{const t=e.name.toLowerCase().includes(x.toLowerCase())||e.email.toLowerCase().includes(x.toLowerCase()),n="all"===y||e.role===y;return t&&n});return c?jsxRuntimeExports.jsx(LinearProgress,{}):jsxRuntimeExports.jsxs(Box,{sx:{p:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",gutterBottom:!0,children:"User Role Management"}),T&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},onClose:()=>R(""),children:T}),j&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},onClose:()=>w(""),children:j}),jsxRuntimeExports.jsxs(Alert,{severity:"info",sx:{mb:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{mb:1},children:jsxRuntimeExports.jsx("strong",{children:"Role Management Rules:"})}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",component:"div",children:[" You cannot edit your own role or delete yourself",jsxRuntimeExports.jsx("br",{})," Super Admin: Can manage ALL users including Admins and assign any role",jsxRuntimeExports.jsx("br",{})," Admin: Can manage users, managers, moderators (cannot manage Super Admins)",jsxRuntimeExports.jsx("br",{})," Manager: Can only manage Users and Moderators",jsxRuntimeExports.jsx("br",{})," Moderator: Cannot manage other users' roles",jsxRuntimeExports.jsx("br",{})," Role Hierarchy: Super Admin ",">"," Admin ",">"," Manager ",">"," Moderator ",">"," User"]})]}),o&&jsxRuntimeExports.jsx(Card,{sx:{mb:3},children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Your Current Permissions"}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,children:[jsxRuntimeExports.jsxs(Grid,{item:!0,xs:12,md:6,children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",mb:1},children:[jsxRuntimeExports.jsx(Chip,{label:null==(e=o.role)?void 0:e.toUpperCase(),color:L(o.role),sx:{mr:1}}),jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:()=>{l(),w("User data refreshed!")},title:"Refresh user data",sx:{mr:1},children:jsxRuntimeExports.jsx(Refresh,{})}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",sx:{ml:1},children:[o.name," (",o.email,")"]})]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Available Roles: ",k().join(", ")]})]}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:6,children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Role Hierarchy: ",Object.entries(I).sort(([,e],[,t])=>t-e).map(([e])=>e.charAt(0).toUpperCase()+e.slice(1)).join(" > ")]})})]})]})}),jsxRuntimeExports.jsx(Card,{sx:{mb:3},children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,alignItems:"center",children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Search Users",value:x,onChange:e=>v(e.target.value),placeholder:"Search by name or email..."})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:4,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Filter by Role"}),jsxRuntimeExports.jsxs(Select$1,{value:y,onChange:e=>_(e.target.value),label:"Filter by Role",children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"all",children:"All Roles"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"user",children:"User"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"moderator",children:"Moderator"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"manager",children:"Manager"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"admin",children:"Admin"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"superadmin",children:"Super Admin"})]})]})})]})})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsxs(Typography,{variant:"h6",gutterBottom:!0,children:["Users (",O.length,")"]}),jsxRuntimeExports.jsx(TableContainer,{component:Paper,children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"User"}),jsxRuntimeExports.jsx(TableCell,{children:"Role"}),jsxRuntimeExports.jsx(TableCell,{children:"Permissions"}),jsxRuntimeExports.jsx(TableCell,{children:"Usage Today"}),jsxRuntimeExports.jsx(TableCell,{children:"Actions"})]})}),jsxRuntimeExports.jsx(TableBody,{children:O.map(e=>{var t,n,i,s;return jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",children:e.name}),(e._id===o.id||e._id===o._id)&&jsxRuntimeExports.jsx(Chip,{label:"You",color:"primary",size:"small"}),!D(e)&&e._id!==o.id&&e._id!==o._id&&jsxRuntimeExports.jsx(Chip,{label:"Protected",color:"warning",size:"small"})]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:e.email})]})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(Chip,{label:null==(t=e.role)?void 0:t.toUpperCase(),color:L(e.role),size:"small"}),(null==(n=e.permissions)?void 0:n.isCustom)&&jsxRuntimeExports.jsx(Tooltip,{title:"Has custom permissions",children:jsxRuntimeExports.jsx(Security,{color:"secondary",sx:{ml:1,fontSize:16}})})]})}),jsxRuntimeExports.jsx(TableCell,{children:(null==(i=e.permissions)?void 0:i.permissions)&&jsxRuntimeExports.jsx(Tooltip,{title:"Click to view details",children:jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:()=>{g(e),h(!0)},children:jsxRuntimeExports.jsx(Info,{})})})}),jsxRuntimeExports.jsx(TableCell,{children:(null==(s=e.usage)?void 0:s.today)&&Object.keys(e.usage.today).length>0?jsxRuntimeExports.jsx(Box,{children:Object.entries(e.usage.today).map(([e,t])=>jsxRuntimeExports.jsx(Chip,{label:`${e}: ${t}`,size:"small",sx:{mr:.5,mb:.5}},e))}):jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"No activity"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Box,{sx:{display:"flex",gap:1},children:D(e)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FormControl,{size:"small",sx:{minWidth:100},children:jsxRuntimeExports.jsx(Select$1,{value:e.role,onChange:t=>P(e._id,t.target.value),displayEmpty:!0,children:k().map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),["admin","superadmin"].includes(null==o?void 0:o.role)&&jsxRuntimeExports.jsx(Tooltip,{title:"Set custom permissions",children:jsxRuntimeExports.jsx(IconButton,{onClick:()=>{var t,n;g(e),b((null==(t=e.permissions)?void 0:t.permissions)||{}),S((null==(n=e.permissions)?void 0:n.limits)||{}),m(!0)},children:jsxRuntimeExports.jsx(Security,{})})}),jsxRuntimeExports.jsx(Tooltip,{title:"Delete user",children:jsxRuntimeExports.jsx(IconButton,{color:"error",onClick:()=>(async e=>{var t,n;if(e===o.id||e===o._id)return void R("You cannot delete your own account");const i=r.find(t=>t._id===e);if(i)if(D(i)){if(window.confirm("Are you sure you want to delete this user?"))try{await axios.delete(`/api/users/${e}`,A),w("User deleted successfully"),M()}catch(s){R((null==(n=null==(t=s.response)?void 0:t.data)?void 0:n.message)||"Failed to delete user")}}else R("You do not have permission to delete this user");else R("User not found")})(e._id),children:jsxRuntimeExports.jsx(DeleteIcon,{})})})]})})})]},e._id)})})]})})]})}),jsxRuntimeExports.jsxs(Dialog,{open:d,onClose:()=>h(!1),maxWidth:"md",fullWidth:!0,children:[jsxRuntimeExports.jsxs(DialogTitle,{children:["User Permissions: ",null==f?void 0:f.name]}),jsxRuntimeExports.jsx(DialogContent,{children:(null==f?void 0:f.permissions)&&jsxRuntimeExports.jsxs(Box,{sx:{mt:2},children:[jsxRuntimeExports.jsx(Card,{sx:{mb:2},children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Role Information"}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:1,mb:2},children:[jsxRuntimeExports.jsx(Chip,{label:null==(t=f.role)?void 0:t.toUpperCase(),color:L(f.role)}),f.permissions.isCustom&&jsxRuntimeExports.jsx(Chip,{label:"Custom Permissions",color:"secondary"})]})]})}),jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Permissions Breakdown"}),Object.entries(f.permissions.permissions||{}).map(([e,t])=>jsxRuntimeExports.jsxs(Accordion,{children:[jsxRuntimeExports.jsx(AccordionSummary,{expandIcon:jsxRuntimeExports.jsx(ExpandMore,{}),children:jsxRuntimeExports.jsx(Typography,{variant:"subtitle1",sx:{textTransform:"capitalize"},children:e})}),jsxRuntimeExports.jsx(AccordionDetails,{children:jsxRuntimeExports.jsx(Box,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(t).map(([e,t])=>jsxRuntimeExports.jsx(Chip,{label:e,color:t?"success":"error",variant:t?"filled":"outlined"},e))})})]},e)),f.permissions.limits&&jsxRuntimeExports.jsxs(Box,{sx:{mt:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Usage Limits"}),Object.entries(f.permissions.limits).map(([e,t])=>jsxRuntimeExports.jsx(Card,{sx:{mb:1},children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsxs(Typography,{variant:"subtitle1",sx:{textTransform:"capitalize",mb:1},children:[e," Limits"]}),Object.entries(t).map(([t,n])=>{var r,i;const s=(null==(i=null==(r=f.usage)?void 0:r[e])?void 0:i[t])||0,a=((e,t)=>t?Math.min(e/t*100,100):0)(s,n);return jsxRuntimeExports.jsxs(Box,{sx:{mb:1},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{textTransform:"capitalize"},children:t}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",children:[s," / ",n]})]}),jsxRuntimeExports.jsx(LinearProgress,{variant:"determinate",value:a,color:a>80?"error":a>60?"warning":"primary"})]},t)})]})},e))]})]})}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button$2,{onClick:()=>h(!1),children:"Close"})})]}),jsxRuntimeExports.jsxs(Dialog,{open:p,onClose:()=>m(!1),maxWidth:"md",fullWidth:!0,children:[jsxRuntimeExports.jsxs(DialogTitle,{children:["Set Custom Permissions: ",null==f?void 0:f.name]}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(Alert,{severity:"info",sx:{mb:2},children:"Custom permissions override the default role permissions. Leave empty to use role defaults."}),s.length>0&&jsxRuntimeExports.jsx(Box,{sx:{mt:2},children:Object.keys((null==(n=s[0])?void 0:n.permissions)||{}).map(e=>jsxRuntimeExports.jsxs(Accordion,{children:[jsxRuntimeExports.jsx(AccordionSummary,{expandIcon:jsxRuntimeExports.jsx(ExpandMore,{}),children:jsxRuntimeExports.jsx(Typography,{variant:"subtitle1",sx:{textTransform:"capitalize"},children:e})}),jsxRuntimeExports.jsx(AccordionDetails,{children:Object.keys(s[0].permissions[e]||{}).map(t=>{var n;return jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Switch,{checked:(null==(n=E[e])?void 0:n[t])||!1,onChange:n=>{b(r=>({...r,[e]:{...r[e],[t]:n.target.checked}}))}}),label:t},t)})})]},e))})]}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>m(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{onClick:async()=>{var e,t;try{R("Custom permissions feature not yet implemented"),m(!1)}catch(n){R((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to set permissions")}},variant:"contained",children:"Save Permissions"})]})]})]})},UserManagement=()=>{var e,t,n;const[r,i]=reactExports.useState([]),[s,a]=reactExports.useState(!0),[o,l]=reactExports.useState(!1),[c,u]=reactExports.useState(!1),[d,h]=reactExports.useState(!1),[p,m]=reactExports.useState(!1),[f,g]=reactExports.useState(null),[x,v]=reactExports.useState([]),[y,_]=reactExports.useState(""),[E,b]=reactExports.useState("all"),[C,S]=reactExports.useState([]),[T,R]=reactExports.useState(""),[j,w]=reactExports.useState(""),[A,I]=reactExports.useState("days"),[k,M]=reactExports.useState(""),[P,L]=reactExports.useState(""),{user:D}=useAuth(),O={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}};reactExports.useEffect(()=>{$(),N()},[]);const $=async()=>{try{a(!0);const e=await axios.get("/api/users",O),t=Array.isArray(e.data)?e.data:[];i(t)}catch(e){console.error("Error fetching users:",e),M("Failed to load users")}finally{a(!1)}},N=async()=>{try{const e=await axios.get("/api/packages",O),t=Array.isArray(e.data)?e.data:[];S(t.filter(e=>e.isActive))}catch(e){console.error("Error fetching packages:",e)}},F=async e=>{try{const t=await axios.get(`/api/user-packages/user/${e}`,O);v(t.data||[])}catch(t){console.error("Error fetching user packages:",t),v([])}},B=e=>{if(!D||!["manager","admin","superadmin"].includes(D.role))return!1;const t={user:0,moderator:1,manager:2,admin:3,superadmin:4};return(t[D.role]||0)>(t[e.role]||0)},U=e=>{switch(e){case"superadmin":return"secondary";case"admin":return"error";case"manager":return"warning";case"moderator":return"info";default:return"default"}},G=r.filter(e=>{var t,n;const r=(null==(t=e.name)?void 0:t.toLowerCase().includes(y.toLowerCase()))||(null==(n=e.email)?void 0:n.toLowerCase().includes(y.toLowerCase())),i="all"===E||e.role===E;return r&&i});return s?jsxRuntimeExports.jsxs(Box,{sx:{p:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",gutterBottom:!0,children:"User Management"}),jsxRuntimeExports.jsx(LinearProgress,{}),jsxRuntimeExports.jsx(Typography,{sx:{mt:2},children:"Loading users..."})]}):jsxRuntimeExports.jsxs(Box,{sx:{p:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",gutterBottom:!0,children:"User Management"}),k&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},onClose:()=>M(""),children:k}),P&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},onClose:()=>L(""),children:P}),D&&jsxRuntimeExports.jsx(Card,{sx:{mb:3},children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Current Session"}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",mb:1},children:[jsxRuntimeExports.jsx(Avatar,{sx:{mr:2},children:null==(e=D.name)?void 0:e.charAt(0)}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:[D.name," (",D.email,")"]}),jsxRuntimeExports.jsx(Chip,{label:null==(t=D.role)?void 0:t.toUpperCase(),color:U(D.role),size:"small"})]})]})]})}),jsxRuntimeExports.jsx(Card,{sx:{mb:3},children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,alignItems:"center",children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:6,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Search Users",value:y,onChange:e=>_(e.target.value),placeholder:"Search by name or email..."})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:4,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,children:[jsxRuntimeExports.jsx(InputLabel,{children:"Filter by Role"}),jsxRuntimeExports.jsxs(Select$1,{value:E,onChange:e=>b(e.target.value),label:"Filter by Role",children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"all",children:"All Roles"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"user",children:"Users"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"moderator",children:"Moderators"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"manager",children:"Managers"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"admin",children:"Admins"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"superadmin",children:"Super Admins"})]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:2,children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Total: ",G.length," users"]})})]})})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(TableContainer,{component:Paper,children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"User"}),jsxRuntimeExports.jsx(TableCell,{children:"Role"}),jsxRuntimeExports.jsx(TableCell,{children:"Email"}),jsxRuntimeExports.jsx(TableCell,{children:"Balance"}),jsxRuntimeExports.jsx(TableCell,{children:"Status"}),jsxRuntimeExports.jsx(TableCell,{align:"center",children:"Actions"})]})}),jsxRuntimeExports.jsx(TableBody,{children:G.map(e=>{var t,n;return jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(Avatar,{sx:{mr:2},children:null==(t=e.name)?void 0:t.charAt(0)}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",fontWeight:"bold",children:e.name}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"text.secondary",children:["ID: ",e._id]})]})]})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Chip,{label:null==(n=e.role)?void 0:n.toUpperCase(),color:U(e.role),size:"small"})}),jsxRuntimeExports.jsx(TableCell,{children:e.email}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"primary.main",fontWeight:"bold",children:["",e.balance||0]})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Chip,{label:!1===e.isActive?"Inactive":"Active",color:!1===e.isActive?"error":"success",size:"small",icon:!1===e.isActive?jsxRuntimeExports.jsx(CancelIcon,{}):jsxRuntimeExports.jsx(CheckCircle,{})})}),jsxRuntimeExports.jsx(TableCell,{align:"center",children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[jsxRuntimeExports.jsx(Tooltip,{title:"View Details",children:jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:()=>(async e=>{g(e),u(!0)})(e),children:jsxRuntimeExports.jsx(ViewIcon,{})})}),["manager","admin","superadmin"].includes(null==D?void 0:D.role)&&B(e)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Tooltip,{title:"Assign Package",children:jsxRuntimeExports.jsx(IconButton,{size:"small",color:"primary",onClick:()=>{g(e),l(!0)},children:jsxRuntimeExports.jsx(PackageIcon,{})})}),jsxRuntimeExports.jsx(Tooltip,{title:"Manage Packages",children:jsxRuntimeExports.jsx(IconButton,{size:"small",color:"info",onClick:()=>(async e=>{g(e),await F(e._id),m(!0)})(e),children:jsxRuntimeExports.jsx(ChangePackageIcon,{})})}),jsxRuntimeExports.jsx(Tooltip,{title:!1===e.isActive?"Activate User":"Deactivate User",children:jsxRuntimeExports.jsx(IconButton,{size:"small",color:!1===e.isActive?"success":"warning",onClick:()=>(async e=>{var t,n;try{const t=!1===e.isActive,n=t?"activate":"deactivate";await axios.patch(`/api/users/${e._id}/toggle-status`,{isActive:t},O),L(`User ${n}d successfully`),$()}catch(r){M((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||`Failed to ${e.isActive?"deactivate":"activate"} user`)}})(e),children:!1===e.isActive?jsxRuntimeExports.jsx(UnbanUserIcon,{}):jsxRuntimeExports.jsx(BanUserIcon,{})})})]})]})})]},e._id)})})]})})})}),jsxRuntimeExports.jsxs(Dialog,{open:o,onClose:()=>l(!1),maxWidth:"sm",fullWidth:!0,children:[jsxRuntimeExports.jsxs(DialogTitle,{children:["Assign Package to ",null==f?void 0:f.name]}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsxs(Box,{sx:{mt:2},children:[jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,sx:{mb:3},children:[jsxRuntimeExports.jsx(InputLabel,{children:"Select Package"}),jsxRuntimeExports.jsx(Select$1,{value:T,onChange:e=>R(e.target.value),label:"Select Package",children:C.map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e._id,children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",width:"100%"},children:[jsxRuntimeExports.jsx(Typography,{children:e.name}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["$",e.price," - ",e.duration," ",e.durationUnit]})]})},e._id))})]}),jsxRuntimeExports.jsx(Typography,{variant:"subtitle1",sx:{mb:1},children:"Custom Duration (Optional)"}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:2,mb:2},children:[jsxRuntimeExports.jsx(TextField,{label:"Duration",type:"number",value:j,onChange:e=>w(e.target.value),placeholder:"Leave empty to use package default",sx:{flex:1}}),jsxRuntimeExports.jsxs(FormControl,{sx:{minWidth:120},children:[jsxRuntimeExports.jsx(InputLabel,{children:"Unit"}),jsxRuntimeExports.jsxs(Select$1,{value:A,onChange:e=>I(e.target.value),label:"Unit",children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"minutes",children:"Minutes"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"hours",children:"Hours"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"days",children:"Days"})]})]})]}),T&&jsxRuntimeExports.jsx(Alert,{severity:"info",sx:{mt:2},children:"This will give the user immediate access to the selected package. The package will be marked as admin-assigned and no payment will be required."})]})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>l(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",onClick:async()=>{var e,t;try{if(!T)return void M("Please select a package");const e={packageId:T};j&&(e.duration=parseInt(j),e.durationUnit=A),await axios.post(`/api/users/${f._id}/assign-package`,e,O),L(`Package assigned successfully to ${f.name}`),l(!1),R(""),w(""),I("days"),$()}catch(n){M((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to assign package")}},disabled:!T,children:"Assign Package"})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:c,onClose:()=>u(!1),maxWidth:"md",fullWidth:!0,children:[jsxRuntimeExports.jsxs(DialogTitle,{children:["User Details: ",null==f?void 0:f.name]}),jsxRuntimeExports.jsx(DialogContent,{children:f&&jsxRuntimeExports.jsx(Box,{sx:{mt:2},children:jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:6,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Basic Information"}),jsxRuntimeExports.jsxs(Typography,{children:[jsxRuntimeExports.jsx("strong",{children:"Name:"})," ",f.name]}),jsxRuntimeExports.jsxs(Typography,{children:[jsxRuntimeExports.jsx("strong",{children:"Email:"})," ",f.email]}),jsxRuntimeExports.jsxs(Typography,{children:[jsxRuntimeExports.jsx("strong",{children:"Role:"})," ",f.role]}),jsxRuntimeExports.jsxs(Typography,{children:[jsxRuntimeExports.jsx("strong",{children:"Balance:"})," ",f.balance||0]}),jsxRuntimeExports.jsxs(Typography,{children:[jsxRuntimeExports.jsx("strong",{children:"User ID:"})," ",f._id]})]})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:6,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Account Status"}),jsxRuntimeExports.jsxs(Typography,{children:[jsxRuntimeExports.jsx("strong",{children:"Status:"})," Active"]}),jsxRuntimeExports.jsxs(Typography,{children:[jsxRuntimeExports.jsx("strong",{children:"Packages:"})," ",(null==(n=f.currentPackages)?void 0:n.length)||0]}),jsxRuntimeExports.jsxs(Typography,{children:[jsxRuntimeExports.jsx("strong",{children:"Registration:"})," User"]})]})})})]})})}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button$2,{onClick:()=>u(!1),children:"Close"})})]}),jsxRuntimeExports.jsxs(Dialog,{open:p,onClose:()=>m(!1),maxWidth:"md",fullWidth:!0,children:[jsxRuntimeExports.jsxs(DialogTitle,{children:["Manage Packages: ",null==f?void 0:f.name]}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsx(Box,{sx:{mt:2},children:x.length>0?jsxRuntimeExports.jsx(TableContainer,{component:Paper,children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Package"}),jsxRuntimeExports.jsx(TableCell,{children:"Price"}),jsxRuntimeExports.jsx(TableCell,{children:"Duration"}),jsxRuntimeExports.jsx(TableCell,{children:"Status"}),jsxRuntimeExports.jsx(TableCell,{children:"Method"}),jsxRuntimeExports.jsx(TableCell,{align:"center",children:"Actions"})]})}),jsxRuntimeExports.jsx(TableBody,{children:x.map(e=>{var t,n,r,i,s,a,o,l;return jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:(null==(t=e.packageSnapshot)?void 0:t.name)||(null==(n=e.package)?void 0:n.name)||"Package"}),jsxRuntimeExports.jsxs(TableCell,{children:["",(null==(r=e.packageSnapshot)?void 0:r.price)||(null==(i=e.package)?void 0:i.price)||0]}),jsxRuntimeExports.jsxs(TableCell,{children:[(null==(s=e.packageSnapshot)?void 0:s.duration)||(null==(a=e.package)?void 0:a.duration)," ",(null==(o=e.packageSnapshot)?void 0:o.durationUnit)||(null==(l=e.package)?void 0:l.durationUnit)]}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Chip,{label:new Date(e.endDate)>new Date?"Active":"Expired",color:new Date(e.endDate)>new Date?"success":"default",size:"small"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Chip,{label:"admin_assigned"===e.purchaseMethod?`Assigned by ${e.assignedByRole||"Admin"}`:"ads"===e.purchaseMethod?"Ad Unlock":"manual_payment"===e.purchaseMethod?"Manual Payment":"Balance",color:"admin_assigned"===e.purchaseMethod?"warning":"ads"===e.purchaseMethod?"success":"primary",size:"small"})}),jsxRuntimeExports.jsx(TableCell,{align:"center",children:new Date(e.endDate)>new Date&&jsxRuntimeExports.jsx(Tooltip,{title:"Deactivate Package",children:jsxRuntimeExports.jsx(IconButton,{size:"small",color:"error",onClick:()=>(async e=>{var t,n;try{await axios.patch(`/api/user-packages/${e}/deactivate`,{},O),L("Package deactivated successfully"),await F(f._id),$()}catch(r){M((null==(n=null==(t=r.response)?void 0:t.data)?void 0:n.message)||"Failed to deactivate package")}})(e._id),children:jsxRuntimeExports.jsx(Close,{})})})})]},e._id)})})]})}):jsxRuntimeExports.jsx(Alert,{severity:"info",children:"This user has no packages assigned."})})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>h(!0),variant:"outlined",children:"Change Package"}),jsxRuntimeExports.jsx(Button$2,{onClick:()=>m(!1),children:"Close"})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:d,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,children:[jsxRuntimeExports.jsxs(DialogTitle,{children:["Change Package for ",null==f?void 0:f.name]}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsxs(Box,{sx:{mt:2},children:[jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,sx:{mb:3},children:[jsxRuntimeExports.jsx(InputLabel,{children:"Select New Package"}),jsxRuntimeExports.jsx(Select$1,{value:T,onChange:e=>R(e.target.value),label:"Select New Package",children:C.map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e._id,children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",width:"100%"},children:[jsxRuntimeExports.jsx(Typography,{children:e.name}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["",e.price," - ",e.duration," ",e.durationUnit]})]})},e._id))})]}),jsxRuntimeExports.jsx(Typography,{variant:"subtitle1",sx:{mb:1},children:"Custom Duration (Optional)"}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:2,mb:2},children:[jsxRuntimeExports.jsx(TextField,{label:"Duration",type:"number",value:j,onChange:e=>w(e.target.value),placeholder:"Leave empty to use package default",sx:{flex:1}}),jsxRuntimeExports.jsxs(FormControl,{sx:{minWidth:120},children:[jsxRuntimeExports.jsx(InputLabel,{children:"Unit"}),jsxRuntimeExports.jsxs(Select$1,{value:A,onChange:e=>I(e.target.value),label:"Unit",children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"minutes",children:"Minutes"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"hours",children:"Hours"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"days",children:"Days"})]})]})]}),T&&jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mt:2},children:"This will assign a new package to the user. Any existing active packages will remain active."})]})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>h(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{variant:"contained",onClick:async()=>{var e,t;try{if(!T)return void M("Please select a new package");const e={packageId:T};j&&(e.duration=parseInt(j),e.durationUnit=A),await axios.post(`/api/users/${f._id}/assign-package`,e,O),L(`Package changed successfully for ${f.name}`),h(!1),R(""),w(""),I("days"),$()}catch(n){M((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to change package")}},disabled:!T,children:"Assign New Package"})]})]})]})},Admin=()=>{const[e,t]=reactExports.useState(0);return jsxRuntimeExports.jsx(Container,{children:jsxRuntimeExports.jsxs(Box,{sx:{mb:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",gutterBottom:!0,children:"Admin Dashboard"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Manage your Live TV platform content and settings"}),jsxRuntimeExports.jsx(Paper,{sx:{width:"100%",mb:3},children:jsxRuntimeExports.jsxs(Tabs,{value:e,onChange:(e,n)=>{t(n)},variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:[jsxRuntimeExports.jsx(Tab,{icon:jsxRuntimeExports.jsx(LiveTv$1,{}),label:"Channels",iconPosition:"start"}),jsxRuntimeExports.jsx(Tab,{icon:jsxRuntimeExports.jsx(Category,{}),label:"Categories",iconPosition:"start"}),jsxRuntimeExports.jsx(Tab,{icon:jsxRuntimeExports.jsx(Event$2,{}),label:"Events",iconPosition:"start"}),jsxRuntimeExports.jsx(Tab,{icon:jsxRuntimeExports.jsx(TrendingUp,{}),label:"Statistics",iconPosition:"start"}),jsxRuntimeExports.jsx(Tab,{icon:jsxRuntimeExports.jsx(People,{}),label:"Users",iconPosition:"start"}),jsxRuntimeExports.jsx(Tab,{icon:jsxRuntimeExports.jsx(Security,{}),label:"Role Management",iconPosition:"start"}),jsxRuntimeExports.jsx(Tab,{icon:jsxRuntimeExports.jsx(Star$1,{}),label:"Premium Packages",iconPosition:"start"}),jsxRuntimeExports.jsx(Tab,{icon:jsxRuntimeExports.jsx(Campaign,{}),label:"Advertisement Manager",iconPosition:"start"}),jsxRuntimeExports.jsx(Tab,{icon:jsxRuntimeExports.jsx(Payment,{}),label:"Payments & Purchase",iconPosition:"start"}),jsxRuntimeExports.jsx(Tab,{icon:jsxRuntimeExports.jsx(CreditCard,{}),label:"Payment Methods",iconPosition:"start"}),jsxRuntimeExports.jsx(Tab,{icon:jsxRuntimeExports.jsx(Settings$1,{}),label:"Settings",iconPosition:"start"})]})}),jsxRuntimeExports.jsx(Box,{sx:{mt:3},children:(()=>{switch(e){case 0:default:return jsxRuntimeExports.jsx(AdminChannels,{});case 1:return jsxRuntimeExports.jsx(AdminCategories,{});case 2:return jsxRuntimeExports.jsx(AdminEvents,{});case 3:return jsxRuntimeExports.jsx(AdminStats,{});case 4:return jsxRuntimeExports.jsx(UserManagement,{});case 5:return jsxRuntimeExports.jsx(UserRoleManagement,{});case 6:return jsxRuntimeExports.jsx(AdminPackages,{});case 7:return jsxRuntimeExports.jsx(AdminAds,{});case 8:return jsxRuntimeExports.jsx(AdminPayments,{});case 9:return jsxRuntimeExports.jsx(AdminPaymentMethods,{});case 10:return jsxRuntimeExports.jsx(AdminSettings,{})}})()})]})})},PAGE_SIZE=12,Dashboard=()=>{var e,t;const{user:n,refreshUser:r}=useAuth(),i=useDispatch();useSelector(selectAuth);const s=useNavigate(),{settings:a}=useSettings(),{toggleFavorite:o,isFavorite:l}=useFavorites(),[c,u]=reactExports.useState([]),[d,h]=reactExports.useState([]),[p,m]=reactExports.useState(!0),[f,g]=reactExports.useState(1),[x,v]=reactExports.useState(""),[y,_]=reactExports.useState(""),[E,b]=reactExports.useState(""),[C,S]=reactExports.useState("newest"),[T,R]=reactExports.useState(null),[j,w]=reactExports.useState(!1),[A,I]=reactExports.useState(""),[k,M]=reactExports.useState(""),[P,L]=reactExports.useState(""),[D,O]=reactExports.useState(""),[$,N]=reactExports.useState(""),[F,B]=reactExports.useState(""),[U,G]=reactExports.useState(""),[V,H]=reactExports.useState(""),[W,q]=reactExports.useState(""),[z,K]=reactExports.useState(null),[Y,Q]=reactExports.useState(""),[X,Z]=reactExports.useState(""),[J,ee]=reactExports.useState(!1),[te,ne]=reactExports.useState(!1),[re,ie]=reactExports.useState(!1),[se,ae]=reactExports.useState(null),[oe,le]=reactExports.useState(!1),[ce,ue]=reactExports.useState(new Map),[de,he]=reactExports.useState([]),[pe,me]=reactExports.useState(!0),{checkChannelAccess:fe}=usePremiumAccess(),ge=reactExports.useMemo(()=>generateGenericPageMetaTags("dashboard",a),[a]);resolveSiteTitle(a),reactExports.useEffect(()=>{let e=!0;return(async()=>{try{m(!0);const[t,n]=await Promise.all([channelsAPI.getAll(),categoriesAPI.getAll()]);if(!e)return;const r=Array.isArray(t.data)?t.data:[];if(u(r),h(Array.isArray(n.data)?n.data:[]),r.length>0){const t=await bulkCheckPremiumChannels(r);e&&ue(t)}}catch(e2){console.error("Failed to load channels/categories for dashboard",e2),u([]),h([])}finally{e&&m(!1)}})(),()=>{e=!1}},[]);const xe=async()=>{try{me(!0);const e=(await userPackagesAPI.getMyPackages()).data.filter(e=>new Date(e.endDate)>new Date);he(e)}catch(e){console.error("Failed to load active packages:",e),he([])}finally{me(!1)}};reactExports.useEffect(()=>{xe()},[]),reactExports.useEffect(()=>{const e=setInterval(()=>{he(e=>e.filter(e=>new Date(e.endDate)>new Date))},6e4);return()=>clearInterval(e)},[]);const ve=e=>{const t=new Date,n=new Date(e)-t;if(n<=0)return"Expired";const r=Math.floor(n/36e5),i=Math.floor(n%36e5/6e4);return r>0?`${r}h ${i}m remaining`:`${i}m remaining`},ye=reactExports.useMemo(()=>{const e=new Set;return c.forEach(t=>{t.region&&e.add(t.region)}),Array.from(e).sort()},[c]),_e=reactExports.useMemo(()=>{const e=d.find(e=>{var t;return null==(t=e.name)?void 0:t.toLowerCase().includes("sport")});return e?[e,...d.filter(t=>t!==e)]:d},[d]),Ee=reactExports.useMemo(()=>{let e=c.filter(e=>{var t;return e.name.toLowerCase().includes(x.toLowerCase())&&(""===y||(null==(t=e.category)?void 0:t._id)===y)&&(""===E||e.region===E)});return"newest"===C?e.sort((e,t)=>new Date(t.createdAt||0)-new Date(e.createdAt||0)):"oldest"===C?e.sort((e,t)=>new Date(e.createdAt||0)-new Date(t.createdAt||0)):"atoz"===C?e.sort((e,t)=>e.name.localeCompare(t.name)):"random"===C&&(e=e.sort(()=>Math.random()-.5)),e},[c,x,y,E,C]),be=Math.ceil(Ee.length/PAGE_SIZE)||1,Ce=reactExports.useMemo(()=>Ee.slice((f-1)*PAGE_SIZE,(f-1)*PAGE_SIZE+PAGE_SIZE),[Ee,f]),Se=()=>R(null),Te=e=>{S(e),Se()},Re=async e=>{(await fe(e._id)).hasAccess?s(generateChannelUrl(e._id,e.name)):(ae(e),le(!0))},je=()=>w(!1);return jsxRuntimeExports.jsxs(Container,{maxWidth:"xl",sx:{py:4},children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:ge.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:ge.description}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:ge.ogUrl})]}),jsxRuntimeExports.jsx(Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Dashboard"}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:3,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:4,lg:3,children:jsxRuntimeExports.jsx(Card,{sx:{height:"100%"},children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Profile"}),n?jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[jsxRuntimeExports.jsx(Avatar,{src:n.profilePicture,sx:{width:60,height:60},children:!n.profilePicture&&(null==(e=n.name)?void 0:e.charAt(0).toUpperCase())}),jsxRuntimeExports.jsxs(Box,{sx:{flex:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle1",fontWeight:600,children:n.fullName||n.name}),n.fullName&&n.fullName!==n.name&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["@",n.name]})]})]}),jsxRuntimeExports.jsxs(Box,{sx:{mb:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:n.email}),n.phoneNumber&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:["+880",n.phoneNumber]}),jsxRuntimeExports.jsx(Chip,{size:"small",label:n.role||"user",sx:{mt:1}})]}),!n.profileComplete&&jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mb:2,fontSize:"0.75rem"},icon:jsxRuntimeExports.jsx(NotificationImportant,{fontSize:"small"}),children:jsxRuntimeExports.jsx(Typography,{variant:"caption",children:"Complete your profile for better experience"})}),jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mt:2,children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Balance:"}),jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsxs(Typography,{variant:"h6",color:"primary.main",fontWeight:600,children:["",n.balance||"0.00"]}),jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:r,title:"Refresh balance",sx:{color:"text.secondary"},children:jsxRuntimeExports.jsx(Refresh,{fontSize:"small"})})]})]})]}):jsxRuntimeExports.jsx(Typography,{variant:"body2",children:"Not logged in"}),jsxRuntimeExports.jsx(Divider,{sx:{my:2}}),jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,flexWrap:"wrap",children:[jsxRuntimeExports.jsx(Button$2,{onClick:()=>{I((null==n?void 0:n.name)||""),M((null==n?void 0:n.fullName)||""),L((null==n?void 0:n.gender)||""),O((null==n?void 0:n.dateOfBirth)?n.dateOfBirth.split("T")[0]:""),N((null==n?void 0:n.phoneNumber)||""),B(""),G(""),H(""),q(""),Q((null==n?void 0:n.profilePicture)||""),Z((null==n?void 0:n.profilePicture)||""),K(null),ee(!1),w(!0)},variant:(null==n?void 0:n.profileComplete)?"outlined":"contained",size:"small",color:(null==n?void 0:n.profileComplete)?"primary":"warning",startIcon:(null==n?void 0:n.profileComplete)?null:jsxRuntimeExports.jsx(NotificationImportant,{}),children:(null==n?void 0:n.profileComplete)?"Edit Profile":"Complete Profile"}),jsxRuntimeExports.jsx(Button$2,{onClick:()=>s("/payment",{state:{isTopUp:!0}}),variant:"contained",size:"small",color:"primary",children:"Add Balance"})]})]})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:4,lg:3,children:jsxRuntimeExports.jsx(Card,{sx:{height:"100%"},children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Active Packages"}),pe?jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"80%"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"60%"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",width:"100%",height:20,sx:{mt:1}})]}):de.length>0?jsxRuntimeExports.jsxs(Box,{children:[de.slice(0,2).map((e,t)=>{var n,r,i,s;return jsxRuntimeExports.jsxs(Box,{sx:{mb:0===t&&de.length>1?2:0},children:[jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",fontWeight:600,children:(null==(n=e.packageSnapshot)?void 0:n.name)||(null==(r=e.package)?void 0:r.name)||"Package"}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:[jsxRuntimeExports.jsx(Chip,{label:`${(null==(i=e.packageSnapshot)?void 0:i.price)||(null==(s=e.package)?void 0:s.price)||0}`,variant:"outlined",size:"small"}),jsxRuntimeExports.jsx(Chip,{label:"ads"===e.purchaseMethod?"Ad Unlocked":"manual_payment"===e.purchaseMethod?"Manual Payment":"admin_assigned"===e.purchaseMethod?"Admin Assigned":"Paid",color:"ads"===e.purchaseMethod?"success":"manual_payment"===e.purchaseMethod?"info":"admin_assigned"===e.purchaseMethod?"warning":"primary",size:"small"})]}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:ve(e.endDate)}),0===t&&de.length>1&&jsxRuntimeExports.jsx(Divider,{sx:{mt:1}})]},e._id)}),de.length>2&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["+",de.length-2," more packages"]})]}):jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"No active packages."}),jsxRuntimeExports.jsx(Chip,{label:"Free Tier",color:"primary",size:"small"})]}),jsxRuntimeExports.jsx(Divider,{sx:{my:2}}),jsxRuntimeExports.jsx(Button$2,{component:Link,to:"/packages",variant:"contained",size:"small",children:"View Packages"})]})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:4,lg:3,children:jsxRuntimeExports.jsx(Card,{sx:{height:"100%"},children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Purchase Package"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Unlock premium channels & features."}),jsxRuntimeExports.jsx(Button$2,{onClick:()=>ie(!0),variant:"contained",fullWidth:!0,size:"small",children:"View Plans"}),jsxRuntimeExports.jsx(Button$2,{component:Link,to:"/billing",variant:"text",fullWidth:!0,size:"small",sx:{mt:1},children:"Billing History"})]})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,lg:9,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsxs(Box,{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,alignItems:{xs:"stretch",md:"center"},justifyContent:"space-between",mb:2,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",sx:{fontWeight:600},children:"Channels"}),jsxRuntimeExports.jsxs(Box,{display:"flex",flexWrap:"wrap",gap:1,alignItems:"center",children:[jsxRuntimeExports.jsx(TextField,{size:"small",placeholder:"Search",value:x,onChange:e=>{v(e.target.value),g(1)},sx:{width:{xs:"100%",md:160}}}),jsxRuntimeExports.jsxs(FormControl,{size:"small",sx:{minWidth:120},children:[jsxRuntimeExports.jsx(InputLabel,{children:"Category"}),jsxRuntimeExports.jsxs(Select$1,{label:"Category",value:y,onChange:e=>{_(e.target.value),g(1)},children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"",children:"All"}),_e.map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e._id,children:e.name},e._id))]})]}),jsxRuntimeExports.jsxs(FormControl,{size:"small",sx:{minWidth:120},children:[jsxRuntimeExports.jsx(InputLabel,{children:"Region"}),jsxRuntimeExports.jsxs(Select$1,{label:"Region",value:E,onChange:e=>{b(e.target.value),g(1)},children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"",children:"All"}),ye.map(e=>jsxRuntimeExports.jsx(MenuItem$1,{value:e,children:e},e))]})]}),jsxRuntimeExports.jsx(IconButton,{size:"small",onClick:e=>R(e.currentTarget),sx:{border:"1px solid",borderColor:"divider",borderRadius:2},children:jsxRuntimeExports.jsx(FilterList,{fontSize:"small"})}),jsxRuntimeExports.jsxs(Menu$3,{anchorEl:T,open:Boolean(T),onClose:Se,children:[jsxRuntimeExports.jsx(MenuItem$1,{selected:"newest"===C,onClick:()=>Te("newest"),children:"Newest"}),jsxRuntimeExports.jsx(MenuItem$1,{selected:"oldest"===C,onClick:()=>Te("oldest"),children:"Oldest"}),jsxRuntimeExports.jsx(MenuItem$1,{selected:"atoz"===C,onClick:()=>Te("atoz"),children:"A to Z"}),jsxRuntimeExports.jsx(MenuItem$1,{selected:"random"===C,onClick:()=>Te("random"),children:"Random"})]}),jsxRuntimeExports.jsx(Button$2,{size:"small",component:Link,to:"/channels",children:"Full Page"})]})]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"grid",gap:2,gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(3, 1fr)",md:"repeat(4, 1fr)"}},children:[p&&Array.from({length:PAGE_SIZE}).map((e,t)=>jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",height:100}),jsxRuntimeExports.jsx(Skeleton,{variant:"text"})]},t)),!p&&Ce.map(e=>{var t;return jsxRuntimeExports.jsxs(Card,{variant:"outlined",sx:{cursor:"pointer",position:"relative"},onClick:()=>Re(e),children:[jsxRuntimeExports.jsx(PremiumBadge,{isPremium:ce.get(e._id),variant:"overlay"}),jsxRuntimeExports.jsxs(CardContent,{sx:{p:1},children:[jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsx(Avatar,{src:e.logoUrl||e.logo,alt:e.name,sx:{width:40,height:40}}),jsxRuntimeExports.jsxs(Box,{flex:1,children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",fontWeight:600,noWrap:!0,children:e.name}),jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"text.secondary",noWrap:!0,children:(null==(t=e.category)?void 0:t.name)||"Category"})]})]}),jsxRuntimeExports.jsxs(Box,{mt:1,display:"flex",justifyContent:"space-between",alignItems:"center",children:[jsxRuntimeExports.jsx(FavouriteToggle,{channel:e,size:24}),jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[ce.get(e._id)&&jsxRuntimeExports.jsx(PremiumBadge,{isPremium:!0,variant:"chip",size:"small"}),jsxRuntimeExports.jsx(Button$2,{size:"small",variant:"text",onClick:t=>{t.stopPropagation(),Re(e)},children:"Play"})]})]})]})]},e._id)}),!p&&0===Ce.length&&jsxRuntimeExports.jsx(Box,{gridColumn:"1 / -1",children:jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"No channels available."})})]}),jsxRuntimeExports.jsx(Box,{display:"flex",justifyContent:"center",mt:2,children:jsxRuntimeExports.jsx(Pagination,{count:be,page:f,onChange:(e,t)=>g(t),size:"small"})})]})})})]}),jsxRuntimeExports.jsxs(Dialog,{open:j,onClose:je,fullWidth:!0,maxWidth:"md",children:[jsxRuntimeExports.jsx(DialogTitle,{children:(null==n?void 0:n.profileComplete)?"Edit Profile":"Complete Your Profile"}),jsxRuntimeExports.jsxs("form",{onSubmit:e=>{e.preventDefault(),(async()=>{if(H(""),q(""),!A.trim())return void H("Name is required");if(!$.trim())return void H("Phone number is required");if(/^[0-9]{10,11}$/.test($.trim())){if(F||U){if(F.length<6)return void H("Password must be at least 6 characters");if(F!==U)return void H("Passwords do not match")}try{const t={name:A.trim(),password:F||void 0,fullName:k.trim()||void 0,gender:P||void 0,dateOfBirth:D||void 0,phoneNumber:$||void 0,profilePicture:X||void 0},n=await i(updateProfileThunk(t));if(updateProfileThunk.rejected.match(n))H(n.payload||n.error.message||"Update failed");else{q("Profile updated successfully"),B(""),G("");try{const e=await authAPI.getProfile();(null==e?void 0:e.data)&&i(setUser({id:e.data.id,name:e.data.name,email:e.data.email,role:e.data.role}))}catch(e){}w(!1)}}catch(e){H(e.message)}}else H("Please enter a valid phone number (10-11 digits)")})()},children:[jsxRuntimeExports.jsxs(DialogContent,{dividers:!0,children:[V&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},children:V}),W&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},children:W}),jsxRuntimeExports.jsx(Box,{sx:{display:"flex",justifyContent:"center",mb:3},children:jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",display:"inline-flex"},children:[jsxRuntimeExports.jsx(Avatar,{src:Y,sx:{width:100,height:100,bgcolor:"grey.300"},children:!Y&&(null==(t=null==n?void 0:n.name)?void 0:t.charAt(0).toUpperCase())}),J&&jsxRuntimeExports.jsx(CircularProgress,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}}),jsxRuntimeExports.jsxs(IconButton,{component:"label",disabled:J,sx:{position:"absolute",bottom:-5,right:-5,bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},"&:disabled":{bgcolor:"grey.400"},width:35,height:35},children:[jsxRuntimeExports.jsx(PhotoCamera,{sx:{fontSize:20}}),jsxRuntimeExports.jsx("input",{hidden:!0,accept:"image/*",type:"file",onChange:async e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void H("Profile picture must be less than 5MB");if(!t.type.startsWith("image/"))return void H("Please select a valid image file");ee(!0),H("");try{const e=new FileReader;e.onloadend=()=>{Q(e.result)},e.readAsDataURL(t);const n=await uploadImageToImgBB(t,{uploadType:"profile",onProgress:e=>{console.log("Upload progress:",e)}});if(console.log("Upload result:",n),!(n&&n.data&&n.data.url))throw console.error("Upload result structure:",n),new Error("Upload failed - no URL received");Z(n.data.url),K(t),q("Profile picture uploaded successfully!")}catch(n){console.error("Image upload failed:",n),H(`Failed to upload profile picture: ${n.message}`),Q("")}finally{ee(!1)}}},disabled:J})]})]})}),jsxRuntimeExports.jsx(Typography,{variant:"caption",display:"block",textAlign:"center",color:"text.secondary",sx:{mb:3},children:J?"Uploading profile picture...":"Click the camera icon to change profile picture (max 5MB)"}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{label:"Display Name",fullWidth:!0,margin:"normal",value:A,onChange:e=>I(e.target.value),required:!0,helperText:"This will be shown publicly"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{label:"Full Name",fullWidth:!0,margin:"normal",value:k,onChange:e=>M(e.target.value),helperText:"Your complete name"})})]}),jsxRuntimeExports.jsx(TextField,{label:"Phone Number",fullWidth:!0,required:!0,margin:"normal",value:$,onChange:e=>N(e.target.value),helperText:"Required - Enter without country code (+880)",InputProps:{startAdornment:jsxRuntimeExports.jsx(InputAdornment,{position:"start",children:"+880"})}}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,sx:{mt:1},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,sx:{mt:2},children:[jsxRuntimeExports.jsx(FormLabel,{component:"legend",children:"Gender"}),jsxRuntimeExports.jsxs(RadioGroup$1,{row:!0,name:"gender",value:P,onChange:e=>L(e.target.value),children:[jsxRuntimeExports.jsx(FormControlLabel,{value:"male",control:jsxRuntimeExports.jsx(Radio$1,{}),label:"Male"}),jsxRuntimeExports.jsx(FormControlLabel,{value:"female",control:jsxRuntimeExports.jsx(Radio$1,{}),label:"Female"}),jsxRuntimeExports.jsx(FormControlLabel,{value:"other",control:jsxRuntimeExports.jsx(Radio$1,{}),label:"Other"})]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{label:"Date of Birth",fullWidth:!0,margin:"normal",type:"date",value:D,onChange:e=>O(e.target.value),InputLabelProps:{shrink:!0}})})]}),jsxRuntimeExports.jsx(Divider,{sx:{my:3}}),jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",sx:{mb:2},children:"Change Password (Optional)"}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{label:"New Password",type:"password",fullWidth:!0,margin:"normal",value:F,onChange:e=>B(e.target.value),helperText:"Leave blank to keep current password"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,children:jsxRuntimeExports.jsx(TextField,{label:"Confirm New Password",type:"password",fullWidth:!0,margin:"normal",value:U,onChange:e=>G(e.target.value)})})]})]}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button$2,{onClick:je,children:"Cancel"}),jsxRuntimeExports.jsx(Button$2,{type:"submit",variant:"contained",size:"large",children:(null==n?void 0:n.profileComplete)?"Save Changes":"Complete Profile"})]})]})]}),jsxRuntimeExports.jsx(PurchasePackage,{open:re,onClose:()=>ie(!1),onUnlockSuccess:xe}),jsxRuntimeExports.jsx(Dialog,{open:oe,onClose:()=>le(!1),maxWidth:"sm",fullWidth:!0,children:jsxRuntimeExports.jsx(DialogContent,{sx:{p:0},children:jsxRuntimeExports.jsx(PremiumGate,{channelId:null==se?void 0:se._id,showUpgradePrompt:!0,fallbackComponent:null,children:jsxRuntimeExports.jsx("div",{})})})})]})},Packages=()=>{const{user:e,refreshUser:t}=useAuth(),{settings:n}=useSettings(),[r,i]=reactExports.useState([]),[s,a]=reactExports.useState([]),[o,l]=reactExports.useState(!0),[c,u]=reactExports.useState(!1),d=generateGenericPageMetaTags("packages",n);reactExports.useEffect(()=>{h()},[]);const h=async()=>{try{l(!0);const[e,t]=await Promise.all([userPackagesAPI.getAvailable(),userPackagesAPI.getMyPackages()]);i(e.data||[]),a(t.data||[])}catch(e){console.error("Failed to load packages:",e)}finally{l(!1)}},p=e=>{const t=new Date,n=new Date(e)-t;if(n<=0)return"Expired";const r=Math.floor(n/36e5),i=Math.floor(n%36e5/6e4);return r>0?`${r}h ${i}m remaining`:`${i}m remaining`},m=s.filter(e=>new Date(e.endDate)>new Date);return jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:d.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:d.description})]}),jsxRuntimeExports.jsx(Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Packages"}),m.length>0&&jsxRuntimeExports.jsxs(Box,{mb:4,children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",gutterBottom:!0,children:"Your Active Packages"}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:2,children:m.map(e=>{var t,n;return jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:(null==(t=e.packageSnapshot)?void 0:t.name)||(null==(n=e.package)?void 0:n.name)||"Package"}),jsxRuntimeExports.jsx(Chip,{label:"ads"===e.purchaseMethod?"Ad Unlocked":"admin_assigned"===e.purchaseMethod?"Admin Assigned":"manual_payment"===e.purchaseMethod?"Manual Payment":"Paid",color:"ads"===e.purchaseMethod?"success":"admin_assigned"===e.purchaseMethod?"warning":"manual_payment"===e.purchaseMethod?"info":"primary",size:"small",sx:{mb:1}}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:p(e.endDate)})]})})},e._id)})}),jsxRuntimeExports.jsx(Divider,{sx:{my:3}})]}),jsxRuntimeExports.jsxs(Box,{mb:3,children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",gutterBottom:!0,children:"Available Packages"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Choose from our premium packages to unlock exclusive channels and features."})]}),jsxRuntimeExports.jsx(Box,{mb:3,children:jsxRuntimeExports.jsx(Button$2,{variant:"contained",onClick:()=>u(!0),size:"large",children:"View All Packages & Pricing"})}),!e&&jsxRuntimeExports.jsx(Alert,{severity:"info",sx:{mb:3},children:"Please login to view and purchase packages."}),jsxRuntimeExports.jsx(PurchasePackage,{open:c,onClose:()=>u(!1),onUnlockSuccess:h})]})},BillingHistory=()=>{const{user:e}=useAuth(),{settings:t}=useSettings(),[n,r]=reactExports.useState([]),[i,s]=reactExports.useState([]),[a,o]=reactExports.useState(!0),[l,c]=reactExports.useState({totalSpent:0,activePackages:0,totalPackages:0}),u=generateGenericPageMetaTags("billing",t);reactExports.useEffect(()=>{e&&d()},[e]);const d=async()=>{var e;try{o(!0);const[t,n]=await Promise.all([userPackagesAPI.getMyPackages({status:"all"}),paymentsAPI.getMyPayments({limit:100})]),i=t.data||[],a=(null==(e=n.data)?void 0:e.payments)||[];s(i);const l=i.filter(e=>new Date(e.endDate)>new Date),u=i.filter(e=>("balance"===e.purchaseMethod||"manual_payment"===e.purchaseMethod)&&"admin_assigned"!==e.purchaseMethod).reduce((e,t)=>e+(t.amountPaid||0),0),d=a.filter(e=>"approved"===e.status&&!e.isBalanceTopUp).reduce((e,t)=>e+t.amount,0);c({totalSpent:u+d,activePackages:l.length,totalPackages:i.length});const h=i.map(e=>{const t=e.packageSnapshot||e.package||{},n=t.name||"Premium Package";let r;if("ads"===e.purchaseMethod)if(t.adUnlockDuration&&t.adUnlockDurationUnit){const e=1===t.adUnlockDuration?t.adUnlockDurationUnit.slice(0,-1):t.adUnlockDurationUnit;r=`${t.adUnlockDuration} ${e}`}else r="5 minutes";else if(t.duration&&t.durationUnit){const e=1===t.duration?t.durationUnit.slice(0,-1):t.durationUnit;r=`${t.duration} ${e}`}else r="30 days";return{id:e._id,date:e.startDate||e.createdAt,description:"ads"===e.purchaseMethod?`${n} - Ad Unlock`:"admin_assigned"===e.purchaseMethod?`${n} - Admin Assigned`:`${n} - Package Purchase`,amount:"ads"===e.purchaseMethod||"admin_assigned"===e.purchaseMethod?0:e.amountPaid||t.price||0,method:"ads"===e.purchaseMethod?"Ad Unlock":"manual_payment"===e.purchaseMethod?"Manual Payment":"admin_assigned"===e.purchaseMethod?`Assigned by ${e.assignedByRole||"Admin"}`:"Balance",status:new Date(e.endDate)>new Date?"Active":"Expired",type:"admin_assigned"===e.purchaseMethod?"Admin Assignment":"Package Purchase",packageName:n,duration:r,assignedBy:e.assignedBy,assignedByRole:e.assignedByRole}}),p=a.map(e=>{var t;const n=(e.packageSnapshot||e.package||{}).name||"Premium Package";return{id:e._id,date:e.createdAt,description:e.isBalanceTopUp?"Balance Top-up":`Payment for: ${n}`,amount:e.amount,method:(null==(t=e.paymentMethod)?void 0:t.toUpperCase())||"PAYMENT",status:"approved"===e.status?"Completed":"pending"===e.status?"Pending":"declined"===e.status?"Declined":"Cancelled",type:e.isBalanceTopUp?"Balance Top-up":"Payment Request",packageName:e.isBalanceTopUp?"Balance Top-up":n,duration:e.isBalanceTopUp?"Account Credit":"Package Payment"}}),m=[...h,...p].sort((e,t)=>new Date(t.date)-new Date(e.date));r(m)}catch(t){console.error("Failed to load billing data:",t)}finally{o(!1)}},h=e=>{switch(e.toLowerCase()){case"active":case"completed":return"success";case"expired":default:return"default";case"pending":return"warning";case"declined":case"cancelled":return"error"}},p=e=>{const t=e.toLowerCase();if(t.includes("assigned by"))return"warning";switch(t){case"balance":return"primary";case"ad unlock":return"success";case"bkash":case"manual payment":return"info";case"rocket":return"secondary";case"nagad":return"warning";case"upay":return"error";default:return"default"}};return e?jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:u.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:u.description})]}),jsxRuntimeExports.jsx(Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Billing History"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",paragraph:!0,children:"View your transaction history and package subscriptions."}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:3,sx:{mb:4},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:4,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Total Spent"}),jsxRuntimeExports.jsxs(Typography,{variant:"h4",color:"primary",children:["",l.totalSpent.toFixed(2)]})]})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:4,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Active Packages"}),jsxRuntimeExports.jsx(Typography,{variant:"h4",color:"success.main",children:l.activePackages})]})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:4,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Total Purchases"}),jsxRuntimeExports.jsx(Typography,{variant:"h4",color:"info.main",children:l.totalPackages})]})})})]}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Transaction History"}),jsxRuntimeExports.jsx(Divider,{sx:{mb:2}}),a?jsxRuntimeExports.jsx(Box,{children:Array.from({length:5}).map((e,t)=>jsxRuntimeExports.jsxs(Box,{sx:{mb:2},children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"80%"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",width:"60%"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rectangular",width:"100%",height:20,sx:{mt:1}})]},t))}):n.length>0?jsxRuntimeExports.jsx(TableContainer,{component:Paper,variant:"outlined",children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Date"}),jsxRuntimeExports.jsx(TableCell,{children:"Description"}),jsxRuntimeExports.jsx(TableCell,{children:"Amount"}),jsxRuntimeExports.jsx(TableCell,{children:"Method"}),jsxRuntimeExports.jsx(TableCell,{children:"Status"})]})}),jsxRuntimeExports.jsx(TableBody,{children:n.map(e=>{return jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:(t=e.date,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",fontWeight:600,children:e.packageName}),jsxRuntimeExports.jsxs(Typography,{variant:"caption",color:"text.secondary",children:[e.type,"  ",e.duration]})]})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Typography,{variant:"body2",fontWeight:600,children:e.amount>0?`${e.amount.toFixed(2)}`:"Free"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Chip,{label:e.method,color:p(e.method),size:"small"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Chip,{label:e.status,color:h(e.status),size:"small"})})]},e.id);var t})})]})}):jsxRuntimeExports.jsx(Alert,{severity:"info",children:"No billing history available. Start by purchasing a package!"})]})})]}):jsxRuntimeExports.jsx(Container,{maxWidth:"lg",sx:{py:4},children:jsxRuntimeExports.jsx(Alert,{severity:"warning",children:"Please login to view your billing history."})})},getPaymentIcon=e=>{switch(e){case"Phone":default:return Phone;case"AccountBalance":return AccountBalance}},PaymentMethods=()=>{var e,t,n,r,i;const{user:s}=useAuth(),{settings:a}=useSettings(),o=useNavigate(),l=useLocation(),[c,u]=reactExports.useState(null),[d,h]=reactExports.useState(!1),[p,m]=reactExports.useState(""),[f,g]=reactExports.useState(""),[x,v]=reactExports.useState(!1),[y,_]=reactExports.useState(0),[E,b]=reactExports.useState(""),[C,S]=reactExports.useState(!1),[T,R]=reactExports.useState(!1),[j,w]=reactExports.useState({}),[A,I]=reactExports.useState(!0),k=generateGenericPageMetaTags("payment",a);reactExports.useEffect(()=>{var e,t;(null==(e=l.state)?void 0:e.package)&&u(l.state.package),(null==(t=l.state)?void 0:t.isTopUp)&&h(!0)},[l.state]),reactExports.useEffect(()=>{(async()=>{try{I(!0);const e=await paymentMethodsAPI.getAll({enabled:"true"});e.data.success?w(e.data.data||{}):console.error("Failed to load payment methods:",e.data.message)}catch(e){console.error("Error loading payment methods:",e)}finally{I(!1)}})()},[]);const M=()=>{v(!1),_(0),b(""),R(!1),g("")};return s?c||d?jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:k.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:k.description})]}),jsxRuntimeExports.jsx(Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:d?"Add Balance":"Payment Methods"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",paragraph:!0,children:d?"Choose your preferred payment method to add balance to your account.":"Choose your preferred payment method to complete the purchase."}),jsxRuntimeExports.jsx(Card,{sx:{mb:4},children:jsxRuntimeExports.jsx(CardContent,{children:d?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Add Balance to Your Account"}),jsxRuntimeExports.jsxs(Box,{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",children:[jsxRuntimeExports.jsx(TextField,{label:"Amount ()",type:"number",value:p,onChange:e=>m(e.target.value),placeholder:"Enter amount",size:"small",inputProps:{min:1}}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Current Balance: ",(null==s?void 0:s.balance)||"0.00"]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Selected Package"}),jsxRuntimeExports.jsxs(Box,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",children:null==c?void 0:c.name}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:null==c?void 0:c.description})]}),jsxRuntimeExports.jsxs(Typography,{variant:"h5",color:"primary",fontWeight:600,children:["",null==c?void 0:c.price]})]})]})})}),jsxRuntimeExports.jsx(Typography,{variant:"h5",gutterBottom:!0,sx:{mb:3},children:"Select Payment Method"}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:3,children:A?jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,children:jsxRuntimeExports.jsx(Typography,{variant:"body1",textAlign:"center",children:"Loading payment methods..."})}):Object.entries(j).filter(([e,t])=>t.isEnabled).map(([e,t])=>{const n=getPaymentIcon(t.icon),r=t.accountNumber&&!t.accountNumber.includes("XXXXXXXX");return jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsx(Card,{sx:{cursor:r?"pointer":"not-allowed",height:"100%",opacity:r?1:.6,"&:hover":r?{boxShadow:4,transform:"translateY(-2px)"}:{},transition:"all 0.2s",position:"relative"},onClick:()=>(e=>{const t=j[e];if(t&&t.accountNumber&&!t.accountNumber.includes("XXXXXXXX")){if(d){const e=parseFloat(p);if(!p||e<1)return void alert("Please enter a valid amount (minimum 1)")}g(e),v(!0),_(0)}else alert(`${(null==t?void 0:t.name)||e} is not configured yet. Please contact support or try another payment method.`)})(e),children:jsxRuntimeExports.jsxs(CardContent,{sx:{textAlign:"center",py:4},children:[jsxRuntimeExports.jsx(Box,{sx:{width:60,height:60,borderRadius:2,bgcolor:t.color,color:"white",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:jsxRuntimeExports.jsx(n,{fontSize:"large"})}),jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:t.name}),jsxRuntimeExports.jsxs(Box,{display:"flex",flexDirection:"column",gap:1,alignItems:"center",children:[jsxRuntimeExports.jsx(Chip,{label:t.type,size:"small",color:"primary"}),!r&&jsxRuntimeExports.jsx(Chip,{label:"Not Configured",size:"small",color:"error",variant:"outlined"})]})]})})},e)})}),jsxRuntimeExports.jsxs(Dialog,{open:x,onClose:M,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"500px"}},children:[jsxRuntimeExports.jsxs(DialogTitle,{children:["Payment with ",null==(e=j[f])?void 0:e.name]}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsxs(Stepper,{activeStep:y,orientation:"vertical",children:[jsxRuntimeExports.jsxs(Step,{children:[jsxRuntimeExports.jsx(StepLabel,{children:"Follow Payment Instructions"}),jsxRuntimeExports.jsxs(StepContent,{children:[jsxRuntimeExports.jsxs(Box,{sx:{mb:2},children:[jsxRuntimeExports.jsx(Alert,{severity:"info",sx:{mb:2},children:jsxRuntimeExports.jsxs(Box,{display:"flex",alignItems:"center",gap:1,children:[jsxRuntimeExports.jsxs(Typography,{variant:"body2",children:["Send money to: ",null==(t=j[f])?void 0:t.accountNumber]}),jsxRuntimeExports.jsx(Button$2,{size:"small",startIcon:jsxRuntimeExports.jsx(ContentCopy,{}),onClick:()=>{var e,t;return t=null==(e=j[f])?void 0:e.accountNumber,void navigator.clipboard.writeText(t)},children:"Copy"})]})}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",gutterBottom:!0,children:["Amount: ",d?p:null==c?void 0:c.price]}),jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"Step-by-step instructions:"}),jsxRuntimeExports.jsx(List$1,{dense:!0,children:(P=(null==(n=j[f])?void 0:n.instructions)||[],L=d?p:null==c?void 0:c.price,D=(null==(r=null==s?void 0:s.id)?void 0:r.slice(-8))||"USER",O=(null==(i=j[f])?void 0:i.accountNumber)||"N/A",P.map(e=>e.replace("{amount}",`${L}`).replace("{userId}",D).replace("{mobileNumber}",O))).map((e,t)=>jsxRuntimeExports.jsxs(ListItem,{children:[jsxRuntimeExports.jsx(ListItemIcon,{children:jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{bgcolor:"primary.main",color:"white",borderRadius:"50%",width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:t+1})}),jsxRuntimeExports.jsx(ListItemText,{primary:e})]},t))})]}),jsxRuntimeExports.jsx(Box,{sx:{mb:1},children:jsxRuntimeExports.jsx(Button$2,{variant:"contained",onClick:()=>{_(e=>e+1)},sx:{mt:1,mr:1},children:"I've Completed Payment"})})]})]}),jsxRuntimeExports.jsxs(Step,{children:[jsxRuntimeExports.jsx(StepLabel,{children:"Enter Transaction Details"}),jsxRuntimeExports.jsxs(StepContent,{children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{mb:2},children:"Please enter the transaction ID you received after completing the payment."}),jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"Transaction ID",value:E,onChange:e=>b(e.target.value),placeholder:"Enter transaction ID from SMS or app",sx:{mb:2}}),jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mb:2},children:jsxRuntimeExports.jsx(Typography,{variant:"body2",children:"Make sure the transaction ID is correct. This will be used to verify your payment."})}),jsxRuntimeExports.jsxs(Box,{sx:{mb:1},children:[jsxRuntimeExports.jsx(Button$2,{variant:"contained",onClick:async()=>{var e,t;if(E.trim())try{S(!0),d?await paymentsAPI.submitBalanceTopUp({amount:parseFloat(p),paymentMethod:f,transactionId:E.trim()}):await paymentsAPI.submitPayment({packageId:c._id,paymentMethod:f,transactionId:E.trim()}),R(!0),_(2)}catch(n){console.error("Payment submission failed:",n),alert((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to submit payment. Please try again.")}finally{S(!1)}else alert("Please enter the transaction ID")},sx:{mt:1,mr:1},disabled:!E.trim()||C,children:C?"Submitting...":"Submit Payment"}),jsxRuntimeExports.jsx(Button$2,{onClick:()=>{_(e=>e-1)},sx:{mt:1,mr:1},children:"Back"})]})]})]}),jsxRuntimeExports.jsxs(Step,{children:[jsxRuntimeExports.jsx(StepLabel,{children:"Payment Submitted"}),jsxRuntimeExports.jsxs(StepContent,{children:[jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mb:2},children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",children:["Your ",d?"balance top-up":"payment"," has been submitted successfully!"]})}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",sx:{mb:2},children:[d?"We'll review your payment within 24 hours and add the balance to your account once verified.":"We'll review your payment within 24 hours and activate your package once verified.","You'll receive a notification once your package is active."]}),jsxRuntimeExports.jsxs(Box,{sx:{mb:1},children:[jsxRuntimeExports.jsx(Button$2,{variant:"contained",onClick:()=>o("/billing"),sx:{mt:1,mr:1},children:"View Billing History"}),jsxRuntimeExports.jsx(Button$2,{onClick:()=>o("/dashboard"),sx:{mt:1,mr:1},children:"Go to Dashboard"})]})]})]})]})}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button$2,{onClick:M,children:"Close"})})]})]}):jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsx(Alert,{severity:"info",children:"No package selected. Please go back to packages and select one to purchase."}),jsxRuntimeExports.jsx(Box,{mt:2,children:jsxRuntimeExports.jsx(Button$2,{variant:"contained",onClick:()=>o("/packages"),children:"Browse Packages"})})]}):jsxRuntimeExports.jsx(Container,{maxWidth:"lg",sx:{py:4},children:jsxRuntimeExports.jsx(Alert,{severity:"warning",children:"Please login to access payment methods."})});var P,L,D,O},About=()=>{const{settings:e}=useSettings(),t=generateGenericPageMetaTags("about",e);return jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:t.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:t.description}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:t.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:t.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:t.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:t.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:t.ogImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:t.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:t.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:t.twitterImage}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:t.ogUrl})]}),jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mb:6},children:[jsxRuntimeExports.jsx(Typography,{variant:"h2",component:"h1",gutterBottom:!0,sx:{fontWeight:800,mb:2},children:"About BDStream"}),jsxRuntimeExports.jsx(Typography,{variant:"h5",color:"text.secondary",sx:{maxWidth:800,mx:"auto"},children:"Your Premier Live TV Streaming Platform - Bringing Quality Entertainment to Bangladesh and Beyond"})]}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:4,sx:{mb:6},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:6,children:jsxRuntimeExports.jsx(Card,{sx:{height:"100%",borderRadius:3},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Our Mission"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"At BDStream, we are committed to providing high-quality live television streaming services to viewers in Bangladesh and around the world. Our platform offers a comprehensive selection of channels, including news, sports, entertainment, and cultural programming."}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"We believe in making quality entertainment accessible to everyone, with a focus on reliability, user experience, and community engagement."})]})})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:6,children:jsxRuntimeExports.jsx(Card,{sx:{height:"100%",borderRadius:3},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Our Vision"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"To become the leading digital entertainment platform in South Asia, connecting millions of viewers with their favorite content through innovative technology and exceptional service."}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"We envision a future where quality entertainment is seamlessly accessible across all devices, fostering cultural exchange and community building through shared viewing experiences."})]})})})]}),jsxRuntimeExports.jsxs(Box,{sx:{mb:6},children:[jsxRuntimeExports.jsx(Typography,{variant:"h3",component:"h2",gutterBottom:!0,sx:{textAlign:"center",fontWeight:700,mb:4},children:"Why Choose BDStream?"}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:3,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{textAlign:"center",p:3,borderRadius:3,height:"100%"},children:[jsxRuntimeExports.jsx(LiveTv$1,{sx:{fontSize:48,color:"primary.main",mb:2}}),jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Live Streaming"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Real-time access to your favorite channels with minimal buffering and high-quality streams."})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{textAlign:"center",p:3,borderRadius:3,height:"100%"},children:[jsxRuntimeExports.jsx(Speed,{sx:{fontSize:48,color:"primary.main",mb:2}}),jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Fast & Reliable"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Optimized streaming technology ensures smooth playback across all devices and connections."})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{textAlign:"center",p:3,borderRadius:3,height:"100%"},children:[jsxRuntimeExports.jsx(Devices,{sx:{fontSize:48,color:"primary.main",mb:2}}),jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Multi-Platform"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Watch on any device - desktop, mobile, tablet, or smart TV with our responsive platform."})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:jsxRuntimeExports.jsxs(Card,{sx:{textAlign:"center",p:3,borderRadius:3,height:"100%"},children:[jsxRuntimeExports.jsx(Security,{sx:{fontSize:48,color:"primary.main",mb:2}}),jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Secure & Private"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Your privacy and security are our top priorities with encrypted connections and data protection."})]})})]})]}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:6},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Our Story"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"BDStream was founded with a simple yet powerful vision: to bring the best of live television to the digital age. Starting as a small project focused on serving the Bangladeshi community, we have grown into a comprehensive streaming platform that serves viewers worldwide."}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"Our journey began with the recognition that traditional television viewing was evolving, and there was a need for a modern, accessible platform that could deliver quality content to viewers on their terms. Today, we're proud to offer a diverse selection of channels and programming that reflects the rich cultural tapestry of our audience."}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"As we continue to grow, our commitment to quality, innovation, and community remains at the heart of everything we do. We invite you to join us on this exciting journey as we shape the future of digital entertainment."})]})}),jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600},children:"Ready to Start Streaming?"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Join thousands of viewers who trust BDStream for their entertainment needs."}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:["Visit ",jsxRuntimeExports.jsx("strong",{children:"bdstream.site"})," to explore our channel lineup and start watching today."]})]})]})},PrivacyPolicy=()=>{const{settings:e}=useSettings(),t=generateGenericPageMetaTags("privacy",e);return jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:t.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:t.description}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:t.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:t.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:t.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:t.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:t.ogImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:t.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:t.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:t.twitterImage}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:t.ogUrl})]}),jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mb:6},children:[jsxRuntimeExports.jsx(Typography,{variant:"h2",component:"h1",gutterBottom:!0,sx:{fontWeight:800,mb:2},children:"Privacy Policy"}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",color:"text.secondary",children:["Last updated: ",(new Date).toLocaleDateString()]})]}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Introduction"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:'BDStream ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website bdstream.site and use our live TV streaming services.'}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"By using our service, you consent to the data practices described in this policy. If you do not agree with our policies and practices, please do not use our service."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Information We Collect"}),jsxRuntimeExports.jsx(Typography,{variant:"h5",component:"h3",gutterBottom:!0,sx:{fontWeight:600,mt:3},children:"Personal Information"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"We may collect personal information that you voluntarily provide to us when you:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Register for an account"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Subscribe to our services"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Contact us for support"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Participate in surveys or promotions"})]}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"This information may include your name, email address, phone number, and other contact details."}),jsxRuntimeExports.jsx(Typography,{variant:"h5",component:"h3",gutterBottom:!0,sx:{fontWeight:600,mt:3},children:"Usage Information"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"We automatically collect certain information about your device and how you interact with our service, including:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"IP address and location data"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Browser type and version"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Device information and operating system"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Pages visited and time spent on our service"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Streaming preferences and viewing history"})]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"How We Use Your Information"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"We use the information we collect to:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Provide and maintain our streaming services"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Process your account registration and manage your subscription"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Improve our service quality and user experience"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Send you important updates and notifications"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Respond to your inquiries and provide customer support"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Analyze usage patterns to optimize our platform"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Ensure compliance with legal obligations"})]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Information Sharing and Disclosure"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"We do not sell, trade, or otherwise transfer your personal information to third parties without your consent, except in the following circumstances:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsxs(Typography,{component:"li",variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Service Providers:"})," We may share information with trusted third-party service providers who assist us in operating our website and providing our services."]}),jsxRuntimeExports.jsxs(Typography,{component:"li",variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Legal Requirements:"})," We may disclose information if required by law or to protect our rights, property, or safety."]}),jsxRuntimeExports.jsxs(Typography,{component:"li",variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Business Transfers:"})," In the event of a merger, acquisition, or sale of assets, your information may be transferred as part of the transaction."]})]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Data Security"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"We implement appropriate technical and organizational security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. These measures include:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Encryption of data in transit and at rest"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Regular security assessments and updates"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Access controls and authentication measures"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Secure hosting and infrastructure"})]}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"However, no method of transmission over the internet or electronic storage is 100% secure, and we cannot guarantee absolute security."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Your Rights and Choices"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"You have the following rights regarding your personal information:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsxs(Typography,{component:"li",variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Access:"})," Request access to your personal information"]}),jsxRuntimeExports.jsxs(Typography,{component:"li",variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Correction:"})," Request correction of inaccurate information"]}),jsxRuntimeExports.jsxs(Typography,{component:"li",variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Deletion:"})," Request deletion of your personal information"]}),jsxRuntimeExports.jsxs(Typography,{component:"li",variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Opt-out:"})," Unsubscribe from marketing communications"]}),jsxRuntimeExports.jsxs(Typography,{component:"li",variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Data Portability:"})," Request a copy of your data in a portable format"]})]}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"To exercise these rights, please contact us using the information provided below."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Cookies and Tracking Technologies"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"We use cookies and similar tracking technologies to enhance your experience on our website. These technologies help us:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Remember your preferences and settings"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Analyze website traffic and usage patterns"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Provide personalized content and recommendations"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Improve our service performance"})]}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"You can control cookie settings through your browser preferences, though disabling cookies may affect some functionality of our service."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Changes to This Privacy Policy"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:'We may update this Privacy Policy from time to time to reflect changes in our practices or for other operational, legal, or regulatory reasons. We will notify you of any material changes by posting the new Privacy Policy on this page and updating the "Last updated" date.'}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"We encourage you to review this Privacy Policy periodically to stay informed about how we protect your information."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Contact Us"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"If you have any questions about this Privacy Policy or our data practices, please contact us:"}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Website:"})," bdstream.site",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Email:"})," privacy@bdstream.site",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Address:"})," BDStream, Bangladesh"]}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"We will respond to your inquiry as soon as possible and within the timeframes required by law."})]})})]})},Disclaimer=()=>{const{settings:e}=useSettings(),t=generateGenericPageMetaTags("disclaimer",e);return jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:t.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:t.description}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:t.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:t.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:t.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:t.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:t.ogImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:t.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:t.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:t.twitterImage}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:t.ogUrl})]}),jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mb:6},children:[jsxRuntimeExports.jsx(Typography,{variant:"h2",component:"h1",gutterBottom:!0,sx:{fontWeight:800,mb:2},children:"Disclaimer"}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",color:"text.secondary",children:["Last updated: ",(new Date).toLocaleDateString()]})]}),jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mb:4},children:jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Important:"})," Please read this disclaimer carefully before using BDStream services. By accessing and using our platform, you acknowledge that you have read, understood, and agree to be bound by the terms outlined in this disclaimer."]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"General Information"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"BDStream (bdstream.site) is a live TV streaming platform that provides access to various television channels and content. The information, content, and services provided on this website are for general informational and entertainment purposes only."}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"While we strive to provide accurate and up-to-date information, we make no representations or warranties of any kind, express or implied, about the completeness, accuracy, reliability, suitability, or availability of the information, products, services, or related graphics contained on our platform."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Content Disclaimer"}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Third-Party Content:"})," BDStream may stream content from various sources, including third-party broadcasters and content providers. We do not own, control, or endorse the content provided by these third parties."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Content Accuracy:"})," We do not guarantee the accuracy, completeness, or timeliness of any content streamed through our platform. Content may be subject to delays, interruptions, or technical issues beyond our control."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Content Availability:"})," Channel availability and programming schedules may vary and are subject to change without notice. We reserve the right to modify, suspend, or discontinue any content or service at any time."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"User Responsibility:"})," Users are responsible for ensuring that their use of our service complies with applicable laws and regulations in their jurisdiction."]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Technical Disclaimer"}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Service Availability:"})," While we strive to maintain high service availability, BDStream may experience technical difficulties, maintenance periods, or service interruptions. We do not guarantee uninterrupted access to our services."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Streaming Quality:"})," Streaming quality may vary based on factors including but not limited to:"]}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Your internet connection speed and stability"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Device capabilities and browser compatibility"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Server load and network conditions"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Geographic location and regional restrictions"})]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"System Requirements:"})," Users are responsible for ensuring their devices meet the minimum system requirements for optimal streaming performance."]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Legal Disclaimer"}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Compliance:"})," BDStream operates in compliance with applicable laws and regulations. However, users are responsible for ensuring their use of our service complies with local laws and regulations in their jurisdiction."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Copyright:"})," All content streamed through our platform is subject to copyright and other intellectual property rights. Users must respect these rights and use the content in accordance with applicable copyright laws."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"No Legal Advice:"})," Information provided on our platform does not constitute legal advice. Users should consult with qualified legal professionals for specific legal guidance."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Jurisdiction:"})," This disclaimer is governed by the laws of Bangladesh, and any disputes shall be subject to the exclusive jurisdiction of the courts in Bangladesh."]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Limitation of Liability"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"To the maximum extent permitted by applicable law, BDStream and its affiliates, officers, directors, employees, and agents shall not be liable for any direct, indirect, incidental, special, consequential, or punitive damages arising out of or relating to:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Use of or inability to use our services"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Any content accessed through our platform"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Service interruptions or technical issues"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Loss of data or information"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Any other damages resulting from your use of our service"})]}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"This limitation applies regardless of the form of action, whether in contract, tort, negligence, strict liability, or otherwise."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Indemnification"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"You agree to indemnify, defend, and hold harmless BDStream and its affiliates, officers, directors, employees, and agents from and against any claims, damages, losses, liabilities, costs, and expenses (including reasonable attorneys' fees) arising out of or relating to:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Your use of our services"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Violation of these terms or applicable laws"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Infringement of third-party rights"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Any other actions or omissions on your part"})]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Changes to Disclaimer"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"BDStream reserves the right to modify, update, or change this disclaimer at any time without prior notice. Changes will be effective immediately upon posting on our website."}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"Your continued use of our services after any changes constitutes acceptance of the updated disclaimer. We encourage you to review this disclaimer periodically."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Contact Information"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"If you have any questions about this disclaimer or our services, please contact us:"}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Website:"})," bdstream.site",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Email:"})," legal@bdstream.site",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Address:"})," BDStream, Bangladesh"]}),jsxRuntimeExports.jsx(Alert,{severity:"info",sx:{mt:2},children:jsxRuntimeExports.jsx(Typography,{variant:"body2",children:"By using BDStream services, you acknowledge that you have read and understood this disclaimer and agree to be bound by its terms."})})]})})]})},Terms=()=>{const{settings:e}=useSettings(),t=generateGenericPageMetaTags("terms",e);return jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:t.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:t.description}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:t.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:t.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:t.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:t.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:t.ogImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:t.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:t.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:t.twitterImage}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:t.ogUrl})]}),jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mb:6},children:[jsxRuntimeExports.jsx(Typography,{variant:"h2",component:"h1",gutterBottom:!0,sx:{fontWeight:800,mb:2},children:"Terms of Service"}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",color:"text.secondary",children:["Last updated: ",(new Date).toLocaleDateString()]})]}),jsxRuntimeExports.jsx(Alert,{severity:"info",sx:{mb:4},children:jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Important:"})," These Terms of Service govern your use of BDStream services. By accessing or using our platform, you agree to be bound by these terms."]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"1. Acceptance of Terms"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"By accessing and using BDStream (bdstream.site), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service."}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"These Terms of Service apply to all users of the site, including without limitation users who are browsers, vendors, customers, merchants, and/or contributors of content."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"2. Description of Service"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"BDStream is a live TV streaming platform that provides access to various television channels and content. Our service includes:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Live streaming of television channels"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Access to on-demand content (where available)"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"User account management"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Customer support services"})]}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"We reserve the right to modify, suspend, or discontinue any aspect of our service at any time."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"3. User Accounts and Registration"}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Account Creation:"})," To access certain features of our service, you may be required to create an account. You are responsible for maintaining the confidentiality of your account information."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Account Security:"})," You are responsible for all activities that occur under your account. You must notify us immediately of any unauthorized use of your account."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Account Termination:"})," We reserve the right to terminate or suspend your account at any time for violation of these terms or for any other reason at our sole discretion."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Age Requirements:"})," You must be at least 13 years old to use our service. If you are under 18, you must have parental or guardian consent."]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"4. Acceptable Use Policy"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"You agree not to use our service to:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:3,mb:2},children:[jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Violate any applicable laws or regulations"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Infringe upon the rights of others"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Transmit harmful, offensive, or inappropriate content"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Attempt to gain unauthorized access to our systems"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Interfere with or disrupt our service"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Use our service for commercial purposes without permission"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body1",children:"Attempt to reverse engineer or copy our technology"})]}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"Violation of this policy may result in immediate termination of your account and legal action."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"5. Intellectual Property Rights"}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Our Rights:"})," BDStream and its original content, features, and functionality are owned by BDStream and are protected by international copyright, trademark, patent, trade secret, and other intellectual property laws."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Third-Party Content:"})," Content streamed through our platform may be owned by third parties. We do not claim ownership of such content and respect the intellectual property rights of content owners."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"User Content:"})," By submitting content to our platform, you grant us a non-exclusive, worldwide, royalty-free license to use, reproduce, and distribute such content."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Copyright Complaints:"})," If you believe your copyright has been infringed, please contact us with the details of your claim."]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"6. Privacy and Data Protection"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"Your privacy is important to us. Our collection and use of personal information is governed by our Privacy Policy, which is incorporated into these Terms of Service by reference."}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"By using our service, you consent to the collection and use of your information as described in our Privacy Policy."}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"We implement appropriate security measures to protect your personal information, but no method of transmission over the internet is 100% secure."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"7. Disclaimers and Limitations"}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Service Availability:"}),' We strive to provide reliable service but do not guarantee uninterrupted access. Our service is provided "as is" without warranties of any kind.']}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Content Accuracy:"})," We do not guarantee the accuracy, completeness, or timeliness of any content streamed through our platform."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Limitation of Liability:"})," To the maximum extent permitted by law, BDStream shall not be liable for any indirect, incidental, special, consequential, or punitive damages."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Force Majeure:"})," We shall not be liable for any failure to perform due to circumstances beyond our reasonable control."]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"8. Termination"}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Termination by You:"})," You may terminate your account at any time by contacting us or using the account deletion feature in your account settings."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Termination by Us:"})," We may terminate or suspend your account immediately, without prior notice, for conduct that we believe violates these Terms of Service or is harmful to other users or our service."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Effect of Termination:"})," Upon termination, your right to use our service will cease immediately, and we may delete your account and related data."]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"9. Governing Law and Dispute Resolution"}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Governing Law:"})," These Terms of Service shall be governed by and construed in accordance with the laws of Bangladesh."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Dispute Resolution:"})," Any disputes arising from these terms or your use of our service shall be resolved through binding arbitration in Bangladesh."]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:[jsxRuntimeExports.jsx("strong",{children:"Jurisdiction:"})," You agree to submit to the personal jurisdiction of the courts located in Bangladesh for any legal proceedings."]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"10. Changes to Terms"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"We reserve the right to modify these Terms of Service at any time. We will notify users of any material changes by posting the new terms on our website."}),jsxRuntimeExports.jsx(Typography,{variant:"body1",children:"Your continued use of our service after any changes constitutes acceptance of the updated terms. We encourage you to review these terms periodically."})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"11. Contact Information"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:"If you have any questions about these Terms of Service, please contact us:"}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",paragraph:!0,children:[jsxRuntimeExports.jsx("strong",{children:"Website:"})," bdstream.site",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Email:"})," legal@bdstream.site",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Address:"})," BDStream, Bangladesh"]}),jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mt:2},children:jsxRuntimeExports.jsx(Typography,{variant:"body2",children:"Thank you for choosing BDStream. We appreciate your trust in our service."})})]})})]})},Contact=()=>{const{settings:e}=useSettings(),t=generateGenericPageMetaTags("contact",e);return jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:t.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:t.description}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:t.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:t.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:t.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:t.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:t.ogImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:t.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:t.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:t.twitterImage}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:t.ogUrl})]}),jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mb:6},children:[jsxRuntimeExports.jsx(Typography,{variant:"h2",component:"h1",gutterBottom:!0,sx:{fontWeight:800,mb:2},children:"Contact Us"}),jsxRuntimeExports.jsx(Typography,{variant:"h5",color:"text.secondary",sx:{maxWidth:800,mx:"auto"},children:"Get in touch with the BDStream team. We're here to help with any questions or support you need."})]}),jsxRuntimeExports.jsx(Grid,{container:!0,spacing:4,justifyContent:"center",children:jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,md:8,lg:6,children:jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",flexDirection:"column",gap:3},children:[jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",component:"h3",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:"Contact Information"}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",mb:3},children:[jsxRuntimeExports.jsx(Email,{sx:{mr:2,color:"primary.main"}}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{fontWeight:600},children:"Email"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"support@bdstream.site"})]})]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(LocationOn,{sx:{mr:2,color:"primary.main"}}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{fontWeight:600},children:"Address"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Dhaka, Bangladesh"})]})]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",component:"h3",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:"Business Hours"}),jsxRuntimeExports.jsxs(Box,{sx:{mb:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{fontWeight:600},children:"Monday - Friday"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"9:00 AM - 6:00 PM (GMT+6)"})]}),jsxRuntimeExports.jsxs(Box,{sx:{mb:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{fontWeight:600},children:"Saturday"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"10:00 AM - 4:00 PM (GMT+6)"})]}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{fontWeight:600},children:"Sunday"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Closed"})]})]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",component:"h3",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:"Quick Support"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",paragraph:!0,children:"For immediate assistance, you can also:"}),jsxRuntimeExports.jsxs(Box,{component:"ul",sx:{pl:2},children:[jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body2",color:"text.secondary",children:"Check our FAQ section for common questions"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body2",color:"text.secondary",children:"Visit our help center for detailed guides"}),jsxRuntimeExports.jsx(Typography,{component:"li",variant:"body2",color:"text.secondary",children:"Follow us on social media for updates"})]})]})})]})})})]})},FAQ=()=>{const[e,t]=reactExports.useState(!1),{settings:n}=useSettings(),r=generateGenericPageMetaTags("faq",n),i=e=>(n,r)=>{t(!!r&&e)},s=[{question:"What is BDStream?",answer:"BDStream is a premier live TV streaming platform that provides access to various television channels and content. We offer high-quality streaming services with a focus on reliability and user experience."},{question:"How do I start watching channels on BDStream?",answer:"To start watching, simply visit bdstream.site, browse our channel list, and click on any channel to begin streaming. No registration is required for basic viewing, though creating an account provides additional features."},{question:"Is BDStream free to use?",answer:"Yes, BDStream offers free access to our basic streaming services. We may offer premium features or subscription plans in the future, but our core streaming service remains free for all users."},{question:"What devices can I use to watch BDStream?",answer:"BDStream is compatible with most modern devices including desktop computers, laptops, tablets, and smartphones. We support all major browsers including Chrome, Firefox, Safari, and Edge."},{question:"Why is my stream buffering or not loading?",answer:"Streaming issues can be caused by several factors including slow internet connection, high server load, or browser compatibility issues. Try refreshing the page, checking your internet connection, or using a different browser."},{question:"Do you have channels from Bangladesh?",answer:"Yes, we prioritize Bangladeshi channels and content. Our platform features a wide selection of channels from Bangladesh, including news, entertainment, sports, and cultural programming."},{question:"Can I watch BDStream on my mobile device?",answer:"Absolutely! BDStream is fully responsive and optimized for mobile devices. You can access our platform through any mobile browser for a seamless streaming experience on the go."},{question:"How do I report a technical issue?",answer:"If you encounter any technical issues, please contact our support team through the Contact Us page or email us at support@bdstream.site. Include details about the issue and your device information for faster resolution."},{question:"Is my personal information safe with BDStream?",answer:"Yes, we take your privacy seriously. We implement appropriate security measures to protect your personal information. Please review our Privacy Policy for detailed information about how we handle your data."},{question:"Can I request specific channels to be added?",answer:"We welcome channel requests from our users. While we cannot guarantee that all requests will be fulfilled, we do consider user feedback when expanding our channel lineup. Please contact us with your suggestions."},{question:"What internet speed do I need for smooth streaming?",answer:"For optimal streaming quality, we recommend a minimum internet speed of 2 Mbps for standard definition and 5 Mbps for high definition content. Higher speeds will provide better quality and reduce buffering."},{question:"Do you offer customer support?",answer:"Yes, we provide customer support through multiple channels including email, contact forms, and our FAQ section. Our support team is available during business hours to assist you with any questions or issues."},{question:"Can I use BDStream outside of Bangladesh?",answer:"Yes, BDStream is accessible worldwide. However, some content may be subject to regional restrictions based on licensing agreements. We strive to make our service available to users globally."},{question:"How often do you add new channels?",answer:"We regularly update our channel lineup based on user demand, content availability, and licensing agreements. New channels are added as they become available and meet our quality standards."},{question:"What should I do if a channel is not working?",answer:"If a specific channel is not working, try refreshing the page first. If the issue persists, it may be due to temporary technical difficulties or content availability. Please report the issue through our contact form."}];return jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("title",{children:r.title}),jsxRuntimeExports.jsx("meta",{name:"description",content:r.description}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:r.keywords}),jsxRuntimeExports.jsx("meta",{property:"og:title",content:r.ogTitle}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:r.ogDescription}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:"website"}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:r.ogUrl}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:r.ogImage}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:r.twitterTitle}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:r.twitterDescription}),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:r.twitterImage}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:r.ogUrl})]}),jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mb:6},children:[jsxRuntimeExports.jsx(Typography,{variant:"h2",component:"h1",gutterBottom:!0,sx:{fontWeight:800,mb:2},children:"Frequently Asked Questions"}),jsxRuntimeExports.jsx(Typography,{variant:"h5",color:"text.secondary",sx:{maxWidth:800,mx:"auto"},children:"Find answers to common questions about BDStream and our live TV streaming services."})]}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",mb:3},children:[jsxRuntimeExports.jsx(Help,{sx:{mr:2,color:"primary.main",fontSize:32}}),jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",sx:{fontWeight:700},children:"General Questions"})]}),s.slice(0,5).map((t,n)=>jsxRuntimeExports.jsxs(Accordion,{expanded:e===`panel${n}`,onChange:i(`panel${n}`),sx:{mb:2,"&:before":{display:"none"},boxShadow:"none",border:"1px solid",borderColor:"divider",borderRadius:2},children:[jsxRuntimeExports.jsx(AccordionSummary,{expandIcon:jsxRuntimeExports.jsx(ExpandMore,{}),sx:{"&:hover":{backgroundColor:"action.hover"},borderRadius:2},children:jsxRuntimeExports.jsx(Typography,{variant:"h6",sx:{fontWeight:600},children:t.question})}),jsxRuntimeExports.jsx(AccordionDetails,{children:jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",children:t.answer})})]},n))]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Technical Support"}),s.slice(5,10).map((t,n)=>jsxRuntimeExports.jsxs(Accordion,{expanded:e===`panel${n+5}`,onChange:i(`panel${n+5}`),sx:{mb:2,"&:before":{display:"none"},boxShadow:"none",border:"1px solid",borderColor:"divider",borderRadius:2},children:[jsxRuntimeExports.jsx(AccordionSummary,{expandIcon:jsxRuntimeExports.jsx(ExpandMore,{}),sx:{"&:hover":{backgroundColor:"action.hover"},borderRadius:2},children:jsxRuntimeExports.jsx(Typography,{variant:"h6",sx:{fontWeight:600},children:t.question})}),jsxRuntimeExports.jsx(AccordionDetails,{children:jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",children:t.answer})})]},n+5))]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3,mb:4},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h2",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:"Service & Content"}),s.slice(10).map((t,n)=>jsxRuntimeExports.jsxs(Accordion,{expanded:e===`panel${n+10}`,onChange:i(`panel${n+10}`),sx:{mb:2,"&:before":{display:"none"},boxShadow:"none",border:"1px solid",borderColor:"divider",borderRadius:2},children:[jsxRuntimeExports.jsx(AccordionSummary,{expandIcon:jsxRuntimeExports.jsx(ExpandMore,{}),sx:{"&:hover":{backgroundColor:"action.hover"},borderRadius:2},children:jsxRuntimeExports.jsx(Typography,{variant:"h6",sx:{fontWeight:600},children:t.question})}),jsxRuntimeExports.jsx(AccordionDetails,{children:jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",children:t.answer})})]},n+10))]})}),jsxRuntimeExports.jsx(Card,{sx:{borderRadius:3},children:jsxRuntimeExports.jsxs(CardContent,{sx:{p:4,textAlign:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600},children:"Still Have Questions?"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"If you couldn't find the answer you're looking for, our support team is here to help."}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",children:["Contact us at ",jsxRuntimeExports.jsx("strong",{children:"support@bdstream.site"})," or visit our"," ",jsxRuntimeExports.jsx("a",{href:"/contact",style:{color:"inherit",textDecoration:"underline"},children:"Contact page"})," ","for personalized assistance."]})]})})]})},AdBlockerWarning=()=>{const e=useNavigate(),[t,n]=reactExports.useState(!1),[r,i]=reactExports.useState(null);return jsxRuntimeExports.jsx(Container,{maxWidth:"md",sx:{py:4},children:jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:4,textAlign:"center"},children:[jsxRuntimeExports.jsxs(Box,{sx:{mb:3},children:[jsxRuntimeExports.jsx(Block,{sx:{fontSize:64,color:"error.main",mb:2}}),jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",gutterBottom:!0,color:"error.main",children:"Ad Blocker Detected"}),jsxRuntimeExports.jsx(Typography,{variant:"h6",color:"text.secondary",paragraph:!0,children:"We've detected that you're using an ad blocker"})]}),jsxRuntimeExports.jsxs(Alert,{severity:"warning",sx:{mb:3,textAlign:"left"},children:[jsxRuntimeExports.jsx(Typography,{variant:"body1",sx:{fontWeight:"bold"},children:"Why we need ads:"}),jsxRuntimeExports.jsx(Typography,{variant:"body2",children:"Our website is free to use and relies on advertising revenue to cover hosting costs, content licensing, and ongoing development. Ad blockers prevent us from providing this service to you."})]}),jsxRuntimeExports.jsxs(Box,{sx:{mb:4,textAlign:"left"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"To continue using our website:"}),jsxRuntimeExports.jsxs(List$1,{children:[jsxRuntimeExports.jsxs(ListItem,{children:[jsxRuntimeExports.jsx(ListItemIcon,{children:jsxRuntimeExports.jsx(CheckCircle,{color:"success"})}),jsxRuntimeExports.jsx(ListItemText,{primary:"Disable your ad blocker for this website",secondary:"Add our domain to your ad blocker's whitelist"})]}),jsxRuntimeExports.jsxs(ListItem,{children:[jsxRuntimeExports.jsx(ListItemIcon,{children:jsxRuntimeExports.jsx(CheckCircle,{color:"success"})}),jsxRuntimeExports.jsx(ListItemText,{primary:"Click 'Check Again' button",secondary:"After disabling the ad blocker, click the button to verify"})]}),jsxRuntimeExports.jsxs(ListItem,{children:[jsxRuntimeExports.jsx(ListItemIcon,{children:jsxRuntimeExports.jsx(CheckCircle,{color:"success"})}),jsxRuntimeExports.jsx(ListItemText,{primary:"Enjoy ad-supported content",secondary:"We'll show you relevant, non-intrusive ads"})]})]})]}),jsxRuntimeExports.jsx(Divider,{sx:{my:3}}),jsxRuntimeExports.jsxs(Box,{sx:{mb:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Popular Ad Blockers - How to Disable:"}),jsxRuntimeExports.jsxs(List$1,{dense:!0,children:[jsxRuntimeExports.jsx(ListItem,{children:jsxRuntimeExports.jsx(ListItemText,{primary:"uBlock Origin",secondary:"Click the uBlock icon  Click the power button to disable for this site"})}),jsxRuntimeExports.jsxs(ListItem,{children:[jsxRuntimeExports.jsx(ListItemIcon,{children:jsxRuntimeExports.jsx(Info,{color:"info"})}),jsxRuntimeExports.jsx(ListItemText,{primary:"AdBlock Plus",secondary:"Click the AdBlock icon  Click 'Don't run on pages on this domain'"})]}),jsxRuntimeExports.jsxs(ListItem,{children:[jsxRuntimeExports.jsx(ListItemIcon,{children:jsxRuntimeExports.jsx(Info,{color:"info"})}),jsxRuntimeExports.jsx(ListItemText,{primary:"AdBlock",secondary:"Click the AdBlock icon  Click 'Site' to disable for this site"})]}),jsxRuntimeExports.jsxs(ListItem,{children:[jsxRuntimeExports.jsx(ListItemIcon,{children:jsxRuntimeExports.jsx(Info,{color:"info"})}),jsxRuntimeExports.jsx(ListItemText,{primary:"Brave Browser",secondary:"Click the shield icon  Click 'Site settings'  Disable 'Shields'"})]})]})]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[jsxRuntimeExports.jsx(Button$2,{variant:"contained",color:"primary",size:"large",startIcon:jsxRuntimeExports.jsx(Refresh,{}),onClick:()=>{n(!0),i(null);const t=document.createElement("div");t.className="adsbox",t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.innerHTML="&nbsp;",document.body.appendChild(t),setTimeout(()=>{const r=0===t.offsetHeight||0===t.offsetWidth||"none"===t.style.display||"hidden"===t.style.visibility;document.body.removeChild(t),n(!1),r?i("active"):(i("disabled"),setTimeout(()=>{e("/",{replace:!0})},2e3))},100)},disabled:t,sx:{minWidth:200},children:t?"Checking...":"Check Again"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",color:"secondary",size:"large",startIcon:jsxRuntimeExports.jsx(Close,{}),onClick:()=>{localStorage.setItem("adblocker_bypass","true"),e("/",{replace:!0})},sx:{minWidth:200},children:"Continue Anyway (Temporary)"})]}),t&&jsxRuntimeExports.jsx(Box,{sx:{mt:3},children:jsxRuntimeExports.jsx(Typography,{variant:"body2",color:"text.secondary",children:"Checking if ad blocker is disabled..."})}),"disabled"===r&&jsxRuntimeExports.jsx(Alert,{severity:"success",sx:{mt:3},children:"Ad blocker disabled! Redirecting you to the website..."}),"active"===r&&jsxRuntimeExports.jsx(Alert,{severity:"warning",sx:{mt:3},children:"Ad blocker is still active. Please disable it and try again."}),jsxRuntimeExports.jsx(Box,{sx:{mt:4,p:2,bgcolor:"grey.50",borderRadius:1},children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"text.secondary",children:[jsxRuntimeExports.jsx("strong",{children:"Note:"})," We respect your privacy and only show non-intrusive ads. Our ads are carefully selected to provide value while supporting our free service."]})})]})})},APITest=()=>{const[e,t]=reactExports.useState(null),[n,r]=reactExports.useState(null),[i,s]=reactExports.useState({}),[a,o]=reactExports.useState(!1),l=async()=>{o(!0);try{const e=await healthCheck();t(e)}catch(e){t({success:!1,message:"Health check failed with error",details:{error:e.message}})}finally{o(!1)}},c=async()=>{var e,t,n,r,i,a;o(!0);const l={};try{try{const e=await channelsAPI.getAll();l.channels={success:!0,status:e.status,count:Array.isArray(e.data)?e.data.length:"N/A",data:e.data}}catch(c){l.channels={success:!1,error:c.message,status:null==(e=c.response)?void 0:e.status,details:null==(t=c.response)?void 0:t.data}}try{const e=await categoriesAPI.getAll();l.categories={success:!0,status:e.status,count:Array.isArray(e.data)?e.data.length:"N/A",data:e.data}}catch(c){l.categories={success:!1,error:c.message,status:null==(n=c.response)?void 0:n.status,details:null==(r=c.response)?void 0:r.data}}try{const e=await eventsAPI.getCarousel();l.events={success:!0,status:e.status,count:Array.isArray(e.data)?e.data.length:"N/A",data:e.data}}catch(c){l.events={success:!1,error:c.message,status:null==(i=c.response)?void 0:i.status,details:null==(a=c.response)?void 0:a.data}}s(l)}catch(c){console.error("API testing failed:",c)}finally{o(!1)}};return reactExports.useEffect(()=>{l(),(()=>{const e=debugAPIConfig();r(e)})(),c()},[]),jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{py:4},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:2,mb:4},children:[jsxRuntimeExports.jsx(BugReport,{color:"primary",sx:{fontSize:40}}),jsxRuntimeExports.jsx(Typography,{variant:"h4",children:"API Configuration Test Page"})]}),jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:3,mb:3},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"Configuration Information"}),jsxRuntimeExports.jsx(Paper,{variant:"outlined",sx:{p:2,bgcolor:"grey.50"},children:jsxRuntimeExports.jsx(Typography,{variant:"body2",component:"pre",sx:{whiteSpace:"pre-wrap",fontSize:"0.75rem"},children:JSON.stringify(n,null,2)})})]}),jsxRuntimeExports.jsx(Divider,{sx:{my:3}}),jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:3,mb:3},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",children:"API Health Check"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"small",startIcon:jsxRuntimeExports.jsx(Refresh,{}),onClick:l,disabled:a,children:a?"Checking...":"Test Again"})]}),e&&jsxRuntimeExports.jsxs(Alert,{severity:e.success?"success":"error",icon:e.success?jsxRuntimeExports.jsx(CheckCircle,{}):jsxRuntimeExports.jsx(Error$1,{}),sx:{mb:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"body1",gutterBottom:!0,children:e.message}),e.details&&jsxRuntimeExports.jsx(Typography,{variant:"body2",component:"pre",sx:{whiteSpace:"pre-wrap",fontSize:"0.75rem"},children:JSON.stringify(e.details,null,2)})]})]}),jsxRuntimeExports.jsx(Divider,{sx:{my:3}}),jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:3,mb:3},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",children:"API Endpoint Tests"}),jsxRuntimeExports.jsx(Button$2,{variant:"outlined",size:"small",startIcon:jsxRuntimeExports.jsx(Refresh,{}),onClick:c,disabled:a,children:a?"Testing...":"Test All APIs"})]}),Object.keys(i).length>0&&jsxRuntimeExports.jsx(Box,{sx:{display:"flex",flexDirection:"column",gap:2},children:Object.entries(i).map(([e,t])=>jsxRuntimeExports.jsxs(Alert,{severity:t.success?"success":"error",icon:t.success?jsxRuntimeExports.jsx(CheckCircle,{}):jsxRuntimeExports.jsx(Error$1,{}),children:[jsxRuntimeExports.jsxs(Typography,{variant:"body1",gutterBottom:!0,children:[jsxRuntimeExports.jsxs("strong",{children:[e.toUpperCase(),":"]})," ",t.success?"Success":"Failed"]}),t.success?jsxRuntimeExports.jsxs(Typography,{variant:"body2",children:["Status: ",t.status," | Count: ",t.count]}):jsxRuntimeExports.jsxs(Typography,{variant:"body2",component:"pre",sx:{whiteSpace:"pre-wrap",fontSize:"0.75rem"},children:["Error: ",t.error,"Status: ",t.status,"Details: ",JSON.stringify(t.details,null,2)]})]},e))})]}),jsxRuntimeExports.jsx(Alert,{severity:"info",icon:jsxRuntimeExports.jsx(Info,{}),children:jsxRuntimeExports.jsxs(Typography,{variant:"body2",children:[jsxRuntimeExports.jsx("strong",{children:"How to use:"})," This page helps identify API configuration issues in production builds. If any tests fail, check your backend server configuration and network connectivity."]})})]})},ProtectedRoute=({children:e,requireAdmin:t=!1})=>{const{user:n,loading:r,isAdmin:i}=useAuth();return r?jsxRuntimeExports.jsx(Preloader,{isLoading:!0}):n?t&&!i()?jsxRuntimeExports.jsx(Navigate,{to:"/"}):e:jsxRuntimeExports.jsx(Navigate,{to:"/login"})},PublicRoute=({children:e})=>{const{user:t,loading:n}=useAuth();return n?jsxRuntimeExports.jsx(Preloader,{isLoading:!0}):t?jsxRuntimeExports.jsx(Navigate,{to:"/"}):e},DynamicTitle=()=>(useAnalytics(),reactExports.useEffect(()=>{(async()=>{try{const e=(await settingsAPI.get()).data;e&&e.title?document.title=e.title:document.title="Live TV Streaming"}catch(e){console.error("Failed to fetch settings for title:",e),document.title="Live TV Streaming"}})()},[]),null),AppRoutes=()=>jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/channels",element:jsxRuntimeExports.jsx(Channels,{})}),jsxRuntimeExports.jsx(Route,{path:"/channels/play/:id",element:jsxRuntimeExports.jsx(ChannelPlayer,{})}),jsxRuntimeExports.jsx(Route,{path:"/channels/play/:id/:slug",element:jsxRuntimeExports.jsx(ChannelPlayer,{})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Dashboard,{})})}),jsxRuntimeExports.jsx(Route,{path:"/packages",element:jsxRuntimeExports.jsx(Packages,{})}),jsxRuntimeExports.jsx(Route,{path:"/billing",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(BillingHistory,{})})}),jsxRuntimeExports.jsx(Route,{path:"/payment",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(PaymentMethods,{})})}),jsxRuntimeExports.jsx(Route,{path:"/favorites",element:jsxRuntimeExports.jsx(Favorites,{})}),jsxRuntimeExports.jsx(Route,{path:"/events",element:jsxRuntimeExports.jsx(Events,{})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(About,{})}),jsxRuntimeExports.jsx(Route,{path:"/privacy-policy",element:jsxRuntimeExports.jsx(PrivacyPolicy,{})}),jsxRuntimeExports.jsx(Route,{path:"/disclaimer",element:jsxRuntimeExports.jsx(Disclaimer,{})}),jsxRuntimeExports.jsx(Route,{path:"/terms",element:jsxRuntimeExports.jsx(Terms,{})}),jsxRuntimeExports.jsx(Route,{path:"/contact",element:jsxRuntimeExports.jsx(Contact,{})}),jsxRuntimeExports.jsx(Route,{path:"/faq",element:jsxRuntimeExports.jsx(FAQ,{})}),jsxRuntimeExports.jsx(Route,{path:"/adblocker-warning",element:jsxRuntimeExports.jsx(AdBlockerWarning,{})}),jsxRuntimeExports.jsx(Route,{path:"/api-test",element:jsxRuntimeExports.jsx(APITest,{})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(PublicRoute,{children:jsxRuntimeExports.jsx(Login,{})})}),jsxRuntimeExports.jsx(Route,{path:"/register",element:jsxRuntimeExports.jsx(PublicRoute,{children:jsxRuntimeExports.jsx(Register,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin",element:jsxRuntimeExports.jsx(ProtectedRoute,{requireAdmin:!0,children:jsxRuntimeExports.jsx(Admin,{})})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/"})})]}),App=()=>{const[e,t]=reactExports.useState(!0);reactExports.useEffect(()=>{const e=setTimeout(()=>{t(!1)},3e3);return()=>clearTimeout(e)},[]);return jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(Provider_default,{store:store,children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(SettingsProvider,{children:jsxRuntimeExports.jsx(FavoritesProvider,{children:jsxRuntimeExports.jsxs(BrowserRouter,{children:[jsxRuntimeExports.jsx(SecurityProtector,{}),jsxRuntimeExports.jsx(AdBlockerDetector,{children:jsxRuntimeExports.jsx(AdBlocker,{children:jsxRuntimeExports.jsxs(Layout,{children:[jsxRuntimeExports.jsx(DynamicTitle,{}),jsxRuntimeExports.jsx(AppRoutes,{})]})})}),jsxRuntimeExports.jsx(Preloader,{isLoading:e,onComplete:()=>{t(!1)}})]})})})})})})},setupGlobalErrorHandling=()=>{window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason),e.preventDefault()}),window.addEventListener("error",e=>{console.error("JavaScript error:",e.error),e.preventDefault()}),window.addEventListener("error",e=>{e.target&&e.target!==window&&console.error("Resource loading error:",e.target.src||e.target.href)},!0)},basePalette={cyan:"#00bcd4",violet:"#7c4dff",danger:"#ef4444",warning:"#f59e0b",info:"#0ea5e9",success:"#22c55e",neutral:{50:"#f8fafc",100:"#f1f5f9"}},typographyScale={fontFamily:"'Plus Jakarta Sans', 'Space Grotesk', -apple-system, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', Arial, 'Noto Sans'",weights:{regular:400,medium:500,semibold:600,bold:700,extrabold:800},sizes:{sm:"0.875rem",base:"1rem",md:"1.125rem",lg:"1.25rem",xl:"1.5rem","2xl":"1.875rem","3xl":"2.25rem","4xl":"3rem"},lineHeights:{tight:1.15,relaxed:1.55}},radii={sm:8,md:12,lg:18},shadows={xs:"0 1px 2px rgba(0,0,0,0.08)",sm:"0 2px 4px rgba(0,0,0,0.12)",md:"0 4px 12px rgba(0,0,0,0.18)",lg:"0 8px 24px rgba(0,0,0,0.28)",glow:"0 0 0 1px rgba(124,77,255,0.4), 0 4px 24px -4px rgba(124,77,255,0.5)"},semantic={light:{bg:{base:basePalette.neutral[50],elevation:"#ffffff",subtle:basePalette.neutral[100]},text:{primary:"#0b0b1a",secondary:"rgba(11,11,26,0.65)",muted:"rgba(11,11,26,0.5)"},gradientAccent:`linear-gradient(135deg, ${basePalette.cyan}, ${basePalette.violet})`},dark:{bg:{base:"#0a0f14",elevation:"rgba(255,255,255,0.06)",subtle:"#101827"},text:{primary:"rgba(255,255,255,0.94)",secondary:"rgba(255,255,255,0.72)",muted:"rgba(255,255,255,0.55)"},gradientAccent:`linear-gradient(135deg, ${basePalette.cyan}, ${basePalette.violet})`}},createAppTheme=(e="light")=>{const t=semantic[e];return createTheme({palette:{mode:e,primary:{main:basePalette.cyan},secondary:{main:basePalette.violet},error:{main:basePalette.danger},warning:{main:basePalette.warning},info:{main:basePalette.info},success:{main:basePalette.success},background:{default:t.bg.base,paper:t.bg.elevation},text:{primary:t.text.primary,secondary:t.text.secondary},divider:"dark"===e?"rgba(255,255,255,0.12)":"rgba(0,0,0,0.12)"},shape:{borderRadius:radii.md},typography:{fontFamily:typographyScale.fontFamily,fontWeightRegular:typographyScale.weights.regular,fontWeightMedium:typographyScale.weights.medium,fontWeightBold:typographyScale.weights.bold,h1:{fontWeight:typographyScale.weights.extrabold,fontSize:typographyScale.sizes["4xl"],lineHeight:typographyScale.lineHeights.tight},h2:{fontWeight:typographyScale.weights.extrabold,fontSize:typographyScale.sizes["3xl"],lineHeight:typographyScale.lineHeights.tight},h3:{fontWeight:typographyScale.weights.bold,fontSize:typographyScale.sizes["2xl"]},h4:{fontWeight:typographyScale.weights.bold,fontSize:typographyScale.sizes.xl},h5:{fontWeight:typographyScale.weights.semibold,fontSize:typographyScale.sizes.lg},h6:{fontWeight:typographyScale.weights.semibold,fontSize:typographyScale.sizes.md},body1:{fontSize:typographyScale.sizes.base,lineHeight:typographyScale.lineHeights.relaxed},body2:{fontSize:typographyScale.sizes.sm,lineHeight:typographyScale.lineHeights.relaxed},button:{fontWeight:typographyScale.weights.semibold}},shadows:["none",shadows.xs,shadows.sm,shadows.sm,shadows.md,shadows.md,shadows.lg,shadows.lg,shadows.lg,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow,shadows.glow],components:{MuiCssBaseline:{styleOverrides:{":root":{"--mui-font-family":typographyScale.fontFamily},body:{background:"var(--page-bg)",color:"var(--ds-text-primary)",fontFeatureSettings:"ss01, ss02"}}},MuiButton:{defaultProps:{disableElevation:!0},styleOverrides:{root:{textTransform:"none",borderRadius:radii.md,fontWeight:typographyScale.weights.semibold,letterSpacing:".3px"},sizeLarge:{padding:"0.875rem 1.5rem"},containedPrimary:{backgroundImage:t.gradientAccent}}},MuiCard:{styleOverrides:{root:{borderRadius:radii.lg,backdropFilter:"blur(12px)",border:"1px solid var(--glass-border)"}}},MuiPaper:{styleOverrides:{root:{borderRadius:radii.lg,backgroundImage:"none"}}},MuiOutlinedInput:{styleOverrides:{root:{borderRadius:radii.md}}},MuiAppBar:{styleOverrides:{root:{background:"var(--glass-bg)",backdropFilter:"blur(12px)"}}},MuiDialog:{styleOverrides:{paper:{borderRadius:radii.lg}}},MuiTooltip:{styleOverrides:{tooltip:{borderRadius:radii.sm,backdropFilter:"blur(8px)"}}}}})};setupGlobalErrorHandling();const Root=()=>{const e=useMediaQuery("(prefers-color-scheme: dark)"),[t,n]=reactExports.useState(()=>localStorage.getItem("theme")||(e?"dark":"light"));reactExports.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t)},[t]);const r=reactExports.useMemo(()=>createAppTheme(t),[t]);return jsxRuntimeExports.jsx(ColorModeContext.Provider,{value:{mode:t,setMode:n},children:jsxRuntimeExports.jsxs(ThemeProvider,{theme:r,children:[jsxRuntimeExports.jsx(CssBaseline,{}),jsxRuntimeExports.jsx(App,{})]})})};client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React$2.StrictMode,{children:jsxRuntimeExports.jsx(HelmetProvider,{children:jsxRuntimeExports.jsx(Root,{})})}));export{keysOf as A,onDispose as B,untrack as C,DOMEvent as D,HTMLMediaProvider as H,IS_CHROME as I,ListSymbol as L,QualitySymbol as Q,RAFLoop as R,TextTrack as T,VideoProvider$1 as V,__vitePreload as _,HTMLAirPlayAdapter as a,isString as b,peek as c,camelToKebabCase as d,effect as e,TextTrackSymbol as f,isUndefined as g,coerceToError as h,isHLSSupported as i,loadScript as j,isFunction as k,listenEvent as l,createScope as m,signal as n,TimeRange as o,preconnect as p,deferredPromise as q,isArray$1 as r,scoped as s,isObject as t,isNumber as u,isBoolean as v,appendParamsToURL as w,IS_SERVER as x,canGoogleCastSrc as y,IS_IOS as z};
